/*! For license information please see test.bundle.js.LICENSE.txt */
(function(){var __webpack_modules__={95318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},51859:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var r=n(11526),i=Math.abs,o=String.fromCharCode,s=Object.assign;function a(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function h(e){return e.length}function f(e){return e.length}function p(e,t){return t.push(e),e}var m=1,g=1,v=0,y=0,b=0,w="";function x(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:m,column:g,length:s,return:""}}function _(e,t){return s(x("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return b=y>0?u(w,--y):0,g--,10===b&&(g=1,m--),b}function E(){return b=y<v?u(w,y++):0,g++,10===b&&(g=1,m++),b}function T(){return u(w,y)}function C(){return y}function M(e,t){return d(w,e,t)}function k(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function P(e){return m=g=1,v=h(w=e),y=0,[]}function A(e){return w="",e}function I(e){return a(M(y-1,O(91===e?e+2:40===e?e+1:e)))}function R(e){for(;(b=T())&&b<33;)E();return k(e)>2||k(b)>3?"":" "}function L(e,t){for(;--t&&E()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return M(e,C()+(t<6&&32==T()&&32==E()))}function O(e){for(;E();)switch(b){case e:return y;case 34:case 39:34!==e&&39!==e&&O(b);break;case 40:41===e&&O(e);break;case 92:E()}return y}function N(e,t){for(;E()&&e+b!==57&&(e+b!==84||47!==T()););return"/*"+M(t,y-1)+"*"+o(47===e?e:E())}function D(e){for(;!k(T());)E();return M(e,y)}var F="-ms-",B="-moz-",Z="-webkit-",V="comm",z="rule",U="decl",j="@keyframes";function H(e,t){for(var n="",r=f(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function G(e,t,n,r){switch(e.type){case"@import":case U:return e.return=e.return||e.value;case V:return"";case j:return e.return=e.value+"{"+H(e.children,r)+"}";case z:e.value=e.props.join(",")}return h(n=H(e.children,r))?e.return=e.value+"{"+n+"}":""}function W(e,t){switch(function(e,t){return(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3)}(e,t)){case 5103:return Z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Z+e+B+e+F+e+e;case 6828:case 4268:return Z+e+F+e+e;case 6165:return Z+e+F+"flex-"+e+e;case 5187:return Z+e+l(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return Z+e+F+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return Z+e+F+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return Z+e+F+l(e,"shrink","negative")+e;case 5292:return Z+e+F+l(e,"basis","preferred-size")+e;case 6060:return Z+"box-"+l(e,"-grow","")+Z+e+F+l(e,"grow","positive")+e;case 4554:return Z+l(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,Z+"$1"),/(image-set)/,Z+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,Z+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,Z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+B+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?W(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,h(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+Z)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Z+(45===u(e,14)?"inline-":"")+"box$3$1"+Z+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return Z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Z+e+F+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Z+e+F+e+e}return e}function $(e){return A(q("",null,null,null,[""],e=P(e),0,[0],e))}function q(e,t,n,r,i,s,a,u,d){for(var f=0,m=0,g=a,v=0,y=0,b=0,w=1,x=1,_=1,M=0,k="",P=i,A=s,O=r,F=k;x;)switch(b=M,M=E()){case 40:if(108!=b&&58==F.charCodeAt(g-1)){-1!=c(F+=l(I(M),"&","&\f"),"&\f")&&(_=-1);break}case 34:case 39:case 91:F+=I(M);break;case 9:case 10:case 13:case 32:F+=R(b);break;case 92:F+=L(C()-1,7);continue;case 47:switch(T()){case 42:case 47:p(K(N(E(),C()),t,n),d);break;default:F+="/"}break;case 123*w:u[f++]=h(F)*_;case 125*w:case 59:case 0:switch(M){case 0:case 125:x=0;case 59+m:y>0&&h(F)-g&&p(y>32?X(F+";",r,n,g-1):X(l(F," ","")+";",r,n,g-2),d);break;case 59:F+=";";default:if(p(O=Y(F,t,n,f,m,i,u,k,P=[],A=[],g),s),123===M)if(0===m)q(F,t,O,O,P,s,g,u,A);else switch(v){case 100:case 109:case 115:q(e,O,O,r&&p(Y(e,O,O,0,0,i,u,k,i,P=[],g),A),i,A,g,u,r?P:A);break;default:q(F,O,O,O,[""],A,0,u,A)}}f=m=y=0,w=_=1,k=F="",g=a;break;case 58:g=1+h(F),y=b;default:if(w<1)if(123==M)--w;else if(125==M&&0==w++&&125==S())continue;switch(F+=o(M),M*w){case 38:_=m>0?1:(F+="\f",-1);break;case 44:u[f++]=(h(F)-1)*_,_=1;break;case 64:45===T()&&(F+=I(E())),v=T(),m=g=h(k=F+=D(C())),M++;break;case 45:45===b&&2==h(F)&&(w=0)}}return s}function Y(e,t,n,r,o,s,c,u,h,p,m){for(var g=o-1,v=0===o?s:[""],y=f(v),b=0,w=0,_=0;b<r;++b)for(var S=0,E=d(e,g+1,g=i(w=c[b])),T=e;S<y;++S)(T=a(w>0?v[S]+" "+E:l(E,/&\f/g,v[S])))&&(h[_++]=T);return x(e,t,n,0===o?z:u,h,p,m)}function K(e,t,n){return x(e,t,n,V,o(b),d(e,2,-2),0)}function X(e,t,n,r){return x(e,t,n,U,d(e,0,r),d(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,i=0;r=i,i=T(),38===r&&12===i&&(t[n]=1),!k(i);)E();return M(e,y)},Q=function(e,t){return A(function(e,t){var n=-1,r=44;do{switch(k(r)){case 0:38===r&&12===T()&&(t[n]=1),e[n]+=J(y-1,t,n);break;case 2:e[n]+=I(r);break;case 4:if(44===r){e[++n]=58===T()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=E());return e}(P(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var i=[],o=Q(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case U:e.return=W(e.value,e.length);break;case j:return H([_(e,{value:l(e.value,"@","@"+Z)})],r);case z:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return H([_(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return H([_(e,{props:[l(t,/:(plac\w+)/,":-webkit-input-$1")]}),_(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),_(e,{props:[l(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var o,s,a={},l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;l.push(e)}));var c,u,d,h,p=[G,(h=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&h(e)})],m=(u=[te,ne].concat(i,p),d=f(u),function(e,t,n,r){for(var i="",o=0;o<d;o++)i+=u[o](e,t,n,r)||"";return i});s=function(e,t,n,r){c=n,H($(e?e+"{"+t.styles+"}":t.styles),m),r&&(g.inserted[t.name]=!0)};var g={key:t,sheet:new r.m({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:s};return g.sheet.hydrate(l),g}},67866:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},34759:function(e,t,n){"use strict";n.d(t,{C:function(){return s},T:function(){return l},w:function(){return a}});var r=n(67294),i=n(51859),o=(n(94199),Object.prototype.hasOwnProperty,(0,r.createContext)("undefined"!=typeof HTMLElement?(0,i.Z)({key:"css"}):null));var s=o.Provider,a=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(o);return e(t,i,n)}))},l=(0,r.createContext)({})},70917:function(e,t,n){"use strict";n.d(t,{xB:function(){return l},iv:function(){return c},F4:function(){return u}});var r=n(67294),i=(n(51859),n(34759)),o=(n(8679),n(70444)),s=n(94199),a=n(11526),l=(0,i.w)((function(e,t){var n=e.styles,l=(0,s.O)([n],void 0,(0,r.useContext)(i.T)),c=(0,r.useRef)();return(0,r.useLayoutEffect)((function(){var e=t.key+"-global",n=new a.m({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),c.current=[n,r],function(){n.flush()}}),[t]),(0,r.useLayoutEffect)((function(){var e=c.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.M)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null}));function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.O)(t)}var u=function(){var e=c.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},94199:function(e,t,n){"use strict";n.d(t,{O:function(){return m}});var r=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o=n(67866),s=/[A-Z]|^ms/g,a=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!=typeof e},u=(0,o.Z)((function(e){return l(e)?e:e.replace(s,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(a,(function(e,t,n){return f={name:t,styles:n,next:f},t}))}return 1===i[e]||l(e)||"number"!=typeof t||0===t?t:t+"px"};function h(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return f={name:n.name,styles:n.styles,next:f},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)f={name:r.name,styles:r.styles,next:f},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=h(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!=typeof s)null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":c(s)&&(r+=u(o)+":"+d(o,s)+";");else if(!Array.isArray(s)||"string"!=typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=h(e,t,s);switch(o){case"animation":case"animationName":r+=u(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var l=0;l<s.length;l++)c(s[l])&&(r+=u(o)+":"+d(o,s[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=f,o=n(e);return f=i,h(e,t,o)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var f,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,o="";f=void 0;var s=e[0];null==s||void 0===s.raw?(i=!1,o+=h(n,t,s)):o+=s[0];for(var a=1;a<e.length;a++)o+=h(n,t,e[a]),i&&(o+=s[a]);p.lastIndex=0;for(var l,c="";null!==(l=p.exec(o));)c+="-"+l[1];return{name:r(o)+c,styles:o,next:f}}},11526:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}()},70444:function(e,t,n){"use strict";n.d(t,{f:function(){return r},M:function(){return i}});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0);i=i.next}while(void 0!==i)}}},34700:function(e,t,n){"use strict";n.r(t),n.d(t,{AllHitsRaycaster:function(){return F},AmmoPhysics:function(){return H},Clock:function(){return B},ClosestRaycaster:function(){return D},ExtendedGroup:function(){return c.k},ExtendedMesh:function(){return l.f},ExtendedObject3D:function(){return a.r},PhysicsLoader:function(){return I.G},Types:function(){return L}});var r=n(54996),i=n(47070),o=n(2212);var s=class{constructor(e,t){this.physics=e,this.ammo=t,this.ignoreScale=!1,this.isSoftBody=!1,this.offset={x:0,y:0,z:0},this.errors=[],this.checkCollisions=!1,this.breakable=!1,this.fractureImpulse=1,this.didUpdate=!1,this.skipUpdate=!1,this._emitUpdateEvents=!1,this._needUpdate=!1,this.tmpEuler=new o.Euler,this.tmpQuaternion=new o.Quaternion,this.tmpBtVector3=new Ammo.btVector3,this.tmpBtVector3_1=new Ammo.btVector3,this.tmpBtQuaternion=new Ammo.btQuaternion(0,0,0,1),this.eventEmitter=new i.Events,this.name=t.name}destructor(){this.eventEmitter&&this.eventEmitter.removeAllListeners(),Ammo.destroy(this.tmpBtVector3),Ammo.destroy(this.tmpBtVector3_1),Ammo.destroy(this.tmpBtQuaternion),Ammo.destroy(this.ammo.getCollisionShape()),Ammo.destroy(this.ammo)}setupEventEmitter(){void 0===this.eventEmitter&&(this.eventEmitter=new i.Events)}get needUpdate(){return this._needUpdate}set needUpdate(e){!e&&this._needUpdate&&(this.didUpdate=!0),this._needUpdate=e}onUpdateEvent(e,t=!1){this.setupEventEmitter(),this._emitUpdateEvents=!0,t?this.eventEmitter.once("update",(()=>{e()})):this.eventEmitter.on("update",(()=>{e()}))}get on(){return{update:e=>this.onUpdateEvent(e),collision:e=>this.onCollision(e)}}get once(){return{update:e=>this.onUpdateEvent(e,!0)}}onCollision(e){this.checkCollisions=!0,this.physics.collisionEvents.on("collision",(t=>{const{bodies:n,event:r}=t;n[0].name===this.name?e(n[1],r):n[1].name===this.name&&e(n[0],r)}))}transform(){const e=this.physics.worldTransform;this.ammo.getMotionState().getWorldTransform(e)}refresh(){const e=this.physics.worldTransform;this.ammo.getMotionState().setWorldTransform(e)}setRotation(e,t,n){const r=this.tmpEuler.set(e,t,n),i=this.tmpQuaternion.set(0,0,0,1);i.setFromEuler(r),this.tmpBtQuaternion.setValue(0,0,0,1);const o=this.tmpBtQuaternion;o.setValue(i.x,i.y,i.z,i.w);this.physics.worldTransform.setRotation(o)}get rotation(){let e,t,n;const r=this.physics.worldTransform.getRotation();let i=this.tmpQuaternion.set(r.x(),r.y(),r.z(),r.w());i.w>1&&(i=i.normalize());const o=2*Math.acos(i.w),s=Math.sqrt(1-i.w*i.w);return s<.001?(e=i.x,t=i.y,n=i.z):(e=i.x/s,t=i.y/s,n=i.z/s),{x:e*o,y:t*o,z:n*o}}get quaternion(){const e=this.physics.worldTransform.getRotation();return{x:e.x(),y:e.y(),z:e.z(),w:e.w()}}setPosition(e,t,n){this.physics.worldTransform.getOrigin().setValue(e,t,n)}get position(){const e=this.physics.worldTransform;return{x:e.getOrigin().x(),y:e.getOrigin().y(),z:e.getOrigin().z()}}get velocity(){return{x:this.ammo.getLinearVelocity().x(),y:this.ammo.getLinearVelocity().y(),z:this.ammo.getLinearVelocity().z()}}get angularVelocity(){return{x:this.ammo.getAngularVelocity().x(),y:this.ammo.getAngularVelocity().y(),z:this.ammo.getAngularVelocity().z()}}setVelocity(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.setLinearVelocity(this.tmpBtVector3)}setVelocityX(e){this.tmpBtVector3.setValue(e,this.velocity.y,this.velocity.z),this.ammo.setLinearVelocity(this.tmpBtVector3)}setVelocityY(e){this.tmpBtVector3.setValue(this.velocity.x,e,this.velocity.z),this.ammo.setLinearVelocity(this.tmpBtVector3)}setVelocityZ(e){this.tmpBtVector3.setValue(this.velocity.x,this.velocity.y,e),this.ammo.setLinearVelocity(this.tmpBtVector3)}setAngularVelocity(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.setAngularVelocity(this.tmpBtVector3)}setAngularVelocityX(e){this.tmpBtVector3.setValue(e,this.angularVelocity.y,this.angularVelocity.z),this.ammo.setAngularVelocity(this.tmpBtVector3)}setAngularVelocityY(e){this.tmpBtVector3.setValue(this.angularVelocity.x,e,this.angularVelocity.z),this.ammo.setAngularVelocity(this.tmpBtVector3)}setAngularVelocityZ(e){this.tmpBtVector3.setValue(this.angularVelocity.x,this.angularVelocity.y,e),this.ammo.setAngularVelocity(this.tmpBtVector3)}applyForce(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.applyCentralImpulse(this.tmpBtVector3)}applyForceX(e){this.tmpBtVector3.setValue(e,0,0),this.ammo.applyCentralImpulse(this.tmpBtVector3)}applyForceY(e){this.tmpBtVector3.setValue(0,e,0),this.ammo.applyCentralImpulse(this.tmpBtVector3)}applyForceZ(e){this.tmpBtVector3.setValue(0,0,e),this.ammo.applyCentralImpulse(this.tmpBtVector3)}applyCentralForce(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.applyCentralForce(this.tmpBtVector3)}applyCentralImpulse(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.applyCentralImpulse(this.tmpBtVector3)}applyCentralLocalForce(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.applyCentralLocalForce(this.tmpBtVector3)}applyImpulse(e,t){this.tmpBtVector3.setValue(e.x||0,e.y||0,e.z||0),this.tmpBtVector3_1.setValue(t.x||0,t.y||0,t.z||0),this.ammo.applyImpulse(this.tmpBtVector3,this.tmpBtVector3_1)}applyLocalTorque(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.applyLocalTorque(this.tmpBtVector3)}applyTorque(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.applyTorque(this.tmpBtVector3)}applyTorqueImpulse(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.applyTorqueImpulse(this.tmpBtVector3)}setCollisionFlags(e){this.ammo.setCollisionFlags(e)}getCollisionFlags(){return this.ammo.getCollisionFlags()}setRestitution(e){this.ammo.setRestitution(e)}setBounciness(e){this.setRestitution(e)}setFriction(e){this.ammo.setFriction(e)}setDamping(e,t){this.ammo.setDamping(e,t)}setGravity(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.setGravity(this.tmpBtVector3)}setLinearFactor(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.setLinearFactor(this.tmpBtVector3)}setAngularFactor(e,t,n){this.tmpBtVector3.setValue(e,t,n),this.ammo.setAngularFactor(this.tmpBtVector3)}setCcdMotionThreshold(e){this.ammo.setCcdMotionThreshold(e)}setCcdSweptSphereRadius(e){this.ammo.setCcdSweptSphereRadius(e)}},a=n(87803),l=n(45326),c=n(11230);var u=class{constructor(e,t){this.factory=e,this.addExisting=t}addPlane(e={},t={}){const n=this.factory.add.plane(e,t);return this.addExisting(n,e),n}addSphere(e={},t={}){const n=this.factory.add.sphere(e,t);return this.addExisting(n,e),n}addBox(e={},t={}){const n=this.factory.add.box(e,t);return this.addExisting(n,e),n}addGround(e,t={}){const n=this.factory.add.ground(e,t),r=Object.assign(Object.assign({},e),{mass:0,collisionFlags:1});return this.addExisting(n,r),n}addCylinder(e={},t={}){const n=this.factory.add.cylinder(e,t);return this.addExisting(n,e),n}addCone(e={},t={}){const n=this.factory.add.cone(e,t);return this.addExisting(n,e),n}addTorus(e={},t={}){const n=this.factory.add.torus(e,t);return this.addExisting(n,e),n}addExtrude(e,t={}){const n=this.factory.add.extrude(e,t);return n.translateX(1),this.addExisting(n),n}};class d{constructor(e,t){this.worldTransform=e,this.physicsWorld=t,this.tmpBtVector3=new Ammo.btVector3}toAmmoV3(e,t=0){return new Ammo.btVector3(void 0!==(null==e?void 0:e.x)?e.x:t,void 0!==(null==e?void 0:e.y)?e.y:t,void 0!==(null==e?void 0:e.z)?e.z:t)}get addConstraints(){return{lock:(e,t,n)=>this.lock(e,t,n),fixed:(e,t,n)=>this.fixed(e,t,n),pointToPoint:(e,t,n,r)=>this.pointToPoint(e,t,n,r),hinge:(e,t,n,r)=>this.hinge(e,t,n,r),slider:(e,t,n={},r)=>this.slider(e,t,n,r),spring:(e,t,n={},r)=>this.spring(e,t,n,r),coneTwist:(e,t,n={frameA:{},frameB:{}},r)=>this.coneTwist(e,t,n,r),dof:(e,t,n,r)=>this.dof(e,t,n,r)}}getTransform(e,t,n={x:0,y:0,z:0},r=!1){n=Object.assign({x:0,y:0,z:0},n);const i=new Ammo.btTransform;if(i.setIdentity(),r){const r=(o=e.getWorldTransform().getOrigin(),s=t.getWorldTransform().getOrigin(),a=(o.x()-s.x())/2+n.x,l=(o.y()-s.y())/2+n.y,c=(o.z()-s.z())/2+n.z,new Ammo.btVector3(a,l,c)),i=new Ammo.btTransform;i.setIdentity(),i.setOrigin(r);const u=e.getCenterOfMassTransform().inverse().op_mul(t.getWorldTransform());return u.op_mul(i),{transformA:u,transformB:i}}i.setOrigin(new Ammo.btVector3(n.x,n.y,n.z));return{transformA:e.getCenterOfMassTransform().inverse().op_mul(t.getWorldTransform()).op_mul(i),transformB:i};var o,s,a,l,c}lock(e,t,n=!0){const r={x:0,y:0,z:0};return this.dof(e,t,{angularLowerLimit:r,angularUpperLimit:r},n)}fixed(e,t,n=!0){const r=this.getTransform(e.ammo,t.ammo);r.transformA.setRotation(e.ammo.getWorldTransform().getRotation()),r.transformB.setRotation(t.ammo.getWorldTransform().getRotation());const i=new Ammo.btFixedConstraint(e.ammo,t.ammo,r.transformA,r.transformB);return this.physicsWorld.addConstraint(i,n),i}pointToPoint(e,t,n={},r=!0){const{pivotA:i,pivotB:o}=n,s=new Ammo.btVector3((null==i?void 0:i.x)||0,(null==i?void 0:i.y)||0,(null==i?void 0:i.z)||0),a=new Ammo.btVector3((null==o?void 0:o.x)||0,(null==o?void 0:o.y)||0,(null==o?void 0:o.z)||0),l=new Ammo.btPoint2PointConstraint(e.ammo,t.ammo,s,a);return this.physicsWorld.addConstraint(l,r),l}hinge(e,t,n={},r=!0){const{pivotA:i,pivotB:o,axisA:s,axisB:a}=n,l=new Ammo.btVector3((null==i?void 0:i.x)||0,(null==i?void 0:i.y)||0,(null==i?void 0:i.z)||0),c=new Ammo.btVector3((null==o?void 0:o.x)||0,(null==o?void 0:o.y)||0,(null==o?void 0:o.z)||0),u=new Ammo.btVector3((null==s?void 0:s.x)||0,(null==s?void 0:s.y)||0,(null==s?void 0:s.z)||0),d=new Ammo.btVector3((null==a?void 0:a.x)||0,(null==a?void 0:a.y)||0,(null==a?void 0:a.z)||0),h=new Ammo.btHingeConstraint(e.ammo,t.ammo,l,c,u,d,!0);return this.physicsWorld.addConstraint(h,r),h}slider(e,t,n={},r=!0){const i=this.getTransform(e.ammo,t.ammo),{frameA:o={},frameB:s={},linearLowerLimit:a=0,linearUpperLimit:l=0,angularLowerLimit:c=0,angularUpperLimit:u=0}=n,d=i.transformA.getRotation();d.setEulerZYX(o.x||0,o.y||0,o.z||0),i.transformA.setRotation(d);const h=i.transformB.getRotation();h.setEulerZYX(s.x||0,s.y||0,s.z||0),i.transformB.setRotation(h);const f=new Ammo.btSliderConstraint(e.ammo,t.ammo,i.transformA,i.transformB,!0);return f.setLowerLinLimit(a),f.setUpperLinLimit(l),f.setLowerAngLimit(c),f.setUpperAngLimit(u),this.physicsWorld.addConstraint(f,r),f}spring(e,t,n={},r=!0){const{stiffness:i=50,damping:o=.01,angularLock:s=!1,linearLowerLimit:a={},linearUpperLimit:l={},angularLowerLimit:c={},angularUpperLimit:u={},offset:d={},center:h=!1,enableSpring:f=!0}=n,p=Object.assign({x:0,y:0,z:0},d),m=this.getTransform(e.ammo,t.ammo,p,h),g=new Ammo.btGeneric6DofSpringConstraint(e.ammo,t.ammo,m.transformA,m.transformB,!0);this.tmpBtVector3.setValue(a.x||0,a.y||0,a.z||0),g.setLinearLowerLimit(this.tmpBtVector3),this.tmpBtVector3.setValue(l.x||0,l.y||0,l.z||0),g.setLinearUpperLimit(this.tmpBtVector3),s?(this.tmpBtVector3.setValue(0,0,0),g.setAngularLowerLimit(this.tmpBtVector3),g.setAngularUpperLimit(this.tmpBtVector3)):(console.log(c,u),g.setAngularLowerLimit(this.toAmmoV3(c,-Math.PI)),g.setAngularUpperLimit(this.toAmmoV3(u,Math.PI)));for(let e=0;e<3;e++)g.enableSpring(e,f),g.setStiffness(e,i),g.setDamping(e,o);return this.physicsWorld.addConstraint(g,r),g}coneTwist(e,t,n,r=!0){const{frameA:i,frameB:o}=n,s=new Ammo.btTransform;s.setIdentity(),s.getOrigin().setValue((null==i?void 0:i.x)||0,(null==i?void 0:i.y)||0,(null==i?void 0:i.z)||0);const a=new Ammo.btTransform;a.setIdentity(),a.getOrigin().setValue((null==o?void 0:o.x)||0,(null==o?void 0:o.y)||0,(null==o?void 0:o.z)||0);this.getTransform(e.ammo,t.ammo);const l=new Ammo.btConeTwistConstraint(t.ammo,e.ammo,s,a);return l.setAngularOnly(!0),this.physicsWorld.addConstraint(l,r),l}dof(e,t,n={},r=!0){const{offset:i,center:o=!1}=n,s=Object.assign({x:0,y:0,z:0},i),a=this.getTransform(e.ammo,t.ammo,s,o),l=new Ammo.btGeneric6DofConstraint(e.ammo,t.ammo,a.transformA,a.transformB,!0),{linearLowerLimit:c,linearUpperLimit:u,angularLowerLimit:d,angularUpperLimit:h}=n,f=this.toAmmoV3(c),p=this.toAmmoV3(u),m=this.toAmmoV3(d,-Math.PI),g=this.toAmmoV3(h,Math.PI);return l.setLinearLowerLimit(f),l.setLinearUpperLimit(p),l.setAngularLowerLimit(m),l.setAngularUpperLimit(g),Ammo.destroy(f),Ammo.destroy(p),Ammo.destroy(m),Ammo.destroy(g),this.physicsWorld.addConstraint(l,r),l}}var h=n(85958);class f extends i.Events{addCollider(e,t,n){e.body&&t.body&&(e.body.checkCollisions=!0,t.body.checkCollisions=!0,this.on("collision",(r=>{var i,o;const{bodies:s,event:a}=r;(null===(i=s[0])||void 0===i?void 0:i.name)&&(null===(o=s[1])||void 0===o?void 0:o.name)&&(null==e?void 0:e.name)&&(null==t?void 0:t.name)&&(s[0].name===e.name&&s[1].name===t.name||s[1].name===e.name&&s[0].name===t.name)&&n(a)})))}}const p=1,m=32768;var g=class{constructor(e,t,n={}){this.scene=e,this.world=t,this.options=n,this.debugDrawMode=n.debugDrawMode||p;const r=this.debugDrawMode&m||!1,i=n.maxBufferSize||1e6;this.geometry=new o.BufferGeometry;const s=new Float32Array(3*i),a=new Float32Array(3*i);this.geometry.setAttribute("position",new o.BufferAttribute(s,3).setUsage(o.StaticDrawUsage)),this.geometry.setAttribute("color",new o.BufferAttribute(a,3).setUsage(o.StaticDrawUsage)),this.index=0;const l=new o.LineBasicMaterial({vertexColors:!0,depthTest:!r});this.mesh=new o.LineSegments(this.geometry,l),r&&(this.mesh.renderOrder=999),this.mesh.frustumCulled=!1,this.enabled=!1,this.debugDrawer=new Ammo.DebugDrawer,this.debugDrawer.drawLine=this.drawLine.bind(this),this.debugDrawer.drawContactPoint=this.drawContactPoint.bind(this),this.debugDrawer.reportErrorWarning=this.reportErrorWarning.bind(this),this.debugDrawer.draw3dText=this.draw3dText.bind(this),this.debugDrawer.setDebugMode=this.setDebugMode.bind(this),this.debugDrawer.getDebugMode=this.getDebugMode.bind(this),this.world.setDebugDrawer(this.debugDrawer)}enable(){this.enabled=!0,this.scene.add(this.mesh)}disable(){this.enabled=!1,this.scene.remove(this.mesh)}update(){this.enabled&&(0!=this.index&&(this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.color.needsUpdate=!0),this.index=0,this.world.debugDrawWorld(),this.geometry.setDrawRange(0,this.index))}drawLine(e,t,n){const r=Ammo.HEAPF32,i=r[(n+0)/4],o=r[(n+4)/4],s=r[(n+8)/4],a=r[(e+0)/4],l=r[(e+4)/4],c=r[(e+8)/4];this.geometry.attributes.position.setXYZ(this.index,a,l,c),this.geometry.attributes.color.setXYZ(this.index++,i,o,s);const u=r[(t+0)/4],d=r[(t+4)/4],h=r[(t+8)/4];this.geometry.attributes.position.setXYZ(this.index,u,d,h),this.geometry.attributes.color.setXYZ(this.index++,i,o,s)}drawContactPoint(e,t,n,r,i){const o=Ammo.HEAPF32,s=o[(i+0)/4],a=o[(i+4)/4],l=o[(i+8)/4],c=o[(e+0)/4],u=o[(e+4)/4],d=o[(e+8)/4];this.geometry.attributes.position.setXYZ(this.index,c,u,d),this.geometry.attributes.color.setXYZ(this.index++,s,a,l);const h=o[(t+0)/4]*n,f=o[(t+4)/4]*n,p=o[(t+8)/4]*n;this.geometry.attributes.position.setXYZ(this.index,c+h,u+f,d+p),this.geometry.attributes.color.setXYZ(this.index++,s,a,l)}reportErrorWarning(e){Ammo.hasOwnProperty("Pointer_stringify")?console.warn(Ammo.Pointer_stringify(e)):this.warnedOnce||(this.warnedOnce=!0,console.warn("Cannot print warningString, please rebuild Ammo.js using 'debug' flag"))}draw3dText(e,t){console.warn("TODO: draw3dText")}setDebugMode(e){this.debugDrawMode=e}getDebugMode(){return this.debugDrawMode}};const v=new o.Vector3,y=new o.Line3,b=new o.Plane,w=new o.Vector3,x=new o.Triangle;class _{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new C,this.unassigned=new C,this.vertices=[]}setFromPoints(e){!0!==Array.isArray(e)&&console.error("THREE.ConvexHull: Points parameter is not an array."),e.length<4&&console.error("THREE.ConvexHull: The algorithm needs at least four points."),this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.vertices.push(new T(e[t]));return this.compute(),this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse((function(e){const n=e.geometry;if(void 0!==n){if(n.isGeometry)return void console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");if(n.isBufferGeometry){const r=n.attributes.position;if(void 0!==r)for(let n=0,i=r.count;n<i;n++){const i=new o.Vector3;i.fromBufferAttribute(r,n).applyMatrix4(e.matrixWorld),t.push(i)}}}})),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let n=0,r=t.length;n<r;n++){if(t[n].distanceToPoint(e)>this.tolerance)return!1}return!0}intersectRay(e,t){const n=this.faces;let r=-1/0,i=1/0;for(let t=0,o=n.length;t<o;t++){const o=n[t],s=o.distanceToPoint(e.origin),a=o.normal.dot(e.direction);if(s>0&&a>=0)return null;const l=0!==a?-s/a:0;if(!(l<=0)&&(a>0?i=Math.min(l,i):r=Math.max(l,r),r>i))return null}return r!==-1/0?e.at(r,t):e.at(i,t),t}intersectsRay(e){return null!==this.intersectRay(e,v)}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,null===t.outside?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(null!==e.next&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(null!==e.outside){const t=e.outside;let n=e.outside;for(;null!==n.next&&n.next.face===e;)n=n.next;return this.assigned.removeSubList(t,n),t.prev=n.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const n=this.removeAllVerticesFromFace(e);if(void 0!==n)if(void 0===t)this.unassigned.appendChain(n);else{let e=n;do{const n=e.next;t.distanceToPoint(e.point)>this.tolerance?this.addVertexToFace(e,t):this.unassigned.append(e),e=n}while(null!==e)}return this}resolveUnassignedPoints(e){if(!1===this.unassigned.isEmpty()){let t=this.unassigned.first();do{const n=t.next;let r=this.tolerance,i=null;for(let n=0;n<e.length;n++){const o=e[n];if(0===o.mark){const e=o.distanceToPoint(t.point);if(e>r&&(r=e,i=o),r>1e3*this.tolerance)break}}null!==i&&this.addVertexToFace(t,i),t=n}while(null!==t)}return this}computeExtremes(){const e=new o.Vector3,t=new o.Vector3,n=[],r=[];for(let e=0;e<3;e++)n[e]=r[e]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let i=0,o=this.vertices.length;i<o;i++){const o=this.vertices[i],s=o.point;for(let t=0;t<3;t++)s.getComponent(t)<e.getComponent(t)&&(e.setComponent(t,s.getComponent(t)),n[t]=o);for(let e=0;e<3;e++)s.getComponent(e)>t.getComponent(e)&&(t.setComponent(e,s.getComponent(e)),r[e]=o)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:n,max:r}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),n=t.min,r=t.max;let i=0,o=0;for(let e=0;e<3;e++){const t=r[e].point.getComponent(e)-n[e].point.getComponent(e);t>i&&(i=t,o=e)}const s=n[o],a=r[o];let l,c;i=0,y.set(s.point,a.point);for(let t=0,n=this.vertices.length;t<n;t++){const n=e[t];if(n!==s&&n!==a){y.closestPointToPoint(n.point,!0,w);const e=w.distanceToSquared(n.point);e>i&&(i=e,l=n)}}i=-1,b.setFromCoplanarPoints(s.point,a.point,l.point);for(let t=0,n=this.vertices.length;t<n;t++){const n=e[t];if(n!==s&&n!==a&&n!==l){const e=Math.abs(b.distanceToPoint(n.point));e>i&&(i=e,c=n)}}const u=[];if(b.distanceToPoint(c.point)<0){u.push(S.create(s,a,l),S.create(c,a,s),S.create(c,l,a),S.create(c,s,l));for(let e=0;e<3;e++){const t=(e+1)%3;u[e+1].getEdge(2).setTwin(u[0].getEdge(t)),u[e+1].getEdge(1).setTwin(u[t+1].getEdge(0))}}else{u.push(S.create(s,l,a),S.create(c,s,a),S.create(c,a,l),S.create(c,l,s));for(let e=0;e<3;e++){const t=(e+1)%3;u[e+1].getEdge(2).setTwin(u[0].getEdge((3-e)%3)),u[e+1].getEdge(0).setTwin(u[t+1].getEdge(1))}}for(let e=0;e<4;e++)this.faces.push(u[e]);for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n!==s&&n!==a&&n!==l&&n!==c){i=this.tolerance;let e=null;for(let t=0;t<4;t++){const r=this.faces[t].distanceToPoint(n.point);r>i&&(i=r,e=this.faces[t])}null!==e&&this.addVertexToFace(n,e)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const n=this.faces[t];0===n.mark&&e.push(n)}return this.faces=e,this}nextVertexToAdd(){if(!1===this.assigned.isEmpty()){let e,t=0;const n=this.assigned.first().face;let r=n.outside;do{const i=n.distanceToPoint(r.point);i>t&&(t=i,e=r),r=r.next}while(null!==r&&r.face===n);return e}}computeHorizon(e,t,n,r){let i;this.deleteFaceVertices(n),n.mark=1,i=null===t?t=n.getEdge(0):t.next;do{const t=i.twin,n=t.face;0===n.mark&&(n.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,t,n,r):r.push(i)),i=i.next}while(i!==t);return this}addAdjoiningFace(e,t){const n=S.create(e,t.tail(),t.head());return this.faces.push(n),n.getEdge(-1).setTwin(t.twin),n.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let n=null,r=null;for(let i=0;i<t.length;i++){const o=t[i],s=this.addAdjoiningFace(e,o);null===n?n=s:s.next.setTwin(r),this.newFaces.push(s.face),r=s}return n.next.setTwin(r),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();void 0!==(e=this.nextVertexToAdd());)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}class S{constructor(){this.normal=new o.Vector3,this.midpoint=new o.Vector3,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null}static create(e,t,n){const r=new S,i=new E(e,r),o=new E(t,r),s=new E(n,r);return i.next=s.prev=o,o.next=i.prev=s,s.next=o.prev=i,r.edge=i,r.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),n=this.edge.next.head();return x.set(e.point,t.point,n.point),x.getNormal(this.normal),x.getMidpoint(this.midpoint),this.area=x.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}}class E{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return null!==t?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return null!==t?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}}class T{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}class C{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,null===t.prev?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,null===t.next?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail;null!==e.next;)e=e.next;return this.tail=e,this}remove(e){return null===e.prev?this.head=e.next:e.prev.next=e.next,null===e.next?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return null===e.prev?this.head=t.next:e.prev.next=t.next,null===t.next?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return null===this.head}}class M extends o.BufferGeometry{constructor(e){super();const t=[],n=[];void 0===_&&console.error("THREE.ConvexBufferGeometry: ConvexBufferGeometry relies on ConvexHull");const r=(new _).setFromPoints(e).faces;for(let e=0;e<r.length;e++){const i=r[e];let o=i.edge;do{const e=o.head().point;t.push(e.x,e.y,e.z),n.push(i.normal.x,i.normal.y,i.normal.z),o=o.next}while(o!==i.edge)}this.setAttribute("position",new o.Float32BufferAttribute(t,3)),this.setAttribute("normal",new o.Float32BufferAttribute(n,3))}}const k=e=>new(window.THREE&&window.THREE.ConvexGeometry?window.THREE.ConvexGeometry:M)(e),P=function(e,t){this.minSizeForBreak=e||1.4,this.smallDelta=t||1e-4,this.tempLine1=new o.Line3,this.tempPlane1=new o.Plane,this.tempPlane2=new o.Plane,this.tempPlane_Cut=new o.Plane,this.tempCM1=new o.Vector3,this.tempCM2=new o.Vector3,this.tempVector3=new o.Vector3,this.tempVector3_2=new o.Vector3,this.tempVector3_3=new o.Vector3,this.tempVector3_P0=new o.Vector3,this.tempVector3_P1=new o.Vector3,this.tempVector3_P2=new o.Vector3,this.tempVector3_N0=new o.Vector3,this.tempVector3_N1=new o.Vector3,this.tempVector3_AB=new o.Vector3,this.tempVector3_CB=new o.Vector3,this.tempResultObjects={object1:null,object2:null},this.segments=[];for(var n=0;n<900;n++)this.segments[n]=!1};var A;P.prototype={constructor:P,prepareBreakableObject:function(e,t,n,r,i){e.geometry.isBufferGeometry||console.error("THREE.ConvexObjectBreaker.prepareBreakableObject(): Parameter object must have a BufferGeometry."),e.userData.ammoPhysicsData={};var o=e.userData.ammoPhysicsData;o.mass=t,o.velocity=n.clone(),o.angularVelocity=r.clone(),o.breakable=i},subdivideByImpact:function(e,t,n,r,i){var o=[],s=this.tempPlane1,a=this.tempPlane2;this.tempVector3.addVectors(t,n),s.setFromCoplanarPoints(t,e.position,this.tempVector3);var l=i+r,c=this;return function i(u,d,h,f){if(Math.random()<.05*f||f>l)o.push(u);else{var p=Math.PI;0===f?(a.normal.copy(s.normal),a.constant=s.constant):f<=r?(p=(h-d)*(.2+.6*Math.random())+d,c.tempVector3_2.copy(e.position).sub(t).applyAxisAngle(n,p).add(t),a.setFromCoplanarPoints(t,c.tempVector3,c.tempVector3_2)):(p=(.5*(1&f)+.2*(2-Math.random()))*Math.PI,c.tempVector3_2.copy(t).sub(u.position).applyAxisAngle(n,p).add(u.position),c.tempVector3_3.copy(n).add(u.position),a.setFromCoplanarPoints(u.position,c.tempVector3_3,c.tempVector3_2)),c.cutByPlane(u,a,c.tempResultObjects);var m=c.tempResultObjects.object1,g=c.tempResultObjects.object2;m&&i(m,d,p,f+1),g&&i(g,p,h,f+1)}}(e,0,2*Math.PI,0),o},cutByPlane:function(e,t,n){var i=e.geometry,s=i.attributes.position.array,a=i.attributes.normal.array,l=s.length/3,c=l/3,u=i.getIndex();function d(e,t){var n=3*e+t;return u?u[n]:n}u&&(c=(u=u.array).length/3);for(var h=[],f=[],p=this.smallDelta,m=l*l,g=0;g<m;g++)this.segments[g]=!1;var v=this.tempVector3_P0,y=this.tempVector3_P1,b=this.tempVector3_N0,w=this.tempVector3_N1;for(g=0;g<c-1;g++){var x=d(g,0),_=d(g,1),S=d(g,2);b.set(a[x],a[x]+1,a[x]+2);for(var E=g+1;E<c;E++){var T=d(E,0),C=d(E,1),M=d(E,2);w.set(a[T],a[T]+1,a[T]+2),1-b.dot(w)<p&&(x===T||x===C||x===M?_===T||_===C||_===M?(this.segments[x*l+_]=!0,this.segments[_*l+x]=!0):(this.segments[S*l+x]=!0,this.segments[x*l+S]=!0):_!==T&&_!==C&&_!==M||(this.segments[S*l+_]=!0,this.segments[_*l+S]=!0))}}var A=this.tempPlane_Cut;e.updateMatrix(),P.transformPlaneToLocalSpace(t,e.matrix,A);for(g=0;g<c;g++)for(var I=d(g,0),R=d(g,1),L=d(g,2),O=0;O<3;O++){var N=0===O?I:1===O?R:L,D=0===O?R:1===O?L:I;if(!this.segments[N*l+D]){this.segments[N*l+D]=!0,this.segments[D*l+N]=!0,v.set(s[3*N],s[3*N+1],s[3*N+2]),y.set(s[3*D],s[3*D+1],s[3*D+2]);var F=0;(B=A.distanceToPoint(v))>p?(F=2,f.push(v.clone())):B<-p?(F=1,h.push(v.clone())):(F=3,h.push(v.clone()),f.push(v.clone()));var B,Z=0;if((B=A.distanceToPoint(y))>p?(Z=2,f.push(y.clone())):B<-p?(Z=1,h.push(y.clone())):(Z=3,h.push(y.clone()),f.push(y.clone())),1===F&&2===Z||2===F&&1===Z){this.tempLine1.start.copy(v),this.tempLine1.end.copy(y);var V=new o.Vector3;if(void 0===(V=A.intersectLine(this.tempLine1,V)))return console.error("Internal error: segment does not intersect plane."),n.segmentedObject1=null,n.segmentedObject2=null,0;h.push(V),f.push(V.clone())}}}var z=.5*e.userData.ammoPhysicsData.mass;this.tempCM1.set(0,0,0);var U=0,j=h.length;if(j>0){for(g=0;g<j;g++)this.tempCM1.add(h[g]);this.tempCM1.divideScalar(j);for(g=0;g<j;g++){(W=h[g]).sub(this.tempCM1),U=Math.max(U,W.x,W.y,W.z)}this.tempCM1.add(e.position)}this.tempCM2.set(0,0,0);var H=0,G=f.length;if(G>0){for(g=0;g<G;g++)this.tempCM2.add(f[g]);this.tempCM2.divideScalar(G);for(g=0;g<G;g++){var W;(W=f[g]).sub(this.tempCM2),H=Math.max(H,W.x,W.y,W.z)}this.tempCM2.add(e.position)}var $=null,q=null,Y=0;if(j>4)try{($=new o.Mesh(k(h),e.material)).position.copy(this.tempCM1),$.quaternion.copy(e.quaternion),$.userData=e.userData,this.prepareBreakableObject($,z,e.userData.ammoPhysicsData.velocity,e.userData.ammoPhysicsData.angularVelocity,2*U>this.minSizeForBreak),Y++}catch(e){(0,r.k)("Error in ConvexObjectBreaker.ts",!0),(0,r.k)(e,!0)}if(G>4)try{(q=new o.Mesh(k(f),e.material)).position.copy(this.tempCM2),q.quaternion.copy(e.quaternion),q.userData=e.userData,this.prepareBreakableObject(q,z,e.userData.ammoPhysicsData.velocity,e.userData.ammoPhysicsData.angularVelocity,2*H>this.minSizeForBreak),Y++}catch(e){(0,r.k)("Error in ConvexObjectBreaker.ts",!0),(0,r.k)(e,!0)}return n.object1=$,n.object2=q,Y}},P.transformFreeVector=function(e,t){var n=e.x,r=e.y,i=e.z,o=t.elements;return e.x=o[0]*n+o[4]*r+o[8]*i,e.y=o[1]*n+o[5]*r+o[9]*i,e.z=o[2]*n+o[6]*r+o[10]*i,e},P.transformFreeVectorInverse=function(e,t){var n=e.x,r=e.y,i=e.z,o=t.elements;return e.x=o[0]*n+o[1]*r+o[2]*i,e.y=o[4]*n+o[5]*r+o[6]*i,e.z=o[8]*n+o[9]*r+o[10]*i,e},P.transformTiedVectorInverse=function(e,t){var n=e.x,r=e.y,i=e.z,o=t.elements;return e.x=o[0]*n+o[1]*r+o[2]*i-o[12],e.y=o[4]*n+o[5]*r+o[6]*i-o[13],e.z=o[8]*n+o[9]*r+o[10]*i-o[14],e},P.transformPlaneToLocalSpace=(A=new o.Vector3,function(e,t,n){n.normal.copy(e.normal),n.constant=e.constant;var r=P.transformTiedVectorInverse(e.coplanarPoint(A),t);P.transformFreeVectorInverse(n.normal,t),n.constant=-r.dot(n.normal)});var I=n(77205),R=n(69581),L=n(38122);var O=function(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))}))}))};class N{constructor(e){this.physics=e}setRayFromWorld(e=0,t=0,n=0){this._btRayFrom.setValue(e,t,n)}setRayToWorld(e=0,t=0,n=0){this._btRayTo.setValue(e,t,n)}hasHit(){return this._btRayCallback.hasHit()}rayTest(){void 0!==this._btRayCallback&&Ammo.destroy(this._btRayCallback),this._btRayCallback="closest"===this.type?new Ammo.ClosestRayResultCallback(this._btRayFrom,this._btRayTo):new Ammo.AllHitsRayResultCallback(this._btRayFrom,this._btRayTo),this.physics.physicsWorld.rayTest(this._btRayFrom,this._btRayTo,this._btRayCallback)}destroy(){void 0!==this._btRayFrom&&Ammo.destroy(this._btRayFrom),void 0!==this._btRayTo&&Ammo.destroy(this._btRayTo),void 0!==this._btRayCallback&&Ammo.destroy(this._btRayCallback)}}class D{constructor(e){this.physics=e,this.type="closest",this._btRayFrom=new Ammo.btVector3(0,0,0),this._btRayTo=new Ammo.btVector3(0,0,0)}}class F{constructor(e){this.physics=e,this.type="allHits",this._btRayFrom=new Ammo.btVector3(0,0,0),this._btRayTo=new Ammo.btVector3(0,0,0)}}O(D,[N,class{constructor(e){this.physics=e}getHitPointWorld(){const e=this._btRayCallback.get_m_hitPointWorld();return{x:e.x(),y:e.y(),z:e.z()}}getHitNormalWorld(){const e=this._btRayCallback.get_m_hitNormalWorld();return{x:e.x(),y:e.y(),z:e.z()}}getCollisionObject(){return Ammo.castObject(this._btRayCallback.get_m_collisionObject(),Ammo.btRigidBody).threeObject}}]),O(F,[N,class{constructor(e){this.physics=e}getHitPointsWorld(){const e=this._btRayCallback.get_m_hitPointWorld(),t=[];for(let n=e.size()-1;n>=0;n--){const r=e.at(n);t.push({x:r.x(),y:r.y(),z:r.z()})}return t}getHitPointWorld(){return(0,r.k)("Use getHitPointsWorld() instead of getHitPointWorld() for the AllHitsRayCaster!"),this.getHitPointsWorld()}getHitNormalsWorld(){const e=this._btRayCallback.get_m_hitNormalWorld(),t=[];for(let n=e.size()-1;n>=0;n--){const r=e.at(n);t.push({x:r.x(),y:r.y(),z:r.z()})}return t}getCollisionObjects(){const e=[],t=this._btRayCallback.get_m_collisionObjects();for(let n=t.size()-1;n>=0;n--){const r=Ammo.castObject(t.at(n),Ammo.btRigidBody);e.push(r.threeObject)}return e}}]);class B{constructor(e=!0){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const{createHACDShapes:Z,createHullShape:V,createTriMeshShape:z,createVHACDShapes:U,iterateGeometries:j}=n(11465);class H extends i.Events{constructor(e,t={}){super(),this.scene=e,this.config=t,this.rigidBodies=[],this.earlierDetectedCollisions=[],this.complexShapes=["plane","hull","hacd","vhacd","convexMesh","concaveMesh"],this.gravity=t.gravity||{x:0,y:-9.81,z:0},this.isHeadless="headless"===e,this.tmpEuler=new o.Euler,this.tmpQuaternion=new o.Quaternion,this.tmpVector3=new o.Vector3,this.tmpVector3a=new o.Vector3,this.tmpMatrix4=new o.Matrix4,this.tmpMatrix4a=new o.Matrix4,this.tmpBtVector3=new Ammo.btVector3,this.tmpBtQuaternion=new Ammo.btQuaternion(0,0,0,1),this.emptyV3=new o.Vector3,this.impactPoint=new o.Vector3,this.impactNormal=new o.Vector3,"headless"!==e&&(this.defaultMaterial=new R.Z),this.start()}get tmpTrans(){return console.warn("Use worldTransform instead of tmpTrans."),this.worldTransform}set tmpTrans(e){console.warn("Use worldTransform instead of tmpTrans."),this.worldTransform=e}destroy(e){var t;const n=Object.keys(e).includes("body")?e.body:e;if(void 0===(null==n?void 0:n.ammo))return;let r=n.ammo.threeObject;const i=r.name;if(i&&r&&(null===(t=null==r?void 0:r.body)||void 0===t?void 0:t.ammo)){r.body.isSoftBody?this.physicsWorld.removeSoftBody(r.body.ammo):this.physicsWorld.removeRigidBody(r.body.ammo),r.body.destructor(),r.body=void 0,r.hasBody=!1,delete n.ammo.threeObject;for(let e=0;e<this.rigidBodies.length;e++)this.rigidBodies[e].name===i&&(this.rigidBodies.splice(e,1),e--)}"headless"===this.scene&&r&&(r=null)}setup(){if(this.worldTransform=new Ammo.btTransform,"function"==typeof this.config.setupPhysicsWorld?this.physicsWorld=this.config.setupPhysicsWorld():this.physicsWorld=this.setupPhysicsWorld(),"headless"!==this.scene){this.convexBreaker=new P,this.objectsToRemove=[],this.numObjectsToRemove=0;for(let e=0;e<500;e++)this.objectsToRemove[e]=null}this.collisionEvents=new f,this.factory=new h.Z(this.scene),this.shapes=new u(this.factory,((e,t)=>this.addExisting(e,t))),this.constraints=new d(this.worldTransform,this.physicsWorld),"headless"!==this.scene&&(this.debugDrawer=new g(this.scene,this.physicsWorld,{}))}updateDebugger(){"headless"!==this.scene&&this.debugDrawer&&this.debugDrawer.enabled&&this.debugDrawer.update()}setupPhysicsWorld(){const e=this.gravity,{softBodies:t=!1}=this.config;let n;if(!t){const e=new Ammo.btDefaultCollisionConfiguration,t=new Ammo.btCollisionDispatcher(e),r=new Ammo.btDbvtBroadphase,i=new Ammo.btSequentialImpulseConstraintSolver;n=new Ammo.btDiscreteDynamicsWorld(t,r,i,e)}if(t){const e=new Ammo.btSoftBodyRigidBodyCollisionConfiguration,t=new Ammo.btCollisionDispatcher(e),r=new Ammo.btDbvtBroadphase,i=new Ammo.btSequentialImpulseConstraintSolver,o=new Ammo.btDefaultSoftBodySolver;n=new Ammo.btSoftRigidDynamicsWorld(t,r,i,e,o)}return n.setGravity(new Ammo.btVector3(e.x,e.y,e.z)),n}createDebrisFromBreakableObject(e,t){"headless"!==this.scene&&(e.material=t.material,e.shape="hull",e.fragmentDepth=t.fragmentDepth+1,e.name=`${t.name}__DEBRIS_${e.id}`,this.scene.add(e),this.addExisting(e,{autoCenter:!0}),e.body.fractureImpulse=t.body.fractureImpulse,e.body.breakable=!1,setTimeout((()=>{e.body.breakable=!0}),2500))}removeDebris(e){"headless"!==this.scene&&(this.scene.remove(e),this.destroy(e))}update(e){this.updatePhysics(e),this.detectCollisions()}updatePhysics(e){const t=e/1e3;this.physicsWorld.stepSimulation(t,this.config.maxSubSteps||4,this.config.fixedTimeStep||1/60);for(let e=0;e<this.rigidBodies.length;e++){const t=this.rigidBodies[e],n=t.body.ammo.getMotionState();if(n)if(n.getWorldTransform(this.worldTransform),t.body.didUpdate&&(t.body._emitUpdateEvents&&t.body.eventEmitter.emit("update"),t.body.didUpdate=!1),t.body.ammo.isKinematicObject()&&t.body.needUpdate)t.getWorldQuaternion(this.tmpQuaternion),t.getWorldPosition(this.tmpVector3),this.tmpBtVector3.setValue(this.tmpVector3.x,this.tmpVector3.y,this.tmpVector3.z),this.tmpBtQuaternion.setValue(this.tmpQuaternion.x,this.tmpQuaternion.y,this.tmpQuaternion.z,this.tmpQuaternion.w),this.worldTransform.setOrigin(this.tmpBtVector3),this.worldTransform.setRotation(this.tmpBtQuaternion),n.setWorldTransform(this.worldTransform),t.body.needUpdate=!1;else if(t.body.skipUpdate);else if(!t.body.ammo.isStaticObject()){const e=this.worldTransform.getOrigin(),n=this.worldTransform.getRotation(),r=t.body.offset;if(t.body.ignoreScale)this.tmpVector3a.set(t.scale.x,t.scale.y,t.scale.z);else{const e=t.body.ammo.getCollisionShape().getLocalScaling();this.tmpVector3a.set(e.x(),e.y(),e.z())}this.tmpVector3.set(e.x()+r.x,e.y()+r.y,e.z()+r.z),this.tmpQuaternion.set(n.x(),n.y(),n.z(),n.w()),this.tmpMatrix4.compose(this.tmpVector3,this.tmpQuaternion,this.tmpVector3a),t.parent?parseInt(o.REVISION)>=123?this.tmpMatrix4a.copy(t.parent.matrixWorld).invert():this.tmpMatrix4a.getInverse(t.parent.matrixWorld):this.tmpMatrix4a.identity(),this.tmpMatrix4a.multiply(this.tmpMatrix4),this.tmpMatrix4a.decompose(t.position,t.quaternion,t.scale)}}}detectCollisions(){var e,t;const n=[];this.impactPoint.set(0,0,0),this.impactNormal.set(0,0,0);const r=this.physicsWorld.getDispatcher(),i=r.getNumManifolds();for(let o=0;o<i;o++){const i=r.getManifoldByIndexInternal(o),s=i.getNumContacts(),a=Ammo.castObject(i.getBody0(),Ammo.btRigidBody),l=Ammo.castObject(i.getBody1(),Ammo.btRigidBody),c=a.threeObject,u=l.threeObject;if(!c||!u)continue;if(""===a.name&&""===l.name)continue;const d=null===(e=c.body)||void 0===e?void 0:e.checkCollisions,h=null===(t=u.body)||void 0===t?void 0:t.checkCollisions,f=c.body.breakable,p=u.body.breakable,m=c.body.fractureImpulse,g=u.body.fractureImpulse,v=d||h,y=f||p;if(void 0===c.fragmentDepth&&(c.fragmentDepth=0),void 0===u.fragmentDepth&&(u.fragmentDepth=0),!v&&!y)continue;let b=!1,w=0,x="start";for(let e=0;e<s;e++){const t=i.getContactPoint(e);if(t.getDistance()<=0){b=!0;const e=t.getAppliedImpulse(),r=t.get_m_positionWorldOnB(),i=t.get_m_normalWorldOnB();if(d||h){const e=[c.uuid,u.uuid].sort(),t=`${e[0]}__${e[1]}`;this.earlierDetectedCollisions.find((e=>e.combinedName===t))&&(x="collision"),n.find((e=>e.combinedName===t))||(n.push({combinedName:t,collision:!0}),this.collisionEvents.emit("collision",{bodies:[c,u],event:x}))}e>=w&&(w=e,(f||p)&&(this.impactPoint.set(r.x(),r.y(),r.z()),this.impactNormal.set(i.x(),i.y(),i.z())));break}}if(!b)continue;if(!y)continue;const _=2;if(this.emptyV3.set(0,0,0),c.userData.ammoPhysicsData={mass:1,velocity:this.emptyV3,angularVelocity:this.emptyV3,breakable:f,physicsBody:a},u.userData.ammoPhysicsData={mass:1,velocity:this.emptyV3,angularVelocity:this.emptyV3,breakable:p,physicsBody:l},f&&w>m&&c.fragmentDepth<_){const e=this.convexBreaker.subdivideByImpact(c,this.impactPoint,this.impactNormal,1,2),t=e.length;for(let n=0;n<t;n++){const t=a.getLinearVelocity(),r=a.getAngularVelocity(),i=e[n];i.userData.ammoPhysicsData.velocity.set(t.x(),t.y(),t.z()),i.userData.ammoPhysicsData.angularVelocity.set(r.x(),r.y(),r.z()),this.createDebrisFromBreakableObject(i,c)}this.objectsToRemove[this.numObjectsToRemove++]=c}if(p&&w>g&&u.fragmentDepth<_){const e=this.convexBreaker.subdivideByImpact(u,this.impactPoint,this.impactNormal,1,2),t=e.length;for(let n=0;n<t;n++){const t=l.getLinearVelocity(),r=l.getAngularVelocity(),i=e[n];i.userData.ammoPhysicsData.velocity.set(t.x(),t.y(),t.z()),i.userData.ammoPhysicsData.angularVelocity.set(r.x(),r.y(),r.z()),this.createDebrisFromBreakableObject(i,u)}this.objectsToRemove[this.numObjectsToRemove++]=u}}for(let e=0;e<this.numObjectsToRemove;e++)this.removeDebris(this.objectsToRemove[e]);this.numObjectsToRemove=0,this.earlierDetectedCollisions.forEach((e=>{const{combinedName:t}=e;if(!n.find((e=>e.combinedName===t))){const e=t.split("__"),n=this.rigidBodies.find((t=>t.uuid===e[0])),r=this.rigidBodies.find((t=>t.uuid===e[1])),i="end";n&&r&&this.collisionEvents.emit("collision",{bodies:[n,r],event:i})}})),this.earlierDetectedCollisions=[...n]}setGravity(e=0,t=-9.8,n=0){this.tmpBtVector3.setValue(e,t,n),this.physicsWorld.setGravity(this.tmpBtVector3)}get debug(){return this.isHeadless?null:{enable:()=>{this.debugDrawer.enable()},mode:(e=1)=>{this.debugDrawer.setDebugMode(e)},disable:()=>{this.debugDrawer.disable()}}}start(){"undefined"!=typeof Ammo?"function"==typeof Ammo?Ammo().then((()=>{this.setup()})):this.setup():(0,r.k)("Are you sure you included ammo.js?")}get add(){return{collider:(e,t,n)=>this.collisionEvents.addCollider(e,t,n),constraints:this.constraints.addConstraints,existing:(e,t)=>this.addExisting(e,t),plane:(e={},t={})=>this.shapes.addPlane(e,t),sphere:(e={},t={})=>this.shapes.addSphere(e,t),ground:(e={},t={})=>this.shapes.addGround(e,t),box:(e={},t={})=>this.shapes.addBox(e,t),cylinder:(e={},t={})=>this.shapes.addCylinder(e,t),cone:(e={},t={})=>this.shapes.addCone(e,t),torus:(e={},t={})=>this.shapes.addTorus(e,t),extrude:(e,t={})=>this.shapes.addExtrude(e,t),raycaster:(e="closest")=>"closest"===e?new D(this):new F(this)}}prepareThreeObjectForCollisionShape(e,t={}){var n,i;const{autoCenter:o=!1}=t,s={width:1,height:1,depth:1,radius:1,radiusTop:1,radiusBottom:1,tube:.4,tubularSegments:6};let a="unknown";const l=(null===(n=e.geometry)||void 0===n?void 0:n.type)||"unknown";/box/i.test(l)?a="box":/cone/i.test(l)?a="cone":/cylinder/i.test(l)?a="cylinder":/extrude/i.test(l)?a="extrude":/plane/i.test(l)?a="plane":/sphere/i.test(l)?a="sphere":/torus/i.test(l)&&(a="torus");let c=Object.assign(Object.assign({},s),null===(i=null==e?void 0:e.geometry)||void 0===i?void 0:i.parameters);return t.shape?(c=Object.assign(Object.assign({},s),t),a=t.shape):e.shape&&(a=e.shape),Object.keys(c).forEach((e=>{void 0===c[e]&&s[e]&&(c[e]=s[e])})),o&&e.geometry.center(),"cylinder"===a&&(c.radius=t.radius||c.radiusTop),"extrude"===a&&(a="hacd"),"mesh"!==a&&"convex"!==a||(a="convexMesh"),"concave"===a&&(a="concaveMesh"),"unknown"===a&&((0,r.k)(`Shape for ${null==e?void 0:e.name} not recognized! Will fallback to box.`),a="box"),{shape:a,params:c,object:e}}createCollisionShape(e,t,n){const r=(null==n?void 0:n.quaternion)?null==n?void 0:n.quaternion:new o.Quaternion(0,0,0,1),{axis:i="y"}=t,s=new Ammo.btVector3,a=null==n?void 0:n.geometry;n&&(null==a?void 0:a.isGeometry)&&(n.geometry=(new o.BufferGeometry).fromGeometry(a));let l,c={};switch(-1!==this.complexShapes.indexOf(e)&&(c=(e=>{const t=(new o.Matrix4).elements,n=[],r=[],i=[];return j(e,{},((e,t,o)=>{n.push(e),r.push(t),i.push(o)})),{vertices:n,matrices:r,indexes:i,matrixWorld:t}})(n)),e){case"box":s.setValue(t.width/2,t.height/2,t.depth/2),l=new Ammo.btBoxShape(s);break;case"sphere":l=new Ammo.btSphereShape(t.radius);break;case"cylinder":switch(i){case"y":s.setValue(t.radius,t.height/2,t.radius),l=new Ammo.btCylinderShape(s);break;case"x":s.setValue(t.height/2,t.radius,t.radius),l=new Ammo.btCylinderShapeX(s);break;case"z":s.setValue(t.radius,t.radius,t.height/2),l=new Ammo.btCylinderShapeZ(s)}break;case"cone":switch(i){case"y":l=new Ammo.btConeShape(t.radius,t.height);break;case"x":l=new Ammo.btConeShapeX(t.radius,t.height);break;case"z":l=new Ammo.btConeShapeZ(t.radius,t.height)}break;case"capsule":switch(i){case"y":l=new Ammo.btCapsuleShape(t.radius,t.height);break;case"x":l=new Ammo.btCapsuleShapeX(t.radius,t.height);break;case"z":l=new Ammo.btCapsuleShapeZ(t.radius,t.height)}break;case"torus":l=((e,t)=>{const{radius:n=1,tube:r=.4,tubularSegments:i=8}=e,o=Math.PI,s=i,a=Math.sqrt(2*r*r-2*r*r*Math.cos(2*o/s)),l=new Ammo.btVector3(r,o/s+.5*a,r),c=new Ammo.btCylinderShape(l);c.setMargin(.05);const u=new Ammo.btCompoundShape,d=new Ammo.btVector3(0,0,1),h=new Ammo.btVector3(0,n,0),f=new Ammo.btQuaternion(t.x,t.y,t.z,t.w);for(let e=0;e<s;e++){const t=2*e*o/s,n=h.rotate(d,t),r=new Ammo.btTransform;f.setRotation(d,t+Math.PI/2),r.setIdentity(),r.setOrigin(n),r.setRotation(f),u.addChildShape(r,c)}return u})(t,r);break;case"plane":case"convexMesh":l=z(c.vertices,c.matrices,c.indexes,c.matrixWorld,Object.assign(Object.assign({},t),{concave:!1}));break;case"hull":l=V(c.vertices,c.matrices,c.matrixWorld,t);break;case"hacd":l=Z(c.vertices,c.matrices,c.indexes,c.matrixWorld,t);break;case"vhacd":l=U(c.vertices,c.matrices,c.indexes,c.matrixWorld,t);break;case"concaveMesh":l=z(c.vertices,c.matrices,c.indexes,c.matrixWorld,Object.assign(Object.assign({},t),{concave:!0}))}Ammo.destroy(s);const{x:u,y:d,z:h}=t;return(u||d||h)&&(l._compoundOffset={x:u||0,y:d||0,z:h||0}),Array.isArray(l)&&(l=this.mergeCollisionShapesToCompoundShape(l)),l}mergeCollisionShapesToCompoundShape(e){const t=new Ammo.btCompoundShape;return e.forEach((e=>{const{_childOffset:n,_compoundOffset:r}=e;if(n){const{pos:r,quat:i,scale:o,margin:s}=n,a=this.applyPosQuatScaleMargin(e,r,i,o,s);t.addChildShape(a,e)}else if(r){const n=new Ammo.btTransform;n.setIdentity(),n.setOrigin(new Ammo.btVector3(r.x,r.y,r.z)),t.addChildShape(n,e)}else{const n=new Ammo.btTransform;n.setIdentity(),t.addChildShape(n,e)}})),t}addExisting(e,t={}){const{hasBody:n}=e;if(n)return void(0,r.k)(`Object "${e.name}" already has a physical body!`);const i=new o.Vector3,s=new o.Quaternion,a=new o.Vector3;e.getWorldPosition(i),e.getWorldQuaternion(s),e.getWorldScale(a);const l="1"===(t.collisionFlags||0).toString(2).slice(-1),c="1"===(t.collisionFlags||0).toString(2).slice(-2,-1),{shape:u="unknown",compound:d=[],mass:h=(l||c?0:1),collisionFlags:f=0,collisionGroup:p=1,collisionMask:m=-1,offset:g,breakable:v=!1,addChildren:y=!0,margin:b=.01,ignoreScale:w=!1,fractureImpulse:x=1}=t;if(w&&a.set(1,1,1),d.length>=1){const t=d.map((e=>this.createCollisionShape(e.shape,e))),n=this.mergeCollisionShapesToCompoundShape(t),r=this.applyPosQuatScaleMargin(n,i,s,a,b),o=this.collisionShapeToRigidBody(n,r,h,c);return this.addRigidBodyToWorld(e,o,f,p,m,g),e.body.breakable=v,e.body.fractureImpulse=x,void(e.body.ignoreScale=w)}const _=[];if("unknown"!==u||e.isMesh){const n=this.prepareThreeObjectForCollisionShape(e,t),r=this.createCollisionShape(n.shape,n.params,n.object);_.push(r)}if("unknown"===u&&y&&e.children.length>=1&&e.children.forEach((e=>{if(e.isMesh){const t=this.prepareThreeObjectForCollisionShape(e),n=this.createCollisionShape(t.shape,t.params,t.object);n._childOffset={pos:e.position.clone(),quat:e.quaternion.clone(),scale:e.scale.clone(),margin:b},_.push(n)}})),0===_.length){const n=this.prepareThreeObjectForCollisionShape(e,t),r=this.createCollisionShape(n.shape,n.params,n.object);_.push(r)}const S=1===_.length?_[0]:this.mergeCollisionShapesToCompoundShape(_),E=this.applyPosQuatScaleMargin(S,i,s,a,b),T=this.collisionShapeToRigidBody(S,E,h,c);this.addRigidBodyToWorld(e,T,f,p,m,g),e.body.breakable=v,e.body.fractureImpulse=x,e.body.ignoreScale=w}addRigidBodyToWorld(e,t,n,r,i,o){this.rigidBodies.push(e),this.physicsWorld.addRigidBody(t,r,i);const a=Object.values(t)[0];e.name||(e.name=`object-${e.id}`),t.name=e.name,e.body=new s(this,t),e.hasBody=!0,e.ptr=a,t.threeObject=e,o&&(e.body.offset=Object.assign({x:0,y:0,z:0},o)),e.body.setCollisionFlags(n)}applyPosQuatScaleMargin(e,t=new o.Vector3,n=new o.Quaternion,r=new o.Vector3,i=.01){e.setMargin(i);const s=new Ammo.btQuaternion(0,0,0,1);s.setValue(n.x,n.y,n.z,n.w);const a=new Ammo.btTransform;a.setIdentity(),a.getOrigin().setValue(t.x,t.y,t.z),a.setRotation(s),Ammo.destroy(s);const l=new Ammo.btVector3(r.x,r.y,r.z);return e.setLocalScaling(l),Ammo.destroy(l),a}collisionShapeToRigidBody(e,t,n,r){const i=new Ammo.btDefaultMotionState(t),o=new Ammo.btVector3(0,0,0);n>0&&e.calculateLocalInertia(n,o);const s=new Ammo.btRigidBodyConstructionInfo(n,i,e,o),a=new Ammo.btRigidBody(s);return(n>0||r)&&a.setActivationState(4),a}}},11465:function(e,t,n){"use strict";n.r(t),n.d(t,{TYPE:function(){return i},FIT:function(){return o},HEIGHTFIELD_DATA_TYPE:function(){return s},createCollisionShapes:function(){return a},createBoxShape:function(){return l},createCylinderShape:function(){return c},createCapsuleShape:function(){return u},createConeShape:function(){return d},createSphereShape:function(){return h},createHullShape:function(){return f},createHACDShapes:function(){return p},createVHACDShapes:function(){return m},createTriMeshShape:function(){return g},createHeightfieldTerrainShape:function(){return v},iterateGeometries:function(){return w}});var r=n(2212);const i={BOX:"box",CYLINDER:"cylinder",SPHERE:"sphere",CAPSULE:"capsule",CONE:"cone",HULL:"hull",HACD:"hacd",VHACD:"vhacd",MESH:"mesh",HEIGHTFIELD:"heightfield"},o={ALL:"all",MANUAL:"manual"},s={short:"short",float:"float"},a=function(e,t,n,r,o={}){switch(o.type){case i.BOX:return[l(e,t,r,o)];case i.CYLINDER:return[c(e,t,r,o)];case i.CAPSULE:return[u(e,t,r,o)];case i.CONE:return[d(e,t,r,o)];case i.SPHERE:return[h(e,t,r,o)];case i.HULL:return[f(e,t,r,o)];case i.HACD:return p(e,t,n,r,o);case i.VHACD:return m(e,t,n,r,o);case i.MESH:return[g(e,t,n,r,o)];case i.HEIGHTFIELD:return[v(o)];default:return console.warn(o.type+" is not currently supported"),[]}},l=function(e,t,n,r={}){r.type=i.BOX,y(r),r.fit===o.ALL&&(r.halfExtents=S(E(e,t),r.minHalfExtent,r.maxHalfExtent));const s=new Ammo.btVector3(r.halfExtents.x,r.halfExtents.y,r.halfExtents.z),a=new Ammo.btBoxShape(s);return Ammo.destroy(s),b(a,r,x(n,r)),a},c=function(e,t,n,r={}){r.type=i.CYLINDER,y(r),r.fit===o.ALL&&(r.halfExtents=S(E(e,t),r.minHalfExtent,r.maxHalfExtent));const s=new Ammo.btVector3(r.halfExtents.x,r.halfExtents.y,r.halfExtents.z),a=(()=>{switch(r.cylinderAxis){case"y":return new Ammo.btCylinderShape(s);case"x":return new Ammo.btCylinderShapeX(s);case"z":return new Ammo.btCylinderShapeZ(s)}return null})();return Ammo.destroy(s),b(a,r,x(n,r)),a},u=function(e,t,n,r={}){r.type=i.CAPSULE,y(r),r.fit===o.ALL&&(r.halfExtents=S(E(e,t),r.minHalfExtent,r.maxHalfExtent));const{x:s,y:a,z:l}=r.halfExtents,c=(()=>{switch(r.cylinderAxis){case"y":return new Ammo.btCapsuleShape(Math.max(s,l),2*a);case"x":return new Ammo.btCapsuleShapeX(Math.max(a,l),2*s);case"z":return new Ammo.btCapsuleShapeZ(Math.max(s,a),2*l)}return null})();return b(c,r,x(n,r)),c},d=function(e,t,n,r={}){r.type=i.CONE,y(r),r.fit===o.ALL&&(r.halfExtents=S(E(e,t),r.minHalfExtent,r.maxHalfExtent));const{x:s,y:a,z:l}=r.halfExtents,c=(()=>{switch(r.cylinderAxis){case"y":return new Ammo.btConeShape(Math.max(s,l),2*a);case"x":return new Ammo.btConeShapeX(Math.max(a,l),2*s);case"z":return new Ammo.btConeShapeZ(Math.max(s,a),2*l)}return null})();return b(c,r,x(n,r)),c},h=function(e,t,n,r={}){let s;r.type=i.SPHERE,y(r),s=r.fit!==o.MANUAL||isNaN(r.sphereRadius)?_(e,t,E(e,t)):r.sphereRadius;const a=new Ammo.btSphereShape(s);return b(a,r,x(n,r)),a},f=function(){const e=new r.Vector3,t=new r.Vector3,n=new r.Matrix4;return function(r,s,a,l={}){if(l.type=i.HULL,y(l),l.fit===o.MANUAL)return console.warn("cannot use fit: manual with type: hull"),null;const c=E(r,s),u=new Ammo.btVector3,d=new Ammo.btConvexHullShape;d.setMargin(l.margin),t.addVectors(c.max,c.min).multiplyScalar(.5);let h=0;for(let e=0;e<r.length;e++)h+=r[e].length/3;const f=l.hullMaxVertices||1e5;h>f&&console.warn(`too many vertices for hull shape; sampling ~${f} from ~${h} vertices`);const p=Math.min(1,f/h);for(let i=0;i<r.length;i++){const o=r[i];n.fromArray(s[i]);for(let s=0;s<o.length;s+=3){const a=i===r.length-1&&s===o.length-3;(Math.random()<=p||a)&&(e.set(o[s],o[s+1],o[s+2]).applyMatrix4(n).sub(t),u.setValue(e.x,e.y,e.z),d.addPoint(u,a))}}let m=d;if(d.getNumVertices()>=100){const e=new Ammo.btShapeHull(d);e.buildHull(l.margin),Ammo.destroy(d),m=new Ammo.btConvexHullShape(Ammo.getPointer(e.getVertexPointer()),e.numVertices()),Ammo.destroy(e)}return Ammo.destroy(u),b(m,l,x(a,l)),m}}(),p=function(){const e=new r.Vector3,t=new r.Vector3,n=new r.Matrix4;return function(r,s,a,l,c={}){if(c.type=i.HACD,y(c),c.fit===o.MANUAL)return console.warn("cannot use fit: manual with type: hacd"),[];if(!Ammo.hasOwnProperty("HACD"))return console.warn("HACD unavailable in included build of Ammo.js. Visit https://github.com/mozillareality/ammo.js for the latest version."),[];const u=E(r,s),d=x(l,c);let h=0,f=0;t.addVectors(u.max,u.min).multiplyScalar(.5);for(let e=0;e<r.length;e++)h+=r[e].length/3,a&&a[e]?f+=a[e].length/3:f+=r[e].length/9;const p=new Ammo.HACD;c.hasOwnProperty("compacityWeight")&&p.SetCompacityWeight(c.compacityWeight),c.hasOwnProperty("volumeWeight")&&p.SetVolumeWeight(c.volumeWeight),c.hasOwnProperty("nClusters")&&p.SetNClusters(c.nClusters),c.hasOwnProperty("nVerticesPerCH")&&p.SetNVerticesPerCH(c.nVerticesPerCH),c.hasOwnProperty("concavity")&&p.SetConcavity(c.concavity);const m=Ammo._malloc(3*h*8),g=Ammo._malloc(3*f*4);p.SetPoints(m),p.SetTriangles(g),p.SetNPoints(h),p.SetNTriangles(f);let v=m/8,w=g/4;for(let i=0;i<r.length;i++){const o=r[i];n.fromArray(s[i]);for(let r=0;r<o.length;r+=3)e.set(o[r+0],o[r+1],o[r+2]).applyMatrix4(n).sub(t),Ammo.HEAPF64[v+0]=e.x,Ammo.HEAPF64[v+1]=e.y,Ammo.HEAPF64[v+2]=e.z,v+=3;if(a[i]){const e=a[i];for(let t=0;t<e.length;t++)Ammo.HEAP32[w]=e[t],w++}else for(let e=0;e<o.length/3;e++)Ammo.HEAP32[w]=e,w++}p.Compute(),Ammo._free(m),Ammo._free(g);const _=p.GetNClusters(),S=[];for(let e=0;e<_;e++){const t=new Ammo.btConvexHullShape;t.setMargin(c.margin);const n=p.GetNPointsCH(e),r=p.GetNTrianglesCH(e),i=Ammo._malloc(3*n*8),o=Ammo._malloc(3*r*4);p.GetCH(e,i,o);const s=i/8;for(let e=0;e<n;e++){const r=new Ammo.btVector3,i=Ammo.HEAPF64[s+3*e+0],o=Ammo.HEAPF64[s+3*e+1],a=Ammo.HEAPF64[s+3*e+2];r.setValue(i,o,a),t.addPoint(r,e===n-1),Ammo.destroy(r)}b(t,c,d),S.push(t)}return S}}(),m=function(){const e=new r.Vector3,t=new r.Vector3,n=new r.Matrix4;return function(r,s,a,l,c={}){if(c.type=i.VHACD,y(c),c.fit===o.MANUAL)return console.warn("cannot use fit: manual with type: vhacd"),[];if(!Ammo.hasOwnProperty("VHACD"))return console.warn("VHACD unavailable in included build of Ammo.js. Visit https://github.com/mozillareality/ammo.js for the latest version."),[];const u=E(r,s),d=x(l,c);let h=0,f=0;t.addVectors(u.max,u.min).multiplyScalar(.5);for(let e=0;e<r.length;e++)h+=r[e].length/3,a&&a[e]?f+=a[e].length/3:f+=r[e].length/9;const p=new Ammo.VHACD,m=new Ammo.Parameters;c.hasOwnProperty("resolution")&&m.set_m_resolution(c.resolution),c.hasOwnProperty("depth")&&m.set_m_depth(c.depth),c.hasOwnProperty("concavity")&&m.set_m_concavity(c.concavity),c.hasOwnProperty("planeDownsampling")&&m.set_m_planeDownsampling(c.planeDownsampling),c.hasOwnProperty("convexhullDownsampling")&&m.set_m_convexhullDownsampling(c.convexhullDownsampling),c.hasOwnProperty("alpha")&&m.set_m_alpha(c.alpha),c.hasOwnProperty("beta")&&m.set_m_beta(c.beta),c.hasOwnProperty("gamma")&&m.set_m_gamma(c.gamma),c.hasOwnProperty("pca")&&m.set_m_pca(c.pca),c.hasOwnProperty("mode")&&m.set_m_mode(c.mode),c.hasOwnProperty("maxNumVerticesPerCH")&&m.set_m_maxNumVerticesPerCH(c.maxNumVerticesPerCH),c.hasOwnProperty("minVolumePerCH")&&m.set_m_minVolumePerCH(c.minVolumePerCH),c.hasOwnProperty("convexhullApproximation")&&m.set_m_convexhullApproximation(c.convexhullApproximation),c.hasOwnProperty("oclAcceleration")&&m.set_m_oclAcceleration(c.oclAcceleration);const g=Ammo._malloc(3*h*8+3),v=Ammo._malloc(3*f*4);let w=g/8,_=v/4;for(let i=0;i<r.length;i++){const o=r[i];n.fromArray(s[i]);for(let r=0;r<o.length;r+=3)e.set(o[r+0],o[r+1],o[r+2]).applyMatrix4(n).sub(t),Ammo.HEAPF64[w+0]=e.x,Ammo.HEAPF64[w+1]=e.y,Ammo.HEAPF64[w+2]=e.z,w+=3;if(a[i]){const e=a[i];for(let t=0;t<e.length;t++)Ammo.HEAP32[_]=e[t],_++}else for(let e=0;e<o.length/3;e++)Ammo.HEAP32[_]=e,_++}p.Compute(g,3,h,v,3,f,m),Ammo._free(g),Ammo._free(v);const S=p.GetNConvexHulls(),T=[],C=new Ammo.ConvexHull;for(let e=0;e<S;e++){p.GetConvexHull(e,C);const t=C.get_m_nPoints(),n=(C.get_m_points(),new Ammo.btConvexHullShape);n.setMargin(c.margin);for(let e=0;e<t;e++){const r=new Ammo.btVector3,i=C.get_m_points(3*e+0),o=C.get_m_points(3*e+1),s=C.get_m_points(3*e+2);r.setValue(i,o,s),n.addPoint(r,e===t-1),Ammo.destroy(r)}b(n,c,d),T.push(n)}return Ammo.destroy(C),Ammo.destroy(p),T}}(),g=function(){const e=new r.Vector3,t=new r.Vector3,n=new r.Vector3,s=new r.Matrix4;return function(r,a,l,c,u={}){if(u.type=i.MESH,y(u),u.fit===o.MANUAL)return console.warn("cannot use fit: manual with type: mesh"),null;const d=x(c,u),h=new Ammo.btVector3,f=new Ammo.btVector3,p=new Ammo.btVector3,m=new Ammo.btTriangleMesh(!0,!1);for(let i=0;i<r.length;i++){const o=r[i],c=l[i]?l[i]:null;if(s.fromArray(a[i]),c)for(let r=0;r<c.length;r+=3){const i=3*c[r],a=3*c[r+1],l=3*c[r+2];e.set(o[i],o[i+1],o[i+2]).applyMatrix4(s),t.set(o[a],o[a+1],o[a+2]).applyMatrix4(s),n.set(o[l],o[l+1],o[l+2]).applyMatrix4(s),h.setValue(e.x,e.y,e.z),f.setValue(t.x,t.y,t.z),p.setValue(n.x,n.y,n.z),m.addTriangle(h,f,p,!1)}else for(let r=0;r<o.length;r+=9)e.set(o[r+0],o[r+1],o[r+2]).applyMatrix4(s),t.set(o[r+3],o[r+4],o[r+5]).applyMatrix4(s),n.set(o[r+6],o[r+7],o[r+8]).applyMatrix4(s),h.setValue(e.x,e.y,e.z),f.setValue(t.x,t.y,t.z),p.setValue(n.x,n.y,n.z),m.addTriangle(h,f,p,!1)}const g=new Ammo.btVector3(d.x,d.y,d.z);let v;return m.setScaling(g),Ammo.destroy(g),v=u.concave?new Ammo.btBvhTriangleMeshShape(m,!0,!0):new Ammo.btConvexTriangleMeshShape(m,!0),v.resources=[m],Ammo.destroy(h),Ammo.destroy(f),Ammo.destroy(p),b(v,u),v}}(),v=function(e={}){if(y(e),e.fit===o.ALL)return console.warn("cannot use fit: all with type: heightfield"),null;const t=e.heightfieldDistance||1,n=e.heightfieldData||[],r=e.heightScale||0,i=e.hasOwnProperty("upAxis")?e.upAxis:1,s="short"===e.heightDataType?Ammo.PHY_SHORT:Ammo.PHY_FLOAT,a=!e.hasOwnProperty("flipQuadEdges")||e.flipQuadEdges,l=n.length,c=l>0?n[0].length:0,u=Ammo._malloc(l*c*4),d=u/4;let h=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,p=0;for(let e=0;e<l;e++)for(let t=0;t<c;t++){const r=n[e][t];Ammo.HEAPF32[d+p]=r,p++,h=Math.min(h,r),f=Math.max(f,r)}const m=new Ammo.btHeightfieldTerrainShape(c,l,u,r,h,f,i,s,a),g=new Ammo.btVector3(t,1,t);return m.setLocalScaling(g),Ammo.destroy(g),m.heightfieldData=u,b(m,e),m};function y(e){e.type=e.type||i.HULL,e.margin=e.hasOwnProperty("margin")?e.margin:.01}const b=function(e,t,n){},w=function(){const e=new r.Matrix4;return function(t,n,i){parseInt(r.REVISION)>=123?e.copy(t.matrixWorld).invert():e.getInverse(t.matrixWorld);(new r.Vector3).setFromMatrixScale(t.matrixWorld),t.traverse((o=>{const s=new r.Matrix4;o.isMesh&&(n.includeInvisible||o.el&&o.el.object3D.visible||o.visible)&&(o===t?s.identity():(o.updateWorldMatrix(!0),s.multiplyMatrices(e,o.matrixWorld)),i(o.geometry.isBufferGeometry?o.geometry.attributes.position.array:o.geometry.vertices,s.elements,o.geometry.index?o.geometry.index.array:null))}))}}(),x=function(){const e=new r.Matrix4;return function(t,n={}){const i=new r.Vector3(1,1,1);return n.fit===o.ALL&&(e.fromArray(t),i.setFromMatrixScale(e)),i}}(),_=function(){const e=new r.Vector3;return function(t,n,r){let i=0,{x:o,y:s,z:a}=r.getCenter(e);return T(t,n,(e=>{const t=o-e.x,n=s-e.y,r=a-e.z;i=Math.max(i,t*t+n*n+r*r)})),Math.sqrt(i)}}(),S=function(e,t,n){return(new r.Vector3).subVectors(e.max,e.min).multiplyScalar(.5).clampScalar(t,n)},E=function(e,t){const n=new r.Box3;let i=1/0,o=1/0,s=1/0,a=-1/0,l=-1/0,c=-1/0;return n.min.set(0,0,0),n.max.set(0,0,0),T(e,t,(e=>{e.x<i&&(i=e.x),e.y<o&&(o=e.y),e.z<s&&(s=e.z),e.x>a&&(a=e.x),e.y>l&&(l=e.y),e.z>c&&(c=e.z)})),n.min.set(i,o,s),n.max.set(a,l,c),n},T=function(){const e=new r.Vector3,t=new r.Matrix4;return function(n,r,i){for(let o=0;o<n.length;o++){t.fromArray(r[o]);for(let r=0;r<n[o].length;r+=3)e.set(n[o][r],n[o][r+1],n[o][r+2]).applyMatrix4(t),i(e)}}}()},69581:function(e,t,n){"use strict";var r=n(2212);t.Z=class{constructor(){this._defaultMaterial=new r.MeshLambertMaterial({color:13421772})}get(){return this._defaultMaterial}}},11230:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(2212);class i extends r.Group{constructor(){super(),this.isExtendedGroup=!0,this.isMesh=!1,this.hasBody=!1,this.fragmentDepth=0,this.breakable=!1,this.fractureImpulse=1,this.name=`object-${this.id}`}}},45326:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(2212);class i extends r.Mesh{constructor(e,t){super(e,t),this.isExtendedMesh=!0,this.isGroup=!1,this.vector3=new r.Vector3,this.hasBody=!1,this.fragmentDepth=0,this.breakable=!1,this.fractureImpulse=1,this.name=`object-${this.id}`}get world(){return{theta:this.worldTheta,phi:this.worldPhi}}get worldTheta(){return this.getWorldDirection(this.vector3),Math.atan2(this.vector3.x,this.vector3.z)}get worldPhi(){return this.getWorldDirection(this.vector3),Math.acos(this.vector3.y)}}},87803:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var r=n(2212),i=n(54996);class o extends r.Object3D{constructor(){super(),this.isExtendedObject3D=!0,this.isGroup=!1,this.vector3=new r.Vector3,this.hasBody=!1,this.fragmentDepth=0,this.breakable=!1,this.fractureImpulse=1,this._currentAnimation="",this._animationActions=new Map,this.name=`object-${this.id}`}get world(){return{theta:this.worldTheta,phi:this.worldPhi}}get worldTheta(){return this.getWorldDirection(this.vector3),Math.atan2(this.vector3.x,this.vector3.z)}get worldPhi(){return this.getWorldDirection(this.vector3),Math.acos(this.vector3.y)}set animationMixer(e){this._animationMixer=e}get animationMixer(){return this._animationMixer||(this._animationMixer=new r.AnimationMixer(this)),this._animationMixer}get anims(){return{current:this._currentAnimation,add:(e,t)=>this._animsAdd(e,t),get:e=>this._animsGet(e),play:(e,t=500,n=!0)=>this._animsPlay(e,t,n),mixer:this.animationMixer}}get animation(){return(0,i.k)('Please use "anims" instead of "animation"'),this.anims}_animsAdd(e,t){this._animationActions.set(e,this.animationMixer.clipAction(t))}_animsGet(e){const t=this._animationActions.get(e);return t||(0,i.k)(`Animation(${e}) not found!`),t}_animsPlay(e,t=500,n=!0){const i=this._animationActions.get(e),o=this._animationActions.get(this._currentAnimation);i&&(i.reset(),o&&(i.crossFadeFrom(o,t/1e3,!0),i.clampWhenFinished=!0),n||i.setLoop(r.LoopOnce,0),i.play()),this._currentAnimation=e}setAction(e){(0,i.k)(`setAction(${e}) is deprecated. Use animation.play(${e}) instead!`)}traverse(e){super.traverse(e)}traverseVisible(e){super.traverseVisible(e)}traverseAncestors(e){super.traverseAncestors(e)}}},85958:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(2212),i=n(45326),o=n(54996),s=n(69581),a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class l{constructor(e){this.scene=e,this.isHeadless="headless"===e,this.defaultMaterial=new s.Z}get make(){return{plane:(e={},t={})=>this.makePlane(e,t),box:(e={},t={})=>this.makeBox(e,t),sphere:(e={},t={})=>this.makeSphere(e,t),cylinder:(e={},t={})=>this.makeCylinder(e,t),cone:(e={},t={})=>this.makeCone(e,t),torus:(e={},t={})=>this.makeTorus(e,t),extrude:(e,t={})=>this.makeExtrude(e,t)}}get add(){return{mesh:e=>this.addMesh(e),existing:e=>this.addExisting(e),plane:(e={},t={})=>this.addPlane(e,t),box:(e={},t={})=>this.addBox(e,t),ground:(e,t={})=>this.addGround(e,t),sphere:(e={},t={})=>this.addSphere(e,t),cylinder:(e={},t={})=>this.addCylinder(e,t),cone:(e={},t={})=>this.addCone(e,t),torus:(e={},t={})=>this.addTorus(e,t),extrude:(e,t={})=>this.addExtrude(e,t),material:(e={})=>this.addMaterial(e)}}addExisting(...e){"headless"!==this.scene&&this.scene.add(...e)}addMesh(e){if(Array.isArray(e))for(let t=0;t<e.length;t++)this.addExisting(e[t]);else this.addExisting(e);return this}createMesh(e,t,n){const{x:o=0,y:s=0,z:a=0}=n;let l;switch(!Array.isArray(t)&&t.type){case"LineBasicMaterial":l=new r.Line(e,t);break;case"PointsMaterial":l=new r.Points(e,t);break;default:l=new i.f(e,t)}return l.position.set(o,s,a),l.castShadow=l.receiveShadow=!0,l}makeExtrude(e,t){const{x:n,y:i,z:o,name:s,shape:l,autoCenter:c=!0,breakable:u=!1}=e,d=a(e,["x","y","z","name","shape","autoCenter","breakable"]),{depth:h=1,bevelEnabled:f=!1}=d,p=new r.ExtrudeBufferGeometry(l,Object.assign({depth:h,bevelEnabled:f},d)),m=this.addMaterial(t),g=this.createMesh(p,m,{x:n,y:i,z:o});return c&&g.geometry.center(),g.name=s||`body_id_${g.id}`,g.shape="extrude",g}addExtrude(e,t={}){const n=this.makeExtrude(e,t);return this.addExisting(n),n}makePlane(e,t){const{x:n,y:i,z:o,name:s,breakable:l=!1}=e,c=a(e,["x","y","z","name","breakable"]),u=new r.PlaneBufferGeometry(c.width||1,c.height||1,c.widthSegments||1,c.heightSegments||1),d=this.addMaterial(t);d.side=r.DoubleSide;const h=this.createMesh(u,d,{x:n,y:i,z:o});return h.name=s||`body_id_${h.id}`,h.shape="plane",h}addPlane(e,t){const n=this.makePlane(e,t);return this.addExisting(n),n}makeSphere(e,t){const{x:n,y:i,z:o,name:s,breakable:l=!1}=e,c=a(e,["x","y","z","name","breakable"]),u=new r.SphereBufferGeometry(c.radius||1,c.widthSegments||16,c.heightSegments||12,c.phiStart||void 0,c.phiLength||void 0,c.thetaStart||void 0,c.thetaLength||void 0),d=this.addMaterial(t),h=this.createMesh(u,d,{x:n,y:i,z:o});return h.name=s||`body_id_${h.id}`,h.shape="sphere",h}addSphere(e={},t={}){const n=this.makeSphere(e,t);return this.addExisting(n),n}makeBox(e,t){const{x:n,y:i,z:o,name:s,breakable:l=!1}=e,c=a(e,["x","y","z","name","breakable"]),u=new r.BoxBufferGeometry(c.width||1,c.height||1,c.depth||1,c.widthSegments||void 0,c.heightSegments||void 0,c.depthSegments||void 0),d=this.addMaterial(t),h=this.createMesh(u,d,{x:n,y:i,z:o});return h.name=s||`body_id_${h.id}`,h.shape="box",h}addBox(e={},t={}){const n=this.makeBox(e,t);return this.addExisting(n),n}addGround(e,t={}){const n=this.makeBox(e,t);return n.rotateX(r.MathUtils.degToRad(90)),this.addExisting(n),n}makeCylinder(e={},t={}){const{x:n,y:i,z:o,name:s,breakable:l=!1}=e,c=a(e,["x","y","z","name","breakable"]),u=new r.CylinderBufferGeometry(c.radiusTop||1,c.radiusBottom||1,c.height||1,c.radiusSegments||void 0,c.heightSegments||void 0,c.openEnded||void 0,c.thetaStart||void 0,c.thetaLength||void 0),d=this.addMaterial(t),h=this.createMesh(u,d,{x:n,y:i,z:o});return h.name=s||`body_id_${h.id}`,h.shape="cylinder",h}addCylinder(e={},t={}){const n=this.makeCylinder(e,t);return this.addExisting(n),n}makeCone(e={},t={}){const{x:n,y:i,z:o,name:s,breakable:l=!1}=e,c=a(e,["x","y","z","name","breakable"]),u=new r.ConeBufferGeometry(c.radius||1,c.height||1,c.radiusSegments||8,c.heightSegments||1,c.openEnded||!1,c.thetaStart||0,c.thetaLength||2*Math.PI),d=this.addMaterial(t),h=this.createMesh(u,d,{x:n,y:i,z:o});return h.name=s||`body_id_${h.id}`,h.shape="cone",h}addCone(e={},t={}){const n=this.makeCone(e,t);return this.addExisting(n),n}makeTorus(e={},t={}){const{x:n,y:i,z:o,name:s,breakable:l=!1}=e,c=a(e,["x","y","z","name","breakable"]),u=new r.TorusBufferGeometry(c.radius||void 0,c.tube||void 0,c.radialSegments||void 0,c.tubularSegments||void 0,c.arc||void 0),d=this.addMaterial(t),h=this.createMesh(u,d,{x:n,y:i,z:o});return h.name=s||`body_id_${h.id}`,h.shape="torus",h}addTorus(e={},t={}){const n=this.makeTorus(e,t);return this.addExisting(n),n}addMaterial(e={}){const t=Object.keys(e)[0];let n;if("headless"===this.scene)return this.defaultMaterial.get();switch(t){case"basic":n=new r.MeshBasicMaterial(e.basic);break;case"normal":n=new r.MeshNormalMaterial(e.normal);break;case"standard":n=new r.MeshStandardMaterial(e.standard);break;case"lambert":n=new r.MeshLambertMaterial(e.lambert);break;case"phong":n=new r.MeshPhongMaterial(e.phong);break;case"physical":void 0!==e.physical?n=new r.MeshPhysicalMaterial(e.physical):((0,o.k)("You need to pass parameters to the physical material. (Fallback to default material)"),n=this.defaultMaterial.get());break;case"toon":n=new r.MeshToonMaterial(e.toon);break;case"line":n=new r.LineBasicMaterial(e.line);break;case"points":n=new r.PointsMaterial(e.points);break;case"custom":n=e.custom||this.defaultMaterial.get();break;default:n=this.defaultMaterial.get()}return n}}},54996:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});const r=new Map,i=(e,t=!1)=>{if(r.has(e)){const t=r.get(e);if(void 0===t)return;if(t>=5)return;r.set(e,t+1)}else r.set(e,1);t?console.error(`%c [enable3d] ${e} `,"background: #222; color: #bada55"):console.warn(`%c [enable3d] ${e} `,"background: #222; color: #bada55")}},77205:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});const r=(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){e instanceof Error&&console.error(e.message)}return!1})(),i=(e,t)=>{var n=document.createElement("script");n.onload=()=>{t()},n.onerror=()=>{throw new Error(`failed to load ${e}`)},n.async=!0,n.src=e,document.head.appendChild(n)};var o=(e,t)=>{i(r?`${e}/ammo.wasm.js`:`${e}/ammo.js`,(()=>t()))};const s=(e,t)=>{"undefined"!=typeof window&&(window.__loadPhysics=!0),o(e,(()=>{Ammo().then((()=>{t()}))}))}},38122:function(e,t,n){"use strict";n.r(t)},75149:function(e,t,n){"use strict";n.r(t),n.d(t,{ActionCodeOperation:function(){return h},ActionCodeURL:function(){return Ne},AuthCredential:function(){return Ce},AuthErrorCodes:function(){return v},EmailAuthCredential:function(){return Ae},EmailAuthProvider:function(){return Fe},FacebookAuthProvider:function(){return ze},FactorId:function(){return l},GithubAuthProvider:function(){return je},GoogleAuthProvider:function(){return Ue},OAuthCredential:function(){return Re},OAuthProvider:function(){return Ve},OperationType:function(){return d},PhoneAuthCredential:function(){return Oe},PhoneAuthProvider:function(){return Nn},PhoneMultiFactorGenerator:function(){return kr},ProviderId:function(){return c},RecaptchaVerifier:function(){return kn},SAMLAuthProvider:function(){return Ge},SignInMethod:function(){return u},TwitterAuthProvider:function(){return We},applyActionCode:function(){return pt},browserLocalPersistence:function(){return Jt},browserPopupRedirectResolver:function(){return Cr},browserSessionPersistence:function(){return en},checkActionCode:function(){return mt},confirmPasswordReset:function(){return ft},connectAuthEmulator:function(){return Se},createUserWithEmailAndPassword:function(){return vt},debugErrorMap:function(){return p},deleteUser:function(){return Ut},fetchSignInMethodsForEmail:function(){return _t},getAdditionalUserInfo:function(){return Nt},getAuth:function(){return Lr},getIdToken:function(){return $},getIdTokenResult:function(){return q},getMultiFactorResolver:function(){return Gt},getRedirectResult:function(){return tr},inMemoryPersistence:function(){return se},indexedDBLocalPersistence:function(){return gn},initializeAuth:function(){return A},isSignInWithEmailLink:function(){return wt},linkWithCredential:function(){return st},linkWithPhoneNumber:function(){return In},linkWithPopup:function(){return Gn},linkWithRedirect:function(){return er},multiFactor:function(){return qt},onAuthStateChanged:function(){return Bt},onIdTokenChanged:function(){return Ft},parseActionCodeURL:function(){return De},prodErrorMap:function(){return m},reauthenticateWithCredential:function(){return at},reauthenticateWithPhoneNumber:function(){return Rn},reauthenticateWithPopup:function(){return Hn},reauthenticateWithRedirect:function(){return Qn},reload:function(){return te},sendEmailVerification:function(){return St},sendPasswordResetEmail:function(){return ht},sendSignInLinkToEmail:function(){return bt},setPersistence:function(){return Dt},signInAnonymously:function(){return Ke},signInWithCredential:function(){return ot},signInWithCustomToken:function(){return lt},signInWithEmailAndPassword:function(){return yt},signInWithEmailLink:function(){return xt},signInWithPhoneNumber:function(){return An},signInWithPopup:function(){return jn},signInWithRedirect:function(){return Jn},signOut:function(){return zt},unlink:function(){return et},updateCurrentUser:function(){return Vt},updateEmail:function(){return Ct},updatePassword:function(){return Mt},updatePhoneNumber:function(){return On},updateProfile:function(){return Tt},useDeviceLanguage:function(){return Zt},verifyBeforeUpdateEmail:function(){return Et},verifyPasswordResetCode:function(){return gt}});var r=n(74444),i=n(32238);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var s=n(53333),a=n(8463);const l={PHONE:"phone"},c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},u={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},d={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},h={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function f(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},m=f,g=new r.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),v={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized"},y=new s.Yd("@firebase/auth");function b(e,...t){y.logLevel<=s.in.ERROR&&y.error(`Auth (${i.Jn}): ${e}`,...t)}function w(e,...t){throw E(e,...t)}function x(e,...t){return E(e,...t)}function _(e,t,n){const i=Object.assign(Object.assign({},m()),{[t]:n});return new r.LL("auth","Firebase",i).create(t,{appName:e.name})}function S(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&w(e,"argument-error"),_(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function E(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return g.create(e,...t)}function T(e,t,...n){if(!e)throw E(t,...n)}function C(e){const t="INTERNAL ASSERTION FAILED: "+e;throw b(t),new Error(t)}function M(e,t){e||C(t)}const k=new Map;function P(e){M(e instanceof Function,"Expected a class definition");let t=k.get(e);return t?(M(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,k.set(e,t),t)}function A(e,t){const n=(0,i.qX)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),i=n.getOptions();if((0,r.vZ)(i,null!=t?t:{}))return e;w(e,"already-initialized")}return n.initialize({options:t})}function I(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function R(){return"http:"===L()||"https:"===L()}function L(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class O{constructor(e,t){this.shortDelay=e,this.longDelay=t,M(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,r.uI)()||(0,r.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(R()||(0,r.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function N(e,t){M(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class D{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void C("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void C("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void C("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const F={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},B=new O(3e4,6e4);function Z(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function V(e,t,n,i,o={}){return z(e,o,(async()=>{let o={},s={};i&&("GET"===t?s=i:o={body:JSON.stringify(i)});const a=(0,r.xO)(Object.assign({key:e.config.apiKey},s)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),D.fetch()(j(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},o))}))}async function z(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},F),t);try{const t=new H(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw G(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const t=r.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw G(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw G(e,"email-already-in-use",o);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw _(e,a,s);w(e,a)}}catch(t){if(t instanceof r.ZR)throw t;w(e,"network-request-failed")}}async function U(e,t,n,r,i={}){const o=await V(e,t,n,r,i);return"mfaPendingCredential"in o&&w(e,"multi-factor-auth-required",{_serverResponse:o}),o}function j(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?N(e.config,i):`${e.config.apiScheme}://${i}`}class H{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(x(this.auth,"network-request-failed"))),B.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function G(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=x(e,t,r);return i.customData._tokenResponse=n,i}function W(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function $(e,t=!1){return(0,r.m9)(e).getIdToken(t)}async function q(e,t=!1){const n=(0,r.m9)(e),i=await n.getIdToken(t),o=K(i);T(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const s="object"==typeof o.firebase?o.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:o,token:i,authTime:W(Y(o.auth_time)),issuedAtTime:W(Y(o.iat)),expirationTime:W(Y(o.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}function Y(e){return 1e3*Number(e)}function K(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return b("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,r.tV)(n);return e?JSON.parse(e):(b("Failed to decode base64 JWT payload"),null)}catch(e){return b("Caught error parsing JWT payload as JSON",e),null}}async function X(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof r.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class J{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class Q{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=W(this.lastLoginAt),this.creationTime=W(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ee(e){var t;const n=e.auth,r=await e.getIdToken(),i=await X(e,async function(e,t){return V(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));T(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const l=(c=e.providerData,u=a,[...c.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var c,u;const d=e.isAnonymous,h=!(e.email&&s.passwordHash||(null==l?void 0:l.length)),f=!!d&&h,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Q(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(e,p)}async function te(e){const t=(0,r.m9)(e);await ee(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){T(e.idToken,"internal-error"),T(void 0!==e.idToken,"internal-error"),T(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=K(e);return T(t,"internal-error"),T(void 0!==t.exp,"internal-error"),T(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return T(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:o}=await async function(e,t){const n=await z(e,{},(async()=>{const n=(0,r.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=j(e,i,"/v1/token",`key=${o}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",D.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new ne;return n&&(T("string"==typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(T("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(T("number"==typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return C("not implemented")}}function re(e,t){T("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ie{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new J(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new Q(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await X(this,this.stsTokenManager.getToken(this.auth,e));return T(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return q(this,e)}reload(){return te(this)}_assign(e){this!==e&&(T(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ie(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){T(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ee(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await X(this,async function(e,t){return V(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:_}=t;T(y&&_,e,"internal-error");const S=ne.fromJSON(this.name,_);T("string"==typeof y,e,"internal-error"),re(u,e.name),re(d,e.name),T("boolean"==typeof b,e,"internal-error"),T("boolean"==typeof w,e,"internal-error"),re(h,e.name),re(f,e.name),re(p,e.name),re(m,e.name),re(g,e.name),re(v,e.name);const E=new ie({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(E.providerData=x.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t,n=!1){const r=new ne;r.updateFromServerResponse(t);const i=new ie({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ee(i),i}}class oe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}oe.type="NONE";const se=oe;function ae(e,t,n){return`firebase:${e}:${t}:${n}`}class le{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ae(this.userKey,r.apiKey,i),this.fullPersistenceKey=ae("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ie._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new le(P(se),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||P(se);const o=ae(n,e.config.apiKey,e.name);let s=null;for(const n of t)try{const t=await n._get(o);if(t){const r=ie._fromJSON(e,t);n!==i&&(s=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(e){}}))),new le(i,e,n)):new le(i,e,n)}}function ce(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ue(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(me(t))return"Blackberry";if(ge(t))return"Webos";if(de(t))return"Safari";if((t.includes("chrome/")||he(t))&&!t.includes("edge/"))return"Chrome";if(pe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ue(e=(0,r.z$)()){return/firefox\//i.test(e)}function de(e=(0,r.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function he(e=(0,r.z$)()){return/crios\//i.test(e)}function fe(e=(0,r.z$)()){return/iemobile/i.test(e)}function pe(e=(0,r.z$)()){return/android/i.test(e)}function me(e=(0,r.z$)()){return/blackberry/i.test(e)}function ge(e=(0,r.z$)()){return/webos/i.test(e)}function ve(e=(0,r.z$)()){return/iphone|ipad|ipod/i.test(e)}function ye(e=(0,r.z$)()){return ve(e)||pe(e)||ge(e)||me(e)||/windows phone/i.test(e)||fe(e)}function be(e,t=[]){let n;switch(e){case"Browser":n=ce((0,r.z$)());break;case"Worker":n=`${ce((0,r.z$)())}-${e}`;break;default:n=e}const o=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.Jn}/${o}`}class we{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _e(this),this.idTokenSubscription=new _e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=P(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await le.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==n?void 0:n._redirectEventId,o=await this.tryRedirectSignIn(e);r&&r!==i||!(null==o?void 0:o.user)||(n=o.user)}return n?n._redirectEventId?(T(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ee(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,r.m9)(e):null;return t&&T(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&T(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(P(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&P(e)||this._popupRedirectResolver;T(t,this,"argument-error"),this.redirectPersistenceManager=await le.create(this,[P(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return T(o,this,"internal-error"),o.then((()=>i(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return T(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=be(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function xe(e){return(0,r.m9)(e)}class _e{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.ne)((e=>this.observer=e))}get next(){return T(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Se(e,t,n){const r=xe(e);T(r._canInitEmulator,r,"emulator-config-failed"),T(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),o=Ee(t),{host:s,port:a}=function(e){const t=Ee(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Te(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Te(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ee(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Te(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ce{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return C("not implemented")}_getIdTokenResponse(e){return C("not implemented")}_linkToIdToken(e,t){return C("not implemented")}_getReauthenticationResolver(e){return C("not implemented")}}async function Me(e,t){return V(e,"POST","/v1/accounts:resetPassword",Z(e,t))}async function ke(e,t){return V(e,"POST","/v1/accounts:update",t)}async function Pe(e,t){return V(e,"POST","/v1/accounts:sendOobCode",Z(e,t))}class Ae extends Ce{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ae(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ae(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return U(e,"POST","/v1/accounts:signInWithPassword",Z(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return U(e,"POST","/v1/accounts:signInWithEmailLink",Z(e,t))}(e,{email:this._email,oobCode:this._password});default:w(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ke(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return U(e,"POST","/v1/accounts:signInWithEmailLink",Z(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:w(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ie(e,t){return U(e,"POST","/v1/accounts:signInWithIdp",Z(e,t))}class Re extends Ce{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Re(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):w("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Re(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ie(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ie(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ie(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.xO)(t)}return e}}const Le={USER_NOT_FOUND:"user-not-found"};class Oe extends Ce{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Oe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Oe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return U(e,"POST","/v1/accounts:signInWithPhoneNumber",Z(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await U(e,"POST","/v1/accounts:signInWithPhoneNumber",Z(e,t));if(n.temporaryProof)throw G(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return U(e,"POST","/v1/accounts:signInWithPhoneNumber",Z(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Le)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Oe({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ne{constructor(e){var t,n,i,o,s,a;const l=(0,r.zd)((0,r.pd)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=l.mode)&&void 0!==i?i:null);T(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(o=l.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=l.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,r.zd)((0,r.pd)(e)).link,n=t?(0,r.zd)((0,r.pd)(t)).deep_link_id:null,i=(0,r.zd)((0,r.pd)(e)).deep_link_id;return(i?(0,r.zd)((0,r.pd)(i)).link:null)||i||n||t||e}(e);try{return new Ne(t)}catch(e){return null}}}function De(e){return Ne.parseLink(e)}class Fe{constructor(){this.providerId=Fe.PROVIDER_ID}static credential(e,t){return Ae._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ne.parseLink(t);return T(n,"argument-error"),Ae._fromEmailAndCode(e,n.code,n.tenantId)}}Fe.PROVIDER_ID="password",Fe.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Fe.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Be{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ze extends Be{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ve extends Ze{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return T("providerId"in t&&"signInMethod"in t,"argument-error"),Re._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return T(e.idToken||e.accessToken,"argument-error"),Re._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ve.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ve.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:o,providerId:s}=e;if(!(n||r||t||i))return null;if(!s)return null;try{return new Ve(s)._credential({idToken:t,accessToken:n,nonce:o,pendingToken:i})}catch(e){return null}}}class ze extends Ze{constructor(){super("facebook.com")}static credential(e){return Re._fromParams({providerId:ze.PROVIDER_ID,signInMethod:ze.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ze.credentialFromTaggedObject(e)}static credentialFromError(e){return ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return ze.credential(e.oauthAccessToken)}catch(e){return null}}}ze.FACEBOOK_SIGN_IN_METHOD="facebook.com",ze.PROVIDER_ID="facebook.com";class Ue extends Ze{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Re._fromParams({providerId:Ue.PROVIDER_ID,signInMethod:Ue.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ue.credentialFromTaggedObject(e)}static credentialFromError(e){return Ue.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ue.credential(t,n)}catch(e){return null}}}Ue.GOOGLE_SIGN_IN_METHOD="google.com",Ue.PROVIDER_ID="google.com";class je extends Ze{constructor(){super("github.com")}static credential(e){return Re._fromParams({providerId:je.PROVIDER_ID,signInMethod:je.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return je.credentialFromTaggedObject(e)}static credentialFromError(e){return je.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return je.credential(e.oauthAccessToken)}catch(e){return null}}}je.GITHUB_SIGN_IN_METHOD="github.com",je.PROVIDER_ID="github.com";class He extends Ce{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Ie(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ie(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ie(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new He(n,i):null}static _create(e,t){return new He(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ge extends Be{constructor(e){T(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Ge.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ge.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=He.fromJSON(e);return T(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return He._create(n,t)}catch(e){return null}}}class We extends Ze{constructor(){super("twitter.com")}static credential(e,t){return Re._fromParams({providerId:We.PROVIDER_ID,signInMethod:We.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return We.credentialFromTaggedObject(e)}static credentialFromError(e){return We.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return We.credential(t,n)}catch(e){return null}}}async function $e(e,t){return U(e,"POST","/v1/accounts:signUp",Z(e,t))}We.TWITTER_SIGN_IN_METHOD="twitter.com",We.PROVIDER_ID="twitter.com";class qe{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await ie._fromIdTokenResponse(e,n,r),o=Ye(n);return new qe({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ye(n);return new qe({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ye(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function Ke(e){var t;const n=xe(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new qe({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await $e(n,{returnSecureToken:!0}),i=await qe._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}class Xe extends r.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Xe.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Xe(e,t,n,r)}}function Je(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Xe._fromErrorAndOperation(e,n,t,r);throw n}))}function Qe(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}async function et(e,t){const n=(0,r.m9)(e);await nt(!0,n,t);const{providerUserInfo:i}=await async function(e,t){return V(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),o=Qe(i||[]);return n.providerData=n.providerData.filter((e=>o.has(e.providerId))),o.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function tt(e,t,n=!1){const r=await X(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return qe._forOperation(e,"link",r)}async function nt(e,t,n){await ee(t);const r=!1===e?"provider-already-linked":"no-such-provider";T(Qe(t.providerData).has(n)===e,t.auth,r)}async function rt(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const o=await X(e,Je(r,i,t,e),n);T(o.idToken,r,"internal-error");const s=K(o.idToken);T(s,r,"internal-error");const{sub:a}=s;return T(e.uid===a,r,"user-mismatch"),qe._forOperation(e,i,o)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&w(r,"user-mismatch"),e}}async function it(e,t,n=!1){const r="signIn",i=await Je(e,r,t),o=await qe._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function ot(e,t){return it(xe(e),t)}async function st(e,t){const n=(0,r.m9)(e);return await nt(!1,n,t.providerId),tt(n,t)}async function at(e,t){return rt((0,r.m9)(e),t)}async function lt(e,t){const n=xe(e),r=await async function(e,t){return U(e,"POST","/v1/accounts:signInWithCustomToken",Z(e,t))}(n,{token:t,returnSecureToken:!0}),i=await qe._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class ct{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ut._fromServerResponse(e,t):w(e,"internal-error")}}class ut extends ct{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ut(t)}}function dt(e,t,n){var r;T((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),T(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(T(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(T(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ht(e,t,n){const i=(0,r.m9)(e),o={requestType:"PASSWORD_RESET",email:t};n&&dt(i,o,n),await async function(e,t){return Pe(e,t)}(i,o)}async function ft(e,t,n){await Me((0,r.m9)(e),{oobCode:t,newPassword:n})}async function pt(e,t){await async function(e,t){return V(e,"POST","/v1/accounts:update",Z(e,t))}((0,r.m9)(e),{oobCode:t})}async function mt(e,t){const n=(0,r.m9)(e),i=await Me(n,{oobCode:t}),o=i.requestType;switch(T(o,n,"internal-error"),o){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":T(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":T(i.mfaInfo,n,"internal-error");default:T(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=ct._fromServerResponse(xe(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:s},operation:o}}async function gt(e,t){const{data:n}=await mt((0,r.m9)(e),t);return n.email}async function vt(e,t,n){const r=xe(e),i=await $e(r,{returnSecureToken:!0,email:t,password:n}),o=await qe._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(o.user),o}function yt(e,t,n){return ot((0,r.m9)(e),Fe.credential(t,n))}async function bt(e,t,n){const i=(0,r.m9)(e),o={requestType:"EMAIL_SIGNIN",email:t};T(n.handleCodeInApp,i,"argument-error"),n&&dt(i,o,n),await async function(e,t){return Pe(e,t)}(i,o)}function wt(e,t){const n=Ne.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function xt(e,t,n){const i=(0,r.m9)(e),o=Fe.credentialWithLink(t,n||I());return T(o._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),ot(i,o)}async function _t(e,t){const n={identifier:t,continueUri:R()?I():"http://localhost"},{signinMethods:i}=await async function(e,t){return V(e,"POST","/v1/accounts:createAuthUri",Z(e,t))}((0,r.m9)(e),n);return i||[]}async function St(e,t){const n=(0,r.m9)(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&dt(n.auth,i,t);const{email:o}=await async function(e,t){return Pe(e,t)}(n.auth,i);o!==e.email&&await e.reload()}async function Et(e,t,n){const i=(0,r.m9)(e),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&dt(i.auth,o,n);const{email:s}=await async function(e,t){return Pe(e,t)}(i.auth,o);s!==e.email&&await e.reload()}async function Tt(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=(0,r.m9)(e),o={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=await X(i,async function(e,t){return V(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((({providerId:e})=>"password"===e));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}function Ct(e,t){return kt((0,r.m9)(e),t,null)}function Mt(e,t){return kt((0,r.m9)(e),null,t)}async function kt(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await X(e,ke(r,i));await e._updateTokensIfNecessary(o,!0)}class Pt{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class At extends Pt{constructor(e,t,n,r){super(e,t,n),this.username=r}}class It extends Pt{constructor(e,t){super(e,"facebook.com",t)}}class Rt extends At{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Lt extends Pt{constructor(e,t){super(e,"google.com",t)}}class Ot extends At{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Nt(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=K(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Pt(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new It(o,i);case"github.com":return new Rt(o,i);case"google.com":return new Lt(o,i);case"twitter.com":return new Ot(o,i,e.screenName||null);case"custom":case"anonymous":return new Pt(o,null);default:return new Pt(o,r,i)}}(n)}function Dt(e,t){return(0,r.m9)(e).setPersistence(t)}function Ft(e,t,n,i){return(0,r.m9)(e).onIdTokenChanged(t,n,i)}function Bt(e,t,n,i){return(0,r.m9)(e).onAuthStateChanged(t,n,i)}function Zt(e){(0,r.m9)(e).useDeviceLanguage()}function Vt(e,t){return(0,r.m9)(e).updateCurrentUser(t)}function zt(e){return(0,r.m9)(e).signOut()}async function Ut(e){return(0,r.m9)(e).delete()}class jt{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new jt("enroll",e)}static _fromMfaPendingCredential(e){return new jt("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return jt._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return jt._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Ht{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=xe(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>ct._fromServerResponse(n,e)));T(r.mfaPendingCredential,n,"internal-error");const o=jt._fromMfaPendingCredential(r.mfaPendingCredential);return new Ht(o,i,(async e=>{const i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await qe._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return T(t.user,n,"internal-error"),qe._forOperation(t.user,t.operationType,s);default:w(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Gt(e,t){var n;const i=(0,r.m9)(e),o=t;return T(t.customData.operationType,i,"argument-error"),T(null===(n=o.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),Ht._fromError(i,o)}class Wt{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>ct._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Wt(e)}async getSession(){return jt._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const n=e,r=await this.getSession(),i=await X(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken(),r=await X(this.user,(i=this.user.auth,o={idToken:n,mfaEnrollmentId:t},V(i,"POST","/v2/accounts/mfaEnrollment:withdraw",Z(i,o))));var i,o;this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(e){if("auth/user-token-expired"!==e.code)throw e}}}const $t=new WeakMap;function qt(e){const t=(0,r.m9)(e);return $t.has(t)||$t.set(t,Wt._fromUser(t)),$t.get(t)}const Yt="__sak";class Kt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yt,"1"),this.storage.removeItem(Yt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Xt extends Kt{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,r.z$)();return de(e)||ve(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ye(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},o=this.storage.getItem(n);(0,r.w1)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xt.type="LOCAL";const Jt=Xt;class Qt extends Kt{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Qt.type="SESSION";const en=Qt;class tn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new tn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null==o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function nn(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}tn.receivers=[];class rn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const l=nn("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function on(){return window}function sn(){return void 0!==on().WorkerGlobalScope&&"function"==typeof on().importScripts}const an="firebaseLocalStorageDb",ln="firebaseLocalStorage",cn="fbase_key";class un{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function dn(e,t){return e.transaction([ln],t?"readwrite":"readonly").objectStore(ln)}function hn(){const e=indexedDB.open(an,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ln,{keyPath:cn})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ln)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(an);return new un(e).toPromise()}(),t(await hn()))}))}))}async function fn(e,t,n){const r=dn(e,!0).put({[cn]:t,value:n});return new un(r).toPromise()}function pn(e,t){const n=dn(e,!0).delete(t);return new un(n).toPromise()}class mn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await hn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tn._getInstance(sn()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new rn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hn();return await fn(e,Yt,"1"),await pn(e,Yt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>fn(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=dn(e,!1).get(t),r=await new un(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>pn(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=dn(e,!1).getAll();return new un(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}mn.type="LOCAL";const gn=mn;function vn(e){return new Promise(((t,n)=>{const r=document.createElement("script");var i,o;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=x("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(o=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==o?o:document).appendChild(r)}))}function yn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const bn=1e12;class wn{constructor(e){this.auth=e,this.counter=bn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new xn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||bn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||bn;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||bn;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class xn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;T(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _n=yn("rcb"),Sn=new O(3e4,6e4);class En{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!on().grecaptcha}load(e,t=""){return T(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(on().grecaptcha):new Promise(((n,i)=>{const o=on().setTimeout((()=>{i(x(e,"network-request-failed"))}),Sn.get());on()[_n]=()=>{on().clearTimeout(o),delete on()[_n];const r=on().grecaptcha;if(!r)return void i(x(e,"internal-error"));const s=r.render;r.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(r)};vn(`https://www.google.com/recaptcha/api.js??${(0,r.xO)({onload:_n,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(o),i(x(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!on().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Tn{async load(e){return new wn(e)}clearedOneInstance(){}}const Cn="recaptcha",Mn={theme:"light",type:"image"};class kn{constructor(e,t=Object.assign({},Mn),n){this.parameters=t,this.type=Cn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xe(n),this.isInvisible="invisible"===this.parameters.size,T("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;T(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Tn:new En,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){T(!this.parameters.sitekey,this.auth,"argument-error"),T(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),T("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=on()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){T(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){T(R()&&!sn(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await V(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);T(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return T(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Oe._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function An(e,t,n){const i=xe(e),o=await Ln(i,t,(0,r.m9)(n));return new Pn(o,(e=>ot(i,e)))}async function In(e,t,n){const i=(0,r.m9)(e);await nt(!1,i,"phone");const o=await Ln(i.auth,t,(0,r.m9)(n));return new Pn(o,(e=>st(i,e)))}async function Rn(e,t,n){const i=(0,r.m9)(e),o=await Ln(i.auth,t,(0,r.m9)(n));return new Pn(o,(e=>at(i,e)))}async function Ln(e,t,n){var r;const i=await n.verify();try{let o;if(T("string"==typeof i,e,"argument-error"),T(n.type===Cn,e,"argument-error"),o="string"==typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){T("enroll"===t.type,e,"internal-error");const n=await function(e,t){return V(e,"POST","/v2/accounts/mfaEnrollment:start",Z(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{T("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;T(n,e,"missing-multi-factor-info");const s=await function(e,t){return V(e,"POST","/v2/accounts/mfaSignIn:start",Z(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return V(e,"POST","/v1/accounts:sendVerificationCode",Z(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}async function On(e,t){await tt((0,r.m9)(e),t)}class Nn{constructor(e){this.providerId=Nn.PROVIDER_ID,this.auth=xe(e)}verifyPhoneNumber(e,t){return Ln(this.auth,e,(0,r.m9)(t))}static credential(e,t){return Oe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Nn.credentialFromTaggedObject(t)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Oe._fromTokenResponse(t,n):null}}function Dn(e,t){return t?P(t):(T(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Nn.PROVIDER_ID="phone",Nn.PHONE_SIGN_IN_METHOD="phone";class Fn extends Ce{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ie(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ie(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ie(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bn(e){return it(e.auth,new Fn(e),e.bypassAuthState)}function Zn(e){const{auth:t,user:n}=e;return T(n,t,"internal-error"),rt(n,new Fn(e),e.bypassAuthState)}async function Vn(e){const{auth:t,user:n}=e;return T(n,t,"internal-error"),tt(n,new Fn(e),e.bypassAuthState)}class zn{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bn;case"linkViaPopup":case"linkViaRedirect":return Vn;case"reauthViaPopup":case"reauthViaRedirect":return Zn;default:w(this.auth,"internal-error")}}resolve(e){M(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){M(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Un=new O(2e3,1e4);async function jn(e,t,n){const r=xe(e);S(e,t,Be);const i=Dn(r,n);return new Wn(r,"signInViaPopup",t,i).executeNotNull()}async function Hn(e,t,n){const i=(0,r.m9)(e);S(i.auth,t,Be);const o=Dn(i.auth,n);return new Wn(i.auth,"reauthViaPopup",t,o,i).executeNotNull()}async function Gn(e,t,n){const i=(0,r.m9)(e);S(i.auth,t,Be);const o=Dn(i.auth,n);return new Wn(i.auth,"linkViaPopup",t,o,i).executeNotNull()}class Wn extends zn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Wn.currentPopupAction&&Wn.currentPopupAction.cancel(),Wn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return T(e,this.auth,"internal-error"),e}async onExecution(){M(1===this.filter.length,"Popup operations only handle one event");const e=nn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(x(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(x(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(x(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,Un.get())};e()}}Wn.currentPopupAction=null;const $n=new Map;class qn extends zn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=$n.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Xn(t),r=Kn(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}$n.set(this.auth._key(),e)}return this.bypassAuthState||$n.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Yn(e,t){return Kn(e)._set(Xn(t),"true")}function Kn(e){return P(e._redirectPersistence)}function Xn(e){return ae("pendingRedirect",e.config.apiKey,e.name)}function Jn(e,t,n){return async function(e,t,n){const r=xe(e);S(e,t,Be);const i=Dn(r,n);return await Yn(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Qn(e,t,n){return async function(e,t,n){const i=(0,r.m9)(e);S(i.auth,t,Be);const o=Dn(i.auth,n);await Yn(o,i.auth);const s=await rr(i);return o._openRedirect(i.auth,t,"reauthViaRedirect",s)}(e,t,n)}function er(e,t,n){return async function(e,t,n){const i=(0,r.m9)(e);S(i.auth,t,Be);const o=Dn(i.auth,n);await nt(!1,i,t.providerId),await Yn(o,i.auth);const s=await rr(i);return o._openRedirect(i.auth,t,"linkViaRedirect",s)}(e,t,n)}async function tr(e,t){return await xe(e)._initializationPromise,nr(e,t,!1)}async function nr(e,t,n=!1){const r=xe(e),i=Dn(r,t),o=new qn(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}async function rr(e){const t=nn(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class ir{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!sr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(x(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(or(e))}saveEventToCache(e){this.cachedEventUids.add(or(e)),this.lastProcessedEventTime=Date.now()}}function or(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function sr({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lr=/^https?/;async function cr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return V(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(ur(e))return}catch(e){}w(e,"unauthorized-domain")}function ur(e){const t=I(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!lr.test(n))return!1;if(ar.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const dr=new O(3e4,6e4);function hr(){const e=on().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let fr=null;function pr(e){return fr=fr||function(e){return new Promise(((t,n)=>{var r,i,o;function s(){hr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hr(),n(x(e,"network-request-failed"))},timeout:dr.get()})}if(null===(i=null===(r=on().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=on().gapi)||void 0===o?void 0:o.load)){const t=yn("iframefcb");return on()[t]=()=>{gapi.load?s():n(x(e,"network-request-failed"))},vn(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}s()}})).catch((e=>{throw fr=null,e}))}(e),fr}const mr=new O(5e3,15e3),gr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yr(e){const t=e.config;T(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?N(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,o={apiKey:t.apiKey,appName:e.name,v:i.Jn},s=vr.get(e.config.apiHost);s&&(o.eid=s);const a=e._getFrameworks();return a.length&&(o.fw=a.join(",")),`${n}?${(0,r.xO)(o).slice(1)}`}const br={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function xr(e,t,n,i=500,o=600){const s=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c=Object.assign(Object.assign({},br),{width:i.toString(),height:o.toString(),top:s,left:a}),u=(0,r.z$)().toLowerCase();n&&(l=he(u)?"_blank":n),ue(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=(0,r.z$)()){var t;return ve(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new wr(null);const h=window.open(t||"",l,d);T(h,e,"popup-blocked");try{h.focus()}catch(e){}return new wr(h)}const _r="__/auth/handler",Sr="emulator/auth/handler";function Er(e,t,n,o,s,a){T(e.config.authDomain,e,"auth-domain-config-required"),T(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:o,v:i.Jn,eventId:s};if(t instanceof Be){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,r.xb)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof Ze){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const e of Object.keys(c))void 0===c[e]&&delete c[e];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${_r}`;return N(e,Sr)}(e)}?${(0,r.xO)(c).slice(1)}`}const Tr="webStorageSupport";const Cr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=en,this._completeRedirectFn=nr}async _openPopup(e,t,n,r){var i;M(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return xr(e,Er(e,t,n,I(),r),nn())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=Er(e,t,n,I(),r),on().location.href=i,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(M(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await pr(e),n=on().gapi;return T(n,e,"internal-error"),t.open({where:document.body,url:yr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gr,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=x(e,"network-request-failed"),o=on().setTimeout((()=>{r(i)}),mr.get());function s(){on().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}(e),n=new ir(e);return t.register("authEvent",(t=>{T(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tr,{type:Tr},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),w(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ye()||de()||ve()}};class Mr extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return C("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Mr(e)}_finalizeEnroll(e,t,n){return function(e,t){return V(e,"POST","/v2/accounts/mfaEnrollment:finalize",Z(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return V(e,"POST","/v2/accounts/mfaSignIn:finalize",Z(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class kr{constructor(){}static assertion(e){return Mr._fromCredential(e)}}kr.FACTOR_ID="phone";var Pr,Ar="@firebase/auth",Ir="0.19.6";class Rr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){T(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Lr(e=(0,i.Mq)()){const t=(0,i.qX)(e,"auth");return t.isInitialized()?t.getImmediate():A(e,{popupRedirectResolver:Cr,persistence:[gn,Jt,en]})}Pr="Browser",(0,i.Xd)(new a.wA("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{T(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),T(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:Pr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:be(Pr)},o=new we(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(P);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,i.Xd)(new a.wA("auth-internal",(e=>(e=>new Rr(e))(xe(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.KN)(Ar,Ir,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Pr)),(0,i.KN)(Ar,Ir,"esm2017")},83680:function(e,t,n){"use strict";n.r(t),n.d(t,{AbstractUserDataWriter:function(){return Mf},Bytes:function(){return _h},CACHE_SIZE_UNLIMITED:function(){return rh},CollectionReference:function(){return qd},DocumentReference:function(){return Wd},DocumentSnapshot:function(){return tf},FieldPath:function(){return wh},FieldValue:function(){return Sh},Firestore:function(){return ih},FirestoreError:function(){return Or},GeoPoint:function(){return Eh},LoadBundleTask:function(){return nh},Query:function(){return $d},QueryConstraint:function(){return lf},QueryDocumentSnapshot:function(){return nf},QuerySnapshot:function(){return rf},SnapshotMetadata:function(){return ef},Timestamp:function(){return Xr},Transaction:function(){return $f},WriteBatch:function(){return Af},_DatabaseId:function(){return Od},_DocumentKey:function(){return bi},_EmptyAppCheckTokenProvider:function(){return Hr},_EmptyAuthCredentialsProvider:function(){return Fr},_FieldPath:function(){return oi},_cast:function(){return zd},_debugAssert:function(){return Ir},_isBase64Available:function(){return ai},_logWarn:function(){return Mr},_validateIsNotUsedTogether:function(){return Fd},addDoc:function(){return Uf},arrayRemove:function(){return Jf},arrayUnion:function(){return Xf},clearIndexedDbPersistence:function(){return hh},collection:function(){return Yd},collectionGroup:function(){return Kd},connectFirestoreEmulator:function(){return Gd},deleteDoc:function(){return zf},deleteField:function(){return Yf},disableNetwork:function(){return mh},doc:function(){return Xd},documentId:function(){return xh},enableIndexedDbPersistence:function(){return ch},enableMultiTabIndexedDbPersistence:function(){return uh},enableNetwork:function(){return ph},endAt:function(){return _f},endBefore:function(){return xf},ensureFirestoreConfigured:function(){return ah},executeWrite:function(){return Gf},getDoc:function(){return Rf},getDocFromCache:function(){return Of},getDocFromServer:function(){return Nf},getDocs:function(){return Df},getDocsFromCache:function(){return Ff},getDocsFromServer:function(){return Bf},getFirestore:function(){return sh},increment:function(){return Qf},initializeFirestore:function(){return oh},limit:function(){return mf},limitToLast:function(){return gf},loadBundle:function(){return vh},namedQuery:function(){return yh},onSnapshot:function(){return jf},onSnapshotsInSync:function(){return Hf},orderBy:function(){return ff},query:function(){return cf},queryEqual:function(){return Qd},refEqual:function(){return Jd},runTransaction:function(){return qf},serverTimestamp:function(){return Kf},setDoc:function(){return Zf},setLogLevel:function(){return Er},snapshotEqual:function(){return sf},startAfter:function(){return bf},startAt:function(){return yf},terminate:function(){return gh},updateDoc:function(){return Vf},waitForPendingWrites:function(){return fh},where:function(){return df},writeBatch:function(){return ep}});var r,i=n(32238),o=n(8463),s=n(53333),a=n(74444),l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},c={},u=u||{},d=l||self;function h(){}function f(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function v(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function x(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function _(){this.s=this.s,this.o=this.o}var S={};_.prototype.s=!1,_.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,m)&&e[m]||(e[m]=++g)}(this);delete S[e]}},_.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},T=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function C(e){return Array.prototype.concat.apply([],arguments)}function M(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function k(e){return/^[\s\xa0]*$/.test(e)}var P,A=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function I(e,t){return-1!=e.indexOf(t)}function R(e,t){return e<t?-1:e>t?1:0}e:{var L=d.navigator;if(L){var O=L.userAgent;if(O){P=O;break e}}P=""}function N(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<F.length;t++)n=F[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Z(e){return Z[" "](e),e}Z[" "]=h;var V,z,U=I(P,"Opera"),j=I(P,"Trident")||I(P,"MSIE"),H=I(P,"Edge"),G=H||j,W=I(P,"Gecko")&&!(I(P.toLowerCase(),"webkit")&&!I(P,"Edge"))&&!(I(P,"Trident")||I(P,"MSIE"))&&!I(P,"Edge"),$=I(P.toLowerCase(),"webkit")&&!I(P,"Edge");function q(){var e=d.document;return e?e.documentMode:void 0}e:{var Y="",K=(z=P,W?/rv:([^\);]+)(\)|;)/.exec(z):H?/Edge\/([\d\.]+)/.exec(z):j?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(z):$?/WebKit\/(\S+)/.exec(z):U?/(?:Version)[ \/]?(\S+)/.exec(z):void 0);if(K&&(Y=K?K[1]:""),j){var X=q();if(null!=X&&X>parseFloat(Y)){V=String(X);break e}}V=Y}var J,Q={};function ee(){return function(e){var t=Q;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){let e=0;const t=A(String(V)).split("."),n=A("9").split("."),r=Math.max(t.length,n.length);for(let s=0;0==e&&s<r;s++){var i=t[s]||"",o=n[s]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;e=R(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||R(0==i[2].length,0==o[2].length)||R(i[2],o[2]),i=i[3],o=o[3]}while(0==e)}return 0<=e}))}if(d.document&&j){var te=q();J=te||(parseInt(V,10)||void 0)}else J=void 0;var ne=J,re=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{d.addEventListener("test",h,t),d.removeEventListener("test",h,t)}catch(e){}return e}();function ie(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function oe(e,t){if(ie.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(W){e:{try{Z(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:se[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&oe.Z.h.call(this)}}ie.prototype.h=function(){this.defaultPrevented=!0},x(oe,ie);var se={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),le=0;function ce(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++le,this.ca=this.fa=!1}function ue(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function de(e){this.src=e,this.g={},this.h=0}function he(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=E(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ue(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function fe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}de.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=fe(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):((t=new ce(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var pe="closure_lm_"+(1e6*Math.random()|0),me={};function ge(e,t,n,r,i){if(r&&r.once)return ye(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)ge(e,t[o],n,r,i);return null}return n=Te(n),e&&e[ae]?e.N(t,n,p(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i,a=Se(e);if(a||(e[pe]=a=new de(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=_e;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)re||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(xe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ye(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);return null}return n=Te(n),e&&e[ae]?e.O(t,n,p(r)?!!r.capture:!!r,i):ve(e,t,n,!0,r,i)}function be(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)be(e,t[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=Te(n),e&&e[ae]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=fe(o=e.g[t],n,r,i))&&(ue(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Se(e))&&(t=e.g[t.toString()],e=-1,t&&(e=fe(t,n,r,i)),(n=-1<e?t[e]:null)&&we(n))}function we(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ae])he(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(xe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Se(t))?(he(n,e),0==n.h&&(n.src=null,t[pe]=null)):ue(e)}}}function xe(e){return e in me?me[e]:me[e]="on"+e}function _e(e,t){if(e.ca)e=!0;else{t=new oe(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&we(e),e=n.call(r,t)}return e}function Se(e){return(e=e[pe])instanceof de?e:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(e){return"function"==typeof e?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function Ce(){_.call(this),this.i=new de(this),this.P=this,this.I=null}function Me(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new ie(t,e);else if(t instanceof ie)t.target=t.target||e;else{var i=t;B(t=new ie(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ke(s,r,!0,t)&&i}if(i=ke(s=t.g=e,r,!0,t)&&i,i=ke(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ke(s=t.g=n[o],r,!1,t)&&i}function ke(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,l=s.ia||s.src;s.fa&&he(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}x(Ce,_),Ce.prototype[ae]=!0,Ce.prototype.removeEventListener=function(e,t,n,r){be(this,e,t,n,r)},Ce.prototype.M=function(){if(Ce.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ue(n[r]);delete t.g[e],t.h--}}this.I=null},Ce.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ce.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Pe=d.JSON.stringify;function Ae(){var e=Fe;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ie,Re=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Le),(e=>e.reset()));class Le{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Oe(e){d.setTimeout((()=>{throw e}),0)}function Ne(e,t){Ie||function(){var e=d.Promise.resolve(void 0);Ie=function(){e.then(Be)}}(),De||(Ie(),De=!0),Fe.add(e,t)}var De=!1,Fe=new class{constructor(){this.h=this.g=null}add(e,t){const n=Re.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Be(){for(var e;e=Ae();){try{e.h.call(e.g)}catch(e){Oe(e)}var t=Re;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}De=!1}function Ze(e,t){Ce.call(this),this.h=e||1,this.g=t||d,this.j=b(this.kb,this),this.l=Date.now()}function Ve(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function ze(e,t,n){if("function"==typeof e)n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:d.setTimeout(e,t||0)}function Ue(e){e.g=ze((()=>{e.g=null,e.i&&(e.i=!1,Ue(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}x(Ze,Ce),(r=Ze.prototype).da=!1,r.S=null,r.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Me(this,"tick"),this.da&&(Ve(this),this.start()))}},r.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Ze.Z.M.call(this),Ve(this),delete this.g};class je extends _{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ue(this)}M(){super.M(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function He(e){_.call(this),this.h=e,this.g={}}x(He,_);var Ge=[];function We(e,t,n,r){Array.isArray(n)||(n&&(Ge[0]=n.toString()),n=Ge);for(var i=0;i<n.length;i++){var o=ge(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function $e(e){N(e.g,(function(e,t){this.g.hasOwnProperty(t)&&we(e)}),e),e.g={}}function qe(){this.g=!0}function Ye(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Pe(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}He.prototype.M=function(){He.Z.M.call(this),$e(this)},He.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qe.prototype.Aa=function(){this.g=!1},qe.prototype.info=function(){};var Ke={},Xe=null;function Je(){return Xe=Xe||new Ce}function Qe(e){ie.call(this,Ke.Ma,e)}function et(e){const t=Je();Me(t,new Qe(t,e))}function tt(e,t){ie.call(this,Ke.STAT_EVENT,e),this.stat=t}function nt(e){const t=Je();Me(t,new tt(t,e))}function rt(e,t){ie.call(this,Ke.Na,e),this.size=t}function it(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return d.setTimeout((function(){e()}),t)}Ke.Ma="serverreachability",x(Qe,ie),Ke.STAT_EVENT="statevent",x(tt,ie),Ke.Na="timingevent",x(rt,ie);var ot={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},st={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function at(){}function lt(e){return e.h||(e.h=e.i())}function ct(){}at.prototype.h=null;var ut,dt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ht(){ie.call(this,"d")}function ft(){ie.call(this,"c")}function pt(){}function mt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new He(this),this.P=vt,e=G?125:void 0,this.W=new Ze(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gt}function gt(){this.i=null,this.g="",this.h=!1}x(ht,ie),x(ft,ie),x(pt,at),pt.prototype.g=function(){return new XMLHttpRequest},pt.prototype.i=function(){return{}},ut=new pt;var vt=45e3,yt={},bt={};function wt(e,t,n){e.K=1,e.v=jt(Ft(t)),e.s=n,e.U=!0,xt(e,null)}function xt(e,t){e.F=Date.now(),Tt(e),e.A=Ft(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),nn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new gt,e.g=rr(e.l,n?t:null,!e.s),0<e.O&&(e.L=new je(b(e.Ia,e,e.g),e.O)),We(e.V,e.g,"readystatechange",e.gb),t=e.H?D(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),et(1),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function _t(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function St(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=Et(e,n),r==bt){4==t&&(e.o=4,nt(14),i=!1),Ye(e.j,e.m,null,"[Incomplete Response]");break}if(r==yt){e.o=4,nt(15),Ye(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ye(e.j,e.m,r,null),At(e,r)}_t(e)&&r!=bt&&r!=yt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,nt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yn(t),t.L=!0,nt(11))):(Ye(e.j,e.m,n,"[Invalid Chunked Response]"),Pt(e),kt(e))}function Et(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?bt:(n=Number(t.substring(n,r)),isNaN(n)?yt:(r+=1)+n>t.length?bt:(t=t.substr(r,n),e.C=r+n,t))}function Tt(e){e.Y=Date.now()+e.P,Ct(e,e.P)}function Ct(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=it(b(e.eb,e),t)}function Mt(e){e.B&&(d.clearTimeout(e.B),e.B=null)}function kt(e){0==e.l.G||e.I||Jn(e.l,e)}function Pt(e){Mt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ve(e.W),$e(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function At(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||cn(n.i,e)))if(n.I=e.N,!e.J&&cn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Xn(n),Vn(n)}qn(n),nt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=it(b(n.ab,n),6e3));if(1>=ln(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else er(n,11)}else if((e.J||n.g==e)&&Xn(n),!k(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const t=c[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=c[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;!o.g&&(I(e,"spdy")||I(e,"quic")||I(e,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(un(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,Ut(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var s=e;if((r=n).oa=nr(r,r.H?r.la:null,r.W),s.J){dn(r.i,s);var a=s,l=r.K;l&&a.setTimeout(l),a.B&&(Mt(a),Tt(a)),r.g=s}else $n(r);0<n.l.length&&jn(n)}else"stop"!=c[0]&&"close"!=c[0]||er(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?er(n,7):Zn(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}et(4)}catch(e){}}function It(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||"string"==typeof e)T(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(f(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Rt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Rt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Lt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ot(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ot(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=mt.prototype).setTimeout=function(e){this.P=e},r.gb=function(e){e=e.target;const t=this.L;t&&3==On(e)?t.l():this.Ia(e)},r.Ia=function(e){try{if(e==this.g)e:{const u=On(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>u)&&(3!=u||G||this.g&&(this.h.h||this.g.ga()||Nn(this.g)))){this.I||4!=u||7==t||et(8==t||0>=h?3:2),Mt(this);var n=this.g.ba();this.N=n;t:if(_t(this)){var r=Nn(this.g);e="";var i=r.length,o=4==On(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Pt(this),kt(this);var s="";break t}this.h.i=new d.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,nt(12),Pt(this),kt(this);break e}Ye(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,At(this,n)}this.U?(St(this,u,s),G&&this.i&&3==u&&(We(this.V,this.W,"tick",this.fb),this.W.start())):(Ye(this.j,this.m,s,null),At(this,s)),4==u&&Pt(this),this.i&&!this.I&&(4==u?Jn(this.l,this):(this.i=!1,Tt(this)))}else 400==n&&0<s.indexOf("Unknown SID")?(this.o=3,nt(12)):(this.o=0,nt(13)),Pt(this),kt(this)}}}catch(e){}},r.fb=function(){if(this.g){var e=On(this.g),t=this.g.ga();this.C<t.length&&(Mt(this),St(this,e,t),this.i&&4!=e&&Tt(this))}},r.cancel=function(){this.I=!0,Pt(this)},r.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(et(3),nt(17)),Pt(this),this.o=2,kt(this)):Ct(this,this.Y-e)},(r=Rt.prototype).R=function(){Lt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},r.T=function(){return Lt(this),this.g.concat()},r.get=function(e,t){return Ot(this.h,e)?this.h[e]:t},r.set=function(e,t){Ot(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},r.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Nt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Dt){this.g=void 0!==t?t:e.g,Bt(this,e.j),this.s=e.s,Zt(this,e.i),Vt(this,e.m),this.l=e.l,t=e.h;var n=new Jt;n.i=t.i,t.g&&(n.g=new Rt(t.g),n.h=t.h),zt(this,n),this.o=e.o}else e&&(n=String(e).match(Nt))?(this.g=!!t,Bt(this,n[1]||"",!0),this.s=Ht(n[2]||""),Zt(this,n[3]||"",!0),Vt(this,n[4]),this.l=Ht(n[5]||"",!0),zt(this,n[6]||"",!0),this.o=Ht(n[7]||"")):(this.g=!!t,this.h=new Jt(null,this.g))}function Ft(e){return new Dt(e)}function Bt(e,t,n){e.j=n?Ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Zt(e,t,n){e.i=n?Ht(t,!0):t}function Vt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zt(e,t,n){t instanceof Jt?(e.h=t,function(e,t){t&&!e.j&&(Qt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(en(this,t),nn(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Gt(t,Kt)),e.h=new Jt(t,e.g))}function Ut(e,t,n){e.h.set(t,n)}function jt(e){return Ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Gt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Dt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Gt(t,$t,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Gt(t,$t,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Gt(n,"/"==n.charAt(0)?Yt:qt,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Gt(n,Xt)),e.join("")};var $t=/[#\/\?@]/g,qt=/[#\?:]/g,Yt=/[#\?]/g,Kt=/[#\?@]/g,Xt=/#/g;function Jt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qt(e){e.g||(e.g=new Rt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function en(e,t){Qt(e),t=rn(e,t),Ot(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ot((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Lt(e)))}function tn(e,t){return Qt(e),t=rn(e,t),Ot(e.g.h,t)}function nn(e,t,n){en(e,t),0<n.length&&(e.i=null,e.g.set(rn(e,t),M(n)),e.h+=n.length)}function rn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=Jt.prototype).add=function(e,t){Qt(this),this.i=null,e=rn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Qt(this),this.g.forEach((function(n,r){T(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.T=function(){Qt(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.R=function(e){Qt(this);var t=[];if("string"==typeof e)tn(this,e)&&(t=C(t,this.g.get(rn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=C(t,e[n])}return t},r.set=function(e,t){return Qt(this),this.i=null,tn(this,e=rn(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.i=e.join("&")};function on(e){this.l=e||sn,d.PerformanceNavigationTiming?e=0<(e=d.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(d.g&&d.g.Ea&&d.g.Ea()&&d.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var sn=10;function an(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ln(e){return e.h?1:e.g?e.g.size:0}function cn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function un(e,t){e.g?e.g.add(t):e.h=t}function dn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function hn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return M(e.i)}function fn(){}function pn(){this.g=new fn}function mn(e,t,n){const r=n||"";try{It(e,(function(e,n){let i=e;p(e)&&(i=Pe(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function gn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function vn(e){this.l=e.$b||null,this.j=e.ib||!1}function yn(e,t){Ce.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=bn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}on.prototype.cancel=function(){if(this.i=hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},fn.prototype.stringify=function(e){return d.JSON.stringify(e,void 0)},fn.prototype.parse=function(e){return d.JSON.parse(e,void 0)},x(vn,at),vn.prototype.g=function(){return new yn(this.l,this.j)},vn.prototype.i=function(e){return function(){return e}}({}),x(yn,Ce);var bn=0;function wn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function xn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,_n(e)}function _n(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=yn.prototype).open=function(e,t){if(this.readyState!=bn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,_n(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||d).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xn(this)),this.readyState=bn},r.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_n(this)),this.g&&(this.readyState=3,_n(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==d.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},r.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xn(this):_n(this),3==this.readyState&&wn(this)}},r.Ua=function(e){this.g&&(this.response=this.responseText=e,xn(this))},r.Ta=function(e){this.g&&(this.response=e,xn(this))},r.ha=function(){this.g&&xn(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(yn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Sn=d.JSON.parse;function En(e){Ce.call(this),this.headers=new Rt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Tn,this.K=this.L=!1}x(En,Ce);var Tn="",Cn=/^https?$/i,Mn=["POST","PUT"];function kn(e){return"content-type"==e.toLowerCase()}function Pn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,An(e),Rn(e)}function An(e){e.D||(e.D=!0,Me(e,"complete"),Me(e,"error"))}function In(e){if(e.h&&void 0!==u&&(!e.C[1]||4!=On(e)||2!=e.ba()))if(e.v&&4==On(e))ze(e.Fa,0,e);else if(Me(e,"readystatechange"),4==On(e)){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.H).match(Nt)[1]||null;if(!i&&d.self&&d.self.location){var o=d.self.location.protocol;i=o.substr(0,o.length-1)}r=!Cn.test(i?i.toLowerCase():"")}n=r}if(n)Me(e,"complete"),Me(e,"success");else{e.m=6;try{var s=2<On(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.ba()+"]",An(e)}}finally{Rn(e)}}}function Rn(e,t){if(e.g){Ln(e);const n=e.g,r=e.C[0]?h:null;e.g=null,e.C=null,t||Me(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function Ln(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(d.clearTimeout(e.A),e.A=null)}function On(e){return e.g?e.g.readyState:0}function Nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Tn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Dn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return N(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Ut(e,t,n))}function Fn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Bn(e){this.za=0,this.l=[],this.h=new qe,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fn("baseRetryDelayMs",5e3,e),this.$a=Fn("retryDelaySeedMs",1e4,e),this.Ya=Fn("forwardChannelMaxRetries",2,e),this.ra=Fn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new on(e&&e.concurrentRequestLimit),this.Ca=new pn,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Zn(e){if(zn(e),3==e.G){var t=e.V++,n=Ft(e.F);Ut(n,"SID",e.J),Ut(n,"RID",t),Ut(n,"TYPE","terminate"),Gn(e,n),(t=new mt(e,e.h,t,void 0)).K=2,t.v=jt(Ft(n)),n=!1,d.navigator&&d.navigator.sendBeacon&&(n=d.navigator.sendBeacon(t.v.toString(),"")),!n&&d.Image&&((new Image).src=t.v,n=!0),n||(t.g=rr(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Tt(t)}tr(e)}function Vn(e){e.g&&(Yn(e),e.g.cancel(),e.g=null)}function zn(e){Vn(e),e.u&&(d.clearTimeout(e.u),e.u=null),Xn(e),e.i.cancel(),e.m&&("number"==typeof e.m&&d.clearTimeout(e.m),e.m=null)}function Un(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&jn(e)}function jn(e){an(e.i)||e.m||(e.m=!0,Ne(e.Ha,e),e.C=0)}function Hn(e,t){var n;n=t?t.m:e.V++;const r=Ft(e.F);Ut(r,"SID",e.J),Ut(r,"RID",n),Ut(r,"AID",e.U),Gn(e,r),e.o&&e.s&&Dn(r,e.o,e.s),n=new mt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Wn(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),un(e.i,n),wt(n,r,t)}function Gn(e,t){e.j&&It({},(function(e,n){Ut(t,n,e)}))}function Wn(e,t,n){n=Math.min(e.l.length,n);var r=e.j?b(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].h;const a=i[s].g;if(n-=t,0>n)t=Math.max(0,i[s].h-100),o=!1;else try{mn(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function $n(e){e.g||e.u||(e.Y=1,Ne(e.Ga,e),e.A=0)}function qn(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=it(b(e.Ga,e),Qn(e,e.A)),e.A++,!0)}function Yn(e){null!=e.B&&(d.clearTimeout(e.B),e.B=null)}function Kn(e){e.g=new mt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ft(e.oa);Ut(t,"RID","rpc"),Ut(t,"SID",e.J),Ut(t,"CI",e.N?"0":"1"),Ut(t,"AID",e.U),Gn(e,t),Ut(t,"TYPE","xmlhttp"),e.o&&e.s&&Dn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=jt(Ft(t)),n.s=null,n.U=!0,xt(n,e)}function Xn(e){null!=e.v&&(d.clearTimeout(e.v),e.v=null)}function Jn(e,t){var n=null;if(e.g==t){Xn(e),Yn(e),e.g=null;var r=2}else{if(!cn(e.i,t))return;n=t.D,dn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Me(r=Je(),new rt(r,n,t,i)),jn(e)}else $n(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ln(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=it(b(e.Ha,e,t),Qn(e,e.C)),e.C++,0)))}(e,t)||2==r&&qn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:er(e,5);break;case 4:er(e,10);break;case 3:er(e,6);break;default:er(e,2)}}function Qn(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function er(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=b(e.jb,e);n||(n=new Dt("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||Bt(n,"https"),jt(n)),function(e,t){const n=new qe;if(d.Image){const r=new Image;r.onload=w(gn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(gn,n,r,"TestLoadImage: error",!1,t),r.onabort=w(gn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(gn,n,r,"TestLoadImage: timeout",!1,t),d.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else nt(2);e.G=0,e.j&&e.j.va(t),tr(e),zn(e)}function tr(e){e.G=0,e.I=-1,e.j&&(0==hn(e.i).length&&0==e.l.length||(e.i.i.length=0,M(e.l),e.l.length=0),e.j.ua())}function nr(e,t,n){let r=function(e){return e instanceof Dt?Ft(e):new Dt(e,void 0)}(n);if(""!=r.i)t&&Zt(r,t+"."+r.i),Vt(r,r.m);else{const e=d.location;r=function(e,t,n,r){var i=new Dt(null,void 0);return e&&Bt(i,e),t&&Zt(i,t),n&&Vt(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&N(e.aa,(function(e,t){Ut(r,t,e)})),t=e.D,n=e.sa,t&&n&&Ut(r,t,n),Ut(r,"VER",e.ma),Gn(e,r),r}function rr(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new En(new vn({ib:!0})):new En(e.qa)).L=e.H,t}function ir(){}function or(){if(j&&!(10<=Number(ne)))throw Error("Environmental error: no available transport.")}function sr(e,t){Ce.call(this),this.g=new Bn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!k(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new cr(this)}function ar(e){ht.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function lr(){ft.call(this),this.status=1}function cr(e){this.g=e}(r=En.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ut.g(),this.C=this.u?lt(this.u):lt(ut),this.g.onreadystatechange=b(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void Pn(this,e)}e=n||"";const i=new Rt(this.headers);r&&It(r,(function(e,t){i.set(t,e)})),r=function(e){e:{var t=kn;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=d.FormData&&e instanceof d.FormData,!(0<=E(Mn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ln(this),0<this.B&&((this.K=function(e){return j&&ee()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=b(this.pa,this)):this.A=ze(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Pn(this,e)}},r.pa=function(){void 0!==u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Me(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Me(this,"complete"),Me(this,"abort"),Rn(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rn(this,!0)),En.Z.M.call(this)},r.Fa=function(){this.s||(this.F||this.v||this.l?In(this):this.cb())},r.cb=function(){In(this)},r.ba=function(){try{return 2<On(this)?this.g.status:-1}catch(e){return-1}},r.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Sn(t)}},r.Da=function(){return this.m},r.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=Bn.prototype).ma=8,r.G=1,r.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},r.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new mt(this,this.h,e,void 0);let o=this.s;if(this.P&&(o?(o=D(o),B(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Wn(this,i,t),Ut(n=Ft(this.F),"RID",e),Ut(n,"CVER",22),this.D&&Ut(n,"X-HTTP-Session-Id",this.D),Gn(this,n),this.o&&o&&Dn(n,this.o,o),un(this.i,i),this.Ra&&Ut(n,"TYPE","init"),this.ja?(Ut(n,"$req",t),Ut(n,"SID","null"),i.$=!0,wt(i,n,null)):wt(i,n,t),this.G=2}}else 3==this.G&&(e?Hn(this,e):0==this.l.length||an(this.i)||Hn(this))},r.Ga=function(){if(this.u=null,Kn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=it(b(this.bb,this),e)}},r.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,nt(10),Vn(this),Kn(this))},r.ab=function(){null!=this.v&&(this.v=null,Vn(this),qn(this),nt(19))},r.jb=function(e){e?(this.h.info("Successfully pinged google.com"),nt(2)):(this.h.info("Failed to ping google.com"),nt(1))},(r=ir.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Oa=function(){},or.prototype.g=function(e,t){return new sr(e,t)},x(sr,Ce),sr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ne(b(e.hb,e,t))),nt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=nr(e,null,e.W),jn(e)},sr.prototype.close=function(){Zn(this.g)},sr.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Un(this.g,t)}else this.v?((t={}).__data__=Pe(e),Un(this.g,t)):Un(this.g,e)},sr.prototype.M=function(){this.g.j=null,delete this.j,Zn(this.g),delete this.g,sr.Z.M.call(this)},x(ar,ht),x(lr,ft),x(cr,ir),cr.prototype.xa=function(){Me(this.g,"a")},cr.prototype.wa=function(e){Me(this.g,new ar(e))},cr.prototype.va=function(e){Me(this.g,new lr(e))},cr.prototype.ua=function(){Me(this.g,"b")},or.prototype.createWebChannel=or.prototype.g,sr.prototype.send=sr.prototype.u,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,st.COMPLETE="complete",ct.EventType=dt,dt.OPEN="a",dt.CLOSE="b",dt.ERROR="c",dt.MESSAGE="d",Ce.prototype.listen=Ce.prototype.N,En.prototype.listenOnce=En.prototype.O,En.prototype.getLastError=En.prototype.La,En.prototype.getLastErrorCode=En.prototype.Da,En.prototype.getStatus=En.prototype.ba,En.prototype.getResponseJson=En.prototype.Qa,En.prototype.getResponseText=En.prototype.ga,En.prototype.send=En.prototype.ea;var ur=c.createWebChannelTransport=function(){return new or},dr=c.getStatEventTarget=function(){return Je()},hr=c.ErrorCode=ot,fr=c.EventType=st,pr=c.Event=Ke,mr=c.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gr=c.FetchXmlHttpFactory=vn,vr=c.WebChannel=ct,yr=c.XhrIo=En;const br="@firebase/firestore";class wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");let xr="9.6.3";const _r=new s.Yd("@firebase/firestore");function Sr(){return _r.logLevel}function Er(e){_r.setLogLevel(e)}function Tr(e,...t){if(_r.logLevel<=s.in.DEBUG){const n=t.map(kr);_r.debug(`Firestore (${xr}): ${e}`,...n)}}function Cr(e,...t){if(_r.logLevel<=s.in.ERROR){const n=t.map(kr);_r.error(`Firestore (${xr}): ${e}`,...n)}}function Mr(e,...t){if(_r.logLevel<=s.in.WARN){const n=t.map(kr);_r.warn(`Firestore (${xr}): ${e}`,...n)}}function kr(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Pr(e="Unexpected state"){const t=`FIRESTORE (${xr}) INTERNAL ASSERTION FAILED: `+e;throw Cr(t),new Error(t)}function Ar(e,t){e||Pr()}function Ir(e,t){e||Pr()}function Rr(e,t){return e}const Lr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Or extends a.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Dr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(wr.UNAUTHENTICATED)))}shutdown(){}}class Br{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Zr{constructor(e){this.t=e,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Nr,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Tr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Tr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Nr)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Tr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ar("string"==typeof t.accessToken),new Dr(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ar(null===e||"string"==typeof e),new wr(e)}}class Vr{constructor(e,t,n){this.type="FirstParty",this.user=wr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class zr{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Vr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(wr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ur{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jr{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=n=>{e.enqueueRetryable((()=>(e=>(null!=e.error&&Tr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`),t(e.token)))(n)))};const n=e=>{Tr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>n(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?n(e):Tr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ar("string"==typeof e.token),new Ur(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Hr{getToken(){return Promise.resolve(new Ur(""))}invalidateToken(){}start(e,t){}shutdown(){}}class Gr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.p(e),this.T=e=>t.writeSequenceNumber(e))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Wr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}Gr.I=-1;class $r{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Wr(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function qr(e,t){return e<t?-1:e>t?1:0}function Yr(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Kr(e){return e+"\0"}class Xr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Or(Lr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Or(Lr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Or(Lr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Or(Lr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xr.fromMillis(Date.now())}static fromDate(e){return Xr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Xr(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qr(this.nanoseconds,e.nanoseconds):qr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Jr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Jr(e)}static min(){return new Jr(new Xr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Qr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ei(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ti(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ni{constructor(e,t,n){void 0===t?t=0:t>e.length&&Pr(),void 0===n?n=e.length-t:n>e.length-t&&Pr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ni.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ni?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ri extends ni{construct(e,t,n){return new ri(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Or(Lr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new ri(t)}static emptyPath(){return new ri([])}}const ii=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oi extends ni{construct(e,t,n){return new oi(e,t,n)}static isValidIdentifier(e){return ii.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new oi(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Or(Lr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Or(Lr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Or(Lr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Or(Lr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oi(t)}static emptyPath(){return new oi([])}}class si{constructor(e){this.fields=e,e.sort(oi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yr(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}function ai(){return"undefined"!=typeof atob}class li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new li(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new li(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}li.EMPTY_BYTE_STRING=new li("");const ci=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ui(e){if(Ar(!!e),"string"==typeof e){let t=0;const n=ci.exec(e);if(Ar(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:di(e.seconds),nanos:di(e.nanos)}}function di(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function hi(e){return"string"==typeof e?li.fromBase64String(e):li.fromUint8Array(e)}function fi(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function pi(e){const t=e.mapValue.fields.__previous_value__;return fi(t)?pi(t):t}function mi(e){const t=ui(e.mapValue.fields.__local_write_time__.timestampValue);return new Xr(t.seconds,t.nanos)}function gi(e){return null==e}function vi(e){return 0===e&&1/e==-1/0}function yi(e){return"number"==typeof e&&Number.isInteger(e)&&!vi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class bi{constructor(e){this.path=e}static fromPath(e){return new bi(ri.fromString(e))}static fromName(e){return new bi(ri.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===ri.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ri.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bi(new ri(e.slice()))}}function wi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fi(e)?4:10:Pr()}function xi(e,t){if(e===t)return!0;const n=wi(e);if(n!==wi(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return mi(e).isEqual(mi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ui(e.timestampValue),r=ui(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return hi(e.bytesValue).isEqual(hi(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return di(e.geoPointValue.latitude)===di(t.geoPointValue.latitude)&&di(e.geoPointValue.longitude)===di(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return di(e.integerValue)===di(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=di(e.doubleValue),r=di(t.doubleValue);return n===r?vi(n)===vi(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Yr(e.arrayValue.values||[],t.arrayValue.values||[],xi);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Qr(n)!==Qr(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!xi(n[e],r[e])))return!1;return!0}(e,t);default:return Pr()}}function _i(e,t){return void 0!==(e.values||[]).find((e=>xi(e,t)))}function Si(e,t){if(e===t)return 0;const n=wi(e),r=wi(t);if(n!==r)return qr(n,r);switch(n){case 0:return 0;case 1:return qr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=di(e.integerValue||e.doubleValue),r=di(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ei(e.timestampValue,t.timestampValue);case 4:return Ei(mi(e),mi(t));case 5:return qr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=hi(e),r=hi(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=qr(n[e],r[e]);if(0!==t)return t}return qr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=qr(di(e.latitude),di(t.latitude));return 0!==n?n:qr(di(e.longitude),di(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Si(n[e],r[e]);if(t)return t}return qr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let e=0;e<r.length&&e<o.length;++e){const t=qr(r[e],o[e]);if(0!==t)return t;const s=Si(n[r[e]],i[o[e]]);if(0!==s)return s}return qr(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Pr()}}function Ei(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return qr(e,t);const n=ui(e),r=ui(t),i=qr(n.seconds,r.seconds);return 0!==i?i:qr(n.nanos,r.nanos)}function Ti(e){return Ci(e)}function Ci(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ui(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?hi(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,bi.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ci(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ci(e.fields[i])}`;return n+"}"}(e.mapValue):Pr();var t,n}function Mi(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ki(e){return!!e&&"integerValue"in e}function Pi(e){return!!e&&"arrayValue"in e}function Ai(e){return!!e&&"nullValue"in e}function Ii(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ri(e){return!!e&&"mapValue"in e}function Li(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ei(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Li(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Li(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ri(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Li(t)}setAll(e){let t=oi.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Li(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ri(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ri(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ei(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Oi(Li(this.value))}}function Ni(e){const t=[];return ei(e.fields,((e,n)=>{const r=new oi([e]);if(Ri(n)){const e=Ni(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new si(t)}class Di{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new Di(e,0,Jr.min(),Oi.empty(),0)}static newFoundDocument(e,t,n){return new Di(e,1,t,n,0)}static newNoDocument(e,t){return new Di(e,2,t,Oi.empty(),0)}static newUnknownDocument(e,t){return new Di(e,3,t,Oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Di&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Di(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fi{constructor(e,t=null,n=[],r=[],i=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.R=null}}function Bi(e,t=null,n=[],r=[],i=null,o=null,s=null){return new Fi(e,t,n,r,i,o,s)}function Zi(e){const t=Rr(e);if(null===t.R){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>function(e){return e.field.canonicalString()+e.op.toString()+Ti(e.value)}(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),gi(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=Ji(t.startAt)),t.endAt&&(e+="|ub:",e+=Ji(t.endAt)),t.R=e}return t.R}function Vi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!eo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!xi(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!no(e.startAt,t.startAt)&&no(e.endAt,t.endAt)}function zi(e){return bi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ui extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,n):new ji(e,t,n):"array-contains"===t?new $i(e,n):"in"===t?new qi(e,n):"not-in"===t?new Yi(e,n):"array-contains-any"===t?new Ki(e,n):new Ui(e,t,n)}static P(e,t,n){return"in"===t?new Hi(e,n):new Gi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Si(t,this.value)):null!==t&&wi(this.value)===wi(t)&&this.v(Si(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Pr()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ji extends Ui{constructor(e,t,n){super(e,t,n),this.key=bi.fromName(n.referenceValue)}matches(e){const t=bi.comparator(e.key,this.key);return this.v(t)}}class Hi extends Ui{constructor(e,t){super(e,"in",t),this.keys=Wi("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Gi extends Ui{constructor(e,t){super(e,"not-in",t),this.keys=Wi("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Wi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>bi.fromName(e.referenceValue)))}class $i extends Ui{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pi(t)&&_i(t.arrayValue,this.value)}}class qi extends Ui{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_i(this.value.arrayValue,t)}}class Yi extends Ui{constructor(e,t){super(e,"not-in",t)}matches(e){if(_i(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_i(this.value.arrayValue,t)}}class Ki extends Ui{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pi(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>_i(this.value.arrayValue,e)))}}class Xi{constructor(e,t){this.position=e,this.before=t}}function Ji(e){return`${e.before?"b":"a"}:${e.position.map((e=>Ti(e))).join(",")}`}class Qi{constructor(e,t="asc"){this.field=e,this.dir=t}}function eo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function to(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?bi.comparator(bi.fromName(s.referenceValue),n.key):Si(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function no(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!xi(e.position[n],t.position[n]))return!1;return!0}class ro{constructor(e,t=null,n=[],r=[],i=null,o="F",s=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.S=null,this.D=null,this.startAt,this.endAt}}function io(e,t,n,r,i,o,s,a){return new ro(e,t,n,r,i,o,s,a)}function oo(e){return new ro(e)}function so(e){return!gi(e.limit)&&"F"===e.limitType}function ao(e){return!gi(e.limit)&&"L"===e.limitType}function lo(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function co(e){for(const t of e.filters)if(t.V())return t.field;return null}function uo(e){return null!==e.collectionGroup}function ho(e){const t=Rr(e);if(null===t.S){t.S=[];const e=co(t),n=lo(t);if(null!==e&&null===n)e.isKeyField()||t.S.push(new Qi(e)),t.S.push(new Qi(oi.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.S.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new Qi(oi.keyField(),e))}}}return t.S}function fo(e){const t=Rr(e);if(!t.D)if("F"===t.limitType)t.D=Bi(t.path,t.collectionGroup,ho(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of ho(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Qi(n.field,t))}const n=t.endAt?new Xi(t.endAt.position,!t.endAt.before):null,r=t.startAt?new Xi(t.startAt.position,!t.startAt.before):null;t.D=Bi(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.D}function po(e,t,n){return new ro(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mo(e,t){return Vi(fo(e),fo(t))&&e.limitType===t.limitType}function go(e){return`${Zi(fo(e))}|lt:${e.limitType}`}function vo(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Ti(t.value)}`;var t})).join(", ")}]`),gi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: "+Ji(e.startAt)),e.endAt&&(t+=", endAt: "+Ji(e.endAt)),`Target(${t})`}(fo(e))}; limitType=${e.limitType})`}function yo(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):bi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!to(e.startAt,ho(e),t))&&(!e.endAt||!to(e.endAt,ho(e),t))}(e,t)}function bo(e){return(t,n)=>{let r=!1;for(const i of ho(e)){const e=wo(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function wo(e,t,n){const r=e.field.isKeyField()?bi.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Si(r,i):Pr()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Pr()}}function xo(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vi(t)?"-0":t}}function _o(e){return{integerValue:""+e}}function So(e,t){return yi(t)?_o(t):xo(e,t)}class Eo{constructor(){this._=void 0}}function To(e,t,n){return e instanceof ko?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Po?Ao(e,t):e instanceof Io?Ro(e,t):function(e,t){const n=Mo(e,t),r=Oo(n)+Oo(e.N);return ki(n)&&ki(e.N)?_o(r):xo(e.k,r)}(e,t)}function Co(e,t,n){return e instanceof Po?Ao(e,t):e instanceof Io?Ro(e,t):n}function Mo(e,t){return e instanceof Lo?ki(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class ko extends Eo{}class Po extends Eo{constructor(e){super(),this.elements=e}}function Ao(e,t){const n=No(t);for(const t of e.elements)n.some((e=>xi(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Io extends Eo{constructor(e){super(),this.elements=e}}function Ro(e,t){let n=No(t);for(const t of e.elements)n=n.filter((e=>!xi(e,t)));return{arrayValue:{values:n}}}class Lo extends Eo{constructor(e,t){super(),this.k=e,this.N=t}}function Oo(e){return di(e.integerValue||e.doubleValue)}function No(e){return Pi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Do{constructor(e,t){this.field=e,this.transform=t}}class Fo{constructor(e,t){this.version=e,this.transformResults=t}}class Bo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bo}static exists(e){return new Bo(void 0,e)}static updateTime(e){return new Bo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zo(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Vo{}function zo(e,t,n){e instanceof Wo?function(e,t,n){const r=e.value.clone(),i=Yo(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $o?function(e,t,n){if(!Zo(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Yo(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(qo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Uo(e,t,n){e instanceof Wo?function(e,t,n){if(!Zo(e.precondition,t))return;const r=e.value.clone(),i=Ko(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Go(t),r).setHasLocalMutations()}(e,t,n):e instanceof $o?function(e,t,n){if(!Zo(e.precondition,t))return;const r=Ko(e.fieldTransforms,n,t),i=t.data;i.setAll(qo(e)),i.setAll(r),t.convertToFoundDocument(Go(t),i).setHasLocalMutations()}(e,t,n):function(e,t){Zo(e.precondition,t)&&t.convertToNoDocument(Jr.min())}(e,t)}function jo(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Mo(r.transform,e||null);null!=i&&(null==n&&(n=Oi.empty()),n.set(r.field,i))}return n||null}function Ho(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Yr(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Po&&t instanceof Po||e instanceof Io&&t instanceof Io?Yr(e.elements,t.elements,xi):e instanceof Lo&&t instanceof Lo?xi(e.N,t.N):e instanceof ko&&t instanceof ko}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Go(e){return e.isFoundDocument()?e.version:Jr.min()}class Wo extends Vo{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class $o extends Vo{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function qo(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Yo(e,t,n){const r=new Map;Ar(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Co(s,a,n[i]))}return r}function Ko(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,To(e,o,t))}return r}class Xo extends Vo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Jo extends Vo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Qo{constructor(e){this.count=e}}var es,ts;function ns(e){switch(e){default:return Pr();case Lr.CANCELLED:case Lr.UNKNOWN:case Lr.DEADLINE_EXCEEDED:case Lr.RESOURCE_EXHAUSTED:case Lr.INTERNAL:case Lr.UNAVAILABLE:case Lr.UNAUTHENTICATED:return!1;case Lr.INVALID_ARGUMENT:case Lr.NOT_FOUND:case Lr.ALREADY_EXISTS:case Lr.PERMISSION_DENIED:case Lr.FAILED_PRECONDITION:case Lr.ABORTED:case Lr.OUT_OF_RANGE:case Lr.UNIMPLEMENTED:case Lr.DATA_LOSS:return!0}}function rs(e){if(void 0===e)return Cr("GRPC error has no .code"),Lr.UNKNOWN;switch(e){case es.OK:return Lr.OK;case es.CANCELLED:return Lr.CANCELLED;case es.UNKNOWN:return Lr.UNKNOWN;case es.DEADLINE_EXCEEDED:return Lr.DEADLINE_EXCEEDED;case es.RESOURCE_EXHAUSTED:return Lr.RESOURCE_EXHAUSTED;case es.INTERNAL:return Lr.INTERNAL;case es.UNAVAILABLE:return Lr.UNAVAILABLE;case es.UNAUTHENTICATED:return Lr.UNAUTHENTICATED;case es.INVALID_ARGUMENT:return Lr.INVALID_ARGUMENT;case es.NOT_FOUND:return Lr.NOT_FOUND;case es.ALREADY_EXISTS:return Lr.ALREADY_EXISTS;case es.PERMISSION_DENIED:return Lr.PERMISSION_DENIED;case es.FAILED_PRECONDITION:return Lr.FAILED_PRECONDITION;case es.ABORTED:return Lr.ABORTED;case es.OUT_OF_RANGE:return Lr.OUT_OF_RANGE;case es.UNIMPLEMENTED:return Lr.UNIMPLEMENTED;case es.DATA_LOSS:return Lr.DATA_LOSS;default:return Pr()}}(ts=es||(es={}))[ts.OK=0]="OK",ts[ts.CANCELLED=1]="CANCELLED",ts[ts.UNKNOWN=2]="UNKNOWN",ts[ts.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ts[ts.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ts[ts.NOT_FOUND=5]="NOT_FOUND",ts[ts.ALREADY_EXISTS=6]="ALREADY_EXISTS",ts[ts.PERMISSION_DENIED=7]="PERMISSION_DENIED",ts[ts.UNAUTHENTICATED=16]="UNAUTHENTICATED",ts[ts.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ts[ts.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ts[ts.ABORTED=10]="ABORTED",ts[ts.OUT_OF_RANGE=11]="OUT_OF_RANGE",ts[ts.UNIMPLEMENTED=12]="UNIMPLEMENTED",ts[ts.INTERNAL=13]="INTERNAL",ts[ts.UNAVAILABLE=14]="UNAVAILABLE",ts[ts.DATA_LOSS=15]="DATA_LOSS";class is{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new is(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new is(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new os(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new os(this.root,e,this.comparator,!1)}getReverseIterator(){return new os(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new os(this.root,e,this.comparator,!0)}}class os{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ss.RED,this.left=null!=r?r:ss.EMPTY,this.right=null!=i?i:ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ss(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ss.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pr();if(this.right.isRed())throw Pr();const e=this.left.check();if(e!==this.right.check())throw Pr();return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1,ss.EMPTY=new class{constructor(){this.size=0}get key(){throw Pr()}get value(){throw Pr()}get color(){throw Pr()}get left(){throw Pr()}get right(){throw Pr()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ss(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class as{constructor(e){this.comparator=e,this.data=new is(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ls(this.data.getIterator())}getIteratorFrom(e){return new ls(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof as))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new as(this.comparator);return t.data=e,t}}class ls{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const cs=new is(bi.comparator);function us(){return cs}const ds=new is(bi.comparator);function hs(){return ds}const fs=new is(bi.comparator);function ps(){return fs}const ms=new as(bi.comparator);function gs(...e){let t=ms;for(const n of e)t=t.add(n);return t}const vs=new as(qr);function ys(){return vs}class bs{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,ws.createSynthesizedTargetChangeForCurrentChange(e,t)),new bs(Jr.min(),n,ys(),us(),gs())}}class ws{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ws(li.EMPTY_BYTE_STRING,t,gs(),gs(),gs())}}class xs{constructor(e,t,n,r){this.$=e,this.removedTargetIds=t,this.key=n,this.O=r}}class _s{constructor(e,t){this.targetId=e,this.M=t}}class Ss{constructor(e,t,n=li.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Es{constructor(){this.F=0,this.L=Ms(),this.B=li.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.F}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=gs(),t=gs(),n=gs();return this.L.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Pr()}})),new ws(this.B,this.U,e,t,n)}H(){this.q=!1,this.L=Ms()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class Ts{constructor(e){this.et=e,this.nt=new Map,this.st=us(),this.it=Cs(),this.rt=new as(qr)}ot(e){for(const t of e.$)e.O&&e.O.isFoundDocument()?this.ct(t,e.O):this.at(t,e.key,e.O);for(const t of e.removedTargetIds)this.at(t,e.key,e.O)}ut(e){this.forEachTarget(e,(t=>{const n=this.ht(t);switch(e.state){case 0:this.lt(t)&&n.W(e.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(e.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(t);break;case 3:this.lt(t)&&(n.tt(),n.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),n.W(e.resumeToken));break;default:Pr()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach(((e,n)=>{this.lt(n)&&t(n)}))}dt(e){const t=e.targetId,n=e.M.count,r=this.wt(t);if(r){const e=r.target;if(zi(e))if(0===n){const n=new bi(e.path);this.at(t,n,Di.newNoDocument(n,Jr.min()))}else Ar(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach(((n,r)=>{const i=this.wt(r);if(i){if(n.current&&zi(i.target)){const t=new bi(i.target.path);null!==this.st.get(t)||this.yt(r,t)||this.at(r,t,Di.newNoDocument(t,e))}n.j&&(t.set(r,n.G()),n.H())}}));let n=gs();this.it.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.wt(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))}));const r=new bs(e,t,this.rt,this.st,n);return this.st=us(),this.it=Cs(),this.rt=new as(qr),r}ct(e,t){if(!this.lt(e))return;const n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}at(e,t,n){if(!this.lt(e))return;const r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new Es,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new as(qr),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Tr("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new Es),this.et.getRemoteKeysForTarget(e).forEach((t=>{this.at(e,t,null)}))}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function Cs(){return new is(bi.comparator)}function Ms(){return new is(bi.comparator)}const ks={asc:"ASCENDING",desc:"DESCENDING"},Ps={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class As{constructor(e,t){this.databaseId=e,this.C=t}}function Is(e,t){return e.C?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rs(e,t){return e.C?t.toBase64():t.toUint8Array()}function Ls(e,t){return Is(e,t.toTimestamp())}function Os(e){return Ar(!!e),Jr.fromTimestamp(function(e){const t=ui(e);return new Xr(t.seconds,t.nanos)}(e))}function Ns(e,t){return function(e){return new ri(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ds(e){const t=ri.fromString(e);return Ar(sa(t)),t}function Fs(e,t){return Ns(e.databaseId,t.path)}function Bs(e,t){const n=Ds(t);if(n.get(1)!==e.databaseId.projectId)throw new Or(Lr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Or(Lr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new bi(Us(n))}function Zs(e,t){return Ns(e.databaseId,t)}function Vs(e){const t=Ds(e);return 4===t.length?ri.emptyPath():Us(t)}function zs(e){return new ri(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Us(e){return Ar(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function js(e,t,n){return{name:Fs(e,t),fields:n.value.mapValue.fields}}function Hs(e,t,n){const r=Bs(e,t.name),i=Os(t.updateTime),o=new Oi({mapValue:{fields:t.fields}}),s=Di.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Gs(e,t){let n;if(t instanceof Wo)n={update:js(e,t.key,t.value)};else if(t instanceof Xo)n={delete:Fs(e,t.key)};else if(t instanceof $o)n={update:js(e,t.key,t.data),updateMask:oa(t.fieldMask)};else{if(!(t instanceof Jo))return Pr();n={verify:Fs(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ko)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Po)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Io)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Lo)return{fieldPath:t.field.canonicalString(),increment:n.N};throw Pr()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ls(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Pr()}(e,t.precondition)),n}function Ws(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Bo.updateTime(Os(e.updateTime)):void 0!==e.exists?Bo.exists(e.exists):Bo.none()}(t.currentDocument):Bo.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ar("REQUEST_TIME"===t.setToServerValue),n=new ko;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Po(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Io(e)}else"increment"in t?n=new Lo(e,t.increment):Pr();const r=oi.fromServerFormat(t.fieldPath);return new Do(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Bs(e,t.update.name),o=new Oi({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new si(t.map((e=>oi.fromServerFormat(e))))}(t.updateMask);return new $o(i,o,e,n,r)}return new Wo(i,o,n,r)}if(t.delete){const r=Bs(e,t.delete);return new Xo(r,n)}if(t.verify){const r=Bs(e,t.verify);return new Jo(r,n)}return Pr()}function $s(e,t){return{documents:[Zs(e,t.path)]}}function qs(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Zs(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Zs(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(Ii(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NAN"}};if(Ai(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ii(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NOT_NAN"}};if(Ai(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(e.field),op:ea(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:ta(e.field),direction:Qs(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=function(e,t){return e.C||gi(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=Xs(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Xs(t.endAt)),n}function Ys(e){let t=Vs(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ar(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=Ks(n.where));let s=[];n.orderBy&&(s=n.orderBy.map((e=>function(e){return new Qi(na(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,gi(t)?null:t}(n.limit));let l=null;n.startAt&&(l=Js(n.startAt));let c=null;return n.endAt&&(c=Js(n.endAt)),io(t,i,s,o,a,"F",l,c)}function Ks(e){return e?void 0!==e.unaryFilter?[ia(e)]:void 0!==e.fieldFilter?[ra(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>Ks(e))).reduce(((e,t)=>e.concat(t))):Pr():[]}function Xs(e){return{before:e.before,values:e.position}}function Js(e){const t=!!e.before,n=e.values||[];return new Xi(n,t)}function Qs(e){return ks[e]}function ea(e){return Ps[e]}function ta(e){return{fieldPath:e.canonicalString()}}function na(e){return oi.fromServerFormat(e.fieldPath)}function ra(e){return Ui.create(na(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pr()}}(e.fieldFilter.op),e.fieldFilter.value)}function ia(e){switch(e.unaryFilter.op){case"IS_NAN":const t=na(e.unaryFilter.field);return Ui.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=na(e.unaryFilter.field);return Ui.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=na(e.unaryFilter.field);return Ui.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=na(e.unaryFilter.field);return Ui.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Pr()}}function oa(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function sa(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function aa(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ca(t)),t=la(e.get(n),t);return ca(t)}function la(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function ca(e){return e+""}function ua(e){const t=e.length;if(Ar(t>=2),2===t)return Ar(""===e.charAt(0)&&""===e.charAt(1)),ri.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("",o);switch((t<0||t>n)&&Pr(),e.charAt(t+1)){case"":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"":i+=e.substring(o,t),i+="\0";break;case"":i+=e.substring(o,t+1);break;default:Pr()}o=t+2}return new ri(r)}class da{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class ha{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}ha.store="owner",ha.key="owner";class fa{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}fa.store="mutationQueues",fa.keyPath="userId";class pa{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}pa.store="mutations",pa.keyPath="batchId",pa.userMutationsIndex="userMutationsIndex",pa.userMutationsKeyPath=["userId","batchId"];class ma{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,aa(t)]}static key(e,t,n){return[e,aa(t),n]}}ma.store="documentMutations",ma.PLACEHOLDER=new ma;class ga{constructor(e,t){this.path=e,this.readTime=t}}class va{constructor(e,t){this.path=e,this.version=t}}class ya{constructor(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}}ya.store="remoteDocuments",ya.readTimeIndex="readTimeIndex",ya.readTimeIndexPath="readTime",ya.collectionReadTimeIndex="collectionReadTimeIndex",ya.collectionReadTimeIndexPath=["parentPath","readTime"];class ba{constructor(e){this.byteSize=e}}ba.store="remoteDocumentGlobal",ba.key="remoteDocumentGlobalKey";class wa{constructor(e,t,n,r,i,o,s){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}}wa.store="targets",wa.keyPath="targetId",wa.queryTargetsIndexName="queryTargetsIndex",wa.queryTargetsKeyPath=["canonicalId","targetId"];class xa{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}xa.store="targetDocuments",xa.keyPath=["targetId","path"],xa.documentTargetsIndex="documentTargetsIndex",xa.documentTargetsKeyPath=["path","targetId"];class _a{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}_a.key="targetGlobalKey",_a.store="targetGlobal";class Sa{constructor(e,t){this.collectionId=e,this.parent=t}}Sa.store="collectionParents",Sa.keyPath=["collectionId","parent"];class Ea{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}Ea.store="clientMetadata",Ea.keyPath="clientId";class Ta{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Ta.store="bundles",Ta.keyPath="bundleId";class Ca{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}Ca.store="namedQueries",Ca.keyPath="name";const Ma=[fa.store,pa.store,ma.store,ya.store,wa.store,ha.store,_a.store,xa.store,Ea.store,ba.store,Sa.store,Ta.store,Ca.store],ka="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class Aa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Aa(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Aa?t:Aa.resolve(t)}catch(e){return Aa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Aa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Aa.reject(t)}static resolve(e){return new Aa(((t,n)=>{t(e)}))}static reject(e){return new Aa(((t,n)=>{n(e)}))}static waitFor(e){return new Aa(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Aa.resolve(!1);for(const n of e)t=t.next((e=>e?Aa.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}}class Ia{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Nr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new Oa(e,t.error)):this.It.resolve()},this.transaction.onerror=t=>{const n=Za(t.target.error);this.It.reject(new Oa(e,n))}}static open(e,t,n,r){try{return new Ia(t,e.transaction(r,n))}catch(e){throw new Oa(t,e)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Tr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Da(t)}}class Ra{constructor(e,t,n){this.name=e,this.version=t,this.Rt=n,12.2===Ra.bt((0,a.z$)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Tr("SimpleDb","Removing database:",e),Fa(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if(!(0,a.hl)())return!1;if(Ra.vt())return!0;const e=(0,a.z$)(),t=Ra.bt(e),n=0<t&&t<10,r=Ra.Vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static bt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Ct(e){return this.db||(Tr("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Oa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Or(Lr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Or(Lr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Oa(e,r))},r.onupgradeneeded=e=>{Tr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.Rt.Nt(t,r.transaction,e.oldVersion,this.version).next((()=>{Tr("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.kt&&(this.db.onversionchange=e=>this.kt(e)),this.db}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.Ct(e);const t=Ia.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).catch((e=>(t.abort(e),Aa.reject(e)))).toPromise();return o.catch((()=>{})),await t.At,o}catch(e){const t="FirebaseError"!==e.name&&o<3;if(Tr("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class La{constructor(e){this.$t=e,this.Ot=!1,this.Mt=null}get isDone(){return this.Ot}get Ft(){return this.Mt}set cursor(e){this.$t=e}done(){this.Ot=!0}Lt(e){this.Mt=e}delete(){return Fa(this.$t.delete())}}class Oa extends Or{constructor(e,t){super(Lr.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Na(e){return"IndexedDbTransactionError"===e.name}class Da{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Tr("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Tr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Fa(n)}add(e){return Tr("SimpleDb","ADD",this.store.name,e,e),Fa(this.store.add(e))}get(e){return Fa(this.store.get(e)).next((t=>(void 0===t&&(t=null),Tr("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Tr("SimpleDb","DELETE",this.store.name,e),Fa(this.store.delete(e))}count(){return Tr("SimpleDb","COUNT",this.store.name),Fa(this.store.count())}Bt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,((e,t)=>{r.push(t)})).next((()=>r))}qt(e,t){Tr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Kt=!1;const r=this.cursor(n);return this.Ut(r,((e,t,n)=>n.delete()))}jt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Ut(r,t)}Qt(e){const t=this.cursor({});return new Aa(((n,r)=>{t.onerror=e=>{const t=Za(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}Ut(e,t){const n=[];return new Aa(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new La(i),s=t(i.primaryKey,i.value,o);if(s instanceof Aa){const e=s.catch((e=>(o.done(),Aa.reject(e))));n.push(e)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}})).next((()=>Aa.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fa(e){return new Aa(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Za(e.target.error);n(t)}}))}let Ba=!1;function Za(e){const t=Ra.bt((0,a.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Or("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ba||(Ba=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Va extends Pa{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function za(e,t){const n=Rr(e);return Ra.Dt(n.Wt,t)}class Ua{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&zo(r,e,n[t])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Uo(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Uo(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Jr.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),gs())}isEqual(e){return this.batchId===e.batchId&&Yr(this.mutations,e.mutations,((e,t)=>Ho(e,t)))&&Yr(this.baseMutations,e.baseMutations,((e,t)=>Ho(e,t)))}}class ja{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ar(e.mutations.length===n.length);let r=ps();const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new ja(e,t,n,r)}}class Ha{constructor(e,t,n,r,i=Jr.min(),o=Jr.min(),s=li.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}withSequenceNumber(e){return new Ha(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ha(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ga{constructor(e){this.Gt=e}}function Wa(e,t){if(t.document)return Hs(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=bi.fromSegments(t.noDocument.path),n=Xa(t.noDocument.readTime),r=Di.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=bi.fromSegments(t.unknownDocument.path),n=Xa(t.unknownDocument.version);return Di.newUnknownDocument(e,n)}return Pr()}function $a(e,t,n){const r=qa(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:Fs(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Is(e,t.version.toTimestamp())}}(e.Gt,t),o=t.hasCommittedMutations;return new ya(null,null,n,o,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=Ka(t.version),o=t.hasCommittedMutations;return new ya(null,new ga(e,n),null,o,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=Ka(t.version);return new ya(new va(e,n),null,null,!0,r,i)}return Pr()}function qa(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ya(e){const t=new Xr(e[0],e[1]);return Jr.fromTimestamp(t)}function Ka(e){const t=e.toTimestamp();return new da(t.seconds,t.nanoseconds)}function Xa(e){const t=new Xr(e.seconds,e.nanoseconds);return Jr.fromTimestamp(t)}function Ja(e,t){const n=(t.baseMutations||[]).map((t=>Ws(e.Gt,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>Ws(e.Gt,t))),i=Xr.fromMillis(t.localWriteTimeMs);return new Ua(t.batchId,i,n,r)}function Qa(e){const t=Xa(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Xa(e.lastLimboFreeSnapshotVersion):Jr.min();let r;var i;return void 0!==e.query.documents?(Ar(1===(i=e.query).documents.length),r=fo(oo(Vs(i.documents[0])))):r=function(e){return fo(Ys(e))}(e.query),new Ha(r,e.targetId,0,e.lastListenSequenceNumber,t,n,li.fromBase64String(e.resumeToken))}function el(e,t){const n=Ka(t.snapshotVersion),r=Ka(t.lastLimboFreeSnapshotVersion);let i;i=zi(t.target)?$s(e.Gt,t.target):qs(e.Gt,t.target);const o=t.resumeToken.toBase64();return new wa(t.targetId,Zi(t.target),n,o,t.sequenceNumber,r,i)}function tl(e){const t=Ys({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?po(t,t.limit,"L"):t}class nl{getBundleMetadata(e,t){return rl(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Xa(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return rl(e).put({bundleId:(n=t).id,createTime:Ka(Os(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return il(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:tl(t.bundledQuery),readTime:Xa(t.readTime)};var t}))}saveNamedQuery(e,t){return il(e).put(function(e){return{name:e.name,readTime:Ka(Os(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function rl(e){return za(e,Ta.store)}function il(e){return za(e,Ca.store)}class ol{constructor(){this.zt=new sl}addToCollectionParentIndex(e,t){return this.zt.add(t),Aa.resolve()}getCollectionParents(e,t){return Aa.resolve(this.zt.getEntries(t))}}class sl{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new as(ri.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new as(ri.comparator)).toArray()}}class al{constructor(){this.Ht=new sl}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.Ht.add(t)}));const i={collectionId:n,parent:aa(r)};return ll(e).put(i)}return Aa.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Kr(t),""],!1,!0);return ll(e).Bt(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(ua(r.parent))}return n}))}}function ll(e){return za(e,Sa.store)}const cl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ul{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ul(e,ul.DEFAULT_COLLECTION_PERCENTILE,ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dl(e,t,n){const r=e.store(pa.store),i=e.store(ma.store),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.jt({range:s},((e,t,n)=>(a++,n.delete())));o.push(l.next((()=>{Ar(1===a)})));const c=[];for(const e of n.mutations){const r=ma.key(t,e.key.path,n.batchId);o.push(i.delete(r)),c.push(e.key)}return Aa.waitFor(o).next((()=>c))}function hl(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Pr();t=e.noDocument}return JSON.stringify(t).length}ul.DEFAULT_COLLECTION_PERCENTILE=10,ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ul.DEFAULT=new ul(41943040,ul.DEFAULT_COLLECTION_PERCENTILE,ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ul.DISABLED=new ul(-1,0,0);class fl{constructor(e,t,n,r){this.userId=e,this.k=t,this.Jt=n,this.referenceDelegate=r,this.Yt={}}static Xt(e,t,n,r){Ar(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new fl(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ml(e).jt({index:pa.userMutationsIndex,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=gl(e),o=ml(e);return o.add({}).next((s=>{Ar("number"==typeof s);const a=new Ua(s,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Gs(e.Gt,t))),i=n.mutations.map((t=>Gs(e.Gt,t)));return new pa(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.k,this.userId,a),c=[];let u=new as(((e,t)=>qr(e.canonicalString(),t.canonicalString())));for(const e of r){const t=ma.key(this.userId,e.key.path,s);u=u.add(e.key.path.popLast()),c.push(o.put(l)),c.push(i.put(t,ma.PLACEHOLDER))}return u.forEach((t=>{c.push(this.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Yt[s]=a.keys()})),Aa.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return ml(e).get(t).next((e=>e?(Ar(e.userId===this.userId),Ja(this.k,e)):null))}Zt(e,t){return this.Yt[t]?Aa.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Yt[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return ml(e).jt({index:pa.userMutationsIndex,range:r},((e,t,r)=>{t.userId===this.userId&&(Ar(t.batchId>=n),i=Ja(this.k,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ml(e).jt({index:pa.userMutationsIndex,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ml(e).Bt(pa.userMutationsIndex,t).next((e=>e.map((e=>Ja(this.k,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ma.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return gl(e).jt({range:r},((n,r,o)=>{const[s,a,l]=n,c=ua(a);if(s===this.userId&&t.path.isEqual(c))return ml(e).get(l).next((e=>{if(!e)throw Pr();Ar(e.userId===this.userId),i.push(Ja(this.k,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new as(qr);const r=[];return t.forEach((t=>{const i=ma.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=gl(e).jt({range:o},((e,r,i)=>{const[o,s,a]=e,l=ua(s);o===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(s)})),Aa.waitFor(r).next((()=>this.te(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=ma.prefixForPath(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new as(qr);return gl(e).jt({range:o},((e,t,i)=>{const[o,a,l]=e,c=ua(a);o===this.userId&&n.isPrefixOf(c)?c.length===r&&(s=s.add(l)):i.done()})).next((()=>this.te(e,s)))}te(e,t){const n=[],r=[];return t.forEach((t=>{r.push(ml(e).get(t).next((e=>{if(null===e)throw Pr();Ar(e.userId===this.userId),n.push(Ja(this.k,e))})))})),Aa.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return dl(e.Wt,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ee(t.batchId)})),Aa.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Aa.resolve();const n=IDBKeyRange.lowerBound(ma.prefixForUser(this.userId)),r=[];return gl(e).jt({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=ua(e[1]);r.push(t)}else n.done()})).next((()=>{Ar(0===r.length)}))}))}containsKey(e,t){return pl(e,this.userId,t)}ne(e){return vl(e).get(this.userId).next((e=>e||new fa(this.userId,-1,"")))}}function pl(e,t,n){const r=ma.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return gl(e).jt({range:o,Kt:!0},((e,n,r)=>{const[o,a,l]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function ml(e){return za(e,pa.store)}function gl(e){return za(e,ma.store)}function vl(e){return za(e,fa.store)}class yl{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new yl(0)}static re(){return new yl(-1)}}class bl{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next((t=>{const n=new yl(t.highestTargetId);return t.highestTargetId=n.next(),this.ce(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.oe(e).next((e=>Jr.fromTimestamp(new Xr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.oe(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.oe(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.ce(e,r))))}addTargetData(e,t){return this.ae(e,t).next((()=>this.oe(e).next((n=>(n.targetCount+=1,this.ue(t,n),this.ce(e,n))))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>wl(e).delete(t.targetId))).next((()=>this.oe(e))).next((t=>(Ar(t.targetCount>0),t.targetCount-=1,this.ce(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return wl(e).jt(((o,s)=>{const a=Qa(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Aa.waitFor(i))).next((()=>r))}forEachTarget(e,t){return wl(e).jt(((e,n)=>{const r=Qa(n);t(r)}))}oe(e){return xl(e).get(_a.key).next((e=>(Ar(null!==e),e)))}ce(e,t){return xl(e).put(_a.key,t)}ae(e,t){return wl(e).put(el(this.k,t))}ue(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.oe(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Zi(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return wl(e).jt({range:r,index:wa.queryTargetsIndexName},((e,n,r)=>{const o=Qa(n);Vi(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=_l(e);return t.forEach((t=>{const o=aa(t.path);r.push(i.put(new xa(n,o))),r.push(this.referenceDelegate.addReference(e,n,t))})),Aa.waitFor(r)}removeMatchingKeys(e,t,n){const r=_l(e);return Aa.forEach(t,(t=>{const i=aa(t.path);return Aa.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=_l(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=_l(e);let i=gs();return r.jt({range:n,Kt:!0},((e,t,n)=>{const r=ua(e[1]),o=new bi(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=aa(t.path),r=IDBKeyRange.bound([n],[Kr(n)],!1,!0);let i=0;return _l(e).jt({index:xa.documentTargetsIndex,Kt:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}Et(e,t){return wl(e).get(t).next((e=>e?Qa(e):null))}}function wl(e){return za(e,wa.store)}function xl(e){return za(e,_a.store)}function _l(e){return za(e,xa.store)}async function Sl(e){if(e.code!==Lr.FAILED_PRECONDITION||e.message!==ka)throw e;Tr("LocalStore","Unexpectedly lost primary lease")}function El([e,t],[n,r]){const i=qr(e,n);return 0===i?qr(t,r):i}class Tl{constructor(e){this.he=e,this.buffer=new as(El),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();El(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cl{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){const t=this.we?3e5:6e4;Tr("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this._e=null,this.we=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){Na(e)?Tr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Sl(e)}await this.me(e)}))}}class Ml{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Aa.resolve(Gr.I);const n=new Tl(t);return this.ge.forEachTarget(e,(e=>n.de(e.sequenceNumber))).next((()=>this.ge.pe(e,(e=>n.de(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.ge.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Tr("LruGarbageCollector","Garbage collection skipped; disabled"),Aa.resolve(cl)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Tr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cl):this.Te(e,t)))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let n,r,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Tr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Sr()<=s.in.DEBUG&&Tr("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(l-a)+"ms\n"+`\tRemoved ${e} documents in `+(c-l)+"ms\n"+`Total Duration: ${c-u}ms`),Aa.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class kl{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Ml(e,t)}(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Ee(e){let t=0;return this.pe(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,((e,n)=>t(n)))}addReference(e,t,n){return Pl(e,n)}removeReference(e,t,n){return Pl(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Pl(e,t)}Ae(e,t){return function(e,t){let n=!1;return vl(e).Qt((r=>pl(e,r,t).next((e=>(e&&(n=!0),Aa.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Ie(e,((o,s)=>{if(s<=t){const t=this.Ae(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o),_l(e).delete([0,aa(o.path)]))))}));r.push(t)}})).next((()=>Aa.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Pl(e,t)}Ie(e,t){const n=_l(e);let r,i=Gr.I;return n.jt({index:xa.documentTargetsIndex},(([e,n],{path:o,sequenceNumber:s})=>{0===e?(i!==Gr.I&&t(new bi(ua(r)),i),i=s,r=o):i=Gr.I})).next((()=>{i!==Gr.I&&t(new bi(ua(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pl(e,t){return _l(e).put(function(e,t){return new xa(0,aa(e.path),t)}(t,e.currentSequenceNumber))}class Al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){ei(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return ti(this.inner)}}class Il{constructor(){this.changes=new Al((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Jr.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Di.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Aa.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rl{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,n){return Nl(e).put(Dl(t),n)}removeEntry(e,t){const n=Nl(e),r=Dl(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Re(e,n))))}getEntry(e,t){return Nl(e).get(Dl(t)).next((e=>this.be(t,e)))}Pe(e,t){return Nl(e).get(Dl(t)).next((e=>({document:this.be(t,e),size:hl(e)})))}getEntries(e,t){let n=us();return this.ve(e,t,((e,t)=>{const r=this.be(e,t);n=n.insert(e,r)})).next((()=>n))}Ve(e,t){let n=us(),r=new is(bi.comparator);return this.ve(e,t,((e,t)=>{const i=this.be(e,t);n=n.insert(e,i),r=r.insert(e,hl(t))})).next((()=>({documents:n,Se:r})))}ve(e,t,n){if(t.isEmpty())return Aa.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let o=i.getNext();return Nl(e).jt({range:r},((e,t,r)=>{const s=bi.fromSegments(e);for(;o&&bi.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Lt(o.path.toArray()):r.done()})).next((()=>{for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))}getDocumentsMatchingQuery(e,t,n){let r=us();const i=t.path.length+1,o={};if(n.isEqual(Jr.min())){const e=t.path.toArray();o.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=qa(n);o.range=IDBKeyRange.lowerBound([e,r],!0),o.index=ya.collectionReadTimeIndex}return Nl(e).jt(o,((e,n,o)=>{if(e.length!==i)return;const s=Wa(this.k,n);t.path.isPrefixOf(s.key.path)?yo(t,s)&&(r=r.insert(s.key,s)):o.done()})).next((()=>r))}newChangeBuffer(e){return new Ll(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Ol(e).get(ba.key).next((e=>(Ar(!!e),e)))}Re(e,t){return Ol(e).put(ba.key,t)}be(e,t){if(t){const e=Wa(this.k,t);if(!e.isNoDocument()||!e.version.isEqual(Jr.min()))return e}return Di.newInvalidDocument(e)}}class Ll extends Il{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Al((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new as(((e,t)=>qr(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.Ce.get(i);if(o.document.isValidDocument()){const a=$a(this.De.k,o.document,this.getReadTime(i));r=r.add(i.path.popLast());const l=hl(a);n+=l-s,t.push(this.De.addEntry(e,i,a))}else if(n-=s,this.trackRemovals){const n=$a(this.De.k,Di.newNoDocument(i,Jr.min()),this.getReadTime(i));t.push(this.De.addEntry(e,i,n))}else t.push(this.De.removeEntry(e,i))})),r.forEach((n=>{t.push(this.De.Jt.addToCollectionParentIndex(e,n))})),t.push(this.De.updateMetadata(e,n)),Aa.waitFor(t)}getFromCache(e,t){return this.De.Pe(e,t).next((e=>(this.Ce.set(t,e.size),e.document)))}getAllFromCache(e,t){return this.De.Ve(e,t).next((({documents:e,Se:t})=>(t.forEach(((e,t)=>{this.Ce.set(e,t)})),e)))}}function Ol(e){return za(e,ba.store)}function Nl(e){return za(e,ya.store)}function Dl(e){return e.path.toArray()}class Fl{constructor(e){this.k=e}Nt(e,t,n,r){Ar(n<r&&n>=0&&r<=11);const i=new Ia("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(ha.store)}(e),function(e){e.createObjectStore(fa.store,{keyPath:fa.keyPath}),e.createObjectStore(pa.store,{keyPath:pa.keyPath,autoIncrement:!0}).createIndex(pa.userMutationsIndex,pa.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ma.store)}(e),Bl(e),function(e){e.createObjectStore(ya.store)}(e));let o=Aa.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(xa.store),e.deleteObjectStore(wa.store),e.deleteObjectStore(_a.store)}(e),Bl(e)),o=o.next((()=>function(e){const t=e.store(_a.store),n=new _a(0,0,Jr.min().toTimestamp(),0);return t.put(_a.key,n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store(pa.store).Bt().next((n=>{e.deleteObjectStore(pa.store),e.createObjectStore(pa.store,{keyPath:pa.keyPath,autoIncrement:!0}).createIndex(pa.userMutationsIndex,pa.userMutationsKeyPath,{unique:!0});const r=t.store(pa.store),i=n.map((e=>r.put(e)));return Aa.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore(Ea.store,{keyPath:Ea.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Ne(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore(ba.store)}(e),this.ke(i))))),n<7&&r>=7&&(o=o.next((()=>this.xe(i)))),n<8&&r>=8&&(o=o.next((()=>this.$e(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(ya.store);t.createIndex(ya.readTimeIndex,ya.readTimeIndexPath,{unique:!1}),t.createIndex(ya.collectionReadTimeIndex,ya.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((()=>this.Oe(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore(Ta.store,{keyPath:Ta.keyPath})}(e),function(e){e.createObjectStore(Ca.store,{keyPath:Ca.keyPath})}(e)}))),o}ke(e){let t=0;return e.store(ya.store).jt(((e,n)=>{t+=hl(n)})).next((()=>{const n=new ba(t);return e.store(ba.store).put(ba.key,n)}))}Ne(e){const t=e.store(fa.store),n=e.store(pa.store);return t.Bt().next((t=>Aa.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Bt(pa.userMutationsIndex,r).next((n=>Aa.forEach(n,(n=>{Ar(n.userId===t.userId);const r=Ja(this.k,n);return dl(e,t.userId,r).next((()=>{}))}))))}))))}xe(e){const t=e.store(xa.store),n=e.store(ya.store);return e.store(_a.store).get(_a.key).next((e=>{const r=[];return n.jt(((n,i)=>{const o=new ri(n),s=function(e){return[0,aa(e)]}(o);r.push(t.get(s).next((n=>n?Aa.resolve():(n=>t.put(new xa(0,aa(n),e.highestListenSequenceNumber)))(o))))})).next((()=>Aa.waitFor(r)))}))}$e(e,t){e.createObjectStore(Sa.store,{keyPath:Sa.keyPath});const n=t.store(Sa.store),r=new sl,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:aa(r)})}};return t.store(ya.store).jt({Kt:!0},((e,t)=>{const n=new ri(e);return i(n.popLast())})).next((()=>t.store(ma.store).jt({Kt:!0},(([e,t,n],r)=>{const o=ua(t);return i(o.popLast())}))))}Oe(e){const t=e.store(wa.store);return t.jt(((e,n)=>{const r=Qa(n),i=el(this.k,r);return t.put(i)}))}}function Bl(e){e.createObjectStore(xa.store,{keyPath:xa.keyPath}).createIndex(xa.documentTargetsIndex,xa.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(wa.store,{keyPath:wa.keyPath}).createIndex(wa.queryTargetsIndexName,wa.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(_a.store)}const Zl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vl{constructor(e,t,n,r,i,o,s,a,l,c){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Me=i,this.window=o,this.document=s,this.Fe=l,this.Le=c,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=e=>Promise.resolve(),!Vl.Pt())throw new Or(Lr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kl(this,r),this.Ge=t+"main",this.k=new Ga(a),this.ze=new Ra(this.Ge,11,new Fl(this.k)),this.He=new bl(this.referenceDelegate,this.k),this.Jt=new al,this.Je=function(e,t){return new Rl(e,t)}(this.k,this.Jt),this.Ye=new nl,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===c&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Or(Lr.FAILED_PRECONDITION,Zl);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.He.getHighestSequenceNumber(e)))})).then((e=>{this.Be=new Gr(e,this.Fe)})).then((()=>{this.Ue=!0})).catch((e=>(this.ze&&this.ze.close(),Promise.reject(e))))}sn(e){return this.We=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget((async()=>{this.started&&await this.Ze()})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ul(e).put(new Ea(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next((()=>{if(this.isPrimary)return this.rn(e).next((e=>{e||(this.isPrimary=!1,this.Me.enqueueRetryable((()=>this.We(!1))))}))})).next((()=>this.on(e))).next((t=>this.isPrimary&&!t?this.cn(e).next((()=>!1)):!!t&&this.an(e).next((()=>!0)))))).catch((e=>{if(Na(e))return Tr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Tr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Me.enqueueRetryable((()=>this.We(e))),this.isPrimary=e}))}rn(e){return zl(e).get(ha.key).next((e=>Aa.resolve(this.un(e))))}hn(e){return Ul(e).delete(this.clientId)}async ln(){if(this.isPrimary&&!this.fn(this.Qe,18e5)){this.Qe=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=za(e,Ea.store);return t.Bt().next((e=>{const n=this.dn(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Aa.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Xe)for(const t of e)this.Xe.removeItem(this.wn(t.clientId))}}nn(){this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ze().then((()=>this.ln())).then((()=>this.nn()))))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Aa.resolve(!0):zl(e).get(ha.key).next((t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Or(Lr.FAILED_PRECONDITION,Zl);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ul(e).Bt().next((e=>void 0===this.dn(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Tr("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),await this.ze.runTransaction("shutdown","readwrite",[ha.store,Ea.store],(e=>{const t=new Va(e,Gr.I);return this.cn(t).next((()=>this.hn(t)))})),this.ze.close(),this.pn()}dn(e,t){return e.filter((e=>this.fn(e.updateTimeMs,t)&&!this._n(e.clientId)))}Tn(){return this.runTransaction("getActiveClients","readonly",(e=>Ul(e).Bt().next((e=>this.dn(e,18e5).map((e=>e.clientId))))))}get started(){return this.Ue}getMutationQueue(e){return fl.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,n){Tr("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite";let i;return this.ze.runTransaction(e,r,Ma,(r=>(i=new Va(r,this.Be?this.Be.next():Gr.I),"readwrite-primary"===t?this.rn(i).next((e=>!!e||this.on(i))).next((t=>{if(!t)throw Cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Me.enqueueRetryable((()=>this.We(!1))),new Or(Lr.FAILED_PRECONDITION,ka);return n(i)})).next((e=>this.an(i).next((()=>e)))):this.En(i).next((()=>n(i)))))).then((e=>(i.raiseOnCommittedEvent(),e)))}En(e){return zl(e).get(ha.key).next((e=>{if(null!==e&&this.fn(e.leaseTimestampMs,5e3)&&!this._n(e.ownerId)&&!this.un(e)&&!(this.Le||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Or(Lr.FAILED_PRECONDITION,Zl)}))}an(e){const t=new ha(this.clientId,this.allowTabSynchronization,Date.now());return zl(e).put(ha.key,t)}static Pt(){return Ra.Pt()}cn(e){const t=zl(e);return t.get(ha.key).next((e=>this.un(e)?(Tr("IndexedDbPersistence","Releasing primary lease."),t.delete(ha.key)):Aa.resolve()))}fn(e,t){const n=Date.now();return!(e<n-t||e>n&&(Cr(`Detected an update time that is in the future: ${e} > ${n}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Me.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze())))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,a.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Me.enterRestrictedMode(!0),this.Me.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Tr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Cr("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Cr("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zl(e){return za(e,ha.store)}function Ul(e){return za(e,Ea.store)}function jl(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Hl{constructor(e,t){this.progress=e,this.In=t}}class Gl{constructor(e,t,n){this.Je=e,this.An=t,this.Jt=n}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((n=>this.bn(e,t,n)))}bn(e,t,n){return this.Je.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}Pn(e,t){e.forEach(((e,n)=>{for(const e of t)e.applyToLocalView(n)}))}vn(e,t){return this.Je.getEntries(e,t).next((t=>this.Vn(e,t).next((()=>t))))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.Pn(t,e)))}getDocumentsMatchingQuery(e,t,n){return function(e){return bi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):uo(t)?this.Dn(e,t,n):this.Cn(e,t,n)}Sn(e,t){return this.Rn(e,new bi(t)).next((e=>{let t=hs();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}Dn(e,t,n){const r=t.collectionGroup;let i=hs();return this.Jt.getCollectionParents(e,r).next((o=>Aa.forEach(o,(o=>{const s=function(e,t){return new ro(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.Cn(e,s,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}Cn(e,t,n){let r,i;return this.Je.getDocumentsMatchingQuery(e,t,n).next((n=>(r=n,this.An.getAllMutationBatchesAffectingQuery(e,t)))).next((t=>(i=t,this.Nn(e,i,r).next((e=>{r=e;for(const e of i)for(const t of e.mutations){const n=t.key;let i=r.get(n);null==i&&(i=Di.newInvalidDocument(n),r=r.insert(n,i)),Uo(t,i,e.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))))).next((()=>(r.forEach(((e,n)=>{yo(t,n)||(r=r.remove(e))})),r)))}Nn(e,t,n){let r=gs();for(const e of t)for(const t of e.mutations)t instanceof $o&&null===n.get(t.key)&&(r=r.add(t.key));let i=n;return this.Je.getEntries(e,r).next((e=>(e.forEach(((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))})),i)))}}class Wl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.kn=n,this.xn=r}static $n(e,t){let n=gs(),r=gs();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new Wl(e,t.fromCache,n,r)}}class $l{On(e){this.Mn=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Jr.min())?this.Fn(e,t):this.Mn.vn(e,r).next((i=>{const o=this.Ln(t,i);return(so(t)||ao(t))&&this.Bn(t.limitType,o,r,n)?this.Fn(e,t):(Sr()<=s.in.DEBUG&&Tr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),vo(t)),this.Mn.getDocumentsMatchingQuery(e,t,n).next((e=>(o.forEach((t=>{e=e.insert(t.key,t)})),e))))}))}Ln(e,t){let n=new as(bo(e));return t.forEach(((t,r)=>{yo(e,r)&&(n=n.add(r))})),n}Bn(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(e,t){return Sr()<=s.in.DEBUG&&Tr("QueryEngine","Using full collection scan to execute query:",vo(t)),this.Mn.getDocumentsMatchingQuery(e,t,Jr.min())}}class ql{constructor(e,t,n,r){this.persistence=e,this.Un=t,this.k=r,this.qn=new is(qr),this.Kn=new Al((e=>Zi(e)),Vi),this.jn=Jr.min(),this.An=e.getMutationQueue(n),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Gl(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.qn)))}}function Yl(e,t,n,r){return new ql(e,t,n,r)}async function Kl(e,t){const n=Rr(e);let r=n.An,i=n.Wn;const o=await n.persistence.runTransaction("Handle user change","readonly",(e=>{let o;return n.An.getAllMutationBatches(e).next((s=>(o=s,r=n.persistence.getMutationQueue(t),i=new Gl(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)))).next((t=>{const n=[],r=[];let s=gs();for(const e of o){n.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return i.vn(e,s).next((e=>({Gn:e,removedBatchIds:n,addedBatchIds:r})))}))}));return n.An=r,n.Wn=i,n.Un.On(n.Wn),o}function Xl(e){const t=Rr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.He.getLastRemoteSnapshotVersion(e)))}function Jl(e,t,n,r,i){let o=gs();return n.forEach((e=>o=o.add(e))),t.getEntries(e,o).next((e=>{let o=us();return n.forEach(((n,s)=>{const a=e.get(n),l=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Jr.min())?(t.removeEntry(n,l),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s,l),o=o.insert(n,s)):Tr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Ql(e,t){const n=Rr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t))))}function ec(e,t){const n=Rr(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.He.getTargetData(e,t).next((i=>i?(r=i,Aa.resolve(r)):n.He.allocateTargetId(e).next((i=>(r=new Ha(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}async function tc(e,t,n){const r=Rr(e),i=r.qn.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Na(e))throw e;Tr("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.qn=r.qn.remove(t),r.Kn.delete(i.target)}function nc(e,t,n){const r=Rr(e);let i=Jr.min(),o=gs();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Rr(e),i=r.Kn.get(n);return void 0!==i?Aa.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,fo(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.Un.getDocumentsMatchingQuery(e,t,n?i:Jr.min(),n?o:gs()))).next((e=>({documents:e,zn:o})))))}function rc(e,t){const n=Rr(e),r=Rr(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.Et(e,t).next((e=>e?e.target:null))))}function ic(e){const t=Rr(e);return t.persistence.runTransaction("Get new document changes","readonly",(e=>function(e,t,n){const r=Rr(e);let i=us(),o=qa(n);const s=Nl(t),a=IDBKeyRange.lowerBound(o,!0);return s.jt({index:ya.readTimeIndex,range:a},((e,t)=>{const n=Wa(r.k,t);i=i.insert(n.key,n),o=t.readTime})).next((()=>({In:i,readTime:Ya(o)})))}(t.Qn,e,t.jn))).then((({In:e,readTime:n})=>(t.jn=n,e)))}async function oc(e,t,n=gs()){const r=await ec(e,fo(tl(t.bundledQuery))),i=Rr(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=Os(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ye.saveNamedQuery(e,t);const s=r.withResumeToken(li.EMPTY_BYTE_STRING,o);return i.qn=i.qn.insert(s.targetId,s),i.He.updateTargetData(e,s).next((()=>i.He.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.He.addMatchingKeys(e,n,r.targetId))).next((()=>i.Ye.saveNamedQuery(e,t)))}))}class sc{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Aa.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:Os(n.createTime)}),Aa.resolve()}getNamedQuery(e,t){return Aa.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:tl(e.bundledQuery),readTime:Os(e.readTime)}}(t)),Aa.resolve()}}class ac{constructor(){this.ts=new as(lc.es),this.ns=new as(lc.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const n=new lc(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.os(new lc(e,t))}cs(e,t){e.forEach((e=>this.removeReference(e,t)))}us(e){const t=new bi(new ri([])),n=new lc(t,e),r=new lc(t,e+1),i=[];return this.ns.forEachInRange([n,r],(e=>{this.os(e),i.push(e.key)})),i}hs(){this.ts.forEach((e=>this.os(e)))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new bi(new ri([])),n=new lc(t,e),r=new lc(t,e+1);let i=gs();return this.ns.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new lc(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class lc{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return bi.comparator(e.key,t.key)||qr(e.fs,t.fs)}static ss(e,t){return qr(e.fs,t.fs)||bi.comparator(e.key,t.key)}}class cc{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new as(lc.es)}checkEmpty(e){return Aa.resolve(0===this.An.length)}addMutationBatch(e,t,n,r){const i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const o=new Ua(i,t,n,r);this.An.push(o);for(const t of r)this.ws=this.ws.add(new lc(t.key,i)),this.Jt.addToCollectionParentIndex(e,t.key.path.popLast());return Aa.resolve(o)}lookupMutationBatch(e,t){return Aa.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.gs(n),i=r<0?0:r;return Aa.resolve(this.An.length>i?this.An[i]:null)}getHighestUnacknowledgedBatchId(){return Aa.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Aa.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new lc(t,0),r=new lc(t,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,r],(e=>{const t=this._s(e.fs);i.push(t)})),Aa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new as(qr);return t.forEach((e=>{const t=new lc(e,0),r=new lc(e,Number.POSITIVE_INFINITY);this.ws.forEachInRange([t,r],(e=>{n=n.add(e.fs)}))})),Aa.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;bi.isDocumentKey(i)||(i=i.child(""));const o=new lc(new bi(i),0);let s=new as(qr);return this.ws.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.fs)),!0)}),o),Aa.resolve(this.ys(s))}ys(e){const t=[];return e.forEach((e=>{const n=this._s(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ar(0===this.ps(t.batchId,"removed")),this.An.shift();let n=this.ws;return Aa.forEach(t.mutations,(r=>{const i=new lc(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.ws=n}))}ee(e){}containsKey(e,t){const n=new lc(t,0),r=this.ws.firstAfterOrEqual(n);return Aa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.An.length,Aa.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class uc{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new is(bi.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s,readTime:n}),this.size+=s-o,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Aa.resolve(n?n.document.mutableCopy():Di.newInvalidDocument(t))}getEntries(e,t){let n=us();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Di.newInvalidDocument(e))})),Aa.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=us();const i=new bi(t.path.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:e,value:{document:i,readTime:s}}=o.getNext();if(!t.path.isPrefixOf(e.path))break;s.compareTo(n)<=0||yo(t,i)&&(r=r.insert(i.key,i.mutableCopy()))}return Aa.resolve(r)}Es(e,t){return Aa.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new dc(this)}getSize(e){return Aa.resolve(this.size)}}class dc extends Il{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.document.isValidDocument()?t.push(this.De.addEntry(e,r.document,this.getReadTime(n))):this.De.removeEntry(n)})),Aa.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class hc{constructor(e){this.persistence=e,this.Is=new Al((e=>Zi(e)),Vi),this.lastRemoteSnapshotVersion=Jr.min(),this.highestTargetId=0,this.As=0,this.Rs=new ac,this.targetCount=0,this.bs=yl.ie()}forEachTarget(e,t){return this.Is.forEach(((e,n)=>t(n))),Aa.resolve()}getLastRemoteSnapshotVersion(e){return Aa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Aa.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),Aa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),Aa.resolve()}ae(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new yl(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Aa.resolve()}updateTargetData(e,t){return this.ae(t),Aa.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Aa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Is.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Is.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Aa.waitFor(i).next((()=>r))}getTargetCount(e){return Aa.resolve(this.targetCount)}getTargetData(e,t){const n=this.Is.get(t)||null;return Aa.resolve(n)}addMatchingKeys(e,t,n){return this.Rs.rs(t,n),Aa.resolve()}removeMatchingKeys(e,t,n){this.Rs.cs(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Aa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Aa.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Rs.ls(t);return Aa.resolve(n)}containsKey(e,t){return Aa.resolve(this.Rs.containsKey(t))}}class fc{constructor(e,t){this.Ps={},this.Be=new Gr(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new hc(this),this.Jt=new ol,this.Je=function(e,t){return new uc(e,t)}(this.Jt,(e=>this.referenceDelegate.vs(e))),this.k=new Ga(t),this.Ye=new sc(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new cc(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,n){Tr("MemoryPersistence","Starting transaction:",e);const r=new pc(this.Be.next());return this.referenceDelegate.Vs(),n(r).next((e=>this.referenceDelegate.Ss(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ds(e,t){return Aa.or(Object.values(this.Ps).map((n=>()=>n.containsKey(e,t))))}}class pc extends Pa{constructor(e){super(),this.currentSequenceNumber=e}}class mc{constructor(e){this.persistence=e,this.Cs=new ac,this.Ns=null}static ks(e){return new mc(e)}get xs(){if(this.Ns)return this.Ns;throw Pr()}addReference(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),Aa.resolve()}removeReference(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),Aa.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Aa.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach((e=>this.xs.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.xs.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Aa.forEach(this.xs,(n=>{const r=bi.fromPath(n);return this.$s(e,r).next((e=>{e||t.removeEntry(r)}))})).next((()=>(this.Ns=null,t.apply(e))))}updateLimboDocument(e,t){return this.$s(e,t).next((e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())}))}vs(e){return 0}$s(e,t){return Aa.or([()=>Aa.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function gc(e,t){return`firestore_clients_${e}_${t}`}function vc(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function yc(e,t){return`firestore_targets_${e}_${t}`}class bc{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Os(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Or(r.error.code,r.error.message))),o?new bc(e,t,r.state,i):(Cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wc{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Os(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Or(n.error.code,n.error.message))),i?new wc(e,n.state,r):(Cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xc{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Os(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ys();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=yi(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new xc(e,i):(Cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class _c{constructor(e,t){this.clientId=e,this.onlineState=t}static Os(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new _c(t.clientId,t.onlineState):(Cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Sc{constructor(){this.activeTargetIds=ys()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ms(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ec{constructor(e,t,n,r,i){this.window=e,this.Me=t,this.persistenceKey=n,this.Bs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new is(qr),this.started=!1,this.js=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=gc(this.persistenceKey,this.Bs),this.Ws=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new Sc),this.Gs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Js=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Ys=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static Pt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Tn();for(const t of e){if(t===this.Bs)continue;const e=this.getItem(gc(this.persistenceKey,t));if(e){const n=xc.Os(t,e);n&&(this.Ks=this.Ks.insert(n.clientId,n))}}this.Xs();const t=this.storage.getItem(this.Js);if(t){const e=this.Zs(t);e&&this.ti(e)}for(const e of this.js)this.qs(e);this.js=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,n){this.ni(e,t,n),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(yc(this.persistenceKey,e));if(n){const r=wc.Os(e,n);r&&(t=r.state)}}return this.ii.Fs(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yc(this.persistenceKey,e))}updateQueryState(e,t,n){this.ri(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.si(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ci()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Tr("SharedClientState","READ",e,t),t}setItem(e,t){Tr("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Tr("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){const t=e;if(t.storageArea===this.storage){if(Tr("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Qs)return void Cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Gs.test(t.key)){if(null==t.newValue){const e=this.ai(t.key);return this.ui(e,null)}{const e=this.hi(t.key,t.newValue);if(e)return this.ui(e.clientId,e)}}else if(this.zs.test(t.key)){if(null!==t.newValue){const e=this.li(t.key,t.newValue);if(e)return this.fi(e)}}else if(this.Hs.test(t.key)){if(null!==t.newValue){const e=this.di(t.key,t.newValue);if(e)return this.wi(e)}}else if(t.key===this.Js){if(null!==t.newValue){const e=this.Zs(t.newValue);if(e)return this.ti(e)}}else if(t.key===this.Ws){const e=function(e){let t=Gr.I;if(null!=e)try{const n=JSON.parse(e);Ar("number"==typeof n),t=n}catch(e){Cr("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Gr.I&&this.sequenceNumberHandler(e)}else if(t.key===this.Ys)return this.syncEngine._i()}else this.js.push(t)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Ms())}ni(e,t,n){const r=new bc(this.currentUser,e,t,n),i=vc(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ms())}si(e){const t=vc(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){const t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}ri(e,t,n){const r=yc(this.persistenceKey,e),i=new wc(e,t,n);this.setItem(r,i.Ms())}ci(){this.setItem(this.Ys,"value-not-used")}ai(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const n=this.ai(e);return xc.Os(n,t)}li(e,t){const n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return bc.Os(new wr(i),r,t)}di(e,t){const n=this.Hs.exec(e),r=Number(n[1]);return wc.Os(r,t)}Zs(e){return _c.Os(e)}async fi(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.mi(e.batchId,e.state,e.error);Tr("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const n=t?this.Ks.insert(e,t):this.Ks.remove(e),r=this.ei(this.Ks),i=this.ei(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.yi(o,s).then((()=>{this.Ks=n}))}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=ys();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Tc{constructor(){this.pi=new Sc,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}updateQueryState(e,t,n){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new Sc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Cc{Ei(e){}shutdown(){}}class Mc{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Tr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){Tr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const kc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Pc{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Mi(e){this.xi(e)}}class Ac extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.Fi=t+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,n,r,i){const o=this.Ui(e,t);Tr("RestConnection","Sending: ",o,n);const s={};return this.qi(s,r,i),this.Ki(e,o,s,n).then((e=>(Tr("RestConnection","Received: ",e),e)),(t=>{throw Mr("RestConnection",`${e} failed with error: `,t,"url: ",o,"request:",n),t}))}ji(e,t,n,r,i){return this.Bi(e,t,n,r,i)}qi(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Ui(e,t){const n=kc[e];return`${this.Fi}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,n,r){return new Promise(((i,o)=>{const s=new yr;s.listenOnce(fr.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case hr.NO_ERROR:const t=s.getResponseJson();Tr("Connection","XHR received:",JSON.stringify(t)),i(t);break;case hr.TIMEOUT:Tr("Connection",'RPC "'+e+'" timed out'),o(new Or(Lr.DEADLINE_EXCEEDED,"Request time out"));break;case hr.HTTP_ERROR:const n=s.getStatus();if(Tr("Connection",'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){const e=s.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Lr).indexOf(t)>=0?t:Lr.UNKNOWN}(e.status);o(new Or(t,e.message))}else o(new Or(Lr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Or(Lr.UNAVAILABLE,"Connection failed."));break;default:Pr()}}finally{Tr("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);s.send(t,"POST",a,n,15)}))}Qi(e,t,n){const r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ur(),o=dr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new gr({})),this.qi(s.initMessageHeaders,t,n),(0,a.uI)()||(0,a.b$)()||(0,a.d)()||(0,a.w1)()||(0,a.Mn)()||(0,a.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const l=r.join("");Tr("Connection","Creating WebChannel: "+l,s);const c=i.createWebChannel(l,s);let u=!1,d=!1;const h=new Pc({Vi:e=>{d?Tr("Connection","Not sending because WebChannel is closed:",e):(u||(Tr("Connection","Opening WebChannel transport."),c.open(),u=!0),Tr("Connection","WebChannel sending:",e),c.send(e))},Si:()=>c.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(c,vr.EventType.OPEN,(()=>{d||Tr("Connection","WebChannel transport opened.")})),f(c,vr.EventType.CLOSE,(()=>{d||(d=!0,Tr("Connection","WebChannel transport closed"),h.Oi())})),f(c,vr.EventType.ERROR,(e=>{d||(d=!0,Mr("Connection","WebChannel transport errored:",e),h.Oi(new Or(Lr.UNAVAILABLE,"The operation could not be completed")))})),f(c,vr.EventType.MESSAGE,(e=>{var t;if(!d){const n=e.data[0];Ar(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Tr("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=es[e];if(void 0!==t)return rs(t)}(e),n=i.message;void 0===t&&(t=Lr.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),d=!0,h.Oi(new Or(t,n)),c.close()}else Tr("Connection","WebChannel received:",n),h.Mi(n)}})),f(o,pr.STAT_EVENT,(e=>{e.stat===mr.PROXY?Tr("Connection","Detected buffering proxy"):e.stat===mr.NOPROXY&&Tr("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.$i()}),0),h}}function Ic(){return"undefined"!=typeof window?window:null}function Rc(){return"undefined"!=typeof document?document:null}function Lc(e){return new As(e,!0)}class Oc{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Me=e,this.timerId=t,this.Wi=n,this.Gi=r,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),r=Math.max(0,t-n);r>0&&Tr("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,r,(()=>(this.Yi=Date.now(),e()))),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class Nc{constructor(e,t,n,r,i,o,s,a){this.Me=e,this.nr=n,this.sr=r,this.ir=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new Oc(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,(()=>this.mr())))}gr(e){this.yr(),this.stream.send(e)}async mr(){if(this.lr())return this.close(0)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}async close(e,t){this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==e?this.ur.reset():t&&t.code===Lr.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):t&&t.code===Lr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ni(t)}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.rr===t&&this.Ir(e,n)}),(t=>{e((()=>{const e=new Or(Lr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Ar(e)}))}))}Ir(e,t){const n=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((()=>{n((()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,(()=>(this.lr()&&(this.state=3),Promise.resolve()))),this.listener.Di())))})),this.stream.Ni((e=>{n((()=>this.Ar(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}dr(){this.state=5,this.ur.Zi((async()=>{this.state=0,this.start()}))}Ar(e){return Tr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Me.enqueueAndForget((()=>this.rr===e?t():(Tr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Dc extends Nc{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.k=i}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Pr()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.C?(Ar(void 0===t||"string"==typeof t),li.fromBase64String(t||"")):(Ar(void 0===t||t instanceof Uint8Array),li.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Lr.UNKNOWN:rs(e.code);return new Or(t,e.message||"")}(s);n=new Ss(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bs(e,r.document.name),o=Os(r.document.updateTime),s=new Oi({mapValue:{fields:r.document.fields}}),a=Di.newFoundDocument(i,o,s),l=r.targetIds||[],c=r.removedTargetIds||[];n=new xs(l,c,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Bs(e,r.document),o=r.readTime?Os(r.readTime):Jr.min(),s=Di.newNoDocument(i,o),a=r.removedTargetIds||[];n=new xs([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Bs(e,r.document),o=r.removedTargetIds||[];n=new xs([],o,i,null)}else{if(!("filter"in t))return Pr();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new Qo(r),o=e.targetId;n=new _s(o,i)}}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return Jr.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Jr.min():t.readTime?Os(t.readTime):Jr.min()}(e);return this.listener.br(t,n)}Pr(e){const t={};t.database=zs(this.k),t.addTarget=function(e,t){let n;const r=t.target;return n=zi(r)?{documents:$s(e,r)}:{query:qs(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Rs(e,t.resumeToken):t.snapshotVersion.compareTo(Jr.min())>0&&(n.readTime=Is(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Pr()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}vr(e){const t={};t.database=zs(this.k),t.removeTarget=e,this.gr(t)}}class Fc extends Nc{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.k=i,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(Ar(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(e,t){return e&&e.length>0?(Ar(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Os(e.updateTime):Os(t);return n.isEqual(Jr.min())&&(n=Os(t)),new Fo(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Os(e.commitTime);return this.listener.Cr(n,t)}return Ar(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=zs(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Gs(this.k,e)))};this.gr(t)}}class Bc extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=n,this.k=r,this.$r=!1}Or(){if(this.$r)throw new Or(Lr.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.ir.Bi(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Lr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Or(Lr.UNKNOWN,e.toString())}))}ji(e,t,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.ir.ji(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Lr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Or(Lr.UNKNOWN,e.toString())}))}terminate(){this.$r=!0}}class Zc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve()))))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Cr(t),this.Lr=!1):Tr("OnlineStateTracker",t)}jr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class Vc{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei((e=>{n.enqueueAndForget((async()=>{Yc(this)&&(Tr("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Rr(e);t.Gr.add(4),await Uc(t),t.Jr.set("Unknown"),t.Gr.delete(4),await zc(t)}(this))}))})),this.Jr=new Zc(n,r)}}async function zc(e){if(Yc(e))for(const t of e.zr)await t(!0)}async function Uc(e){for(const t of e.zr)await t(!1)}function jc(e,t){const n=Rr(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),qc(n)?$c(n):hu(n).lr()&&Gc(n,t))}function Hc(e,t){const n=Rr(e),r=hu(n);n.Wr.delete(t),r.lr()&&Wc(n,t),0===n.Wr.size&&(r.lr()?r._r():Yc(n)&&n.Jr.set("Unknown"))}function Gc(e,t){e.Yr.X(t.targetId),hu(e).Pr(t)}function Wc(e,t){e.Yr.X(t),hu(e).vr(t)}function $c(e){e.Yr=new Ts({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Wr.get(t)||null}),hu(e).start(),e.Jr.Br()}function qc(e){return Yc(e)&&!hu(e).hr()&&e.Wr.size>0}function Yc(e){return 0===Rr(e).Gr.size}function Kc(e){e.Yr=void 0}async function Xc(e){e.Wr.forEach(((t,n)=>{Gc(e,t)}))}async function Jc(e,t){Kc(e),qc(e)?(e.Jr.Kr(t),$c(e)):e.Jr.set("Unknown")}async function Qc(e,t,n){if(e.Jr.set("Online"),t instanceof Ss&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Wr.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Wr.delete(r),e.Yr.removeTarget(r))}(e,t)}catch(n){Tr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await eu(e,n)}else if(t instanceof xs?e.Yr.ot(t):t instanceof _s?e.Yr.dt(t):e.Yr.ut(t),!n.isEqual(Jr.min()))try{const t=await Xl(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Yr.gt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.Wr.get(t);if(!n)return;e.Wr.set(t,n.withResumeToken(li.EMPTY_BYTE_STRING,n.snapshotVersion)),Wc(e,t);const r=new Ha(n.target,t,1,n.sequenceNumber);Gc(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Tr("RemoteStore","Failed to raise snapshot:",t),await eu(e,t)}}async function eu(e,t,n){if(!Na(t))throw t;e.Gr.add(1),await Uc(e),e.Jr.set("Offline"),n||(n=()=>Xl(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Tr("RemoteStore","Retrying IndexedDB access"),await n(),e.Gr.delete(1),await zc(e)}))}function tu(e,t){return t().catch((n=>eu(e,n,t)))}async function nu(e){const t=Rr(e),n=fu(t);let r=t.Qr.length>0?t.Qr[t.Qr.length-1].batchId:-1;for(;ru(t);)try{const e=await Ql(t.localStore,r);if(null===e){0===t.Qr.length&&n._r();break}r=e.batchId,iu(t,e)}catch(e){await eu(t,e)}ou(t)&&su(t)}function ru(e){return Yc(e)&&e.Qr.length<10}function iu(e,t){e.Qr.push(t);const n=fu(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function ou(e){return Yc(e)&&!fu(e).hr()&&e.Qr.length>0}function su(e){fu(e).start()}async function au(e){fu(e).kr()}async function lu(e){const t=fu(e);for(const n of e.Qr)t.Dr(n.mutations)}async function cu(e,t,n){const r=e.Qr.shift(),i=ja.from(r,t,n);await tu(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await nu(e)}async function uu(e,t){t&&fu(e).Sr&&await async function(e,t){if(ns(n=t.code)&&n!==Lr.ABORTED){const n=e.Qr.shift();fu(e).wr(),await tu(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await nu(e)}var n}(e,t),ou(e)&&su(e)}async function du(e,t){const n=Rr(e);t?(n.Gr.delete(2),await zc(n)):t||(n.Gr.add(2),await Uc(n),n.Jr.set("Unknown"))}function hu(e){return e.Xr||(e.Xr=function(e,t,n){const r=Rr(e);return r.Or(),new Dc(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Xc.bind(null,e),Ni:Jc.bind(null,e),br:Qc.bind(null,e)}),e.zr.push((async t=>{t?(e.Xr.wr(),qc(e)?$c(e):e.Jr.set("Unknown")):(await e.Xr.stop(),Kc(e))}))),e.Xr}function fu(e){return e.Zr||(e.Zr=function(e,t,n){const r=Rr(e);return r.Or(),new Fc(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:au.bind(null,e),Ni:uu.bind(null,e),Nr:lu.bind(null,e),Cr:cu.bind(null,e)}),e.zr.push((async t=>{t?(e.Zr.wr(),await nu(e)):(await e.Zr.stop(),e.Qr.length>0&&(Tr("RemoteStore",`Stopping write stream with ${e.Qr.length} pending writes`),e.Qr=[]))}))),e.Zr}class pu{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new pu(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Or(Lr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mu(e,t){if(Cr("AsyncQueue",`${t}: ${e}`),Na(e))return new Or(Lr.UNAVAILABLE,`${t}: ${e}`);throw e}class gu{constructor(e){this.comparator=e?(t,n)=>e(t,n)||bi.comparator(t.key,n.key):(e,t)=>bi.comparator(e.key,t.key),this.keyedMap=hs(),this.sortedSet=new is(this.comparator)}static emptySet(e){return new gu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new gu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class vu{constructor(){this.eo=new is(bi.comparator)}track(e){const t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Pr():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal(((t,n)=>{e.push(n)})),e}}class yu{constructor(e,t,n,r,i,o,s,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new yu(e,t,gu.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class bu{constructor(){this.so=void 0,this.listeners=[]}}class wu{constructor(){this.queries=new Al((e=>go(e)),mo),this.onlineState="Unknown",this.io=new Set}}async function xu(e,t){const n=Rr(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new bu),i)try{o.so=await n.onListen(r)}catch(e){const n=mu(e,`Initialization of query '${vo(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.ro(n.onlineState),o.so&&t.oo(o.so)&&Tu(n)}async function _u(e,t){const n=Rr(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Su(e,t){const n=Rr(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.oo(e)&&(r=!0);i.so=e}}r&&Tu(n)}function Eu(e,t,n){const r=Rr(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function Tu(e){e.io.forEach((e=>{e.next()}))}class Cu{constructor(e,t,n){this.query=e,this.co=t,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new yu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.ao?this.ho(e)&&(this.co.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.co.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.wo&&n||e.docs.isEmpty()&&"Offline"!==t)}ho(e){if(e.docChanges.length>0)return!0;const t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}fo(e){e=yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}class Mu{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class ku{constructor(e){this.k=e}Hn(e){return Bs(this.k,e)}Jn(e){return e.metadata.exists?Hs(this.k,e.document,!1):Di.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return Os(e)}}class Pu{constructor(e,t,n){this.mo=e,this.localStore=t,this.k=n,this.queries=[],this.documents=[],this.progress=Au(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,n=new ku(this.k);for(const r of e)if(r.metadata.queries){const e=n.Hn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||gs()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Rr(e);let o=gs(),s=us(),a=ps();for(const e of n){const n=t.Hn(e.metadata.name);e.document&&(o=o.add(n)),s=s.insert(n,t.Jn(e)),a=a.insert(n,t.Yn(e.metadata.readTime))}const l=i.Qn.newChangeBuffer({trackRemovals:!0}),c=await ec(i,function(e){return fo(oo(ri.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Jl(e,l,s,Jr.min(),a).next((t=>(l.apply(e),t))).next((t=>i.He.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.He.addMatchingKeys(e,o,c.targetId))).next((()=>i.Wn.Vn(e,t))).next((()=>t))))))}(this.localStore,new ku(this.k),this.documents,this.mo.id),t=this.po(this.documents);for(const e of this.queries)await oc(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",new Hl(Object.assign({},this.progress),e)}}function Au(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Iu{constructor(e){this.key=e}}class Ru{constructor(e){this.key=e}}class Lu{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=gs(),this.mutatedKeys=gs(),this.Ao=bo(e),this.Ro=new gu(this.Ao)}get bo(){return this.To}Po(e,t){const n=t?t.vo:new vu,r=t?t.Ro:this.Ro;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a=so(this.query)&&r.size===this.query.limit?r.last():null,l=ao(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=yo(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.Vo(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ao(u,a)>0||l&&this.Ao(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),so(this.query)||ao(this.query))for(;o.size>this.query.limit;){const e=so(this.query)?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ro:o,vo:n,Bn:s,mutatedKeys:i}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const i=e.vo.no();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pr()}};return n(e)-n(t)}(e.type,t.type)||this.Ao(e.doc,t.doc))),this.So(n);const o=t?this.Do():[],s=0===this.Io.size&&this.current?1:0,a=s!==this.Eo;return this.Eo=s,0!==i.length||a?{snapshot:new yu(this.query,e.Ro,r,i,e.mutatedKeys,0===s,a,!1),Co:o}:{Co:o}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new vu,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach((e=>this.To=this.To.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.To=this.To.delete(e))),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=gs(),this.Ro.forEach((e=>{this.No(e.key)&&(this.Io=this.Io.add(e.key))}));const t=[];return e.forEach((e=>{this.Io.has(e)||t.push(new Ru(e))})),this.Io.forEach((n=>{e.has(n)||t.push(new Iu(n))})),t}ko(e){this.To=e.zn,this.Io=gs();const t=this.Po(e.documents);return this.applyChanges(t,!0)}xo(){return yu.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class Ou{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Nu{constructor(e){this.key=e,this.$o=!1}}class Du{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Oo={},this.Mo=new Al((e=>go(e)),mo),this.Fo=new Map,this.Lo=new Set,this.Bo=new is(bi.comparator),this.Uo=new Map,this.qo=new ac,this.Ko={},this.jo=new Map,this.Qo=yl.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}async function Fu(e,t){const n=cd(e);let r,i;const o=n.Mo.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.xo();else{const e=await ec(n.localStore,fo(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Bu(n,t,r,"current"===o),n.isPrimaryClient&&jc(n.remoteStore,e)}return i}async function Bu(e,t,n,r){e.Go=(t,n,r)=>async function(e,t,n,r){let i=t.view.Po(n);i.Bn&&(i=await nc(e.localStore,t.query,!1).then((({documents:e})=>t.view.Po(e,i))));const o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o);return Yu(e,t.targetId,s.Co),s.snapshot}(e,t,n,r);const i=await nc(e.localStore,t,!0),o=new Lu(t,i.zn),s=o.Po(i.documents),a=ws.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),l=o.applyChanges(s,e.isPrimaryClient,a);Yu(e,n,l.Co);const c=new Ou(t,n,o);return e.Mo.set(t,c),e.Fo.has(n)?e.Fo.get(n).push(t):e.Fo.set(n,[t]),l.snapshot}async function Zu(e,t){const n=Rr(e),r=n.Mo.get(t),i=n.Fo.get(r.targetId);if(i.length>1)return n.Fo.set(r.targetId,i.filter((e=>!mo(e,t)))),void n.Mo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await tc(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Hc(n.remoteStore,r.targetId),$u(n,r.targetId)})).catch(Sl)):($u(n,r.targetId),await tc(n.localStore,r.targetId,!0))}async function Vu(e,t){const n=Rr(e);try{const e=await function(e,t){const n=Rr(e),r=t.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.He.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.He.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?c=c.withResumeToken(li.EMPTY_BYTE_STRING,Jr.min()).withLastLimboFreeSnapshotVersion(Jr.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&s.push(n.He.updateTargetData(e,c))}));let a=us();if(t.documentUpdates.forEach(((r,i)=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Jl(e,o,t.documentUpdates,r,void 0).next((e=>{a=e}))),!r.isEqual(Jr.min())){const t=n.He.getLastRemoteSnapshotVersion(e).next((t=>n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Aa.waitFor(s).next((()=>o.apply(e))).next((()=>n.Wn.Vn(e,a))).next((()=>a))})).then((e=>(n.qn=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Uo.get(t);r&&(Ar(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.$o=!0:e.modifiedDocuments.size>0?Ar(r.$o):e.removedDocuments.size>0&&(Ar(r.$o),r.$o=!1))})),await Ju(n,e,t)}catch(e){await Sl(e)}}function zu(e,t,n){const r=Rr(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Mo.forEach(((n,r)=>{const i=r.view.ro(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Rr(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.ro(t)&&(r=!0)})),r&&Tu(n)}(r.eventManager,t),e.length&&r.Oo.br(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Uu(e,t,n){const r=Rr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Uo.get(t),o=i&&i.key;if(o){let e=new is(bi.comparator);e=e.insert(o,Di.newNoDocument(o,Jr.min()));const n=gs().add(o),i=new bs(Jr.min(),new Map,new as(qr),e,n);await Vu(r,i),r.Bo=r.Bo.remove(o),r.Uo.delete(t),Xu(r)}else await tc(r.localStore,t,!1).then((()=>$u(r,t,n))).catch(Sl)}async function ju(e,t){const n=Rr(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Rr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Aa.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Ar(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),s.next((()=>e.An.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.An.performConsistencyCheck(e))).next((()=>n.Wn.vn(e,r)))}))}(n.localStore,t);Wu(n,r,null),Gu(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ju(n,e)}catch(e){await Sl(e)}}async function Hu(e,t,n){const r=Rr(e);try{const e=await function(e,t){const n=Rr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.An.lookupMutationBatch(e,t).next((t=>(Ar(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)))).next((()=>n.An.performConsistencyCheck(e))).next((()=>n.Wn.vn(e,r)))}))}(r.localStore,t);Wu(r,t,n),Gu(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ju(r,e)}catch(n){await Sl(n)}}function Gu(e,t){(e.jo.get(t)||[]).forEach((e=>{e.resolve()})),e.jo.delete(t)}function Wu(e,t,n){const r=Rr(e);let i=r.Ko[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function $u(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Fo.get(t))e.Mo.delete(r),n&&e.Oo.zo(r,n);e.Fo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((t=>{e.qo.containsKey(t)||qu(e,t)}))}function qu(e,t){e.Lo.delete(t.path.canonicalString());const n=e.Bo.get(t);null!==n&&(Hc(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),Xu(e))}function Yu(e,t,n){for(const r of n)r instanceof Iu?(e.qo.addReference(r.key,t),Ku(e,r)):r instanceof Ru?(Tr("SyncEngine","Document no longer in limbo: "+r.key),e.qo.removeReference(r.key,t),e.qo.containsKey(r.key)||qu(e,r.key)):Pr()}function Ku(e,t){const n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(Tr("SyncEngine","New document in limbo: "+n),e.Lo.add(r),Xu(e))}function Xu(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){const t=e.Lo.values().next().value;e.Lo.delete(t);const n=new bi(ri.fromString(t)),r=e.Qo.next();e.Uo.set(r,new Nu(n)),e.Bo=e.Bo.insert(n,r),jc(e.remoteStore,new Ha(fo(oo(n.path)),r,2,Gr.I))}}async function Ju(e,t,n){const r=Rr(e),i=[],o=[],s=[];r.Mo.isEmpty()||(r.Mo.forEach(((e,a)=>{s.push(r.Go(a,t,n).then((e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Wl.$n(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.Oo.br(i),await async function(e,t){const n=Rr(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Aa.forEach(t,(t=>Aa.forEach(t.kn,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Aa.forEach(t.xn,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Na(e))throw e;Tr("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.qn.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.qn=n.qn.insert(t,i)}}}(r.localStore,o))}async function Qu(e,t){const n=Rr(e);if(!n.currentUser.isEqual(t)){Tr("SyncEngine","User change. New user:",t.toKey());const e=await Kl(n.localStore,t);n.currentUser=t,function(e,t){e.jo.forEach((e=>{e.forEach((e=>{e.reject(new Or(Lr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ju(n,e.Gn)}}function ed(e,t){const n=Rr(e),r=n.Uo.get(t);if(r&&r.$o)return gs().add(r.key);{let e=gs();const r=n.Fo.get(t);if(!r)return e;for(const t of r){const r=n.Mo.get(t);e=e.unionWith(r.view.bo)}return e}}async function td(e,t){const n=Rr(e),r=await nc(n.localStore,t.query,!0),i=t.view.ko(r);return n.isPrimaryClient&&Yu(n,t.targetId,i.Co),i}async function nd(e){const t=Rr(e);return ic(t.localStore).then((e=>Ju(t,e)))}async function rd(e,t,n,r){const i=Rr(e),o=await function(e,t){const n=Rr(e),r=Rr(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Zt(e,t).next((t=>t?n.Wn.vn(e,t):Aa.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await nu(i.remoteStore):"acknowledged"===n||"rejected"===n?(Wu(i,t,r||null),Gu(i,t),function(e,t){Rr(Rr(e).An).ee(t)}(i.localStore,t)):Pr(),await Ju(i,o)):Tr("SyncEngine","Cannot apply mutation batch with id: "+t)}async function id(e,t,n){const r=Rr(e),i=[],o=[];for(const e of t){let t;const n=r.Fo.get(e);if(n&&0!==n.length){t=await ec(r.localStore,fo(n[0]));for(const e of n){const t=r.Mo.get(e),n=await td(r,t);n.snapshot&&o.push(n.snapshot)}}else{const n=await rc(r.localStore,e);t=await ec(r.localStore,n),await Bu(r,od(n),e,!1)}i.push(t)}return r.Oo.br(o),i}function od(e){return io(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function sd(e){const t=Rr(e);return Rr(Rr(t.localStore).persistence).Tn()}async function ad(e,t,n,r){const i=Rr(e);if(i.Wo)Tr("SyncEngine","Ignoring unexpected query state notification.");else if(i.Fo.has(t))switch(n){case"current":case"not-current":{const e=await ic(i.localStore),r=bs.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await Ju(i,e,r);break}case"rejected":await tc(i.localStore,t,!0),$u(i,t,r);break;default:Pr()}}async function ld(e,t,n){const r=cd(e);if(r.Wo){for(const e of t){if(r.Fo.has(e)){Tr("SyncEngine","Adding an already active target "+e);continue}const t=await rc(r.localStore,e),n=await ec(r.localStore,t);await Bu(r,od(t),n.targetId,!1),jc(r.remoteStore,n)}for(const e of n)r.Fo.has(e)&&await tc(r.localStore,e,!1).then((()=>{Hc(r.remoteStore,e),$u(r,e)})).catch(Sl)}}function cd(e){const t=Rr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ed.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Uu.bind(null,t),t.Oo.br=Su.bind(null,t.eventManager),t.Oo.zo=Eu.bind(null,t.eventManager),t}function ud(e){const t=Rr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ju.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Hu.bind(null,t),t}class dd{constructor(){this.synchronizeTabs=!1}async initialize(e){this.k=Lc(e.databaseInfo.databaseId),this.sharedClientState=this.Jo(e),this.persistence=this.Yo(e),await this.persistence.start(),this.gcScheduler=this.Xo(e),this.localStore=this.Zo(e)}Xo(e){return null}Zo(e){return Yl(this.persistence,new $l,e.initialUser,this.k)}Yo(e){return new fc(mc.ks,this.k)}Jo(e){return new Tc}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class hd extends dd{constructor(e,t,n){super(),this.tc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await async function(e){const t=Rr(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",(e=>function(e){const t=Nl(e);let n=Jr.min();return t.jt({index:ya.readTimeIndex,reverse:!0},((e,t,r)=>{t.readTime&&(n=Ya(t.readTime)),r.done()})).next((()=>n))}(e))).then((e=>{t.jn=e}))}(this.localStore),await this.tc.initialize(this,e),await ud(this.tc.syncEngine),await nu(this.tc.remoteStore),await this.persistence.sn((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}Zo(e){return Yl(this.persistence,new $l,e.initialUser,this.k)}Xo(e){const t=this.persistence.referenceDelegate.garbageCollector;return new Cl(t,e.asyncQueue)}Yo(e){const t=jl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ul.withCacheSize(this.cacheSizeBytes):ul.DEFAULT;return new Vl(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ic(),Rc(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new Tc}}class fd extends hd{constructor(e,t){super(e,t,!1),this.tc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.tc.syncEngine;this.sharedClientState instanceof Ec&&(this.sharedClientState.syncEngine={mi:rd.bind(null,t),gi:ad.bind(null,t),yi:ld.bind(null,t),Tn:sd.bind(null,t),_i:nd.bind(null,t)},await this.sharedClientState.start()),await this.persistence.sn((async e=>{await async function(e,t){const n=Rr(e);if(cd(n),ud(n),!0===t&&!0!==n.Wo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await id(n,e.toArray());n.Wo=!0,await du(n.remoteStore,!0);for(const e of t)jc(n.remoteStore,e)}else if(!1===t&&!1!==n.Wo){const e=[];let t=Promise.resolve();n.Fo.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>($u(n,i),tc(n.localStore,i,!0)))),Hc(n.remoteStore,i)})),await t,await id(n,e),function(e){const t=Rr(e);t.Uo.forEach(((e,n)=>{Hc(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new is(bi.comparator)}(n),n.Wo=!1,await du(n.remoteStore,!1)}}(this.tc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())}))}Jo(e){const t=Ic();if(!Ec.Pt(t))throw new Or(Lr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=jl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ec(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class pd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>zu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qu.bind(null,this.syncEngine),await du(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new wu}createDatastore(e){const t=Lc(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Ac(r));var r;return function(e,t,n,r){return new Bc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>zu(this.syncEngine,e,0),o=Mc.Pt()?new Mc:new Cc,new Vc(t,n,r,i,o);var t,n,r,i,o}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Du(e,t,n,r,i,o);return s&&(a.Wo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Rr(e);Tr("RemoteStore","RemoteStore shutting down."),t.Gr.add(5),await Uc(t),t.Hr.shutdown(),t.Jr.set("Unknown")}(this.remoteStore)}}function md(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class gd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ec(this.observer.next,e)}error(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}nc(){this.muted=!0}ec(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class vd{constructor(e,t){this.sc=e,this.k=t,this.metadata=new Nr,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then((e=>{e&&e._o()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))}),(e=>this.metadata.reject(e)))}close(){return this.sc.cancel()}async getMetadata(){return this.metadata.promise}async Ho(){return await this.getMetadata(),this.rc()}async rc(){const e=await this.oc();if(null===e)return null;const t=this.ic.decode(e),n=Number(t);isNaN(n)&&this.cc(`length string (${t}) is not valid number`);const r=await this.ac(n);return new Mu(JSON.parse(r),e.length+n)}uc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async oc(){for(;this.uc()<0&&!await this.hc(););if(0===this.buffer.length)return null;const e=this.uc();e<0&&this.cc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ac(e){for(;this.buffer.length<e;)await this.hc()&&this.cc("Reached the end of bundle when more is expected.");const t=this.ic.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cc(e){throw this.sc.cancel(),new Error(`Invalid bundle format: ${e}`)}async hc(){const e=await this.sc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class yd{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Or(Lr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Rr(e),r=zs(n.k)+"/documents",i={documents:t.map((e=>Fs(n.k,e)))},o=await n.ji("BatchGetDocuments",r,i),s=new Map;o.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ar(!!t.found),t.found.name,t.found.updateTime;const n=Bs(e,t.found.name),r=Os(t.found.updateTime),i=new Oi({mapValue:{fields:t.found.fields}});return Di.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Ar(!!t.missing),Ar(!!t.readTime);const n=Bs(e,t.missing),r=Os(t.readTime);return Di.newNoDocument(n,r)}(e,t):Pr()}(n.k,e);s.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=s.get(e.toString());Ar(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=bi.fromPath(t);this.mutations.push(new Jo(n,this.precondition(n)))})),await async function(e,t){const n=Rr(e),r=zs(n.k)+"/documents",i={writes:t.map((e=>Gs(n.k,e)))};await n.Bi("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Pr();t=Jr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Or(Lr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Bo.updateTime(t):Bo.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Jr.min()))throw new Or(Lr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bo.updateTime(t)}return Bo.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bd{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.lc=5,this.ur=new Oc(this.asyncQueue,"transaction_retry")}run(){this.lc-=1,this.fc()}fc(){this.ur.Zi((async()=>{const e=new yd(this.datastore),t=this.dc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.wc(e)}))))})).catch((e=>{this.wc(e)}))}))}dc(e){try{const t=this.updateFunction(e);return!gi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}wc(e){this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget((()=>(this.fc(),Promise.resolve())))):this.deferred.reject(e)}_c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ns(t)}return!1}}class wd{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=wr.UNAUTHENTICATED,this.clientId=$r.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Tr("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(()=>Promise.resolve()))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Or(Lr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=mu(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function xd(e,t){e.asyncQueue.verifyOperationInProgress(),Tr("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Kl(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function _d(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Sd(e);Tr("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>async function(e,t){const n=Rr(e);n.asyncQueue.verifyOperationInProgress(),Tr("RemoteStore","RemoteStore received new credentials");const r=Yc(n);n.Gr.add(3),await Uc(n),r&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Gr.delete(3),await zc(n)}(t.remoteStore,e))),e.onlineComponents=t}async function Sd(e){return e.offlineComponents||(Tr("FirestoreClient","Using default OfflineComponentProvider"),await xd(e,new dd)),e.offlineComponents}async function Ed(e){return e.onlineComponents||(Tr("FirestoreClient","Using default OnlineComponentProvider"),await _d(e,new pd)),e.onlineComponents}function Td(e){return Sd(e).then((e=>e.persistence))}function Cd(e){return Sd(e).then((e=>e.localStore))}function Md(e){return Ed(e).then((e=>e.remoteStore))}function kd(e){return Ed(e).then((e=>e.syncEngine))}async function Pd(e){const t=await Ed(e),n=t.eventManager;return n.onListen=Fu.bind(null,t.syncEngine),n.onUnlisten=Zu.bind(null,t.syncEngine),n}function Ad(e,t,n={}){const r=new Nr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new gd({next:o=>{t.enqueueAndForget((()=>_u(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new Or(Lr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Or(Lr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new Cu(oo(n.path),o,{includeMetadataChanges:!0,wo:!0});return xu(e,s)}(await Pd(e),e.asyncQueue,t,n,r))),r.promise}function Id(e,t,n={}){const r=new Nr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new gd({next:n=>{t.enqueueAndForget((()=>_u(e,s))),n.fromCache&&"server"===r.source?i.reject(new Or(Lr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Cu(n,o,{includeMetadataChanges:!0,wo:!0});return xu(e,s)}(await Pd(e),e.asyncQueue,t,n,r))),r.promise}function Rd(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new vd(e,t)}(function(e,t){if(e instanceof Uint8Array)return md(e,t);if(e instanceof ArrayBuffer)return md(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Lc(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Rr(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Rr(e),r=Os(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Ye.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(Au(r));const i=new Pu(r,e.localStore,t.k);let o=await t.Ho();for(;o;){const e=await i.yo(o);e&&n._updateProgress(e),o=await t.Ho()}const s=await i.complete();await Ju(e,s.In,void 0),await function(e,t){const n=Rr(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Ye.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress)}catch(e){Mr("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}})(r,t,n).then((()=>{r.sharedClientState.notifyBundleLoaded()}))}(await kd(e),i,r)}))}class Ld{constructor(e,t,n,r,i,o,s,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a}}class Od{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Od&&e.projectId===this.projectId&&e.database===this.database}}const Nd=new Map;function Dd(e,t,n){if(!n)throw new Or(Lr.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Fd(e,t,n,r){if(!0===t&&!0===r)throw new Or(Lr.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Bd(e){if(!bi.isDocumentKey(e))throw new Or(Lr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Zd(e){if(bi.isDocumentKey(e))throw new Or(Lr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Vd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Pr()}function zd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Or(Lr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vd(e);throw new Or(Lr.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Ud(e,t){if(t<=0)throw new Or(Lr.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class jd{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Or(Lr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Or(Lr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Fd("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hd{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jd({}),this._settingsFrozen=!1,e instanceof Od?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Or(Lr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Od(e.options.projectId)}(e))}get app(){if(!this._app)throw new Or(Lr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Or(Lr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jd(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Fr;switch(e.type){case"gapi":const t=e.client;return Ar(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new zr(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Or(Lr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Nd.get(e);t&&(Tr("ComponentProvider","Removing Datastore"),Nd.delete(e),t.terminate())}(this),Promise.resolve()}}function Gd(e,t,n,r={}){var i;const o=(e=zd(e,Hd))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&Mr("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=wr.MOCK_USER;else{t=(0,a.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Or(Lr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new wr(o)}e._authCredentials=new Br(new Dr(t,n))}}class Wd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wd(this.firestore,e,this._key)}}class $d{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $d(this.firestore,e,this._query)}}class qd extends $d{constructor(e,t,n){super(e,t,oo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wd(this.firestore,null,new bi(e))}withConverter(e){return new qd(this.firestore,e,this._path)}}function Yd(e,t,...n){if(e=(0,a.m9)(e),Dd("collection","path",t),e instanceof Hd){const r=ri.fromString(t,...n);return Zd(r),new qd(e,null,r)}{if(!(e instanceof Wd||e instanceof qd))throw new Or(Lr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ri.fromString(t,...n));return Zd(r),new qd(e.firestore,null,r)}}function Kd(e,t){if(e=zd(e,Hd),Dd("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Or(Lr.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $d(e,null,function(e){return new ro(ri.emptyPath(),e)}(t))}function Xd(e,t,...n){if(e=(0,a.m9)(e),1===arguments.length&&(t=$r.A()),Dd("doc","path",t),e instanceof Hd){const r=ri.fromString(t,...n);return Bd(r),new Wd(e,null,new bi(r))}{if(!(e instanceof Wd||e instanceof qd))throw new Or(Lr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ri.fromString(t,...n));return Bd(r),new Wd(e.firestore,e instanceof qd?e.converter:null,new bi(r))}}function Jd(e,t){return e=(0,a.m9)(e),t=(0,a.m9)(t),(e instanceof Wd||e instanceof qd)&&(t instanceof Wd||t instanceof qd)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Qd(e,t){return e=(0,a.m9)(e),t=(0,a.m9)(t),e instanceof $d&&t instanceof $d&&e.firestore===t.firestore&&mo(e._query,t._query)&&e.converter===t.converter}class eh{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new Oc(this,"async_queue_retry"),this.bc=()=>{const e=Rc();e&&Tr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ur.er()};const e=Rc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pc(),this.vc(e)}enterRestrictedMode(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;const t=Rc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}enqueue(e){if(this.Pc(),this.yc)return new Promise((()=>{}));const t=new Nr;return this.vc((()=>this.yc&&this.Ac?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.gc.push(e),this.Vc())))}async Vc(){if(0!==this.gc.length){try{await this.gc[0](),this.gc.shift(),this.ur.reset()}catch(e){if(!Na(e))throw e;Tr("AsyncQueue","Operation failed with retryable error: "+e)}this.gc.length>0&&this.ur.Zi((()=>this.Vc()))}}vc(e){const t=this.mc.then((()=>(this.Ic=!0,e().catch((e=>{this.Ec=e,this.Ic=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Cr("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Ic=!1,e))))));return this.mc=t,t}enqueueAfterDelay(e,t,n){this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);const r=pu.createAndSchedule(this,e,t,n,(e=>this.Sc(e)));return this.Tc.push(r),r}Pc(){this.Ec&&Pr()}verifyOperationInProgress(){}async Dc(){let e;do{e=this.mc,await e}while(e!==this.mc)}Cc(e){for(const t of this.Tc)if(t.timerId===e)return!0;return!1}Nc(e){return this.Dc().then((()=>{this.Tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Dc()}))}kc(e){this.Rc.push(e)}Sc(e){const t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}function th(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class nh{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const rh=-1;class ih extends Hd{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new eh,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||lh(this),this._firestoreClient.terminate()}}function oh(e,t){const n=(0,i.qX)(e,"firestore");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,a.vZ)(r,t))return e;throw new Or(Lr.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Or(Lr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:t})}function sh(e=(0,i.Mq)()){return(0,i.qX)(e,"firestore").getImmediate()}function ah(e){return e._firestoreClient||lh(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function lh(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Ld(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new wd(e._authCredentials,e._appCheckCredentials,e._queue,r)}function ch(e,t){bh(e=zd(e,ih));const n=ah(e),r=e._freezeSettings(),i=new pd;return dh(n,i,new hd(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function uh(e){bh(e=zd(e,ih));const t=ah(e),n=e._freezeSettings(),r=new pd;return dh(t,r,new fd(r,n.cacheSizeBytes))}function dh(e,t,n){const r=new Nr;return e.asyncQueue.enqueue((async()=>{try{await xd(e,n),await _d(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===Lr.FAILED_PRECONDITION||e.code===Lr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then((()=>r.promise))}function hh(e){if(e._initialized&&!e._terminated)throw new Or(Lr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Nr;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ra.Pt())return Promise.resolve();const t=e+"main";await Ra.delete(t)}(jl(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function fh(e){return function(e){const t=new Nr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Rr(e);Yc(n.remoteStore)||Tr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Rr(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.An.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.jo.get(e)||[];r.push(t),n.jo.set(e,r)}catch(e){const n=mu(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await kd(e),t))),t.promise}(ah(e=zd(e,ih)))}function ph(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Td(e),n=await Md(e);return t.setNetworkEnabled(!0),function(e){const t=Rr(e);return t.Gr.delete(0),zc(t)}(n)}))}(ah(e=zd(e,ih)))}function mh(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Td(e),n=await Md(e);return t.setNetworkEnabled(!1),async function(e){const t=Rr(e);t.Gr.add(0),await Uc(t),t.Jr.set("Offline")}(n)}))}(ah(e=zd(e,ih)))}function gh(e){return(0,i.wN)(e.app,"firestore"),e._delete()}function vh(e,t){const n=ah(e=zd(e,ih)),r=new nh;return Rd(n,e._databaseId,t,r),r}function yh(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Rr(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Ye.getNamedQuery(e,t)))}(await Cd(e),t)))}(ah(e=zd(e,ih)),t).then((t=>t?new $d(e,null,t.query):null))}function bh(e){if(e._initialized||e._terminated)throw new Or(Lr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class wh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Or(Lr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function xh(){return new wh("__name__")}class _h{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _h(li.fromBase64String(e))}catch(e){throw new Or(Lr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new _h(li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Sh{constructor(e){this._methodName=e}}class Eh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Or(Lr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Or(Lr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qr(this._lat,e._lat)||qr(this._long,e._long)}}const Th=/^__.*__$/;class Ch{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new $o(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wo(e,this.data,t,this.fieldTransforms)}}class Mh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new $o(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pr()}}class Ph{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.k=n,this.ignoreUndefinedProperties=r,void 0===i&&this.xc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(e){return new Ph(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Fc:!1});return r.Lc(e),r}Bc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Fc:!1});return r.xc(),r}Uc(e){return this.Oc({path:void 0,Fc:!0})}qc(e){return Yh(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}Lc(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(kh(this.$c)&&Th.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}class Ah{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=n||Lc(e)}Qc(e,t,n,r=!1){return new Ph({$c:e,methodName:t,jc:n,path:oi.emptyPath(),Fc:!1,Kc:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Ih(e){const t=e._freezeSettings(),n=Lc(e._databaseId);return new Ah(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Rh(e,t,n,r,i,o={}){const s=e.Qc(o.merge||o.mergeFields?2:0,t,n,i);Gh("Data must be an object, but it was:",s,r);const a=jh(r,s);let l,c;if(o.merge)l=new si(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Wh(t,r,n);if(!s.contains(i))throw new Or(Lr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Kh(e,i)||e.push(i)}l=new si(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new Ch(new Oi(a),l,c)}class Lh extends Sh{_toFieldTransform(e){if(2!==e.$c)throw 1===e.$c?e.qc(`${this._methodName}() can only appear at the top level of your update data`):e.qc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lh}}function Oh(e,t,n){return new Ph({$c:3,jc:t.settings.jc,methodName:e._methodName,Fc:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}class Nh extends Sh{_toFieldTransform(e){return new Do(e.path,new ko)}isEqual(e){return e instanceof Nh}}class Dh extends Sh{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=Oh(this,e,!0),n=this.Wc.map((e=>Uh(e,t))),r=new Po(n);return new Do(e.path,r)}isEqual(e){return this===e}}class Fh extends Sh{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=Oh(this,e,!0),n=this.Wc.map((e=>Uh(e,t))),r=new Io(n);return new Do(e.path,r)}isEqual(e){return this===e}}class Bh extends Sh{constructor(e,t){super(e),this.Gc=t}_toFieldTransform(e){const t=new Lo(e.k,So(e.k,this.Gc));return new Do(e.path,t)}isEqual(e){return this===e}}function Zh(e,t,n,r){const i=e.Qc(1,t,n);Gh("Data must be an object, but it was:",i,r);const o=[],s=Oi.empty();ei(r,((e,r)=>{const l=qh(t,e,n);r=(0,a.m9)(r);const c=i.Bc(l);if(r instanceof Lh)o.push(l);else{const e=Uh(r,c);null!=e&&(o.push(l),s.set(l,e))}}));const l=new si(o);return new Mh(s,l,i.fieldTransforms)}function Vh(e,t,n,r,i,o){const s=e.Qc(1,t,n),l=[Wh(t,r,n)],c=[i];if(o.length%2!=0)throw new Or(Lr.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<o.length;e+=2)l.push(Wh(t,o[e])),c.push(o[e+1]);const u=[],d=Oi.empty();for(let e=l.length-1;e>=0;--e)if(!Kh(u,l[e])){const t=l[e];let n=c[e];n=(0,a.m9)(n);const r=s.Bc(t);if(n instanceof Lh)u.push(t);else{const e=Uh(n,r);null!=e&&(u.push(t),d.set(t,e))}}const h=new si(u);return new Mh(d,h,s.fieldTransforms)}function zh(e,t,n,r=!1){return Uh(n,e.Qc(r?4:3,t))}function Uh(e,t){if(Hh(e=(0,a.m9)(e)))return Gh("Unsupported field value:",t,e),jh(e,t);if(e instanceof Sh)return function(e,t){if(!kh(t.$c))throw t.qc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.qc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.$c)throw t.qc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Uh(i,t.Uc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,a.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return So(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Xr.fromDate(e);return{timestampValue:Is(t.k,n)}}if(e instanceof Xr){const n=new Xr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Is(t.k,n)}}if(e instanceof Eh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _h)return{bytesValue:Rs(t.k,e._byteString)};if(e instanceof Wd){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.qc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ns(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.qc(`Unsupported field value: ${Vd(e)}`)}(e,t)}function jh(e,t){const n={};return ti(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ei(e,((e,r)=>{const i=Uh(r,t.Mc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Hh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xr||e instanceof Eh||e instanceof _h||e instanceof Wd||e instanceof Sh)}function Gh(e,t,n){if(!Hh(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Vd(n);throw"an object"===r?t.qc(e+" a custom object"):t.qc(e+" "+r)}}function Wh(e,t,n){if((t=(0,a.m9)(t))instanceof wh)return t._internalPath;if("string"==typeof t)return qh(e,t);throw Yh("Field path arguments must be of type string or ",e,!1,void 0,n)}const $h=new RegExp("[~\\*/\\[\\]]");function qh(e,t,n){if(t.search($h)>=0)throw Yh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new wh(...t.split("."))._internalPath}catch(r){throw Yh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Yh(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Or(Lr.INVALID_ARGUMENT,a+e+l)}function Kh(e,t){return e.some((e=>e.isEqual(t)))}class Xh{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Jh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Jh extends Xh{data(){return super.data()}}function Qh(e,t){return"string"==typeof t?qh(e,t):t instanceof wh?t._internalPath:t._delegate._internalPath}class ef{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tf extends Xh{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Qh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class nf extends tf{data(e={}){return super.data(e)}}class rf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ef(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new nf(this._firestore,this._userDataWriter,n.key,n,new ef(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Or(Lr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new nf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ef(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new nf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ef(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:of(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function of(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pr()}}function sf(e,t){return e instanceof tf&&t instanceof tf?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof rf&&t instanceof rf&&e._firestore===t._firestore&&Qd(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function af(e){if(ao(e)&&0===e.explicitOrderBy.length)throw new Or(Lr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lf{}function cf(e,...t){for(const n of t)e=n._apply(e);return e}class uf extends lf{constructor(e,t,n){super(),this.zc=e,this.Hc=t,this.Jc=n,this.type="where"}_apply(e){const t=Ih(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Or(Lr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){Tf(s,o);const t=[];for(const n of s)t.push(Ef(r,e,n));a={arrayValue:{values:t}}}else a=Ef(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Tf(s,o),a=zh(n,"where",s,"in"===o||"not-in"===o);const l=Ui.create(i,o,a);return function(e,t){if(t.V()){const n=co(e);if(null!==n&&!n.isEqual(t.field))throw new Or(Lr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=lo(e);null!==r&&Cf(e,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Or(Lr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Or(Lr.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,l),l}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new $d(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new ro(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}function df(e,t,n){const r=t,i=Qh("where",e);return new uf(i,r,n)}class hf extends lf{constructor(e,t){super(),this.zc=e,this.Yc=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Or(Lr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Or(Lr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Qi(t,n);return function(e,t){if(null===lo(e)){const n=co(e);null!==n&&Cf(e,n,t.field)}}(e,r),r}(e._query,this.zc,this.Yc);return new $d(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ro(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ff(e,t="asc"){const n=t,r=Qh("orderBy",e);return new hf(r,n)}class pf extends lf{constructor(e,t,n){super(),this.type=e,this.Xc=t,this.Zc=n}_apply(e){return new $d(e.firestore,e.converter,po(e._query,this.Xc,this.Zc))}}function mf(e){return Ud("limit",e),new pf("limit",e,"F")}function gf(e){return Ud("limitToLast",e),new pf("limitToLast",e,"L")}class vf extends lf{constructor(e,t,n){super(),this.type=e,this.ta=t,this.ea=n}_apply(e){const t=Sf(e,this.type,this.ta,this.ea);return new $d(e.firestore,e.converter,function(e,t){return new ro(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function yf(...e){return new vf("startAt",e,!0)}function bf(...e){return new vf("startAfter",e,!1)}class wf extends lf{constructor(e,t,n){super(),this.type=e,this.ta=t,this.ea=n}_apply(e){const t=Sf(e,this.type,this.ta,this.ea);return new $d(e.firestore,e.converter,function(e,t){return new ro(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function xf(...e){return new wf("endBefore",e,!0)}function _f(...e){return new wf("endAt",e,!1)}function Sf(e,t,n,r){if(n[0]=(0,a.m9)(n[0]),n[0]instanceof Xh)return function(e,t,n,r,i){if(!r)throw new Or(Lr.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const o=[];for(const n of ho(e))if(n.field.isKeyField())o.push(Mi(t,r.key));else{const e=r.data.field(n.field);if(fi(e))throw new Or(Lr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new Or(Lr.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}o.push(e)}return new Xi(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Ih(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new Or(Lr.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let o=0;o<i.length;o++){const l=i[o];if(s[o].field.isKeyField()){if("string"!=typeof l)throw new Or(Lr.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof l}`);if(!uo(e)&&-1!==l.indexOf("/"))throw new Or(Lr.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${l}' contains a slash.`);const n=e.path.child(ri.fromString(l));if(!bi.isDocumentKey(n))throw new Or(Lr.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new bi(n);a.push(Mi(t,i))}else{const e=zh(n,r,l);a.push(e)}}return new Xi(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Ef(e,t,n){if("string"==typeof(n=(0,a.m9)(n))){if(""===n)throw new Or(Lr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uo(t)&&-1!==n.indexOf("/"))throw new Or(Lr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ri.fromString(n));if(!bi.isDocumentKey(r))throw new Or(Lr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mi(e,new bi(r))}if(n instanceof Wd)return Mi(e,n._key);throw new Or(Lr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vd(n)}.`)}function Tf(e,t){if(!Array.isArray(e)||0===e.length)throw new Or(Lr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Or(Lr.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Cf(e,t,n){if(!n.isEqual(t))throw new Or(Lr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Mf{convertValue(e,t="none"){switch(wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return di(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Pr()}}convertObject(e,t){const n={};return ei(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Eh(di(e.latitude),di(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=pi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(mi(e));default:return null}}convertTimestamp(e){const t=ui(e);return new Xr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ri.fromString(e);Ar(sa(n));const r=new Od(n.get(1),n.get(3)),i=new bi(n.popFirst(5));return r.isEqual(t)||Cr(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function kf(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Pf extends Mf{constructor(e){super(),this.firestore=e}convertBytes(e){return new _h(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wd(this.firestore,null,t)}}class Af{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ih(e)}set(e,t,n){this._verifyNotCommitted();const r=If(e,this._firestore),i=kf(r.converter,t,n),o=Rh(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Bo.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=If(e,this._firestore);let o;return o="string"==typeof(t=(0,a.m9)(t))||t instanceof wh?Vh(this._dataReader,"WriteBatch.update",i._key,t,n,r):Zh(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(o.toMutation(i._key,Bo.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=If(e,this._firestore);return this._mutations=this._mutations.concat(new Xo(t._key,Bo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Or(Lr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function If(e,t){if((e=(0,a.m9)(e)).firestore!==t)throw new Or(Lr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Rf(e){e=zd(e,Wd);const t=zd(e.firestore,ih);return Ad(ah(t),e._key).then((n=>Wf(t,e,n)))}class Lf extends Mf{constructor(e){super(),this.firestore=e}convertBytes(e){return new _h(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wd(this.firestore,null,t)}}function Of(e){e=zd(e,Wd);const t=zd(e.firestore,ih),n=ah(t),r=new Lf(t);return function(e,t){const n=new Nr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Rr(e);return n.persistence.runTransaction("read document","readonly",(e=>n.Wn.Rn(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Or(Lr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=mu(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await Cd(e),t,n))),n.promise}(n,e._key).then((n=>new tf(t,r,e._key,n,new ef(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Nf(e){e=zd(e,Wd);const t=zd(e.firestore,ih);return Ad(ah(t),e._key,{source:"server"}).then((n=>Wf(t,e,n)))}function Df(e){e=zd(e,$d);const t=zd(e.firestore,ih),n=ah(t),r=new Lf(t);return af(e._query),Id(n,e._query).then((n=>new rf(t,r,e,n)))}function Ff(e){e=zd(e,$d);const t=zd(e.firestore,ih),n=ah(t),r=new Lf(t);return function(e,t){const n=new Nr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await nc(e,t,!0),i=new Lu(t,r.zn),o=i.Po(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=mu(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await Cd(e),t,n))),n.promise}(n,e._query).then((n=>new rf(t,r,e,n)))}function Bf(e){e=zd(e,$d);const t=zd(e.firestore,ih),n=ah(t),r=new Lf(t);return Id(n,e._query,{source:"server"}).then((n=>new rf(t,r,e,n)))}function Zf(e,t,n){e=zd(e,Wd);const r=zd(e.firestore,ih),i=kf(e.converter,t,n);return Gf(r,[Rh(Ih(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Bo.none())])}function Vf(e,t,n,...r){e=zd(e,Wd);const i=zd(e.firestore,ih),o=Ih(i);let s;return s="string"==typeof(t=(0,a.m9)(t))||t instanceof wh?Vh(o,"updateDoc",e._key,t,n,r):Zh(o,"updateDoc",e._key,t),Gf(i,[s.toMutation(e._key,Bo.exists(!0))])}function zf(e){return Gf(zd(e.firestore,ih),[new Xo(e._key,Bo.none())])}function Uf(e,t){const n=zd(e.firestore,ih),r=Xd(e),i=kf(e.converter,t);return Gf(n,[Rh(Ih(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Bo.exists(!1))]).then((()=>r))}function jf(e,...t){var n,r,i;e=(0,a.m9)(e);let o={includeMetadataChanges:!1},s=0;"object"!=typeof t[s]||th(t[s])||(o=t[s],s++);const l={includeMetadataChanges:o.includeMetadataChanges};if(th(t[s])){const e=t[s];t[s]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[s+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[s+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,u,d;if(e instanceof Wd)u=zd(e.firestore,ih),d=oo(e._key.path),c={next:n=>{t[s]&&t[s](Wf(u,e,n))},error:t[s+1],complete:t[s+2]};else{const n=zd(e,$d);u=zd(n.firestore,ih),d=n._query;const r=new Lf(u);c={next:e=>{t[s]&&t[s](new rf(u,r,n,e))},error:t[s+1],complete:t[s+2]},af(e._query)}return function(e,t,n,r){const i=new gd(r),o=new Cu(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>xu(await Pd(e),o))),()=>{i.nc(),e.asyncQueue.enqueueAndForget((async()=>_u(await Pd(e),o)))}}(ah(u),d,l,c)}function Hf(e,t){return function(e,t){const n=new gd(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Rr(e).io.add(t),t.next()}(await Pd(e),n))),()=>{n.nc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Rr(e).io.delete(t)}(await Pd(e),n)))}}(ah(e=zd(e,ih)),th(t)?t:{next:t})}function Gf(e,t){return function(e,t){const n=new Nr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=ud(e);try{const e=await function(e,t){const n=Rr(e),r=Xr.now(),i=t.reduce(((e,t)=>e.add(t.key)),gs());let o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.Wn.vn(e,i).next((i=>{o=i;const s=[];for(const e of t){const t=jo(e,o.get(e.key));null!=t&&s.push(new $o(e.key,t,Ni(t.value.mapValue),Bo.exists(!0)))}return n.An.addMutationBatch(e,r,s,t)})))).then((e=>(e.applyToLocalDocumentSet(o),{batchId:e.batchId,changes:o})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ko[e.currentUser.toKey()];r||(r=new is(qr)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ju(r,e.changes),await nu(r.remoteStore)}catch(e){const t=mu(e,"Failed to persist write");n.reject(t)}}(await kd(e),t,n))),n.promise}(ah(e),t)}function Wf(e,t,n){const r=n.docs.get(t._key),i=new Lf(e);return new tf(e,i,t._key,r,new ef(n.hasPendingWrites,n.fromCache),t.converter)}class $f extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ih(e)}get(e){const t=If(e,this._firestore),n=new Pf(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Pr();const r=e[0];if(r.isFoundDocument())return new Xh(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Xh(this._firestore,n,t._key,null,t.converter);throw Pr()}))}set(e,t,n){const r=If(e,this._firestore),i=kf(r.converter,t,n),o=Rh(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n,...r){const i=If(e,this._firestore);let o;return o="string"==typeof(t=(0,a.m9)(t))||t instanceof wh?Vh(this._dataReader,"Transaction.update",i._key,t,n,r):Zh(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,o),this}delete(e){const t=If(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=If(e,this._firestore),n=new Lf(this._firestore);return super.get(e).then((e=>new tf(this._firestore,n,t._key,e._document,new ef(!1,!1),t.converter)))}}function qf(e,t){return function(e,t){const n=new Nr;return e.asyncQueue.enqueueAndForget((async()=>{const r=await function(e){return Ed(e).then((e=>e.datastore))}(e);new bd(e.asyncQueue,r,t,n).run()})),n.promise}(ah(e=zd(e,ih)),(n=>t(new $f(e,n))))}function Yf(){return new Lh("deleteField")}function Kf(){return new Nh("serverTimestamp")}function Xf(...e){return new Dh("arrayUnion",e)}function Jf(...e){return new Fh("arrayRemove",e)}function Qf(e){return new Bh("increment",e)}function ep(e){return ah(e=zd(e,ih)),new Af(e,(t=>Gf(e,t)))}!function(e,t=!0){!function(e){xr=e}(i.Jn),(0,i.Xd)(new o.wA("firestore",((e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new ih(r,new Zr(e.getProvider("auth-internal")),new jr(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i}),"PUBLIC")),(0,i.KN)(br,"3.4.3",e),(0,i.KN)(br,"3.4.3","esm2017")}()},90774:function(e,t,n){"use strict";n.r(t),n.d(t,{StringFormat:function(){return A},_FbsBlob:function(){return D},_Location:function(){return v},_TaskEvent:function(){return le},_TaskState:function(){return ce},_UploadTask:function(){return we},_dataFromString:function(){return R},_getChild:function(){return qe},_invalidArgument:function(){return h},_invalidRootOperation:function(){return p},connectStorageEmulator:function(){return Ke},deleteObject:function(){return We},getBlob:function(){return Xe},getBytes:function(){return Fe},getDownloadURL:function(){return Ge},getMetadata:function(){return ze},getStorage:function(){return Ye},getStream:function(){return Je},list:function(){return je},listAll:function(){return He},ref:function(){return $e},updateMetadata:function(){return Ue},uploadBytes:function(){return Be},uploadBytesResumable:function(){return Ve},uploadString:function(){return Ze}});var r=n(32238),i=n(74444),o=n(8463);const s="firebasestorage.googleapis.com";class a extends i.ZR{constructor(e,t){super(l(e),`Firebase Storage: ${t} (${l(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,a.prototype)}_codeEquals(e){return l(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}function l(e){return"storage/"+e}function c(){return new a("unknown","An unknown error occurred, please check the error payload for server response.")}function u(){return new a("canceled","User canceled the upload/download.")}function d(){return new a("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function h(e){return new a("invalid-argument",e)}function f(){return new a("app-deleted","The Firebase app was deleted.")}function p(e){return new a("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function m(e,t){return new a("invalid-format","String does not match format '"+e+"': "+t)}function g(e){throw new a("internal-error","Internal error: "+e)}class v{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=v.makeFromUrl(e,t)}catch(t){return new v(e,"")}if(""===n.path)return n;throw new a("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const l=t.replace(/[.]/g,"\\."),c=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${l}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp(`^https?://${t===s?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:o}];for(let t=0;t<c.length;t++){const r=c[t],i=r.regex.exec(e);if(i){const e=i[r.indices.bucket];let t=i[r.indices.path];t||(t=""),n=new v(e,t),r.postModify(n);break}}if(null==n)throw function(e){return new a("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class y{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function b(e){return"string"==typeof e||e instanceof String}function w(e){return x()&&e instanceof Blob}function x(){return"undefined"!=typeof Blob}function _(e,t,n,r){if(r<t)throw h(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw h(`Invalid value for '${e}'. Expected ${n} or less.`)}function S(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function E(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}var T;!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(T||(T={}));class C{constructor(e,t,n,r,i,o,s,a,l,c,u){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new M(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===T.NO_ERROR,i=n.getStatus();if(!t||this.isRetryStatusCode_(i)){const t=n.getErrorCode()===T.ABORT;return void e(!1,new M(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new M(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(e){r(e)}else if(null!==i){const e=c();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?f():u())}else{r(new a("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new M(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(...e){c||(c=!0,t.apply(null,e))}function d(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function h(){o&&clearTimeout(o)}function f(e,...t){if(c)return void h();if(e)return h(),void u.call(null,e,...t);if(l()||s)return h(),void u.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),d(n)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),o=setTimeout((()=>{s=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}class M{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function k(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function P(...e){const t=k();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(x())return new Blob(e);throw new a("unsupported-environment","This browser doesn't seem to support creating Blobs")}const A={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class I{constructor(e,t){this.data=e,this.contentType=t||null}}function R(e,t){switch(e){case A.RAW:return new I(L(t));case A.BASE64:case A.BASE64URL:return new I(O(e,t));case A.DATA_URL:return new I(function(e){const t=new N(e);return t.base64?O(A.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(e){throw m(A.DATA_URL,"Malformed data URL.")}return L(t)}(t.rest)}(t),new N(t).contentType)}throw c()}function L(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r)){if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function O(e,t){switch(e){case A.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw m(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case A.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw m(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=atob(t)}catch(t){throw m(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);return r}class N{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw m(A.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}}class D{constructor(e,t){let n=0,r="";w(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(w(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new D(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new D(n,!0)}}static getBlob(...e){if(x()){const t=e.map((e=>e instanceof D?e.data_:e));return new D(P.apply(null,t))}{const t=e.map((e=>b(e)?R(A.RAW,e).data:e.data_));let n=0;t.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return t.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new D(r,!0)}}uploadData(){return this.data_}}function F(e){let t;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t;var n}function B(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Z(e,t){return t}class V{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Z}}let z=null;function U(){if(z)return z;const e=[];e.push(new V("bucket")),e.push(new V("generation")),e.push(new V("metageneration")),e.push(new V("name","fullPath",!0));const t=new V("name");t.xform=function(e,t){return function(e){return!b(e)||e.length<2?e:B(e)}(t)},e.push(t);const n=new V("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new V("timeCreated")),e.push(new V("updated")),e.push(new V("md5Hash",null,!0)),e.push(new V("cacheControl",null,!0)),e.push(new V("contentDisposition",null,!0)),e.push(new V("contentEncoding",null,!0)),e.push(new V("contentLanguage",null,!0)),e.push(new V("contentType",null,!0)),e.push(new V("metadata","customMetadata",!0)),z=e,z}function j(e,t,n){const r={type:"file"},i=n.length;for(let e=0;e<i;e++){const i=n[e];r[i.local]=i.xform(r,t[i.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new v(n,r);return t._makeStorageReference(i)}})}(r,e),r}function H(e,t,n){const r=F(t);if(null===r)return null;return j(e,r,n)}function G(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}function W(e,t,n){const r=F(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(const i of n.prefixes){const n=i.replace(/\/$/,""),o=e._makeStorageReference(new v(t,n));r.prefixes.push(o)}if(n.items)for(const i of n.items){const n=e._makeStorageReference(new v(t,i.name));r.items.push(n)}return r}(e,t,r)}class ${constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function q(e){if(!e)throw c()}function Y(e,t){return function(n,r){const i=H(e,r,t);return q(null!==i),i}}function K(e,t){return function(n,r){const i=H(e,r,t);return q(null!==i),function(e,t,n,r){const i=F(t);if(null===i)return null;if(!b(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return S("/b/"+s(i)+"/o/"+s(o),n,r)+E({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function X(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new a("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new a("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new a("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new a("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function J(e){const t=X(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new a("object-not-found","Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Q(e,t,n){const r=S(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new $(r,"GET",Y(e,n),i);return o.errorHandler=J(t),o}function ee(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=S(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new $(s,"GET",function(e,t){return function(n,r){const i=W(e,t,r);return q(null!==i),i}}(e,t.bucket),a);return l.urlParams=o,l.errorHandler=X(t),l}function te(e,t,n){const r=S(t.fullServerUrl(),e.host,e._protocol)+"?alt=media",i=e.maxOperationRetryTime,o=new $(r,"GET",((e,t)=>t),i);return o.errorHandler=J(t),void 0!==n&&(o.headers.Range=`bytes=0-${n}`,o.successCodes=[200,206]),o}function ne(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function re(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=ne(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+G(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=D.getBlob(c,r,u);if(null===h)throw d();const f={name:l.fullPath},p=S(o,e.host,e._protocol),m=e.maxUploadRetryTime,g=new $(p,"POST",Y(e,n),m);return g.urlParams=f,g.headers=s,g.body=h.uploadData(),g.errorHandler=X(t),g}class ie{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function oe(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){q(!1)}return q(!!n&&-1!==(t||["active"]).indexOf(n)),n}const se=262144;function ae(e,t,n,r,i,o,s,l){const c=new ie(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new a("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const u=c.total-c.current;let h=u;i>0&&(h=Math.min(h,i));const f=c.current,p=f+h,m={"X-Goog-Upload-Command":h===u?"upload, finalize":"upload","X-Goog-Upload-Offset":`${c.current}`},g=r.slice(f,p);if(null===g)throw d();const v=t.maxUploadRetryTime,y=new $(n,"POST",(function(e,n){const i=oe(e,["active","final"]),s=c.current+h,a=r.size();let l;return l="final"===i?Y(t,o)(e,n):null,new ie(s,a,"final"===i,l)}),v);return y.headers=m,y.body=g.uploadData(),y.progressCallback=l||null,y.errorHandler=X(e),y}const le={STATE_CHANGED:"state_changed"},ce={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ue(e){switch(e){case"running":case"pausing":case"canceling":return ce.RUNNING;case"paused":return ce.PAUSED;case"success":return ce.SUCCESS;case"canceled":return ce.CANCELED;default:return ce.ERROR}}class de{constructor(e,t,n){if("function"==typeof e||null!=t||null!=n)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function he(e){return(...t)=>{Promise.resolve().then((()=>e(...t)))}}class fe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=T.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=T.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=T.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw g("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const e in r)r.hasOwnProperty(e)&&this.xhr_.setRequestHeader(e,r[e].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw g("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw g("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw g("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw g("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class pe extends fe{initXhr(){this.xhr_.responseType="text"}}function me(){return new pe}class ge extends fe{initXhr(){this.xhr_.responseType="arraybuffer"}}function ve(){return new ge}class ye extends fe{initXhr(){this.xhr_.responseType="blob"}}function be(){return new ye}class we{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=U(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{this._request=void 0,this._chunkMultiplier=1,e._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=e,this._transition("error"))},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals("canceled")?this.completeTransitions_():(this._error=e,this._transition("error"))},this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s=ne(t,r,i),a={name:s.fullPath},l=S(o,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},u=G(s,n),d=e.maxUploadRetryTime,h=new $(l,"POST",(function(e){let t;oe(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){q(!1)}return q(b(t)),t}),d);return h.urlParams=a,h.headers=c,h.body=u,h.errorHandler=X(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,me,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,o=new $(n,"POST",(function(e){const t=oe(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){q(!1)}n||q(!1);const i=Number(n);return q(!isNaN(i)),new ie(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=X(t),o}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,me,t,n);this._request=i,i.getPromise().then((e=>{e=e,this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=se*this._chunkMultiplier,t=new ie(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let o;try{o=ae(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(e){return this._error=e,void this._transition("error")}const s=this._ref.storage._makeRequest(o,me,r,i);this._request=s,s.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){se*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=Q(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,me,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=re(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,me,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=u(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ue(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new de(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ue(this._state)){case ce.SUCCESS:he(this._resolve.bind(null,this.snapshot))();break;case ce.CANCELED:case ce.ERROR:he(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ue(this._state)){case ce.RUNNING:case ce.PAUSED:e.next&&he(e.next.bind(e,this.snapshot))();break;case ce.SUCCESS:e.complete&&he(e.complete.bind(e))();break;case ce.CANCELED:case ce.ERROR:default:e.error&&he(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class xe{constructor(e,t){this._service=e,this._location=t instanceof v?t:v.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xe(e,t)}get root(){const e=new v(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return B(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new v(this._location.bucket,e);return new xe(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw p(e)}}function _e(e,t,n){e._throwIfRoot("uploadBytes");const r=re(e.storage,e._location,U(),new D(t,!0),n);return e.storage.makeRequestWithTokens(r,me).then((t=>({metadata:t,ref:e})))}function Se(e){const t={prefixes:[],items:[]};return Ee(e,t).then((()=>t))}async function Ee(e,t,n){const r={pageToken:n},i=await Te(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await Ee(e,t,i.nextPageToken)}function Te(e,t){null!=t&&"number"==typeof t.maxResults&&_("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=ee(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,me)}function Ce(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=S(t.fullServerUrl(),e.host,e._protocol),o=G(n,r),s=e.maxOperationRetryTime,a=new $(i,"PATCH",Y(e,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=J(t),a}(e.storage,e._location,t,U());return e.storage.makeRequestWithTokens(n,me)}function Me(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=S(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new $(r,"GET",K(e,n),i);return o.errorHandler=J(t),o}(e.storage,e._location,U());return e.storage.makeRequestWithTokens(t,me).then((e=>{if(null===e)throw new a("no-download-url","The given file does not have any download URLs.");return e}))}function ke(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=S(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new $(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=J(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,me)}function Pe(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new v(e._location.bucket,n);return new xe(e.storage,r)}function Ae(e,t){if(e instanceof Le){const n=e;if(null==n._bucket)throw new a("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");const r=new xe(n,n._bucket);return null!=t?Ae(r,t):r}return void 0!==t?Pe(e,t):e}function Ie(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Le)return new xe(e,t);throw h("To use ref(service, url), the first argument must be a Storage instance.")}return Ae(e,t)}function Re(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:v.makeFromBucketSpec(n,e)}class Le{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=s,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?v.makeFromBucketSpec(r,this._host):Re(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=v.makeFromBucketSpec(this._url,e):this._bucket=Re(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xe(this,e)}_makeRequest(e,t,n,r){if(this._deleted)return new y(f());{const i=function(e,t,n,r,i,o){const s=E(e.urlParams),a=e.url+s,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(l,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new C(a,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((()=>this._requests.delete(i)),(()=>this._requests.delete(i))),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Oe="@firebase/storage",Ne="0.9.1",De="storage";function Fe(e,t){return function(e,t){e._throwIfRoot("getBytes");const n=te(e.storage,e._location,t);return e.storage.makeRequestWithTokens(n,ve).then((e=>void 0!==t?e.slice(0,t):e))}(e=(0,i.m9)(e),t)}function Be(e,t,n){return _e(e=(0,i.m9)(e),t,n)}function Ze(e,t,n,r){return function(e,t,n=A.RAW,r){e._throwIfRoot("uploadString");const i=R(n,t),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),_e(e,i.data,o)}(e=(0,i.m9)(e),t,n,r)}function Ve(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new we(e,new D(t),n)}(e=(0,i.m9)(e),t,n)}function ze(e){return function(e){e._throwIfRoot("getMetadata");const t=Q(e.storage,e._location,U());return e.storage.makeRequestWithTokens(t,me)}(e=(0,i.m9)(e))}function Ue(e,t){return Ce(e=(0,i.m9)(e),t)}function je(e,t){return Te(e=(0,i.m9)(e),t)}function He(e){return Se(e=(0,i.m9)(e))}function Ge(e){return Me(e=(0,i.m9)(e))}function We(e){return ke(e=(0,i.m9)(e))}function $e(e,t){return Ie(e=(0,i.m9)(e),t)}function qe(e,t){return Pe(e,t)}function Ye(e=(0,r.Mq)(),t){e=(0,i.m9)(e);return(0,r.qX)(e,De).getImmediate({identifier:t})}function Ke(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"==typeof o?o:(0,i.Sg)(o,e.app.options.projectId))}(e,t,n,r)}function Xe(e,t){return function(e,t){e._throwIfRoot("getBlob");const n=te(e.storage,e._location,t);return e.storage.makeRequestWithTokens(n,be).then((e=>void 0!==t?e.slice(0,t):e))}(e=(0,i.m9)(e),t)}function Je(e,t){throw new Error("getStream() is only supported by NodeJS builds")}function Qe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new Le(n,i,o,t,r.Jn)}(0,r.Xd)(new o.wA(De,Qe,"PUBLIC").setMultipleInstances(!0)),(0,r.KN)(Oe,Ne,""),(0,r.KN)(Oe,Ne,"esm2017")},74444:function(e,t,n){"use strict";n.d(t,{BH:function(){return a},LL:function(){return b},ZR:function(){return y},tV:function(){return s},Sg:function(){return l},ne:function(){return M},vZ:function(){return _},pd:function(){return C},m9:function(){return A},z$:function(){return c},ru:function(){return d},d:function(){return f},xb:function(){return x},w1:function(){return p},hl:function(){return v},uI:function(){return u},b$:function(){return h},G6:function(){return g},Mn:function(){return m},xO:function(){return E},zd:function(){return T}});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],o=t+1<e.length,s=o?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=i>>2,u=(3&i)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],o=t<e.length?n[e.charAt(t)]:0;++t;const s=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==o||null==s||null==a)throw Error();const l=i<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},s=function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};class a{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function l(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function d(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function h(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function f(){return c().indexOf("Electron/")>=0}function p(){const e=c();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function m(){return c().indexOf("MSAppHost/")>=0}function g(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v(){return"object"==typeof indexedDB}class y extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,b.prototype.create)}}class b{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?function(e,t){return e.replace(w,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",s=`${this.serviceName}: ${o} (${r}).`;return new y(r,s,n)}}const w=/\{\$([^}]+)}/g;function x(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(S(n)&&S(o)){if(!_(n,o))return!1}else if(n!==o)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function S(e){return null!==e&&"object"==typeof e}function E(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function T(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function C(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function M(e,t){const n=new k(e,t);return n.subscribe.bind(n)}class k{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=P),void 0===r.error&&(r.error=P),void 0===r.complete&&(r.complete=P);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function P(){}function A(e){return e&&e._delegate?e._delegate:e}},78298:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew");t.default=s},13379:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");t.default=s},50594:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.default=s},41899:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");t.default=s},67408:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"ControlPoint");t.default=s},41733:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=s},8364:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");t.default=s},77957:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.default=s},14039:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"m12.126 8.125 1.937-1.937 3.747 3.747-1.937 1.938zM20.71 5.63l-2.34-2.34a1 1 0 0 0-1.41 0l-1.83 1.83 3.75 3.75L20.71 7a1 1 0 0 0 0-1.37zM2 5l6.63 6.63L3 17.25V21h3.75l5.63-5.62L18 21l2-2L4 3 2 5z"}),"EditOff");t.default=s},50891:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"}),"Email");t.default=s},25089:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z"}),"EmojiEvents");t.default=s},49123:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"ExitToApp");t.default=s},60181:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");t.default=s},23508:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.default=s},55343:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"Fullscreen");t.default=s},66235:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}),"FullscreenExit");t.default=s},79535:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r)}(n(67294));var i=r(n(64938)),o=n(85893);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var a=(0,i.default)((0,o.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");t.default=a},9944:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}),"Help");t.default=s},27608:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}),"HelpOutline");t.default=s},75503:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");t.default=s},76172:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeft");t.default=s},48317:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight");t.default=s},90813:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");t.default=s},39485:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"}),"Login");t.default=s},96339:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z"}),"MonetizationOn");t.default=s},53247:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"Pause");t.default=s},41715:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"PersonAdd");t.default=s},744:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4zm3 2v2h6v-2h-6zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4z"}),"PersonRemove");t.default=s},1849:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.default=s},31975:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z"}),"Stars");t.default=s},60316:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"VideogameAsset");t.default=s},49066:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"}),"VolumeDown");t.default=s},52295:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"}),"VolumeOff");t.default=s},26340:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"}),"VolumeUp");t.default=s},64938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(64298)},88884:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(58524),c=n(71657),u=n(82066),d=n(85893),h=(0,u.Z)((0,d.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),f=n(54801);const p=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],m=(0,l.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((({theme:e,ownerState:t})=>(0,i.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===t.variant&&{borderRadius:e.shape.borderRadius},"square"===t.variant&&{borderRadius:0},t.colorDefault&&{color:e.palette.background.default,backgroundColor:"light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[600]}))),g=(0,l.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),v=(0,l.ZP)(h,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});var y=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiAvatar"}),{alt:l,children:u,className:h,component:y="div",imgProps:b,sizes:w,src:x,srcSet:_,variant:S="circular"}=n,E=(0,r.Z)(n,p);let T=null;const C=function({crossOrigin:e,referrerPolicy:t,src:n,srcSet:r}){const[i,s]=o.useState(!1);return o.useEffect((()=>{if(!n&&!r)return;s(!1);let i=!0;const o=new Image;return o.onload=()=>{i&&s("loaded")},o.onerror=()=>{i&&s("error")},o.crossOrigin=e,o.referrerPolicy=t,o.src=n,r&&(o.srcset=r),()=>{i=!1}}),[e,t,n,r]),i}((0,i.Z)({},b,{src:x,srcSet:_})),M=x||_,k=M&&"error"!==C,P=(0,i.Z)({},n,{colorDefault:!k,component:y,variant:S}),A=(e=>{const{classes:t,variant:n,colorDefault:r}=e,i={root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,a.Z)(i,f.$,t)})(P);return T=k?(0,d.jsx)(g,(0,i.Z)({alt:l,src:x,srcSet:_,sizes:w,ownerState:P,className:A.img},b)):null!=u?u:M&&l?l[0]:(0,d.jsx)(v,{className:A.fallback}),(0,d.jsx)(m,(0,i.Z)({as:y,ownerState:P,className:(0,s.Z)(A.root,h),ref:t},E,{children:T}))}))},54801:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiAvatar",e)}const o=(0,n(88858).Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);t.Z=o},25727:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},avatarClasses:function(){return i.Z},getAvatarUtilityClass:function(){return i.$}});var r=n(88884),i=n(54801)},45889:function(e,t,n){"use strict";n.d(t,{V:function(){return p}});var r=n(63366),i=n(87462),o=n(67294),s=n(49957),a=n(17757),l=n(83311),c=n(58524),u=n(71657),d=n(16628),h=n(85893);const f=["children","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],p=a.Z,m=(0,c.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((({ownerState:e})=>(0,i.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"}))),g=o.forwardRef((function(e,t){var n;const o=(0,u.Z)({props:e,name:"MuiBackdrop"}),{children:a,components:c={},componentsProps:p={},className:g,invisible:v=!1,open:y,transitionDuration:b,TransitionComponent:w=d.Z}=o,x=(0,r.Z)(o,f),_=(e=>{const{classes:t}=e;return t})((0,i.Z)({},o,{invisible:v}));return(0,h.jsx)(w,(0,i.Z)({in:y,timeout:b},x,{children:(0,h.jsx)(l.Z,{className:g,invisible:v,components:(0,i.Z)({Root:m},c),componentsProps:{root:(0,i.Z)({},p.root,(!c.Root||!(0,s.Z)(c.Root))&&{ownerState:(0,i.Z)({},null==(n=p.root)?void 0:n.ownerState)})},classes:_,ref:t,children:a})}))}));t.Z=g},24622:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(19868),l=n(18784),c=n(87893),u=n(71713),d=n(85893);const h=["className","component"];const f=function(e={}){const{defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:f}=e,p=(0,a.ZP)("div")(l.Z);return o.forwardRef((function(e,o){const a=(0,u.Z)(t),l=(0,c.Z)(e),{className:m,component:g="div"}=l,v=(0,i.Z)(l,h);return(0,d.jsx)(p,(0,r.Z)({as:g,ref:o,className:(0,s.Z)(m,f?f(n):n),theme:a},v))}))}({defaultTheme:(0,n(56232).default)()});var p=f},55693:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z}});var r=n(24622)},96458:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(71993),l=n(58524),c=n(71657),u=n(51705),d=n(2068),h=n(79674);var f=n(51721),p=n(220);function m(e,t){var n=Object.create(null);return e&&o.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,o.isValidElement)(e)?t(e):e}(e)})),n}function g(e,t,n){return null!=n[t]?n[t]:e.props[t]}function v(e,t,n){var r=m(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(t,r);return Object.keys(i).forEach((function(s){var a=i[s];if((0,o.isValidElement)(a)){var l=s in t,c=s in r,u=t[s],d=(0,o.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,o.isValidElement)(u)&&(i[s]=(0,o.cloneElement)(a,{onExited:n.bind(null,a),in:u.props.in,exit:g(a,"exit",e),enter:g(a,"enter",e)})):i[s]=(0,o.cloneElement)(a,{in:!1}):i[s]=(0,o.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:g(a,"exit",e),enter:g(a,"enter",e)})}})),i}var y=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},b=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,f.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,s=t.handleExited;return{children:t.firstRender?(n=e,r=s,m(n.children,(function(e){return(0,o.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:g(e,"appear",n),enter:g(e,"enter",n),exit:g(e,"exit",n)})}))):v(e,i,s),firstRender:!1}},n.handleExited=function(e,t){var n=m(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,r.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,i.Z)(e,["component","childFactory"]),s=this.state.contextValue,a=y(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o.createElement(p.Z.Provider,{value:s},a):o.createElement(p.Z.Provider,{value:s},o.createElement(t,r,a))},t}(o.Component);b.propTypes={},b.defaultProps={component:"div",childFactory:function(e){return e}};var w=b,x=n(70917),_=n(85893);var S=function(e){const{className:t,classes:n,pulsate:r=!1,rippleX:i,rippleY:a,rippleSize:l,in:c,onExited:u,timeout:d}=e,[h,f]=o.useState(!1),p=(0,s.Z)(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),m={width:l,height:l,top:-l/2+a,left:-l/2+i},g=(0,s.Z)(n.child,h&&n.childLeaving,r&&n.childPulsate);return c||h||f(!0),o.useEffect((()=>{if(!c&&null!=u){const e=setTimeout(u,d);return()=>{clearTimeout(e)}}}),[u,c,d]),(0,_.jsx)("span",{className:p,style:m,children:(0,_.jsx)("span",{className:g})})},E=n(42615);const T=["center","classes","className"];let C,M,k,P,A=e=>e;const I=(0,x.F4)(C||(C=A`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),R=(0,x.F4)(M||(M=A`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),L=(0,x.F4)(k||(k=A`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),O=(0,l.ZP)("span",{name:"MuiTouchRipple",slot:"Root",skipSx:!0})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),N=(0,l.ZP)(S,{name:"MuiTouchRipple",slot:"Ripple"})(P||(P=A`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),E.Z.rippleVisible,I,550,(({theme:e})=>e.transitions.easing.easeInOut),E.Z.ripplePulsate,(({theme:e})=>e.transitions.duration.shorter),E.Z.child,E.Z.childLeaving,R,550,(({theme:e})=>e.transitions.easing.easeInOut),E.Z.childPulsate,L,(({theme:e})=>e.transitions.easing.easeInOut));var D=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiTouchRipple"}),{center:a=!1,classes:l={},className:u}=n,d=(0,i.Z)(n,T),[h,f]=o.useState([]),p=o.useRef(0),m=o.useRef(null);o.useEffect((()=>{m.current&&(m.current(),m.current=null)}),[h]);const g=o.useRef(!1),v=o.useRef(null),y=o.useRef(null),b=o.useRef(null);o.useEffect((()=>()=>{clearTimeout(v.current)}),[]);const x=o.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:o}=e;f((e=>[...e,(0,_.jsx)(N,{classes:{ripple:(0,s.Z)(l.ripple,E.Z.ripple),rippleVisible:(0,s.Z)(l.rippleVisible,E.Z.rippleVisible),ripplePulsate:(0,s.Z)(l.ripplePulsate,E.Z.ripplePulsate),child:(0,s.Z)(l.child,E.Z.child),childLeaving:(0,s.Z)(l.childLeaving,E.Z.childLeaving),childPulsate:(0,s.Z)(l.childPulsate,E.Z.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},p.current)])),p.current+=1,m.current=o}),[l]),S=o.useCallback(((e={},t={},n)=>{const{pulsate:r=!1,center:i=a||t.pulsate,fakeElement:o=!1}=t;if("mousedown"===e.type&&g.current)return void(g.current=!1);"touchstart"===e.type&&(g.current=!0);const s=o?null:b.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(i||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(i)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2==0&&(d+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}e.touches?null===y.current&&(y.current=()=>{x({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})},v.current=setTimeout((()=>{y.current&&(y.current(),y.current=null)}),80)):x({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[a,x]),C=o.useCallback((()=>{S({},{pulsate:!0})}),[S]),M=o.useCallback(((e,t)=>{if(clearTimeout(v.current),"touchend"===e.type&&y.current)return y.current(),y.current=null,void(v.current=setTimeout((()=>{M(e,t)})));y.current=null,f((e=>e.length>0?e.slice(1):e)),m.current=t}),[]);return o.useImperativeHandle(t,(()=>({pulsate:C,start:S,stop:M})),[C,S,M]),(0,_.jsx)(O,(0,r.Z)({className:(0,s.Z)(l.root,E.Z.root,u),ref:b},d,{children:(0,_.jsx)(w,{component:null,exit:!0,children:h})}))})),F=n(45063);const B=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","type"],Z=(0,l.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${F.Z.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}});var V=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiButtonBase"}),{action:l,centerRipple:f=!1,children:p,className:m,component:g="button",disabled:v=!1,disableRipple:y=!1,disableTouchRipple:b=!1,focusRipple:w=!1,LinkComponent:x="a",onBlur:S,onClick:E,onContextMenu:T,onDragLeave:C,onFocus:M,onFocusVisible:k,onKeyDown:P,onKeyUp:A,onMouseDown:I,onMouseLeave:R,onMouseUp:L,onTouchEnd:O,onTouchMove:N,onTouchStart:V,tabIndex:z=0,TouchRippleProps:U,type:j}=n,H=(0,i.Z)(n,B),G=o.useRef(null),W=o.useRef(null),{isFocusVisibleRef:$,onFocus:q,onBlur:Y,ref:K}=(0,h.Z)(),[X,J]=o.useState(!1);function Q(e,t,n=b){return(0,d.Z)((r=>{t&&t(r);return!n&&W.current&&W.current[e](r),!0}))}v&&X&&J(!1),o.useImperativeHandle(l,(()=>({focusVisible:()=>{J(!0),G.current.focus()}})),[]),o.useEffect((()=>{X&&w&&!y&&W.current.pulsate()}),[y,w,X]);const ee=Q("start",I),te=Q("stop",T),ne=Q("stop",C),re=Q("stop",L),ie=Q("stop",(e=>{X&&e.preventDefault(),R&&R(e)})),oe=Q("start",V),se=Q("stop",O),ae=Q("stop",N),le=Q("stop",(e=>{Y(e),!1===$.current&&J(!1),S&&S(e)}),!1),ce=(0,d.Z)((e=>{G.current||(G.current=e.currentTarget),q(e),!0===$.current&&(J(!0),k&&k(e)),M&&M(e)})),ue=()=>{const e=G.current;return g&&"button"!==g&&!("A"===e.tagName&&e.href)},de=o.useRef(!1),he=(0,d.Z)((e=>{w&&!de.current&&X&&W.current&&" "===e.key&&(de.current=!0,W.current.stop(e,(()=>{W.current.start(e)}))),e.target===e.currentTarget&&ue()&&" "===e.key&&e.preventDefault(),P&&P(e),e.target===e.currentTarget&&ue()&&"Enter"===e.key&&!v&&(e.preventDefault(),E&&E(e))})),fe=(0,d.Z)((e=>{w&&" "===e.key&&W.current&&X&&!e.defaultPrevented&&(de.current=!1,W.current.stop(e,(()=>{W.current.pulsate(e)}))),A&&A(e),E&&e.target===e.currentTarget&&ue()&&" "===e.key&&!e.defaultPrevented&&E(e)}));let pe=g;"button"===pe&&(H.href||H.to)&&(pe=x);const me={};"button"===pe?(me.type=void 0===j?"button":j,me.disabled=v):(H.href||H.to||(me.role="button"),v&&(me["aria-disabled"]=v));const ge=(0,u.Z)(K,G),ve=(0,u.Z)(t,ge),[ye,be]=o.useState(!1);o.useEffect((()=>{be(!0)}),[]);const we=ye&&!y&&!v;const xe=(0,r.Z)({},n,{centerRipple:f,component:g,disabled:v,disableRipple:y,disableTouchRipple:b,focusRipple:w,tabIndex:z,focusVisible:X}),_e=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o={root:["root",t&&"disabled",n&&"focusVisible"]},s=(0,a.Z)(o,F.$,i);return n&&r&&(s.root+=` ${r}`),s})(xe);return(0,_.jsxs)(Z,(0,r.Z)({as:pe,className:(0,s.Z)(_e.root,m),ownerState:xe,onBlur:le,onClick:E,onContextMenu:te,onFocus:ce,onKeyDown:he,onKeyUp:fe,onMouseDown:ee,onMouseLeave:ie,onMouseUp:re,onDragLeave:ne,onTouchEnd:se,onTouchMove:ae,onTouchStart:oe,ref:ve,tabIndex:v?-1:z,type:j},me,H,{children:[p,we?(0,_.jsx)(D,(0,r.Z)({ref:W,center:f},U)):null]}))}))},45063:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiButtonBase",e)}const o=(0,n(88858).Z)("MuiButtonBase",["root","disabled","focusVisible"]);t.Z=o},42615:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTouchRipple",e)}const o=(0,n(88858).Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);t.Z=o},69397:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(94581),c=n(58524),u=n(71657),d=n(96458),h=n(98216),f=n(97933),p=n(85893);const m=["children","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],g=e=>(0,i.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),v=(0,c.ZP)(d.Z,{shouldForwardProp:e=>(0,c.FO)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,h.Z)(n.color)}`],t[`size${(0,h.Z)(n.size)}`],t[`${n.variant}Size${(0,h.Z)(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((({theme:e,ownerState:t})=>(0,i.Z)({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,i.Z)({textDecoration:"none",backgroundColor:(0,l.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===t.variant&&"inherit"!==t.color&&{backgroundColor:(0,l.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===t.variant&&"inherit"!==t.color&&{border:`1px solid ${e.palette[t.color].main}`,backgroundColor:(0,l.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===t.variant&&{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]}},"contained"===t.variant&&"inherit"!==t.color&&{backgroundColor:e.palette[t.color].dark,"@media (hover: none)":{backgroundColor:e.palette[t.color].main}}),"&:active":(0,i.Z)({},"contained"===t.variant&&{boxShadow:e.shadows[8]}),[`&.${f.Z.focusVisible}`]:(0,i.Z)({},"contained"===t.variant&&{boxShadow:e.shadows[6]}),[`&.${f.Z.disabled}`]:(0,i.Z)({color:e.palette.action.disabled},"outlined"===t.variant&&{border:`1px solid ${e.palette.action.disabledBackground}`},"outlined"===t.variant&&"secondary"===t.color&&{border:`1px solid ${e.palette.action.disabled}`},"contained"===t.variant&&{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground})},"text"===t.variant&&{padding:"6px 8px"},"text"===t.variant&&"inherit"!==t.color&&{color:e.palette[t.color].main},"outlined"===t.variant&&{padding:"5px 15px",border:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"outlined"===t.variant&&"inherit"!==t.color&&{color:e.palette[t.color].main,border:`1px solid ${(0,l.Fq)(e.palette[t.color].main,.5)}`},"contained"===t.variant&&{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2]},"contained"===t.variant&&"inherit"!==t.color&&{color:e.palette[t.color].contrastText,backgroundColor:e.palette[t.color].main},"inherit"===t.color&&{color:"inherit",borderColor:"currentColor"},"small"===t.size&&"text"===t.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"text"===t.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"outlined"===t.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"outlined"===t.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===t.size&&"contained"===t.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===t.size&&"contained"===t.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})),(({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${f.Z.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${f.Z.disabled}`]:{boxShadow:"none"}})),y=(0,c.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${(0,h.Z)(n.size)}`]]}})((({ownerState:e})=>(0,i.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},g(e)))),b=(0,c.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${(0,h.Z)(n.size)}`]]}})((({ownerState:e})=>(0,i.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},g(e)))),w=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiButton"}),{children:o,color:l="primary",component:c="button",disabled:d=!1,disableElevation:g=!1,disableFocusRipple:w=!1,endIcon:x,focusVisibleClassName:_,fullWidth:S=!1,size:E="medium",startIcon:T,type:C,variant:M="text"}=n,k=(0,r.Z)(n,m),P=(0,i.Z)({},n,{color:l,component:c,disabled:d,disableElevation:g,disableFocusRipple:w,fullWidth:S,size:E,type:C,variant:M}),A=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:o,variant:s,classes:l}=e,c={root:["root",s,`${s}${(0,h.Z)(t)}`,`size${(0,h.Z)(o)}`,`${s}Size${(0,h.Z)(o)}`,"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${(0,h.Z)(o)}`],endIcon:["endIcon",`iconSize${(0,h.Z)(o)}`]},u=(0,a.Z)(c,f.F,l);return(0,i.Z)({},l,u)})(P),I=T&&(0,p.jsx)(y,{className:A.startIcon,ownerState:P,children:T}),R=x&&(0,p.jsx)(b,{className:A.endIcon,ownerState:P,children:x});return(0,p.jsxs)(v,(0,i.Z)({ownerState:P,component:c,disabled:d,focusRipple:!w,focusVisibleClassName:(0,s.Z)(A.focusVisible,_),ref:t,type:C},k,{classes:A,children:[I,o,R]}))}));t.Z=w},97933:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiButton",e)}const o=(0,n(88858).Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);t.Z=o},94718:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},buttonClasses:function(){return i.Z},getButtonUtilityClass:function(){return i.F}});var r=n(69397),i=n(97933)},72299:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(58524),c=n(71657),u=n(81353),d=n(85893);const h=["disableSpacing","className"],f=(0,l.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,i.Z)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}}))),p=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:o=!1,className:l}=n,p=(0,r.Z)(n,h),m=(0,i.Z)({},n,{disableSpacing:o}),g=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,a.Z)(r,u.s,t)})(m);return(0,d.jsx)(f,(0,i.Z)({className:(0,s.Z)(g.root,l),ownerState:m,ref:t},p))}));t.Z=p},81353:function(e,t,n){"use strict";n.d(t,{s:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiCardActions",e)}const o=(0,n(88858).Z)("MuiCardActions",["root","spacing"]);t.Z=o},48547:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},cardActionsClasses:function(){return i.Z},getCardActionsUtilityClass:function(){return i.s}});var r=n(72299),i=n(81353)},28492:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(71993),l=n(58524),c=n(71657),u=n(70567),d=n(85893);const h=["className","component"],f=(0,l.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),p=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiCardContent"}),{className:o,component:l="div"}=n,p=(0,i.Z)(n,h),m=(0,r.Z)({},n,{component:l}),g=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"]},u.N,t)})(m);return(0,d.jsx)(f,(0,r.Z)({as:l,className:(0,s.Z)(g.root,o),ownerState:m,ref:t},p))}));t.Z=p},70567:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiCardContent",e)}const o=(0,n(88858).Z)("MuiCardContent",["root"]);t.Z=o},50961:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},cardContentClasses:function(){return i.Z},getCardContentUtilityClass:function(){return i.N}});var r=n(28492),i=n(70567)},86867:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(23972),c=n(71657),u=n(58524),d=n(30968),h=n(85893);const f=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],p=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,i.Z)({[`& .${d.Z.title}`]:t.title,[`& .${d.Z.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),m=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),g=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),v=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),y=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiCardHeader"}),{action:o,avatar:u,className:y,component:b="div",disableTypography:w=!1,subheader:x,subheaderTypographyProps:_,title:S,titleTypographyProps:E}=n,T=(0,r.Z)(n,f),C=(0,i.Z)({},n,{component:b,disableTypography:w}),M=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},d.J,t)})(C);let k=S;null==k||k.type===l.Z||w||(k=(0,h.jsx)(l.Z,(0,i.Z)({variant:u?"body2":"h5",className:M.title,component:"span",display:"block"},E,{children:k})));let P=x;return null==P||P.type===l.Z||w||(P=(0,h.jsx)(l.Z,(0,i.Z)({variant:u?"body2":"body1",className:M.subheader,color:"text.secondary",component:"span",display:"block"},_,{children:P}))),(0,h.jsxs)(p,(0,i.Z)({className:(0,s.Z)(M.root,y),as:b,ref:t,ownerState:C},T,{children:[u&&(0,h.jsx)(m,{className:M.avatar,ownerState:C,children:u}),(0,h.jsxs)(v,{className:M.content,ownerState:C,children:[k,P]}),o&&(0,h.jsx)(g,{className:M.action,ownerState:C,children:o})]}))}));t.Z=y},30968:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiCardHeader",e)}const o=(0,n(88858).Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);t.Z=o},73537:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},cardHeaderClasses:function(){return i.Z},getCardHeaderUtilityClass:function(){return i.J}});var r=n(86867),i=n(30968)},44781:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(71657),c=n(58524),u=n(23639),d=n(85893);const h=["children","className","component","image","src","style"],f=(0,c.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})((({ownerState:e})=>(0,i.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"}))),p=["video","audio","picture","iframe","img"],m=["picture","img"],g=o.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiCardMedia"}),{children:o,className:c,component:g="div",image:v,src:y,style:b}=n,w=(0,r.Z)(n,h),x=-1!==p.indexOf(g),_=!x&&v?(0,i.Z)({backgroundImage:`url("${v}")`},b):b,S=(0,i.Z)({},n,{component:g,isMediaComponent:x,isImageComponent:-1!==m.indexOf(g)}),E=(e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e,i={root:["root",n&&"media",r&&"img"]};return(0,a.Z)(i,u.a,t)})(S);return(0,d.jsx)(f,(0,i.Z)({className:(0,s.Z)(E.root,c),as:g,role:!x&&v?"image":void 0,ref:t,style:_,ownerState:S,src:x?v||y:void 0},w,{children:o}))}));t.Z=g},23639:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiCardMedia",e)}const o=(0,n(88858).Z)("MuiCardMedia",["root","media","img"]);t.Z=o},67276:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},cardMediaClasses:function(){return i.Z},getCardMediaUtilityClass:function(){return i.a}});var r=n(44781),i=n(23639)},62623:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(71993),l=n(58524),c=n(71657),u=n(21987),d=n(70975),h=n(85893);const f=["className","raised"],p=(0,l.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),m=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiCard"}),{className:o,raised:l=!1}=n,u=(0,i.Z)(n,f),m=(0,r.Z)({},n,{raised:l}),g=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"]},d.y,t)})(m);return(0,h.jsx)(p,(0,r.Z)({className:(0,s.Z)(g.root,o),elevation:l?8:void 0,ref:t,ownerState:m},u))}));t.Z=m},70975:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiCard",e)}const o=(0,n(88858).Z)("MuiCard",["root"]);t.Z=o},34297:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},cardClasses:function(){return i.Z},getCardUtilityClass:function(){return i.y}});var r=n(62623),i=n(70975)},19809:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=n(63366),i=n(87462),o=n(67294),s=n(71993),a=n(94581),l=n(32207),c=n(82066),u=n(85893),d=(0,c.Z)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),h=(0,c.Z)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),f=(0,c.Z)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),p=n(98216),m=n(71657),g=n(58524),v=n(33631);const y=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],b=(0,g.ZP)(l.Z,{shouldForwardProp:e=>(0,g.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t[`color${(0,p.Z)(n.color)}`]]}})((({theme:e,ownerState:t})=>(0,i.Z)({color:e.palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:(0,a.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${v.Z.checked}, &.${v.Z.indeterminate}`]:{color:e.palette[t.color].main},[`&.${v.Z.disabled}`]:{color:e.palette.action.disabled}}))),w=(0,u.jsx)(h,{}),x=(0,u.jsx)(d,{}),_=(0,u.jsx)(f,{});var S=o.forwardRef((function(e,t){var n,a;const l=(0,m.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:c=w,color:d="primary",icon:h=x,indeterminate:f=!1,indeterminateIcon:g=_,inputProps:S,size:E="medium"}=l,T=(0,r.Z)(l,y),C=f?g:h,M=f?g:c,k=(0,i.Z)({},l,{color:d,indeterminate:f,size:E}),P=(e=>{const{classes:t,indeterminate:n,color:r}=e,o={root:["root",n&&"indeterminate",`color${(0,p.Z)(r)}`]},a=(0,s.Z)(o,v.y,t);return(0,i.Z)({},t,a)})(k);return(0,u.jsx)(b,(0,i.Z)({type:"checkbox",inputProps:(0,i.Z)({"data-indeterminate":f},S),icon:o.cloneElement(C,{fontSize:null!=(n=C.props.fontSize)?n:E}),checkedIcon:o.cloneElement(M,{fontSize:null!=(a=M.props.fontSize)?a:E}),ownerState:k,ref:t},T,{classes:P}))}))},33631:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiCheckbox",e)}const o=(0,n(88858).Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]);t.Z=o},15352:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},checkboxClasses:function(){return i.Z},getCheckboxUtilityClass:function(){return i.y}});var r=n(19809),i=n(33631)},66489:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(70917),c=n(98216),u=n(71657),d=n(58524),h=n(22346),f=n(85893);const p=["className","color","disableShrink","size","style","thickness","value","variant"];let m,g,v,y,b=e=>e;const w=44,x=(0,l.F4)(m||(m=b`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),_=(0,l.F4)(g||(g=b`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),S=(0,d.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,c.Z)(n.color)}`]]}})((({ownerState:e,theme:t})=>(0,i.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:t.palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&(0,l.iv)(v||(v=b`
      animation: ${0} 1.4s linear infinite;
    `),x))),E=(0,d.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),T=(0,d.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,c.Z)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>(0,i.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,l.iv)(y||(y=b`
      animation: ${0} 1.4s ease-in-out infinite;
    `),_))),C=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiCircularProgress"}),{className:o,color:l="primary",disableShrink:d=!1,size:m=40,style:g,thickness:v=3.6,value:y=0,variant:b="indeterminate"}=n,x=(0,r.Z)(n,p),_=(0,i.Z)({},n,{color:l,disableShrink:d,size:m,thickness:v,value:y,variant:b}),C=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e,o={root:["root",n,`color${(0,c.Z)(r)}`],svg:["svg"],circle:["circle",`circle${(0,c.Z)(n)}`,i&&"circleDisableShrink"]};return(0,a.Z)(o,h.C,t)})(_),M={},k={},P={};if("determinate"===b){const e=2*Math.PI*((w-v)/2);M.strokeDasharray=e.toFixed(3),P["aria-valuenow"]=Math.round(y),M.strokeDashoffset=`${((100-y)/100*e).toFixed(3)}px`,k.transform="rotate(-90deg)"}return(0,f.jsx)(S,(0,i.Z)({className:(0,s.Z)(C.root,o),style:(0,i.Z)({width:m,height:m},k,g),ownerState:_,ref:t,role:"progressbar"},P,x,{children:(0,f.jsx)(E,{className:C.svg,ownerState:_,viewBox:"22 22 44 44",children:(0,f.jsx)(T,{className:C.circle,style:M,ownerState:_,cx:w,cy:w,r:(w-v)/2,fill:"none",strokeWidth:v})})}))}));t.Z=C},22346:function(e,t,n){"use strict";n.d(t,{C:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiCircularProgress",e)}const o=(0,n(88858).Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);t.Z=o},7701:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},circularProgressClasses:function(){return i.Z},getCircularProgressUtilityClass:function(){return i.C}});var r=n(66489),i=n(22346)},12509:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(12666),l=n(71993),c=n(58524),u=n(71657),d=n(96067),h=n(30577),f=n(2734),p=n(51705),m=n(78415),g=n(85893);const v=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],y=(0,c.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((({theme:e,ownerState:t})=>(0,i.Z)({height:0,overflow:"hidden",transition:e.transitions.create("height")},"horizontal"===t.orientation&&{height:"auto",width:0,transition:e.transitions.create("width")},"entered"===t.state&&(0,i.Z)({height:"auto",overflow:"visible"},"horizontal"===t.orientation&&{width:"auto"}),"exited"===t.state&&!t.in&&"0px"===t.collapsedSize&&{visibility:"hidden"}))),b=(0,c.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})((({ownerState:e})=>(0,i.Z)({display:"flex",width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"}))),w=(0,c.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})((({ownerState:e})=>(0,i.Z)({width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"}))),x=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiCollapse"}),{addEndListener:c,children:x,className:_,collapsedSize:S="0px",component:E,easing:T,in:C,onEnter:M,onEntered:k,onEntering:P,onExit:A,onExited:I,onExiting:R,orientation:L="vertical",style:O,timeout:N=d.x9.standard,TransitionComponent:D=a.ZP}=n,F=(0,r.Z)(n,v),B=(0,i.Z)({},n,{orientation:L,collapsedSize:S}),Z=(e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,l.Z)(r,m.d,n)})(B),V=(0,f.Z)(),z=o.useRef(),U=o.useRef(null),j=o.useRef(),H="number"==typeof S?`${S}px`:S,G="horizontal"===L,W=G?"width":"height";o.useEffect((()=>()=>{clearTimeout(z.current)}),[]);const $=o.useRef(null),q=(0,p.Z)(t,$),Y=e=>t=>{if(e){const n=$.current;void 0===t?e(n):e(n,t)}},K=()=>U.current?U.current[G?"clientWidth":"clientHeight"]:0,X=Y(((e,t)=>{U.current&&G&&(U.current.style.position="absolute"),e.style[W]=H,M&&M(e,t)})),J=Y(((e,t)=>{const n=K();U.current&&G&&(U.current.style.position="");const{duration:r,easing:i}=(0,h.C)({style:O,timeout:N,easing:T},{mode:"enter"});if("auto"===N){const t=V.transitions.getAutoHeightDuration(n);e.style.transitionDuration=`${t}ms`,j.current=t}else e.style.transitionDuration="string"==typeof r?r:`${r}ms`;e.style[W]=`${n}px`,e.style.transitionTimingFunction=i,P&&P(e,t)})),Q=Y(((e,t)=>{e.style[W]="auto",k&&k(e,t)})),ee=Y((e=>{e.style[W]=`${K()}px`,A&&A(e)})),te=Y(I),ne=Y((e=>{const t=K(),{duration:n,easing:r}=(0,h.C)({style:O,timeout:N,easing:T},{mode:"exit"});if("auto"===N){const n=V.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,j.current=n}else e.style.transitionDuration="string"==typeof n?n:`${n}ms`;e.style[W]=H,e.style.transitionTimingFunction=r,R&&R(e)}));return(0,g.jsx)(D,(0,i.Z)({in:C,onEnter:X,onEntered:Q,onEntering:J,onExit:ee,onExited:te,onExiting:ne,addEndListener:e=>{"auto"===N&&(z.current=setTimeout(e,j.current||0)),c&&c($.current,e)},nodeRef:$,timeout:"auto"===N?null:N},F,{children:(e,t)=>(0,g.jsx)(y,(0,i.Z)({as:E,className:(0,s.Z)(Z.root,_,{entered:Z.entered,exited:!C&&"0px"===H&&Z.hidden}[e]),style:(0,i.Z)({[G?"minWidth":"minHeight"]:H},O),ownerState:(0,i.Z)({},B,{state:e}),ref:q},t,{children:(0,g.jsx)(b,{ownerState:(0,i.Z)({},B,{state:e}),className:Z.wrapper,ref:U,children:(0,g.jsx)(w,{ownerState:(0,i.Z)({},B,{state:e}),className:Z.wrapperInner,children:x})})}))}))}));x.muiSupportAuto=!0,t.Z=x},78415:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiCollapse",e)}const o=(0,n(88858).Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);t.Z=o},55435:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},collapseClasses:function(){return i.Z},getCollapseUtilityClass:function(){return i.d}});var r=n(12509),i=n(78415)},67720:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(94581),c=n(58524),u=n(71657),d=n(35097),h=n(85893);const f=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],p=(0,c.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((({theme:e,ownerState:t})=>(0,i.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:e.palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:(0,l.Fq)(e.palette.divider,.08)},"inset"===t.variant&&{marginLeft:72},"middle"===t.variant&&"horizontal"===t.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===t.variant&&"vertical"===t.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===t.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"})),(({theme:e,ownerState:t})=>(0,i.Z)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${e.palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}})),(({theme:e,ownerState:t})=>(0,i.Z)({},t.children&&"vertical"===t.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${e.palette.divider}`,transform:"translateX(0%)"}})),(({ownerState:e})=>(0,i.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}}))),m=(0,c.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((({theme:e,ownerState:t})=>(0,i.Z)({display:"inline-block",paddingLeft:e.spacing(1.2),paddingRight:e.spacing(1.2)},"vertical"===t.orientation&&{paddingTop:e.spacing(1.2),paddingBottom:e.spacing(1.2)}))),g=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiDivider"}),{absolute:o=!1,children:l,className:c,component:g=(l?"div":"hr"),flexItem:v=!1,light:y=!1,orientation:b="horizontal",role:w=("hr"!==g?"separator":void 0),textAlign:x="center",variant:_="fullWidth"}=n,S=(0,r.Z)(n,f),E=(0,i.Z)({},n,{absolute:o,component:g,flexItem:v,light:y,orientation:b,role:w,textAlign:x,variant:_}),T=(e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:o,orientation:s,textAlign:l,variant:c}=e,u={root:["root",t&&"absolute",c,o&&"light","vertical"===s&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===s&&"withChildrenVertical","right"===l&&"vertical"!==s&&"textAlignRight","left"===l&&"vertical"!==s&&"textAlignLeft"],wrapper:["wrapper","vertical"===s&&"wrapperVertical"]};return(0,a.Z)(u,d.V,r)})(E);return(0,h.jsx)(p,(0,i.Z)({as:g,className:(0,s.Z)(T.root,c),role:w,ref:t,ownerState:E},S,{children:l?(0,h.jsx)(m,{className:T.wrapper,ownerState:E,children:l}):null}))}));t.Z=g},35097:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiDivider",e)}const o=(0,n(88858).Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=o},79540:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},dividerClasses:function(){return i.Z},getDividerUtilityClass:function(){return i.V}});var r=n(67720),i=n(35097)},16628:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(12666),a=n(96067),l=n(2734),c=n(30577),u=n(51705),d=n(85893);const h=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],f={entering:{opacity:1},entered:{opacity:1}},p={enter:a.x9.enteringScreen,exit:a.x9.leavingScreen},m=o.forwardRef((function(e,t){const{addEndListener:n,appear:a=!0,children:m,easing:g,in:v,onEnter:y,onEntered:b,onEntering:w,onExit:x,onExited:_,onExiting:S,style:E,timeout:T=p,TransitionComponent:C=s.ZP}=e,M=(0,i.Z)(e,h),k=(0,l.Z)(),P=o.useRef(null),A=(0,u.Z)(m.ref,t),I=(0,u.Z)(P,A),R=e=>t=>{if(e){const n=P.current;void 0===t?e(n):e(n,t)}},L=R(w),O=R(((e,t)=>{(0,c.n)(e);const n=(0,c.C)({style:E,timeout:T,easing:g},{mode:"enter"});e.style.webkitTransition=k.transitions.create("opacity",n),e.style.transition=k.transitions.create("opacity",n),y&&y(e,t)})),N=R(b),D=R(S),F=R((e=>{const t=(0,c.C)({style:E,timeout:T,easing:g},{mode:"exit"});e.style.webkitTransition=k.transitions.create("opacity",t),e.style.transition=k.transitions.create("opacity",t),x&&x(e)})),B=R(_);return(0,d.jsx)(C,(0,r.Z)({appear:a,in:v,nodeRef:P,onEnter:O,onEntered:N,onEntering:L,onExit:F,onExited:B,onExiting:D,addEndListener:e=>{n&&n(P.current,e)},timeout:T},M,{children:(e,t)=>o.cloneElement(m,(0,r.Z)({style:(0,r.Z)({opacity:0,visibility:"exited"!==e||v?void 0:"hidden"},f[e],E,m.props.style),ref:I},t))}))}));t.Z=m},6135:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(59766),a=n(71993),l=n(78543),c=n(58524),u=n(71657),d=n(24707),h=n(85893);const f=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],p=(0,c.ZP)(l.Ej,{shouldForwardProp:e=>(0,c.FO)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...(0,l.Gx)(e,t),!n.disableUnderline&&t.underline]}})((({theme:e,ownerState:t})=>{const n="light"===e.palette.mode,r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return(0,i.Z)({position:"relative",backgroundColor:o,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:o}},[`&.${d.Z.focused}`]:{backgroundColor:o},[`&.${d.Z.disabled}`]:{backgroundColor:n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${e.palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${d.Z.focused}:after`]:{transform:"scaleX(1)"},[`&.${d.Z.error}:after`]:{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${d.Z.disabled}):before`]:{borderBottom:`1px solid ${e.palette.text.primary}`},[`&.${d.Z.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&(0,i.Z)({padding:"25px 12px 8px"},"small"===t.size&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),m=(0,c.ZP)(l.rA,{name:"MuiFilledInput",slot:"Input",overridesResolver:l._o})((({theme:e,ownerState:t})=>(0,i.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},"small"===t.size&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&"small"===t.size&&{paddingTop:8,paddingBottom:9}))),g=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiFilledInput"}),{components:o={},componentsProps:c,fullWidth:g=!1,inputComponent:v="input",multiline:y=!1,type:b="text"}=n,w=(0,r.Z)(n,f),x=(0,i.Z)({},n,{fullWidth:g,inputComponent:v,multiline:y,type:b}),_=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},o=(0,a.Z)(r,d._,t);return(0,i.Z)({},t,o)})(n),S={root:{ownerState:x},input:{ownerState:x}},E=c?(0,s.Z)(c,S):S;return(0,h.jsx)(l.ZP,(0,i.Z)({components:(0,i.Z)({Root:p,Input:m},o),componentsProps:E,fullWidth:g,inputComponent:v,multiline:y,ref:t,type:b},w,{classes:_}))}));g.muiName="Input",t.Z=g},24707:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiFilledInput",e)}const o=(0,n(88858).Z)("MuiFilledInput",["root","colorSecondary","underline","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","hiddenLabel","input","inputSizeSmall","inputHiddenLabel","inputMultiline","inputAdornedStart","inputAdornedEnd"]);t.Z=o},20847:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(74423),c=n(23972),u=n(98216),d=n(58524),h=n(71657),f=n(46623),p=n(85893);const m=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],g=(0,d.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${f.Z.label}`]:t.label},t.root,t[`labelPlacement${(0,u.Z)(n.labelPlacement)}`]]}})((({theme:e,ownerState:t})=>(0,i.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${f.Z.disabled}`]:{cursor:"default"}},"start"===t.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===t.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===t.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${f.Z.label}`]:{[`&.${f.Z.disabled}`]:{color:e.palette.text.disabled}}}))),v=o.forwardRef((function(e,t){const n=(0,h.Z)({props:e,name:"MuiFormControlLabel"}),{className:d,componentsProps:v={},control:y,disabled:b,disableTypography:w,label:x,labelPlacement:_="end"}=n,S=(0,r.Z)(n,m),E=(0,l.Z)();let T=b;void 0===T&&void 0!==y.props.disabled&&(T=y.props.disabled),void 0===T&&E&&(T=E.disabled);const C={disabled:T};["checked","name","onChange","value","inputRef"].forEach((e=>{void 0===y.props[e]&&void 0!==n[e]&&(C[e]=n[e])}));const M=(0,i.Z)({},n,{disabled:T,label:x,labelPlacement:_}),k=(e=>{const{classes:t,disabled:n,labelPlacement:r}=e,i={root:["root",n&&"disabled",`labelPlacement${(0,u.Z)(r)}`],label:["label",n&&"disabled"]};return(0,a.Z)(i,f.r,t)})(M);return(0,p.jsxs)(g,(0,i.Z)({className:(0,s.Z)(k.root,d),ownerState:M,ref:t},S,{children:[o.cloneElement(y,C),x.type===c.Z||w?x:(0,p.jsx)(c.Z,(0,i.Z)({component:"span",className:k.label},v.typography,{children:x}))]}))}));t.Z=v},46623:function(e,t,n){"use strict";n.d(t,{r:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiFormControlLabel",e)}const o=(0,n(88858).Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label"]);t.Z=o},92037:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},formControlLabelClasses:function(){return i.Z},getFormControlLabelUtilityClasses:function(){return i.r}});var r=n(20847),i=n(46623)},53640:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(71657),c=n(58524),u=n(5108),d=n(98216),h=n(48502),f=n(47167),p=n(47120),m=n(85893);const g=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],v=(0,c.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>(0,i.Z)({},t.root,t[`margin${(0,d.Z)(e.margin)}`],e.fullWidth&&t.fullWidth)})((({ownerState:e})=>(0,i.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"}))),y=o.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiFormControl"}),{children:c,className:y,color:b="primary",component:w="div",disabled:x=!1,error:_=!1,focused:S,fullWidth:E=!1,hiddenLabel:T=!1,margin:C="none",required:M=!1,size:k="medium",variant:P="outlined"}=n,A=(0,r.Z)(n,g),I=(0,i.Z)({},n,{color:b,component:w,disabled:x,error:_,fullWidth:E,hiddenLabel:T,margin:C,required:M,size:k,variant:P}),R=(e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root","none"!==n&&`margin${(0,d.Z)(n)}`,r&&"fullWidth"]};return(0,a.Z)(i,p.e,t)})(I),[L,O]=o.useState((()=>{let e=!1;return c&&o.Children.forEach(c,(t=>{if(!(0,h.Z)(t,["Input","Select"]))return;const n=(0,h.Z)(t,["Select"])?t.props.input:t;n&&(0,u.B7)(n.props)&&(e=!0)})),e})),[N,D]=o.useState((()=>{let e=!1;return c&&o.Children.forEach(c,(t=>{(0,h.Z)(t,["Input","Select"])&&(0,u.vd)(t.props,!0)&&(e=!0)})),e})),[F,B]=o.useState(!1);x&&F&&B(!1);const Z=void 0===S||x?F:S;const V=o.useCallback((()=>{D(!0)}),[]),z={adornedStart:L,setAdornedStart:O,color:b,disabled:x,error:_,filled:N,focused:Z,fullWidth:E,hiddenLabel:T,size:k,onBlur:()=>{B(!1)},onEmpty:o.useCallback((()=>{D(!1)}),[]),onFilled:V,onFocus:()=>{B(!0)},registerEffect:undefined,required:M,variant:P};return(0,m.jsx)(f.Z.Provider,{value:z,children:(0,m.jsx)(v,(0,i.Z)({as:w,ownerState:I,className:(0,s.Z)(R.root,y),ref:t},A,{children:c}))})}));t.Z=y},47167:function(e,t,n){"use strict";const r=n(67294).createContext();t.Z=r},47120:function(e,t,n){"use strict";n.d(t,{e:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiFormControl",e)}const o=(0,n(88858).Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);t.Z=o},15704:function(e,t,n){"use strict";function r({props:e,states:t,muiFormControl:n}){return t.reduce(((t,r)=>(t[r]=e[r],n&&void 0===e[r]&&(t[r]=n[r]),t)),{})}n.d(t,{Z:function(){return r}})},42154:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},useFormControl:function(){return i.Z},formControlClasses:function(){return o.Z},getFormControlUtilityClasses:function(){return o.e}});var r=n(53640),i=n(74423),o=n(47120)},74423:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(67294),i=n(47167);function o(){return r.useContext(i.Z)}},70785:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(58524),c=n(71657),u=n(26501),d=n(85893);const h=["className","row"],f=(0,l.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})((({ownerState:e})=>(0,i.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"}))),p=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiFormGroup"}),{className:o,row:l=!1}=n,p=(0,r.Z)(n,h),m=(0,i.Z)({},n,{row:l}),g=(e=>{const{classes:t,row:n}=e,r={root:["root",n&&"row"]};return(0,a.Z)(r,u.y,t)})(m);return(0,d.jsx)(f,(0,i.Z)({className:(0,s.Z)(g.root,o),ownerState:m,ref:t},p))}));t.Z=p},26501:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiFormGroup",e)}const o=(0,n(88858).Z)("MuiFormGroup",["root","row"]);t.Z=o},74509:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(15704),c=n(74423),u=n(58524),d=n(98216),h=n(90052),f=n(71657),p=n(85893);const m=["children","className","component","disabled","error","filled","focused","margin","required","variant"],g=(0,u.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${(0,d.Z)(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})((({theme:e,ownerState:t})=>(0,i.Z)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${h.Z.disabled}`]:{color:e.palette.text.disabled},[`&.${h.Z.error}`]:{color:e.palette.error.main}},"small"===t.size&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14}))),v=o.forwardRef((function(e,t){const n=(0,f.Z)({props:e,name:"MuiFormHelperText"}),{children:o,className:u,component:v="p"}=n,y=(0,r.Z)(n,m),b=(0,c.Z)(),w=(0,l.Z)({props:n,muiFormControl:b,states:["variant","size","disabled","error","filled","focused","required"]}),x=(0,i.Z)({},n,{component:v,contained:"filled"===w.variant||"outlined"===w.variant,variant:w.variant,size:w.size,disabled:w.disabled,error:w.error,filled:w.filled,focused:w.focused,required:w.required}),_=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:s,focused:l,required:c}=e,u={root:["root",i&&"disabled",o&&"error",r&&`size${(0,d.Z)(r)}`,n&&"contained",l&&"focused",s&&"filled",c&&"required"]};return(0,a.Z)(u,h.E,t)})(x);return(0,p.jsx)(g,(0,i.Z)({as:v,ownerState:x,className:(0,s.Z)(_.root,u),ref:t},y,{children:" "===o?(0,p.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}}):o}))}));t.Z=v},90052:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiFormHelperText",e)}const o=(0,n(88858).Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);t.Z=o},40476:function(e,t,n){"use strict";n.d(t,{D:function(){return g}});var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(15704),c=n(74423),u=n(98216),d=n(71657),h=n(58524),f=n(64748),p=n(85893);const m=["children","className","color","component","disabled","error","filled","focused","required"],g=(0,h.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>(0,i.Z)({},t.root,"secondary"===e.color&&t.colorSecondary,e.filled&&t.filled)})((({theme:e,ownerState:t})=>(0,i.Z)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${f.Z.focused}`]:{color:e.palette[t.color].main},[`&.${f.Z.disabled}`]:{color:e.palette.text.disabled},[`&.${f.Z.error}`]:{color:e.palette.error.main}}))),v=(0,h.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((({theme:e})=>({[`&.${f.Z.error}`]:{color:e.palette.error.main}}))),y=o.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiFormLabel"}),{children:o,className:h,component:y="label"}=n,b=(0,r.Z)(n,m),w=(0,c.Z)(),x=(0,l.Z)({props:n,muiFormControl:w,states:["color","required","focused","disabled","error","filled"]}),_=(0,i.Z)({},n,{color:x.color||"primary",component:y,disabled:x.disabled,error:x.error,filled:x.filled,focused:x.focused,required:x.required}),S=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:s,required:l}=e,c={root:["root",`color${(0,u.Z)(n)}`,i&&"disabled",o&&"error",s&&"filled",r&&"focused",l&&"required"],asterisk:["asterisk",o&&"error"]};return(0,a.Z)(c,f.M,t)})(_);return(0,p.jsxs)(g,(0,i.Z)({as:y,ownerState:_,className:(0,s.Z)(S.root,h),ref:t},b,{children:[o,x.required&&(0,p.jsxs)(v,{ownerState:_,"aria-hidden":!0,className:S.asterisk,children:["","*"]})]}))}));t.Z=y},64748:function(e,t,n){"use strict";n.d(t,{M:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiFormLabel",e)}const o=(0,n(88858).Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]);t.Z=o},99695:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(87462),i=(n(67294),n(70917)),o=n(85893);function s(e){const{styles:t,defaultTheme:n={}}=e,r="function"==typeof t?e=>{return t(null==(r=e)||0===Object.keys(r).length?n:e);var r}:t;return(0,o.jsx)(i.xB,{styles:r})}var a=n(90247);var l=function(e){return(0,o.jsx)(s,(0,r.Z)({},e,{defaultTheme:a.Z}))}},16651:function(e,t,n){"use strict";n.d(t,{ZP:function(){return y}});var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(46663),l=n(87893),c=n(71993),u=n(58524),d=n(71657);var h=o.createContext(),f=n(8673),p=n(85893);const m=["className","columns","columnSpacing","component","container","direction","item","lg","md","rowSpacing","sm","spacing","wrap","xl","xs","zeroMinWidth"];function g(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}const v=(0,u.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{container:n,direction:r,item:i,lg:o,md:s,sm:a,spacing:l,wrap:c,xl:u,xs:d,zeroMinWidth:h}=e.ownerState;return[t.root,n&&t.container,i&&t.item,h&&t.zeroMinWidth,n&&0!==l&&t[`spacing-xs-${String(l)}`],"row"!==r&&t[`direction-xs-${String(r)}`],"wrap"!==c&&t[`wrap-xs-${String(c)}`],!1!==d&&t[`grid-xs-${String(d)}`],!1!==a&&t[`grid-sm-${String(a)}`],!1!==s&&t[`grid-md-${String(s)}`],!1!==o&&t[`grid-lg-${String(o)}`],!1!==u&&t[`grid-xl-${String(u)}`]]}})((({ownerState:e})=>(0,i.Z)({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},"nowrap"===e.wrap&&{flexWrap:"nowrap"},"reverse"===e.wrap&&{flexWrap:"wrap-reverse"})),(function({theme:e,ownerState:t}){return(0,a.k9)({theme:e},t.direction,(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t[`& > .${f.Z.item}`]={maxWidth:"none"}),t}))}),(function({theme:e,ownerState:t}){const{container:n,rowSpacing:r}=t;let i={};return n&&0!==r&&(i=(0,a.k9)({theme:e},r,(t=>{const n=e.spacing(t);return"0px"!==n?{marginTop:`-${g(n)}`,[`& > .${f.Z.item}`]:{paddingTop:g(n)}}:{}}))),i}),(function({theme:e,ownerState:t}){const{container:n,columnSpacing:r}=t;let i={};return n&&0!==r&&(i=(0,a.k9)({theme:e},r,(t=>{const n=e.spacing(t);return"0px"!==n?{width:`calc(100% + ${g(n)})`,marginLeft:`-${g(n)}`,[`& > .${f.Z.item}`]:{paddingLeft:g(n)}}:{}}))),i}),(({theme:e,ownerState:t})=>e.breakpoints.keys.reduce(((n,r)=>(function(e,t,n,r){const o=r[n];if(!o)return;let s={};if(!0===o)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===o)s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const e=(0,a.P$)({values:r.columns,base:t.breakpoints.values}),l=Math.round(o/e[n]*1e8)/1e6+"%";let c={};if(r.container&&r.item&&0!==r.columnSpacing){const e=t.spacing(r.columnSpacing);if("0px"!==e){const t=`calc(${l} + ${g(e)})`;c={flexBasis:t,maxWidth:t}}}s=(0,i.Z)({flexBasis:l,flexGrow:0,maxWidth:l},c)}0===t.breakpoints.values[n]?Object.assign(e,s):e[t.breakpoints.up(n)]=s}(n,e,r,t),n)),{})));var y=o.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiGrid"}),a=(0,l.Z)(n),{className:u,columns:g=12,columnSpacing:y,component:b="div",container:w=!1,direction:x="row",item:_=!1,lg:S=!1,md:E=!1,rowSpacing:T,sm:C=!1,spacing:M=0,wrap:k="wrap",xl:P=!1,xs:A=!1,zeroMinWidth:I=!1}=a,R=(0,r.Z)(a,m),L=T||M,O=y||M,N=o.useContext(h)||g,D=(0,i.Z)({},a,{columns:N,container:w,direction:x,item:_,lg:S,md:E,sm:C,rowSpacing:L,columnSpacing:O,wrap:k,xl:P,xs:A,zeroMinWidth:I}),F=(e=>{const{classes:t,container:n,direction:r,item:i,lg:o,md:s,sm:a,spacing:l,wrap:u,xl:d,xs:h,zeroMinWidth:p}=e,m={root:["root",n&&"container",i&&"item",p&&"zeroMinWidth",n&&0!==l&&`spacing-xs-${String(l)}`,"row"!==r&&`direction-xs-${String(r)}`,"wrap"!==u&&`wrap-xs-${String(u)}`,!1!==h&&`grid-xs-${String(h)}`,!1!==a&&`grid-sm-${String(a)}`,!1!==s&&`grid-md-${String(s)}`,!1!==o&&`grid-lg-${String(o)}`,!1!==d&&`grid-xl-${String(d)}`]};return(0,c.Z)(m,f.H,t)})(D);return B=(0,p.jsx)(v,(0,i.Z)({ownerState:D,className:(0,s.Z)(F.root,u),as:b,ref:t},R)),12!==N?(0,p.jsx)(h.Provider,{value:N,children:B}):B;var B}))},8673:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiGrid",e)}const o=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],s=(0,n(88858).Z)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...o.map((e=>`grid-xs-${e}`)),...o.map((e=>`grid-sm-${e}`)),...o.map((e=>`grid-md-${e}`)),...o.map((e=>`grid-lg-${e}`)),...o.map((e=>`grid-xl-${e}`))]);t.Z=s},672:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.ZP},gridClasses:function(){return i.Z},getGridUtilityClass:function(){return i.H}});var r=n(16651),i=n(8673)},96514:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(12666),a=n(2734),l=n(30577),c=n(51705),u=n(85893);const d=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function h(e){return`scale(${e}, ${e**2})`}const f={entering:{opacity:1,transform:h(1)},entered:{opacity:1,transform:"none"}},p=o.forwardRef((function(e,t){const{addEndListener:n,appear:p=!0,children:m,easing:g,in:v,onEnter:y,onEntered:b,onEntering:w,onExit:x,onExited:_,onExiting:S,style:E,timeout:T="auto",TransitionComponent:C=s.ZP}=e,M=(0,i.Z)(e,d),k=o.useRef(),P=o.useRef(),A=(0,a.Z)(),I=o.useRef(null),R=(0,c.Z)(m.ref,t),L=(0,c.Z)(I,R),O=e=>t=>{if(e){const n=I.current;void 0===t?e(n):e(n,t)}},N=O(w),D=O(((e,t)=>{(0,l.n)(e);const{duration:n,delay:r,easing:i}=(0,l.C)({style:E,timeout:T,easing:g},{mode:"enter"});let o;"auto"===T?(o=A.transitions.getAutoHeightDuration(e.clientHeight),P.current=o):o=n,e.style.transition=[A.transitions.create("opacity",{duration:o,delay:r}),A.transitions.create("transform",{duration:.666*o,delay:r,easing:i})].join(","),y&&y(e,t)})),F=O(b),B=O(S),Z=O((e=>{const{duration:t,delay:n,easing:r}=(0,l.C)({style:E,timeout:T,easing:g},{mode:"exit"});let i;"auto"===T?(i=A.transitions.getAutoHeightDuration(e.clientHeight),P.current=i):i=t,e.style.transition=[A.transitions.create("opacity",{duration:i,delay:n}),A.transitions.create("transform",{duration:.666*i,delay:n||.333*i,easing:r})].join(","),e.style.opacity="0",e.style.transform=h(.75),x&&x(e)})),V=O(_);return o.useEffect((()=>()=>{clearTimeout(k.current)}),[]),(0,u.jsx)(C,(0,r.Z)({appear:p,in:v,nodeRef:I,onEnter:D,onEntered:F,onEntering:N,onExit:Z,onExited:V,onExiting:B,addEndListener:e=>{"auto"===T&&(k.current=setTimeout(e,P.current||0)),n&&n(I.current,e)},timeout:"auto"===T?null:T},M,{children:(e,t)=>o.cloneElement(m,(0,r.Z)({style:(0,r.Z)({opacity:0,transform:h(.75),visibility:"exited"!==e||v?void 0:"hidden"},f[e],E,m.props.style),ref:L},t))}))}));p.muiSupportAuto=!0,t.Z=p},54799:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(94581),c=n(58524),u=n(71657),d=n(96458),h=n(98216),f=n(96239),p=n(85893);const m=["edge","children","className","color","disabled","disableFocusRipple","size"],g=(0,c.ZP)(d.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,h.Z)(n.color)}`],n.edge&&t[`edge${(0,h.Z)(n.edge)}`],t[`size${(0,h.Z)(n.size)}`]]}})((({theme:e,ownerState:t})=>(0,i.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:(0,l.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})),(({theme:e,ownerState:t})=>(0,i.Z)({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&{color:e.palette[t.color].main,"&:hover":{backgroundColor:(0,l.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"small"===t.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${f.Z.disabled}`]:{backgroundColor:"transparent",color:e.palette.action.disabled}}))),v=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiIconButton"}),{edge:o=!1,children:l,className:c,color:d="default",disabled:v=!1,disableFocusRipple:y=!1,size:b="medium"}=n,w=(0,r.Z)(n,m),x=(0,i.Z)({},n,{edge:o,color:d,disabled:v,disableFocusRipple:y,size:b}),_=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e,s={root:["root",n&&"disabled","default"!==r&&`color${(0,h.Z)(r)}`,i&&`edge${(0,h.Z)(i)}`,`size${(0,h.Z)(o)}`]};return(0,a.Z)(s,f.r,t)})(x);return(0,p.jsx)(g,(0,i.Z)({className:(0,s.Z)(_.root,c),centerRipple:!0,focusRipple:!y,disabled:v,ref:t,ownerState:x},w,{children:l}))}));t.Z=v},96239:function(e,t,n){"use strict";n.d(t,{r:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiIconButton",e)}const o=(0,n(88858).Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);t.Z=o},74113:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},iconButtonClasses:function(){return i.Z},getIconButtonUtilityClass:function(){return i.r}});var r=n(54799),i=n(96239)},78543:function(e,t,n){"use strict";n.d(t,{Gx:function(){return T},_o:function(){return C},Ej:function(){return M},rA:function(){return k}});var r=n(63366),i=n(87462),o=n(71387),s=n(67294),a=n(86010),l=n(71993),c=n(49957),u=n(15704),d=n(47167),h=n(74423),f=n(58524),p=n(71657),m=n(2734),g=n(98216),v=n(51705),y=n(58974),b=n(51368),w=n(99695),x=n(5108),_=n(55827),S=n(85893);const E=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],T=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${(0,g.Z)(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},C=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},M=(0,f.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:T})((({theme:e,ownerState:t})=>(0,i.Z)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${_.Z.disabled}`]:{color:e.palette.text.disabled,cursor:"default"}},t.multiline&&(0,i.Z)({padding:"4px 0 5px"},"small"===t.size&&{paddingTop:1}),t.fullWidth&&{width:"100%"}))),k=(0,f.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:C})((({theme:e,ownerState:t})=>{const n="light"===e.palette.mode,r={color:"currentColor",opacity:n?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},o={opacity:"0 !important"},s={opacity:n?.42:.5};return(0,i.Z)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${_.Z.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${_.Z.disabled}`]:{opacity:1,WebkitTextFillColor:e.palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===t.size&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===t.type&&{MozAppearance:"textfield",WebkitAppearance:"textfield"})})),P=(0,S.jsx)(w.Z,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),A=s.forwardRef((function(e,t){const n=(0,p.Z)({props:e,name:"MuiInputBase"}),{"aria-describedby":f,autoComplete:w,autoFocus:T,className:C,components:A={},componentsProps:I={},defaultValue:R,disabled:L,endAdornment:O,fullWidth:N=!1,id:D,inputComponent:F="input",inputProps:B={},inputRef:Z,maxRows:V,minRows:z,multiline:U=!1,name:j,onBlur:H,onChange:G,onClick:W,onFocus:$,onKeyDown:q,onKeyUp:Y,placeholder:K,readOnly:X,renderSuffix:J,rows:Q,startAdornment:ee,type:te="text",value:ne}=n,re=(0,r.Z)(n,E),ie=(0,m.Z)(),oe=null!=B.value?B.value:ne,{current:se}=s.useRef(null!=oe),ae=s.useRef(),le=s.useCallback((e=>{0}),[]),ce=(0,v.Z)(B.ref,le),ue=(0,v.Z)(Z,ce),de=(0,v.Z)(ae,ue),[he,fe]=s.useState(!1),pe=(0,h.Z)();const me=(0,u.Z)({props:n,muiFormControl:pe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});me.focused=pe?pe.focused:he,s.useEffect((()=>{!pe&&L&&he&&(fe(!1),H&&H())}),[pe,L,he,H]);const ge=pe&&pe.onFilled,ve=pe&&pe.onEmpty,ye=s.useCallback((e=>{(0,x.vd)(e)?ge&&ge():ve&&ve()}),[ge,ve]);(0,y.Z)((()=>{se&&ye({value:oe})}),[oe,ye,se]);s.useEffect((()=>{ye(ae.current)}),[]);let be=F,we=B;U&&"input"===be&&(we=Q?(0,i.Z)({type:void 0,minRows:Q,maxRows:Q},we):(0,i.Z)({type:void 0,maxRows:V,minRows:z},we),be=b.Z);s.useEffect((()=>{pe&&pe.setAdornedStart(Boolean(ee))}),[pe,ee]);const xe=(0,i.Z)({},n,{color:me.color||"primary",disabled:me.disabled,endAdornment:O,error:me.error,focused:me.focused,formControl:pe,fullWidth:N,hiddenLabel:me.hiddenLabel,multiline:U,size:me.size,startAdornment:ee,type:te}),_e=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:c,hiddenLabel:u,multiline:d,size:h,startAdornment:f,type:p}=e,m={root:["root",`color${(0,g.Z)(n)}`,r&&"disabled",i&&"error",c&&"fullWidth",s&&"focused",a&&"formControl","small"===h&&"sizeSmall",d&&"multiline",f&&"adornedStart",o&&"adornedEnd",u&&"hiddenLabel"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",d&&"inputMultiline","small"===h&&"inputSizeSmall",u&&"inputHiddenLabel",f&&"inputAdornedStart",o&&"inputAdornedEnd"]};return(0,l.Z)(m,_.u,t)})(xe),Se=A.Root||M,Ee=I.root||{},Te=A.Input||k;return we=(0,i.Z)({},we,I.input),(0,S.jsxs)(s.Fragment,{children:[P,(0,S.jsxs)(Se,(0,i.Z)({},Ee,!(0,c.Z)(Se)&&{ownerState:(0,i.Z)({},xe,Ee.ownerState),theme:ie},{ref:t,onClick:e=>{ae.current&&e.currentTarget===e.target&&ae.current.focus(),W&&W(e)}},re,{className:(0,a.Z)(_e.root,Ee.className,C),children:[ee,(0,S.jsx)(d.Z.Provider,{value:null,children:(0,S.jsx)(Te,(0,i.Z)({ownerState:xe,"aria-invalid":me.error,"aria-describedby":f,autoComplete:w,autoFocus:T,defaultValue:R,disabled:me.disabled,id:D,onAnimationStart:e=>{ye("mui-auto-fill-cancel"===e.animationName?ae.current:{value:"x"})},name:j,placeholder:K,readOnly:X,required:me.required,rows:Q,value:oe,onKeyDown:q,onKeyUp:Y,type:te},we,!(0,c.Z)(Te)&&{as:be,ownerState:(0,i.Z)({},xe,we.ownerState),theme:ie},{ref:de,className:(0,a.Z)(_e.input,we.className,B.className),onBlur:e=>{H&&H(e),B.onBlur&&B.onBlur(e),pe&&pe.onBlur?pe.onBlur(e):fe(!1)},onChange:(e,...t)=>{if(!se){const t=e.target||ae.current;if(null==t)throw new Error((0,o.Z)(1));ye({value:t.value})}B.onChange&&B.onChange(e,...t),G&&G(e,...t)},onFocus:e=>{me.disabled?e.stopPropagation():($&&$(e),B.onFocus&&B.onFocus(e),pe&&pe.onFocus?pe.onFocus(e):fe(!0))}}))}),O,J?J((0,i.Z)({},me,{startAdornment:ee})):null]}))]})}));t.ZP=A},55827:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiInputBase",e)}const o=(0,n(88858).Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);t.Z=o},5108:function(e,t,n){"use strict";function r(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function i(e,t=!1){return e&&(r(e.value)&&""!==e.value||t&&r(e.defaultValue)&&""!==e.defaultValue)}function o(e){return e.startAdornment}n.d(t,{vd:function(){return i},B7:function(){return o}})},60076:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(71993),a=n(15704),l=n(74423),c=n(40476),u=n(64748),d=n(71657),h=n(58524),f=n(56727),p=n(85893);const m=["disableAnimation","margin","shrink","variant"],g=(0,h.ZP)(c.Z,{shouldForwardProp:e=>(0,h.FO)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${u.Z.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})((({theme:e,ownerState:t})=>(0,i.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===t.size&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===t.variant&&(0,i.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&(0,i.Z)({transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===t.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===t.variant&&(0,i.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"})))),v=o.forwardRef((function(e,t){const n=(0,d.Z)({name:"MuiInputLabel",props:e}),{disableAnimation:o=!1,shrink:c}=n,u=(0,r.Z)(n,m),h=(0,l.Z)();let v=c;void 0===v&&h&&(v=h.filled||h.focused||h.adornedStart);const y=(0,a.Z)({props:n,muiFormControl:h,states:["size","variant","required"]}),b=(0,i.Z)({},n,{disableAnimation:o,formControl:h,shrink:v,size:y.size,variant:y.variant,required:y.required}),w=(e=>{const{classes:t,formControl:n,size:r,shrink:o,disableAnimation:a,variant:l,required:c}=e,u={root:["root",n&&"formControl",!a&&"animated",o&&"shrink","small"===r&&"sizeSmall",l],asterisk:[c&&"asterisk"]},d=(0,s.Z)(u,f.Y,t);return(0,i.Z)({},t,d)})(b);return(0,p.jsx)(g,(0,i.Z)({"data-shrink":v,ownerState:b,ref:t},u,{classes:w}))}));t.Z=v},56727:function(e,t,n){"use strict";n.d(t,{Y:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiInputLabel",e)}const o=(0,n(88858).Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);t.Z=o},79332:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(71993),a=n(59766),l=n(78543),c=n(58524),u=n(71657),d=n(7021),h=n(85893);const f=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],p=(0,c.ZP)(l.Ej,{shouldForwardProp:e=>(0,c.FO)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...(0,l.Gx)(e,t),!n.disableUnderline&&t.underline]}})((({theme:e,ownerState:t})=>{const n="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return(0,i.Z)({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${e.palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${d.Z.focused}:after`]:{transform:"scaleX(1)"},[`&.${d.Z.error}:after`]:{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${d.Z.disabled}):before`]:{borderBottom:`2px solid ${e.palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${d.Z.disabled}:before`]:{borderBottomStyle:"dotted"}})})),m=(0,c.ZP)(l.rA,{name:"MuiInput",slot:"Input",overridesResolver:l._o})({}),g=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiInput"}),{disableUnderline:o,components:c={},componentsProps:g,fullWidth:v=!1,inputComponent:y="input",multiline:b=!1,type:w="text"}=n,x=(0,r.Z)(n,f),_=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},o=(0,s.Z)(r,d.l,t);return(0,i.Z)({},t,o)})(n),S={root:{ownerState:{disableUnderline:o}}},E=g?(0,a.Z)(g,S):S;return(0,h.jsx)(l.ZP,(0,i.Z)({components:(0,i.Z)({Root:p,Input:m},c),componentsProps:E,fullWidth:v,inputComponent:y,multiline:b,ref:t,type:w},x,{classes:_}))}));g.muiName="Input",t.Z=g},76171:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},inputClasses:function(){return i.Z},getInputUtilityClass:function(){return i.l}});var r=n(79332),i=n(7021)},7021:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiInput",e)}const o=(0,n(88858).Z)("MuiInput",["root","formControl","focused","disabled","colorSecondary","underline","error","sizeSmall","multiline","fullWidth","input","inputSizeSmall","inputMultiline","inputTypeSearch"]);t.Z=o},68476:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(59773),c=n(58524),u=n(71657),d=n(35058),h=n(85893);const f=["className"],p=(0,c.ZP)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((({ownerState:e})=>(0,i.Z)({minWidth:56,flexShrink:0},"flex-start"===e.alignItems&&{marginTop:8}))),m=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiListItemAvatar"}),{className:c}=n,m=(0,r.Z)(n,f),g=o.useContext(l.Z),v=(0,i.Z)({},n,{alignItems:g.alignItems}),y=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,a.Z)(r,d.d,n)})(v);return(0,h.jsx)(p,(0,i.Z)({className:(0,s.Z)(y.root,c),ownerState:v,ref:t},m))}));t.Z=m},94742:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},listItemAvatarClasses:function(){return i.Z},getListItemAvatarUtilityClass:function(){return i.d}});var r=n(68476),i=n(35058)},35058:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiListItemAvatar",e)}const o=(0,n(88858).Z)("MuiListItemAvatar",["root","alignItemsFlexStart"]);t.Z=o},98619:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(94581),c=n(58524),u=n(71657),d=n(96458),h=n(58974),f=n(51705),p=n(59773),m=n(68686),g=n(85893);const v=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected"],y=(0,c.ZP)(d.Z,{shouldForwardProp:e=>(0,c.FO)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,i.Z)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${m.Z.selected}`]:{backgroundColor:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${m.Z.focusVisible}`]:{backgroundColor:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${m.Z.selected}:hover`]:{backgroundColor:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${m.Z.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`&.${m.Z.disabled}`]:{opacity:e.palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${e.palette.divider}`,backgroundClip:"padding-box"},"flex-start"===t.alignItems&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4}))),b=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiListItemButton"}),{alignItems:l="center",autoFocus:c=!1,component:d="div",children:b,dense:w=!1,disableGutters:x=!1,divider:_=!1,focusVisibleClassName:S,selected:E=!1}=n,T=(0,r.Z)(n,v),C=o.useContext(p.Z),M={dense:w||C.dense||!1,alignItems:l,disableGutters:x},k=o.useRef(null);(0,h.Z)((()=>{c&&k.current&&k.current.focus()}),[c]);const P=(0,i.Z)({},n,{alignItems:l,dense:M.dense,disableGutters:x,divider:_,selected:E}),A=(e=>{const{alignItems:t,classes:n,dense:r,disabled:o,disableGutters:s,divider:l,selected:c}=e,u={root:["root",r&&"dense",!s&&"gutters",l&&"divider",o&&"disabled","flex-start"===t&&"alignItemsFlexStart",c&&"selected"]},d=(0,a.Z)(u,m.t,n);return(0,i.Z)({},n,d)})(P),I=(0,f.Z)(k,t);return(0,g.jsx)(p.Z.Provider,{value:M,children:(0,g.jsx)(y,(0,i.Z)({ref:I,component:d,focusVisibleClassName:(0,s.Z)(A.focusVisible,S),ownerState:P},T,{classes:A,children:b}))})}));t.Z=b},1471:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},listItemButtonClasses:function(){return i.Z},getListItemButtonUtilityClass:function(){return i.t}});var r=n(98619),i=n(68686)},68686:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiListItemButton",e)}const o=(0,n(88858).Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);t.Z=o},84592:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiListItemIcon",e)}const o=(0,n(88858).Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);t.Z=o},79685:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(58524),c=n(71657),u=n(59773),d=n(49126),h=n(85893);const f=["className"],p=(0,l.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})((({ownerState:e})=>(0,i.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0}))),m=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiListItemSecondaryAction"}),{className:l}=n,m=(0,r.Z)(n,f),g=o.useContext(u.Z),v=(0,i.Z)({},n,{disableGutters:g.disableGutters}),y=(e=>{const{disableGutters:t,classes:n}=e,r={root:["root",t&&"disableGutters"]};return(0,a.Z)(r,d.A,n)})(v);return(0,h.jsx)(p,(0,i.Z)({className:(0,s.Z)(y.root,l),ownerState:v,ref:t},m))}));m.muiName="ListItemSecondaryAction",t.Z=m},52451:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},listItemSecondaryActionClasses:function(){return i.Z},getListItemSecondaryActionClassesUtilityClass:function(){return i.A}});var r=n(79685),i=n(49126)},49126:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiListItemSecondaryAction",e)}const o=(0,n(88858).Z)("MuiListItemSecondaryAction",["root","disableGutters"]);t.Z=o},59334:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(23972),c=n(59773),u=n(71657),d=n(58524),h=n(26336),f=n(85893);const p=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],m=(0,d.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${h.Z.primary}`]:t.primary},{[`& .${h.Z.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((({ownerState:e})=>(0,i.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56}))),g=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiListItemText"}),{children:d,className:g,disableTypography:v=!1,inset:y=!1,primary:b,primaryTypographyProps:w,secondary:x,secondaryTypographyProps:_}=n,S=(0,r.Z)(n,p),{dense:E}=o.useContext(c.Z);let T=null!=b?b:d,C=x;const M=(0,i.Z)({},n,{disableTypography:v,inset:y,primary:!!T,secondary:!!C,dense:E}),k=(e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:o}=e,s={root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,a.Z)(s,h.L,t)})(M);return null==T||T.type===l.Z||v||(T=(0,f.jsx)(l.Z,(0,i.Z)({variant:E?"body2":"body1",className:k.primary,component:"span",display:"block"},w,{children:T}))),null==C||C.type===l.Z||v||(C=(0,f.jsx)(l.Z,(0,i.Z)({variant:"body2",className:k.secondary,color:"text.secondary",display:"block"},_,{children:C}))),(0,f.jsxs)(m,(0,i.Z)({className:(0,s.Z)(k.root,g),ownerState:M,ref:t},S,{children:[T,C]}))}));t.Z=g},798:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},listItemTextClasses:function(){return i.Z},getListItemTextUtilityClass:function(){return i.L}});var r=n(59334),i=n(26336)},26336:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiListItemText",e)}const o=(0,n(88858).Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);t.Z=o},29861:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(49957),c=n(94581),u=n(58524),d=n(71657),h=n(96458),f=n(48502),p=n(58974),m=n(51705),g=n(59773),v=n(27037),y=n(68686),b=n(79685),w=n(85893);const x=["className"],_=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected"],S=(0,u.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})((({theme:e,ownerState:t})=>(0,i.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&(0,i.Z)({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${y.Z.root}`]:{paddingRight:48}},{[`&.${v.Z.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`&.${v.Z.selected}`]:{backgroundColor:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${v.Z.focusVisible}`]:{backgroundColor:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${v.Z.disabled}`]:{opacity:e.palette.action.disabledOpacity}},"flex-start"===t.alignItems&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${e.palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${v.Z.selected}:hover`]:{backgroundColor:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48}))),E=(0,u.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),T=o.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiListItem"}),{alignItems:c="center",autoFocus:u=!1,button:y=!1,children:T,className:C,component:M,components:k={},componentsProps:P={},ContainerComponent:A="li",ContainerProps:{className:I}={},dense:R=!1,disabled:L=!1,disableGutters:O=!1,disablePadding:N=!1,divider:D=!1,focusVisibleClassName:F,secondaryAction:B,selected:Z=!1}=n,V=(0,r.Z)(n.ContainerProps,x),z=(0,r.Z)(n,_),U=o.useContext(g.Z),j={dense:R||U.dense||!1,alignItems:c,disableGutters:O},H=o.useRef(null);(0,p.Z)((()=>{u&&H.current&&H.current.focus()}),[u]);const G=o.Children.toArray(T),W=G.length&&(0,f.Z)(G[G.length-1],["ListItemSecondaryAction"]),$=(0,i.Z)({},n,{alignItems:c,autoFocus:u,button:y,dense:j.dense,disabled:L,disableGutters:O,disablePadding:N,divider:D,hasSecondaryAction:W,selected:Z}),q=(e=>{const{alignItems:t,button:n,classes:r,dense:i,disabled:o,disableGutters:s,disablePadding:l,divider:c,hasSecondaryAction:u,selected:d}=e,h={root:["root",i&&"dense",!s&&"gutters",!l&&"padding",c&&"divider",o&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",u&&"secondaryAction",d&&"selected"],container:["container"]};return(0,a.Z)(h,v.o,r)})($),Y=(0,m.Z)(H,t),K=k.Root||S,X=P.root||{},J=(0,i.Z)({className:(0,s.Z)(q.root,X.className,C),disabled:L},z);let Q=M||"li";return y&&(J.component=M||"div",J.focusVisibleClassName=(0,s.Z)(v.Z.focusVisible,F),Q=h.Z),W?(Q=J.component||M?Q:"div","li"===A&&("li"===Q?Q="div":"li"===J.component&&(J.component="div")),(0,w.jsx)(g.Z.Provider,{value:j,children:(0,w.jsxs)(E,(0,i.Z)({as:A,className:(0,s.Z)(q.container,I),ref:Y,ownerState:$},V,{children:[(0,w.jsx)(K,(0,i.Z)({},X,!(0,l.Z)(K)&&{as:Q,ownerState:(0,i.Z)({},$,X.ownerState)},J,{children:G})),G.pop()]}))})):(0,w.jsx)(g.Z.Provider,{value:j,children:(0,w.jsxs)(K,(0,i.Z)({},X,{as:Q,ref:Y,ownerState:$},!(0,l.Z)(K)&&{ownerState:(0,i.Z)({},$,X.ownerState)},J,{children:[G,B&&(0,w.jsx)(b.Z,{children:B})]}))})}));t.ZP=T},47696:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.ZP},listItemClasses:function(){return i.Z},getListItemUtilityClass:function(){return i.o}});var r=n(29861),i=n(27037)},27037:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiListItem",e)}const o=(0,n(88858).Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);t.Z=o},18843:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(58524),c=n(71657),u=n(59773),d=n(72847),h=n(85893);const f=["children","className","component","dense","disablePadding","subheader"],p=(0,l.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((({ownerState:e})=>(0,i.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0}))),m=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiList"}),{children:l,className:m,component:g="ul",dense:v=!1,disablePadding:y=!1,subheader:b}=n,w=(0,r.Z)(n,f),x=o.useMemo((()=>({dense:v})),[v]),_=(0,i.Z)({},n,{component:g,dense:v,disablePadding:y}),S=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e,o={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,a.Z)(o,d.z,t)})(_);return(0,h.jsx)(u.Z.Provider,{value:x,children:(0,h.jsxs)(p,(0,i.Z)({as:g,className:(0,s.Z)(S.root,m),ref:t,ownerState:_},w,{children:[b,l]}))})}));t.Z=m},59773:function(e,t,n){"use strict";const r=n(67294).createContext({});t.Z=r},4153:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},listClasses:function(){return i.Z},getListUtilityClass:function(){return i.z}});var r=n(18843),i=n(72847)},72847:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiList",e)}const o=(0,n(88858).Z)("MuiList",["root","padding","dense","subheader"]);t.Z=o},63931:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(94581),c=n(58524),u=n(71657),d=n(59773),h=n(96458),f=n(58974),p=n(51705),m=n(35097),g=n(84592),v=n(26336),y=n(42429),b=n(85893);const w=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],x=(0,c.ZP)(h.Z,{shouldForwardProp:e=>(0,c.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,i.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${e.palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.Z.selected}`]:{backgroundColor:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${y.Z.focusVisible}`]:{backgroundColor:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${y.Z.selected}:hover`]:{backgroundColor:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${y.Z.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`&.${y.Z.disabled}`]:{opacity:e.palette.action.disabledOpacity},[`& + .${m.Z.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${m.Z.inset}`]:{marginLeft:52},[`& .${v.Z.root}`]:{marginTop:0,marginBottom:0},[`& .${v.Z.inset}`]:{paddingLeft:36},[`& .${g.Z.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,i.Z)({minHeight:36},e.typography.body2,{[`& .${g.Z.root} svg`]:{fontSize:"1.25rem"}})))),_=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:l=!1,component:c="li",dense:h=!1,divider:m=!1,disableGutters:g=!1,focusVisibleClassName:v,role:_="menuitem",tabIndex:S}=n,E=(0,r.Z)(n,w),T=o.useContext(d.Z),C={dense:h||T.dense||!1,disableGutters:g},M=o.useRef(null);(0,f.Z)((()=>{l&&M.current&&M.current.focus()}),[l]);const k=(0,i.Z)({},n,{dense:C.dense,divider:m,disableGutters:g}),P=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:o,selected:s,classes:l}=e,c={root:["root",n&&"dense",t&&"disabled",!o&&"gutters",r&&"divider",s&&"selected"]},u=(0,a.Z)(c,y.K,l);return(0,i.Z)({},l,u)})(n),A=(0,p.Z)(M,t);let I;return n.disabled||(I=void 0!==S?S:-1),(0,b.jsx)(d.Z.Provider,{value:C,children:(0,b.jsx)(x,(0,i.Z)({ref:A,role:_,tabIndex:I,component:c,focusVisibleClassName:(0,s.Z)(P.focusVisible,v)},E,{ownerState:k,classes:P}))})}));t.Z=_},61261:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},getMenuItemUtilityClass:function(){return i.K},menuItemClasses:function(){return i.Z}});var r=n(63931),i=n(42429)},42429:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiMenuItem",e)}const o=(0,n(88858).Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);t.Z=o},83975:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(87462),i=n(63366),o=n(67294),s=(n(59864),n(8038)),a=n(18843),l=n(95806).Z,c=n(51705),u=n(58974),d=n(85893);const h=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function f(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function p(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function m(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function g(e,t,n,r,i,o){let s=!1,a=i(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&m(a,o)&&!t)return a.focus(),!0;a=i(e,a,n)}return!1}var v=o.forwardRef((function(e,t){const{actions:n,autoFocus:v=!1,autoFocusItem:y=!1,children:b,className:w,disabledItemsFocusable:x=!1,disableListWrap:_=!1,onKeyDown:S,variant:E="selectedMenu"}=e,T=(0,i.Z)(e,h),C=o.useRef(null),M=o.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,u.Z)((()=>{v&&C.current.focus()}),[v]),o.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{const n=!C.current.style.width;if(e.clientHeight<C.current.clientHeight&&n){const n=`${l((0,s.Z)(e))}px`;C.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=n,C.current.style.width=`calc(100% + ${n})`}return C.current}})),[]);const k=(0,c.Z)(C,t);let P=-1;o.Children.forEach(b,((e,t)=>{o.isValidElement(e)&&(e.props.disabled||("selectedMenu"===E&&e.props.selected||-1===P)&&(P=t))}));const A=o.Children.map(b,((e,t)=>{if(t===P){const t={};return y&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===E&&(t.tabIndex=0),o.cloneElement(e,t)}return e}));return(0,d.jsx)(a.Z,(0,r.Z)({role:"menu",ref:k,className:w,onKeyDown:e=>{const t=C.current,n=e.key,r=(0,s.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),g(t,r,_,x,f);else if("ArrowUp"===n)e.preventDefault(),g(t,r,_,x,p);else if("Home"===n)e.preventDefault(),g(t,null,_,x,f);else if("End"===n)e.preventDefault(),g(t,null,_,x,p);else if(1===n.length){const i=M.current,o=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(o);const a=r&&!i.repeating&&m(r,i);i.previousKeyMatched&&(a||g(t,r,!1,x,f,i))?e.preventDefault():i.previousKeyMatched=!1}S&&S(e)},tabIndex:v?0:-1},T,{children:A}))}))},24486:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=(n(59864),n(86010)),a=n(71993),l=n(83975),c=n(21987),u=n(90103),d=n(58524),h=n(2734),f=n(71657),p=n(272),m=n(85893);const g=["onEntering"],v=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],y={vertical:"top",horizontal:"right"},b={vertical:"top",horizontal:"left"},w=(0,d.ZP)(u.ZP,{shouldForwardProp:e=>(0,d.FO)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),x=(0,d.ZP)(c.Z,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),_=(0,d.ZP)(l.Z,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),S=o.forwardRef((function(e,t){const n=(0,f.Z)({props:e,name:"MuiMenu"}),{autoFocus:l=!0,children:c,disableAutoFocusItem:u=!1,MenuListProps:d={},onClose:S,open:E,PaperProps:T={},PopoverClasses:C,transitionDuration:M="auto",TransitionProps:{onEntering:k}={},variant:P="selectedMenu"}=n,A=(0,i.Z)(n.TransitionProps,g),I=(0,i.Z)(n,v),R=(0,h.Z)(),L="rtl"===R.direction,O=(0,r.Z)({},n,{autoFocus:l,disableAutoFocusItem:u,MenuListProps:d,onEntering:k,PaperProps:T,transitionDuration:M,TransitionProps:A,variant:P}),N=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"],paper:["paper"],list:["list"]},p.Q,t)})(O),D=l&&!u&&E,F=o.useRef(null);let B=-1;return o.Children.map(c,((e,t)=>{o.isValidElement(e)&&(e.props.disabled||("selectedMenu"===P&&e.props.selected||-1===B)&&(B=t))})),(0,m.jsx)(w,(0,r.Z)({classes:C,onClose:S,anchorOrigin:{vertical:"bottom",horizontal:L?"right":"left"},transformOrigin:L?y:b,PaperProps:(0,r.Z)({component:x},T,{classes:(0,r.Z)({},T.classes,{root:N.paper})}),className:N.root,open:E,ref:t,transitionDuration:M,TransitionProps:(0,r.Z)({onEntering:(e,t)=>{F.current&&F.current.adjustStyleForScrollbar(e,R),k&&k(e,t)}},A),ownerState:O},I,{children:(0,m.jsx)(_,(0,r.Z)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),S&&S(e,"tabKeyDown"))},actions:F,autoFocus:l&&(-1===B||u),autoFocusItem:D,variant:P},d,{className:(0,s.Z)(N.list,d.className),children:c}))}))}));t.Z=S},272:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiMenu",e)}const o=(0,n(88858).Z)("MuiMenu",["root","paper","list"]);t.Z=o},25827:function(e,t,n){"use strict";n.d(t,{W:function(){return p}});var r=n(63366),i=n(87462),o=n(67294),s=n(49957),a=n(40428),l=n(38258),c=n(58524),u=n(71657),d=n(45889),h=n(85893);const f=["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"],p=a.Z,m=(0,c.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((({theme:e,ownerState:t})=>(0,i.Z)({position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"}))),g=(0,c.ZP)(d.Z,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),v=o.forwardRef((function(e,t){var n;const a=(0,u.Z)({name:"MuiModal",props:e}),{BackdropComponent:c=g,closeAfterTransition:d=!1,children:p,components:v={},componentsProps:y={},disableAutoFocus:b=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:x=!1,disablePortal:_=!1,disableRestoreFocus:S=!1,disableScrollLock:E=!1,hideBackdrop:T=!1,keepMounted:C=!1}=a,M=(0,r.Z)(a,f),[k,P]=o.useState(!0),A={closeAfterTransition:d,disableAutoFocus:b,disableEnforceFocus:w,disableEscapeKeyDown:x,disablePortal:_,disableRestoreFocus:S,disableScrollLock:E,hideBackdrop:T,keepMounted:C},I=(e=>e.classes)((0,i.Z)({},a,A,{exited:k}));return(0,h.jsx)(l.Z,(0,i.Z)({components:(0,i.Z)({Root:m},v),componentsProps:{root:(0,i.Z)({},y.root,(!v.Root||!(0,s.Z)(v.Root))&&{ownerState:(0,i.Z)({},null==(n=y.root)?void 0:n.ownerState)})},BackdropComponent:c,onTransitionEnter:()=>P(!1),onTransitionExited:()=>P(!0),ref:t},M,{classes:I},A,{children:p}))}));t.Z=v},97367:function(e,t,n){"use strict";n.r(t),n.d(t,{ModalManager:function(){return r.gk},getModalUtilityClass:function(){return r.xS},modalUnstyledClasses:function(){return r.vk},default:function(){return i.Z},modalClasses:function(){return i.W}});var r=n(59370),i=n(25827)},35262:function(e,t,n){"use strict";n.d(t,{wU:function(){return f},SJ:function(){return m}});var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(98216),c=n(12268),u=n(58524),d=n(85893);const h=["className","disabled","IconComponent","inputRef","variant"],f=({ownerState:e,theme:t})=>(0,i.Z)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:"light"===t.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},[`&.${c.Z.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:t.palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===e.variant&&{"&&&":{paddingRight:32}},"outlined"===e.variant&&{borderRadius:t.shape.borderRadius,"&:focus":{borderRadius:t.shape.borderRadius},"&&&":{paddingRight:32}}),p=(0,u.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:u.FO,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant]]}})(f),m=({ownerState:e,theme:t})=>(0,i.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:t.palette.action.active,[`&.${c.Z.disabled}`]:{color:t.palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7}),g=(0,u.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,l.Z)(n.variant)}`],n.open&&t.iconOpen]}})(m),v=o.forwardRef((function(e,t){const{className:n,disabled:u,IconComponent:f,inputRef:m,variant:v="standard"}=e,y=(0,r.Z)(e,h),b=(0,i.Z)({},e,{disabled:u,variant:v}),w=(e=>{const{classes:t,variant:n,disabled:r,open:i}=e,o={select:["select",n,r&&"disabled"],icon:["icon",`icon${(0,l.Z)(n)}`,i&&"iconOpen",r&&"disabled"]};return(0,a.Z)(o,c.f,t)})(b);return(0,d.jsxs)(o.Fragment,{children:[(0,d.jsx)(p,(0,i.Z)({ownerState:b,className:(0,s.Z)(w.select,n),disabled:u,ref:m||t},y)),e.multiple?null:(0,d.jsx)(g,{as:f,ownerState:b,className:w.icon})]})}));t.ZP=v},12268:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiNativeSelect",e)}const o=(0,n(88858).Z)("MuiNativeSelect",["root","select","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);t.Z=o},32580:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(63366),i=n(87462),o=n(67294),s=n(71993),a=n(58524),l=n(85893);const c=["children","classes","className","label","notched"],u=(0,a.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),d=(0,a.ZP)("legend",{skipSx:!0})((({ownerState:e,theme:t})=>(0,i.Z)({},void 0===e.label&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},void 0!==e.label&&(0,i.Z)({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}))));var h=n(54656),f=n(78543),p=n(71657);const m=["components","fullWidth","inputComponent","label","multiline","notched","type"],g=(0,a.ZP)(f.Ej,{shouldForwardProp:e=>(0,a.FO)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:f.Gx})((({theme:e,ownerState:t})=>{const n="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,i.Z)({position:"relative",borderRadius:e.shape.borderRadius,[`&:hover .${h.Z.notchedOutline}`]:{borderColor:e.palette.text.primary},"@media (hover: none)":{[`&:hover .${h.Z.notchedOutline}`]:{borderColor:n}},[`&.${h.Z.focused} .${h.Z.notchedOutline}`]:{borderColor:e.palette[t.color].main,borderWidth:2},[`&.${h.Z.error} .${h.Z.notchedOutline}`]:{borderColor:e.palette.error.main},[`&.${h.Z.disabled} .${h.Z.notchedOutline}`]:{borderColor:e.palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&(0,i.Z)({padding:"16.5px 14px"},"small"===t.size&&{padding:"8.5px 14px"}))})),v=(0,a.ZP)((function(e){const{className:t,label:n,notched:o}=e,s=(0,r.Z)(e,c),a=(0,i.Z)({},e,{notched:o,label:n});return(0,l.jsx)(u,(0,i.Z)({"aria-hidden":!0,className:t,ownerState:a},s,{children:(0,l.jsx)(d,{ownerState:a,children:n?(0,l.jsx)("span",{children:n}):(0,l.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}})})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((({theme:e})=>({borderColor:"light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}))),y=(0,a.ZP)(f.rA,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:f._o})((({theme:e,ownerState:t})=>(0,i.Z)({padding:"16.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},"small"===t.size&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0}))),b=o.forwardRef((function(e,t){const n=(0,p.Z)({props:e,name:"MuiOutlinedInput"}),{components:o={},fullWidth:a=!1,inputComponent:c="input",label:u,multiline:d=!1,notched:b,type:w="text"}=n,x=(0,r.Z)(n,m),_=(e=>{const{classes:t}=e,n=(0,s.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},h.e,t);return(0,i.Z)({},t,n)})(n);return(0,l.jsx)(f.ZP,(0,i.Z)({components:(0,i.Z)({Root:g,Input:y},o),renderSuffix:e=>(0,l.jsx)(v,{className:_.notchedOutline,label:u,notched:void 0!==b?b:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:a,inputComponent:c,multiline:d,ref:t,type:w},x,{classes:(0,i.Z)({},_,{notchedOutline:null})}))}));b.muiName="Input";var w=b},54656:function(e,t,n){"use strict";n.d(t,{e:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiOutlinedInput",e)}const o=(0,n(88858).Z)("MuiOutlinedInput",["root","colorSecondary","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","notchedOutline","input","inputSizeSmall","inputMultiline","inputAdornedStart","inputAdornedEnd"]);t.Z=o},21987:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(94581),c=n(58524),u=n(71657),d=n(53160),h=n(85893);const f=["className","component","elevation","square","variant"],p=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)},m=(0,c.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})((({theme:e,ownerState:t})=>(0,i.Z)({backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},"outlined"===t.variant&&{border:`1px solid ${e.palette.divider}`},"elevation"===t.variant&&(0,i.Z)({boxShadow:e.shadows[t.elevation]},"dark"===e.palette.mode&&{backgroundImage:`linear-gradient(${(0,l.Fq)("#fff",p(t.elevation))}, ${(0,l.Fq)("#fff",p(t.elevation))})`})))),g=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiPaper"}),{className:o,component:l="div",elevation:c=1,square:p=!1,variant:g="elevation"}=n,v=(0,r.Z)(n,f),y=(0,i.Z)({},n,{component:l,elevation:c,square:p,variant:g}),b=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]};return(0,a.Z)(o,d.J,i)})(y);return(0,h.jsx)(m,(0,i.Z)({as:l,ownerState:y,className:(0,s.Z)(b.root,o),ref:t},v))}));t.Z=g},89376:function(e,t,n){"use strict";n.d(t,{paperClasses:function(){return r.Z},getPaperUtilityClass:function(){return r.J}});var r=n(53160)},53160:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiPaper",e)}const o=(0,n(88858).Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);t.Z=o},90103:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(71993),l=n(58524),c=n(71657),u=n(93881),d=n(8038),h=n(5340),f=n(51705),p=n(96514),m=n(25827),g=n(21987),v=n(3994),y=n(85893);const b=["onEntering"],w=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function x(e,t){let n=0;return"number"==typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function _(e,t){let n=0;return"number"==typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function S(e){return[e.horizontal,e.vertical].map((e=>"number"==typeof e?`${e}px`:e)).join(" ")}function E(e){return"function"==typeof e?e():e}const T=(0,l.ZP)(m.Z,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),C=(0,l.ZP)(g.Z,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),M=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiPopover"}),{action:l,anchorEl:m,anchorOrigin:g={vertical:"top",horizontal:"left"},anchorPosition:M,anchorReference:k="anchorEl",children:P,className:A,container:I,elevation:R=8,marginThreshold:L=16,open:O,PaperProps:N={},transformOrigin:D={vertical:"top",horizontal:"left"},TransitionComponent:F=p.Z,transitionDuration:B="auto",TransitionProps:{onEntering:Z}={}}=n,V=(0,i.Z)(n.TransitionProps,b),z=(0,i.Z)(n,w),U=o.useRef(),j=(0,f.Z)(U,N.ref),H=(0,r.Z)({},n,{anchorOrigin:g,anchorReference:k,elevation:R,marginThreshold:L,PaperProps:N,transformOrigin:D,TransitionComponent:F,transitionDuration:B,TransitionProps:V}),G=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"],paper:["paper"]},v.s,t)})(H),W=o.useCallback((()=>{if("anchorPosition"===k)return M;const e=E(m),t=(e&&1===e.nodeType?e:(0,d.Z)(U.current).body).getBoundingClientRect();return{top:t.top+x(t,g.vertical),left:t.left+_(t,g.horizontal)}}),[m,g.horizontal,g.vertical,M,k]),$=o.useCallback((e=>({vertical:x(e,D.vertical),horizontal:_(e,D.horizontal)})),[D.horizontal,D.vertical]),q=o.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=$(t);if("none"===k)return{top:null,left:null,transformOrigin:S(n)};const r=W();let i=r.top-n.vertical,o=r.left-n.horizontal;const s=i+t.height,a=o+t.width,l=(0,h.Z)(E(m)),c=l.innerHeight-L,u=l.innerWidth-L;if(i<L){const e=i-L;i-=e,n.vertical+=e}else if(s>c){const e=s-c;i-=e,n.vertical+=e}if(o<L){const e=o-L;o-=e,n.horizontal+=e}else if(a>u){const e=a-u;o-=e,n.horizontal+=e}return{top:`${Math.round(i)}px`,left:`${Math.round(o)}px`,transformOrigin:S(n)}}),[m,k,W,$,L]),Y=o.useCallback((()=>{const e=U.current;if(!e)return;const t=q(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}),[q]);o.useEffect((()=>{O&&Y()})),o.useImperativeHandle(l,(()=>O?{updatePosition:()=>{Y()}}:null),[O,Y]),o.useEffect((()=>{if(!O)return;const e=(0,u.Z)((()=>{Y()})),t=(0,h.Z)(m);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[m,O,Y]);let K=B;"auto"!==B||F.muiSupportAuto||(K=void 0);const X=I||(m?(0,d.Z)(E(m)).body:void 0);return(0,y.jsx)(T,(0,r.Z)({BackdropProps:{invisible:!0},className:(0,s.Z)(G.root,A),container:X,open:O,ref:t,ownerState:H},z,{children:(0,y.jsx)(F,(0,r.Z)({appear:!0,in:O,onEntering:(e,t)=>{Z&&Z(e,t),Y()},timeout:K},V,{children:(0,y.jsx)(C,(0,r.Z)({elevation:R},N,{ref:j,className:(0,s.Z)(G.paper,N.className),children:P}))}))}))}));t.ZP=M},3994:function(e,t,n){"use strict";n.d(t,{s:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiPopover",e)}const o=(0,n(88858).Z)("MuiPopover",["root","paper"]);t.Z=o},14594:function(e,t,n){"use strict";n.d(t,{Z:function(){return Me}});var r=n(87462),i=n(63366),o=n(67294);function s(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function a(e){return e instanceof s(e).Element||e instanceof Element}function l(e){return e instanceof s(e).HTMLElement||e instanceof HTMLElement}function c(e){return"undefined"!=typeof ShadowRoot&&(e instanceof s(e).ShadowRoot||e instanceof ShadowRoot)}var u=Math.max,d=Math.min,h=Math.round;function f(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;if(l(e)&&t){var o=e.offsetHeight,s=e.offsetWidth;s>0&&(r=h(n.width)/s||1),o>0&&(i=h(n.height)/o||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function p(e){var t=s(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function m(e){return e?(e.nodeName||"").toLowerCase():null}function g(e){return((a(e)?e.ownerDocument:e.document)||window.document).documentElement}function v(e){return f(g(e)).left+p(e).scrollLeft}function y(e){return s(e).getComputedStyle(e)}function b(e){var t=y(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function w(e,t,n){void 0===n&&(n=!1);var r,i,o=l(t),a=l(t)&&function(e){var t=e.getBoundingClientRect(),n=h(t.width)/e.offsetWidth||1,r=h(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),c=g(t),u=f(e,a),d={scrollLeft:0,scrollTop:0},y={x:0,y:0};return(o||!o&&!n)&&(("body"!==m(t)||b(c))&&(d=(r=t)!==s(r)&&l(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:p(r)),l(t)?((y=f(t,!0)).x+=t.clientLeft,y.y+=t.clientTop):c&&(y.x=v(c))),{x:u.left+d.scrollLeft-y.x,y:u.top+d.scrollTop-y.y,width:u.width,height:u.height}}function x(e){var t=f(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function _(e){return"html"===m(e)?e:e.assignedSlot||e.parentNode||(c(e)?e.host:null)||g(e)}function S(e){return["html","body","#document"].indexOf(m(e))>=0?e.ownerDocument.body:l(e)&&b(e)?e:S(_(e))}function E(e,t){var n;void 0===t&&(t=[]);var r=S(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=s(r),a=i?[o].concat(o.visualViewport||[],b(r)?r:[]):r,l=t.concat(a);return i?l:l.concat(E(_(a)))}function T(e){return["table","td","th"].indexOf(m(e))>=0}function C(e){return l(e)&&"fixed"!==y(e).position?e.offsetParent:null}function M(e){for(var t=s(e),n=C(e);n&&T(n)&&"static"===y(n).position;)n=C(n);return n&&("html"===m(n)||"body"===m(n)&&"static"===y(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&l(e)&&"fixed"===y(e).position)return null;for(var n=_(e);l(n)&&["html","body"].indexOf(m(n))<0;){var r=y(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var k="top",P="bottom",A="right",I="left",R="auto",L=[k,P,A,I],O="start",N="end",D="viewport",F="popper",B=L.reduce((function(e,t){return e.concat([t+"-"+O,t+"-"+N])}),[]),Z=[].concat(L,[R]).reduce((function(e,t){return e.concat([t,t+"-"+O,t+"-"+N])}),[]),V=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function z(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var U={placement:"bottom",modifiers:[],strategy:"absolute"};function j(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function H(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?U:i;return function(e,t,n){void 0===n&&(n=o);var i,s,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},U,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],u=!1,d={state:l,setOptions:function(n){var i="function"==typeof n?n(l.options):n;h(),l.options=Object.assign({},o,l.options,i),l.scrollParents={reference:a(e)?E(e):e.contextElement?E(e.contextElement):[],popper:E(t)};var s=function(e){var t=z(e);return V.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,l.options.modifiers)));return l.orderedModifiers=s.filter((function(e){return e.enabled})),l.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var o=i({state:l,name:t,instance:d,options:r}),s=function(){};c.push(o||s)}})),d.update()},forceUpdate:function(){if(!u){var e=l.elements,t=e.reference,n=e.popper;if(j(t,n)){l.rects={reference:w(t,M(n),"fixed"===l.options.strategy),popper:x(n)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach((function(e){return l.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<l.orderedModifiers.length;r++)if(!0!==l.reset){var i=l.orderedModifiers[r],o=i.fn,s=i.options,a=void 0===s?{}:s,c=i.name;"function"==typeof o&&(l=o({state:l,options:a,name:c,instance:d})||l)}else l.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){d.forceUpdate(),e(l)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(i())}))}))),s}),destroy:function(){h(),u=!0}};if(!j(e,t))return d;function h(){c.forEach((function(e){return e()})),c=[]}return d.setOptions(n).then((function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d}}var G={passive:!0};function W(e){return e.split("-")[0]}function $(e){return e.split("-")[1]}function q(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Y(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?W(i):null,s=i?$(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case k:t={x:a,y:n.y-r.height};break;case P:t={x:a,y:n.y+n.height};break;case A:t={x:n.x+n.width,y:l};break;case I:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?q(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case O:t[c]=t[c]-(n[u]/2-r[u]/2);break;case N:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var K={top:"auto",right:"auto",bottom:"auto",left:"auto"};function X(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,l=e.position,c=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,f=e.isFixed,p=a.x,m=void 0===p?0:p,v=a.y,b=void 0===v?0:v,w="function"==typeof d?d({x:m,y:b}):{x:m,y:b};m=w.x,b=w.y;var x=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),S=I,E=k,T=window;if(u){var C=M(n),R="clientHeight",L="clientWidth";if(C===s(n)&&"static"!==y(C=g(n)).position&&"absolute"===l&&(R="scrollHeight",L="scrollWidth"),C=C,i===k||(i===I||i===A)&&o===N)E=P,b-=(f&&T.visualViewport?T.visualViewport.height:C[R])-r.height,b*=c?1:-1;if(i===I||(i===k||i===P)&&o===N)S=A,m-=(f&&T.visualViewport?T.visualViewport.width:C[L])-r.width,m*=c?1:-1}var O,D=Object.assign({position:l},u&&K),F=!0===d?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:h(t*r)/r||0,y:h(n*r)/r||0}}({x:m,y:b}):{x:m,y:b};return m=F.x,b=F.y,c?Object.assign({},D,((O={})[E]=_?"0":"",O[S]=x?"0":"",O.transform=(T.devicePixelRatio||1)<=1?"translate("+m+"px, "+b+"px)":"translate3d("+m+"px, "+b+"px, 0)",O)):Object.assign({},D,((t={})[E]=_?b+"px":"",t[S]=x?m+"px":"",t.transform="",t))}var J={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,s=Z.reduce((function(e,n){return e[n]=function(e,t,n){var r=W(e),i=[I,k].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[I,A].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}},Q={left:"right",right:"left",bottom:"top",top:"bottom"};function ee(e){return e.replace(/left|right|bottom|top/g,(function(e){return Q[e]}))}var te={start:"end",end:"start"};function ne(e){return e.replace(/start|end/g,(function(e){return te[e]}))}function re(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&c(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ie(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function oe(e,t){return t===D?ie(function(e){var t=s(e),n=g(e),r=t.visualViewport,i=n.clientWidth,o=n.clientHeight,a=0,l=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,l=r.offsetTop)),{width:i,height:o,x:a+v(e),y:l}}(e)):a(t)?function(e){var t=f(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):ie(function(e){var t,n=g(e),r=p(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=u(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=u(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+v(e),l=-r.scrollTop;return"rtl"===y(i||n).direction&&(a+=u(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(g(e)))}function se(e,t,n){var r="clippingParents"===t?function(e){var t=E(_(e)),n=["absolute","fixed"].indexOf(y(e).position)>=0&&l(e)?M(e):e;return a(n)?t.filter((function(e){return a(e)&&re(e,n)&&"body"!==m(e)})):[]}(e):[].concat(t),i=[].concat(r,[n]),o=i[0],s=i.reduce((function(t,n){var r=oe(e,n);return t.top=u(r.top,t.top),t.right=d(r.right,t.right),t.bottom=d(r.bottom,t.bottom),t.left=u(r.left,t.left),t}),oe(e,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ae(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function le(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function ce(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.boundary,s=void 0===o?"clippingParents":o,l=n.rootBoundary,c=void 0===l?D:l,u=n.elementContext,d=void 0===u?F:u,h=n.altBoundary,p=void 0!==h&&h,m=n.padding,v=void 0===m?0:m,y=ae("number"!=typeof v?v:le(v,L)),b=d===F?"reference":F,w=e.rects.popper,x=e.elements[p?b:d],_=se(a(x)?x:x.contextElement||g(e.elements.popper),s,c),S=f(e.elements.reference),E=Y({reference:S,element:w,strategy:"absolute",placement:i}),T=ie(Object.assign({},w,E)),C=d===F?T:S,M={top:_.top-C.top+y.top,bottom:C.bottom-_.bottom+y.bottom,left:_.left-C.left+y.left,right:C.right-_.right+y.right},I=e.modifiersData.offset;if(d===F&&I){var R=I[i];Object.keys(M).forEach((function(e){var t=[A,P].indexOf(e)>=0?1:-1,n=[k,P].indexOf(e)>=0?"y":"x";M[e]+=R[n]*t}))}return M}function ue(e,t,n){return u(e,d(t,n))}var de={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,h=n.altBoundary,f=n.padding,p=n.tether,m=void 0===p||p,g=n.tetherOffset,v=void 0===g?0:g,y=ce(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:h}),b=W(t.placement),w=$(t.placement),_=!w,S=q(b),E="x"===S?"y":"x",T=t.modifiersData.popperOffsets,C=t.rects.reference,R=t.rects.popper,L="function"==typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,N="number"==typeof L?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,F={x:0,y:0};if(T){if(o){var B,Z="y"===S?k:I,V="y"===S?P:A,z="y"===S?"height":"width",U=T[S],j=U+y[Z],H=U-y[V],G=m?-R[z]/2:0,Y=w===O?C[z]:R[z],K=w===O?-R[z]:-C[z],X=t.elements.arrow,J=m&&X?x(X):{width:0,height:0},Q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ee=Q[Z],te=Q[V],ne=ue(0,C[z],J[z]),re=_?C[z]/2-G-ne-ee-N.mainAxis:Y-ne-ee-N.mainAxis,ie=_?-C[z]/2+G+ne+te+N.mainAxis:K+ne+te+N.mainAxis,oe=t.elements.arrow&&M(t.elements.arrow),se=oe?"y"===S?oe.clientTop||0:oe.clientLeft||0:0,ae=null!=(B=null==D?void 0:D[S])?B:0,le=U+ie-ae,de=ue(m?d(j,U+re-ae-se):j,U,m?u(H,le):H);T[S]=de,F[S]=de-U}if(a){var he,fe="x"===S?k:I,pe="x"===S?P:A,me=T[E],ge="y"===E?"height":"width",ve=me+y[fe],ye=me-y[pe],be=-1!==[k,I].indexOf(b),we=null!=(he=null==D?void 0:D[E])?he:0,xe=be?ve:me-C[ge]-R[ge]-we+N.altAxis,_e=be?me+C[ge]+R[ge]-we-N.altAxis:ye,Se=m&&be?function(e,t,n){var r=ue(e,t,n);return r>n?n:r}(xe,me,_e):ue(m?xe:ve,me,m?_e:ye);T[E]=Se,F[E]=Se-me}t.modifiersData[r]=F}},requiresIfExists:["offset"]};var he={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=W(n.placement),l=q(a),c=[I,A].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(e,t){return ae("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:le(e,L))}(i.padding,n),d=x(o),h="y"===l?k:I,f="y"===l?P:A,p=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],g=M(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=p/2-m/2,b=u[h],w=v-d[c]-u[f],_=v/2-d[c]/2+y,S=ue(b,_,w),E=l;n.modifiersData[r]=((t={})[E]=S,t.centerOffset=S-_,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&re(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fe(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function pe(e){return[k,A,P,I].some((function(t){return e[t]>=0}))}var me=H({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,l=void 0===a||a,c=s(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach((function(e){e.addEventListener("scroll",n.update,G)})),l&&c.addEventListener("resize",n.update,G),function(){o&&u.forEach((function(e){e.removeEventListener("scroll",n.update,G)})),l&&c.removeEventListener("resize",n.update,G)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Y({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:W(t.placement),variation:$(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,X(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,X(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];l(i)&&m(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});l(r)&&m(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},J,{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=t.options.placement,v=W(g),y=l||(v===g||!p?[ee(g)]:function(e){if(W(e)===R)return[];var t=ee(e);return[ne(e),t,ne(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(W(n)===R?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Z:l,u=$(r),d=u?a?B:B.filter((function(e){return $(e)===u})):L,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var f=h.reduce((function(t,n){return t[n]=ce(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[W(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,x=t.rects.popper,_=new Map,S=!0,E=b[0],T=0;T<b.length;T++){var C=b[T],M=W(C),N=$(C)===O,D=[k,P].indexOf(M)>=0,F=D?"width":"height",V=ce(t,{placement:C,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),z=D?N?A:I:N?P:k;w[F]>x[F]&&(z=ee(z));var U=ee(z),j=[];if(o&&j.push(V[M]<=0),a&&j.push(V[z]<=0,V[U]<=0),j.every((function(e){return e}))){E=C,S=!1;break}_.set(C,j)}if(S)for(var H=function(e){var t=b.find((function(t){var n=_.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return E=t,"break"},G=p?3:1;G>0;G--){if("break"===H(G))break}t.placement!==E&&(t.modifiersData[r]._skip=!0,t.placement=E,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},de,he,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=ce(t,{elementContext:"reference"}),a=ce(t,{altBoundary:!0}),l=fe(s,r),c=fe(a,i,o),u=pe(l),d=pe(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),ge=n(2952),ve=n(59612),ye=n(8038),be=n(51705),we=n(58974),xe=n(85893);const _e=["anchorEl","children","disablePortal","modifiers","open","placement","popperOptions","popperRef","TransitionProps"],Se=["anchorEl","children","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function Ee(e){return"function"==typeof e?e():e}const Te={},Ce=o.forwardRef((function(e,t){const{anchorEl:n,children:s,disablePortal:a,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:h,TransitionProps:f}=e,p=(0,i.Z)(e,_e),m=o.useRef(null),g=(0,be.Z)(m,t),v=o.useRef(null),y=(0,be.Z)(v,h),b=o.useRef(y);(0,we.Z)((()=>{b.current=y}),[y]),o.useImperativeHandle(h,(()=>v.current),[]);const w=function(e,t){if("ltr"===(t&&t.direction||"ltr"))return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(u,(0,ge.Z)()),[x,_]=o.useState(w);o.useEffect((()=>{v.current&&v.current.forceUpdate()})),(0,we.Z)((()=>{if(!n||!c)return;Ee(n);let e=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:e})=>{_(e.placement)}}];null!=l&&(e=e.concat(l)),d&&null!=d.modifiers&&(e=e.concat(d.modifiers));const t=me(Ee(n),m.current,(0,r.Z)({placement:w},d,{modifiers:e}));return b.current(t),()=>{t.destroy(),b.current(null)}}),[n,a,l,c,d,w]);const S={placement:x};return null!==f&&(S.TransitionProps=f),(0,xe.jsx)("div",(0,r.Z)({ref:g,role:"tooltip"},p,{children:"function"==typeof s?s(S):s}))}));var Me=o.forwardRef((function(e,t){const{anchorEl:n,children:s,container:a,disablePortal:l=!1,keepMounted:c=!1,modifiers:u,open:d,placement:h="bottom",popperOptions:f=Te,popperRef:p,style:m,transition:g=!1}=e,v=(0,i.Z)(e,Se),[y,b]=o.useState(!0);if(!c&&!d&&(!g||y))return null;const w=a||(n?(0,ye.Z)(Ee(n)).body:void 0);return(0,xe.jsx)(ve.Z,{disablePortal:l,container:w,children:(0,xe.jsx)(Ce,(0,r.Z)({anchorEl:n,disablePortal:l,modifiers:u,ref:t,open:g?!y:d,placement:h,popperOptions:f,popperRef:p},v,{style:(0,r.Z)({position:"fixed",top:0,left:0,display:d||!c||g?null:"none"},m),TransitionProps:g?{in:d,onEnter:()=>{b(!1)},onExited:()=>{b(!0)}}:null,children:s}))})}))},68061:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(70785),a=n(51705),l=n(49299),c=n(80209),u=n(27909),d=n(85893);const h=["actions","children","defaultValue","name","onChange","value"],f=o.forwardRef((function(e,t){const{actions:n,children:f,defaultValue:p,name:m,onChange:g,value:v}=e,y=(0,i.Z)(e,h),b=o.useRef(null),[w,x]=(0,l.Z)({controlled:v,default:p,name:"RadioGroup"});o.useImperativeHandle(n,(()=>({focus:()=>{let e=b.current.querySelector("input:not(:disabled):checked");e||(e=b.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const _=(0,a.Z)(t,b),S=(0,u.Z)(m);return(0,d.jsx)(c.Z.Provider,{value:{name:S,onChange:e=>{x(e.target.value),g&&g(e,e.target.value)},value:w},children:(0,d.jsx)(s.Z,(0,r.Z)({role:"radiogroup",ref:_},y,{children:f}))})}));t.Z=f},80209:function(e,t,n){"use strict";const r=n(67294).createContext();t.Z=r},94757:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},useRadioGroup:function(){return i.Z}});var r=n(68061),i=n(57707)},57707:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(67294),i=n(80209);function o(){return r.useContext(i.Z)}},21368:function(e,t,n){"use strict";n.d(t,{Z:function(){return M}});var r=n(63366),i=n(87462),o=n(67294),s=n(71993),a=n(94581),l=n(32207),c=n(71657),u=n(82066),d=n(85893),h=(0,u.Z)((0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),f=(0,u.Z)((0,d.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),p=n(58524);const m=(0,p.ZP)("span")({position:"relative",display:"flex"}),g=(0,p.ZP)(h,{skipSx:!0})({transform:"scale(1)"}),v=(0,p.ZP)(f,{skipSx:!0})((({theme:e,ownerState:t})=>(0,i.Z)({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})})));var y=function(e){const{checked:t=!1,classes:n={},fontSize:r}=e,o=(0,i.Z)({},e,{checked:t});return(0,d.jsxs)(m,{className:n.root,ownerState:o,children:[(0,d.jsx)(g,{fontSize:r,className:n.background,ownerState:o}),(0,d.jsx)(v,{fontSize:r,className:n.dot,ownerState:o})]})},b=n(98216),w=n(35893),x=n(57707),_=n(64568);const S=["checked","checkedIcon","color","icon","name","onChange","size"],E=(0,p.ZP)(l.Z,{shouldForwardProp:e=>(0,p.FO)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,b.Z)(n.color)}`]]}})((({theme:e,ownerState:t})=>(0,i.Z)({color:e.palette.text.secondary,"&:hover":{backgroundColor:(0,a.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${_.Z.checked}`]:{color:e.palette[t.color].main}},{[`&.${_.Z.disabled}`]:{color:e.palette.action.disabled}})));const T=(0,d.jsx)(y,{checked:!0}),C=(0,d.jsx)(y,{});var M=o.forwardRef((function(e,t){var n,a;const l=(0,c.Z)({props:e,name:"MuiRadio"}),{checked:u,checkedIcon:h=T,color:f="primary",icon:p=C,name:m,onChange:g,size:v="medium"}=l,y=(0,r.Z)(l,S),M=(0,i.Z)({},l,{color:f,size:v}),k=(e=>{const{classes:t,color:n}=e,r={root:["root",`color${(0,b.Z)(n)}`]};return(0,i.Z)({},t,(0,s.Z)(r,_.l,t))})(M),P=(0,x.Z)();let A=u;const I=(0,w.Z)(g,P&&P.onChange);let R=m;var L,O;return P&&(void 0===A&&(L=P.value,A="object"==typeof(O=l.value)&&null!==O?L===O:String(L)===String(O)),void 0===R&&(R=P.name)),(0,d.jsx)(E,(0,i.Z)({type:"radio",icon:o.cloneElement(p,{fontSize:null!=(n=C.props.fontSize)?n:v}),checkedIcon:o.cloneElement(h,{fontSize:null!=(a=T.props.fontSize)?a:v}),ownerState:M,classes:k,name:R,checked:A,onChange:I,ref:t},y))}))},30297:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},radioClasses:function(){return i.Z},getRadioUtilityClass:function(){return i.l}});var r=n(21368),i=n(64568)},64568:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiRadio",e)}const o=(0,n(88858).Z)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]);t.Z=o},43106:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(59766),l=n(71993),c=n(71387),u=(n(59864),n(8038)),d=n(98216),h=n(24486),f=n(35262),p=n(5108),m=n(58524),g=n(51705),v=n(49299),y=n(95603),b=n(85893);const w=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],x=(0,m.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${y.Z.select}`]:t.select},{[`&.${y.Z.select}`]:t[n.variant]}]}})(f.wU,{[`&.${y.Z.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),_=(0,m.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,d.Z)(n.variant)}`],n.open&&t.iconOpen]}})(f.SJ),S=(0,m.ZP)("input",{shouldForwardProp:e=>(0,m.Dz)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function E(e,t){return"object"==typeof t&&null!==t?e===t:String(e)===String(t)}function T(e){return null==e||"string"==typeof e&&!e.trim()}var C,M,k=o.forwardRef((function(e,t){const{"aria-describedby":n,"aria-label":a,autoFocus:f,autoWidth:m,children:C,className:M,defaultValue:k,disabled:P,displayEmpty:A,IconComponent:I,inputRef:R,labelId:L,MenuProps:O={},multiple:N,name:D,onBlur:F,onChange:B,onClose:Z,onFocus:V,onOpen:z,open:U,readOnly:j,renderValue:H,SelectDisplayProps:G={},tabIndex:W,value:$,variant:q="standard"}=e,Y=(0,i.Z)(e,w),[K,X]=(0,v.Z)({controlled:$,default:k,name:"Select"}),J=o.useRef(null),Q=o.useRef(null),[ee,te]=o.useState(null),{current:ne}=o.useRef(null!=U),[re,ie]=o.useState(),[oe,se]=o.useState(!1),ae=(0,g.Z)(t,R),le=o.useCallback((e=>{Q.current=e,e&&te(e)}),[]);o.useImperativeHandle(ae,(()=>({focus:()=>{Q.current.focus()},node:J.current,value:K})),[K]),o.useEffect((()=>{f&&Q.current.focus()}),[f]),o.useEffect((()=>{const e=(0,u.Z)(Q.current).getElementById(L);if(e){const t=()=>{getSelection().isCollapsed&&Q.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[L]);const ce=(e,t)=>{e?z&&z(t):Z&&Z(t),ne||(ie(m?null:ee.clientWidth),se(e))},ue=o.Children.toArray(C),de=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(N){n=Array.isArray(K)?K.slice():[];const t=K.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),K!==n&&(X(n),B)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:D}}),B(i,e)}N||ce(!1,t)}},he=null!==ee&&(ne?U:oe);let fe,pe;delete Y["aria-invalid"];const me=[];let ge=!1,ve=!1;((0,p.vd)({value:K})||A)&&(H?fe=H(K):ge=!0);const ye=ue.map((e=>{if(!o.isValidElement(e))return null;let t;if(N){if(!Array.isArray(K))throw new Error((0,c.Z)(2));t=K.some((t=>E(t,e.props.value))),t&&ge&&me.push(e.props.children)}else t=E(K,e.props.value),t&&ge&&(pe=e.props.children);return t&&(ve=!0),o.cloneElement(e,{"aria-selected":t?"true":void 0,onClick:de(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));ge&&(fe=N?me.join(", "):pe);let be,we=re;!m&&ne&&ee&&(we=ee.clientWidth),be=void 0!==W?W:P?null:0;const xe=G.id||(D?`mui-component-select-${D}`:void 0),_e=(0,r.Z)({},e,{variant:q,value:K,open:he}),Se=(e=>{const{classes:t,variant:n,disabled:r,open:i}=e,o={select:["select",n,r&&"disabled"],icon:["icon",`icon${(0,d.Z)(n)}`,i&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,l.Z)(o,y.o,t)})(_e);return(0,b.jsxs)(o.Fragment,{children:[(0,b.jsx)(x,(0,r.Z)({ref:le,tabIndex:be,role:"button","aria-disabled":P?"true":void 0,"aria-expanded":he?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[L,xe].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:e=>{if(!j){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),ce(!0,e))}},onMouseDown:P||j?null:e=>{0===e.button&&(e.preventDefault(),Q.current.focus(),ce(!0,e))},onBlur:e=>{!he&&F&&(Object.defineProperty(e,"target",{writable:!0,value:{value:K,name:D}}),F(e))},onFocus:V},G,{ownerState:_e,className:(0,s.Z)(Se.select,M,G.className),id:xe,children:T(fe)?(0,b.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}}):fe})),(0,b.jsx)(S,(0,r.Z)({value:Array.isArray(K)?K.join(","):K,name:D,ref:J,"aria-hidden":!0,onChange:e=>{const t=ue.map((e=>e.props.value)).indexOf(e.target.value);if(-1===t)return;const n=ue[t];X(n.props.value),B&&B(e,n)},tabIndex:-1,disabled:P,className:Se.nativeInput,autoFocus:f,ownerState:_e},Y)),(0,b.jsx)(_,{as:I,className:Se.icon,ownerState:_e}),(0,b.jsx)(h.Z,(0,r.Z)({id:`menu-${D||""}`,anchorEl:ee,open:he,onClose:e=>{ce(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},O,{MenuListProps:(0,r.Z)({"aria-labelledby":L,role:"listbox",disableListWrap:!0},O.MenuListProps),PaperProps:(0,r.Z)({},O.PaperProps,{style:(0,r.Z)({minWidth:we},null!=O.PaperProps?O.PaperProps.style:null)}),children:ye}))]})})),P=n(15704),A=n(74423),I=n(60224),R=n(79332),L=n(6135),O=n(32580),N=n(71657);const D=["autoWidth","children","classes","className","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],F=["root"],B=o.forwardRef((function(e,t){const n=(0,N.Z)({name:"MuiSelect",props:e}),{autoWidth:c=!1,children:u,classes:d={},className:h,displayEmpty:p=!1,IconComponent:m=I.Z,id:v,input:w,inputProps:x,label:_,labelId:S,MenuProps:E,multiple:T=!1,native:B=!1,onClose:Z,onOpen:V,open:z,renderValue:U,SelectDisplayProps:j,variant:H="outlined"}=n,G=(0,i.Z)(n,D),W=B?f.ZP:k,$=(0,A.Z)(),q=(0,P.Z)({props:n,muiFormControl:$,states:["variant"]}).variant||H,Y=w||{standard:C||(C=(0,b.jsx)(R.Z,{})),outlined:(0,b.jsx)(O.Z,{label:_}),filled:M||(M=(0,b.jsx)(L.Z,{}))}[q],K=(e=>{const{classes:t}=e;return(0,l.Z)({root:["root"]},y.o,t)})((0,r.Z)({},n,{classes:d})),X=(0,i.Z)(d,F),J=(0,g.Z)(t,Y.ref);return o.cloneElement(Y,(0,r.Z)({inputComponent:W,inputProps:(0,r.Z)({children:u,IconComponent:m,variant:q,type:void 0,multiple:T},B?{id:v}:{autoWidth:c,displayEmpty:p,labelId:S,MenuProps:E,onClose:Z,onOpen:V,open:z,renderValue:U,SelectDisplayProps:(0,r.Z)({id:v},j)},x,{classes:x?(0,a.Z)(X,x.classes):X},w?w.props.inputProps:{})},T&&B&&"outlined"===q?{notched:!0}:{},{ref:J,className:(0,s.Z)(K.root,Y.props.className,h)},G))}));B.muiName="Select";var Z=B},44025:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},selectClasses:function(){return i.Z},getSelectUtilityClasses:function(){return i.o}});var r=n(43106),i=n(95603)},95603:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiSelect",e)}const o=(0,n(88858).Z)("MuiSelect",["root","select","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);t.Z=o},54776:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(12666),a=n(93881),l=n(51705),c=n(2734),u=n(96067),d=n(30577),h=n(5340),f=n(85893);const p=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function m(e,t,n){var r;const i=function(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=(0,h.Z)(t);let s;if(t.fakeTransform)s=t.fakeTransform;else{const e=o.getComputedStyle(t);s=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let a=0,l=0;if(s&&"none"!==s&&"string"==typeof s){const e=s.split("(")[1].split(")")[0].split(",");a=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?i?`translateX(${i.right+a-r.left}px)`:`translateX(${o.innerWidth+a-r.left}px)`:"right"===e?i?`translateX(-${r.right-i.left-a}px)`:`translateX(-${r.left+r.width-a}px)`:"up"===e?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${o.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}(e,t,"function"==typeof(r=n)?r():r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const g={enter:u.Ui.easeOut,exit:u.Ui.sharp},v={enter:u.x9.enteringScreen,exit:u.x9.leavingScreen},y=o.forwardRef((function(e,t){const{addEndListener:n,appear:u=!0,children:y,container:b,direction:w="down",easing:x=g,in:_,onEnter:S,onEntered:E,onEntering:T,onExit:C,onExited:M,onExiting:k,style:P,timeout:A=v,TransitionComponent:I=s.ZP}=e,R=(0,i.Z)(e,p),L=(0,c.Z)(),O=o.useRef(null),N=(0,l.Z)(y.ref,O),D=(0,l.Z)(N,t),F=e=>t=>{e&&(void 0===t?e(O.current):e(O.current,t))},B=F(((e,t)=>{m(w,e,b),(0,d.n)(e),S&&S(e,t)})),Z=F(((e,t)=>{const n=(0,d.C)({timeout:A,style:P,easing:x},{mode:"enter"});e.style.webkitTransition=L.transitions.create("-webkit-transform",(0,r.Z)({},n)),e.style.transition=L.transitions.create("transform",(0,r.Z)({},n)),e.style.webkitTransform="none",e.style.transform="none",T&&T(e,t)})),V=F(E),z=F(k),U=F((e=>{const t=(0,d.C)({timeout:A,style:P,easing:x},{mode:"exit"});e.style.webkitTransition=L.transitions.create("-webkit-transform",t),e.style.transition=L.transitions.create("transform",t),m(w,e,b),C&&C(e)})),j=F((e=>{e.style.webkitTransition="",e.style.transition="",M&&M(e)})),H=o.useCallback((()=>{O.current&&m(w,O.current,b)}),[w,b]);return o.useEffect((()=>{if(_||"down"===w||"right"===w)return;const e=(0,a.Z)((()=>{O.current&&m(w,O.current,b)})),t=(0,h.Z)(O.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[w,_,b]),o.useEffect((()=>{_||H()}),[_,H]),(0,f.jsx)(I,(0,r.Z)({nodeRef:O,onEnter:B,onEntered:V,onEntering:Z,onExit:U,onExited:j,onExiting:z,addEndListener:e=>{n&&n(O.current,e)},appear:u,in:_,timeout:A},R,{children:(e,t)=>o.cloneElement(y,(0,r.Z)({ref:D,style:(0,r.Z)({visibility:"exited"!==e||_?void 0:"hidden"},P,y.props.style)},t))}))}));t.Z=y},56969:function(e,t,n){"use strict";n.d(t,{TW:function(){return x},l7:function(){return _},_U:function(){return S},Uj:function(){return E},gs:function(){return T},Kq:function(){return C},jz:function(){return M},J$:function(){return k}});var r=n(63366),i=n(87462),o=n(67294),s=n(45697),a=n.n(s),l=n(86010),c=n(88858),u=n(49957),d=n(53256),h=n(55457),f=n(58188),p=n(94581),m=n(71657),g=n(58524),v=n(2734),y=n(98216),b=n(85893);const w=["components","componentsProps","color","size"],x=(0,i.Z)({},d.Z,(0,c.Z)("MuiSlider",["colorPrimary","colorSecondary","thumbColorPrimary","thumbColorSecondary","sizeSmall","thumbSizeSmall"])),_=(0,g.ZP)("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,r=!0===n.marksProp&&null!==n.step?[...Array(Math.floor((n.max-n.min)/n.step)+1)].map(((e,t)=>({value:n.min+n.step*t}))):n.marksProp||[],i=r.length>0&&r.some((e=>e.label));return[t.root,t[`color${(0,y.Z)(n.color)}`],"medium"!==n.size&&t[`size${(0,y.Z)(n.size)}`],i&&t.marked,"vertical"===n.orientation&&t.vertical,"inverted"===n.track&&t.trackInverted,!1===n.track&&t.trackFalse]}})((({theme:e,ownerState:t})=>(0,i.Z)({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette[t.color].main,WebkitTapHighlightColor:"transparent"},"horizontal"===t.orientation&&(0,i.Z)({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},"small"===t.size&&{height:2},t.marked&&{marginBottom:20}),"vertical"===t.orientation&&(0,i.Z)({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},"small"===t.size&&{width:2},t.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${x.disabled}`]:{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},[`&.${x.dragging}`]:{[`& .${x.thumb}, & .${x.track}`]:{transition:"none"}}}))),S=(0,g.ZP)("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})((({ownerState:e})=>(0,i.Z)({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},"horizontal"===e.orientation&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},"vertical"===e.orientation&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},"inverted"===e.track&&{opacity:1}))),E=(0,g.ZP)("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})((({theme:e,ownerState:t})=>{const n="light"===e.palette.mode?(0,p.$n)(e.palette[t.color].main,.62):(0,p._j)(e.palette[t.color].main,.5);return(0,i.Z)({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest})},"small"===t.size&&{border:"none"},"horizontal"===t.orientation&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},"vertical"===t.orientation&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},!1===t.track&&{display:"none"},"inverted"===t.track&&{backgroundColor:n,borderColor:n})})),T=(0,g.ZP)("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${(0,y.Z)(n.color)}`],"medium"!==n.size&&t[`thumbSize${(0,y.Z)(n.size)}`]]}})((({theme:e,ownerState:t})=>(0,i.Z)({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},"small"===t.size&&{width:12,height:12},"horizontal"===t.orientation&&{top:"50%",transform:"translate(-50%, -50%)"},"vertical"===t.orientation&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":(0,i.Z)({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:e.shadows[2]},"small"===t.size&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${x.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${(0,p.Fq)(e.palette[t.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${x.active}`]:{boxShadow:`0px 0px 0px 14px ${(0,p.Fq)(e.palette[t.color].main,.16)}`},[`&.${x.disabled}`]:{"&:hover":{boxShadow:"none"}}}))),C=(0,g.ZP)(h.Z,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})((({theme:e,ownerState:t})=>(0,i.Z)({[`&.${x.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"},zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-10,transformOrigin:"bottom center",transform:"translateY(-100%) scale(0)",position:"absolute",backgroundColor:e.palette.grey[600],borderRadius:2,color:e.palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},"small"===t.size&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"},{"&:before":{position:"absolute",content:'""',width:8,height:8,bottom:0,left:"50%",transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit"}}))),M=(0,g.ZP)("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>(0,g.Dz)(e)&&"markActive"!==e,overridesResolver:(e,t)=>t.mark})((({theme:e,ownerState:t,markActive:n})=>(0,i.Z)({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},"horizontal"===t.orientation&&{top:"50%",transform:"translate(-1px, -50%)"},"vertical"===t.orientation&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:e.palette.background.paper,opacity:.8}))),k=(0,g.ZP)("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>(0,g.Dz)(e)&&"markLabelActive"!==e,overridesResolver:(e,t)=>t.markLabel})((({theme:e,ownerState:t,markLabelActive:n})=>(0,i.Z)({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},"horizontal"===t.orientation&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},"vertical"===t.orientation&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:e.palette.text.primary})));_.propTypes={children:a().node,ownerState:a().shape({"aria-label":a().string,"aria-labelledby":a().string,"aria-valuetext":a().string,classes:a().object,color:a().oneOf(["primary","secondary"]),defaultValue:a().oneOfType([a().arrayOf(a().number),a().number]),disabled:a().bool,getAriaLabel:a().func,getAriaValueText:a().func,isRtl:a().bool,marks:a().oneOfType([a().arrayOf(a().shape({label:a().node,value:a().number.isRequired})),a().bool]),max:a().number,min:a().number,name:a().string,onChange:a().func,onChangeCommitted:a().func,orientation:a().oneOf(["horizontal","vertical"]),scale:a().func,step:a().number,track:a().oneOf(["inverted","normal",!1]),value:a().oneOfType([a().arrayOf(a().number),a().number]),valueLabelDisplay:a().oneOf(["auto","off","on"]),valueLabelFormat:a().oneOfType([a().func,a().string])})};const P=e=>!e||!(0,u.Z)(e),A=o.forwardRef((function(e,t){var n,o,s,a;const c=(0,m.Z)({props:e,name:"MuiSlider"}),u="rtl"===(0,v.Z)().direction,{components:h={},componentsProps:p={},color:g="primary",size:x="medium"}=c,A=(0,r.Z)(c,w),I=(e=>{const{color:t,size:n,classes:r={}}=e;return(0,i.Z)({},r,{root:(0,l.Z)(r.root,(0,d.k)(`color${(0,y.Z)(t)}`),r[`color${(0,y.Z)(t)}`],n&&[(0,d.k)(`size${(0,y.Z)(n)}`),r[`size${(0,y.Z)(n)}`]]),thumb:(0,l.Z)(r.thumb,(0,d.k)(`thumbColor${(0,y.Z)(t)}`),r[`thumbColor${(0,y.Z)(t)}`],n&&[(0,d.k)(`thumbSize${(0,y.Z)(n)}`),r[`thumbSize${(0,y.Z)(n)}`]])})})((0,i.Z)({},c,{color:g,size:x}));return(0,b.jsx)(f.Z,(0,i.Z)({},A,{isRtl:u,components:(0,i.Z)({Root:_,Rail:S,Track:E,Thumb:T,ValueLabel:C,Mark:M,MarkLabel:k},h),componentsProps:(0,i.Z)({},p,{root:(0,i.Z)({},p.root,P(h.Root)&&{ownerState:(0,i.Z)({},null==(n=p.root)?void 0:n.ownerState,{color:g,size:x})}),thumb:(0,i.Z)({},p.thumb,P(h.Thumb)&&{ownerState:(0,i.Z)({},null==(o=p.thumb)?void 0:o.ownerState,{color:g,size:x})}),track:(0,i.Z)({},p.track,P(h.Track)&&{ownerState:(0,i.Z)({},null==(s=p.track)?void 0:s.ownerState,{color:g,size:x})}),valueLabel:(0,i.Z)({},p.valueLabel,P(h.ValueLabel)&&{ownerState:(0,i.Z)({},null==(a=p.valueLabel)?void 0:a.ownerState,{color:g,size:x})})}),classes:I,ref:t}))}));t.ZP=A},66443:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.ZP},SliderMark:function(){return r.jz},SliderMarkLabel:function(){return r.J$},SliderRail:function(){return r._U},SliderRoot:function(){return r.l7},SliderThumb:function(){return r.gs},SliderTrack:function(){return r.Uj},SliderValueLabel:function(){return r.Kq},sliderClasses:function(){return r.TW}});var r=n(56969)},26447:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(46663),a=n(11930),l=n(87893),c=n(59766),u=n(58524),d=n(71657),h=n(85893);const f=["component","direction","spacing","divider","children"];function p(e,t){const n=o.Children.toArray(e).filter(Boolean);return n.reduce(((e,r,i)=>(e.push(r),i<n.length-1&&e.push(o.cloneElement(t,{key:`separator-${i}`})),e)),[])}const m=(0,u.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>[t.root]})((({ownerState:e,theme:t})=>{let n=(0,i.Z)({display:"flex"},(0,s.k9)({theme:t},e.direction,(e=>({flexDirection:e}))));if(e.spacing){const r=(0,a.hB)(t),i=Object.keys(t.breakpoints.values).reduce(((t,n)=>(null==e.spacing[n]&&null==e.direction[n]||(t[n]=!0),t)),{}),o=(0,s.P$)({values:e.direction,base:i}),l=(0,s.P$)({values:e.spacing,base:i}),u=(t,n)=>{return{"& > :not(style) + :not(style)":{margin:0,[`margin${i=n?o[n]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]}`]:(0,a.NA)(r,t)}};var i};n=(0,c.Z)(n,(0,s.k9)({theme:t},l,u))}return n})),g=o.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiStack"}),o=(0,l.Z)(n),{component:s="div",direction:a="column",spacing:c=0,divider:u,children:g}=o,v=(0,r.Z)(o,f),y={direction:a,spacing:c};return(0,h.jsx)(m,(0,i.Z)({as:s,ownerState:y,ref:t},v,{children:u?p(g,u):g}))}));t.Z=g},37938:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z}});var r=n(26447)},2373:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(71993),l=n(98216),c=n(71657),u=n(58524),d=n(62994),h=n(85893);const f=["children","className","color","component","fontSize","htmlColor","titleAccess","viewBox"],p=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${(0,l.Z)(n.color)}`],t[`fontSize${(0,l.Z)(n.fontSize)}`]]}})((({theme:e,ownerState:t})=>{var n,r;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter}),fontSize:{inherit:"inherit",small:e.typography.pxToRem(20),medium:e.typography.pxToRem(24),large:e.typography.pxToRem(35)}[t.fontSize],color:null!=(n=null==(r=e.palette[t.color])?void 0:r.main)?n:{action:e.palette.action.active,disabled:e.palette.action.disabled,inherit:void 0}[t.color]}})),m=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiSvgIcon"}),{children:o,className:u,color:m="inherit",component:g="svg",fontSize:v="medium",htmlColor:y,titleAccess:b,viewBox:w="0 0 24 24"}=n,x=(0,i.Z)(n,f),_=(0,r.Z)({},n,{color:m,component:g,fontSize:v,viewBox:w}),S=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&`color${(0,l.Z)(t)}`,`fontSize${(0,l.Z)(n)}`]};return(0,a.Z)(i,d.h,r)})(_);return(0,h.jsxs)(p,(0,r.Z)({as:g,className:(0,s.Z)(S.root,u),ownerState:_,focusable:"false",viewBox:w,color:y,"aria-hidden":!b||void 0,role:b?"img":void 0,ref:t},x,{children:[o,b?(0,h.jsx)("title",{children:b}):null]}))}));m.muiName="SvgIcon",t.Z=m},62994:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiSvgIcon",e)}const o=(0,n(88858).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);t.Z=o},72643:function(e,t,n){"use strict";var r,i,o=n(63366),s=n(87462),a=n(67294),l=n(86010),c=n(71993),u=n(67070),d=n(56686),h=n(96458),f=n(2734),p=n(71657),m=n(58524),g=n(18941),v=n(85893);const y=["className","direction","orientation","disabled"],b=(0,m.ZP)(h.Z,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})((({ownerState:e})=>(0,s.Z)({width:40,flexShrink:0,opacity:.8,[`&.${g.Z.disabled}`]:{opacity:0}},"vertical"===e.orientation&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}}))),w=a.forwardRef((function(e,t){const n=(0,p.Z)({props:e,name:"MuiTabScrollButton"}),{className:a,direction:h}=n,m=(0,o.Z)(n,y),w="rtl"===(0,f.Z)().direction,x=(0,s.Z)({isRtl:w},n),_=(e=>{const{classes:t,orientation:n,disabled:r}=e,i={root:["root",n,r&&"disabled"]};return(0,c.Z)(i,g.C,t)})(x);return(0,v.jsx)(b,(0,s.Z)({component:"div",className:(0,l.Z)(_.root,a),ref:t,role:null,ownerState:x,tabIndex:null},m,{children:"left"===h?r||(r=(0,v.jsx)(u.Z,{fontSize:"small"})):i||(i=(0,v.jsx)(d.Z,{fontSize:"small"}))}))}));t.Z=w},18941:function(e,t,n){"use strict";n.d(t,{C:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTabScrollButton",e)}const o=(0,n(88858).Z)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]);t.Z=o},75316:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(96458),c=n(98216),u=n(71657),d=n(58524),h=n(21073),f=n(85893);const p=["className","disabled","disableFocusRipple","fullWidth","icon","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],m=(0,d.ZP)(l.Z,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${(0,c.Z)(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})((({theme:e,ownerState:t})=>(0,i.Z)({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",flexDirection:"column",lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,"& > *:first-child":{marginBottom:6}},"inherit"===t.textColor&&{color:"inherit",opacity:.6,[`&.${h.Z.selected}`]:{opacity:1},[`&.${h.Z.disabled}`]:{opacity:e.palette.action.disabledOpacity}},"primary"===t.textColor&&{color:e.palette.text.secondary,[`&.${h.Z.selected}`]:{color:e.palette.primary.main},[`&.${h.Z.disabled}`]:{color:e.palette.text.disabled}},"secondary"===t.textColor&&{color:e.palette.text.secondary,[`&.${h.Z.selected}`]:{color:e.palette.secondary.main},[`&.${h.Z.disabled}`]:{color:e.palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)}))),g=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiTab"}),{className:o,disabled:l=!1,disableFocusRipple:d=!1,fullWidth:g,icon:v,indicator:y,label:b,onChange:w,onClick:x,onFocus:_,selected:S,selectionFollowsFocus:E,textColor:T="inherit",value:C,wrapped:M=!1}=n,k=(0,r.Z)(n,p),P=(0,i.Z)({},n,{disabled:l,disableFocusRipple:d,selected:S,icon:!!v,label:!!b,fullWidth:g,textColor:T,wrapped:M}),A=(e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:o,label:s,selected:l,disabled:u}=e,d={root:["root",o&&s&&"labelIcon",`textColor${(0,c.Z)(n)}`,r&&"fullWidth",i&&"wrapped",l&&"selected",u&&"disabled"]};return(0,a.Z)(d,h.V,t)})(P);return(0,f.jsxs)(m,(0,i.Z)({focusRipple:!d,className:(0,s.Z)(A.root,o),ref:t,role:"tab","aria-selected":S,disabled:l,onClick:e=>{!S&&w&&w(e,C),x&&x(e)},onFocus:e=>{E&&!S&&w&&w(e,C),_&&_(e)},ownerState:P,tabIndex:S?0:-1},k,{children:[v,b,y]}))}));t.Z=g},22092:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},tabClasses:function(){return i.Z},getTabUtilityClass:function(){return i.V}});var r=n(75316),i=n(21073)},21073:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTab",e)}const o=(0,n(88858).Z)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped"]);t.Z=o},58439:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(71993),l=n(44063),c=n(71657),u=n(58524),d=n(17049),h=n(85893);const f=["className","component"],p=(0,u.ZP)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),m={variant:"body"},g="tbody",v=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiTableBody"}),{className:o,component:u=g}=n,v=(0,i.Z)(n,f),y=(0,r.Z)({},n,{component:u}),b=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"]},d.j,t)})(y);return(0,h.jsx)(l.Z.Provider,{value:m,children:(0,h.jsx)(p,(0,r.Z)({className:(0,s.Z)(b.root,o),as:u,ref:t,role:u===g?null:"rowgroup",ownerState:y},v))})}));t.Z=v},7343:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},tableBodyClasses:function(){return i.Z},getTableBodyUtilityClass:function(){return i.j}});var r=n(58439),i=n(17049)},17049:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTableBody",e)}const o=(0,n(88858).Z)("MuiTableBody",["root"]);t.Z=o},98102:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(94581),c=n(98216),u=n(31618),d=n(44063),h=n(71657),f=n(58524),p=n(89755),m=n(85893);const g=["align","className","component","padding","scope","size","sortDirection","variant"],v=(0,f.ZP)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${(0,c.Z)(n.size)}`],"normal"!==n.padding&&t[`padding${(0,c.Z)(n.padding)}`],"inherit"!==n.align&&t[`align${(0,c.Z)(n.align)}`],n.stickyHeader&&t.stickyHeader]}})((({theme:e,ownerState:t})=>(0,i.Z)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:`1px solid\n    ${"light"===e.palette.mode?(0,l.$n)((0,l.Fq)(e.palette.divider,1),.88):(0,l._j)((0,l.Fq)(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},"head"===t.variant&&{color:e.palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},"body"===t.variant&&{color:e.palette.text.primary},"footer"===t.variant&&{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},"small"===t.size&&{padding:"6px 16px",[`&.${p.Z.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===t.padding&&{width:48,padding:"0 0 0 4px"},"none"===t.padding&&{padding:0},"left"===t.align&&{textAlign:"left"},"center"===t.align&&{textAlign:"center"},"right"===t.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===t.align&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:e.palette.background.default}))),y=o.forwardRef((function(e,t){const n=(0,h.Z)({props:e,name:"MuiTableCell"}),{align:l="inherit",className:f,component:y,padding:b,scope:w,size:x,sortDirection:_,variant:S}=n,E=(0,r.Z)(n,g),T=o.useContext(u.Z),C=o.useContext(d.Z),M=C&&"head"===C.variant;let k;k=y||(M?"th":"td");let P=w;!P&&M&&(P="col");const A=S||C&&C.variant,I=(0,i.Z)({},n,{align:l,component:k,padding:b||(T&&T.padding?T.padding:"normal"),size:x||(T&&T.size?T.size:"medium"),sortDirection:_,stickyHeader:"head"===A&&T&&T.stickyHeader,variant:A}),R=(e=>{const{classes:t,variant:n,align:r,padding:i,size:o,stickyHeader:s}=e,l={root:["root",n,s&&"stickyHeader","inherit"!==r&&`align${(0,c.Z)(r)}`,"normal"!==i&&`padding${(0,c.Z)(i)}`,`size${(0,c.Z)(o)}`]};return(0,a.Z)(l,p.U,t)})(I);let L=null;return _&&(L="asc"===_?"ascending":"descending"),(0,m.jsx)(v,(0,i.Z)({as:k,ref:t,className:(0,s.Z)(R.root,f),"aria-sort":L,scope:P,ownerState:I},E))}));t.Z=y},68782:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},tableCellClasses:function(){return i.Z},getTableCellUtilityClass:function(){return i.U}});var r=n(98102),i=n(89755)},89755:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTableCell",e)}const o=(0,n(88858).Z)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]);t.Z=o},4592:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(71993),l=n(71657),c=n(58524),u=n(31774),d=n(85893);const h=["className","component"],f=(0,c.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),p=o.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiTableContainer"}),{className:o,component:c="div"}=n,p=(0,i.Z)(n,h),m=(0,r.Z)({},n,{component:c}),g=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"]},u.n,t)})(m);return(0,d.jsx)(f,(0,r.Z)({ref:t,as:c,className:(0,s.Z)(g.root,o),ownerState:m},p))}));t.Z=p},78935:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},tableContainerClasses:function(){return i.Z},getTableContainerUtilityClass:function(){return i.n}});var r=n(4592),i=n(31774)},31774:function(e,t,n){"use strict";n.d(t,{n:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTableContainer",e)}const o=(0,n(88858).Z)("MuiTableContainer",["root"]);t.Z=o},37858:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(71993),l=n(44063),c=n(71657),u=n(58524),d=n(72447),h=n(85893);const f=["className","component"],p=(0,u.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),m={variant:"head"},g="thead",v=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiTableHead"}),{className:o,component:u=g}=n,v=(0,i.Z)(n,f),y=(0,r.Z)({},n,{component:u}),b=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"]},d.s,t)})(y);return(0,h.jsx)(l.Z.Provider,{value:m,children:(0,h.jsx)(p,(0,r.Z)({as:u,className:(0,s.Z)(b.root,o),ref:t,role:u===g?null:"rowgroup",ownerState:y},v))})}));t.Z=v},29216:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},tableHeadClasses:function(){return i.Z},getTableHeadUtilityClass:function(){return i.s}});var r=n(37858),i=n(72447)},72447:function(e,t,n){"use strict";n.d(t,{s:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTableHead",e)}const o=(0,n(88858).Z)("MuiTableHead",["root"]);t.Z=o},88240:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var r,i,o,s,a,l,c,u,d=n(63366),h=n(87462),f=n(67294),p=n(86010),m=n(71993),g=n(49957),v=n(58524),y=n(71657),b=n(78543),w=n(63931),x=n(43106),_=n(98102),S=n(83808),E=n(67070),T=n(56686),C=n(2734),M=n(54799),k=n(63046),P=n(42989),A=n(85893);const I=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"];var R,L=f.forwardRef((function(e,t){const{backIconButtonProps:n,count:f,getItemAriaLabel:p,nextIconButtonProps:m,onPageChange:g,page:v,rowsPerPage:y,showFirstButton:b,showLastButton:w}=e,x=(0,d.Z)(e,I),_=(0,C.Z)();return(0,A.jsxs)("div",(0,h.Z)({ref:t},x,{children:[b&&(0,A.jsx)(M.Z,{onClick:e=>{g(e,0)},disabled:0===v,"aria-label":p("first",v),title:p("first",v),children:"rtl"===_.direction?r||(r=(0,A.jsx)(k.Z,{})):i||(i=(0,A.jsx)(P.Z,{}))}),(0,A.jsx)(M.Z,(0,h.Z)({onClick:e=>{g(e,v-1)},disabled:0===v,color:"inherit","aria-label":p("previous",v),title:p("previous",v)},n,{children:"rtl"===_.direction?o||(o=(0,A.jsx)(T.Z,{})):s||(s=(0,A.jsx)(E.Z,{}))})),(0,A.jsx)(M.Z,(0,h.Z)({onClick:e=>{g(e,v+1)},disabled:-1!==f&&v>=Math.ceil(f/y)-1,color:"inherit","aria-label":p("next",v),title:p("next",v)},m,{children:"rtl"===_.direction?a||(a=(0,A.jsx)(E.Z,{})):l||(l=(0,A.jsx)(T.Z,{}))})),w&&(0,A.jsx)(M.Z,{onClick:e=>{g(e,Math.max(0,Math.ceil(f/y)-1))},disabled:v>=Math.ceil(f/y)-1,"aria-label":p("last",v),title:p("last",v),children:"rtl"===_.direction?c||(c=(0,A.jsx)(P.Z,{})):u||(u=(0,A.jsx)(k.Z,{}))})]}))})),O=n(27909),N=n(37560);const D=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],F=(0,v.ZP)(_.Z,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({overflow:"auto",color:e.palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}}))),B=(0,v.ZP)(S.Z,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>(0,h.Z)({[`& .${N.Z.actions}`]:t.actions},t.toolbar)})((({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${N.Z.actions}`]:{flexShrink:0,marginLeft:20}}))),Z=(0,v.ZP)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),V=(0,v.ZP)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})((({theme:e})=>(0,h.Z)({},e.typography.body2,{flexShrink:0}))),z=(0,v.ZP)(x.Z,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>(0,h.Z)({[`& .${N.Z.selectIcon}`]:t.selectIcon,[`& .${N.Z.select}`]:t.select},t.input,t.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${N.Z.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),U=(0,v.ZP)(w.Z,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),j=(0,v.ZP)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})((({theme:e})=>(0,h.Z)({},e.typography.body2,{flexShrink:0})));function H({from:e,to:t,count:n}){return`${e}-${t} of ${-1!==n?n:`more than ${t}`}`}function G(e){return`Go to ${e} page`}var W=f.forwardRef((function(e,t){const n=(0,y.Z)({props:e,name:"MuiTablePagination"}),{ActionsComponent:r=L,backIconButtonProps:i,className:o,colSpan:s,component:a=_.Z,count:l,getItemAriaLabel:c=G,labelDisplayedRows:u=H,labelRowsPerPage:v="Rows per page:",nextIconButtonProps:w,onPageChange:x,onRowsPerPageChange:S,page:E,rowsPerPage:T,rowsPerPageOptions:C=[10,25,50,100],SelectProps:M={},showFirstButton:k=!1,showLastButton:P=!1}=n,I=(0,d.Z)(n,D),W=n,$=(e=>{const{classes:t}=e;return(0,m.Z)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},N.U,t)})(W),q=M.native?"option":U;let Y;a!==_.Z&&"td"!==a||(Y=s||1e3);const K=(0,O.Z)(M.id),X=(0,O.Z)(M.labelId);return(0,A.jsx)(F,(0,h.Z)({colSpan:Y,ref:t,as:a,ownerState:W,className:(0,p.Z)($.root,o)},I,{children:(0,A.jsxs)(B,{className:$.toolbar,children:[(0,A.jsx)(Z,{className:$.spacer}),C.length>1&&(0,A.jsx)(V,{className:$.selectLabel,id:X,children:v}),C.length>1&&(0,A.jsx)(z,(0,h.Z)({variant:"standard",input:R||(R=(0,A.jsx)(b.ZP,{})),value:T,onChange:S,id:K,labelId:X},M,{classes:(0,h.Z)({},M.classes,{root:(0,p.Z)($.input,$.selectRoot,(M.classes||{}).root),select:(0,p.Z)($.select,(M.classes||{}).select),icon:(0,p.Z)($.selectIcon,(M.classes||{}).icon)}),children:C.map((e=>(0,f.createElement)(q,(0,h.Z)({},!(0,g.Z)(q)&&{ownerState:W},{className:$.menuItem,key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e)))})),(0,A.jsx)(j,{className:$.displayedRows,children:u({from:0===l?0:E*T+1,to:-1===l?(E+1)*T:-1===T?l:Math.min(l,(E+1)*T),count:-1===l?-1:l,page:E})}),(0,A.jsx)(r,{className:$.actions,backIconButtonProps:i,count:l,nextIconButtonProps:w,onPageChange:x,page:E,rowsPerPage:T,showFirstButton:k,showLastButton:P,getItemAriaLabel:c})]})}))}))},25070:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},tablePaginationClasses:function(){return i.Z},getTablePaginationUtilityClass:function(){return i.U}});var r=n(88240),i=n(37560)},37560:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTablePagination",e)}const o=(0,n(88858).Z)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);t.Z=o},75921:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(71993),l=n(94581),c=n(44063),u=n(71657),d=n(58524),h=n(34128),f=n(85893);const p=["className","component","hover","selected"],m=(0,d.ZP)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})((({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${h.Z.hover}:hover`]:{backgroundColor:e.palette.action.hover},[`&.${h.Z.selected}`]:{backgroundColor:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}}))),g="tr",v=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiTableRow"}),{className:l,component:d=g,hover:v=!1,selected:y=!1}=n,b=(0,i.Z)(n,p),w=o.useContext(c.Z),x=(0,r.Z)({},n,{component:d,hover:v,selected:y,head:w&&"head"===w.variant,footer:w&&"footer"===w.variant}),_=(e=>{const{classes:t,selected:n,hover:r,head:i,footer:o}=e,s={root:["root",n&&"selected",r&&"hover",i&&"head",o&&"footer"]};return(0,a.Z)(s,h.G,t)})(x);return(0,f.jsx)(m,(0,r.Z)({as:d,ref:t,className:(0,s.Z)(_.root,l),role:d===g?null:"row",ownerState:x},b))}));t.Z=v},3779:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},tableRowClasses:function(){return i.Z},getTableRowUtilityClass:function(){return i.G}});var r=n(75921),i=n(34128)},34128:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTableRow",e)}const o=(0,n(88858).Z)("MuiTableRow",["root","selected","hover","head","footer"]);t.Z=o},13614:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(31618),c=n(71657),u=n(58524),d=n(39990),h=n(85893);const f=["className","component","padding","size","stickyHeader"],p=(0,u.ZP)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})((({theme:e,ownerState:t})=>(0,i.Z)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,i.Z)({},e.typography.body2,{padding:e.spacing(2),color:e.palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"}))),m="table",g=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiTable"}),{className:u,component:g=m,padding:v="normal",size:y="medium",stickyHeader:b=!1}=n,w=(0,r.Z)(n,f),x=(0,i.Z)({},n,{component:g,padding:v,size:y,stickyHeader:b}),_=(e=>{const{classes:t,stickyHeader:n}=e,r={root:["root",n&&"stickyHeader"]};return(0,a.Z)(r,d.K,t)})(x),S=o.useMemo((()=>({padding:v,size:y,stickyHeader:b})),[v,y,b]);return(0,h.jsx)(l.Z.Provider,{value:S,children:(0,h.jsx)(p,(0,i.Z)({as:g,role:g===m?null:"table",ref:t,className:(0,s.Z)(_.root,u),ownerState:x},w))})}));t.Z=g},31618:function(e,t,n){"use strict";const r=n(67294).createContext();t.Z=r},44063:function(e,t,n){"use strict";const r=n(67294).createContext();t.Z=r},8319:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},tableClasses:function(){return i.Z},getTableUtilityClass:function(){return i.K}});var r=n(13614),i=n(39990)},39990:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTable",e)}const o=(0,n(88858).Z)("MuiTable",["root","stickyHeader"]);t.Z=o},37672:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var r=n(63366),i=n(87462),o=n(67294),s=(n(59864),n(86010)),a=n(71993),l=n(58524),c=n(71657),u=n(2734),d=n(93881);let h;function f(){if(h)return h;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),h="reverse",e.scrollLeft>0?h="default":(e.scrollLeft=1,0===e.scrollLeft&&(h="negative")),document.body.removeChild(e),h}function p(e,t){const n=e.scrollLeft;if("rtl"!==t)return n;switch(f()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function m(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}var g=n(5340),v=n(85893);const y=["onChange"],b={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};var w=n(72643),x=n(2068),_=n(90852),S=n(8038);const E=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],T=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,C=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,M=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}const t=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!t)return void i.focus();i=n(e,i)}},k=(0,l.ZP)("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${_.Z.scrollButtons}`]:t.scrollButtons},{[`& .${_.Z.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})((({ownerState:e,theme:t})=>(0,i.Z)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${_.Z.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}}))),P=(0,l.ZP)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})((({ownerState:e})=>(0,i.Z)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"}))),A=(0,l.ZP)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})((({ownerState:e})=>(0,i.Z)({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"}))),I=(0,l.ZP)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})((({ownerState:e,theme:t})=>(0,i.Z)({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},"primary"===e.indicatorColor&&{backgroundColor:t.palette.primary.main},"secondary"===e.indicatorColor&&{backgroundColor:t.palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0}))),R=(0,l.ZP)((function(e){const{onChange:t}=e,n=(0,r.Z)(e,y),s=o.useRef(),a=o.useRef(null),l=()=>{s.current=a.current.offsetHeight-a.current.clientHeight};return o.useEffect((()=>{const e=(0,d.Z)((()=>{const e=s.current;l(),e!==s.current&&t(s.current)})),n=(0,g.Z)(a.current);return n.addEventListener("resize",e),()=>{e.clear(),n.removeEventListener("resize",e)}}),[t]),o.useEffect((()=>{l(),t(s.current)}),[t]),(0,v.jsx)("div",(0,i.Z)({style:b,ref:a},n))}),{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),L={};var O=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiTabs"}),l=(0,u.Z)(),h="rtl"===l.direction,{"aria-label":y,"aria-labelledby":b,action:O,centered:N=!1,children:D,className:F,component:B="div",allowScrollButtonsMobile:Z=!1,indicatorColor:V="primary",onChange:z,orientation:U="horizontal",ScrollButtonComponent:j=w.Z,scrollButtons:H="auto",selectionFollowsFocus:G,TabIndicatorProps:W={},TabScrollButtonProps:$={},textColor:q="primary",value:Y,variant:K="standard",visibleScrollbar:X=!1}=n,J=(0,r.Z)(n,E),Q="scrollable"===K,ee="vertical"===U,te=ee?"scrollTop":"scrollLeft",ne=ee?"top":"left",re=ee?"bottom":"right",ie=ee?"clientHeight":"clientWidth",oe=ee?"height":"width",se=(0,i.Z)({},n,{component:B,allowScrollButtonsMobile:Z,indicatorColor:V,orientation:U,vertical:ee,scrollButtons:H,textColor:q,variant:K,visibleScrollbar:X,fixed:!Q,hideScrollbar:Q&&!X,scrollableX:Q&&!ee,scrollableY:Q&&ee,centered:N&&!Q,scrollButtonsHideMobile:!Z}),ae=(e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:s,scrollButtonsHideMobile:l,classes:c}=e,u={root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",s&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",l&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]};return(0,a.Z)(u,_.m,c)})(se);const[le,ce]=o.useState(!1),[ue,de]=o.useState(L),[he,fe]=o.useState({start:!1,end:!1}),[pe,me]=o.useState({overflow:"hidden",scrollbarWidth:0}),ge=new Map,ve=o.useRef(null),ye=o.useRef(null),be=()=>{const e=ve.current;let t,n;if(e){const n=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollLeftNormalized:p(e,l.direction),scrollWidth:e.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(e&&!1!==Y){const e=ye.current.children;if(e.length>0){const t=e[ge.get(Y)];0,n=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:n}},we=(0,x.Z)((()=>{const{tabsMeta:e,tabMeta:t}=be();let n,r=0;if(ee)n="top",t&&e&&(r=t.top-e.top+e.scrollTop);else if(n=h?"right":"left",t&&e){const i=h?e.scrollLeftNormalized+e.clientWidth-e.scrollWidth:e.scrollLeft;r=(h?-1:1)*(t[n]-e[n]+i)}const i={[n]:r,[oe]:t?t[oe]:0};if(isNaN(ue[n])||isNaN(ue[oe]))de(i);else{const e=Math.abs(ue[n]-i[n]),t=Math.abs(ue[oe]-i[oe]);(e>=1||t>=1)&&de(i)}})),xe=(e,{animation:t=!0}={})=>{t?function(e,t,n,r={},i=(()=>{})){const{ease:o=m,duration:s=300}=r;let a=null;const l=t[e];let c=!1;const u=()=>{c=!0},d=r=>{if(c)return void i(new Error("Animation cancelled"));null===a&&(a=r);const u=Math.min(1,(r-a)/s);t[e]=o(u)*(n-l)+l,u>=1?requestAnimationFrame((()=>{i(null)})):requestAnimationFrame(d)};l===n?i(new Error("Element already at target position")):requestAnimationFrame(d)}(te,ve.current,e,{duration:l.transitions.duration.standard}):ve.current[te]=e},_e=e=>{let t=ve.current[te];ee?t+=e:(t+=e*(h?-1:1),t*=h&&"reverse"===f()?-1:1),xe(t)},Se=()=>{const e=ve.current[ie];let t=0;const n=Array.from(ye.current.children);for(let r=0;r<n.length;r+=1){const i=n[r];if(t+i[ie]>e)break;t+=i[ie]}return t},Ee=()=>{_e(-1*Se())},Te=()=>{_e(Se())},Ce=o.useCallback((e=>{me({overflow:null,scrollbarWidth:e})}),[]),Me=(0,x.Z)((e=>{const{tabsMeta:t,tabMeta:n}=be();if(n&&t)if(n[ne]<t[ne]){const r=t[te]+(n[ne]-t[ne]);xe(r,{animation:e})}else if(n[re]>t[re]){const r=t[te]+(n[re]-t[re]);xe(r,{animation:e})}})),ke=(0,x.Z)((()=>{if(Q&&!1!==H){const{scrollTop:e,scrollHeight:t,clientHeight:n,scrollWidth:r,clientWidth:i}=ve.current;let o,s;if(ee)o=e>1,s=e<t-n-1;else{const e=p(ve.current,l.direction);o=h?e<r-i-1:e>1,s=h?e>1:e<r-i-1}o===he.start&&s===he.end||fe({start:o,end:s})}}));o.useEffect((()=>{const e=(0,d.Z)((()=>{we(),ke()})),t=(0,g.Z)(ve.current);let n;return t.addEventListener("resize",e),"undefined"!=typeof ResizeObserver&&(n=new ResizeObserver(e),Array.from(ye.current.children).forEach((e=>{n.observe(e)}))),()=>{e.clear(),t.removeEventListener("resize",e),n&&n.disconnect()}}),[we,ke]);const Pe=o.useMemo((()=>(0,d.Z)((()=>{ke()}))),[ke]);o.useEffect((()=>()=>{Pe.clear()}),[Pe]),o.useEffect((()=>{ce(!0)}),[]),o.useEffect((()=>{we(),ke()})),o.useEffect((()=>{Me(L!==ue)}),[Me,ue]),o.useImperativeHandle(O,(()=>({updateIndicator:we,updateScrollButtons:ke})),[we,ke]);const Ae=(0,v.jsx)(I,(0,i.Z)({},W,{className:(0,s.Z)(ae.indicator,W.className),ownerState:se,style:(0,i.Z)({},ue,W.style)}));let Ie=0;const Re=o.Children.map(D,(e=>{if(!o.isValidElement(e))return null;const t=void 0===e.props.value?Ie:e.props.value;ge.set(t,Ie);const n=t===Y;return Ie+=1,o.cloneElement(e,(0,i.Z)({fullWidth:"fullWidth"===K,indicator:n&&!le&&Ae,selected:n,selectionFollowsFocus:G,onChange:z,textColor:q,value:t},1!==Ie||!1!==Y||e.props.tabIndex?{}:{tabIndex:0}))})),Le=(()=>{const e={};e.scrollbarSizeListener=Q?(0,v.jsx)(R,{onChange:Ce,className:(0,s.Z)(ae.scrollableX,ae.hideScrollbar)}):null;const t=he.start||he.end,n=Q&&("auto"===H&&t||!0===H);return e.scrollButtonStart=n?(0,v.jsx)(j,(0,i.Z)({orientation:U,direction:h?"right":"left",onClick:Ee,disabled:!he.start},$,{className:(0,s.Z)(ae.scrollButtons,$.className)})):null,e.scrollButtonEnd=n?(0,v.jsx)(j,(0,i.Z)({orientation:U,direction:h?"left":"right",onClick:Te,disabled:!he.end},$,{className:(0,s.Z)(ae.scrollButtons,$.className)})):null,e})();return(0,v.jsxs)(k,(0,i.Z)({className:(0,s.Z)(ae.root,F),ownerState:se,ref:t,as:B},J,{children:[Le.scrollButtonStart,Le.scrollbarSizeListener,(0,v.jsxs)(P,{className:ae.scroller,ownerState:se,style:{overflow:pe.overflow,[ee?"margin"+(h?"Left":"Right"):"marginBottom"]:X?void 0:-pe.scrollbarWidth},ref:ve,onScroll:Pe,children:[(0,v.jsx)(A,{"aria-label":y,"aria-labelledby":b,"aria-orientation":"vertical"===U?"vertical":null,className:ae.flexContainer,ownerState:se,onKeyDown:e=>{const t=ye.current,n=(0,S.Z)(t).activeElement;if("tab"!==n.getAttribute("role"))return;let r="horizontal"===U?"ArrowLeft":"ArrowUp",i="horizontal"===U?"ArrowRight":"ArrowDown";switch("horizontal"===U&&h&&(r="ArrowRight",i="ArrowLeft"),e.key){case r:e.preventDefault(),M(t,n,C);break;case i:e.preventDefault(),M(t,n,T);break;case"Home":e.preventDefault(),M(t,null,T);break;case"End":e.preventDefault(),M(t,null,C)}},ref:ye,role:"tablist",children:Re}),le&&Ae]}),Le.scrollButtonEnd]}))}))},33217:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},tabsClasses:function(){return i.Z},getTabsUtilityClass:function(){return i.m}});var r=n(37672),i=n(90852)},90852:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTabs",e)}const o=(0,n(88858).Z)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]);t.Z=o},22715:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(71993),l=n(58524),c=n(71657),u=n(79332),d=n(6135),h=n(32580),f=n(60076),p=n(53640),m=n(74509),g=n(43106),v=n(58275),y=n(85893);const b=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],w={standard:u.Z,filled:d.Z,outlined:h.Z},x=(0,l.ZP)(p.Z,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),_=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiTextField"}),{autoComplete:l,autoFocus:u=!1,children:d,className:h,color:p="primary",defaultValue:_,disabled:S=!1,error:E=!1,FormHelperTextProps:T,fullWidth:C=!1,helperText:M,id:k,InputLabelProps:P,inputProps:A,InputProps:I,inputRef:R,label:L,maxRows:O,minRows:N,multiline:D=!1,name:F,onBlur:B,onChange:Z,onFocus:V,placeholder:z,required:U=!1,rows:j,select:H=!1,SelectProps:G,type:W,value:$,variant:q="outlined"}=n,Y=(0,i.Z)(n,b),K=(0,r.Z)({},n,{autoFocus:u,color:p,disabled:S,error:E,fullWidth:C,multiline:D,required:U,select:H,variant:q}),X=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"]},v.I,t)})(K);const J={};if("outlined"===q&&(P&&void 0!==P.shrink&&(J.notched=P.shrink),L)){var Q;const e=null!=(Q=null==P?void 0:P.required)?Q:U;J.label=(0,y.jsxs)(o.Fragment,{children:[L,e&&"*"]})}H&&(G&&G.native||(J.id=void 0),J["aria-describedby"]=void 0);const ee=M&&k?`${k}-helper-text`:void 0,te=L&&k?`${k}-label`:void 0,ne=w[q],re=(0,y.jsx)(ne,(0,r.Z)({"aria-describedby":ee,autoComplete:l,autoFocus:u,defaultValue:_,fullWidth:C,multiline:D,name:F,rows:j,maxRows:O,minRows:N,type:W,value:$,id:k,inputRef:R,onBlur:B,onChange:Z,onFocus:V,placeholder:z,inputProps:A},J,I));return(0,y.jsxs)(x,(0,r.Z)({className:(0,s.Z)(X.root,h),disabled:S,error:E,fullWidth:C,ref:t,required:U,color:p,variant:q,ownerState:K},Y,{children:[L&&(0,y.jsx)(f.Z,(0,r.Z)({htmlFor:k,id:te},P,{children:L})),H?(0,y.jsx)(g.Z,(0,r.Z)({"aria-describedby":ee,id:k,labelId:te,value:$,input:re},G,{children:d})):re,M&&(0,y.jsx)(m.Z,(0,r.Z)({id:ee},T,{children:M}))]}))}));t.Z=_},52861:function(e,t,n){"use strict";n.d(t,{textFieldClasses:function(){return r.Z},getTextFieldUtilityClass:function(){return r.I}});var r=n(58275)},58275:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTextField",e)}const o=(0,n(88858).Z)("MuiTextField",["root"]);t.Z=o},51368:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(93881),a=n(51705),l=n(58974),c=n(5340),u=n(85893);const d=["onChange","maxRows","minRows","style","value"];function h(e,t){return parseInt(e[t],10)||0}const f={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},p=o.forwardRef((function(e,t){const{onChange:n,maxRows:p,minRows:m=1,style:g,value:v}=e,y=(0,i.Z)(e,d),{current:b}=o.useRef(null!=v),w=o.useRef(null),x=(0,a.Z)(t,w),_=o.useRef(null),S=o.useRef(0),[E,T]=o.useState({}),C=o.useCallback((()=>{const t=w.current,n=(0,c.Z)(t).getComputedStyle(t);if("0px"===n.width)return;const r=_.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");const i=n["box-sizing"],o=h(n,"padding-bottom")+h(n,"padding-top"),s=h(n,"border-bottom-width")+h(n,"border-top-width"),a=r.scrollHeight;r.value="x";const l=r.scrollHeight;let u=a;m&&(u=Math.max(Number(m)*l,u)),p&&(u=Math.min(Number(p)*l,u)),u=Math.max(u,l);const d=u+("border-box"===i?o+s:0),f=Math.abs(u-a)<=1;T((e=>S.current<20&&(d>0&&Math.abs((e.outerHeightStyle||0)-d)>1||e.overflow!==f)?(S.current+=1,{overflow:f,outerHeightStyle:d}):e))}),[p,m,e.placeholder]);o.useEffect((()=>{const e=(0,s.Z)((()=>{S.current=0,C()})),t=(0,c.Z)(w.current);let n;return t.addEventListener("resize",e),"undefined"!=typeof ResizeObserver&&(n=new ResizeObserver(e),n.observe(w.current)),()=>{e.clear(),t.removeEventListener("resize",e),n&&n.disconnect()}}),[C]),(0,l.Z)((()=>{C()})),o.useEffect((()=>{S.current=0}),[v]);return(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)("textarea",(0,r.Z)({value:v,onChange:e=>{S.current=0,b||C(),n&&n(e)},ref:x,rows:m,style:(0,r.Z)({height:E.outerHeightStyle,overflow:E.overflow?"hidden":null},g)},y)),(0,u.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:_,tabIndex:-1,style:(0,r.Z)({},f,g,{padding:0})})]})}));t.Z=p},83808:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(71657),c=n(58524),u=n(42606),d=n(85893);const h=["className","component","disableGutters","variant"],f=(0,c.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((({theme:e,ownerState:t})=>(0,i.Z)({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},"dense"===t.variant&&{minHeight:48})),(({theme:e,ownerState:t})=>"regular"===t.variant&&e.mixins.toolbar)),p=o.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiToolbar"}),{className:o,component:c="div",disableGutters:p=!1,variant:m="regular"}=n,g=(0,r.Z)(n,h),v=(0,i.Z)({},n,{component:c,disableGutters:p,variant:m}),y=(e=>{const{classes:t,disableGutters:n,variant:r}=e,i={root:["root",!n&&"gutters",r]};return(0,a.Z)(i,u.N,t)})(v);return(0,d.jsx)(f,(0,i.Z)({as:c,className:(0,s.Z)(y.root,o),ref:t,ownerState:v},g))}));t.Z=p},42606:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiToolbar",e)}const o=(0,n(88858).Z)("MuiToolbar",["root","gutters","regular","dense"]);t.Z=o},21023:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(37017),c=n(94581),u=n(58524),d=n(2734),h=n(71657),f=n(98216),p=n(96514),m=n(14594),g=n(2068),v=n(51705),y=n(27909),b=n(79674),w=n(49299),x=n(48999),_=n(85893);const S=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"];const E=(0,u.ZP)(m.Z,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((({theme:e,ownerState:t,open:n})=>(0,i.Z)({zIndex:e.zIndex.tooltip,pointerEvents:"none"},!t.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},t.arrow&&{[`&[data-popper-placement*="bottom"] .${x.Z.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${x.Z.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${x.Z.arrow}`]:(0,i.Z)({},t.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${x.Z.arrow}`]:(0,i.Z)({},t.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})}))),T=(0,u.ZP)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${(0,f.Z)(n.placement.split("-")[0])}`]]}})((({theme:e,ownerState:t})=>{return(0,i.Z)({backgroundColor:(0,c.Fq)(e.palette.grey[700],.92),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},t.arrow&&{position:"relative",margin:0},t.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:(n=16/14,Math.round(1e5*n)/1e5)+"em",fontWeight:e.typography.fontWeightRegular},{[`.${x.Z.popper}[data-popper-placement*="left"] &`]:(0,i.Z)({transformOrigin:"right center"},t.isRtl?(0,i.Z)({marginLeft:"14px"},t.touch&&{marginLeft:"24px"}):(0,i.Z)({marginRight:"14px"},t.touch&&{marginRight:"24px"})),[`.${x.Z.popper}[data-popper-placement*="right"] &`]:(0,i.Z)({transformOrigin:"left center"},t.isRtl?(0,i.Z)({marginRight:"14px"},t.touch&&{marginRight:"24px"}):(0,i.Z)({marginLeft:"14px"},t.touch&&{marginLeft:"24px"})),[`.${x.Z.popper}[data-popper-placement*="top"] &`]:(0,i.Z)({transformOrigin:"center bottom",marginBottom:"14px"},t.touch&&{marginBottom:"24px"}),[`.${x.Z.popper}[data-popper-placement*="bottom"] &`]:(0,i.Z)({transformOrigin:"center top",marginTop:"14px"},t.touch&&{marginTop:"24px"})});var n})),C=(0,u.ZP)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})((({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:(0,c.Fq)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let M=!1,k=null;function P(e,t){return n=>{t&&t(n),e(n)}}const A=o.forwardRef((function(e,t){var n,c,u,A,I;const R=(0,h.Z)({props:e,name:"MuiTooltip"}),{arrow:L=!1,children:O,components:N={},componentsProps:D={},describeChild:F=!1,disableFocusListener:B=!1,disableHoverListener:Z=!1,disableInteractive:V=!1,disableTouchListener:z=!1,enterDelay:U=100,enterNextDelay:j=0,enterTouchDelay:H=700,followCursor:G=!1,id:W,leaveDelay:$=0,leaveTouchDelay:q=1500,onClose:Y,onOpen:K,open:X,placement:J="bottom",PopperComponent:Q,PopperProps:ee={},title:te,TransitionComponent:ne=p.Z,TransitionProps:re}=R,ie=(0,r.Z)(R,S),oe=(0,d.Z)(),se="rtl"===oe.direction,[ae,le]=o.useState(),[ce,ue]=o.useState(null),de=o.useRef(!1),he=V||G,fe=o.useRef(),pe=o.useRef(),me=o.useRef(),ge=o.useRef(),[ve,ye]=(0,w.Z)({controlled:X,default:!1,name:"Tooltip",state:"open"});let be=ve;const we=(0,y.Z)(W),xe=o.useRef(),_e=o.useCallback((()=>{void 0!==xe.current&&(document.body.style.WebkitUserSelect=xe.current,xe.current=void 0),clearTimeout(ge.current)}),[]);o.useEffect((()=>()=>{clearTimeout(fe.current),clearTimeout(pe.current),clearTimeout(me.current),_e()}),[_e]);const Se=e=>{clearTimeout(k),M=!0,ye(!0),K&&!be&&K(e)},Ee=(0,g.Z)((e=>{clearTimeout(k),k=setTimeout((()=>{M=!1}),800+$),ye(!1),Y&&be&&Y(e),clearTimeout(fe.current),fe.current=setTimeout((()=>{de.current=!1}),oe.transitions.duration.shortest)})),Te=e=>{de.current&&"touchstart"!==e.type||(ae&&ae.removeAttribute("title"),clearTimeout(pe.current),clearTimeout(me.current),U||M&&j?pe.current=setTimeout((()=>{Se(e)}),M?j:U):Se(e))},Ce=e=>{clearTimeout(pe.current),clearTimeout(me.current),me.current=setTimeout((()=>{Ee(e)}),$)},{isFocusVisibleRef:Me,onBlur:ke,onFocus:Pe,ref:Ae}=(0,b.Z)(),[,Ie]=o.useState(!1),Re=e=>{ke(e),!1===Me.current&&(Ie(!1),Ce(e))},Le=e=>{ae||le(e.currentTarget),Pe(e),!0===Me.current&&(Ie(!0),Te(e))},Oe=e=>{de.current=!0;const t=O.props;t.onTouchStart&&t.onTouchStart(e)},Ne=Te,De=Ce,Fe=e=>{Oe(e),clearTimeout(me.current),clearTimeout(fe.current),_e(),xe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ge.current=setTimeout((()=>{document.body.style.WebkitUserSelect=xe.current,Te(e)}),H)},Be=e=>{O.props.onTouchEnd&&O.props.onTouchEnd(e),_e(),clearTimeout(me.current),me.current=setTimeout((()=>{Ee(e)}),q)};o.useEffect((()=>{if(be)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||Ee(e)}}),[Ee,be]);const Ze=(0,v.Z)(le,t),Ve=(0,v.Z)(Ae,Ze),ze=(0,v.Z)(O.ref,Ve);""===te&&(be=!1);const Ue=o.useRef({x:0,y:0}),je=o.useRef(),He={},Ge="string"==typeof te;F?(He.title=be||!Ge||Z?null:te,He["aria-describedby"]=be?we:null):(He["aria-label"]=Ge?te:null,He["aria-labelledby"]=be&&!Ge?we:null);const We=(0,i.Z)({},He,ie,O.props,{className:(0,s.Z)(ie.className,O.props.className),onTouchStart:Oe,ref:ze},G?{onMouseMove:e=>{const t=O.props;t.onMouseMove&&t.onMouseMove(e),Ue.current={x:e.clientX,y:e.clientY},je.current&&je.current.update()}}:{});const $e={};z||(We.onTouchStart=Fe,We.onTouchEnd=Be),Z||(We.onMouseOver=P(Ne,We.onMouseOver),We.onMouseLeave=P(De,We.onMouseLeave),he||($e.onMouseOver=Ne,$e.onMouseLeave=De)),B||(We.onFocus=P(Le,We.onFocus),We.onBlur=P(Re,We.onBlur),he||($e.onFocus=Le,$e.onBlur=Re));const qe=o.useMemo((()=>{var e;let t=[{name:"arrow",enabled:Boolean(ce),options:{element:ce,padding:4}}];return null!=(e=ee.popperOptions)&&e.modifiers&&(t=t.concat(ee.popperOptions.modifiers)),(0,i.Z)({},ee.popperOptions,{modifiers:t})}),[ce,ee]),Ye=(0,i.Z)({},R,{isRtl:se,arrow:L,disableInteractive:he,placement:J,PopperComponentProp:Q,touch:de.current}),Ke=(e=>{const{classes:t,disableInteractive:n,arrow:r,touch:i,placement:o}=e,s={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${(0,f.Z)(o.split("-")[0])}`],arrow:["arrow"]};return(0,a.Z)(s,x.Q,t)})(Ye),Xe=null!=(n=N.Popper)?n:E,Je=null!=(c=null!=ne?ne:N.Transition)?c:p.Z,Qe=null!=(u=N.Tooltip)?u:T,et=null!=(A=N.Arrow)?A:C,tt=(0,l.Z)(Xe,(0,i.Z)({},ee,D.popper),Ye),nt=(0,l.Z)(Je,(0,i.Z)({},re,D.transition),Ye),rt=(0,l.Z)(Qe,(0,i.Z)({},D.tooltip),Ye),it=(0,l.Z)(et,(0,i.Z)({},D.arrow),Ye);return(0,_.jsxs)(o.Fragment,{children:[o.cloneElement(O,We),(0,_.jsx)(Xe,(0,i.Z)({as:null!=Q?Q:m.Z,placement:J,anchorEl:G?{getBoundingClientRect:()=>({top:Ue.current.y,left:Ue.current.x,right:Ue.current.x,bottom:Ue.current.y,width:0,height:0})}:ae,popperRef:je,open:!!ae&&be,id:we,transition:!0},$e,tt,{className:(0,s.Z)(Ke.popper,null==(I=D.popper)?void 0:I.className),popperOptions:qe,children:({TransitionProps:e})=>{var t,n;return(0,_.jsx)(Je,(0,i.Z)({timeout:oe.transitions.duration.shorter},e,nt,{children:(0,_.jsxs)(Qe,(0,i.Z)({},rt,{className:(0,s.Z)(Ke.tooltip,null==(t=D.tooltip)?void 0:t.className),children:[te,L?(0,_.jsx)(et,(0,i.Z)({},it,{className:(0,s.Z)(Ke.arrow,null==(n=D.arrow)?void 0:n.className),ref:ue})):null]}))}))}}))]})}));t.Z=A},3506:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},tooltipClasses:function(){return i.Z},getTooltipUtilityClass:function(){return i.Q}});var r=n(21023),i=n(48999)},48999:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTooltip",e)}const o=(0,n(88858).Z)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);t.Z=o},23972:function(e,t,n){"use strict";var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(87893),l=n(71993),c=n(58524),u=n(71657),d=n(98216),h=n(50716),f=n(85893);const p=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],m=(0,c.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${(0,d.Z)(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((({theme:e,ownerState:t})=>(0,i.Z)({margin:0},t.variant&&e.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16}))),g={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},v={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},y=o.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiTypography"}),o=(e=>v[e]||e)(n.color),c=(0,a.Z)((0,i.Z)({},n,{color:o})),{align:y="inherit",className:b,component:w,gutterBottom:x=!1,noWrap:_=!1,paragraph:S=!1,variant:E="body1",variantMapping:T=g}=c,C=(0,r.Z)(c,p),M=(0,i.Z)({},c,{align:y,color:o,className:b,component:w,gutterBottom:x,noWrap:_,paragraph:S,variant:E,variantMapping:T}),k=w||(S?"p":T[E]||g[E])||"span",P=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=e,a={root:["root",o,"inherit"!==e.align&&`align${(0,d.Z)(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,l.Z)(a,h.f,s)})(M);return(0,f.jsx)(m,(0,i.Z)({as:k,ref:t,ownerState:M,className:(0,s.Z)(P.root,b)},C))}));t.Z=y},89589:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r.Z},typographyClasses:function(){return i.Z},getTypographyUtilityClass:function(){return i.f}});var r=n(23972),i=n(50716)},50716:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(15773);function i(e){return(0,r.Z)("MuiTypography",e)}const o=(0,n(88858).Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);t.Z=o},6949:function(e,t){"use strict";t.Z={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"}},16115:function(e,t){"use strict";t.Z={black:"#000",white:"#fff"}},13486:function(e,t){"use strict";t.Z={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"}},47036:function(e,t){"use strict";t.Z={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"}},5621:function(e,t){"use strict";t.Z={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"}},55137:function(e,t){"use strict";t.Z={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"}},94518:function(e,t){"use strict";t.Z={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"}},60265:function(e,t){"use strict";t.Z={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"}},84473:function(e,t,n){"use strict";n.r(t),n.d(t,{Accordion:function(){return ot},AccordionActions:function(){return ut},AccordionDetails:function(){return mt},AccordionSummary:function(){return St},Alert:function(){return zt},AlertTitle:function(){return $t},AppBar:function(){return Jt},Autocomplete:function(){return Rn},Avatar:function(){return Ln.Z},AvatarGroup:function(){return zn},Backdrop:function(){return Un.Z},BackdropUnstyled:function(){return le.Z},Badge:function(){return $n},BadgeUnstyled:function(){return _e},BottomNavigation:function(){return Jn},BottomNavigationAction:function(){return ir},Box:function(){return or.Z},Breadcrumbs:function(){return vr},Button:function(){return yr.Z},ButtonBase:function(){return gt.Z},ButtonGroup:function(){return Cr},ButtonUnstyled:function(){return Ie},Card:function(){return Mr.Z},CardActionArea:function(){return Or},CardActions:function(){return Nr.Z},CardContent:function(){return Fr.Z},CardHeader:function(){return Zr.Z},CardMedia:function(){return zr.Z},Checkbox:function(){return jr.Z},Chip:function(){return pn},CircularProgress:function(){return Gr.Z},ClickAwayListener:function(){return Kr},Collapse:function(){return Xe.Z},Container:function(){return ri},CssBaseline:function(){return li},Dialog:function(){return _i},DialogActions:function(){return Mi},DialogContent:function(){return Ri},DialogContentText:function(){return Fi},DialogTitle:function(){return Ui},Divider:function(){return ji.Z},Drawer:function(){return io},Fab:function(){return co},Fade:function(){return hi.Z},FilledInput:function(){return uo.Z},FormControl:function(){return fo.Z},FormControlLabel:function(){return mo.Z},FormControlUnstyled:function(){return De},FormControlUnstyledContext:function(){return Re},FormGroup:function(){return vo.Z},FormHelperText:function(){return bo.Z},FormLabel:function(){return xo.Z},FormLabelRoot:function(){return xo.D},GlobalStyles:function(){return ii.Z},Grid:function(){return So.ZP},Grow:function(){return To.Z},Hidden:function(){return Wo},Icon:function(){return Jo},IconButton:function(){return kt.Z},ImageList:function(){return ss},ImageListItem:function(){return fs},ImageListItemBar:function(){return _s},Input:function(){return Ss.Z},InputAdornment:function(){return Is},InputBase:function(){return Rs.ZP},InputLabel:function(){return Os.Z},LinearProgress:function(){return ta},Link:function(){return ca},List:function(){return ua.Z},ListItem:function(){return ha.ZP},ListItemAvatar:function(){return pa.Z},ListItemButton:function(){return ga.Z},ListItemIcon:function(){return _a},ListItemSecondaryAction:function(){return Sa.Z},ListItemText:function(){return Ta.Z},ListSubheader:function(){return on},Menu:function(){return Ma.Z},MenuItem:function(){return Pa.Z},MenuList:function(){return Ia.Z},MobileStepper:function(){return Za},Modal:function(){return di.Z},ModalManager:function(){return Ze.gk},ModalUnstyled:function(){return Be.Z},NativeSelect:function(){return qa},NoSsr:function(){return Ka},OutlinedInput:function(){return Xa.Z},Pagination:function(){return wl},PaginationItem:function(){return ml},Paper:function(){return Je.Z},Popover:function(){return _l.ZP},Popper:function(){return Qt.Z},Portal:function(){return Ve.Z},Radio:function(){return El.Z},RadioGroup:function(){return Cl.Z},Rating:function(){return Wl},ScopedCssBaseline:function(){return Xl},Select:function(){return Jl.Z},Skeleton:function(){return hc},Slide:function(){return Gi.Z},Slider:function(){return fc.ZP},SliderMark:function(){return pc.SliderMark},SliderMarkLabel:function(){return pc.SliderMarkLabel},SliderRail:function(){return pc.SliderRail},SliderRoot:function(){return pc.SliderRoot},SliderThumb:function(){return pc.SliderThumb},SliderTrack:function(){return pc.SliderTrack},SliderUnstyled:function(){return ze.Z},SliderValueLabel:function(){return pc.SliderValueLabel},SliderValueLabelUnstyled:function(){return Ue.Z},Snackbar:function(){return Mc},SnackbarContent:function(){return xc},SpeedDial:function(){return Hc},SpeedDialAction:function(){return Jc},SpeedDialIcon:function(){return ou},Stack:function(){return su.Z},Step:function(){return fu},StepButton:function(){return Fu},StepConnector:function(){return ju},StepContent:function(){return Yu},StepIcon:function(){return Su},StepLabel:function(){return Ru},Stepper:function(){return td},StyledEngineProvider:function(){return Oh},SvgIcon:function(){return gu.Z},SwipeableDrawer:function(){return bd},Switch:function(){return kd},SwitchUnstyled:function(){return Ye},Tab:function(){return Pd.Z},TabScrollButton:function(){return lh.Z},Table:function(){return Id.Z},TableBody:function(){return Ld.Z},TableCell:function(){return Nd.Z},TableContainer:function(){return Fd.Z},TableFooter:function(){return Wd},TableHead:function(){return $d.Z},TablePagination:function(){return Yd.Z},TableRow:function(){return Xd.Z},TableSortLabel:function(){return oh},Tabs:function(){return sh.Z},TextField:function(){return uh.Z},TextareaAutosize:function(){return hh.Z},ThemeProvider:function(){return $.Z},ToggleButton:function(){return vh},ToggleButtonGroup:function(){return Sh},Toolbar:function(){return Eh.Z},Tooltip:function(){return Gc.Z},Typography:function(){return Ut.Z},Unstable_TrapFocus:function(){return Ke.Z},Zoom:function(){return Oc},accordionActionsClasses:function(){return at},accordionClasses:function(){return nt},accordionDetailsClasses:function(){return ht},accordionSummaryClasses:function(){return yt},adaptV4Theme:function(){return A},alertClasses:function(){return Mt},alertTitleClasses:function(){return Ht},alpha:function(){return I.Fq},appBarClasses:function(){return Yt},appendOwnerState:function(){return Pe.Z},autocompleteClasses:function(){return bn},avatarClasses:function(){return On.avatarClasses},avatarGroupClasses:function(){return Dn},backdropClasses:function(){return Un.V},backdropUnstyledClasses:function(){return ce.Z},badgeClasses:function(){return Hn},badgeUnstyledClasses:function(){return ye},bottomNavigationActionClasses:function(){return er},bottomNavigationClasses:function(){return Yn},breadcrumbsClasses:function(){return dr},buttonBaseClasses:function(){return wr.Z},buttonClasses:function(){return br.buttonClasses},buttonGroupClasses:function(){return Sr},buttonUnstyledClasses:function(){return Te},capitalize:function(){return X.capitalize},cardActionAreaClasses:function(){return Ar},cardActionsClasses:function(){return Dr.cardActionsClasses},cardClasses:function(){return kr.cardClasses},cardContentClasses:function(){return Br.cardContentClasses},cardHeaderClasses:function(){return Vr.cardHeaderClasses},cardMediaClasses:function(){return Ur.cardMediaClasses},checkboxClasses:function(){return Hr.checkboxClasses},chipClasses:function(){return cn},circularProgressClasses:function(){return Wr.circularProgressClasses},collapseClasses:function(){return Xr.collapseClasses},colors:function(){return r},containerClasses:function(){return Qr},createChainedFunction:function(){return X.createChainedFunction},createFilterOptions:function(){return ie},createMuiTheme:function(){return R.createMuiTheme},createStyles:function(){return D},createSvgIcon:function(){return X.createSvgIcon},createTheme:function(){return R.default},darkScrollbar:function(){return ui},darken:function(){return I._j},debounce:function(){return X.debounce},decomposeColor:function(){return I.tB},deprecatedPropType:function(){return X.deprecatedPropType},dialogActionsClasses:function(){return Ei},dialogClasses:function(){return pi},dialogContentClasses:function(){return Pi},dialogContentTextClasses:function(){return Oi},dialogTitleClasses:function(){return Zi},dividerClasses:function(){return Hi.dividerClasses},drawerClasses:function(){return $i},duration:function(){return j.x9},easing:function(){return j.Ui},emphasize:function(){return I._4},experimentalStyled:function(){return W.ZP},extractEventHandlers:function(){return Me},fabClasses:function(){return so},filledInputClasses:function(){return ho.Z},formControlClasses:function(){return po.formControlClasses},formControlLabelClasses:function(){return go.formControlLabelClasses},formControlUnstyledClasses:function(){return Oe},formGroupClasses:function(){return yo.Z},formHelperTextClasses:function(){return wo.Z},formLabelClasses:function(){return _o.Z},generateUtilityClass:function(){return ge.Z},generateUtilityClasses:function(){return me.Z},getAccordionActionsUtilityClass:function(){return st},getAccordionDetailsUtilityClass:function(){return dt},getAccordionSummaryUtilityClass:function(){return vt},getAccordionUtilityClass:function(){return tt},getAlertTitleUtilityClass:function(){return jt},getAlertUtilityClass:function(){return Tt},getAppBarUtilityClass:function(){return qt},getAutocompleteUtilityClass:function(){return gn},getAvatarGroupUtilityClass:function(){return Nn},getAvatarUtilityClass:function(){return On.getAvatarUtilityClass},getBackdropUtilityClass:function(){return ce.s},getBadgeUtilityClass:function(){return ve},getBottomNavigationActionUtilityClass:function(){return Qn},getBottomNavigationUtilityClass:function(){return qn},getBreadcrumbsUtilityClass:function(){return ur},getButtonBaseUtilityClass:function(){return wr.$},getButtonGroupUtilityClass:function(){return _r},getButtonUnstyledUtilityClass:function(){return Ee},getButtonUtilityClass:function(){return br.getButtonUtilityClass},getCardActionAreaUtilityClass:function(){return Pr},getCardActionsUtilityClass:function(){return Dr.getCardActionsUtilityClass},getCardContentUtilityClass:function(){return Br.getCardContentUtilityClass},getCardHeaderUtilityClass:function(){return Vr.getCardHeaderUtilityClass},getCardMediaUtilityClass:function(){return Ur.getCardMediaUtilityClass},getCardUtilityClass:function(){return kr.getCardUtilityClass},getCheckboxUtilityClass:function(){return Hr.getCheckboxUtilityClass},getChipUtilityClass:function(){return ln},getCircularProgressUtilityClass:function(){return Wr.getCircularProgressUtilityClass},getCollapseUtilityClass:function(){return Xr.getCollapseUtilityClass},getContainerUtilityClass:function(){return Jr},getContrastRatio:function(){return I.mi},getDialogActionsUtilityClass:function(){return Si},getDialogContentTextUtilityClass:function(){return Li},getDialogContentUtilityClass:function(){return ki},getDialogTitleUtilityClass:function(){return Bi},getDialogUtilityClass:function(){return fi},getDividerUtilityClass:function(){return Hi.getDividerUtilityClass},getDrawerUtilityClass:function(){return Wi},getFabUtilityClass:function(){return oo},getFilledInputUtilityClass:function(){return ho._},getFormControlLabelUtilityClasses:function(){return go.getFormControlLabelUtilityClasses},getFormControlUnstyledUtilityClasses:function(){return Le},getFormControlUtilityClasses:function(){return po.getFormControlUtilityClasses},getFormGroupUtilityClass:function(){return yo.y},getFormHelperTextUtilityClasses:function(){return wo.E},getFormLabelUtilityClasses:function(){return _o.M},getGridUtilityClass:function(){return Eo.getGridUtilityClass},getIconButtonUtilityClass:function(){return Qo.getIconButtonUtilityClass},getIconUtilityClass:function(){return $o},getImageListItemBarUtilityClass:function(){return ps},getImageListItemUtilityClass:function(){return ls},getImageListUtilityClass:function(){return es},getInputAdornmentUtilityClass:function(){return Ms},getInputBaseUtilityClass:function(){return Ls.u},getInputLabelUtilityClasses:function(){return Ns.Y},getInputUtilityClass:function(){return Es.getInputUtilityClass},getLinearProgressUtilityClass:function(){return Fs},getLinkUtilityClass:function(){return ia},getListItemAvatarUtilityClass:function(){return ma.getListItemAvatarUtilityClass},getListItemButtonUtilityClass:function(){return va.getListItemButtonUtilityClass},getListItemIconUtilityClass:function(){return ya.f},getListItemSecondaryActionClassesUtilityClass:function(){return Ea.getListItemSecondaryActionClassesUtilityClass},getListItemTextUtilityClass:function(){return Ca.getListItemTextUtilityClass},getListItemUtilityClass:function(){return fa.getListItemUtilityClass},getListSubheaderUtilityClass:function(){return en},getListUtilityClass:function(){return da.getListUtilityClass},getLuminance:function(){return I.H3},getMenuItemUtilityClass:function(){return Aa.getMenuItemUtilityClass},getMenuUtilityClass:function(){return ka.Q},getMobileStepperUtilityClass:function(){return Ra},getModalUtilityClass:function(){return Ze.xS},getNativeSelectUtilityClasses:function(){return ja.f},getOutlinedInputUtilityClass:function(){return Ja.e},getPaginationItemUtilityClass:function(){return rl},getPaginationUtilityClass:function(){return Qa},getPaperUtilityClass:function(){return xl.getPaperUtilityClass},getPopoverUtilityClass:function(){return Sl.s},getRadioUtilityClass:function(){return Tl.getRadioUtilityClass},getRatingUtilityClass:function(){return Rl},getScopedCssBaselineUtilityClass:function(){return $l},getSelectUtilityClasses:function(){return Ql.getSelectUtilityClasses},getSkeletonUtilityClass:function(){return ec},getSliderUtilityClass:function(){return je.k},getSnackbarContentUtilityClass:function(){return mc},getSnackbarUtilityClass:function(){return _c},getSpeedDialActionUtilityClass:function(){return Wc},getSpeedDialIconUtilityClass:function(){return eu},getSpeedDialUtilityClass:function(){return Nc},getStepButtonUtilityClass:function(){return Lu},getStepConnectorUtilityClass:function(){return Bu},getStepContentUtilityClass:function(){return Hu},getStepIconUtilityClass:function(){return vu},getStepLabelUtilityClass:function(){return Eu},getStepUtilityClass:function(){return cu},getStepperUtilityClass:function(){return Ku},getSvgIconUtilityClass:function(){return nd.h},getSwitchUnstyledUtilityClass:function(){return Ge},getSwitchUtilityClass:function(){return xd},getTabScrollButtonUtilityClass:function(){return ch.C},getTabUtilityClass:function(){return Ad.getTabUtilityClass},getTableBodyUtilityClass:function(){return Od.getTableBodyUtilityClass},getTableCellUtilityClass:function(){return Dd.getTableCellUtilityClass},getTableContainerUtilityClass:function(){return Bd.getTableContainerUtilityClass},getTableFooterUtilityClass:function(){return Vd},getTableHeadUtilityClass:function(){return qd.getTableHeadUtilityClass},getTablePaginationUtilityClass:function(){return Kd.getTablePaginationUtilityClass},getTableRowUtilityClass:function(){return Jd.getTableRowUtilityClass},getTableSortLabelUtilityClass:function(){return eh},getTableUtilityClass:function(){return Rd.getTableUtilityClass},getTabsUtilityClass:function(){return ah.getTabsUtilityClass},getTextFieldUtilityClass:function(){return dh.getTextFieldUtilityClass},getToggleButtonGroupUtilityClass:function(){return bh},getToggleButtonUtilityClass:function(){return fh},getToolbarUtilityClass:function(){return Th.N},getTooltipUtilityClass:function(){return Ch.getTooltipUtilityClass},getTouchRippleUtilityClass:function(){return xr.H},getTypographyUtilityClass:function(){return Mh.getTypographyUtilityClass},gridClasses:function(){return Eo.gridClasses},hexToRgb:function(){return I.oo},hslToRgb:function(){return I.ve},iconButtonClasses:function(){return Qo.iconButtonClasses},iconClasses:function(){return qo},imageListClasses:function(){return ts},imageListItemBarClasses:function(){return ms},imageListItemClasses:function(){return cs},inputAdornmentClasses:function(){return ks},inputBaseClasses:function(){return Ls.Z},inputClasses:function(){return Es.inputClasses},inputLabelClasses:function(){return Ns.Z},isHostComponent:function(){return fe.Z},isMuiElement:function(){return X.isMuiElement},lighten:function(){return I.$n},linearProgressClasses:function(){return Bs},linkClasses:function(){return oa},listClasses:function(){return da.listClasses},listItemAvatarClasses:function(){return ma.listItemAvatarClasses},listItemButtonClasses:function(){return va.listItemButtonClasses},listItemClasses:function(){return fa.listItemClasses},listItemIconClasses:function(){return ya.Z},listItemSecondaryActionClasses:function(){return Ea.listItemSecondaryActionClasses},listItemTextClasses:function(){return Ca.listItemTextClasses},listSubheaderClasses:function(){return tn},makeStyles:function(){return q},menuClasses:function(){return ka.Z},menuItemClasses:function(){return Aa.menuItemClasses},mobileStepperClasses:function(){return La},modalClasses:function(){return Va.modalClasses},modalUnstyledClasses:function(){return Ze.vk},nativeSelectClasses:function(){return ja.Z},outlinedInputClasses:function(){return Ja.Z},ownerDocument:function(){return X.ownerDocument},ownerWindow:function(){return X.ownerWindow},paginationClasses:function(){return el},paginationItemClasses:function(){return il},paperClasses:function(){return xl.paperClasses},popoverClasses:function(){return Sl.Z},radioClasses:function(){return Tl.radioClasses},ratingClasses:function(){return Ll},recomposeColor:function(){return I.wy},requirePropFactory:function(){return X.requirePropFactory},responsiveFontSizes:function(){return U},rgbToHex:function(){return I.vq},scopedCssBaselineClasses:function(){return ql},selectClasses:function(){return Ql.selectClasses},setRef:function(){return X.setRef},skeletonClasses:function(){return tc},sliderClasses:function(){return pc.sliderClasses},sliderUnstyledClasses:function(){return je.Z},snackbarClasses:function(){return Sc},snackbarContentClasses:function(){return gc},speedDialActionClasses:function(){return $c},speedDialClasses:function(){return Dc},speedDialIconClasses:function(){return tu},stepButtonClasses:function(){return Ou},stepClasses:function(){return uu},stepConnectorClasses:function(){return Zu},stepContentClasses:function(){return Gu},stepIconClasses:function(){return bu},stepLabelClasses:function(){return Tu},stepperClasses:function(){return Xu},styled:function(){return W.ZP},svgIconClasses:function(){return nd.Z},switchClasses:function(){return _d},switchUnstyledClasses:function(){return We},tabClasses:function(){return Ad.tabClasses},tabScrollButtonClasses:function(){return ch.Z},tableBodyClasses:function(){return Od.tableBodyClasses},tableCellClasses:function(){return Dd.tableCellClasses},tableClasses:function(){return Rd.tableClasses},tableContainerClasses:function(){return Bd.tableContainerClasses},tableFooterClasses:function(){return zd},tableHeadClasses:function(){return qd.tableHeadClasses},tablePaginationClasses:function(){return Kd.tablePaginationClasses},tableRowClasses:function(){return Jd.tableRowClasses},tableSortLabelClasses:function(){return th},tabsClasses:function(){return ah.tabsClasses},textFieldClasses:function(){return dh.textFieldClasses},toggleButtonClasses:function(){return ph},toggleButtonGroupClasses:function(){return wh},toolbarClasses:function(){return Th.Z},tooltipClasses:function(){return Ch.tooltipClasses},touchRippleClasses:function(){return xr.Z},typographyClasses:function(){return Mh.typographyClasses},unstable_composeClasses:function(){return pe.Z},unstable_createMuiStrictModeTheme:function(){return O},unstable_getUnit:function(){return B},unstable_toUnitless:function(){return Z},unstable_useEnhancedEffect:function(){return X.unstable_useEnhancedEffect},unstable_useId:function(){return X.unstable_useId},unsupportedProp:function(){return X.unsupportedProp},useAutocomplete:function(){return ae},useButton:function(){return ke},useControlled:function(){return X.useControlled},useEventCallback:function(){return X.useEventCallback},useForkRef:function(){return X.useForkRef},useFormControl:function(){return po.useFormControl},useFormControlUnstyled:function(){return Fe},useIsFocusVisible:function(){return X.useIsFocusVisible},useMediaQuery:function(){return Lo},usePagination:function(){return nl},useRadioGroup:function(){return Ml.useRadioGroup},useScrollTrigger:function(){return Ih},useSwitch:function(){return He},useTheme:function(){return H.Z},useThemeProps:function(){return G.Z},withStyles:function(){return Y},withTheme:function(){return K}});var r={};n.r(r),n.d(r,{amber:function(){return y},blue:function(){return u.Z},blueGrey:function(){return S},brown:function(){return x},common:function(){return i.Z},cyan:function(){return h},deepOrange:function(){return w},deepPurple:function(){return l},green:function(){return p.Z},grey:function(){return _.Z},indigo:function(){return c},lightBlue:function(){return d.Z},lightGreen:function(){return m},lime:function(){return g},orange:function(){return b.Z},pink:function(){return s},purple:function(){return a.Z},red:function(){return o.Z},teal:function(){return f},yellow:function(){return v}});var i=n(16115),o=n(60265);var s={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},a=n(94518);var l={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"};var c={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},u=n(6949),d=n(5621);var h={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4"};var f={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5"},p=n(13486);var m={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17"};var g={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00"};var v={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"};var y={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},b=n(55137);var w={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"};var x={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037"},_=n(47036);var S={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64"},E=n(87462),T=n(63366),C=n(91244),M=n(21182);const k=["defaultProps","mixins","overrides","palette","props","styleOverrides"],P=["type","mode"];function A(e){const{defaultProps:t={},mixins:n={},overrides:r={},palette:i={},props:o={},styleOverrides:s={}}=e,a=(0,T.Z)(e,k),l=(0,E.Z)({},a,{components:{}});Object.keys(t).forEach((e=>{const n=l.components[e]||{};n.defaultProps=t[e],l.components[e]=n})),Object.keys(o).forEach((e=>{const t=l.components[e]||{};t.defaultProps=o[e],l.components[e]=t})),Object.keys(s).forEach((e=>{const t=l.components[e]||{};t.styleOverrides=s[e],l.components[e]=t})),Object.keys(r).forEach((e=>{const t=l.components[e]||{};t.styleOverrides=r[e],l.components[e]=t})),l.spacing=(0,C.Z)(e.spacing);const c=(0,M.Z)(e.breakpoints||{}),u=l.spacing;l.mixins=(0,E.Z)({gutters:(e={})=>(0,E.Z)({paddingLeft:u(2),paddingRight:u(2)},e,{[c.up("sm")]:(0,E.Z)({paddingLeft:u(3),paddingRight:u(3)},e[c.up("sm")])})},n);const{type:d,mode:h}=i,f=(0,T.Z)(i,P),p=h||d||"light";return l.palette=(0,E.Z)({text:{hint:"dark"===p?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.38)"},mode:p,type:p},f),l}var I=n(94581),R=n(56232),L=n(59766);function O(e,...t){return(0,R.default)((0,L.Z)({unstable_strictMode:!0},e),...t)}let N=!1;function D(e){return N||(console.warn(["MUI: createStyles from @mui/material/styles is deprecated.","Please use @mui/styles/createStyles"].join("\n")),N=!0),e}function F(e){return String(parseFloat(e)).length===String(e).length}function B(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function Z(e){return parseFloat(e)}function V({lineHeight:e,pixels:t,htmlFontSize:n}){return t/(e*n)}var z=n(71387);function U(e,t={}){const{breakpoints:n=["sm","md","lg"],disableAlign:r=!1,factor:i=2,variants:o=["h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","caption","button","overline"]}=t,s=(0,E.Z)({},e);s.typography=(0,E.Z)({},s.typography);const a=s.typography,l=(c=a.htmlFontSize,(e,t)=>{const n=B(e);if(n===t)return e;let r=Z(e);"px"!==n&&("em"===n||"rem"===n)&&(r=Z(e)*Z(c));let i=r;if("px"!==t)if("em"===t)i=r/Z(c);else{if("rem"!==t)return e;i=r/Z(c)}return parseFloat(i.toFixed(5))+t});var c;const u=n.map((e=>s.breakpoints.values[e]));return o.forEach((e=>{const t=a[e],n=parseFloat(l(t.fontSize,"rem"));if(n<=1)return;const o=n,s=1+(o-1)/i;let{lineHeight:c}=t;if(!F(c)&&!r)throw new Error((0,z.Z)(6));F(c)||(c=parseFloat(l(c,"rem"))/parseFloat(n));let d=null;r||(d=e=>function({size:e,grid:t}){const n=e-e%t,r=n+t;return e-n<r-e?n:r}({size:e,grid:V({pixels:4,lineHeight:c,htmlFontSize:a.htmlFontSize})})),a[e]=(0,E.Z)({},t,function({cssProperty:e,min:t,max:n,unit:r="rem",breakpoints:i=[600,900,1200],transform:o=null}){const s={[e]:`${t}${r}`},a=(n-t)/i[i.length-1];return i.forEach((n=>{let i=t+a*n;null!==o&&(i=o(i)),s[`@media (min-width:${n}px)`]={[e]:`${Math.round(1e4*i)/1e4}${r}`}})),s}({cssProperty:"fontSize",min:s,max:o,unit:"rem",breakpoints:u,transform:d}))})),s}var j=n(96067),H=n(2734),G=n(71657),W=n(58524),$=n(24823);function q(){throw new Error((0,z.Z)(14))}function Y(){throw new Error((0,z.Z)(15))}function K(){throw new Error((0,z.Z)(16))}var X=n(64298),J=n(67294),Q=n(57579),ee=n(8925),te=n(73633),ne=n(7960);function re(e){return void 0!==e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function ie(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:o,trim:s=!1}=e;return(e,{inputValue:a,getOptionLabel:l})=>{let c=s?a.trim():a;n&&(c=c.toLowerCase()),t&&(c=re(c));const u=e.filter((e=>{let r=(o||l)(e);return n&&(r=r.toLowerCase()),t&&(r=re(r)),"start"===i?0===r.indexOf(c):r.indexOf(c)>-1}));return"number"==typeof r?u.slice(0,r):u}}function oe(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const se=ie();function ae(e){const{autoComplete:t=!1,autoHighlight:n=!1,autoSelect:r=!1,blurOnSelect:i=!1,disabled:o,clearOnBlur:s=!e.freeSolo,clearOnEscape:a=!1,componentName:l="useAutocomplete",defaultValue:c=(e.multiple?[]:null),disableClearable:u=!1,disableCloseOnSelect:d=!1,disabledItemsFocusable:h=!1,disableListWrap:f=!1,filterOptions:p=se,filterSelectedOptions:m=!1,freeSolo:g=!1,getOptionDisabled:v,getOptionLabel:y=(e=>{var t;return null!=(t=e.label)?t:e}),isOptionEqualToValue:b=((e,t)=>e===t),groupBy:w,handleHomeEndKeys:x=!e.freeSolo,id:_,includeInputInList:S=!1,inputValue:T,multiple:C=!1,onChange:M,onClose:k,onHighlightChange:P,onInputChange:A,onOpen:I,open:R,openOnFocus:L=!1,options:O,selectOnFocus:N=!e.freeSolo,value:D}=e,F=(0,Q.Z)(_);let B=y;B=e=>{const t=y(e);return"string"!=typeof t?String(t):t};const Z=J.useRef(!1),V=J.useRef(!0),z=J.useRef(null),U=J.useRef(null),[j,H]=J.useState(null),[G,W]=J.useState(-1),$=n?0:-1,q=J.useRef($),[Y,K]=(0,ee.Z)({controlled:D,default:c,name:l}),[X,re]=(0,ee.Z)({controlled:T,default:"",name:l,state:"inputValue"}),[ie,ae]=J.useState(!1),le=J.useCallback(((e,t)=>{let n;if(C)n="";else if(null==t)n="";else{const e=B(t);n="string"==typeof e?e:""}X!==n&&(re(n),A&&A(e,n,"reset"))}),[B,X,C,A,re]),ce=J.useRef();J.useEffect((()=>{const e=Y!==ce.current;ce.current=Y,ie&&!e||g&&!e||le(null,Y)}),[Y,le,ie,ce,g]);const[ue,de]=(0,ee.Z)({controlled:R,default:!1,name:l,state:"open"}),[he,fe]=J.useState(!0),pe=!C&&null!=Y&&X===B(Y),me=ue,ge=me?p(O.filter((e=>!m||!(C?Y:[Y]).some((t=>null!==t&&b(e,t))))),{inputValue:pe&&he?"":X,getOptionLabel:B}):[],ve=ue&&ge.length>0;const ye=(0,te.Z)((e=>{-1===e?z.current.focus():j.querySelector(`[data-tag-index="${e}"]`).focus()}));J.useEffect((()=>{C&&G>Y.length-1&&(W(-1),ye(-1))}),[Y,C,G,ye]);const be=(0,te.Z)((({event:e,index:t,reason:n="auto"})=>{if(q.current=t,-1===t?z.current.removeAttribute("aria-activedescendant"):z.current.setAttribute("aria-activedescendant",`${F}-option-${t}`),P&&P(e,-1===t?null:ge[t],n),!U.current)return;const r=U.current.querySelector('[role="option"].Mui-focused');r&&(r.classList.remove("Mui-focused"),r.classList.remove("Mui-focusVisible"));const i=U.current.parentElement.querySelector('[role="listbox"]');if(!i)return;if(-1===t)return void(i.scrollTop=0);const o=U.current.querySelector(`[data-option-index="${t}"]`);if(o&&(o.classList.add("Mui-focused"),"keyboard"===n&&o.classList.add("Mui-focusVisible"),i.scrollHeight>i.clientHeight&&"mouse"!==n)){const e=o,t=i.clientHeight+i.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?i.scrollTop=n-i.clientHeight:e.offsetTop-e.offsetHeight*(w?1.3:0)<i.scrollTop&&(i.scrollTop=e.offsetTop-e.offsetHeight*(w?1.3:0))}})),we=(0,te.Z)((({event:e,diff:n,direction:r="next",reason:i="auto"})=>{if(!me)return;const o=function(e,t){if(!U.current||-1===e)return-1;let n=e;for(;;){if("next"===t&&n===ge.length||"previous"===t&&-1===n)return-1;const e=U.current.querySelector(`[data-option-index="${n}"]`),r=!h&&(!e||e.disabled||"true"===e.getAttribute("aria-disabled"));if(!(e&&!e.hasAttribute("tabindex")||r))return n;n+="next"===t?1:-1}}((()=>{const e=ge.length-1;if("reset"===n)return $;if("start"===n)return 0;if("end"===n)return e;const t=q.current+n;return t<0?-1===t&&S?-1:f&&-1!==q.current||Math.abs(n)>1?0:e:t>e?t===e+1&&S?-1:f||Math.abs(n)>1?e:0:t})(),r);if(be({index:o,reason:i,event:e}),t&&"reset"!==n)if(-1===o)z.current.value=X;else{const e=B(ge[o]);z.current.value=e;0===e.toLowerCase().indexOf(X.toLowerCase())&&X.length>0&&z.current.setSelectionRange(X.length,e.length)}})),xe=J.useCallback((()=>{if(!me)return;const e=C?Y[0]:Y;if(0!==ge.length&&null!=e){if(U.current)if(null==e)q.current>=ge.length-1?be({index:ge.length-1}):be({index:q.current});else{const t=ge[q.current];if(C&&t&&-1!==oe(Y,(e=>b(t,e))))return;const n=oe(ge,(t=>b(t,e)));-1===n?we({diff:"reset"}):be({index:n})}}else we({diff:"reset"})}),[ge.length,!C&&Y,m,we,be,me,X,C]),_e=(0,te.Z)((e=>{(0,ne.Z)(U,e),e&&xe()}));J.useEffect((()=>{xe()}),[xe]);const Se=e=>{ue||(de(!0),fe(!0),I&&I(e))},Ee=(e,t)=>{ue&&(de(!1),k&&k(e,t))},Te=(e,t,n,r)=>{Y!==t&&(M&&M(e,t,n,r),K(t))},Ce=J.useRef(!1),Me=(e,t,n="selectOption",r="options")=>{let o=n,s=t;if(C){s=Array.isArray(Y)?Y.slice():[];const e=oe(s,(e=>b(t,e)));-1===e?s.push(t):"freeSolo"!==r&&(s.splice(e,1),o="removeOption")}le(e,s),Te(e,s,o,{option:t}),d||e.ctrlKey||e.metaKey||Ee(e,o),(!0===i||"touch"===i&&Ce.current||"mouse"===i&&!Ce.current)&&z.current.blur()};const ke=(e,t)=>{if(!C)return;Ee(e,"toggleInput");let n=G;-1===G?""===X&&"previous"===t&&(n=Y.length-1):(n+="next"===t?1:-1,n<0&&(n=0),n===Y.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;let n=e;for(;;){if("next"===t&&n===Y.length||"previous"===t&&-1===n)return-1;const e=j.querySelector(`[data-tag-index="${n}"]`);if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),W(n),ye(n)},Pe=e=>{Z.current=!0,re(""),A&&A(e,"","clear"),Te(e,C?[]:null,"clear")},Ae=e=>n=>{if(e.onKeyDown&&e.onKeyDown(n),!n.defaultMuiPrevented&&(-1!==G&&-1===["ArrowLeft","ArrowRight"].indexOf(n.key)&&(W(-1),ye(-1)),229!==n.which))switch(n.key){case"Home":me&&x&&(n.preventDefault(),we({diff:"start",direction:"next",reason:"keyboard",event:n}));break;case"End":me&&x&&(n.preventDefault(),we({diff:"end",direction:"previous",reason:"keyboard",event:n}));break;case"PageUp":n.preventDefault(),we({diff:-5,direction:"previous",reason:"keyboard",event:n}),Se(n);break;case"PageDown":n.preventDefault(),we({diff:5,direction:"next",reason:"keyboard",event:n}),Se(n);break;case"ArrowDown":n.preventDefault(),we({diff:1,direction:"next",reason:"keyboard",event:n}),Se(n);break;case"ArrowUp":n.preventDefault(),we({diff:-1,direction:"previous",reason:"keyboard",event:n}),Se(n);break;case"ArrowLeft":ke(n,"previous");break;case"ArrowRight":ke(n,"next");break;case"Enter":if(-1!==q.current&&me){const e=ge[q.current],r=!!v&&v(e);if(n.preventDefault(),r)return;Me(n,e,"selectOption"),t&&z.current.setSelectionRange(z.current.value.length,z.current.value.length)}else g&&""!==X&&!1===pe&&(C&&n.preventDefault(),Me(n,X,"createOption","freeSolo"));break;case"Escape":me?(n.preventDefault(),n.stopPropagation(),Ee(n,"escape")):a&&(""!==X||C&&Y.length>0)&&(n.preventDefault(),n.stopPropagation(),Pe(n));break;case"Backspace":if(C&&""===X&&Y.length>0){const e=-1===G?Y.length-1:G,t=Y.slice();t.splice(e,1),Te(n,t,"removeOption",{option:Y[e]})}}},Ie=e=>{ae(!0),L&&!Z.current&&Se(e)},Re=e=>{null!==U.current&&U.current.parentElement.contains(document.activeElement)?z.current.focus():(ae(!1),V.current=!0,Z.current=!1,r&&-1!==q.current&&me?Me(e,ge[q.current],"blur"):r&&g&&""!==X?Me(e,X,"blur","freeSolo"):s&&le(e,Y),Ee(e,"blur"))},Le=e=>{const t=e.target.value;X!==t&&(re(t),fe(!1),A&&A(e,t,"input")),""===t?u||C||Te(e,null,"clear"):Se(e)},Oe=e=>{be({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},Ne=()=>{Ce.current=!0},De=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));Me(e,ge[t],"selectOption"),Ce.current=!1},Fe=e=>t=>{const n=Y.slice();n.splice(e,1),Te(t,n,"removeOption",{option:Y[e]})},Be=e=>{ue?Ee(e,"toggleInput"):Se(e)},Ze=e=>{e.target.getAttribute("id")!==F&&e.preventDefault()},Ve=()=>{z.current.focus(),N&&V.current&&z.current.selectionEnd-z.current.selectionStart==0&&z.current.select(),V.current=!1},ze=e=>{""!==X&&ue||Be(e)};let Ue=g&&X.length>0;Ue=Ue||(C?Y.length>0:null!==Y);let je=ge;if(w){new Map;je=ge.reduce(((e,t,n)=>{const r=w(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return o&&ie&&Re(),{getRootProps:(e={})=>(0,E.Z)({"aria-owns":ve?`${F}-listbox`:null,role:"combobox","aria-expanded":ve},e,{onKeyDown:Ae(e),onMouseDown:Ze,onClick:Ve}),getInputLabelProps:()=>({id:`${F}-label`,htmlFor:F}),getInputProps:()=>({id:F,value:X,onBlur:Re,onFocus:Ie,onChange:Le,onMouseDown:ze,"aria-activedescendant":me?"":null,"aria-autocomplete":t?"both":"list","aria-controls":ve?`${F}-listbox`:null,autoComplete:"off",ref:z,autoCapitalize:"none",spellCheck:"false"}),getClearProps:()=>({tabIndex:-1,onClick:Pe}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:Be}),getTagProps:({index:e})=>({key:e,"data-tag-index":e,tabIndex:-1,onDelete:Fe(e)}),getListboxProps:()=>({role:"listbox",id:`${F}-listbox`,"aria-labelledby":`${F}-label`,ref:_e,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:({index:e,option:t})=>{const n=(C?Y:[Y]).some((e=>null!=e&&b(t,e))),r=!!v&&v(t);return{key:B(t),tabIndex:-1,role:"option",id:`${F}-option-${e}`,onMouseOver:Oe,onClick:De,onTouchStart:Ne,"data-option-index":e,"aria-disabled":r,"aria-selected":n}},id:F,inputValue:X,value:Y,dirty:Ue,popupOpen:me,focused:ie||-1!==G,anchorEl:j,setAnchorEl:H,focusedTag:G,groupedOptions:je}}var le=n(83311),ce=n(17757),ue=n(86010),de=n(28320);var he=e=>{const t=J.useRef({});return J.useEffect((()=>{t.current=e})),t.current},fe=n(49957),pe=n(71993),me=n(88858),ge=n(15773);function ve(e){return(0,ge.Z)("MuiBadge",e)}var ye=(0,me.Z)("MuiBadge",["root","badge","dot","standard","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular","invisible"]),be=n(85893);const we=["anchorOrigin","classes","badgeContent","component","children","className","components","componentsProps","invisible","max","overlap","showZero","variant","theme"],xe=J.forwardRef((function(e,t){const{anchorOrigin:n={vertical:"top",horizontal:"right"},classes:r,badgeContent:i,component:o="span",children:s,className:a,components:l={},componentsProps:c={},invisible:u,max:d=99,overlap:h="rectangular",showZero:f=!1,variant:p="standard",theme:m}=e,g=(0,T.Z)(e,we),v=he({anchorOrigin:n,badgeContent:i,max:d,overlap:h,variant:p});let y=u;null==u&&(0===i&&!f||null==i&&"dot"!==p)&&(y=!0);const{anchorOrigin:b=n,badgeContent:w,max:x=d,overlap:_=h,variant:S=p}=y?v:e,C=(0,E.Z)({},e,{anchorOrigin:b,badgeContent:w,classes:r,invisible:y,max:x,overlap:_,variant:S});let M="";"dot"!==S&&(M=w>x?`${x}+`:w);const k=(e=>{const{variant:t,anchorOrigin:n,overlap:r,invisible:i,classes:o}=e,s={root:["root"],badge:["badge",t,`anchorOrigin${(0,de.Z)(n.vertical)}${(0,de.Z)(n.horizontal)}${(0,de.Z)(r)}`,i&&"invisible"]};return(0,pe.Z)(s,ve,o)})(C),P=l.Root||o,A=c.root||{},I=l.Badge||"span",R=c.badge||{};return(0,be.jsxs)(P,(0,E.Z)({},A,!(0,fe.Z)(P)&&{as:o,ownerState:(0,E.Z)({},C,A.ownerState),theme:m},{ref:t},g,{className:(0,ue.Z)(k.root,A.className,a),children:[s,(0,be.jsx)(I,(0,E.Z)({},R,!(0,fe.Z)(I)&&{ownerState:(0,E.Z)({},C,R.ownerState),theme:m},{className:(0,ue.Z)(k.badge,R.className),children:M}))]}))}));var _e=xe,Se=n(30067);function Ee(e){return(0,ge.Z)("ButtonUnstyled",e)}var Te=(0,me.Z)("ButtonUnstyled",["root","active","disabled","focusVisible"]),Ce=n(99962);function Me(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>t.match(/^on[A-Z]/)&&"function"==typeof e[t])).forEach((n=>{t[n]=e[n]})),t}function ke(e){var t;const{component:n,components:r={},disabled:i=!1,href:o,ref:s,tabIndex:a=0,to:l,type:c}=e,u=J.useRef(),[d,h]=J.useState(!1),{isFocusVisibleRef:f,onFocus:p,onBlur:m,ref:g}=(0,Ce.Z)(),[v,y]=J.useState(!1);i&&v&&y(!1),J.useEffect((()=>{f.current=v}),[v,f]);const b=e=>t=>{var n;v&&t.preventDefault(),null==(n=e.onMouseLeave)||n.call(e,t)},w=e=>t=>{var n;m(t),!1===f.current&&y(!1),null==(n=e.onBlur)||n.call(e,t)},x=(0,te.Z)((e=>t=>{var n,r;(u.current||(u.current=t.currentTarget),p(t),!0===f.current)&&(y(!0),null==(r=e.onFocusVisible)||r.call(e,t));null==(n=e.onFocus)||n.call(e,t)})),_=null!=(t=null!=n?n:r.Root)?t:"button",S=()=>{const e=u.current;return"button"!==_&&!("A"===(null==e?void 0:e.tagName)&&null!=e&&e.href)},T=e=>t=>{var n;t.target!==t.currentTarget||i||h(!0),null==(n=e.onMouseDown)||n.call(e,t)},C=e=>t=>{var n;t.target===t.currentTarget&&h(!1),null==(n=e.onMouseUp)||n.call(e,t)},M=(0,te.Z)((e=>t=>{var n,r;(t.target===t.currentTarget&&S()&&" "===t.key&&t.preventDefault(),t.target!==t.currentTarget||" "!==t.key||i||h(!0),null==(n=e.onKeyDown)||n.call(e,t),t.target===t.currentTarget&&S()&&"Enter"===t.key&&!i)&&(t.preventDefault(),null==(r=e.onClick)||r.call(e,t))})),k=(0,te.Z)((e=>t=>{var n,r;(t.target===t.currentTarget&&h(!1),null==(n=e.onKeyUp)||n.call(e,t),t.target===t.currentTarget&&S()&&" "===t.key&&!t.defaultPrevented)&&(null==(r=e.onClick)||r.call(e,t))})),P=(0,Se.Z)(g,u),A=(0,Se.Z)(s,P),[I,R]=J.useState(""),L=e=>{var t;R(null!=(t=null==e?void 0:e.tagName)?t:""),(0,ne.Z)(A,e)},O={};"BUTTON"===I?(O.type=null!=c?c:"button",O.disabled=i):""!==I&&(o||l||(O.role="button"),i&&(O["aria-disabled"]=i));return{getRootProps:t=>{const n=Me(e),r=(0,E.Z)({},n,t),o={onBlur:w(r),onFocus:x(r),onKeyDown:M(r),onKeyUp:k(r),onMouseDown:T(r),onMouseLeave:b(r),onMouseUp:C(r)},s=(0,E.Z)({},r,o);return delete s.onFocusVisible,(0,E.Z)({tabIndex:i?-1:a,type:c,ref:L},O,s)},focusVisible:v,setFocusVisible:y,disabled:i,active:d}}var Pe=n(37017);const Ae=["className","component","components","componentsProps","children","disabled","action","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseLeave"];var Ie=J.forwardRef((function(e,t){var n;const{className:r,component:i,components:o={},componentsProps:s={},children:a,action:l}=e,c=(0,T.Z)(e,Ae),u=J.useRef(),d=(0,Se.Z)(u,t),{active:h,focusVisible:f,setFocusVisible:p,getRootProps:m}=ke((0,E.Z)({},e,{ref:d}));J.useImperativeHandle(l,(()=>({focusVisible:()=>{p(!0),u.current.focus()}})),[p]);const g=(0,E.Z)({},e,{active:h,focusVisible:f}),v=null!=(n=null!=i?i:o.Root)?n:"button",y=(0,Pe.Z)(v,(0,E.Z)({},c,s.root),g),b=(e=>{const{active:t,disabled:n,focusVisible:r}=e,i={root:["root",n&&"disabled",r&&"focusVisible",t&&"active"]};return(0,pe.Z)(i,Ee,{})})(g);return(0,be.jsx)(v,(0,E.Z)({},m(),y,{className:(0,ue.Z)(b.root,r,y.className),children:a}))}));var Re=J.createContext(void 0);function Le(e){return(0,ge.Z)("MuiFormControl",e)}var Oe=(0,me.Z)("MuiFormControl",["root","disabled"]);const Ne=["defaultValue","children","className","component","components","componentsProps","disabled","error","focused","onChange","required","value"];var De=J.forwardRef((function(e,t){var n;const{defaultValue:r,children:i,className:o,component:s,components:a={},componentsProps:l={},disabled:c=!1,error:u=!1,focused:d=!1,onChange:h,required:f=!1,value:p}=e,m=(0,T.Z)(e,Ne),[g,v]=(0,ee.Z)({controlled:p,default:r,name:"FormControl",state:"value"}),y=function(e){return null!=e&&!(Array.isArray(e)&&0===e.length)&&""!==e}(g),[b,w]=J.useState(!1);c&&b&&w(!1);const x=void 0===d||c?b:d,_=(0,E.Z)({},e,{disabled:c,error:u,filled:y,focused:x,required:f});const S={disabled:c,error:u,filled:y,focused:x,onBlur:()=>{w(!1)},onChange:e=>{v(e.target.value),null==h||h(e)},onFocus:()=>{w(!0)},registerEffect:()=>{},required:f,value:null!=g?g:""},C=null!=(n=null!=s?s:a.Root)?n:"div",M=(0,Pe.Z)(C,(0,E.Z)({},m,l.root),_);return(0,be.jsx)(Re.Provider,{value:S,children:(0,be.jsx)(C,(0,E.Z)({ref:t},M,{className:(0,ue.Z)(Oe.root,o,null==M?void 0:M.className,c&&Oe.disabled),children:i}))})}));function Fe(){return J.useContext(Re)}var Be=n(38258),Ze=n(59370),Ve=n(59612),ze=n(58188),Ue=n(55457),je=n(53256);function He(e){const{checked:t,defaultChecked:n,disabled:r,onBlur:i,onChange:o,onFocus:s,onFocusVisible:a,readOnly:l,required:c}=e,[u,d]=(0,ee.Z)({controlled:t,default:Boolean(n),name:"Switch",state:"checked"}),h=(0,te.Z)(((e,t)=>{e.nativeEvent.defaultPrevented||(d(e.target.checked),null==o||o(e),null==t||t(e))})),{isFocusVisibleRef:f,onBlur:p,onFocus:m,ref:g}=(0,Ce.Z)(),[v,y]=J.useState(!1);r&&v&&y(!1),J.useEffect((()=>{f.current=v}),[v,f]);const b=J.useRef(null),w=(0,te.Z)(((e,t)=>{b.current||(b.current=e.currentTarget),m(e),!0===f.current&&(y(!0),null==a||a(e)),null==s||s(e),null==t||t(e)})),x=(0,te.Z)(((e,t)=>{p(e),!1===f.current&&y(!1),null==i||i(e),null==t||t(e)})),_=(0,Se.Z)(g,b);return{checked:u,disabled:Boolean(r),focusVisible:v,getInputProps:(e={})=>(0,E.Z)({checked:t,defaultChecked:n,disabled:r,readOnly:l,required:c,type:"checkbox"},e,{onChange:t=>h(t,e.onChange),onFocus:t=>w(t,e.onFocus),onBlur:t=>x(t,e.onBlur),ref:_}),readOnly:Boolean(l)}}function Ge(e){return(0,ge.Z)("MuiSwitch",e)}var We=(0,me.Z)("MuiSwitch",["root","input","track","thumb","checked","disabled","focusVisible","readOnly"]);const $e=["checked","className","component","components","componentsProps","defaultChecked","disabled","onBlur","onChange","onFocus","onFocusVisible","readOnly","required"],qe=J.forwardRef((function(e,t){var n,r,i,o,s,a,l;const{checked:c,className:u,component:d,components:h={},componentsProps:f={},defaultChecked:p,disabled:m,onBlur:g,onChange:v,onFocus:y,onFocusVisible:b,readOnly:w}=e,x=(0,T.Z)(e,$e),_={checked:c,defaultChecked:p,disabled:m,onBlur:g,onChange:v,onFocus:y,onFocusVisible:b,readOnly:w},{getInputProps:S,checked:C,disabled:M,focusVisible:k,readOnly:P}=He(_),A=(0,E.Z)({},e,{checked:C,disabled:M,focusVisible:k,readOnly:P}),I=null!=(n=null!=d?d:h.Root)?n:"span",R=(0,Pe.Z)(I,(0,E.Z)({},x,f.root),A),L=null!=(r=h.Thumb)?r:"span",O=(0,Pe.Z)(L,null!=(i=f.thumb)?i:{},A),N=null!=(o=h.Input)?o:"input",D=(0,Pe.Z)(N,null!=(s=f.input)?s:{},A),F=null===h.Track?()=>null:null!=(a=h.Track)?a:"span",B=(0,Pe.Z)(F,null!=(l=f.track)?l:{},A),Z=(0,ue.Z)(C&&We.checked,M&&We.disabled,k&&We.focusVisible,P&&We.readOnly);return(0,be.jsxs)(I,(0,E.Z)({ref:t},R,{className:(0,ue.Z)(We.root,Z,u,null==R?void 0:R.className),children:[(0,be.jsx)(F,(0,E.Z)({},B,{className:(0,ue.Z)(We.track,null==B?void 0:B.className)})),(0,be.jsx)(L,(0,E.Z)({},O,{className:(0,ue.Z)(We.thumb,null==O?void 0:O.className)})),(0,be.jsx)(N,(0,E.Z)({},S(D),{className:(0,ue.Z)(We.input,null==D?void 0:D.className)}))]}))}));var Ye=qe,Ke=n(47484),Xe=(n(59864),n(12509)),Je=n(21987);var Qe=J.createContext({}),et=n(49299);function tt(e){return(0,ge.Z)("MuiAccordion",e)}var nt=(0,me.Z)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]);const rt=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","TransitionComponent","TransitionProps"],it=(0,W.ZP)(Je.Z,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${nt.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})((({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&:before":{display:"none"}},[`&.${nt.expanded}`]:{"&:before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&:before":{display:"none"}}},[`&.${nt.disabled}`]:{backgroundColor:e.palette.action.disabledBackground}}}),(({theme:e,ownerState:t})=>(0,E.Z)({},!t.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!t.disableGutters&&{[`&.${nt.expanded}`]:{margin:"16px 0"}})));var ot=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiAccordion"}),{children:r,className:i,defaultExpanded:o=!1,disabled:s=!1,disableGutters:a=!1,expanded:l,onChange:c,square:u=!1,TransitionComponent:d=Xe.Z,TransitionProps:h}=n,f=(0,T.Z)(n,rt),[p,m]=(0,et.Z)({controlled:l,default:o,name:"Accordion",state:"expanded"}),g=J.useCallback((e=>{m(!p),c&&c(e,!p)}),[p,c,m]),[v,...y]=J.Children.toArray(r),b=J.useMemo((()=>({expanded:p,disabled:s,disableGutters:a,toggle:g})),[p,s,a,g]),w=(0,E.Z)({},n,{square:u,disabled:s,disableGutters:a,expanded:p}),x=(e=>{const{classes:t,square:n,expanded:r,disabled:i,disableGutters:o}=e,s={root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],region:["region"]};return(0,pe.Z)(s,tt,t)})(w);return(0,be.jsxs)(it,(0,E.Z)({className:(0,ue.Z)(x.root,i),ref:t,ownerState:w,square:u},f,{children:[(0,be.jsx)(Qe.Provider,{value:b,children:v}),(0,be.jsx)(d,(0,E.Z)({in:p,timeout:"auto"},h,{children:(0,be.jsx)("div",{"aria-labelledby":v.props.id,id:v.props["aria-controls"],role:"region",className:x.region,children:y})}))]}))}));function st(e){return(0,ge.Z)("MuiAccordionActions",e)}var at=(0,me.Z)("MuiAccordionActions",["root","spacing"]);const lt=["className","disableSpacing"],ct=(0,W.ZP)("div",{name:"MuiAccordionActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,E.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})));var ut=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiAccordionActions"}),{className:r,disableSpacing:i=!1}=n,o=(0,T.Z)(n,lt),s=(0,E.Z)({},n,{disableSpacing:i}),a=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,pe.Z)(r,st,t)})(s);return(0,be.jsx)(ct,(0,E.Z)({className:(0,ue.Z)(a.root,r),ref:t,ownerState:s},o))}));function dt(e){return(0,ge.Z)("MuiAccordionDetails",e)}var ht=(0,me.Z)("MuiAccordionDetails",["root"]);const ft=["className"],pt=(0,W.ZP)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({padding:e.spacing(1,2,2)})));var mt=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiAccordionDetails"}),{className:r}=n,i=(0,T.Z)(n,ft),o=n,s=(e=>{const{classes:t}=e;return(0,pe.Z)({root:["root"]},dt,t)})(o);return(0,be.jsx)(pt,(0,E.Z)({className:(0,ue.Z)(s.root,r),ref:t,ownerState:o},i))})),gt=n(96458);function vt(e){return(0,ge.Z)("MuiAccordionSummary",e)}var yt=(0,me.Z)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]);const bt=["children","className","expandIcon","focusVisibleClassName","onClick"],wt=(0,W.ZP)(gt.Z,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e,ownerState:t})=>{const n={duration:e.transitions.duration.shortest};return(0,E.Z)({display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],n),[`&.${yt.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`&.${yt.disabled}`]:{opacity:e.palette.action.disabledOpacity},[`&:hover:not(.${yt.disabled})`]:{cursor:"pointer"}},!t.disableGutters&&{[`&.${yt.expanded}`]:{minHeight:64}})})),xt=(0,W.ZP)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((({theme:e,ownerState:t})=>(0,E.Z)({display:"flex",flexGrow:1,margin:"12px 0"},!t.disableGutters&&{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${yt.expanded}`]:{margin:"20px 0"}}))),_t=(0,W.ZP)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((({theme:e})=>({display:"flex",color:e.palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${yt.expanded}`]:{transform:"rotate(180deg)"}})));var St=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiAccordionSummary"}),{children:r,className:i,expandIcon:o,focusVisibleClassName:s,onClick:a}=n,l=(0,T.Z)(n,bt),{disabled:c=!1,disableGutters:u,expanded:d,toggle:h}=J.useContext(Qe),f=(0,E.Z)({},n,{expanded:d,disabled:c,disableGutters:u}),p=(e=>{const{classes:t,expanded:n,disabled:r,disableGutters:i}=e,o={root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]};return(0,pe.Z)(o,vt,t)})(f);return(0,be.jsxs)(wt,(0,E.Z)({focusRipple:!1,disableRipple:!0,disabled:c,component:"div","aria-expanded":d,className:(0,ue.Z)(p.root,i),focusVisibleClassName:(0,ue.Z)(p.focusVisible,s),onClick:e=>{h&&h(e),a&&a(e)},ref:t,ownerState:f},l,{children:[(0,be.jsx)(xt,{className:p.content,ownerState:f,children:r}),o&&(0,be.jsx)(_t,{className:p.expandIconWrapper,ownerState:f,children:o})]}))})),Et=n(98216);function Tt(e){return(0,ge.Z)("MuiAlert",e)}var Ct,Mt=(0,me.Z)("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),kt=n(54799),Pt=n(82066),At=(0,Pt.Z)((0,be.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),It=(0,Pt.Z)((0,be.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),Rt=(0,Pt.Z)((0,be.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Lt=(0,Pt.Z)((0,be.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),Ot=(0,Pt.Z)((0,be.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const Nt=["action","children","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"],Dt=(0,W.ZP)(Je.Z,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,Et.Z)(n.color||n.severity)}`]]}})((({theme:e,ownerState:t})=>{const n="light"===e.palette.mode?I._j:I.$n,r="light"===e.palette.mode?I.$n:I._j,i=t.color||t.severity;return(0,E.Z)({},e.typography.body2,{borderRadius:e.shape.borderRadius,backgroundColor:"transparent",display:"flex",padding:"6px 16px"},i&&"standard"===t.variant&&{color:n(e.palette[i].light,.6),backgroundColor:r(e.palette[i].light,.9),[`& .${Mt.icon}`]:{color:"dark"===e.palette.mode?e.palette[i].main:e.palette[i].light}},i&&"outlined"===t.variant&&{color:n(e.palette[i].light,.6),border:`1px solid ${e.palette[i].light}`,[`& .${Mt.icon}`]:{color:"dark"===e.palette.mode?e.palette[i].main:e.palette[i].light}},i&&"filled"===t.variant&&{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:"dark"===e.palette.mode?e.palette[i].dark:e.palette[i].main})})),Ft=(0,W.ZP)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Bt=(0,W.ZP)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),Zt=(0,W.ZP)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Vt={success:(0,be.jsx)(At,{fontSize:"inherit"}),warning:(0,be.jsx)(It,{fontSize:"inherit"}),error:(0,be.jsx)(Rt,{fontSize:"inherit"}),info:(0,be.jsx)(Lt,{fontSize:"inherit"})};var zt=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiAlert"}),{action:r,children:i,className:o,closeText:s="Close",color:a,icon:l,iconMapping:c=Vt,onClose:u,role:d="alert",severity:h="success",variant:f="standard"}=n,p=(0,T.Z)(n,Nt),m=(0,E.Z)({},n,{color:a,severity:h,variant:f}),g=(e=>{const{variant:t,color:n,severity:r,classes:i}=e,o={root:["root",`${t}${(0,Et.Z)(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,pe.Z)(o,Tt,i)})(m);return(0,be.jsxs)(Dt,(0,E.Z)({role:d,square:!0,elevation:0,ownerState:m,className:(0,ue.Z)(g.root,o),ref:t},p,{children:[!1!==l?(0,be.jsx)(Ft,{ownerState:m,className:g.icon,children:l||c[h]||Vt[h]}):null,(0,be.jsx)(Bt,{ownerState:m,className:g.message,children:i}),null!=r?(0,be.jsx)(Zt,{className:g.action,children:r}):null,null==r&&u?(0,be.jsx)(Zt,{ownerState:m,className:g.action,children:(0,be.jsx)(kt.Z,{size:"small","aria-label":s,title:s,color:"inherit",onClick:u,children:Ct||(Ct=(0,be.jsx)(Ot,{fontSize:"small"}))})}):null]}))})),Ut=n(23972);function jt(e){return(0,ge.Z)("MuiAlertTitle",e)}var Ht=(0,me.Z)("MuiAlertTitle",["root"]);const Gt=["className"],Wt=(0,W.ZP)(Ut.Z,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({fontWeight:e.typography.fontWeightMedium,marginTop:-2})));var $t=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiAlertTitle"}),{className:r}=n,i=(0,T.Z)(n,Gt),o=n,s=(e=>{const{classes:t}=e;return(0,pe.Z)({root:["root"]},jt,t)})(o);return(0,be.jsx)(Wt,(0,E.Z)({gutterBottom:!0,component:"div",ownerState:o,ref:t,className:(0,ue.Z)(s.root,r)},i))}));function qt(e){return(0,ge.Z)("MuiAppBar",e)}var Yt=(0,me.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const Kt=["className","color","enableColorOnDark","position"],Xt=(0,W.ZP)(Je.Z,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,Et.Z)(n.position)}`],t[`color${(0,Et.Z)(n.color)}`]]}})((({theme:e,ownerState:t})=>{const n="light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900];return(0,E.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===t.position&&{position:"fixed",zIndex:e.zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===t.position&&{position:"absolute",zIndex:e.zIndex.appBar,top:0,left:"auto",right:0},"sticky"===t.position&&{position:"sticky",zIndex:e.zIndex.appBar,top:0,left:"auto",right:0},"static"===t.position&&{position:"static"},"relative"===t.position&&{position:"relative"},"default"===t.color&&{backgroundColor:n,color:e.palette.getContrastText(n)},t.color&&"default"!==t.color&&"inherit"!==t.color&&"transparent"!==t.color&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},"inherit"===t.color&&{color:"inherit"},"dark"===e.palette.mode&&!t.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===t.color&&(0,E.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===e.palette.mode&&{backgroundImage:"none"}))}));var Jt=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiAppBar"}),{className:r,color:i="primary",enableColorOnDark:o=!1,position:s="fixed"}=n,a=(0,T.Z)(n,Kt),l=(0,E.Z)({},n,{color:i,position:s,enableColorOnDark:o}),c=(e=>{const{color:t,position:n,classes:r}=e,i={root:["root",`color${(0,Et.Z)(t)}`,`position${(0,Et.Z)(n)}`]};return(0,pe.Z)(i,qt,r)})(l);return(0,be.jsx)(Xt,(0,E.Z)({square:!0,component:"header",ownerState:l,elevation:4,className:(0,ue.Z)(c.root,r,"fixed"===s&&"mui-fixed"),ref:t},a))})),Qt=n(14594);function en(e){return(0,ge.Z)("MuiListSubheader",e)}var tn=(0,me.Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const nn=["className","color","component","disableGutters","disableSticky","inset"],rn=(0,W.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,Et.Z)(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})((({theme:e,ownerState:t})=>(0,E.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},"primary"===t.color&&{color:e.palette.primary.main},"inherit"===t.color&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:e.palette.background.paper})));var on=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiListSubheader"}),{className:r,color:i="default",component:o="li",disableGutters:s=!1,disableSticky:a=!1,inset:l=!1}=n,c=(0,T.Z)(n,nn),u=(0,E.Z)({},n,{color:i,component:o,disableGutters:s,disableSticky:a,inset:l}),d=(e=>{const{classes:t,color:n,disableGutters:r,inset:i,disableSticky:o}=e,s={root:["root","default"!==n&&`color${(0,Et.Z)(n)}`,!r&&"gutters",i&&"inset",!o&&"sticky"]};return(0,pe.Z)(s,en,t)})(u);return(0,be.jsx)(rn,(0,E.Z)({as:o,className:(0,ue.Z)(d.root,r),ref:t,ownerState:u},c))})),sn=(0,Pt.Z)((0,be.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"),an=n(51705);function ln(e){return(0,ge.Z)("MuiChip",e)}var cn=(0,me.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorPrimary","colorSecondary","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","focusVisible"]);const un=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"],dn=(0,W.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,clickable:i,onDelete:o,size:s,variant:a}=n;return[{[`& .${cn.avatar}`]:t.avatar},{[`& .${cn.avatar}`]:t[`avatar${(0,Et.Z)(s)}`]},{[`& .${cn.avatar}`]:t[`avatarColor${(0,Et.Z)(r)}`]},{[`& .${cn.icon}`]:t.icon},{[`& .${cn.icon}`]:t[`icon${(0,Et.Z)(s)}`]},{[`& .${cn.icon}`]:t[`iconColor${(0,Et.Z)(r)}`]},{[`& .${cn.deleteIcon}`]:t.deleteIcon},{[`& .${cn.deleteIcon}`]:t[`deleteIcon${(0,Et.Z)(s)}`]},{[`& .${cn.deleteIcon}`]:t[`deleteIconColor${(0,Et.Z)(r)}`]},{[`& .${cn.deleteIcon}`]:t[`deleteIconOutlinedColor${(0,Et.Z)(r)}`]},t.root,t[`size${(0,Et.Z)(s)}`],t[`color${(0,Et.Z)(r)}`],i&&t.clickable,i&&"default"!==r&&t[`clickableColor${(0,Et.Z)(r)})`],o&&t.deletable,o&&"default"!==r&&t[`deletableColor${(0,Et.Z)(r)}`],t[a],"outlined"===a&&t[`outlined${(0,Et.Z)(r)}`]]}})((({theme:e,ownerState:t})=>{const n=(0,I.Fq)(e.palette.text.primary,.26);return(0,E.Z)({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:e.palette.text.primary,backgroundColor:e.palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${cn.disabled}`]:{opacity:e.palette.action.disabledOpacity,pointerEvents:"none"},[`& .${cn.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:"light"===e.palette.mode?e.palette.grey[700]:e.palette.grey[300],fontSize:e.typography.pxToRem(12)},[`& .${cn.avatarColorPrimary}`]:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.dark},[`& .${cn.avatarColorSecondary}`]:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.dark},[`& .${cn.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${cn.icon}`]:(0,E.Z)({color:"light"===e.palette.mode?e.palette.grey[700]:e.palette.grey[300],marginLeft:5,marginRight:-6},"small"===t.size&&{fontSize:18,marginLeft:4,marginRight:-4},"default"!==t.color&&{color:"inherit"}),[`& .${cn.deleteIcon}`]:(0,E.Z)({WebkitTapHighlightColor:"transparent",color:n,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:(0,I.Fq)(n,.4)}},"small"===t.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==t.color&&{color:(0,I.Fq)(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:e.palette[t.color].contrastText}})},"small"===t.size&&{height:24},"default"!==t.color&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},t.onDelete&&{[`&.${cn.focusVisible}`]:{backgroundColor:(0,I.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&"default"!==t.color&&{[`&.${cn.focusVisible}`]:{backgroundColor:e.palette[t.color].dark}})}),(({theme:e,ownerState:t})=>(0,E.Z)({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:(0,I.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${cn.focusVisible}`]:{backgroundColor:(0,I.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:e.shadows[1]}},t.clickable&&"default"!==t.color&&{[`&:hover, &.${cn.focusVisible}`]:{backgroundColor:e.palette[t.color].dark}})),(({theme:e,ownerState:t})=>(0,E.Z)({},"outlined"===t.variant&&{backgroundColor:"transparent",border:`1px solid ${"light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${cn.clickable}:hover`]:{backgroundColor:e.palette.action.hover},[`&.${cn.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`& .${cn.avatar}`]:{marginLeft:4},[`& .${cn.avatarSmall}`]:{marginLeft:2},[`& .${cn.icon}`]:{marginLeft:4},[`& .${cn.iconSmall}`]:{marginLeft:2},[`& .${cn.deleteIcon}`]:{marginRight:5},[`& .${cn.deleteIconSmall}`]:{marginRight:3}},"outlined"===t.variant&&"default"!==t.color&&{color:e.palette[t.color].main,border:`1px solid ${(0,I.Fq)(e.palette[t.color].main,.7)}`,[`&.${cn.clickable}:hover`]:{backgroundColor:(0,I.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${cn.focusVisible}`]:{backgroundColor:(0,I.Fq)(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${cn.deleteIcon}`]:{color:(0,I.Fq)(e.palette[t.color].main,.7),"&:hover, &:active":{color:e.palette[t.color].main}}}))),hn=(0,W.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${(0,Et.Z)(r)}`]]}})((({ownerState:e})=>(0,E.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===e.size&&{paddingLeft:8,paddingRight:8})));function fn(e){return"Backspace"===e.key||"Delete"===e.key}var pn=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiChip"}),{avatar:r,className:i,clickable:o,color:s="default",component:a,deleteIcon:l,disabled:c=!1,icon:u,label:d,onClick:h,onDelete:f,onKeyDown:p,onKeyUp:m,size:g="medium",variant:v="filled"}=n,y=(0,T.Z)(n,un),b=J.useRef(null),w=(0,an.Z)(b,t),x=e=>{e.stopPropagation(),f&&f(e)},_=!(!1===o||!h)||o,S="small"===g,C=_||f?gt.Z:a||"div",M=(0,E.Z)({},n,{component:C,disabled:c,size:g,color:s,onDelete:!!f,clickable:_,variant:v}),k=(e=>{const{classes:t,disabled:n,size:r,color:i,onDelete:o,clickable:s,variant:a}=e,l={root:["root",a,n&&"disabled",`size${(0,Et.Z)(r)}`,`color${(0,Et.Z)(i)}`,s&&"clickable",s&&`clickableColor${(0,Et.Z)(i)}`,o&&"deletable",o&&`deletableColor${(0,Et.Z)(i)}`,`${a}${(0,Et.Z)(i)}`],label:["label",`label${(0,Et.Z)(r)}`],avatar:["avatar",`avatar${(0,Et.Z)(r)}`,`avatarColor${(0,Et.Z)(i)}`],icon:["icon",`icon${(0,Et.Z)(r)}`,`iconColor${(0,Et.Z)(i)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,Et.Z)(r)}`,`deleteIconColor${(0,Et.Z)(i)}`,`deleteIconOutlinedColor${(0,Et.Z)(i)}`]};return(0,pe.Z)(l,ln,t)})(M),P=C===gt.Z?{component:a||"div",focusVisibleClassName:k.focusVisible,disableRipple:Boolean(f)}:{};let A=null;if(f){const e=(0,ue.Z)("default"!==s&&("outlined"===v?k[`deleteIconOutlinedColor${(0,Et.Z)(s)}`]:k[`deleteIconColor${(0,Et.Z)(s)}`]),S&&k.deleteIconSmall);A=l&&J.isValidElement(l)?J.cloneElement(l,{className:(0,ue.Z)(l.props.className,k.deleteIcon,e),onClick:x}):(0,be.jsx)(sn,{className:(0,ue.Z)(k.deleteIcon,e),onClick:x})}let I=null;r&&J.isValidElement(r)&&(I=J.cloneElement(r,{className:(0,ue.Z)(k.avatar,r.props.className)}));let R=null;return u&&J.isValidElement(u)&&(R=J.cloneElement(u,{className:(0,ue.Z)(k.icon,u.props.className)})),(0,be.jsxs)(dn,(0,E.Z)({as:C,className:(0,ue.Z)(k.root,i),disabled:!(!_||!c)||void 0,onClick:h,onKeyDown:e=>{e.currentTarget===e.target&&fn(e)&&e.preventDefault(),p&&p(e)},onKeyUp:e=>{e.currentTarget===e.target&&(f&&fn(e)?f(e):"Escape"===e.key&&b.current&&b.current.blur()),m&&m(e)},ref:w,ownerState:M},P,y,{children:[I||R,(0,be.jsx)(hn,{className:(0,ue.Z)(k.label),ownerState:M,children:d}),A]}))})),mn=n(60224);function gn(e){return(0,ge.Z)("MuiAutocomplete",e)}var vn,yn,bn=(0,me.Z)("MuiAutocomplete",["root","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);const wn=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","value"],xn=(0,W.ZP)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:i,hasPopupIcon:o,inputFocused:s,size:a}=n;return[{[`& .${bn.tag}`]:t.tag},{[`& .${bn.tag}`]:t[`tagSize${(0,Et.Z)(a)}`]},{[`& .${bn.inputRoot}`]:t.inputRoot},{[`& .${bn.input}`]:t.input},{[`& .${bn.input}`]:s&&t.inputFocused},t.root,r&&t.fullWidth,o&&t.hasPopupIcon,i&&t.hasClearIcon]}})((({ownerState:e})=>(0,E.Z)({[`&.${bn.focused} .${bn.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${bn.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${bn.tag}`]:(0,E.Z)({margin:3,maxWidth:"calc(100% - 6px)"},"small"===e.size&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${bn.inputRoot}`]:{flexWrap:"wrap",[`.${bn.hasPopupIcon}&, .${bn.hasClearIcon}&`]:{paddingRight:30},[`.${bn.hasPopupIcon}.${bn.hasClearIcon}&`]:{paddingRight:56},[`& .${bn.input}`]:{width:0,minWidth:30}},"& .MuiInput-root":{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},"& .MuiInput-root.MuiInputBase-sizeSmall":{"& .MuiInput-input":{padding:"2px 4px 3px 0"}},"& .MuiOutlinedInput-root":{padding:9,[`.${bn.hasPopupIcon}&, .${bn.hasClearIcon}&`]:{paddingRight:39},[`.${bn.hasPopupIcon}.${bn.hasClearIcon}&`]:{paddingRight:65},[`& .${bn.input}`]:{padding:"7.5px 4px 7.5px 6px"},[`& .${bn.endAdornment}`]:{right:9}},"& .MuiOutlinedInput-root.MuiInputBase-sizeSmall":{padding:6,[`& .${bn.input}`]:{padding:"2.5px 4px 2.5px 6px"}},"& .MuiFilledInput-root":{paddingTop:19,paddingLeft:8,[`.${bn.hasPopupIcon}&, .${bn.hasClearIcon}&`]:{paddingRight:39},[`.${bn.hasPopupIcon}.${bn.hasClearIcon}&`]:{paddingRight:65},"& .MuiFilledInput-input":{padding:"7px 4px"},[`& .${bn.endAdornment}`]:{right:9}},"& .MuiFilledInput-root.MuiInputBase-sizeSmall":{paddingBottom:1,"& .MuiFilledInput-input":{padding:"2.5px 4px"}},[`& .${bn.input}`]:(0,E.Z)({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})}))),_n=(0,W.ZP)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),Sn=(0,W.ZP)(kt.Z,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),En=(0,W.ZP)(kt.Z,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>(0,E.Z)({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})((({ownerState:e})=>(0,E.Z)({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"}))),Tn=(0,W.ZP)(Qt.Z,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${bn.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})((({theme:e,ownerState:t})=>(0,E.Z)({zIndex:e.zIndex.modal},t.disablePortal&&{position:"absolute"}))),Cn=(0,W.ZP)(Je.Z,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})((({theme:e})=>(0,E.Z)({},e.typography.body1,{overflow:"auto"}))),Mn=(0,W.ZP)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})((({theme:e})=>({color:e.palette.text.secondary,padding:"14px 16px"}))),kn=(0,W.ZP)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})((({theme:e})=>({color:e.palette.text.secondary,padding:"14px 16px"}))),Pn=(0,W.ZP)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})((({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",[`& .${bn.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${bn.focused}`]:{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:e.palette.action.disabledOpacity,pointerEvents:"none"},[`&.${bn.focusVisible}`]:{backgroundColor:e.palette.action.focus},'&[aria-selected="true"]':{backgroundColor:(0,I.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${bn.focused}`]:{backgroundColor:(0,I.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.palette.action.selected}},[`&.${bn.focusVisible}`]:{backgroundColor:(0,I.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}}))),An=(0,W.ZP)(on,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})((({theme:e})=>({backgroundColor:e.palette.background.paper,top:-8}))),In=(0,W.ZP)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${bn.option}`]:{paddingLeft:24}});var Rn=J.forwardRef((function(e,t){var n;const r=(0,G.Z)({props:e,name:"MuiAutocomplete"}),{autoComplete:i=!1,autoHighlight:o=!1,autoSelect:s=!1,blurOnSelect:a=!1,ChipProps:l,className:c,clearIcon:u=vn||(vn=(0,be.jsx)(Ot,{fontSize:"small"})),clearOnBlur:d=!r.freeSolo,clearOnEscape:h=!1,clearText:f="Clear",closeText:p="Close",componentsProps:m={},defaultValue:g=(r.multiple?[]:null),disableClearable:v=!1,disableCloseOnSelect:y=!1,disabled:b=!1,disabledItemsFocusable:w=!1,disableListWrap:x=!1,disablePortal:_=!1,filterSelectedOptions:S=!1,forcePopupIcon:C="auto",freeSolo:M=!1,fullWidth:k=!1,getLimitTagsText:P=(e=>`+${e}`),getOptionLabel:A=(e=>{var t;return null!=(t=e.label)?t:e}),groupBy:I,handleHomeEndKeys:R=!r.freeSolo,includeInputInList:L=!1,limitTags:O=-1,ListboxComponent:N="ul",ListboxProps:D,loading:F=!1,loadingText:B="Loading",multiple:Z=!1,noOptionsText:V="No options",openOnFocus:z=!1,openText:U="Open",PaperComponent:j=Je.Z,PopperComponent:H=Qt.Z,popupIcon:W=yn||(yn=(0,be.jsx)(mn.Z,{})),renderGroup:$,renderInput:q,renderOption:Y,renderTags:K,selectOnFocus:X=!r.freeSolo,size:Q="medium"}=r,ee=(0,T.Z)(r,wn),{getRootProps:te,getInputProps:ne,getInputLabelProps:re,getPopupIndicatorProps:ie,getClearProps:oe,getTagProps:se,getListboxProps:le,getOptionProps:ce,value:de,dirty:he,id:fe,popupOpen:me,focused:ge,focusedTag:ve,anchorEl:ye,setAnchorEl:we,inputValue:xe,groupedOptions:_e}=ae((0,E.Z)({},r,{componentName:"Autocomplete"})),Se=!v&&!b&&he,Ee=(!M||!0===C)&&!1!==C,Te=(0,E.Z)({},r,{disablePortal:_,focused:ge,fullWidth:k,hasClearIcon:Se,hasPopupIcon:Ee,inputFocused:-1===ve,popupOpen:me,size:Q}),Ce=(e=>{const{classes:t,disablePortal:n,focused:r,fullWidth:i,hasClearIcon:o,hasPopupIcon:s,inputFocused:a,popupOpen:l,size:c}=e,u={root:["root",r&&"focused",i&&"fullWidth",o&&"hasClearIcon",s&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",a&&"inputFocused"],tag:["tag",`tagSize${(0,Et.Z)(c)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",l&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,pe.Z)(u,gn,t)})(Te);let Me;if(Z&&de.length>0){const e=e=>(0,E.Z)({className:(0,ue.Z)(Ce.tag),disabled:b},se(e));Me=K?K(de,e):de.map(((t,n)=>(0,be.jsx)(pn,(0,E.Z)({label:A(t),size:Q},e({index:n}),l))))}if(O>-1&&Array.isArray(Me)){const e=Me.length-O;!ge&&e>0&&(Me=Me.splice(0,O),Me.push((0,be.jsx)("span",{className:Ce.tag,children:P(e)},Me.length)))}const ke=$||(e=>(0,be.jsxs)("li",{children:[(0,be.jsx)(An,{className:Ce.groupLabel,ownerState:Te,component:"div",children:e.group}),(0,be.jsx)(In,{className:Ce.groupUl,ownerState:Te,children:e.children})]},e.key)),Pe=Y||((e,t)=>(0,be.jsx)("li",(0,E.Z)({},e,{children:A(t)}))),Ae=(e,t)=>{const n=ce({option:e,index:t});return Pe((0,E.Z)({},n,{className:Ce.option}),e,{selected:n["aria-selected"],inputValue:xe})};return(0,be.jsxs)(J.Fragment,{children:[(0,be.jsx)(xn,(0,E.Z)({ref:t,className:(0,ue.Z)(Ce.root,c),ownerState:Te},te(ee),{children:q({id:fe,disabled:b,fullWidth:!0,size:"small"===Q?"small":void 0,InputLabelProps:re(),InputProps:{ref:we,className:Ce.inputRoot,startAdornment:Me,endAdornment:(0,be.jsxs)(_n,{className:Ce.endAdornment,ownerState:Te,children:[Se?(0,be.jsx)(Sn,(0,E.Z)({},oe(),{"aria-label":f,title:f,ownerState:Te},m.clearIndicator,{className:(0,ue.Z)(Ce.clearIndicator,null==(n=m.clearIndicator)?void 0:n.className),children:u})):null,Ee?(0,be.jsx)(En,(0,E.Z)({},ie(),{disabled:b,"aria-label":me?p:U,title:me?p:U,className:(0,ue.Z)(Ce.popupIndicator),ownerState:Te,children:W})):null]})},inputProps:(0,E.Z)({className:(0,ue.Z)(Ce.input),disabled:b},ne())})})),me&&ye?(0,be.jsx)(Tn,{as:H,className:(0,ue.Z)(Ce.popper),disablePortal:_,style:{width:ye?ye.clientWidth:null},ownerState:Te,role:"presentation",anchorEl:ye,open:!0,children:(0,be.jsxs)(Cn,{as:j,className:Ce.paper,ownerState:Te,children:[F&&0===_e.length?(0,be.jsx)(Mn,{className:Ce.loading,ownerState:Te,children:B}):null,0!==_e.length||M||F?null:(0,be.jsx)(kn,{className:Ce.noOptions,ownerState:Te,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:V}),_e.length>0?(0,be.jsx)(Pn,(0,E.Z)({as:N,className:Ce.listbox,ownerState:Te},le(),D,{children:_e.map(((e,t)=>I?ke({key:e.key,group:e.group,children:e.options.map(((t,n)=>Ae(t,e.index+n)))}):Ae(e,t)))})):null]})}):null]})})),Ln=n(88884),On=n(25727);function Nn(e){return(0,ge.Z)("MuiAvatarGroup",e)}var Dn=(0,me.Z)("MuiAvatarGroup",["root","avatar"]);const Fn=["children","className","max","spacing","variant"],Bn={small:-16,medium:null},Zn=(0,W.ZP)("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,t)=>(0,E.Z)({[`& .${Dn.avatar}`]:t.avatar},t.root)})((({theme:e})=>({"& .MuiAvatar-root":{border:`2px solid ${e.palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"}))),Vn=(0,W.ZP)(Ln.Z,{name:"MuiAvatarGroup",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})((({theme:e})=>({border:`2px solid ${e.palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}})));var zn=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiAvatarGroup"}),{children:r,className:i,max:o=5,spacing:s="medium",variant:a="circular"}=n,l=(0,T.Z)(n,Fn),c=o<2?2:o,u=(0,E.Z)({},n,{max:o,spacing:s,variant:a}),d=(e=>{const{classes:t}=e;return(0,pe.Z)({root:["root"],avatar:["avatar"]},Nn,t)})(u),h=J.Children.toArray(r).filter((e=>J.isValidElement(e))),f=h.length>c?h.length-c+1:0,p=s&&void 0!==Bn[s]?Bn[s]:-s;return(0,be.jsxs)(Zn,(0,E.Z)({ownerState:u,className:(0,ue.Z)(d.root,i),ref:t},l,{children:[f?(0,be.jsxs)(Vn,{ownerState:u,className:d.avatar,style:{marginLeft:p},variant:a,children:["+",f]}):null,h.slice(0,h.length-f).reverse().map((e=>J.cloneElement(e,{className:(0,ue.Z)(e.props.className,d.avatar),style:(0,E.Z)({marginLeft:p},e.props.style),variant:e.props.variant||a})))]}))})),Un=n(45889);const jn=["components","componentsProps","color","invisible","badgeContent","showZero","variant"],Hn=(0,E.Z)({},ye,(0,me.Z)("MuiBadge",["colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning"])),Gn=(0,W.ZP)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Wn=(0,W.ZP)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${(0,Et.Z)(n.anchorOrigin.vertical)}${(0,Et.Z)(n.anchorOrigin.horizontal)}${(0,Et.Z)(n.overlap)}`],"default"!==n.color&&t[`color${(0,Et.Z)(n.color)}`],n.invisible&&t.invisible]}})((({theme:e,ownerState:t})=>(0,E.Z)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},"default"!==t.color&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},"dot"===t.variant&&{borderRadius:4,height:8,minWidth:8,padding:0},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Hn.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Hn.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Hn.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Hn.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Hn.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Hn.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Hn.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Hn.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})})));var $n=J.forwardRef((function(e,t){var n,r;const i=(0,G.Z)({props:e,name:"MuiBadge"}),{components:o={},componentsProps:s={},color:a="default",invisible:l,badgeContent:c,showZero:u=!1,variant:d="standard"}=i,h=(0,T.Z)(i,jn),f=he({color:a});let p=l;null==l&&(0===c&&!u||null==c&&"dot"!==d)&&(p=!0);const{color:m=a}=p?f:i,g=(e=>{const{color:t,classes:n={}}=e;return(0,E.Z)({},n,{badge:(0,ue.Z)(n.badge,"default"!==t&&[ve(`color${(0,Et.Z)(t)}`),n[`color${(0,Et.Z)(t)}`]])})})((0,E.Z)({},i,{invisible:p,color:m}));return(0,be.jsx)(_e,(0,E.Z)({invisible:l,badgeContent:c,showZero:u,variant:d},h,{components:(0,E.Z)({Root:Gn,Badge:Wn},o),componentsProps:{root:(0,E.Z)({},s.root,(!o.Root||!(0,fe.Z)(o.Root))&&{ownerState:(0,E.Z)({},null==(n=s.root)?void 0:n.ownerState,{color:m})}),badge:(0,E.Z)({},s.badge,(!o.Thumb||!(0,fe.Z)(o.Thumb))&&{ownerState:(0,E.Z)({},null==(r=s.badge)?void 0:r.ownerState,{color:m})})},classes:g,ref:t}))}));function qn(e){return(0,ge.Z)("MuiBottomNavigation",e)}var Yn=(0,me.Z)("MuiBottomNavigation",["root"]);const Kn=["children","className","component","onChange","showLabels","value"],Xn=(0,W.ZP)("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:e.palette.background.paper})));var Jn=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiBottomNavigation"}),{children:r,className:i,component:o="div",onChange:s,showLabels:a=!1,value:l}=n,c=(0,T.Z)(n,Kn),u=(0,E.Z)({},n,{component:o,showLabels:a}),d=(e=>{const{classes:t}=e;return(0,pe.Z)({root:["root"]},qn,t)})(u);return(0,be.jsx)(Xn,(0,E.Z)({as:o,className:(0,ue.Z)(d.root,i),ref:t,ownerState:u},c,{children:J.Children.map(r,((e,t)=>{if(!J.isValidElement(e))return null;const n=void 0===e.props.value?t:e.props.value;return J.cloneElement(e,{selected:n===l,showLabel:void 0!==e.props.showLabel?e.props.showLabel:a,value:n,onChange:s})}))}))}));function Qn(e){return(0,ge.Z)("MuiBottomNavigationAction",e)}var er=(0,me.Z)("MuiBottomNavigationAction",["root","iconOnly","selected","label"]);const tr=["className","icon","label","onChange","onClick","selected","showLabel","value"],nr=(0,W.ZP)(gt.Z,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})((({theme:e,ownerState:t})=>(0,E.Z)({transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"6px 12px 8px",minWidth:80,maxWidth:168,color:e.palette.text.secondary,flexDirection:"column",flex:"1"},!t.showLabel&&!t.selected&&{paddingTop:16},{[`&.${er.selected}`]:{paddingTop:6,color:e.palette.primary.main}}))),rr=(0,W.ZP)("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})((({theme:e,ownerState:t})=>(0,E.Z)({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!t.showLabel&&!t.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${er.selected}`]:{fontSize:e.typography.pxToRem(14)}})));var ir=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiBottomNavigationAction"}),{className:r,icon:i,label:o,onChange:s,onClick:a,value:l}=n,c=(0,T.Z)(n,tr),u=n,d=(e=>{const{classes:t,showLabel:n,selected:r}=e,i={root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]};return(0,pe.Z)(i,Qn,t)})(u);return(0,be.jsxs)(nr,(0,E.Z)({ref:t,className:(0,ue.Z)(d.root,r),focusRipple:!0,onClick:e=>{s&&s(e,l),a&&a(e)},ownerState:u},c,{children:[i,(0,be.jsx)(rr,{className:d.label,ownerState:u,children:o})]}))})),or=n(24622),sr=(0,Pt.Z)((0,be.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");const ar=(0,W.ZP)(gt.Z,{skipSx:!0})((({theme:e})=>(0,E.Z)({display:"flex",marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},"light"===e.palette.mode?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,E.Z)({},"light"===e.palette.mode?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}),"&:active":(0,E.Z)({boxShadow:e.shadows[0]},"light"===e.palette.mode?{backgroundColor:(0,I._4)(e.palette.grey[200],.12)}:{backgroundColor:(0,I._4)(e.palette.grey[600],.12)})}))),lr=(0,W.ZP)(sr)({width:24,height:16});var cr=function(e){const t=e;return(0,be.jsx)("li",{children:(0,be.jsx)(ar,(0,E.Z)({focusRipple:!0},e,{ownerState:t,children:(0,be.jsx)(lr,{ownerState:t})}))})};function ur(e){return(0,ge.Z)("MuiBreadcrumbs",e)}var dr=(0,me.Z)("MuiBreadcrumbs",["root","ol","li","separator"]);const hr=["children","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],fr=(0,W.ZP)(Ut.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${dr.li}`]:t.li},t.root]})({}),pr=(0,W.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),mr=(0,W.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function gr(e,t,n,r){return e.reduce(((i,o,s)=>(s<e.length-1?i=i.concat(o,(0,be.jsx)(mr,{"aria-hidden":!0,className:t,ownerState:r,children:n},`separator-${s}`)):i.push(o),i)),[])}var vr=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiBreadcrumbs"}),{children:r,className:i,component:o="nav",expandText:s="Show path",itemsAfterCollapse:a=1,itemsBeforeCollapse:l=1,maxItems:c=8,separator:u="/"}=n,d=(0,T.Z)(n,hr),[h,f]=J.useState(!1),p=(0,E.Z)({},n,{component:o,expanded:h,expandText:s,itemsAfterCollapse:a,itemsBeforeCollapse:l,maxItems:c,separator:u}),m=(e=>{const{classes:t}=e;return(0,pe.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},ur,t)})(p),g=J.useRef(null),v=J.Children.toArray(r).filter((e=>J.isValidElement(e))).map(((e,t)=>(0,be.jsx)("li",{className:m.li,children:e},`child-${t}`)));return(0,be.jsx)(fr,(0,E.Z)({ref:t,component:o,color:"text.secondary",className:(0,ue.Z)(m.root,i),ownerState:p},d,{children:(0,be.jsx)(pr,{className:m.ol,ref:g,ownerState:p,children:gr(h||c&&v.length<=c?v:(e=>l+a>=e.length?e:[...e.slice(0,l),(0,be.jsx)(cr,{"aria-label":s,onClick:()=>{f(!0);const e=g.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-a,e.length)])(v),m.separator,u,p)})}))})),yr=n(69397),br=n(94718),wr=n(45063),xr=n(42615);function _r(e){return(0,ge.Z)("MuiButtonGroup",e)}var Sr=(0,me.Z)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]);const Er=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],Tr=(0,W.ZP)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Sr.grouped}`]:t.grouped},{[`& .${Sr.grouped}`]:t[`grouped${(0,Et.Z)(n.orientation)}`]},{[`& .${Sr.grouped}`]:t[`grouped${(0,Et.Z)(n.variant)}`]},{[`& .${Sr.grouped}`]:t[`grouped${(0,Et.Z)(n.variant)}${(0,Et.Z)(n.orientation)}`]},{[`& .${Sr.grouped}`]:t[`grouped${(0,Et.Z)(n.variant)}${(0,Et.Z)(n.color)}`]},t.root,t[n.variant],!0===n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,"vertical"===n.orientation&&t.vertical]}})((({theme:e,ownerState:t})=>(0,E.Z)({display:"inline-flex",borderRadius:e.shape.borderRadius},"contained"===t.variant&&{boxShadow:e.shadows[2]},t.disableElevation&&{boxShadow:"none"},t.fullWidth&&{width:"100%"},"vertical"===t.orientation&&{flexDirection:"column"},{[`& .${Sr.grouped}`]:(0,E.Z)({minWidth:40,"&:not(:first-of-type)":(0,E.Z)({},"horizontal"===t.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===t.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===t.variant&&"horizontal"===t.orientation&&{marginLeft:-1},"outlined"===t.variant&&"vertical"===t.orientation&&{marginTop:-1}),"&:not(:last-of-type)":(0,E.Z)({},"horizontal"===t.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===t.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===t.variant&&"horizontal"===t.orientation&&{borderRight:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===t.variant&&"vertical"===t.orientation&&{borderBottom:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===t.variant&&"inherit"!==t.color&&{borderColor:(0,I.Fq)(e.palette[t.color].main,.5)},"outlined"===t.variant&&"horizontal"===t.orientation&&{borderRightColor:"transparent"},"outlined"===t.variant&&"vertical"===t.orientation&&{borderBottomColor:"transparent"},"contained"===t.variant&&"horizontal"===t.orientation&&{borderRight:`1px solid ${e.palette.grey[400]}`,[`&.${Sr.disabled}`]:{borderRight:`1px solid ${e.palette.action.disabled}`}},"contained"===t.variant&&"vertical"===t.orientation&&{borderBottom:`1px solid ${e.palette.grey[400]}`,[`&.${Sr.disabled}`]:{borderBottom:`1px solid ${e.palette.action.disabled}`}},"contained"===t.variant&&"inherit"!==t.color&&{borderColor:e.palette[t.color].dark}),"&:hover":(0,E.Z)({},"outlined"===t.variant&&"inherit"!==t.color&&{borderColor:e.palette[t.color].main},"contained"===t.variant&&{boxShadow:"none"})},"contained"===t.variant&&{boxShadow:"none"})})));var Cr=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiButtonGroup"}),{children:r,className:i,color:o="primary",component:s="div",disabled:a=!1,disableElevation:l=!1,disableFocusRipple:c=!1,disableRipple:u=!1,fullWidth:d=!1,orientation:h="horizontal",size:f="medium",variant:p="outlined"}=n,m=(0,T.Z)(n,Er),g=(0,E.Z)({},n,{color:o,component:s,disabled:a,disableElevation:l,disableFocusRipple:c,disableRipple:u,fullWidth:d,orientation:h,size:f,variant:p}),v=(e=>{const{classes:t,color:n,disabled:r,disableElevation:i,fullWidth:o,orientation:s,variant:a}=e,l={root:["root",a,"vertical"===s&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${(0,Et.Z)(s)}`,`grouped${(0,Et.Z)(a)}`,`grouped${(0,Et.Z)(a)}${(0,Et.Z)(s)}`,`grouped${(0,Et.Z)(a)}${(0,Et.Z)(n)}`,r&&"disabled"]};return(0,pe.Z)(l,_r,t)})(g);return(0,be.jsx)(Tr,(0,E.Z)({as:s,role:"group",className:(0,ue.Z)(v.root,i),ref:t,ownerState:g},m,{children:J.Children.map(r,(e=>J.isValidElement(e)?J.cloneElement(e,{className:(0,ue.Z)(v.grouped,e.props.className),color:e.props.color||o,disabled:e.props.disabled||a,disableElevation:e.props.disableElevation||l,disableFocusRipple:c,disableRipple:u,fullWidth:d,size:e.props.size||f,variant:e.props.variant||p}):null))}))})),Mr=n(62623),kr=n(34297);function Pr(e){return(0,ge.Z)("MuiCardActionArea",e)}var Ar=(0,me.Z)("MuiCardActionArea",["root","focusVisible","focusHighlight"]);const Ir=["children","className","focusVisibleClassName"],Rr=(0,W.ZP)(gt.Z,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({display:"block",textAlign:"inherit",width:"100%",[`&:hover .${Ar.focusHighlight}`]:{opacity:e.palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${Ar.focusVisible} .${Ar.focusHighlight}`]:{opacity:e.palette.action.focusOpacity}}))),Lr=(0,W.ZP)("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(e,t)=>t.focusHighlight})((({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})})));var Or=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiCardActionArea"}),{children:r,className:i,focusVisibleClassName:o}=n,s=(0,T.Z)(n,Ir),a=n,l=(e=>{const{classes:t}=e;return(0,pe.Z)({root:["root"],focusHighlight:["focusHighlight"]},Pr,t)})(a);return(0,be.jsxs)(Rr,(0,E.Z)({className:(0,ue.Z)(l.root,i),focusVisibleClassName:(0,ue.Z)(o,l.focusVisible),ref:t,ownerState:a},s,{children:[r,(0,be.jsx)(Lr,{className:l.focusHighlight,ownerState:a})]}))})),Nr=n(72299),Dr=n(48547),Fr=n(28492),Br=n(50961),Zr=n(86867),Vr=n(73537),zr=n(44781),Ur=n(67276),jr=n(19809),Hr=n(15352),Gr=n(66489),Wr=n(7701),$r=n(8038),qr=n(2068);function Yr(e){return e.substring(2).toLowerCase()}var Kr=function(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,s=J.useRef(!1),a=J.useRef(null),l=J.useRef(!1),c=J.useRef(!1);J.useEffect((()=>(setTimeout((()=>{l.current=!0}),0),()=>{l.current=!1})),[]);const u=(0,an.Z)(t.ref,a),d=(0,qr.Z)((e=>{const t=c.current;c.current=!1;const r=(0,$r.Z)(a.current);if(!l.current||!a.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,r))return;if(s.current)return void(s.current=!1);let o;o=e.composedPath?e.composedPath().indexOf(a.current)>-1:!r.documentElement.contains(e.target)||a.current.contains(e.target),o||!n&&t||i(e)})),h=e=>n=>{c.current=!0;const r=t.props[e];r&&r(n)},f={ref:u};return!1!==o&&(f[o]=h(o)),J.useEffect((()=>{if(!1!==o){const e=Yr(o),t=(0,$r.Z)(a.current),n=()=>{s.current=!0};return t.addEventListener(e,d),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,d),t.removeEventListener("touchmove",n)}}}),[d,o]),!1!==r&&(f[r]=h(r)),J.useEffect((()=>{if(!1!==r){const e=Yr(r),t=(0,$r.Z)(a.current);return t.addEventListener(e,d),()=>{t.removeEventListener(e,d)}}}),[d,r]),(0,be.jsx)(J.Fragment,{children:J.cloneElement(t,f)})},Xr=n(55435);function Jr(e){return(0,ge.Z)("MuiContainer",e)}var Qr=(0,me.Z)("MuiContainer",["root","disableGutters","fixed","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl"]);const ei=["className","component","disableGutters","fixed","maxWidth"],ti=(0,W.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,Et.Z)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}})((({theme:e,ownerState:t})=>(0,E.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}})),(({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce(((t,n)=>{const r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:`${r}${e.breakpoints.unit}`}),t}),{})),(({theme:e,ownerState:t})=>(0,E.Z)({},"xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}})));var ni,ri=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiContainer"}),{className:r,component:i="div",disableGutters:o=!1,fixed:s=!1,maxWidth:a="lg"}=n,l=(0,T.Z)(n,ei),c=(0,E.Z)({},n,{component:i,disableGutters:o,fixed:s,maxWidth:a}),u=(e=>{const{classes:t,fixed:n,disableGutters:r,maxWidth:i}=e,o={root:["root",i&&`maxWidth${(0,Et.Z)(String(i))}`,n&&"fixed",r&&"disableGutters"]};return(0,pe.Z)(o,Jr,t)})(c);return(0,be.jsx)(ti,(0,E.Z)({as:i,ownerState:c,className:(0,ue.Z)(u.root,r),ref:t},l))})),ii=n(99695);const oi={WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},si=e=>(0,E.Z)({color:e.palette.text.primary},e.typography.body1,{backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}}),ai=e=>{var t,n;let r={html:oi,"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,E.Z)({margin:0},si(e),{"&::backdrop":{backgroundColor:e.palette.background.default}})};const i=null==(t=e.components)||null==(n=t.MuiCssBaseline)?void 0:n.styleOverrides;return i&&(r=[r,i]),r};var li=function(e){const t=(0,G.Z)({props:e,name:"MuiCssBaseline"}),{children:n}=t;return(0,be.jsxs)(J.Fragment,{children:[ni||(ni=(0,be.jsx)(ii.Z,{styles:ai})),n]})};const ci={track:"#2b2b2b",thumb:"#6b6b6b",active:"#959595"};function ui(e=ci){return{scrollbarColor:`${e.thumb} ${e.track}`,"&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:e.track},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:e.thumb,minHeight:24,border:`3px solid ${e.track}`},"&::-webkit-scrollbar-thumb:focus, & *::-webkit-scrollbar-thumb:focus":{backgroundColor:e.active},"&::-webkit-scrollbar-thumb:active, & *::-webkit-scrollbar-thumb:active":{backgroundColor:e.active},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:e.active},"&::-webkit-scrollbar-corner, & *::-webkit-scrollbar-corner":{backgroundColor:e.track}}}var di=n(25827),hi=n(16628);function fi(e){return(0,ge.Z)("MuiDialog",e)}var pi=(0,me.Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var mi=(0,J.createContext)({});const gi=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],vi=(0,W.ZP)(Un.Z,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),yi=(0,W.ZP)(di.Z,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),bi=(0,W.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${(0,Et.Z)(n.scroll)}`]]}})((({ownerState:e})=>(0,E.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}))),wi=(0,W.ZP)(Je.Z,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${(0,Et.Z)(n.scroll)}`],t[`paperWidth${(0,Et.Z)(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((({theme:e,ownerState:t})=>(0,E.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===t.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===t.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===t.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`${e.breakpoints.values.xs}${e.breakpoints.unit}`,[`&.${pi.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},"xs"!==t.maxWidth&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${pi.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${pi.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}))),xi={enter:j.x9.enteringScreen,exit:j.x9.leavingScreen};var _i=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiDialog"}),{"aria-describedby":r,"aria-labelledby":i,BackdropComponent:o,BackdropProps:s,children:a,className:l,disableEscapeKeyDown:c=!1,fullScreen:u=!1,fullWidth:d=!1,maxWidth:h="sm",onBackdropClick:f,onClose:p,open:m,PaperComponent:g=Je.Z,PaperProps:v={},scroll:y="paper",TransitionComponent:b=hi.Z,transitionDuration:w=xi,TransitionProps:x}=n,_=(0,T.Z)(n,gi),S=(0,E.Z)({},n,{disableEscapeKeyDown:c,fullScreen:u,fullWidth:d,maxWidth:h,scroll:y}),C=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e,s={root:["root"],container:["container",`scroll${(0,Et.Z)(n)}`],paper:["paper",`paperScroll${(0,Et.Z)(n)}`,`paperWidth${(0,Et.Z)(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return(0,pe.Z)(s,fi,t)})(S),M=J.useRef(),k=(0,Q.Z)(i),P=J.useMemo((()=>({titleId:k})),[k]);return(0,be.jsx)(yi,(0,E.Z)({className:(0,ue.Z)(C.root,l),BackdropProps:(0,E.Z)({transitionDuration:w,as:o},s),closeAfterTransition:!0,BackdropComponent:vi,disableEscapeKeyDown:c,onClose:p,open:m,ref:t,onClick:e=>{M.current&&(M.current=null,f&&f(e),p&&p(e,"backdropClick"))},ownerState:S},_,{children:(0,be.jsx)(b,(0,E.Z)({appear:!0,in:m,timeout:w,role:"presentation"},x,{children:(0,be.jsx)(bi,{className:(0,ue.Z)(C.container),onMouseDown:e=>{M.current=e.target===e.currentTarget},ownerState:S,children:(0,be.jsx)(wi,(0,E.Z)({as:g,elevation:24,role:"dialog","aria-describedby":r,"aria-labelledby":k},v,{className:(0,ue.Z)(C.paper,v.className),ownerState:S,children:(0,be.jsx)(mi.Provider,{value:P,children:a})}))})}))}))}));function Si(e){return(0,ge.Z)("MuiDialogActions",e)}var Ei=(0,me.Z)("MuiDialogActions",["root","spacing"]);const Ti=["className","disableSpacing"],Ci=(0,W.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,E.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})));var Mi=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1}=n,o=(0,T.Z)(n,Ti),s=(0,E.Z)({},n,{disableSpacing:i}),a=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,pe.Z)(r,Si,t)})(s);return(0,be.jsx)(Ci,(0,E.Z)({className:(0,ue.Z)(a.root,r),ownerState:s,ref:t},o))}));function ki(e){return(0,ge.Z)("MuiDialogContent",e)}var Pi=(0,me.Z)("MuiDialogContent",["root","dividers"]);const Ai=["className","dividers"],Ii=(0,W.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})((({theme:e,ownerState:t})=>(0,E.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`}:{".MuiDialogTitle-root + &":{paddingTop:0}})));var Ri=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiDialogContent"}),{className:r,dividers:i=!1}=n,o=(0,T.Z)(n,Ai),s=(0,E.Z)({},n,{dividers:i}),a=(e=>{const{classes:t,dividers:n}=e,r={root:["root",n&&"dividers"]};return(0,pe.Z)(r,ki,t)})(s);return(0,be.jsx)(Ii,(0,E.Z)({className:(0,ue.Z)(a.root,r),ownerState:s,ref:t},o))}));function Li(e){return(0,ge.Z)("MuiDialogContentText",e)}var Oi=(0,me.Z)("MuiDialogContentText",["root"]);const Ni=["children"],Di=(0,W.ZP)(Ut.Z,{shouldForwardProp:e=>(0,W.FO)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({});var Fi=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiDialogContentText"}),r=(0,T.Z)(n,Ni),i=(e=>{const{classes:t}=e,n=(0,pe.Z)({root:["root"]},Li,t);return(0,E.Z)({},t,n)})(r);return(0,be.jsx)(Di,(0,E.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:r},n,{classes:i}))}));function Bi(e){return(0,ge.Z)("MuiDialogTitle",e)}var Zi=(0,me.Z)("MuiDialogTitle",["root"]);const Vi=["className","id"],zi=(0,W.ZP)(Ut.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"});var Ui=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiDialogTitle"}),{className:r,id:i}=n,o=(0,T.Z)(n,Vi),s=n,a=(e=>{const{classes:t}=e;return(0,pe.Z)({root:["root"]},Bi,t)})(s),{titleId:l=i}=J.useContext(mi);return(0,be.jsx)(zi,(0,E.Z)({component:"h2",className:(0,ue.Z)(a.root,r),ownerState:s,ref:t,variant:"h6",id:l},o))})),ji=n(67720),Hi=n(79540),Gi=n(54776);function Wi(e){return(0,ge.Z)("MuiDrawer",e)}var $i=(0,me.Z)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const qi=["BackdropProps"],Yi=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],Ki=(e,t)=>{const{ownerState:n}=e;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},Xi=(0,W.ZP)(di.Z,{name:"MuiDrawer",slot:"Root",overridesResolver:Ki})((({theme:e})=>({zIndex:e.zIndex.drawer}))),Ji=(0,W.ZP)("div",{shouldForwardProp:W.FO,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Ki})({flex:"0 0 auto"}),Qi=(0,W.ZP)(Je.Z,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${(0,Et.Z)(n.anchor)}`],"temporary"!==n.variant&&t[`paperAnchorDocked${(0,Et.Z)(n.anchor)}`]]}})((({theme:e,ownerState:t})=>(0,E.Z)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===t.anchor&&{left:0},"top"===t.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===t.anchor&&{right:0},"bottom"===t.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===t.anchor&&"temporary"!==t.variant&&{borderRight:`1px solid ${e.palette.divider}`},"top"===t.anchor&&"temporary"!==t.variant&&{borderBottom:`1px solid ${e.palette.divider}`},"right"===t.anchor&&"temporary"!==t.variant&&{borderLeft:`1px solid ${e.palette.divider}`},"bottom"===t.anchor&&"temporary"!==t.variant&&{borderTop:`1px solid ${e.palette.divider}`}))),eo={left:"right",right:"left",top:"down",bottom:"up"};function to(e){return-1!==["left","right"].indexOf(e)}function no(e,t){return"rtl"===e.direction&&to(t)?eo[t]:t}const ro={enter:j.x9.enteringScreen,exit:j.x9.leavingScreen};var io=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiDrawer"}),{anchor:r="left",BackdropProps:i,children:o,className:s,elevation:a=16,hideBackdrop:l=!1,ModalProps:{BackdropProps:c}={},onClose:u,open:d=!1,PaperProps:h={},SlideProps:f,TransitionComponent:p=Gi.Z,transitionDuration:m=ro,variant:g="temporary"}=n,v=(0,T.Z)(n.ModalProps,qi),y=(0,T.Z)(n,Yi),b=(0,H.Z)(),w=J.useRef(!1);J.useEffect((()=>{w.current=!0}),[]);const x=no(b,r),_=r,S=(0,E.Z)({},n,{anchor:_,elevation:a,open:d,variant:g},y),C=(e=>{const{classes:t,anchor:n,variant:r}=e,i={root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${(0,Et.Z)(n)}`,"temporary"!==r&&`paperAnchorDocked${(0,Et.Z)(n)}`]};return(0,pe.Z)(i,Wi,t)})(S),M=(0,be.jsx)(Qi,(0,E.Z)({elevation:"temporary"===g?a:0,square:!0},h,{className:(0,ue.Z)(C.paper,h.className),ownerState:S,children:o}));if("permanent"===g)return(0,be.jsx)(Ji,(0,E.Z)({className:(0,ue.Z)(C.root,C.docked,s),ownerState:S,ref:t},y,{children:M}));const k=(0,be.jsx)(p,(0,E.Z)({in:d,direction:eo[x],timeout:m,appear:w.current},f,{children:M}));return"persistent"===g?(0,be.jsx)(Ji,(0,E.Z)({className:(0,ue.Z)(C.root,C.docked,s),ownerState:S,ref:t},y,{children:k})):(0,be.jsx)(Xi,(0,E.Z)({BackdropProps:(0,E.Z)({},i,c,{transitionDuration:m}),className:(0,ue.Z)(C.root,C.modal,s),open:d,ownerState:S,onClose:u,hideBackdrop:l,ref:t},y,v,{children:k}))}));function oo(e){return(0,ge.Z)("MuiFab",e)}var so=(0,me.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge"]);const ao=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],lo=(0,W.ZP)(gt.Z,{name:"MuiFab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${(0,Et.Z)(n.size)}`],"inherit"===n.color&&t.colorInherit,"primary"===n.color&&t.primary,"secondary"===n.color&&t.secondary]}})((({theme:e,ownerState:t})=>(0,E.Z)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},textDecoration:"none"},[`&.${so.focusVisible}`]:{boxShadow:e.shadows[6]},[`&.${so.disabled}`]:{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},"small"===t.size&&{width:40,height:40},"medium"===t.size&&{width:48,height:48},"extended"===t.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===t.variant&&"small"===t.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===t.variant&&"medium"===t.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===t.color&&{color:"inherit"})),(({theme:e,ownerState:t})=>(0,E.Z)({},"primary"===t.color&&{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},"secondary"===t.color&&{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}})));var co=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiFab"}),{children:r,className:i,color:o="default",component:s="button",disabled:a=!1,disableFocusRipple:l=!1,focusVisibleClassName:c,size:u="large",variant:d="circular"}=n,h=(0,T.Z)(n,ao),f=(0,E.Z)({},n,{color:o,component:s,disabled:a,disableFocusRipple:l,size:u,variant:d}),p=(e=>{const{color:t,variant:n,classes:r,size:i}=e,o={root:["root",n,`size${(0,Et.Z)(i)}`,"inherit"===t&&"colorInherit","primary"===t&&"primary","secondary"===t&&"secondary"]};return(0,pe.Z)(o,oo,r)})(f);return(0,be.jsx)(lo,(0,E.Z)({className:(0,ue.Z)(p.root,i),component:s,disabled:a,focusRipple:!l,focusVisibleClassName:(0,ue.Z)(p.focusVisible,c),ownerState:f,ref:t},h,{children:r}))})),uo=n(6135),ho=n(24707),fo=n(53640),po=n(42154),mo=n(20847),go=n(92037),vo=n(70785),yo=n(26501),bo=n(74509),wo=n(90052),xo=n(40476),_o=n(64748),So=n(16651),Eo=n(672),To=n(96514),Co=n(45697),Mo=n.n(Co),ko=n(85098),Po=n(8679),Ao=n.n(Po),Io=n(58974),Ro=n(2952);function Lo(e,t={}){const n=(0,Ro.Z)(),r="undefined"!=typeof window&&void 0!==window.matchMedia,{defaultMatches:i=!1,matchMedia:o=(r?window.matchMedia:null),noSsr:s=!1,ssrMatchMedia:a=null}=(0,ko.Z)({name:"MuiUseMediaQuery",props:t,theme:n});let l="function"==typeof e?e(n):e;l=l.replace(/^@media( ?)/m,"");const[c,u]=J.useState((()=>s&&r?o(l).matches:a?a(l).matches:i));return(0,Io.Z)((()=>{let e=!0;if(!r)return;const t=o(l),n=()=>{e&&u(t.matches)};return n(),t.addListener(n),()=>{e=!1,t.removeListener(n)}}),[l,o,r]),c}const Oo=["initialWidth","width"],No=["xs","sm","md","lg","xl"],Do=(e,t,n=!0)=>n?No.indexOf(e)<=No.indexOf(t):No.indexOf(e)<No.indexOf(t),Fo=(e,t,n=!1)=>n?No.indexOf(t)<=No.indexOf(e):No.indexOf(t)<No.indexOf(e);var Bo=(e={})=>t=>{const{withTheme:n=!1,noSSR:r=!1,initialWidth:i}=e;function o(e){const o=(0,H.Z)(),s=e.theme||o,a=(0,ko.Z)({theme:s,name:"MuiWithWidth",props:e}),{initialWidth:l,width:c}=a,u=(0,T.Z)(a,Oo),[d,h]=J.useState(!1);(0,Io.Z)((()=>{h(!0)}),[]);const f=s.breakpoints.keys.slice().reverse().reduce(((e,t)=>{const n=Lo(s.breakpoints.up(t));return!e&&n?t:e}),null),p=(0,E.Z)({width:c||(d||r?f:void 0)||l||i},n?{theme:s}:{},u);return void 0===p.width?null:(0,be.jsx)(t,(0,E.Z)({},p))}return Ao()(o,t),o};function Zo(e){const{children:t,only:n,width:r}=e,i=(0,H.Z)();let o=!0;if(n)if(Array.isArray(n))for(let e=0;e<n.length;e+=1){if(r===n[e]){o=!1;break}}else n&&r===n&&(o=!1);if(o)for(let t=0;t<i.breakpoints.keys.length;t+=1){const n=i.breakpoints.keys[t],s=e[`${n}Up`],a=e[`${n}Down`];if(s&&Do(n,r)||a&&Fo(n,r)){o=!1;break}}return o?t:null}Zo.propTypes={children:Mo().node,className:Mo().string,implementation:Mo().oneOf(["js","css"]),initialWidth:Mo().oneOf(["xs","sm","md","lg","xl"]),lgDown:Mo().bool,lgUp:Mo().bool,mdDown:Mo().bool,mdUp:Mo().bool,only:Mo().oneOfType([Mo().oneOf(["xs","sm","md","lg","xl"]),Mo().arrayOf(Mo().oneOf(["xs","sm","md","lg","xl"]))]),smDown:Mo().bool,smUp:Mo().bool,width:Mo().string.isRequired,xlDown:Mo().bool,xlUp:Mo().bool,xsDown:Mo().bool,xsUp:Mo().bool};var Vo=Bo()(Zo);function zo(e){return(0,ge.Z)("PrivateHiddenCss",e)}(0,me.Z)("PrivateHiddenCss",["root","xlDown","xlUp","onlyXl","lgDown","lgUp","onlyLg","mdDown","mdUp","onlyMd","smDown","smUp","onlySm","xsDown","xsUp","onlyXs"]);const Uo=["children","className","only"],jo=(0,W.ZP)("div",{name:"PrivateHiddenCss",slot:"Root"})((({theme:e,ownerState:t})=>{const n={display:"none"};return(0,E.Z)({},t.breakpoints.map((({breakpoint:t,dir:r})=>"only"===r?{[e.breakpoints.only(t)]:n}:"up"===r?{[e.breakpoints.up(t)]:n}:{[e.breakpoints.down(t)]:n})).reduce(((e,t)=>(Object.keys(t).forEach((n=>{e[n]=t[n]})),e)),{}))}));var Ho=function(e){const{children:t,className:n,only:r}=e,i=(0,T.Z)(e,Uo),o=(0,H.Z)(),s=[];for(let e=0;e<o.breakpoints.keys.length;e+=1){const t=o.breakpoints.keys[e],n=i[`${t}Up`],r=i[`${t}Down`];n&&s.push({breakpoint:t,dir:"up"}),r&&s.push({breakpoint:t,dir:"down"})}if(r){(Array.isArray(r)?r:[r]).forEach((e=>{s.push({breakpoint:e,dir:"only"})}))}const a=(0,E.Z)({},e,{breakpoints:s}),l=(e=>{const{classes:t,breakpoints:n}=e,r={root:["root",...n.map((({breakpoint:e,dir:t})=>"only"===t?`${t}${(0,Et.Z)(e)}`:`${e}${(0,Et.Z)(t)}`))]};return(0,pe.Z)(r,zo,t)})(a);return(0,be.jsx)(jo,{className:(0,ue.Z)(l.root,n),ownerState:a,children:t})};const Go=["implementation","lgDown","lgUp","mdDown","mdUp","smDown","smUp","xlDown","xlUp","xsDown","xsUp"];var Wo=function(e){const{implementation:t="js",lgDown:n=!1,lgUp:r=!1,mdDown:i=!1,mdUp:o=!1,smDown:s=!1,smUp:a=!1,xlDown:l=!1,xlUp:c=!1,xsDown:u=!1,xsUp:d=!1}=e,h=(0,T.Z)(e,Go);return"js"===t?(0,be.jsx)(Vo,(0,E.Z)({lgDown:n,lgUp:r,mdDown:i,mdUp:o,smDown:s,smUp:a,xlDown:l,xlUp:c,xsDown:u,xsUp:d},h)):(0,be.jsx)(Ho,(0,E.Z)({lgDown:n,lgUp:r,mdDown:i,mdUp:o,smDown:s,smUp:a,xlDown:l,xlUp:c,xsDown:u,xsUp:d},h))};function $o(e){return(0,ge.Z)("MuiIcon",e)}var qo=(0,me.Z)("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Yo=["baseClassName","className","color","component","fontSize"],Ko=(0,W.ZP)("span",{name:"MuiIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${(0,Et.Z)(n.color)}`],t[`fontSize${(0,Et.Z)(n.fontSize)}`]]}})((({theme:e,ownerState:t})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:e.typography.pxToRem(20),medium:e.typography.pxToRem(24),large:e.typography.pxToRem(36)}[t.fontSize],color:{primary:e.palette.primary.main,secondary:e.palette.secondary.main,info:e.palette.info.main,success:e.palette.success.main,warning:e.palette.warning.main,action:e.palette.action.active,error:e.palette.error.main,disabled:e.palette.action.disabled,inherit:void 0}[t.color]}))),Xo=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiIcon"}),{baseClassName:r="material-icons",className:i,color:o="inherit",component:s="span",fontSize:a="medium"}=n,l=(0,T.Z)(n,Yo),c=(0,E.Z)({},n,{baseClassName:r,color:o,component:s,fontSize:a}),u=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&`color${(0,Et.Z)(t)}`,`fontSize${(0,Et.Z)(n)}`]};return(0,pe.Z)(i,$o,r)})(c);return(0,be.jsx)(Ko,(0,E.Z)({as:s,className:(0,ue.Z)(r,"notranslate",u.root,i),ownerState:c,"aria-hidden":!0,ref:t},l))}));Xo.muiName="Icon";var Jo=Xo,Qo=n(74113);function es(e){return(0,ge.Z)("MuiImageList",e)}var ts=(0,me.Z)("MuiImageList",["root","masonry","quilted","standard","woven"]);var ns=J.createContext({});const rs=["children","className","cols","component","rowHeight","gap","style","variant"],is=(0,W.ZP)("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})((({ownerState:e})=>(0,E.Z)({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},"masonry"===e.variant&&{display:"block"}))),os=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiImageList"}),{children:r,className:i,cols:o=2,component:s="ul",rowHeight:a="auto",gap:l=4,style:c,variant:u="standard"}=n,d=(0,T.Z)(n,rs),h=J.useMemo((()=>({rowHeight:a,gap:l,variant:u})),[a,l,u]);J.useEffect((()=>{0}),[]);const f="masonry"===u?(0,E.Z)({columnCount:o,columnGap:l},c):(0,E.Z)({gridTemplateColumns:`repeat(${o}, 1fr)`,gap:l},c),p=(0,E.Z)({},n,{component:s,gap:l,rowHeight:a,variant:u}),m=(e=>{const{classes:t,variant:n}=e,r={root:["root",n]};return(0,pe.Z)(r,es,t)})(p);return(0,be.jsx)(is,(0,E.Z)({as:s,className:(0,ue.Z)(m.root,m[u],i),ref:t,style:f,ownerState:p},d,{children:(0,be.jsx)(ns.Provider,{value:h,children:r})}))}));var ss=os,as=n(48502);function ls(e){return(0,ge.Z)("MuiImageListItem",e)}var cs=(0,me.Z)("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]);const us=["children","className","cols","component","rows","style"],ds=(0,W.ZP)("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${cs.img}`]:t.img},t.root,t[n.variant]]}})((({ownerState:e})=>(0,E.Z)({display:"inline-block",position:"relative",lineHeight:0},"standard"===e.variant&&{display:"flex",flexDirection:"column"},"woven"===e.variant&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${cs.img}`]:(0,E.Z)({objectFit:"cover",width:"100%",height:"100%"},"standard"===e.variant&&{height:"auto",flexGrow:1})}))),hs=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiImageListItem"}),{children:r,className:i,cols:o=1,component:s="li",rows:a=1,style:l}=n,c=(0,T.Z)(n,us),{rowHeight:u="auto",gap:d,variant:h}=J.useContext(ns);let f="auto";"woven"===h?f=void 0:"auto"!==u&&(f=u*a+d*(a-1));const p=(0,E.Z)({},n,{cols:o,component:s,gap:d,rowHeight:u,rows:a,variant:h}),m=(e=>{const{classes:t,variant:n}=e,r={root:["root",n],img:["img"]};return(0,pe.Z)(r,ls,t)})(p);return(0,be.jsx)(ds,(0,E.Z)({as:s,className:(0,ue.Z)(m.root,m[h],i),ref:t,style:(0,E.Z)({height:f,gridColumnEnd:"masonry"!==h?`span ${o}`:void 0,gridRowEnd:"masonry"!==h?`span ${a}`:void 0,marginBottom:"masonry"===h?d:void 0},l),ownerState:p},c,{children:J.Children.map(r,(e=>J.isValidElement(e)?"img"===e.type||(0,as.Z)(e,["Image"])?J.cloneElement(e,{className:(0,ue.Z)(m.img,e.props.className)}):e:null))}))}));var fs=hs;function ps(e){return(0,ge.Z)("MuiImageListItemBar",e)}var ms=(0,me.Z)("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);const gs=["actionIcon","actionPosition","className","subtitle","title","position"],vs=(0,W.ZP)("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,Et.Z)(n.position)}`]]}})((({theme:e,ownerState:t})=>(0,E.Z)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:e.typography.fontFamily},"bottom"===t.position&&{bottom:0},"top"===t.position&&{top:0},"below"===t.position&&{position:"relative",background:"transparent",alignItems:"normal"}))),ys=(0,W.ZP)("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.titleWrap,t[`titleWrap${(0,Et.Z)(n.position)}`],n.actionIcon&&t[`titleWrapActionPos${(0,Et.Z)(n.actionPosition)}`]]}})((({theme:e,ownerState:t})=>(0,E.Z)({flexGrow:1,padding:"12px 16px",color:e.palette.common.white,overflow:"hidden"},"below"===t.position&&{padding:"6px 0 12px",color:"inherit"},t.actionIcon&&"left"===t.actionPosition&&{paddingLeft:0},t.actionIcon&&"right"===t.actionPosition&&{paddingRight:0}))),bs=(0,W.ZP)("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(e,t)=>t.title})((({theme:e})=>({fontSize:e.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}))),ws=(0,W.ZP)("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(e,t)=>t.subtitle})((({theme:e})=>({fontSize:e.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}))),xs=(0,W.ZP)("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.actionIcon,t[`actionIconActionPos${(0,Et.Z)(n.actionPosition)}`]]}})((({ownerState:e})=>(0,E.Z)({},"left"===e.actionPosition&&{order:-1})));var _s=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiImageListItemBar"}),{actionIcon:r,actionPosition:i="right",className:o,subtitle:s,title:a,position:l="bottom"}=n,c=(0,T.Z)(n,gs),u=(0,E.Z)({},n,{position:l,actionPosition:i}),d=(e=>{const{classes:t,position:n,actionIcon:r,actionPosition:i}=e,o={root:["root",`position${(0,Et.Z)(n)}`],titleWrap:["titleWrap",`titleWrap${(0,Et.Z)(n)}`,r&&`titleWrapActionPos${(0,Et.Z)(i)}`],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon",`actionIconActionPos${(0,Et.Z)(i)}`]};return(0,pe.Z)(o,ps,t)})(u);return(0,be.jsxs)(vs,(0,E.Z)({ownerState:u,className:(0,ue.Z)(d.root,o),ref:t},c,{children:[(0,be.jsxs)(ys,{ownerState:u,className:d.titleWrap,children:[(0,be.jsx)(bs,{className:d.title,children:a}),s?(0,be.jsx)(ws,{className:d.subtitle,children:s}):null]}),r?(0,be.jsx)(xs,{ownerState:u,className:d.actionIcon,children:r}):null]}))})),Ss=n(79332),Es=n(76171),Ts=n(47167),Cs=n(74423);function Ms(e){return(0,ge.Z)("MuiInputAdornment",e)}var ks=(0,me.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);const Ps=["children","className","component","disablePointerEvents","disableTypography","position","variant"],As=(0,W.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,Et.Z)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((({theme:e,ownerState:t})=>(0,E.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:e.palette.action.active},"filled"===t.variant&&{[`&.${ks.positionStart}&:not(.${ks.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})));var Is=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiInputAdornment"}),{children:r,className:i,component:o="div",disablePointerEvents:s=!1,disableTypography:a=!1,position:l,variant:c}=n,u=(0,T.Z)(n,Ps),d=(0,Cs.Z)()||{};let h=c;c&&d.variant,d&&!h&&(h=d.variant);const f=(0,E.Z)({},n,{hiddenLabel:d.hiddenLabel,size:d.size,disablePointerEvents:s,position:l,variant:h}),p=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:s}=e,a={root:["root",n&&"disablePointerEvents",i&&`position${(0,Et.Z)(i)}`,s,r&&"hiddenLabel",o&&`size${(0,Et.Z)(o)}`]};return(0,pe.Z)(a,Ms,t)})(f);return(0,be.jsx)(Ts.Z.Provider,{value:null,children:(0,be.jsx)(As,(0,E.Z)({as:o,ownerState:f,className:(0,ue.Z)(p.root,i),ref:t},u,{children:"string"!=typeof r||a?(0,be.jsxs)(J.Fragment,{children:["start"===l?(0,be.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}}):null,r]}):(0,be.jsx)(Ut.Z,{color:"text.secondary",children:r})}))})})),Rs=n(78543),Ls=n(55827),Os=n(60076),Ns=n(56727),Ds=n(70917);function Fs(e){return(0,ge.Z)("MuiLinearProgress",e)}var Bs=(0,me.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Zs=["className","color","value","valueBuffer","variant"];let Vs,zs,Us,js,Hs,Gs,Ws=e=>e;const $s=(0,Ds.F4)(Vs||(Vs=Ws`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),qs=(0,Ds.F4)(zs||(zs=Ws`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),Ys=(0,Ds.F4)(Us||(Us=Ws`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Ks=(e,t)=>"inherit"===t?"currentColor":"light"===e.palette.mode?(0,I.$n)(e.palette[t].main,.62):(0,I._j)(e.palette[t].main,.5),Xs=(0,W.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,Et.Z)(n.color)}`],t[n.variant]]}})((({ownerState:e,theme:t})=>(0,E.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:Ks(t,e.color)},"inherit"===e.color&&"buffer"!==e.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===e.variant&&{backgroundColor:"transparent"},"query"===e.variant&&{transform:"rotate(180deg)"}))),Js=(0,W.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${(0,Et.Z)(n.color)}`]]}})((({ownerState:e,theme:t})=>{const n=Ks(t,e.color);return(0,E.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===e.color&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,Ds.iv)(js||(js=Ws`
    animation: ${0} 3s infinite linear;
  `),Ys)),Qs=(0,W.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,Et.Z)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})((({ownerState:e,theme:t})=>(0,E.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===e.color?"currentColor":t.palette[e.color].main},"determinate"===e.variant&&{transition:"transform .4s linear"},"buffer"===e.variant&&{zIndex:1,transition:"transform .4s linear"})),(({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,Ds.iv)(Hs||(Hs=Ws`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),$s))),ea=(0,W.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,Et.Z)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})((({ownerState:e,theme:t})=>(0,E.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==e.variant&&{backgroundColor:"inherit"===e.color?"currentColor":t.palette[e.color].main},"inherit"===e.color&&{opacity:.3},"buffer"===e.variant&&{backgroundColor:Ks(t,e.color),transition:"transform .4s linear"})),(({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,Ds.iv)(Gs||(Gs=Ws`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),qs)));var ta=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiLinearProgress"}),{className:r,color:i="primary",value:o,valueBuffer:s,variant:a="indeterminate"}=n,l=(0,T.Z)(n,Zs),c=(0,E.Z)({},n,{color:i,variant:a}),u=(e=>{const{classes:t,variant:n,color:r}=e,i={root:["root",`color${(0,Et.Z)(r)}`,n],dashed:["dashed",`dashedColor${(0,Et.Z)(r)}`],bar1:["bar",`barColor${(0,Et.Z)(r)}`,("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&`barColor${(0,Et.Z)(r)}`,"buffer"===n&&`color${(0,Et.Z)(r)}`,("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,pe.Z)(i,Fs,t)})(c),d=(0,H.Z)(),h={},f={bar1:{},bar2:{}};if("determinate"===a||"buffer"===a)if(void 0!==o){h["aria-valuenow"]=Math.round(o),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let e=o-100;"rtl"===d.direction&&(e=-e),f.bar1.transform=`translateX(${e}%)`}else 0;if("buffer"===a)if(void 0!==s){let e=(s||0)-100;"rtl"===d.direction&&(e=-e),f.bar2.transform=`translateX(${e}%)`}else 0;return(0,be.jsxs)(Xs,(0,E.Z)({className:(0,ue.Z)(u.root,r),ownerState:c,role:"progressbar"},h,{ref:t},l,{children:["buffer"===a?(0,be.jsx)(Js,{className:u.dashed,ownerState:c}):null,(0,be.jsx)(Qs,{className:u.bar1,ownerState:c,style:f.bar1}),"determinate"===a?null:(0,be.jsx)(ea,{className:u.bar2,ownerState:c,style:f.bar2})]}))})),na=n(34439),ra=n(79674);function ia(e){return(0,ge.Z)("MuiLink",e)}var oa=(0,me.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);const sa=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"],aa={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},la=(0,W.ZP)(Ut.Z,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${(0,Et.Z)(n.underline)}`],"button"===n.component&&t.button]}})((({theme:e,ownerState:t})=>{const n=(0,na.D)(e,`palette.${(e=>aa[e]||e)(t.color)}`)||t.color;return(0,E.Z)({},"none"===t.underline&&{textDecoration:"none"},"hover"===t.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===t.underline&&{textDecoration:"underline",textDecorationColor:"inherit"!==n?(0,I.Fq)(n,.4):void 0,"&:hover":{textDecorationColor:"inherit"}},"button"===t.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${oa.focusVisible}`]:{outline:"auto"}})}));var ca=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiLink"}),{className:r,color:i="primary",component:o="a",onBlur:s,onFocus:a,TypographyClasses:l,underline:c="always",variant:u="inherit"}=n,d=(0,T.Z)(n,sa),{isFocusVisibleRef:h,onBlur:f,onFocus:p,ref:m}=(0,ra.Z)(),[g,v]=J.useState(!1),y=(0,an.Z)(t,m),b=(0,E.Z)({},n,{color:i,component:o,focusVisible:g,underline:c,variant:u}),w=(e=>{const{classes:t,component:n,focusVisible:r,underline:i}=e,o={root:["root",`underline${(0,Et.Z)(i)}`,"button"===n&&"button",r&&"focusVisible"]};return(0,pe.Z)(o,ia,t)})(b);return(0,be.jsx)(la,(0,E.Z)({className:(0,ue.Z)(w.root,r),classes:l,color:i,component:o,onBlur:e=>{f(e),!1===h.current&&v(!1),s&&s(e)},onFocus:e=>{p(e),!0===h.current&&v(!0),a&&a(e)},ref:y,ownerState:b,variant:u},d))})),ua=n(18843),da=n(4153),ha=n(29861),fa=n(47696),pa=n(68476),ma=n(94742),ga=n(98619),va=n(1471),ya=n(84592),ba=n(59773);const wa=["className"],xa=(0,W.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((({theme:e,ownerState:t})=>(0,E.Z)({minWidth:56,color:e.palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===t.alignItems&&{marginTop:8})));var _a=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiListItemIcon"}),{className:r}=n,i=(0,T.Z)(n,wa),o=J.useContext(ba.Z),s=(0,E.Z)({},n,{alignItems:o.alignItems}),a=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,pe.Z)(r,ya.f,n)})(s);return(0,be.jsx)(xa,(0,E.Z)({className:(0,ue.Z)(a.root,r),ownerState:s,ref:t},i))})),Sa=n(79685),Ea=n(52451),Ta=n(59334),Ca=n(798),Ma=n(24486),ka=n(272),Pa=n(63931),Aa=n(61261),Ia=n(83975);function Ra(e){return(0,ge.Z)("MuiMobileStepper",e)}var La=(0,me.Z)("MuiMobileStepper",["root","positionBottom","positionTop","positionStatic","dots","dot","dotActive","progress"]);const Oa=["activeStep","backButton","className","LinearProgressProps","nextButton","position","steps","variant"],Na=(0,W.ZP)(Je.Z,{name:"MuiMobileStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,Et.Z)(n.position)}`]]}})((({theme:e,ownerState:t})=>(0,E.Z)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:e.palette.background.default,padding:8},"bottom"===t.position&&{position:"fixed",bottom:0,left:0,right:0,zIndex:e.zIndex.mobileStepper},"top"===t.position&&{position:"fixed",top:0,left:0,right:0,zIndex:e.zIndex.mobileStepper}))),Da=(0,W.ZP)("div",{name:"MuiMobileStepper",slot:"Dots",overridesResolver:(e,t)=>t.dots})((({ownerState:e})=>(0,E.Z)({},"dots"===e.variant&&{display:"flex",flexDirection:"row"}))),Fa=(0,W.ZP)("div",{name:"MuiMobileStepper",slot:"Dot",shouldForwardProp:e=>(0,W.Dz)(e)&&"dotActive"!==e,overridesResolver:(e,t)=>{const{dotActive:n}=e;return[t.dot,n&&t.dotActive]}})((({theme:e,ownerState:t,dotActive:n})=>(0,E.Z)({},"dots"===t.variant&&(0,E.Z)({transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),backgroundColor:e.palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"},n&&{backgroundColor:e.palette.primary.main})))),Ba=(0,W.ZP)(ta,{name:"MuiMobileStepper",slot:"Progress",overridesResolver:(e,t)=>t.progress})((({ownerState:e})=>(0,E.Z)({},"progress"===e.variant&&{width:"50%"})));var Za=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiMobileStepper"}),{activeStep:r=0,backButton:i,className:o,LinearProgressProps:s,nextButton:a,position:l="bottom",steps:c,variant:u="dots"}=n,d=(0,T.Z)(n,Oa),h=(0,E.Z)({},n,{activeStep:r,position:l,variant:u}),f=(e=>{const{classes:t,position:n}=e,r={root:["root",`position${(0,Et.Z)(n)}`],dots:["dots"],dot:["dot"],dotActive:["dotActive"],progress:["progress"]};return(0,pe.Z)(r,Ra,t)})(h);return(0,be.jsxs)(Na,(0,E.Z)({square:!0,elevation:0,className:(0,ue.Z)(f.root,o),ref:t,ownerState:h},d,{children:[i,"text"===u&&(0,be.jsxs)(J.Fragment,{children:[r+1," / ",c]}),"dots"===u&&(0,be.jsx)(Da,{ownerState:h,className:f.dots,children:[...new Array(c)].map(((e,t)=>(0,be.jsx)(Fa,{className:(0,ue.Z)(f.dot,t===r&&f.dotActive),ownerState:h,dotActive:t===r},t)))}),"progress"===u&&(0,be.jsx)(Ba,(0,E.Z)({ownerState:h,className:f.progress,variant:"determinate",value:Math.ceil(r/(c-1)*100)},s)),a]}))})),Va=n(97367),za=n(35262),Ua=n(15704),ja=n(12268);const Ha=["className","children","classes","IconComponent","input","inputProps","variant"],Ga=["root"],Wa=(0,be.jsx)(Ss.Z,{}),$a=J.forwardRef((function(e,t){const n=(0,G.Z)({name:"MuiNativeSelect",props:e}),{className:r,children:i,classes:o={},IconComponent:s=mn.Z,input:a=Wa,inputProps:l}=n,c=(0,T.Z)(n,Ha),u=(0,Cs.Z)(),d=(0,Ua.Z)({props:n,muiFormControl:u,states:["variant"]}),h=(e=>{const{classes:t}=e;return(0,pe.Z)({root:["root"]},ja.f,t)})((0,E.Z)({},n,{classes:o})),f=(0,T.Z)(o,Ga);return J.cloneElement(a,(0,E.Z)({inputComponent:za.ZP,inputProps:(0,E.Z)({children:i,classes:f,IconComponent:s,variant:d.variant,type:void 0},l,a?a.props.inputProps:{}),ref:t},c,{className:(0,ue.Z)(h.root,a.props.className,r)}))}));$a.muiName="Select";var qa=$a,Ya=n(16600);var Ka=function(e){const{children:t,defer:n=!1,fallback:r=null}=e,[i,o]=J.useState(!1);return(0,Ya.Z)((()=>{n||o(!0)}),[n]),J.useEffect((()=>{n&&o(!0)}),[n]),(0,be.jsx)(J.Fragment,{children:i?t:r})},Xa=n(32580),Ja=n(54656);function Qa(e){return(0,ge.Z)("MuiPagination",e)}var el=(0,me.Z)("MuiPagination",["root","ul","outlined","text"]);const tl=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function nl(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:r=1,defaultPage:i=1,disabled:o=!1,hideNextButton:s=!1,hidePrevButton:a=!1,onChange:l,page:c,showFirstButton:u=!1,showLastButton:d=!1,siblingCount:h=1}=e,f=(0,T.Z)(e,tl),[p,m]=(0,ee.Z)({controlled:c,default:i,name:n,state:"page"}),g=(e,t)=>{c||m(t),l&&l(e,t)},v=(e,t)=>{const n=t-e+1;return Array.from({length:n},((t,n)=>e+n))},y=v(1,Math.min(t,r)),b=v(Math.max(r-t+1,t+1),r),w=Math.max(Math.min(p-h,r-t-2*h-1),t+2),x=Math.min(Math.max(p+h,t+2*h+2),b.length>0?b[0]-2:r-1),_=[...u?["first"]:[],...a?[]:["previous"],...y,...w>t+2?["start-ellipsis"]:t+1<r-t?[t+1]:[],...v(w,x),...x<r-t-1?["end-ellipsis"]:r-t>t?[r-t]:[],...b,...s?[]:["next"],...d?["last"]:[]],S=e=>{switch(e){case"first":return 1;case"previous":return p-1;case"next":return p+1;case"last":return r;default:return null}},C=_.map((e=>"number"==typeof e?{onClick:t=>{g(t,e)},type:"page",page:e,selected:e===p,disabled:o,"aria-current":e===p?"true":void 0}:{onClick:t=>{g(t,S(e))},type:e,page:S(e),selected:!1,disabled:o||-1===e.indexOf("ellipsis")&&("next"===e||"last"===e?p>=r:p<=1)}));return(0,E.Z)({items:C},f)}function rl(e){return(0,ge.Z)("MuiPaginationItem",e)}var il=(0,me.Z)("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),ol=n(42989),sl=n(63046),al=(0,Pt.Z)((0,be.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),ll=(0,Pt.Z)((0,be.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");const cl=["className","color","component","disabled","page","selected","shape","size","type","variant"],ul=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${(0,Et.Z)(n.size)}`],"text"===n.variant&&t[`text${(0,Et.Z)(n.color)}`],"outlined"===n.variant&&t[`outlined${(0,Et.Z)(n.color)}`],"rounded"===n.shape&&t.rounded,"page"===n.type&&t.page,("start-ellipsis"===n.type||"end-ellipsis"===n.type)&&t.ellipsis,("previous"===n.type||"next"===n.type)&&t.previousNext,("first"===n.type||"last"===n.type)&&t.firstLast]},dl=(0,W.ZP)("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:ul})((({theme:e,ownerState:t})=>(0,E.Z)({},e.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:e.palette.text.primary,height:"auto",[`&.${il.disabled}`]:{opacity:e.palette.action.disabledOpacity}},"small"===t.size&&{minWidth:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===t.size&&{minWidth:40,borderRadius:20,padding:"0 10px",fontSize:e.typography.pxToRem(15)}))),hl=(0,W.ZP)(gt.Z,{name:"MuiPaginationItem",slot:"Root",overridesResolver:ul})((({theme:e,ownerState:t})=>(0,E.Z)({},e.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:e.palette.text.primary,[`&.${il.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`&.${il.disabled}`]:{opacity:e.palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${il.selected}`]:{backgroundColor:e.palette.action.selected,"&:hover":{backgroundColor:(0,I.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.palette.action.selected}},[`&.${il.focusVisible}`]:{backgroundColor:(0,I.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${il.disabled}`]:{opacity:1,color:e.palette.action.disabled,backgroundColor:e.palette.action.selected}}},"small"===t.size&&{minWidth:26,height:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===t.size&&{minWidth:40,height:40,borderRadius:20,padding:"0 10px",fontSize:e.typography.pxToRem(15)},"rounded"===t.shape&&{borderRadius:e.shape.borderRadius})),(({theme:e,ownerState:t})=>(0,E.Z)({},"text"===t.variant&&{[`&.${il.selected}`]:(0,E.Z)({},"standard"!==t.color&&{color:e.palette[t.color].contrastText,backgroundColor:e.palette[t.color].main,"&:hover":{backgroundColor:e.palette[t.color].dark,"@media (hover: none)":{backgroundColor:e.palette[t.color].main}},[`&.${il.focusVisible}`]:{backgroundColor:e.palette[t.color].dark}},{[`&.${il.disabled}`]:{color:e.palette.action.disabled}})},"outlined"===t.variant&&{border:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),[`&.${il.selected}`]:(0,E.Z)({},"standard"!==t.color&&{color:e.palette[t.color].main,border:`1px solid ${(0,I.Fq)(e.palette[t.color].main,.5)}`,backgroundColor:(0,I.Fq)(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:(0,I.Fq)(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${il.focusVisible}`]:{backgroundColor:(0,I.Fq)(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${il.disabled}`]:{borderColor:e.palette.action.disabledBackground,color:e.palette.action.disabled}})}))),fl=(0,W.ZP)("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})((({theme:e,ownerState:t})=>(0,E.Z)({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},"small"===t.size&&{fontSize:e.typography.pxToRem(18)},"large"===t.size&&{fontSize:e.typography.pxToRem(22)}))),pl=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiPaginationItem"}),{className:r,color:i="standard",component:o,disabled:s=!1,page:a,selected:l=!1,shape:c="circular",size:u="medium",type:d="page",variant:h="text"}=n,f=(0,T.Z)(n,cl),p=(0,E.Z)({},n,{color:i,disabled:s,selected:l,shape:c,size:u,type:d,variant:h}),m=(0,H.Z)(),g=(e=>{const{classes:t,color:n,disabled:r,selected:i,size:o,shape:s,type:a,variant:l}=e,c={root:["root",`size${(0,Et.Z)(o)}`,l,s,"standard"!==n&&`${l}${(0,Et.Z)(n)}`,r&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[a]],icon:["icon"]};return(0,pe.Z)(c,rl,t)})(p),v=("rtl"===m.direction?{previous:ll,next:al,last:ol.Z,first:sl.Z}:{previous:al,next:ll,first:ol.Z,last:sl.Z})[d];return"start-ellipsis"===d||"end-ellipsis"===d?(0,be.jsx)(dl,(0,E.Z)({ref:t,ownerState:p,className:(0,ue.Z)(g.root,r)},f,{children:""})):(0,be.jsxs)(hl,(0,E.Z)({ref:t,ownerState:p,component:o,disabled:s,className:(0,ue.Z)(g.root,r)},f,{children:["page"===d&&a,v?(0,be.jsx)(fl,{as:v,ownerState:p,className:g.icon}):null]}))}));var ml=pl;const gl=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],vl=(0,W.ZP)("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),yl=(0,W.ZP)("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function bl(e,t,n){return"page"===e?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}var wl=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiPagination"}),{boundaryCount:r=1,className:i,color:o="standard",count:s=1,defaultPage:a=1,disabled:l=!1,getItemAriaLabel:c=bl,hideNextButton:u=!1,hidePrevButton:d=!1,renderItem:h=(e=>(0,be.jsx)(ml,(0,E.Z)({},e))),shape:f="circular",showFirstButton:p=!1,showLastButton:m=!1,siblingCount:g=1,size:v="medium",variant:y="text"}=n,b=(0,T.Z)(n,gl),{items:w}=nl((0,E.Z)({},n,{componentName:"Pagination"})),x=(0,E.Z)({},n,{boundaryCount:r,color:o,count:s,defaultPage:a,disabled:l,getItemAriaLabel:c,hideNextButton:u,hidePrevButton:d,renderItem:h,shape:f,showFirstButton:p,showLastButton:m,siblingCount:g,size:v,variant:y}),_=(e=>{const{classes:t,variant:n}=e,r={root:["root",n],ul:["ul"]};return(0,pe.Z)(r,Qa,t)})(x);return(0,be.jsx)(vl,(0,E.Z)({"aria-label":"pagination navigation",className:(0,ue.Z)(_.root,i),ownerState:x,ref:t},b,{children:(0,be.jsx)(yl,{className:_.ul,ownerState:x,children:w.map(((e,t)=>(0,be.jsx)("li",{children:h((0,E.Z)({},e,{color:o,"aria-label":c(e.type,e.page,e.selected),shape:f,size:v,variant:y}))},t)))})}))})),xl=n(89376),_l=n(90103),Sl=n(3994),El=n(21368),Tl=n(30297),Cl=n(68061),Ml=n(94757),kl=n(13113),Pl=n(27909),Al=(0,Pt.Z)((0,be.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),Il=(0,Pt.Z)((0,be.jsx)("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function Rl(e){return(0,ge.Z)("MuiRating",e)}var Ll=(0,me.Z)("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]);const Ol=["value"],Nl=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function Dl(e,t){if(null==e)return e;const n=Math.round(e/t)*t;return Number(n.toFixed(function(e){const t=e.toString().split(".")[1];return t?t.length:0}(t)))}const Fl=(0,W.ZP)("span",{name:"MuiRating",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Ll.visuallyHidden}`]:t.visuallyHidden},t.root,t[`size${(0,Et.Z)(n.size)}`],n.readOnly&&t.readOnly]}})((({theme:e,ownerState:t})=>(0,E.Z)({display:"inline-flex",position:"relative",fontSize:e.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent",[`&.${Ll.disabled}`]:{opacity:e.palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Ll.focusVisible} .${Ll.iconActive}`]:{outline:"1px solid #999"},[`& .${Ll.visuallyHidden}`]:kl.Z},"small"===t.size&&{fontSize:e.typography.pxToRem(18)},"large"===t.size&&{fontSize:e.typography.pxToRem(30)},t.readOnly&&{pointerEvents:"none"}))),Bl=(0,W.ZP)("label",{name:"MuiRating",slot:"Label",overridesResolver:(e,t)=>t.label})((({ownerState:e})=>(0,E.Z)({cursor:"inherit"},e.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"}))),Zl=(0,W.ZP)("span",{name:"MuiRating",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.iconEmpty&&t.iconEmpty,n.iconFilled&&t.iconFilled,n.iconHover&&t.iconHover,n.iconFocus&&t.iconFocus,n.iconActive&&t.iconActive]}})((({theme:e,ownerState:t})=>(0,E.Z)({display:"flex",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),pointerEvents:"none"},t.iconActive&&{transform:"scale(1.2)"},t.iconEmpty&&{color:e.palette.action.disabled}))),Vl=(0,W.ZP)("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:e=>(0,W.Dz)(e)&&"iconActive"!==e,overridesResolver:(e,t)=>{const{iconActive:n}=e;return[t.decimal,n&&t.iconActive]}})((({iconActive:e})=>(0,E.Z)({position:"relative"},e&&{transform:"scale(1.2)"})));function zl(e){const t=(0,T.Z)(e,Ol);return(0,be.jsx)("span",(0,E.Z)({},t))}function Ul(e){const{classes:t,disabled:n,emptyIcon:r,focus:i,getLabelText:o,highlightSelectedOnly:s,hover:a,icon:l,IconContainerComponent:c,isActive:u,itemValue:d,labelProps:h,name:f,onBlur:p,onChange:m,onClick:g,onFocus:v,readOnly:y,ownerState:b,ratingValue:w,ratingValueRounded:x}=e,_=s?d===w:d<=w,S=d<=a,T=d<=i,C=d===x,M=(0,Pl.Z)(),k=(0,be.jsx)(Zl,{as:c,value:d,className:(0,ue.Z)(t.icon,_?t.iconFilled:t.iconEmpty,S&&t.iconHover,T&&t.iconFocus,u&&t.iconActive),ownerState:(0,E.Z)({},b,{iconEmpty:!_,iconFilled:_,iconHover:S,iconFocus:T,iconActive:u}),children:r&&!_?r:l});return y?(0,be.jsx)("span",(0,E.Z)({},h,{children:k})):(0,be.jsxs)(J.Fragment,{children:[(0,be.jsxs)(Bl,(0,E.Z)({ownerState:(0,E.Z)({},b,{emptyValueFocused:void 0}),htmlFor:M},h,{children:[k,(0,be.jsx)("span",{className:t.visuallyHidden,children:o(d)})]})),(0,be.jsx)("input",{className:t.visuallyHidden,onFocus:v,onBlur:p,onChange:m,onClick:g,disabled:n,value:d,id:M,type:"radio",name:f,checked:C})]})}const jl=(0,be.jsx)(Al,{fontSize:"inherit"}),Hl=(0,be.jsx)(Il,{fontSize:"inherit"});function Gl(e){return`${e} Star${1!==e?"s":""}`}var Wl=J.forwardRef((function(e,t){const n=(0,G.Z)({name:"MuiRating",props:e}),{className:r,defaultValue:i=null,disabled:o=!1,emptyIcon:s=Hl,emptyLabelText:a="Empty",getLabelText:l=Gl,highlightSelectedOnly:c=!1,icon:u=jl,IconContainerComponent:d=zl,max:h=5,name:f,onChange:p,onChangeActive:m,onMouseLeave:g,onMouseMove:v,precision:y=1,readOnly:b=!1,size:w="medium",value:x}=n,_=(0,T.Z)(n,Nl),S=(0,Pl.Z)(f),[C,M]=(0,et.Z)({controlled:x,default:i,name:"Rating"}),k=Dl(C,y),P=(0,H.Z)(),[{hover:A,focus:I},R]=J.useState({hover:-1,focus:-1});let L=k;-1!==A&&(L=A),-1!==I&&(L=I);const{isFocusVisibleRef:O,onBlur:N,onFocus:D,ref:F}=(0,ra.Z)(),[B,Z]=J.useState(!1),V=J.useRef(),z=(0,an.Z)(F,V),U=(0,an.Z)(z,t),j=e=>{let t=""===e.target.value?null:parseFloat(e.target.value);-1!==A&&(t=A),M(t),p&&p(e,t)},W=e=>{0===e.clientX&&0===e.clientY||(R({hover:-1,focus:-1}),M(null),p&&parseFloat(e.target.value)===k&&p(e,null))},$=e=>{D(e),!0===O.current&&Z(!0);const t=parseFloat(e.target.value);R((e=>({hover:e.hover,focus:t})))},q=e=>{if(-1!==A)return;N(e),!1===O.current&&Z(!1);R((e=>({hover:e.hover,focus:-1})))},[Y,K]=J.useState(!1),X=(0,E.Z)({},n,{defaultValue:i,disabled:o,emptyIcon:s,emptyLabelText:a,emptyValueFocused:Y,focusVisible:B,getLabelText:l,icon:u,IconContainerComponent:d,max:h,precision:y,readOnly:b,size:w}),Q=(e=>{const{classes:t,size:n,readOnly:r,disabled:i,emptyValueFocused:o,focusVisible:s}=e,a={root:["root",`size${(0,Et.Z)(n)}`,i&&"disabled",s&&"focusVisible",r&&"readyOnly"],label:["label","pristine"],labelEmptyValue:[o&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return(0,pe.Z)(a,Rl,t)})(X);return(0,be.jsxs)(Fl,(0,E.Z)({ref:U,onMouseMove:e=>{v&&v(e);const t=V.current,{right:n,left:r}=t.getBoundingClientRect(),{width:i}=t.firstChild.getBoundingClientRect();let o;o="rtl"===P.direction?(n-e.clientX)/(i*h):(e.clientX-r)/(i*h);let s=Dl(h*o+y/2,y);s=function(e,t,n){return e<t?t:e>n?n:e}(s,y,h),R((e=>e.hover===s&&e.focus===s?e:{hover:s,focus:s})),Z(!1),m&&A!==s&&m(e,s)},onMouseLeave:e=>{g&&g(e);R({hover:-1,focus:-1}),m&&-1!==A&&m(e,-1)},className:(0,ue.Z)(Q.root,r),ownerState:X,role:b?"img":null,"aria-label":b?l(L):null},_,{children:[Array.from(new Array(h)).map(((e,t)=>{const n=t+1,r={classes:Q,disabled:o,emptyIcon:s,focus:I,getLabelText:l,highlightSelectedOnly:c,hover:A,icon:u,IconContainerComponent:d,name:S,onBlur:q,onChange:j,onClick:W,onFocus:$,ratingValue:L,ratingValueRounded:k,readOnly:b,ownerState:X},i=n===Math.ceil(L)&&(-1!==A||-1!==I);if(y<1){const e=Array.from(new Array(1/y));return(0,be.jsx)(Vl,{className:(0,ue.Z)(Q.decimal,i&&Q.iconActive),ownerState:X,iconActive:i,children:e.map(((t,i)=>{const o=Dl(n-1+(i+1)*y,y);return(0,be.jsx)(Ul,(0,E.Z)({},r,{isActive:!1,itemValue:o,labelProps:{style:e.length-1===i?{}:{width:o===L?(i+1)*y*100+"%":"0%",overflow:"hidden",zIndex:1,position:"absolute"}}}),o)}))},n)}return(0,be.jsx)(Ul,(0,E.Z)({},r,{isActive:i,itemValue:n}),n)})),!b&&!o&&(0,be.jsxs)(Bl,{className:(0,ue.Z)(Q.label,Q.labelEmptyValue),ownerState:X,children:[(0,be.jsx)("input",{className:Q.visuallyHidden,value:"",id:`${S}-empty`,type:"radio",name:S,checked:null==k,onFocus:()=>K(!0),onBlur:()=>K(!1),onChange:j}),(0,be.jsx)("span",{className:Q.visuallyHidden,children:a})]})]}))}));function $l(e){return(0,ge.Z)("MuiScopedCssBaseline",e)}var ql=(0,me.Z)("MuiScopedCssBaseline",["root"]);const Yl=["className","component"],Kl=(0,W.ZP)("div",{name:"MuiScopedCssBaseline",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>(0,E.Z)({},oi,si(e),{"& *, & *::before, & *::after":{boxSizing:"inherit"},"& strong, & b":{fontWeight:e.typography.fontWeightBold}})));var Xl=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiScopedCssBaseline"}),{className:r,component:i="div"}=n,o=(0,T.Z)(n,Yl),s=(0,E.Z)({},n,{component:i}),a=(e=>{const{classes:t}=e;return(0,pe.Z)({root:["root"]},$l,t)})(s);return(0,be.jsx)(Kl,(0,E.Z)({as:i,className:(0,ue.Z)(a.root,r),ref:t,ownerState:s},o))})),Jl=n(43106),Ql=n(44025);function ec(e){return(0,ge.Z)("MuiSkeleton",e)}var tc=(0,me.Z)("MuiSkeleton",["root","text","rectangular","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const nc=["animation","className","component","height","style","variant","width"];let rc,ic,oc,sc,ac=e=>e;const lc=(0,Ds.F4)(rc||(rc=ac`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),cc=(0,Ds.F4)(ic||(ic=ac`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),uc=(0,W.ZP)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})((({theme:e,ownerState:t})=>{const n=B(e.shape.borderRadius)||"px",r=Z(e.shape.borderRadius);return(0,E.Z)({display:"block",backgroundColor:(0,I.Fq)(e.palette.text.primary,"light"===e.palette.mode?.11:.13),height:"1.2em"},"text"===t.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${n}/${Math.round(r/.6*10)/10}${n}`,"&:empty:before":{content:'"\\00a0"'}},"circular"===t.variant&&{borderRadius:"50%"},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})}),(({ownerState:e})=>"pulse"===e.animation&&(0,Ds.iv)(oc||(oc=ac`
      animation: ${0} 1.5s ease-in-out 0.5s infinite;
    `),lc)),(({ownerState:e,theme:t})=>"wave"===e.animation&&(0,Ds.iv)(sc||(sc=ac`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 1.6s linear 0.5s infinite;
        background: linear-gradient(90deg, transparent, ${0}, transparent);
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),cc,t.palette.action.hover))),dc=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiSkeleton"}),{animation:r="pulse",className:i,component:o="span",height:s,style:a,variant:l="text",width:c}=n,u=(0,T.Z)(n,nc),d=(0,E.Z)({},n,{animation:r,component:o,variant:l,hasChildren:Boolean(u.children)}),h=(e=>{const{classes:t,variant:n,animation:r,hasChildren:i,width:o,height:s}=e,a={root:["root",n,r,i&&"withChildren",i&&!o&&"fitContent",i&&!s&&"heightAuto"]};return(0,pe.Z)(a,ec,t)})(d);return(0,be.jsx)(uc,(0,E.Z)({as:o,ref:t,className:(0,ue.Z)(h.root,i),ownerState:d},u,{style:(0,E.Z)({width:c,height:s},a)}))}));var hc=dc,fc=n(56969),pc=n(66443);function mc(e){return(0,ge.Z)("MuiSnackbarContent",e)}var gc=(0,me.Z)("MuiSnackbarContent",["root","message","action"]);const vc=["action","className","message","role"],yc=(0,W.ZP)(Je.Z,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>{const t="light"===e.palette.mode?.8:.98,n=(0,I._4)(e.palette.background.default,t);return(0,E.Z)({},e.typography.body2,{color:e.palette.getContrastText(n),backgroundColor:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})})),bc=(0,W.ZP)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),wc=(0,W.ZP)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8});var xc=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiSnackbarContent"}),{action:r,className:i,message:o,role:s="alert"}=n,a=(0,T.Z)(n,vc),l=n,c=(e=>{const{classes:t}=e;return(0,pe.Z)({root:["root"],action:["action"],message:["message"]},mc,t)})(l);return(0,be.jsxs)(yc,(0,E.Z)({role:s,square:!0,elevation:6,className:(0,ue.Z)(c.root,i),ownerState:l,ref:t},a,{children:[(0,be.jsx)(bc,{className:c.message,ownerState:l,children:o}),r?(0,be.jsx)(wc,{className:c.action,ownerState:l,children:r}):null]}))}));function _c(e){return(0,ge.Z)("MuiSnackbar",e)}var Sc=(0,me.Z)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Ec=["onEnter","onExited"],Tc=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onClose","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],Cc=(0,W.ZP)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${(0,Et.Z)(n.anchorOrigin.vertical)}${(0,Et.Z)(n.anchorOrigin.horizontal)}`]]}})((({theme:e,ownerState:t})=>{const n=(0,E.Z)({},!t.isRtl&&{left:"50%",right:"auto",transform:"translateX(-50%)"},t.isRtl&&{right:"50%",left:"auto",transform:"translateX(50%)"});return(0,E.Z)({zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===t.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===t.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===t.anchorOrigin.horizontal&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:(0,E.Z)({},"top"===t.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===t.anchorOrigin.horizontal&&n,"left"===t.anchorOrigin.horizontal&&(0,E.Z)({},!t.isRtl&&{left:24,right:"auto"},t.isRtl&&{right:24,left:"auto"}),"right"===t.anchorOrigin.horizontal&&(0,E.Z)({},!t.isRtl&&{right:24,left:"auto"},t.isRtl&&{left:24,right:"auto"}))})}));var Mc=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiSnackbar"}),{action:r,anchorOrigin:{vertical:i,horizontal:o}={vertical:"bottom",horizontal:"left"},autoHideDuration:s=null,children:a,className:l,ClickAwayListenerProps:c,ContentProps:u,disableWindowBlurListener:d=!1,message:h,onClose:f,onMouseEnter:p,onMouseLeave:m,open:g,resumeHideDuration:v,TransitionComponent:y=To.Z,transitionDuration:b={enter:j.x9.enteringScreen,exit:j.x9.leavingScreen},TransitionProps:{onEnter:w,onExited:x}={}}=n,_=(0,T.Z)(n.TransitionProps,Ec),S=(0,T.Z)(n,Tc),C="rtl"===(0,H.Z)().direction,M=(0,E.Z)({},n,{anchorOrigin:{vertical:i,horizontal:o},isRtl:C}),k=(e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${(0,Et.Z)(n.vertical)}${(0,Et.Z)(n.horizontal)}`]};return(0,pe.Z)(r,_c,t)})(M),P=J.useRef(),[A,I]=J.useState(!0),R=(0,qr.Z)(((...e)=>{f&&f(...e)})),L=(0,qr.Z)((e=>{f&&null!=e&&(clearTimeout(P.current),P.current=setTimeout((()=>{R(null,"timeout")}),e))}));J.useEffect((()=>(g&&L(s),()=>{clearTimeout(P.current)})),[g,s,L]);const O=()=>{clearTimeout(P.current)},N=J.useCallback((()=>{null!=s&&L(null!=v?v:.5*s)}),[s,v,L]);return J.useEffect((()=>{if(!d&&g)return window.addEventListener("focus",N),window.addEventListener("blur",O),()=>{window.removeEventListener("focus",N),window.removeEventListener("blur",O)}}),[d,N,g]),!g&&A?null:(0,be.jsx)(Kr,(0,E.Z)({onClickAway:e=>{f&&f(e,"clickaway")}},c,{children:(0,be.jsx)(Cc,(0,E.Z)({className:(0,ue.Z)(k.root,l),onMouseEnter:e=>{p&&p(e),O()},onMouseLeave:e=>{m&&m(e),N()},ownerState:M,ref:t},S,{children:(0,be.jsx)(y,(0,E.Z)({appear:!0,in:g,timeout:b,direction:"top"===i?"down":"up",onEnter:(e,t)=>{I(!1),w&&w(e,t)},onExited:e=>{I(!0),x&&x(e)}},_,{children:a||(0,be.jsx)(xc,(0,E.Z)({message:h,action:r},u))}))}))}))})),kc=n(12666),Pc=n(30577);const Ac=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Ic={entering:{transform:"none"},entered:{transform:"none"}},Rc={enter:j.x9.enteringScreen,exit:j.x9.leavingScreen},Lc=J.forwardRef((function(e,t){const{addEndListener:n,appear:r=!0,children:i,easing:o,in:s,onEnter:a,onEntered:l,onEntering:c,onExit:u,onExited:d,onExiting:h,style:f,timeout:p=Rc,TransitionComponent:m=kc.ZP}=e,g=(0,T.Z)(e,Ac),v=(0,H.Z)(),y=J.useRef(null),b=(0,an.Z)(i.ref,t),w=(0,an.Z)(y,b),x=e=>t=>{if(e){const n=y.current;void 0===t?e(n):e(n,t)}},_=x(c),S=x(((e,t)=>{(0,Pc.n)(e);const n=(0,Pc.C)({style:f,timeout:p,easing:o},{mode:"enter"});e.style.webkitTransition=v.transitions.create("transform",n),e.style.transition=v.transitions.create("transform",n),a&&a(e,t)})),C=x(l),M=x(h),k=x((e=>{const t=(0,Pc.C)({style:f,timeout:p,easing:o},{mode:"exit"});e.style.webkitTransition=v.transitions.create("transform",t),e.style.transition=v.transitions.create("transform",t),u&&u(e)})),P=x(d);return(0,be.jsx)(m,(0,E.Z)({appear:r,in:s,nodeRef:y,onEnter:S,onEntered:C,onEntering:_,onExit:k,onExited:P,onExiting:M,addEndListener:e=>{n&&n(y.current,e)},timeout:p},g,{children:(e,t)=>J.cloneElement(i,(0,E.Z)({style:(0,E.Z)({transform:"scale(0)",visibility:"exited"!==e||s?void 0:"hidden"},Ic[e],f,i.props.style),ref:w},t))}))}));var Oc=Lc;function Nc(e){return(0,ge.Z)("MuiSpeedDial",e)}var Dc=(0,me.Z)("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]);const Fc=["ref"],Bc=["ariaLabel","FabProps","children","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"],Zc=["ref"];function Vc(e){return"up"===e||"down"===e?"vertical":"right"===e||"left"===e?"horizontal":void 0}const zc=(0,W.ZP)("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`direction${(0,Et.Z)(n.direction)}`]]}})((({theme:e,ownerState:t})=>(0,E.Z)({zIndex:e.zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},"up"===t.direction&&{flexDirection:"column-reverse",[`& .${Dc.actions}`]:{flexDirection:"column-reverse",marginBottom:-32,paddingBottom:48}},"down"===t.direction&&{flexDirection:"column",[`& .${Dc.actions}`]:{flexDirection:"column",marginTop:-32,paddingTop:48}},"left"===t.direction&&{flexDirection:"row-reverse",[`& .${Dc.actions}`]:{flexDirection:"row-reverse",marginRight:-32,paddingRight:48}},"right"===t.direction&&{flexDirection:"row",[`& .${Dc.actions}`]:{flexDirection:"row",marginLeft:-32,paddingLeft:48}}))),Uc=(0,W.ZP)(co,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(e,t)=>t.fab})((()=>({pointerEvents:"auto"}))),jc=(0,W.ZP)("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.actions,!n.open&&t.actionsClosed]}})((({ownerState:e})=>(0,E.Z)({display:"flex",pointerEvents:"auto"},!e.open&&{transition:"top 0s linear 0.2s",pointerEvents:"none"})));var Hc=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiSpeedDial"}),{ariaLabel:r,FabProps:{ref:i}={},children:o,className:s,direction:a="up",hidden:l=!1,icon:c,onBlur:u,onClose:d,onFocus:h,onKeyDown:f,onMouseEnter:p,onMouseLeave:m,onOpen:g,open:v,TransitionComponent:y=Oc,transitionDuration:b={enter:j.x9.enteringScreen,exit:j.x9.leavingScreen},TransitionProps:w}=n,x=(0,T.Z)(n.FabProps,Fc),_=(0,T.Z)(n,Bc),[S,C]=(0,et.Z)({controlled:v,default:!1,name:"SpeedDial",state:"open"}),M=(0,E.Z)({},n,{open:S,direction:a}),k=(e=>{const{classes:t,open:n,direction:r}=e,i={root:["root",`direction${(0,Et.Z)(r)}`],fab:["fab"],actions:["actions",!n&&"actionsClosed"]};return(0,pe.Z)(i,Nc,t)})(M),P=J.useRef();J.useEffect((()=>()=>{clearTimeout(P.current)}),[]);const A=J.useRef(0),I=J.useRef(),R=J.useRef([]);R.current=[R.current[0]];const L=J.useCallback((e=>{R.current[0]=e}),[]),O=(0,an.Z)(i,L),N=(e,t)=>n=>{R.current[e+1]=n,t&&t(n)};J.useEffect((()=>{S||(A.current=0,I.current=void 0)}),[S]);const D=e=>{"mouseleave"===e.type&&m&&m(e),"blur"===e.type&&u&&u(e),clearTimeout(P.current),"blur"===e.type?P.current=setTimeout((()=>{C(!1),d&&d(e,"blur")})):(C(!1),d&&d(e,"mouseLeave"))},F=e=>{"mouseenter"===e.type&&p&&p(e),"focus"===e.type&&h&&h(e),clearTimeout(P.current),S||(P.current=setTimeout((()=>{if(C(!0),g){g(e,{focus:"focus",mouseenter:"mouseEnter"}[e.type])}})))},B=r.replace(/^[^a-z]+|[^\w:.-]+/gi,""),Z=J.Children.toArray(o).filter((e=>J.isValidElement(e))),V=Z.map(((e,t)=>{const n=e.props,{FabProps:{ref:r}={},tooltipPlacement:i}=n,o=(0,T.Z)(n.FabProps,Zc),s=i||("vertical"===Vc(a)?"left":"top");return J.cloneElement(e,{FabProps:(0,E.Z)({},o,{ref:N(t,r)}),delay:30*(S?t:Z.length-t),open:S,tooltipPlacement:s,id:`${B}-action-${t}`})}));return(0,be.jsxs)(zc,(0,E.Z)({className:(0,ue.Z)(k.root,s),ref:t,role:"presentation",onKeyDown:e=>{f&&f(e);const t=e.key.replace("Arrow","").toLowerCase(),{current:n=t}=I;if("Escape"===e.key)return C(!1),R.current[0].focus(),void(d&&d(e,"escapeKeyDown"));if(Vc(t)===Vc(n)&&void 0!==Vc(t)){e.preventDefault();const s=t===n?1:-1,a=(r=A.current+s,i=0,o=R.current.length-1,r<i?i:r>o?o:r);R.current[a].focus(),A.current=a,I.current=n}var r,i,o},onBlur:D,onFocus:F,onMouseEnter:F,onMouseLeave:D,ownerState:M},_,{children:[(0,be.jsx)(y,(0,E.Z)({in:!l,timeout:b,unmountOnExit:!0},w,{children:(0,be.jsx)(Uc,(0,E.Z)({color:"primary","aria-label":r,"aria-haspopup":"true","aria-expanded":S,"aria-controls":`${B}-actions`},x,{onClick:e=>{x.onClick&&x.onClick(e),clearTimeout(P.current),S?(C(!1),d&&d(e,"toggle")):(C(!0),g&&g(e,"toggle"))},className:(0,ue.Z)(k.fab,x.className),ref:O,ownerState:M,children:J.isValidElement(c)&&(0,as.Z)(c,["SpeedDialIcon"])?J.cloneElement(c,{open:S}):c}))})),(0,be.jsx)(jc,{id:`${B}-actions`,role:"menu","aria-orientation":Vc(a),className:(0,ue.Z)(k.actions,!S&&k.actionsClosed),ownerState:M,children:V})]}))})),Gc=n(21023);function Wc(e){return(0,ge.Z)("MuiSpeedDialAction",e)}var $c=(0,me.Z)("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]);const qc=["className","delay","FabProps","icon","id","open","TooltipClasses","tooltipOpen","tooltipPlacement","tooltipTitle"],Yc=(0,W.ZP)(co,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.fab,!n.open&&t.fabClosed]}})((({theme:e,ownerState:t})=>(0,E.Z)({margin:8,color:e.palette.text.secondary,backgroundColor:e.palette.background.paper,"&:hover":{backgroundColor:(0,I._4)(e.palette.background.paper,.15)},transition:`${e.transitions.create("transform",{duration:e.transitions.duration.shorter})}, opacity 0.8s`,opacity:1},!t.open&&{opacity:0,transform:"scale(0)"}))),Kc=(0,W.ZP)("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.staticTooltip,!n.open&&t.staticTooltipClosed,t[`tooltipPlacement${(0,Et.Z)(n.tooltipPlacement)}`]]}})((({theme:e,ownerState:t})=>({position:"relative",display:"flex",alignItems:"center",[`& .${$c.staticTooltipLabel}`]:(0,E.Z)({transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.shorter}),opacity:1},!t.open&&{opacity:0,transform:"scale(0.5)"},"left"===t.tooltipPlacement&&{transformOrigin:"100% 50%",right:"100%",marginRight:8},"right"===t.tooltipPlacement&&{transformOrigin:"0% 50%",left:"100%",marginLeft:8})}))),Xc=(0,W.ZP)("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(e,t)=>t.staticTooltipLabel})((({theme:e})=>(0,E.Z)({position:"absolute"},e.typography.body1,{backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius,boxShadow:e.shadows[1],color:e.palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"})));var Jc=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiSpeedDialAction"}),{className:r,delay:i=0,FabProps:o={},icon:s,id:a,open:l,TooltipClasses:c,tooltipOpen:u=!1,tooltipPlacement:d="left",tooltipTitle:h}=n,f=(0,T.Z)(n,qc),p=(0,E.Z)({},n,{tooltipPlacement:d}),m=(e=>{const{open:t,tooltipPlacement:n,classes:r}=e,i={fab:["fab",!t&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${(0,Et.Z)(n)}`,!t&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return(0,pe.Z)(i,Wc,r)})(p),[g,v]=J.useState(u),y={transitionDelay:`${i}ms`},b=(0,be.jsx)(Yc,(0,E.Z)({size:"small",className:(0,ue.Z)(m.fab,r),tabIndex:-1,role:"menuitem",ownerState:p},o,{style:(0,E.Z)({},y,o.style),children:s}));return u?(0,be.jsxs)(Kc,(0,E.Z)({id:a,ref:t,className:m.staticTooltip,ownerState:p},f,{children:[(0,be.jsx)(Xc,{style:y,id:`${a}-label`,className:m.staticTooltipLabel,ownerState:p,children:h}),J.cloneElement(b,{"aria-labelledby":`${a}-label`})]})):(!l&&g&&v(!1),(0,be.jsx)(Gc.Z,(0,E.Z)({id:a,ref:t,title:h,placement:d,onClose:()=>{v(!1)},onOpen:()=>{v(!0)},open:l&&g,classes:c},f,{children:b})))})),Qc=(0,Pt.Z)((0,be.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");function eu(e){return(0,ge.Z)("MuiSpeedDialIcon",e)}var tu=(0,me.Z)("MuiSpeedDialIcon",["root","icon","iconOpen","iconWithOpenIconOpen","openIcon","openIconOpen"]);const nu=["className","icon","open","openIcon"],ru=(0,W.ZP)("span",{name:"MuiSpeedDialIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${tu.icon}`]:t.icon},{[`& .${tu.icon}`]:n.open&&t.iconOpen},{[`& .${tu.icon}`]:n.open&&n.openIcon&&t.iconWithOpenIconOpen},{[`& .${tu.openIcon}`]:t.openIcon},{[`& .${tu.openIcon}`]:n.open&&t.openIconOpen},t.root]}})((({theme:e,ownerState:t})=>({height:24,[`& .${tu.icon}`]:(0,E.Z)({transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.short})},t.open&&(0,E.Z)({transform:"rotate(45deg)"},t.openIcon&&{opacity:0})),[`& .${tu.openIcon}`]:(0,E.Z)({position:"absolute",transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.short}),opacity:0,transform:"rotate(-45deg)"},t.open&&{transform:"rotate(0deg)",opacity:1})}))),iu=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiSpeedDialIcon"}),{className:r,icon:i,openIcon:o}=n,s=(0,T.Z)(n,nu),a=n,l=(e=>{const{classes:t,open:n,openIcon:r}=e,i={root:["root"],icon:["icon",n&&"iconOpen",r&&n&&"iconWithOpenIconOpen"],openIcon:["openIcon",n&&"openIconOpen"]};return(0,pe.Z)(i,eu,t)})(a);function c(e,t){return J.isValidElement(e)?J.cloneElement(e,{className:t}):e}return(0,be.jsxs)(ru,(0,E.Z)({className:(0,ue.Z)(l.root,r),ref:t,ownerState:a},s,{children:[o?c(o,l.openIcon):null,i?c(i,l.icon):(0,be.jsx)(Qc,{className:l.icon})]}))}));iu.muiName="SpeedDialIcon";var ou=iu,su=n(26447);var au=J.createContext({});var lu=J.createContext({});function cu(e){return(0,ge.Z)("MuiStep",e)}var uu=(0,me.Z)("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const du=["active","children","className","completed","disabled","expanded","index","last"],hu=(0,W.ZP)("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})((({ownerState:e})=>(0,E.Z)({},"horizontal"===e.orientation&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})));var fu=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiStep"}),{active:r,children:i,className:o,completed:s,disabled:a,expanded:l=!1,index:c,last:u}=n,d=(0,T.Z)(n,du),{activeStep:h,connector:f,alternativeLabel:p,orientation:m,nonLinear:g}=J.useContext(au);let[v=!1,y=!1,b=!1]=[r,s,a];h===c?v=void 0===r||r:!g&&h>c?y=void 0===s||s:!g&&h<c&&(b=void 0===a||a);const w=J.useMemo((()=>({index:c,last:u,expanded:l,icon:c+1,active:v,completed:y,disabled:b})),[c,u,l,v,y,b]),x=(0,E.Z)({},n,{active:v,orientation:m,alternativeLabel:p,completed:y,disabled:b,expanded:l}),_=(e=>{const{classes:t,orientation:n,alternativeLabel:r,completed:i}=e,o={root:["root",n,r&&"alternativeLabel",i&&"completed"]};return(0,pe.Z)(o,cu,t)})(x),S=(0,be.jsxs)(hu,(0,E.Z)({className:(0,ue.Z)(_.root,o),ref:t,ownerState:x},d,{children:[f&&p&&0!==c?f:null,i]}));return(0,be.jsx)(lu.Provider,{value:w,children:f&&!p&&0!==c?(0,be.jsxs)(J.Fragment,{children:[f,S]}):S})})),pu=(0,Pt.Z)((0,be.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),mu=(0,Pt.Z)((0,be.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning"),gu=n(2373);function vu(e){return(0,ge.Z)("MuiStepIcon",e)}var yu,bu=(0,me.Z)("MuiStepIcon",["root","active","completed","error","text"]);const wu=["active","className","completed","error","icon"],xu=(0,W.ZP)(gu.Z,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:e.palette.text.disabled,[`&.${bu.completed}`]:{color:e.palette.primary.main},[`&.${bu.active}`]:{color:e.palette.primary.main},[`&.${bu.error}`]:{color:e.palette.error.main}}))),_u=(0,W.ZP)("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})((({theme:e})=>({fill:e.palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})));var Su=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiStepIcon"}),{active:r=!1,className:i,completed:o=!1,error:s=!1,icon:a}=n,l=(0,T.Z)(n,wu),c=(0,E.Z)({},n,{active:r,completed:o,error:s}),u=(e=>{const{classes:t,active:n,completed:r,error:i}=e,o={root:["root",n&&"active",r&&"completed",i&&"error"],text:["text"]};return(0,pe.Z)(o,vu,t)})(c);if("number"==typeof a||"string"==typeof a){const e=(0,ue.Z)(i,u.root);return s?(0,be.jsx)(xu,(0,E.Z)({as:mu,className:e,ref:t,ownerState:c},l)):o?(0,be.jsx)(xu,(0,E.Z)({as:pu,className:e,ref:t,ownerState:c},l)):(0,be.jsxs)(xu,(0,E.Z)({className:e,ref:t,ownerState:c},l,{children:[yu||(yu=(0,be.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,be.jsx)(_u,{className:u.text,x:"12",y:"16",textAnchor:"middle",ownerState:c,children:a})]}))}return a}));function Eu(e){return(0,ge.Z)("MuiStepLabel",e)}var Tu=(0,me.Z)("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]);const Cu=["children","className","componentsProps","error","icon","optional","StepIconComponent","StepIconProps"],Mu=(0,W.ZP)("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation]]}})((({ownerState:e})=>(0,E.Z)({display:"flex",alignItems:"center",[`&.${Tu.alternativeLabel}`]:{flexDirection:"column"},[`&.${Tu.disabled}`]:{cursor:"default"}},"vertical"===e.orientation&&{textAlign:"left",padding:"8px 0"}))),ku=(0,W.ZP)("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})((({theme:e})=>(0,E.Z)({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${Tu.active}`]:{color:e.palette.text.primary,fontWeight:500},[`&.${Tu.completed}`]:{color:e.palette.text.primary,fontWeight:500},[`&.${Tu.alternativeLabel}`]:{textAlign:"center",marginTop:16},[`&.${Tu.error}`]:{color:e.palette.error.main}}))),Pu=(0,W.ZP)("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})((()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${Tu.alternativeLabel}`]:{paddingRight:0}}))),Au=(0,W.ZP)("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})((({theme:e})=>({width:"100%",color:e.palette.text.secondary}))),Iu=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiStepLabel"}),{children:r,className:i,componentsProps:o={},error:s=!1,icon:a,optional:l,StepIconComponent:c,StepIconProps:u}=n,d=(0,T.Z)(n,Cu),{alternativeLabel:h,orientation:f}=J.useContext(au),{active:p,disabled:m,completed:g,icon:v}=J.useContext(lu),y=a||v;let b=c;y&&!b&&(b=Su);const w=(0,E.Z)({},n,{active:p,alternativeLabel:h,completed:g,disabled:m,error:s,orientation:f}),x=(e=>{const{classes:t,orientation:n,active:r,completed:i,error:o,disabled:s,alternativeLabel:a}=e,l={root:["root",n,o&&"error",s&&"disabled",a&&"alternativeLabel"],label:["label",r&&"active",i&&"completed",o&&"error",s&&"disabled",a&&"alternativeLabel"],iconContainer:["iconContainer",a&&"alternativeLabel"],labelContainer:["labelContainer"]};return(0,pe.Z)(l,Eu,t)})(w);return(0,be.jsxs)(Mu,(0,E.Z)({className:(0,ue.Z)(x.root,i),ref:t,ownerState:w},d,{children:[y||b?(0,be.jsx)(Pu,{className:x.iconContainer,ownerState:w,children:(0,be.jsx)(b,(0,E.Z)({completed:g,active:p,error:s,icon:y},u))}):null,(0,be.jsxs)(Au,{className:x.labelContainer,ownerState:w,children:[r?(0,be.jsx)(ku,(0,E.Z)({className:x.label,ownerState:w},o.label,{children:r})):null,l]})]}))}));Iu.muiName="StepLabel";var Ru=Iu;function Lu(e){return(0,ge.Z)("MuiStepButton",e)}var Ou=(0,me.Z)("MuiStepButton",["root","horizontal","vertical","touchRipple"]);const Nu=["children","className","icon","optional"],Du=(0,W.ZP)(gt.Z,{name:"MuiStepButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Ou.touchRipple}`]:t.touchRipple},t.root,t[n.orientation]]}})((({ownerState:e})=>(0,E.Z)({width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box"},"vertical"===e.orientation&&{justifyContent:"flex-start",padding:"8px",margin:"-8px"},{[`& .${Ou.touchRipple}`]:{color:"rgba(0, 0, 0, 0.3)"}})));var Fu=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiStepButton"}),{children:r,className:i,icon:o,optional:s}=n,a=(0,T.Z)(n,Nu),{disabled:l}=J.useContext(lu),{orientation:c}=J.useContext(au),u=(0,E.Z)({},n,{orientation:c}),d=(e=>{const{classes:t,orientation:n}=e,r={root:["root",n],touchRipple:["touchRipple"]};return(0,pe.Z)(r,Lu,t)})(u),h={icon:o,optional:s},f=(0,as.Z)(r,["StepLabel"])?J.cloneElement(r,h):(0,be.jsx)(Ru,(0,E.Z)({},h,{children:r}));return(0,be.jsx)(Du,(0,E.Z)({focusRipple:!0,disabled:l,TouchRippleProps:{className:d.touchRipple},className:(0,ue.Z)(d.root,i),ref:t,ownerState:u},a,{children:f}))}));function Bu(e){return(0,ge.Z)("MuiStepConnector",e)}var Zu=(0,me.Z)("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Vu=["className"],zu=(0,W.ZP)("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})((({ownerState:e})=>(0,E.Z)({flex:"1 1 auto"},"vertical"===e.orientation&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}))),Uu=(0,W.ZP)("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.line,t[`line${(0,Et.Z)(n.orientation)}`]]}})((({ownerState:e,theme:t})=>(0,E.Z)({display:"block",borderColor:"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]},"horizontal"===e.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===e.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})));var ju=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiStepConnector"}),{className:r}=n,i=(0,T.Z)(n,Vu),{alternativeLabel:o,orientation:s="horizontal"}=J.useContext(au),{active:a,disabled:l,completed:c}=J.useContext(lu),u=(0,E.Z)({},n,{alternativeLabel:o,orientation:s,active:a,completed:c,disabled:l}),d=(e=>{const{classes:t,orientation:n,alternativeLabel:r,active:i,completed:o,disabled:s}=e,a={root:["root",n,r&&"alternativeLabel",i&&"active",o&&"completed",s&&"disabled"],line:["line",`line${(0,Et.Z)(n)}`]};return(0,pe.Z)(a,Bu,t)})(u);return(0,be.jsx)(zu,(0,E.Z)({className:(0,ue.Z)(d.root,r),ref:t,ownerState:u},i,{children:(0,be.jsx)(Uu,{className:d.line,ownerState:u})}))}));function Hu(e){return(0,ge.Z)("MuiStepContent",e)}var Gu=(0,me.Z)("MuiStepContent",["root","last","transition"]);const Wu=["children","className","TransitionComponent","transitionDuration","TransitionProps"],$u=(0,W.ZP)("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.last&&t.last]}})((({ownerState:e,theme:t})=>(0,E.Z)({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}`},e.last&&{borderLeft:"none"}))),qu=(0,W.ZP)(Xe.Z,{name:"MuiStepContent",slot:"Transition",overridesResolver:(e,t)=>t.transition})({});var Yu=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiStepContent"}),{children:r,className:i,TransitionComponent:o=Xe.Z,transitionDuration:s="auto",TransitionProps:a}=n,l=(0,T.Z)(n,Wu),{orientation:c}=J.useContext(au),{active:u,last:d,expanded:h}=J.useContext(lu),f=(0,E.Z)({},n,{last:d}),p=(e=>{const{classes:t,last:n}=e,r={root:["root",n&&"last"],transition:["transition"]};return(0,pe.Z)(r,Hu,t)})(f);let m=s;return"auto"!==s||o.muiSupportAuto||(m=void 0),(0,be.jsx)($u,(0,E.Z)({className:(0,ue.Z)(p.root,i),ref:t,ownerState:f},l,{children:(0,be.jsx)(qu,(0,E.Z)({as:o,in:u||h,className:p.transition,ownerState:f,timeout:m,unmountOnExit:!0},a,{children:r}))}))}));function Ku(e){return(0,ge.Z)("MuiStepper",e)}var Xu=(0,me.Z)("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);const Ju=["activeStep","alternativeLabel","children","className","connector","nonLinear","orientation"],Qu=(0,W.ZP)("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel]}})((({ownerState:e})=>(0,E.Z)({display:"flex"},"horizontal"===e.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===e.orientation&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"}))),ed=(0,be.jsx)(ju,{});var td=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiStepper"}),{activeStep:r=0,alternativeLabel:i=!1,children:o,className:s,connector:a=ed,nonLinear:l=!1,orientation:c="horizontal"}=n,u=(0,T.Z)(n,Ju),d=(0,E.Z)({},n,{alternativeLabel:i,orientation:c}),h=(e=>{const{orientation:t,alternativeLabel:n,classes:r}=e,i={root:["root",t,n&&"alternativeLabel"]};return(0,pe.Z)(i,Ku,r)})(d),f=J.Children.toArray(o).filter(Boolean),p=f.map(((e,t)=>J.cloneElement(e,(0,E.Z)({index:t,last:t+1===f.length},e.props)))),m=J.useMemo((()=>({activeStep:r,alternativeLabel:i,connector:a,nonLinear:l,orientation:c})),[r,i,a,l,c]);return(0,be.jsx)(au.Provider,{value:m,children:(0,be.jsx)(Qu,(0,E.Z)({ownerState:d,className:(0,ue.Z)(h.root,s),ref:t},u,{children:p}))})})),nd=n(62994),rd=n(31607),id=n(5340);const od=["anchor","classes","className","width","style"],sd=(0,W.ZP)("div",{skipSx:!0})((({theme:e,ownerState:t})=>(0,E.Z)({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1},"left"===t.anchor&&{right:"auto"},"right"===t.anchor&&{left:"auto",right:0},"top"===t.anchor&&{bottom:"auto",right:0},"bottom"===t.anchor&&{top:"auto",bottom:0,right:0}))),ad=J.forwardRef((function(e,t){const{anchor:n,classes:r={},className:i,width:o,style:s}=e,a=(0,T.Z)(e,od),l=e;return(0,be.jsx)(sd,(0,E.Z)({className:(0,ue.Z)("PrivateSwipeArea-root",r.root,r[`anchor${(0,Et.Z)(n)}`],i),ref:t,style:(0,E.Z)({[to(n)?"width":"height"]:o},s),ownerState:l},a))}));var ld=ad;const cd=["BackdropProps"],ud=["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"];let dd=null;function hd(e,t,n){return"right"===e?n.body.offsetWidth-t[0].pageX:t[0].pageX}function fd(e,t,n){return"bottom"===e?n.innerHeight-t[0].clientY:t[0].clientY}function pd(e,t){return e?t.clientWidth:t.clientHeight}function md(e,t,n,r){return Math.min(Math.max(n?t-e:r+t-e,0),r)}const gd="undefined"!=typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),vd={enter:j.x9.enteringScreen,exit:j.x9.leavingScreen},yd=J.forwardRef((function(e,t){const n=(0,rd.Z)({name:"MuiSwipeableDrawer",props:e}),r=(0,H.Z)(),{anchor:i="left",disableBackdropTransition:o=!1,disableDiscovery:s=!1,disableSwipeToOpen:a=gd,hideBackdrop:l,hysteresis:c=.52,minFlingVelocity:u=450,ModalProps:{BackdropProps:d}={},onClose:h,onOpen:f,open:p,PaperProps:m={},SwipeAreaProps:g,swipeAreaWidth:v=20,transitionDuration:y=vd,variant:b="temporary"}=n,w=(0,T.Z)(n.ModalProps,cd),x=(0,T.Z)(n,ud),[_,S]=J.useState(!1),C=J.useRef({isSwiping:null}),M=J.useRef(),k=J.useRef(),P=J.useRef(),A=J.useRef(!1),I=J.useRef();(0,Io.Z)((()=>{I.current=null}),[p]);const R=J.useCallback(((e,t={})=>{const{mode:n=null,changeTransition:s=!0}=t,a=no(r,i),c=-1!==["right","bottom"].indexOf(a)?1:-1,u=to(i),d=u?`translate(${c*e}px, 0)`:`translate(0, ${c*e}px)`,h=P.current.style;h.webkitTransform=d,h.transform=d;let f="";if(n&&(f=r.transitions.create("all",(0,Pc.C)({easing:void 0,style:void 0,timeout:y},{mode:n}))),s&&(h.webkitTransition=f,h.transition=f),!o&&!l){const t=k.current.style;t.opacity=1-e/pd(u,P.current),s&&(t.webkitTransition=f,t.transition=f)}}),[i,o,l,r,y]),L=(0,qr.Z)((e=>{if(!A.current)return;if(dd=null,A.current=!1,S(!1),!C.current.isSwiping)return void(C.current.isSwiping=null);C.current.isSwiping=null;const t=no(r,i),n=to(i);let o;o=n?hd(t,e.changedTouches,(0,$r.Z)(e.currentTarget)):fd(t,e.changedTouches,(0,id.Z)(e.currentTarget));const s=n?C.current.startX:C.current.startY,a=pd(n,P.current),l=md(o,s,p,a),d=l/a;Math.abs(C.current.velocity)>u&&(I.current=1e3*Math.abs((a-l)/C.current.velocity)),p?C.current.velocity>u||d>c?h():R(0,{mode:"exit"}):C.current.velocity<-u||1-d>c?f():R(pd(n,P.current),{mode:"enter"})})),O=(0,qr.Z)((e=>{if(!P.current||!A.current)return;if(null!==dd&&dd!==C.current)return;const t=no(r,i),n=to(i),o=hd(t,e.touches,(0,$r.Z)(e.currentTarget)),a=fd(t,e.touches,(0,id.Z)(e.currentTarget));if(p&&P.current.contains(e.target)&&null===dd){const t=function(e,t){const n=[];for(;e&&e!==t.parentElement;){const r=(0,id.Z)(t).getComputedStyle(e);"absolute"===r.getPropertyValue("position")||"hidden"===r.getPropertyValue("overflow-x")||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&n.push(e),e=e.parentElement}return n}(e.target,P.current),r=function({domTreeShapes:e,start:t,current:n,anchor:r}){const i={x:"scrollLeft",y:"scrollTop"},o={x:"scrollWidth",y:"scrollHeight"},s={x:"clientWidth",y:"clientHeight"};return e.some((e=>{let a=n>=t;"top"!==r&&"left"!==r||(a=!a);const l="left"===r||"right"===r?"x":"y",c=Math.round(e[i[l]]),u=c>0,d=c+e[s[l]]<e[o[l]];return!!(a&&d||!a&&u)}))}({domTreeShapes:t,start:n?C.current.startX:C.current.startY,current:n?o:a,anchor:i});if(r)return void(dd=!0);dd=C.current}if(null==C.current.isSwiping){const t=Math.abs(o-C.current.startX),r=Math.abs(a-C.current.startY),i=n?t>r&&t>3:r>t&&r>3;if(i&&e.cancelable&&e.preventDefault(),!0===i||(n?r>3:t>3)){if(C.current.isSwiping=i,!i)return void L(e);C.current.startX=o,C.current.startY=a,s||p||(n?C.current.startX-=20:C.current.startY-=20)}}if(!C.current.isSwiping)return;const l=pd(n,P.current);let c=n?C.current.startX:C.current.startY;p&&!C.current.paperHit&&(c=Math.min(c,l));const u=md(n?o:a,c,p,l);if(p)if(C.current.paperHit)0===u&&(C.current.startX=o,C.current.startY=a);else{if(!(n?o<l:a<l))return;C.current.paperHit=!0,C.current.startX=o,C.current.startY=a}null===C.current.lastTranslate&&(C.current.lastTranslate=u,C.current.lastTime=performance.now()+1);const d=(u-C.current.lastTranslate)/(performance.now()-C.current.lastTime)*1e3;C.current.velocity=.4*C.current.velocity+.6*d,C.current.lastTranslate=u,C.current.lastTime=performance.now(),e.cancelable&&e.preventDefault(),R(u)})),N=(0,qr.Z)((e=>{if(e.defaultPrevented)return;if(e.defaultMuiPrevented)return;if(p&&(l||!k.current.contains(e.target))&&!P.current.contains(e.target))return;const t=no(r,i),n=to(i),o=hd(t,e.touches,(0,$r.Z)(e.currentTarget)),c=fd(t,e.touches,(0,id.Z)(e.currentTarget));if(!p){if(a||e.target!==M.current)return;if(n){if(o>v)return}else if(c>v)return}e.defaultMuiPrevented=!0,dd=null,C.current.startX=o,C.current.startY=c,S(!0),!p&&P.current&&R(pd(n,P.current)+(s?15:-20),{changeTransition:!1}),C.current.velocity=0,C.current.lastTime=null,C.current.lastTranslate=null,C.current.paperHit=!1,A.current=!0}));return J.useEffect((()=>{if("temporary"===b){const e=(0,$r.Z)(P.current);return e.addEventListener("touchstart",N),e.addEventListener("touchmove",O,{passive:!p}),e.addEventListener("touchend",L),()=>{e.removeEventListener("touchstart",N),e.removeEventListener("touchmove",O,{passive:!p}),e.removeEventListener("touchend",L)}}}),[b,p,N,O,L]),J.useEffect((()=>()=>{dd===C.current&&(dd=null)}),[]),J.useEffect((()=>{p||S(!1)}),[p]),(0,be.jsxs)(J.Fragment,{children:[(0,be.jsx)(io,(0,E.Z)({open:!("temporary"!==b||!_)||p,variant:b,ModalProps:(0,E.Z)({BackdropProps:(0,E.Z)({},d,{ref:k})},w),hideBackdrop:l,PaperProps:(0,E.Z)({},m,{style:(0,E.Z)({pointerEvents:"temporary"!==b||p?"":"none"},m.style),ref:P}),anchor:i,transitionDuration:I.current||y,onClose:h,ref:t},x)),!a&&"temporary"===b&&(0,be.jsx)(Ka,{children:(0,be.jsx)(ld,(0,E.Z)({anchor:i,ref:M,width:v},g))})]})}));var bd=yd,wd=n(32207);function xd(e){return(0,ge.Z)("MuiSwitch",e)}var _d=(0,me.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);const Sd=["className","color","edge","size","sx"],Ed=(0,W.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${(0,Et.Z)(n.edge)}`],t[`size${(0,Et.Z)(n.size)}`]]}})((({ownerState:e})=>(0,E.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===e.edge&&{marginLeft:-8},"end"===e.edge&&{marginRight:-8},"small"===e.size&&{width:40,height:24,padding:7,[`& .${_d.thumb}`]:{width:16,height:16},[`& .${_d.switchBase}`]:{padding:4,[`&.${_d.checked}`]:{transform:"translateX(16px)"}}}))),Td=(0,W.ZP)(wd.Z,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${_d.input}`]:t.input},"default"!==n.color&&t[`color${(0,Et.Z)(n.color)}`]]}})((({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.mode?e.palette.common.white:e.palette.grey[300],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${_d.checked}`]:{transform:"translateX(20px)"},[`&.${_d.disabled}`]:{color:"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[600]},[`&.${_d.checked} + .${_d.track}`]:{opacity:.5},[`&.${_d.disabled} + .${_d.track}`]:{opacity:"light"===e.palette.mode?.12:.2},[`& .${_d.input}`]:{left:"-100%",width:"300%"}})),(({theme:e,ownerState:t})=>(0,E.Z)({"&:hover":{backgroundColor:(0,I.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${_d.checked}`]:{color:e.palette[t.color].main,"&:hover":{backgroundColor:(0,I.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${_d.disabled}`]:{color:"light"===e.palette.mode?(0,I.$n)(e.palette[t.color].main,.62):(0,I._j)(e.palette[t.color].main,.55)}},[`&.${_d.checked} + .${_d.track}`]:{backgroundColor:e.palette[t.color].main}}))),Cd=(0,W.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((({theme:e})=>({height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.mode?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.mode?.38:.3}))),Md=(0,W.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((({theme:e})=>({boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})));var kd=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiSwitch"}),{className:r,color:i="primary",edge:o=!1,size:s="medium",sx:a}=n,l=(0,T.Z)(n,Sd),c=(0,E.Z)({},n,{color:i,edge:o,size:s}),u=(e=>{const{classes:t,edge:n,size:r,color:i,checked:o,disabled:s}=e,a={root:["root",n&&`edge${(0,Et.Z)(n)}`,`size${(0,Et.Z)(r)}`],switchBase:["switchBase",`color${(0,Et.Z)(i)}`,o&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,pe.Z)(a,xd,t);return(0,E.Z)({},t,l)})(c),d=(0,be.jsx)(Md,{className:u.thumb,ownerState:c});return(0,be.jsxs)(Ed,{className:(0,ue.Z)(u.root,r),sx:a,ownerState:c,children:[(0,be.jsx)(Td,(0,E.Z)({type:"checkbox",icon:d,checkedIcon:d,ref:t,ownerState:c},l,{classes:(0,E.Z)({},u,{root:u.switchBase})})),(0,be.jsx)(Cd,{className:u.track,ownerState:c})]})})),Pd=n(75316),Ad=n(22092),Id=n(13614),Rd=n(8319),Ld=n(58439),Od=n(7343),Nd=n(98102),Dd=n(68782),Fd=n(4592),Bd=n(78935),Zd=n(44063);function Vd(e){return(0,ge.Z)("MuiTableFooter",e)}var zd=(0,me.Z)("MuiTableFooter",["root"]);const Ud=["className","component"],jd=(0,W.ZP)("tfoot",{name:"MuiTableFooter",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-footer-group"}),Hd={variant:"footer"},Gd="tfoot";var Wd=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiTableFooter"}),{className:r,component:i=Gd}=n,o=(0,T.Z)(n,Ud),s=(0,E.Z)({},n,{component:i}),a=(e=>{const{classes:t}=e;return(0,pe.Z)({root:["root"]},Vd,t)})(s);return(0,be.jsx)(Zd.Z.Provider,{value:Hd,children:(0,be.jsx)(jd,(0,E.Z)({as:i,className:(0,ue.Z)(a.root,r),ref:t,role:i===Gd?null:"rowgroup",ownerState:s},o))})})),$d=n(37858),qd=n(29216),Yd=n(88240),Kd=n(25070),Xd=n(75921),Jd=n(3779),Qd=(0,Pt.Z)((0,be.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function eh(e){return(0,ge.Z)("MuiTableSortLabel",e)}var th=(0,me.Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]);const nh=["active","children","className","direction","hideSortIcon","IconComponent"],rh=(0,W.ZP)(gt.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.active&&t.active]}})((({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:e.palette.text.secondary},"&:hover":{color:e.palette.text.secondary,[`& .${th.icon}`]:{opacity:.5}},[`&.${th.active}`]:{color:e.palette.text.primary,[`& .${th.icon}`]:{opacity:1,color:e.palette.text.secondary}}}))),ih=(0,W.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,t[`iconDirection${(0,Et.Z)(n.direction)}`]]}})((({theme:e,ownerState:t})=>(0,E.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none"},"desc"===t.direction&&{transform:"rotate(0deg)"},"asc"===t.direction&&{transform:"rotate(180deg)"})));var oh=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiTableSortLabel"}),{active:r=!1,children:i,className:o,direction:s="asc",hideSortIcon:a=!1,IconComponent:l=Qd}=n,c=(0,T.Z)(n,nh),u=(0,E.Z)({},n,{active:r,direction:s,hideSortIcon:a,IconComponent:l}),d=(e=>{const{classes:t,direction:n,active:r}=e,i={root:["root",r&&"active"],icon:["icon",`iconDirection${(0,Et.Z)(n)}`]};return(0,pe.Z)(i,eh,t)})(u);return(0,be.jsxs)(rh,(0,E.Z)({className:(0,ue.Z)(d.root,o),component:"span",disableRipple:!0,ownerState:u,ref:t},c,{children:[i,a&&!r?null:(0,be.jsx)(ih,{as:l,className:(0,ue.Z)(d.icon),ownerState:u})]}))})),sh=n(37672),ah=n(33217),lh=n(72643),ch=n(18941),uh=n(22715),dh=n(52861),hh=n(51368);function fh(e){return(0,ge.Z)("MuiToggleButton",e)}var ph=(0,me.Z)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]);const mh=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],gh=(0,W.ZP)(gt.Z,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`size${(0,Et.Z)(n.size)}`]]}})((({theme:e,ownerState:t})=>{const n="standard"===t.color?e.palette.text.primary:e.palette[t.color].main;return(0,E.Z)({},e.typography.button,{borderRadius:e.shape.borderRadius,padding:11,border:`1px solid ${e.palette.divider}`,color:e.palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${ph.disabled}`]:{color:e.palette.action.disabled,border:`1px solid ${e.palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:(0,I.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ph.selected}`]:{color:n,backgroundColor:(0,I.Fq)(n,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:(0,I.Fq)(n,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,I.Fq)(n,e.palette.action.selectedOpacity)}}}},"small"===t.size&&{padding:7,fontSize:e.typography.pxToRem(13)},"large"===t.size&&{padding:15,fontSize:e.typography.pxToRem(15)})}));var vh=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiToggleButton"}),{children:r,className:i,color:o="standard",disabled:s=!1,disableFocusRipple:a=!1,fullWidth:l=!1,onChange:c,onClick:u,selected:d,size:h="medium",value:f}=n,p=(0,T.Z)(n,mh),m=(0,E.Z)({},n,{color:o,disabled:s,disableFocusRipple:a,fullWidth:l,size:h}),g=(e=>{const{classes:t,fullWidth:n,selected:r,disabled:i,size:o,color:s}=e,a={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth",`size${(0,Et.Z)(o)}`,s]};return(0,pe.Z)(a,fh,t)})(m);return(0,be.jsx)(gh,(0,E.Z)({className:(0,ue.Z)(g.root,i),disabled:s,focusRipple:!a,ref:t,onClick:e=>{u&&(u(e,f),e.defaultPrevented)||c&&c(e,f)},onChange:c,value:f,ownerState:m,"aria-pressed":d},p,{children:r}))}));function yh(e,t){return void 0!==t&&void 0!==e&&(Array.isArray(t)?t.indexOf(e)>=0:e===t)}function bh(e){return(0,ge.Z)("MuiToggleButtonGroup",e)}var wh=(0,me.Z)("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]);const xh=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],_h=(0,W.ZP)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${wh.grouped}`]:t.grouped},{[`& .${wh.grouped}`]:t[`grouped${(0,Et.Z)(n.orientation)}`]},t.root,"vertical"===n.orientation&&t.vertical,n.fullWidth&&t.fullWidth]}})((({ownerState:e,theme:t})=>(0,E.Z)({display:"inline-flex",borderRadius:t.shape.borderRadius},"vertical"===e.orientation&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${wh.grouped}`]:(0,E.Z)({},"horizontal"===e.orientation?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${wh.selected} + .${wh.grouped}.${wh.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${wh.selected} + .${wh.grouped}.${wh.selected}`]:{borderTop:0,marginTop:0}})})));var Sh=J.forwardRef((function(e,t){const n=(0,G.Z)({props:e,name:"MuiToggleButtonGroup"}),{children:r,className:i,color:o="standard",disabled:s=!1,exclusive:a=!1,fullWidth:l=!1,onChange:c,orientation:u="horizontal",size:d="medium",value:h}=n,f=(0,T.Z)(n,xh),p=(0,E.Z)({},n,{disabled:s,fullWidth:l,orientation:u,size:d}),m=(e=>{const{classes:t,orientation:n,fullWidth:r,disabled:i}=e,o={root:["root","vertical"===n&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${(0,Et.Z)(n)}`,i&&"disabled"]};return(0,pe.Z)(o,bh,t)})(p),g=(e,t)=>{if(!c)return;const n=h&&h.indexOf(t);let r;h&&n>=0?(r=h.slice(),r.splice(n,1)):r=h?h.concat(t):[t],c(e,r)},v=(e,t)=>{c&&c(e,h===t?null:t)};return(0,be.jsx)(_h,(0,E.Z)({role:"group",className:(0,ue.Z)(m.root,i),ref:t,ownerState:p},f,{children:J.Children.map(r,(e=>J.isValidElement(e)?J.cloneElement(e,{className:(0,ue.Z)(m.grouped,e.props.className),onChange:a?v:g,selected:void 0===e.props.selected?yh(e.props.value,h):e.props.selected,size:e.props.size||d,fullWidth:l,color:e.props.color||o,disabled:e.props.disabled||s}):null))}))})),Eh=n(83808),Th=n(42606),Ch=n(3506),Mh=n(89589);const kh=["getTrigger","target"];function Ph(e,t){const{disableHysteresis:n=!1,threshold:r=100,target:i}=t,o=e.current;return i&&(e.current=void 0!==i.pageYOffset?i.pageYOffset:i.scrollTop),!(!n&&void 0!==o&&e.current<o)&&e.current>r}const Ah="undefined"!=typeof window?window:null;function Ih(e={}){const{getTrigger:t=Ph,target:n=Ah}=e,r=(0,T.Z)(e,kh),i=J.useRef(),[o,s]=J.useState((()=>t(i,r)));return J.useEffect((()=>{const e=()=>{s(t(i,(0,E.Z)({target:n},r)))};return e(),n.addEventListener("scroll",e),()=>{n.removeEventListener("scroll",e)}}),[n,t,JSON.stringify(r)]),o}var Rh=n(34759);const Lh=(0,n(51859).Z)({key:"css",prepend:!0});function Oh(e){const{injectFirst:t,children:n}=e;return t?(0,be.jsx)(Rh.C,{value:Lh,children:n}):n}},32207:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(63366),i=n(87462),o=n(67294),s=n(86010),a=n(71993),l=n(98216),c=n(58524),u=n(49299),d=n(74423),h=n(96458),f=n(15773);function p(e){return(0,f.Z)("PrivateSwitchBase",e)}(0,n(88858).Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var m=n(85893);const g=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],v=(0,c.ZP)(h.Z,{skipSx:!0})((({ownerState:e})=>(0,i.Z)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12}))),y=(0,c.ZP)("input",{skipSx:!0})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1});var b=o.forwardRef((function(e,t){const{autoFocus:n,checked:o,checkedIcon:c,className:h,defaultChecked:f,disabled:b,disableFocusRipple:w=!1,edge:x=!1,icon:_,id:S,inputProps:E,inputRef:T,name:C,onBlur:M,onChange:k,onFocus:P,readOnly:A,required:I,tabIndex:R,type:L,value:O}=e,N=(0,r.Z)(e,g),[D,F]=(0,u.Z)({controlled:o,default:Boolean(f),name:"SwitchBase",state:"checked"}),B=(0,d.Z)();let Z=b;B&&void 0===Z&&(Z=B.disabled);const V="checkbox"===L||"radio"===L,z=(0,i.Z)({},e,{checked:D,disabled:Z,disableFocusRipple:w,edge:x}),U=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${(0,l.Z)(i)}`],input:["input"]};return(0,a.Z)(o,p,t)})(z);return(0,m.jsxs)(v,(0,i.Z)({component:"span",className:(0,s.Z)(U.root,h),centerRipple:!0,focusRipple:!w,disabled:Z,tabIndex:null,role:void 0,onFocus:e=>{P&&P(e),B&&B.onFocus&&B.onFocus(e)},onBlur:e=>{M&&M(e),B&&B.onBlur&&B.onBlur(e)},ownerState:z,ref:t},N,{children:[(0,m.jsx)(y,(0,i.Z)({autoFocus:n,checked:o,defaultChecked:f,className:U.input,disabled:Z,id:V&&S,name:C,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;F(t),k&&k(e,t)},readOnly:A,ref:T,required:I,ownerState:z,tabIndex:R,type:L},"checkbox"===L&&void 0===O?{}:{value:O},E)),D?c:_]}))}))},60224:function(e,t,n){"use strict";n(67294);var r=n(82066),i=n(85893);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown")},42989:function(e,t,n){"use strict";n(67294);var r=n(82066),i=n(85893);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage")},67070:function(e,t,n){"use strict";n(67294);var r=n(82066),i=n(85893);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},56686:function(e,t,n){"use strict";n(67294);var r=n(82066),i=n(85893);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},63046:function(e,t,n){"use strict";n(67294);var r=n(82066),i=n(85893);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage")},83311:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(71993),l=n(49957),c=n(17757),u=n(85893);const d=["classes","className","invisible","component","components","componentsProps","theme"],h=o.forwardRef((function(e,t){const{classes:n,className:o,invisible:h=!1,component:f="div",components:p={},componentsProps:m={},theme:g}=e,v=(0,i.Z)(e,d),y=(0,r.Z)({},e,{classes:n,invisible:h}),b=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,a.Z)(r,c.s,t)})(y),w=p.Root||f,x=m.root||{};return(0,u.jsx)(w,(0,r.Z)({"aria-hidden":!0},x,!(0,l.Z)(w)&&{as:f,ownerState:(0,r.Z)({},y,x.ownerState),theme:g},{ref:t},v,{className:(0,s.Z)(b.root,x.className,o)}))}));t.Z=h},17757:function(e,t,n){"use strict";n.d(t,{s:function(){return o}});var r=n(88858),i=n(15773);function o(e){return(0,i.Z)("MuiBackdrop",e)}const s=(0,r.Z)("MuiBackdrop",["root","invisible"]);t.Z=s},92166:function(e,t,n){"use strict";n.d(t,{G:function(){return s},Z:function(){return d}});var r=n(57094),i=n(58290),o=n(95806);function s(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function a(e){return parseInt((0,i.Z)(e).getComputedStyle(e).paddingRight,10)||0}function l(e,t,n,r=[],i){const o=[t,n,...r],a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(e=>{-1===o.indexOf(e)&&-1===a.indexOf(e.tagName)&&s(e,i)}))}function c(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function u(e,t){const n=[],s=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,r.Z)(e);return t.body===e?(0,i.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(s)){const e=(0,o.Z)((0,r.Z)(s));n.push({value:s.style.paddingRight,property:"padding-right",el:s}),s.style.paddingRight=`${a(s)+e}px`;const t=(0,r.Z)(s).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${a(t)+e}px`}))}const e=s.parentElement,t=(0,i.Z)(s),l="HTML"===(null==e?void 0:e.nodeName)&&"scroll"===t.getComputedStyle(e).overflowY?e:s;n.push({value:l.style.overflow,property:"overflow",el:l},{value:l.style.overflowX,property:"overflow-x",el:l},{value:l.style.overflowY,property:"overflow-y",el:l}),l.style.overflow="hidden"}return()=>{n.forEach((({value:e,el:t,property:n})=>{e?t.style.setProperty(n,e):t.style.removeProperty(n)}))}}class d{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&s(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);l(t,e.mount,e.modalRef,r,!0);const i=c(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=c(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=u(r,t))}remove(e){const t=this.modals.indexOf(e);if(-1===t)return t;const n=c(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&s(e.modalRef,!0),l(r.container,e.mount,e.modalRef,r.hiddenSiblings,!1),this.containers.splice(n,1);else{const e=r.modals[r.modals.length-1];e.modalRef&&s(e.modalRef,!1)}return t}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}},38258:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(30067),l=n(57094),c=n(73633),u=n(49064),d=n(71993),h=n(49957),f=n(59612),p=n(92166),m=n(47484),g=n(40428),v=n(85893);const y=["BackdropComponent","BackdropProps","children","classes","className","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","theme","onTransitionEnter","onTransitionExited"];const b=new p.Z,w=o.forwardRef((function(e,t){const{BackdropComponent:n,BackdropProps:w,children:x,classes:_,className:S,closeAfterTransition:E=!1,component:T="div",components:C={},componentsProps:M={},container:k,disableAutoFocus:P=!1,disableEnforceFocus:A=!1,disableEscapeKeyDown:I=!1,disablePortal:R=!1,disableRestoreFocus:L=!1,disableScrollLock:O=!1,hideBackdrop:N=!1,keepMounted:D=!1,manager:F=b,onBackdropClick:B,onClose:Z,onKeyDown:V,open:z,theme:U,onTransitionEnter:j,onTransitionExited:H}=e,G=(0,i.Z)(e,y),[W,$]=o.useState(!0),q=o.useRef({}),Y=o.useRef(null),K=o.useRef(null),X=(0,a.Z)(K,t),J=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(e),Q=()=>(q.current.modalRef=K.current,q.current.mountNode=Y.current,q.current),ee=()=>{F.mount(Q(),{disableScrollLock:O}),K.current.scrollTop=0},te=(0,c.Z)((()=>{const e=function(e){return"function"==typeof e?e():e}(k)||(0,l.Z)(Y.current).body;F.add(Q(),e),K.current&&ee()})),ne=o.useCallback((()=>F.isTopModal(Q())),[F]),re=(0,c.Z)((e=>{Y.current=e,e&&(z&&ne()?ee():(0,p.G)(K.current,!0))})),ie=o.useCallback((()=>{F.remove(Q())}),[F]);o.useEffect((()=>()=>{ie()}),[ie]),o.useEffect((()=>{z?te():J&&E||ie()}),[z,ie,J,E,te]);const oe=(0,r.Z)({},e,{classes:_,closeAfterTransition:E,disableAutoFocus:P,disableEnforceFocus:A,disableEscapeKeyDown:I,disablePortal:R,disableRestoreFocus:L,disableScrollLock:O,exited:W,hideBackdrop:N,keepMounted:D}),se=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"]};return(0,d.Z)(i,g.x,r)})(oe);if(!D&&!z&&(!J||W))return null;const ae=()=>{$(!1),j&&j()},le=()=>{$(!0),H&&H(),E&&ie()},ce={};void 0===x.props.tabIndex&&(ce.tabIndex="-1"),J&&(ce.onEnter=(0,u.Z)(ae,x.props.onEnter),ce.onExited=(0,u.Z)(le,x.props.onExited));const ue=C.Root||T,de=M.root||{};return(0,v.jsx)(f.Z,{ref:re,container:k,disablePortal:R,children:(0,v.jsxs)(ue,(0,r.Z)({role:"presentation"},de,!(0,h.Z)(ue)&&{as:T,ownerState:(0,r.Z)({},oe,de.ownerState),theme:U},G,{ref:X,onKeyDown:e=>{V&&V(e),"Escape"===e.key&&ne()&&(I||(e.stopPropagation(),Z&&Z(e,"escapeKeyDown")))},className:(0,s.Z)(se.root,de.className,S),children:[!N&&n?(0,v.jsx)(n,(0,r.Z)({open:z,onClick:e=>{e.target===e.currentTarget&&(B&&B(e),Z&&Z(e,"backdropClick"))}},w)):null,(0,v.jsx)(m.Z,{disableEnforceFocus:A,disableAutoFocus:P,disableRestoreFocus:L,isEnabled:ne,open:z,children:o.cloneElement(x,ce)})]}))})}));t.Z=w},59370:function(e,t,n){"use strict";n.d(t,{gk:function(){return r.Z},vk:function(){return i.Z},xS:function(){return i.x}});var r=n(92166),i=n(40428)},40428:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var r=n(88858),i=n(15773);function o(e){return(0,i.Z)("MuiModal",e)}const s=(0,r.Z)("MuiModal",["root","hidden"]);t.Z=s},59612:function(e,t,n){"use strict";var r=n(67294),i=n(73935),o=n(30067),s=n(16600),a=n(7960);const l=r.forwardRef((function(e,t){const{children:n,container:l,disablePortal:c=!1}=e,[u,d]=r.useState(null),h=(0,o.Z)(r.isValidElement(n)?n.ref:null,t);return(0,s.Z)((()=>{c||d(function(e){return"function"==typeof e?e():e}(l)||document.body)}),[l,c]),(0,s.Z)((()=>{if(u&&!c)return(0,a.Z)(t,u),()=>{(0,a.Z)(t,null)}}),[t,u,c]),c?r.isValidElement(n)?r.cloneElement(n,{ref:h}):n:u?i.createPortal(n,u):u}));t.Z=l},58188:function(e,t,n){"use strict";var r=n(87462),i=n(63366),o=n(67294),s=n(86010),a=n(57094),l=n(8925),c=n(99962),u=n(30067),d=n(73633),h=n(16600),f=n(13113),p=n(49957),m=n(71993),g=n(53256),v=n(55457),y=n(85893);const b=["aria-label","aria-labelledby","aria-valuetext","className","component","classes","defaultValue","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","tabIndex","track","value","valueLabelDisplay","valueLabelFormat","isRtl","components","componentsProps"];function w(e,t){return e-t}function x(e,t,n){return null==e?t:Math.min(Math.max(t,e),n)}function _(e,t){const{index:n}=e.reduce(((e,n,r)=>{const i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e}),null);return n}function S(e,t){if(void 0!==t.current&&e.changedTouches){for(let n=0;n<e.changedTouches.length;n+=1){const r=e.changedTouches[n];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function E(e,t,n){return 100*(e-t)/(n-t)}function T(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){const t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}(t)))}function C({values:e,newValue:t,index:n}){const r=e.slice();return r[n]=t,r.sort(w)}function M({sliderRef:e,activeIndex:t,setActive:n}){const r=(0,a.Z)(e.current);e.current.contains(r.activeElement)&&Number(r.activeElement.getAttribute("data-index"))===t||e.current.querySelector(`[type="range"][data-index="${t}"]`).focus(),n&&n(t)}const k={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},P=e=>e;let A;function I(){return void 0===A&&(A="undefined"==typeof CSS||"function"!=typeof CSS.supports||CSS.supports("touch-action","none")),A}const R=({children:e})=>e,L=o.forwardRef((function(e,t){const{"aria-label":n,"aria-labelledby":A,"aria-valuetext":L,className:O,component:N="span",classes:D,defaultValue:F,disableSwap:B=!1,disabled:Z=!1,getAriaLabel:V,getAriaValueText:z,marks:U=!1,max:j=100,min:H=0,name:G,onChange:W,onChangeCommitted:$,onMouseDown:q,orientation:Y="horizontal",scale:K=P,step:X=1,tabIndex:J,track:Q="normal",value:ee,valueLabelDisplay:te="off",valueLabelFormat:ne=P,isRtl:re=!1,components:ie={},componentsProps:oe={}}=e,se=(0,i.Z)(e,b),ae=o.useRef(),[le,ce]=o.useState(-1),[ue,de]=o.useState(-1),[he,fe]=o.useState(!1),pe=o.useRef(0),[me,ge]=(0,l.Z)({controlled:ee,default:null!=F?F:H,name:"Slider"}),ve=W&&((e,t,n)=>{const r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:t,name:G}}),W(i,t,n)}),ye=Array.isArray(me);let be=ye?me.slice().sort(w):[me];be=be.map((e=>x(e,H,j)));const we=!0===U&&null!==X?[...Array(Math.floor((j-H)/X)+1)].map(((e,t)=>({value:H+X*t}))):U||[],{isFocusVisibleRef:xe,onBlur:_e,onFocus:Se,ref:Ee}=(0,c.Z)(),[Te,Ce]=o.useState(-1),Me=o.useRef(),ke=(0,u.Z)(Ee,Me),Pe=(0,u.Z)(t,ke),Ae=(0,d.Z)((e=>{const t=Number(e.currentTarget.getAttribute("data-index"));Se(e),!0===xe.current&&Ce(t),de(t)})),Ie=(0,d.Z)((e=>{_e(e),!1===xe.current&&Ce(-1),de(-1)})),Re=(0,d.Z)((e=>{const t=Number(e.currentTarget.getAttribute("data-index"));de(t)})),Le=(0,d.Z)((()=>{de(-1)}));(0,h.Z)((()=>{Z&&Me.current.contains(document.activeElement)&&document.activeElement.blur()}),[Z]),Z&&-1!==le&&ce(-1),Z&&-1!==Te&&Ce(-1);const Oe=(0,d.Z)((e=>{const t=Number(e.currentTarget.getAttribute("data-index")),n=be[t],r=we.map((e=>e.value)),i=r.indexOf(n);let o=e.target.valueAsNumber;if(we&&null==X&&(o=o<n?r[i-1]:r[i+1]),o=x(o,H,j),we&&null==X){const e=we.map((e=>e.value)),n=e.indexOf(be[t]);o=o<be[t]?e[n-1]:e[n+1]}if(ye){B&&(o=x(o,be[t-1]||-1/0,be[t+1]||1/0));const e=o;o=C({values:be,newValue:o,index:t});let n=t;B||(n=o.indexOf(e)),M({sliderRef:Me,activeIndex:n})}ge(o),Ce(t),ve&&ve(e,o,t),$&&$(e,o)})),Ne=o.useRef();let De=Y;re&&"vertical"!==Y&&(De+="-reverse");const Fe=({finger:e,move:t=!1,values:n})=>{const{current:r}=Me,{width:i,height:o,bottom:s,left:a}=r.getBoundingClientRect();let l,c;if(l=0===De.indexOf("vertical")?(s-e.y)/o:(e.x-a)/i,-1!==De.indexOf("-reverse")&&(l=1-l),c=function(e,t,n){return(n-t)*e+t}(l,H,j),X)c=T(c,X,H);else{const e=we.map((e=>e.value));c=e[_(e,c)]}c=x(c,H,j);let u=0;if(ye){u=t?Ne.current:_(n,c),B&&(c=x(c,n[u-1]||-1/0,n[u+1]||1/0));const e=c;c=C({values:n,newValue:c,index:u}),B&&t||(u=c.indexOf(e),Ne.current=u)}return{newValue:c,activeIndex:u}},Be=(0,d.Z)((e=>{const t=S(e,ae);if(!t)return;if(pe.current+=1,"mousemove"===e.type&&0===e.buttons)return void Ze(e);const{newValue:n,activeIndex:r}=Fe({finger:t,move:!0,values:be});M({sliderRef:Me,activeIndex:r,setActive:ce}),ge(n),!he&&pe.current>2&&fe(!0),ve&&ve(e,n,r)})),Ze=(0,d.Z)((e=>{const t=S(e,ae);if(fe(!1),!t)return;const{newValue:n}=Fe({finger:t,values:be});ce(-1),"touchend"===e.type&&de(-1),$&&$(e,n),ae.current=void 0,ze()})),Ve=(0,d.Z)((e=>{I()||e.preventDefault();const t=e.changedTouches[0];null!=t&&(ae.current=t.identifier);const n=S(e,ae),{newValue:r,activeIndex:i}=Fe({finger:n,values:be});M({sliderRef:Me,activeIndex:i,setActive:ce}),ge(r),ve&&ve(e,r,i),pe.current=0;const o=(0,a.Z)(Me.current);o.addEventListener("touchmove",Be),o.addEventListener("touchend",Ze)})),ze=o.useCallback((()=>{const e=(0,a.Z)(Me.current);e.removeEventListener("mousemove",Be),e.removeEventListener("mouseup",Ze),e.removeEventListener("touchmove",Be),e.removeEventListener("touchend",Ze)}),[Ze,Be]);o.useEffect((()=>{const{current:e}=Me;return e.addEventListener("touchstart",Ve,{passive:I()}),()=>{e.removeEventListener("touchstart",Ve,{passive:I()}),ze()}}),[ze,Ve]),o.useEffect((()=>{Z&&ze()}),[Z,ze]);const Ue=(0,d.Z)((e=>{if(q&&q(e),0!==e.button)return;e.preventDefault();const t=S(e,ae),{newValue:n,activeIndex:r}=Fe({finger:t,values:be});M({sliderRef:Me,activeIndex:r,setActive:ce}),ge(n),ve&&ve(e,n,r),pe.current=0;const i=(0,a.Z)(Me.current);i.addEventListener("mousemove",Be),i.addEventListener("mouseup",Ze)})),je=E(ye?be[0]:H,H,j),He=E(be[be.length-1],H,j)-je,Ge=(0,r.Z)({},k[De].offset(je),k[De].leap(He)),We=ie.Root||N,$e=oe.root||{},qe=ie.Rail||"span",Ye=oe.rail||{},Ke=ie.Track||"span",Xe=oe.track||{},Je=ie.Thumb||"span",Qe=oe.thumb||{},et=ie.ValueLabel||v.Z,tt=oe.valueLabel||{},nt=ie.Mark||"span",rt=oe.mark||{},it=ie.MarkLabel||"span",ot=oe.markLabel||{},st=(0,r.Z)({},e,{classes:D,disabled:Z,dragging:he,isRtl:re,marked:we.length>0&&we.some((e=>e.label)),max:j,min:H,orientation:Y,scale:K,step:X,track:Q,valueLabelDisplay:te,valueLabelFormat:ne}),at=(e=>{const{disabled:t,dragging:n,marked:r,orientation:i,track:o,classes:s}=e,a={root:["root",t&&"disabled",n&&"dragging",r&&"marked","vertical"===i&&"vertical","inverted"===o&&"trackInverted",!1===o&&"trackFalse"],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled"],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,m.Z)(a,g.k,s)})(st);return(0,y.jsxs)(We,(0,r.Z)({ref:Pe,onMouseDown:Ue},$e,!(0,p.Z)(We)&&{as:N,ownerState:(0,r.Z)({},st,$e.ownerState)},se,{className:(0,s.Z)(at.root,$e.className,O),children:[(0,y.jsx)(qe,(0,r.Z)({},Ye,!(0,p.Z)(qe)&&{ownerState:(0,r.Z)({},st,Ye.ownerState)},{className:(0,s.Z)(at.rail,Ye.className)})),(0,y.jsx)(Ke,(0,r.Z)({},Xe,!(0,p.Z)(Ke)&&{ownerState:(0,r.Z)({},st,Xe.ownerState)},{className:(0,s.Z)(at.track,Xe.className),style:(0,r.Z)({},Ge,Xe.style)})),we.map(((e,t)=>{const n=E(e.value,H,j),i=k[De].offset(n);let a;return a=!1===Q?-1!==be.indexOf(e.value):"normal"===Q&&(ye?e.value>=be[0]&&e.value<=be[be.length-1]:e.value<=be[0])||"inverted"===Q&&(ye?e.value<=be[0]||e.value>=be[be.length-1]:e.value>=be[0]),(0,y.jsxs)(o.Fragment,{children:[(0,y.jsx)(nt,(0,r.Z)({"data-index":t},rt,!(0,p.Z)(nt)&&{ownerState:(0,r.Z)({},st,rt.ownerState),markActive:a},{style:(0,r.Z)({},i,rt.style),className:(0,s.Z)(at.mark,rt.className,a&&at.markActive)})),null!=e.label?(0,y.jsx)(it,(0,r.Z)({"aria-hidden":!0,"data-index":t},ot,!(0,p.Z)(it)&&{ownerState:(0,r.Z)({},st,ot.ownerState)},{markLabelActive:a,style:(0,r.Z)({},i,ot.style),className:(0,s.Z)(at.markLabel,ot.className,a&&at.markLabelActive),children:e.label})):null]},e.value)})),be.map(((t,i)=>{const a=E(t,H,j),l=k[De].offset(a),c="off"===te?R:et;return(0,y.jsx)(o.Fragment,{children:(0,y.jsx)(c,(0,r.Z)({valueLabelFormat:ne,valueLabelDisplay:te,value:"function"==typeof ne?ne(K(t),i):ne,index:i,open:ue===i||le===i||"on"===te,disabled:Z},tt,{className:(0,s.Z)(at.valueLabel,tt.className)},!(0,p.Z)(et)&&{ownerState:(0,r.Z)({},st,tt.ownerState)},{children:(0,y.jsx)(Je,(0,r.Z)({"data-index":i,onMouseOver:Re,onMouseLeave:Le},Qe,{className:(0,s.Z)(at.thumb,Qe.className,le===i&&at.active,Te===i&&at.focusVisible)},!(0,p.Z)(Je)&&{ownerState:(0,r.Z)({},st,Qe.ownerState)},{style:(0,r.Z)({},l,{pointerEvents:B&&le!==i?"none":void 0},Qe.style),children:(0,y.jsx)("input",{tabIndex:J,"data-index":i,"aria-label":V?V(i):n,"aria-labelledby":A,"aria-orientation":Y,"aria-valuemax":K(j),"aria-valuemin":K(H),"aria-valuenow":K(t),"aria-valuetext":z?z(K(t),i):L,onFocus:Ae,onBlur:Ie,name:G,type:"range",min:e.min,max:e.max,step:e.step,disabled:Z,value:be[i],onChange:Oe,style:(0,r.Z)({},f.Z,{direction:re?"rtl":"ltr",width:"100%",height:"100%"})})}))}))},i)}))]}))}));t.Z=L},55457:function(e,t,n){"use strict";var r=n(67294),i=n(86010),o=n(53256),s=n(85893);t.Z=function(e){const{children:t,className:n,value:a,theme:l}=e,c=(e=>{const{open:t}=e;return{offset:(0,i.Z)(t&&o.Z.valueLabelOpen),circle:o.Z.valueLabelCircle,label:o.Z.valueLabelLabel}})(e);return r.cloneElement(t,{className:(0,i.Z)(t.props.className)},(0,s.jsxs)(r.Fragment,{children:[t.props.children,(0,s.jsx)("span",{className:(0,i.Z)(c.offset,n),theme:l,"aria-hidden":!0,children:(0,s.jsx)("span",{className:c.circle,children:(0,s.jsx)("span",{className:c.label,children:a})})})]}))}},53256:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(88858),i=n(15773);function o(e){return(0,i.Z)("MuiSlider",e)}const s=(0,r.Z)("MuiSlider",["root","active","focusVisible","disabled","dragging","marked","vertical","trackInverted","trackFalse","rail","track","mark","markActive","markLabel","markLabelActive","thumb","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel"]);t.Z=s},47484:function(e,t,n){"use strict";var r=n(67294),i=n(30067),o=n(57094),s=n(85893);const a=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function l(e){const t=[],n=[];return Array.from(e.querySelectorAll(a)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex"),10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function c(){return!0}t.Z=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:a=!1,disableRestoreFocus:u=!1,getTabbable:d=l,isEnabled:h=c,open:f}=e,p=r.useRef(),m=r.useRef(null),g=r.useRef(null),v=r.useRef(null),y=r.useRef(null),b=r.useRef(!1),w=r.useRef(null),x=(0,i.Z)(t.ref,w),_=r.useRef(null);r.useEffect((()=>{f&&w.current&&(b.current=!n)}),[n,f]),r.useEffect((()=>{if(!f||!w.current)return;const e=(0,o.Z)(w.current);return w.current.contains(e.activeElement)||(w.current.hasAttribute("tabIndex")||w.current.setAttribute("tabIndex",-1),b.current&&w.current.focus()),()=>{u||(v.current&&v.current.focus&&(p.current=!0,v.current.focus()),v.current=null)}}),[f]),r.useEffect((()=>{if(!f||!w.current)return;const e=(0,o.Z)(w.current),t=t=>{const{current:n}=w;if(null!==n)if(e.hasFocus()&&!a&&h()&&!p.current){if(!n.contains(e.activeElement)){if(t&&y.current!==t.target||e.activeElement!==y.current)y.current=null;else if(null!==y.current)return;if(!b.current)return;let o=[];if(e.activeElement!==m.current&&e.activeElement!==g.current||(o=d(w.current)),o.length>0){var r,i;const e=Boolean((null==(r=_.current)?void 0:r.shiftKey)&&"Tab"===(null==(i=_.current)?void 0:i.key)),t=o[0],n=o[o.length-1];e?n.focus():t.focus()}else n.focus()}}else p.current=!1},n=t=>{_.current=t,!a&&h()&&"Tab"===t.key&&e.activeElement===w.current&&t.shiftKey&&(p.current=!0,g.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);const r=setInterval((()=>{"BODY"===e.activeElement.tagName&&t()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}),[n,a,u,h,f,d]);const S=e=>{null===v.current&&(v.current=e.relatedTarget),b.current=!0};return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)("div",{tabIndex:0,onFocus:S,ref:m,"data-test":"sentinelStart"}),r.cloneElement(t,{ref:x,onFocus:e=>{null===v.current&&(v.current=e.relatedTarget),b.current=!0,y.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,s.jsx)("div",{tabIndex:0,onFocus:S,ref:g,"data-test":"sentinelEnd"})]})}},71993:function(e,t,n){"use strict";function r(e,t,n){const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>(r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e)),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},15773:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});const r={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function i(e,t){return r[t]||`${e}-${t}`}},88858:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(15773);function i(e,t){const n={};return t.forEach((t=>{n[t]=(0,r.Z)(e,t)})),n}},37017:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(87462),i=n(49957);function o(e,t,n){return(0,i.Z)(e)?t:(0,r.Z)({},t,{ownerState:(0,r.Z)({},t.ownerState,n)})}},49957:function(e,t){"use strict";t.Z=function(e){return"string"==typeof e}},24823:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(67294),i=n(87462),o=n(44819),s=n(56760);var a="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",l=n(85893);var c=function(e){const{children:t,theme:n}=e,c=(0,s.Z)(),u=r.useMemo((()=>{const e=null===c?n:function(e,t){if("function"==typeof t)return t(e);return(0,i.Z)({},e,t)}(c,n);return null!=e&&(e[a]=null!==c),e}),[n,c]);return(0,l.jsx)(o.Z.Provider,{value:u,children:t})},u=n(34759),d=n(71713);function h(e){const t=(0,d.Z)();return(0,l.jsx)(u.T.Provider,{value:"object"==typeof t?t:{},children:e.children})}var f=function(e){const{children:t,theme:n}=e;return(0,l.jsx)(c,{theme:n,children:(0,l.jsx)(h,{children:t})})}},46663:function(e,t,n){"use strict";n.d(t,{VO:function(){return r},k9:function(){return o},W8:function(){return s},L7:function(){return a},P$:function(){return l}});const r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${r[e]}px)`};function o(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const e=o.breakpoints||i;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"==typeof t){const e=o.breakpoints||i;return Object.keys(t).reduce(((i,o)=>{if(-1!==Object.keys(e.values||r).indexOf(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function s(e={}){var t;return(null==e||null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function a(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function l({values:e,breakpoints:t,base:n}){const r=n||function(e,t){if("object"!=typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(e,t),i=Object.keys(r);if(0===i.length)return e;let o;return i.reduce(((t,n,r)=>(Array.isArray(e)?(t[n]=null!=e[r]?e[r]:e[o],o=r):(t[n]=null!=e[n]?e[n]:e[o]||e,o=n),t)),{})}},94581:function(e,t,n){"use strict";n.d(t,{oo:function(){return o},tB:function(){return s},wy:function(){return a},vq:function(){return l},ve:function(){return c},H3:function(){return u},mi:function(){return d},Fq:function(){return h},_j:function(){return f},$n:function(){return p},_4:function(){return m}});var r=n(71387);function i(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function o(e){e=e.substr(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function s(e){if(e.type)return e;if("#"===e.charAt(0))return s(o(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));let i,a=e.substring(t+1,e.length-1);if("color"===n){if(a=a.split(" "),i=a.shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].substr(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else a=a.split(",");return a=a.map((e=>parseFloat(e))),{type:n,values:a,colorSpace:i}}function a(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function l(e){if(0===e.indexOf("#"))return e;const{values:t}=s(e);return`#${t.map(((e,t)=>function(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}(3===t?Math.round(255*e):e))).join("")}`}function c(e){e=s(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),l=(e,t=(e+n/30)%12)=>i-o*Math.max(Math.min(t-3,9-t,1),-1);let c="rgb";const u=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(c+="a",u.push(t[3])),a({type:c,values:u})}function u(e){let t="hsl"===(e=s(e)).type?s(c(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function d(e,t){const n=u(e),r=u(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function h(e,t){return e=s(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,a(e)}function f(e,t){if(e=s(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return a(e)}function p(e,t){if(e=s(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return a(e)}function m(e,t=.15){return u(e)>.5?f(e,t):p(e,t)}},21182:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(87462),i=n(63366);const o=["values","unit","step"];function s(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5}=e,a=(0,i.Z)(e,o),l=Object.keys(t);function c(e){return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n})`}function u(e){return`@media (max-width:${("number"==typeof t[e]?t[e]:e)-s/100}${n})`}function d(e,r){const i=l.indexOf(r);return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==i&&"number"==typeof t[l[i]]?t[l[i]]:r)-s/100}${n})`}return(0,r.Z)({keys:l,values:t,up:c,down:u,between:d,only:function(e){return l.indexOf(e)+1<l.length?d(e,l[l.indexOf(e)+1]):c(e)},not:function(e){const t=l.indexOf(e);return 0===t?c(l[1]):t===l.length-1?u(l[t]):d(e,l[l.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},a)}},91244:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(11930);function i(e=8){if(e.mui)return e;const t=(0,r.hB)({spacing:e}),n=(...e)=>{return(0===e.length?[1]:e).map((e=>{const n=t(e);return"number"==typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}},50154:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(87462),i=n(63366),o=n(59766),s=n(21182);var a={borderRadius:4},l=n(91244);const c=["breakpoints","palette","spacing","shape"];var u=function(e={},...t){const{breakpoints:n={},palette:u={},spacing:d,shape:h={}}=e,f=(0,i.Z)(e,c),p=(0,s.Z)(n),m=(0,l.Z)(d);let g=(0,o.Z)({breakpoints:p,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},u),spacing:m,shape:(0,r.Z)({},a,h)},f);return g=t.reduce(((e,t)=>(0,o.Z)(e,t)),g),g}},94863:function(e,t,n){"use strict";n.d(t,{Z:function(){return K},G:function(){return Y}});var r=n(34439),i=n(4155);var o=function(...e){const t=e.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),n=e=>Object.keys(e).reduce(((n,r)=>t[r]?(0,i.Z)(n,t[r](e)):n),{});return n.propTypes={},n.filterProps=e.reduce(((e,t)=>e.concat(t.filterProps)),[]),n},s=n(11930),a=n(46663);function l(e){return"number"!=typeof e?e:`${e}px solid`}const c=(0,r.Z)({prop:"border",themeKey:"borders",transform:l}),u=(0,r.Z)({prop:"borderTop",themeKey:"borders",transform:l}),d=(0,r.Z)({prop:"borderRight",themeKey:"borders",transform:l}),h=(0,r.Z)({prop:"borderBottom",themeKey:"borders",transform:l}),f=(0,r.Z)({prop:"borderLeft",themeKey:"borders",transform:l}),p=(0,r.Z)({prop:"borderColor",themeKey:"palette"}),m=(0,r.Z)({prop:"borderTopColor",themeKey:"palette"}),g=(0,r.Z)({prop:"borderRightColor",themeKey:"palette"}),v=(0,r.Z)({prop:"borderBottomColor",themeKey:"palette"}),y=(0,r.Z)({prop:"borderLeftColor",themeKey:"palette"}),b=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,s.eI)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,s.NA)(t,e)});return(0,a.k9)(e,e.borderRadius,n)}return null};b.propTypes={},b.filterProps=["borderRadius"];var w=o(c,u,d,h,f,p,m,g,v,y,b);var x=o((0,r.Z)({prop:"displayPrint",cssProperty:!1,transform:e=>({"@media print":{display:e}})}),(0,r.Z)({prop:"display"}),(0,r.Z)({prop:"overflow"}),(0,r.Z)({prop:"textOverflow"}),(0,r.Z)({prop:"visibility"}),(0,r.Z)({prop:"whiteSpace"}));var _=o((0,r.Z)({prop:"flexBasis"}),(0,r.Z)({prop:"flexDirection"}),(0,r.Z)({prop:"flexWrap"}),(0,r.Z)({prop:"justifyContent"}),(0,r.Z)({prop:"alignItems"}),(0,r.Z)({prop:"alignContent"}),(0,r.Z)({prop:"order"}),(0,r.Z)({prop:"flex"}),(0,r.Z)({prop:"flexGrow"}),(0,r.Z)({prop:"flexShrink"}),(0,r.Z)({prop:"alignSelf"}),(0,r.Z)({prop:"justifyItems"}),(0,r.Z)({prop:"justifySelf"}));const S=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,s.eI)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,s.NA)(t,e)});return(0,a.k9)(e,e.gap,n)}return null};S.propTypes={},S.filterProps=["gap"];const E=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,s.eI)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,s.NA)(t,e)});return(0,a.k9)(e,e.columnGap,n)}return null};E.propTypes={},E.filterProps=["columnGap"];const T=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,s.eI)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,s.NA)(t,e)});return(0,a.k9)(e,e.rowGap,n)}return null};T.propTypes={},T.filterProps=["rowGap"];var C=o(S,E,T,(0,r.Z)({prop:"gridColumn"}),(0,r.Z)({prop:"gridRow"}),(0,r.Z)({prop:"gridAutoFlow"}),(0,r.Z)({prop:"gridAutoColumns"}),(0,r.Z)({prop:"gridAutoRows"}),(0,r.Z)({prop:"gridTemplateColumns"}),(0,r.Z)({prop:"gridTemplateRows"}),(0,r.Z)({prop:"gridTemplateAreas"}),(0,r.Z)({prop:"gridArea"}));var M=o((0,r.Z)({prop:"position"}),(0,r.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,r.Z)({prop:"top"}),(0,r.Z)({prop:"right"}),(0,r.Z)({prop:"bottom"}),(0,r.Z)({prop:"left"}));var k=o((0,r.Z)({prop:"color",themeKey:"palette"}),(0,r.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,r.Z)({prop:"backgroundColor",themeKey:"palette"}));var P=(0,r.Z)({prop:"boxShadow",themeKey:"shadows"});function A(e){return e<=1&&0!==e?100*e+"%":e}const I=(0,r.Z)({prop:"width",transform:A}),R=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||a.VO[t]||A(t)}};return(0,a.k9)(e,e.maxWidth,t)}return null};R.filterProps=["maxWidth"];const L=(0,r.Z)({prop:"minWidth",transform:A}),O=(0,r.Z)({prop:"height",transform:A}),N=(0,r.Z)({prop:"maxHeight",transform:A}),D=(0,r.Z)({prop:"minHeight",transform:A});(0,r.Z)({prop:"size",cssProperty:"width",transform:A}),(0,r.Z)({prop:"size",cssProperty:"height",transform:A});var F=o(I,R,L,O,N,D,(0,r.Z)({prop:"boxSizing"}));const B=(0,r.Z)({prop:"fontFamily",themeKey:"typography"}),Z=(0,r.Z)({prop:"fontSize",themeKey:"typography"}),V=(0,r.Z)({prop:"fontStyle",themeKey:"typography"}),z=(0,r.Z)({prop:"fontWeight",themeKey:"typography"}),U=(0,r.Z)({prop:"letterSpacing"}),j=(0,r.Z)({prop:"textTransform"}),H=(0,r.Z)({prop:"lineHeight"}),G=(0,r.Z)({prop:"textAlign"});var W=o((0,r.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),B,Z,V,z,U,H,G,j);const $={borders:w.filterProps,display:x.filterProps,flexbox:_.filterProps,grid:C.filterProps,positions:M.filterProps,palette:k.filterProps,shadows:P.filterProps,sizing:F.filterProps,spacing:s.ZP.filterProps,typography:W.filterProps},q={borders:w,display:x,flexbox:_,grid:C,positions:M,palette:k,shadows:P,sizing:F,spacing:s.ZP,typography:W},Y=Object.keys($).reduce(((e,t)=>($[t].forEach((n=>{e[n]=q[t]})),e)),{});var K=function(e,t,n){const r={[e]:t,theme:n},i=Y[e];return i?i(r):{[e]:t}}},4155:function(e,t,n){"use strict";var r=n(59766);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},11930:function(e,t,n){"use strict";n.d(t,{hB:function(){return p},eI:function(){return f},ZP:function(){return x},NA:function(){return m}});var r=n(46663),i=n(34439),o=n(4155);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=s[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...u,...d];function f(e,t,n,r){const o=(0,i.D)(e,t)||n;return"number"==typeof o?e=>"string"==typeof e?e:o*e:Array.isArray(o)?e=>"string"==typeof e?e:o[e]:"function"==typeof o?o:()=>{}}function p(e){return f(e,"spacing",8)}function m(e,t){if("string"==typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"==typeof n?-n:`-${n}`}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(c(n),i),s=e[n];return(0,r.k9)(e,s,o)}function v(e,t){const n=p(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.Z,{})}function y(e){return v(e,u)}function b(e){return v(e,d)}function w(e){return v(e,h)}y.propTypes={},y.filterProps=u,b.propTypes={},b.filterProps=d,w.propTypes={},w.filterProps=h;var x=w},34439:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(28320),i=n(46663);function o(e,t){return t&&"string"==typeof t?t.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e):null}function s(e,t,n,r=n){let i;return i="function"==typeof e?e(n):Array.isArray(e)?e[n]||r:o(e,n)||r,t&&(i=t(i)),i}t.Z=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,a)||{};return(0,i.k9)(e,c,(e=>{let i=s(u,l,e);return e===i&&"string"==typeof e&&(i=s(u,l,`${t}${"default"===e?"":(0,r.Z)(e)}`,e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},87893:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(87462),i=n(63366),o=n(59766),s=n(94863);const a=["sx"];function l(e){const{sx:t}=e,n=(0,i.Z)(e,a),{systemProps:l,otherProps:c}=(e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((n=>{s.G[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t})(n);let u;return u=Array.isArray(t)?[l,...t]:"function"==typeof t?(...e)=>{const n=t(...e);return(0,o.P)(n)?(0,r.Z)({},l,n):l}:(0,r.Z)({},l,t),(0,r.Z)({},c,{sx:u})}},18784:function(e,t,n){"use strict";var r=n(4155),i=n(94863),o=n(46663);function s(e){const{sx:t,theme:n={}}=e||{};if(!t)return null;function a(e){let t=e;if("function"==typeof e)t=e(n);else if("object"!=typeof e)return e;const a=(0,o.W8)(n.breakpoints),l=Object.keys(a);let c=a;return Object.keys(t).forEach((e=>{const a=(l=t[e],u=n,"function"==typeof l?l(u):l);var l,u;if(null!=a)if("object"==typeof a)if(i.G[e])c=(0,r.Z)(c,(0,i.Z)(e,a,n));else{const t=(0,o.k9)({theme:n},a,(t=>({[e]:t})));!function(...e){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]),n=new Set(t);return e.every((e=>n.size===Object.keys(e).length))}(t,a)?c=(0,r.Z)(c,t):c[e]=s({sx:a,theme:n})}else c=(0,r.Z)(c,(0,i.Z)(e,a,n))})),(0,o.L7)(l,c)}return Array.isArray(t)?t.map(a):a(t)}s.filterProps=["sx"],t.Z=s},71713:function(e,t,n){"use strict";var r=n(50154),i=n(2952);const o=(0,r.Z)();t.Z=function(e=o){return(0,i.Z)(e)}},85098:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(87462);function i(e){const{theme:t,name:n,props:i}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?function(e,t){const n=(0,r.Z)({},t);return Object.keys(e).forEach((t=>{void 0===n[t]&&(n[t]=e[t])})),n}(t.components[n].defaultProps,i):i}},31607:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(85098),i=n(71713);function o({props:e,name:t,defaultTheme:n}){const o=(0,i.Z)(n);return(0,r.Z)({theme:o,name:t,props:e})}},2952:function(e,t,n){"use strict";var r=n(56760);t.Z=function(e=null){const t=(0,r.Z)();return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},56232:function(e,t,n){"use strict";n.r(t),n.d(t,{createMuiTheme:function(){return R},default:function(){return L}});var r=n(87462),i=n(63366),o=n(59766),s=n(50154);var a=n(71387),l=n(94581),c=n(16115),u=n(47036),d=n(94518),h=n(60265),f=n(55137),p=n(6949),m=n(5621),g=n(13486);const v=["mode","contrastThreshold","tonalOffset"],y={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:c.Z.white,default:c.Z.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},b={text:{primary:c.Z.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:c.Z.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,l.$n)(e.main,i):"dark"===t&&(e.dark=(0,l._j)(e.main,o)))}function x(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:s=.2}=e,x=(0,i.Z)(e,v),_=e.primary||function(e="light"){return"dark"===e?{main:p.Z[200],light:p.Z[50],dark:p.Z[400]}:{main:p.Z[700],light:p.Z[400],dark:p.Z[800]}}(t),S=e.secondary||function(e="light"){return"dark"===e?{main:d.Z[200],light:d.Z[50],dark:d.Z[400]}:{main:d.Z[500],light:d.Z[300],dark:d.Z[700]}}(t),E=e.error||function(e="light"){return"dark"===e?{main:h.Z[500],light:h.Z[300],dark:h.Z[700]}:{main:h.Z[700],light:h.Z[400],dark:h.Z[800]}}(t),T=e.info||function(e="light"){return"dark"===e?{main:m.Z[400],light:m.Z[300],dark:m.Z[700]}:{main:m.Z[700],light:m.Z[500],dark:m.Z[900]}}(t),C=e.success||function(e="light"){return"dark"===e?{main:g.Z[400],light:g.Z[300],dark:g.Z[700]}:{main:g.Z[800],light:g.Z[500],dark:g.Z[900]}}(t),M=e.warning||function(e="light"){return"dark"===e?{main:f.Z[400],light:f.Z[300],dark:f.Z[700]}:{main:"#ED6C02",light:f.Z[500],dark:f.Z[900]}}(t);function k(e){return(0,l.mi)(e,b.text.primary)>=n?b.text.primary:y.text.primary}const P=({color:e,name:t,mainShade:n=500,lightShade:i=300,darkShade:o=700})=>{if(!(e=(0,r.Z)({},e)).main&&e[n]&&(e.main=e[n]),!e.hasOwnProperty("main"))throw new Error((0,a.Z)(11,t?` (${t})`:"",n));if("string"!=typeof e.main)throw new Error((0,a.Z)(12,t?` (${t})`:"",JSON.stringify(e.main)));return w(e,"light",i,s),w(e,"dark",o,s),e.contrastText||(e.contrastText=k(e.main)),e},A={dark:b,light:y};return(0,o.Z)((0,r.Z)({common:c.Z,mode:t,primary:P({color:_,name:"primary"}),secondary:P({color:S,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:P({color:E,name:"error"}),warning:P({color:M,name:"warning"}),info:P({color:T,name:"info"}),success:P({color:C,name:"success"}),grey:u.Z,contrastThreshold:n,getContrastText:k,augmentColor:P,tonalOffset:s},A[t]),x)}const _=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const S={textTransform:"uppercase"},E='"Roboto", "Helvetica", "Arial", sans-serif';function T(e,t){const n="function"==typeof t?t(e):t,{fontFamily:s=E,fontSize:a=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:h=16,allVariants:f,pxToRem:p}=n,m=(0,i.Z)(n,_);const g=a/14,v=p||(e=>e/h*g+"rem"),y=(e,t,n,i,o)=>{return(0,r.Z)({fontFamily:s,fontWeight:e,fontSize:v(t),lineHeight:n},s===E?{letterSpacing:(a=i/t,Math.round(1e5*a)/1e5)+"em"}:{},o,f);var a},b={h1:y(l,96,1.167,-1.5),h2:y(l,60,1.2,-.5),h3:y(c,48,1.167,0),h4:y(c,34,1.235,.25),h5:y(c,24,1.334,0),h6:y(u,20,1.6,.15),subtitle1:y(c,16,1.75,.15),subtitle2:y(u,14,1.57,.1),body1:y(c,16,1.5,.15),body2:y(c,14,1.43,.15),button:y(u,14,1.75,.4,S),caption:y(c,12,1.66,.4),overline:y(c,12,2.66,1,S)};return(0,o.Z)((0,r.Z)({htmlFontSize:h,pxToRem:v,fontFamily:s,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:d},b),m,{clone:!1})}function C(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,0.2)`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,0.14)`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,0.12)`].join(",")}var M=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)],k=n(96067);var P={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const A=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function I(e={},...t){const{mixins:n={},palette:a={},transitions:l={},typography:c={}}=e,u=(0,i.Z)(e,A),d=x(a),h=(0,s.Z)(e);let f=(0,o.Z)(h,{mixins:(p=h.breakpoints,h.spacing,m=n,(0,r.Z)({toolbar:{minHeight:56,[`${p.up("xs")} and (orientation: landscape)`]:{minHeight:48},[p.up("sm")]:{minHeight:64}}},m)),palette:d,shadows:M.slice(),typography:T(d,c),transitions:(0,k.ZP)(l),zIndex:(0,r.Z)({},P)});var p,m;return f=(0,o.Z)(f,u),f=t.reduce(((e,t)=>(0,o.Z)(e,t)),f),f}function R(...e){return I(...e)}var L=I},96067:function(e,t,n){"use strict";n.d(t,{Ui:function(){return s},x9:function(){return a},ZP:function(){return u}});var r=n(63366),i=n(87462);const o=["duration","easing","delay"],s={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},a={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(e){return`${Math.round(e)}ms`}function c(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function u(e){const t=(0,i.Z)({},s,e.easing),n=(0,i.Z)({},a,e.duration);return(0,i.Z)({getAutoHeightDuration:c,create:(e=["all"],i={})=>{const{duration:s=n.standard,easing:a=t.easeInOut,delay:c=0}=i;(0,r.Z)(i,o);return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof s?s:l(s)} ${a} ${"string"==typeof c?c:l(c)}`)).join(",")}},e,{easing:t,duration:n})}},90247:function(e,t,n){"use strict";const r=(0,n(56232).default)();t.Z=r},58524:function(e,t,n){"use strict";n.d(t,{ZP:function(){return _},FO:function(){return b},Dz:function(){return w}});var r=n(87462),i=n(63366),o=n(19868),s=n(50154),a=n(18784),l=n(28320);const c=["variant"];function u(e){return 0===e.length}function d(e){const{variant:t}=e,n=(0,i.Z)(e,c);let r=t||"";return Object.keys(n).sort().forEach((t=>{r+="color"===t?u(r)?e[t]:(0,l.Z)(e[t]):`${u(r)?t:(0,l.Z)(t)}${(0,l.Z)(e[t].toString())}`})),r}const h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],f=["theme"],p=["theme"];function m(e){return 0===Object.keys(e).length}function g(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const v=(0,s.Z)();var y=n(90247);const b=e=>g(e)&&"classes"!==e,w=g,x=function(e={}){const{defaultTheme:t=v,rootShouldForwardProp:n=g,slotShouldForwardProp:s=g}=e;return(e,l={})=>{const{name:c,slot:u,skipVariantsResolver:v,skipSx:y,overridesResolver:b}=l,w=(0,i.Z)(l,h),x=void 0!==v?v:u&&"Root"!==u||!1,_=y||!1;let S=g;"Root"===u?S=n:u&&(S=s);const E=(0,o.ZP)(e,(0,r.Z)({shouldForwardProp:S,label:undefined},w)),T=(e,...n)=>{const o=n?n.map((e=>"function"==typeof e&&e.__emotion_real!==e?n=>{let{theme:o}=n,s=(0,i.Z)(n,f);return e((0,r.Z)({theme:m(o)?t:o},s))}:e)):[];let s=e;c&&b&&o.push((e=>{const n=m(e.theme)?t:e.theme,r=((e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null)(c,n);if(r){const t={};return Object.entries(r).forEach((([n,r])=>{t[n]="function"==typeof r?r(e):r})),b(e,t)}return null})),c&&!x&&o.push((e=>{const n=m(e.theme)?t:e.theme;return((e,t,n,r)=>{var i,o;const{ownerState:s={}}=e,a=[],l=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return l&&l.forEach((n=>{let r=!0;Object.keys(n.props).forEach((t=>{s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&a.push(t[d(n.props)])})),a})(e,((e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach((e=>{const t=d(e.props);r[t]=e.style})),r})(c,n),n,c)})),_||o.push((e=>{const n=m(e.theme)?t:e.theme;return(0,a.Z)((0,r.Z)({},e,{theme:n}))}));const l=o.length-n.length;if(Array.isArray(e)&&l>0){const t=new Array(l).fill("");s=[...e,...t],s.raw=[...e.raw,...t]}else"function"==typeof e&&(s=n=>{let{theme:o}=n,s=(0,i.Z)(n,p);return e((0,r.Z)({theme:m(o)?t:o},s))});return E(s,...o)};return E.withConfig&&(T.withConfig=E.withConfig),T}}({defaultTheme:y.Z,rootShouldForwardProp:b});var _=x},2734:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});n(67294);var r=n(71713),i=n(90247);function o(){return(0,r.Z)(i.Z)}},71657:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(31607),i=n(90247);function o({props:e,name:t}){return(0,r.Z)({props:e,name:t,defaultTheme:i.Z})}},30577:function(e,t,n){"use strict";n.d(t,{n:function(){return r},C:function(){return i}});const r=e=>e.scrollTop;function i(e,t){var n,r;const{timeout:i,easing:o,style:s={}}=e;return{duration:null!=(n=s.transitionDuration)?n:"number"==typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"==typeof o?o[t.mode]:o,delay:s.transitionDelay}}},98216:function(e,t,n){"use strict";var r=n(28320);t.Z=r.Z},35893:function(e,t,n){"use strict";var r=n(49064);t.Z=r.Z},82066:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(87462),i=n(67294),o=n(2373),s=n(85893);function a(e,t){const n=(n,i)=>(0,s.jsx)(o.Z,(0,r.Z)({"data-testid":`${t}Icon`,ref:i},n,{children:e}));return n.muiName=o.Z.muiName,i.memo(i.forwardRef(n))}},93881:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=function(e,t=166){let n;function r(...r){clearTimeout(n),n=setTimeout((()=>{e.apply(this,r)}),t)}return r.clear=()=>{clearTimeout(n)},r}},64298:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return r.Z},createChainedFunction:function(){return i.Z},createSvgIcon:function(){return o.Z},debounce:function(){return s.Z},deprecatedPropType:function(){return a},isMuiElement:function(){return l.Z},ownerDocument:function(){return c.Z},ownerWindow:function(){return u.Z},requirePropFactory:function(){return d},setRef:function(){return h},unstable_useEnhancedEffect:function(){return f.Z},unstable_useId:function(){return p.Z},unsupportedProp:function(){return m},useControlled:function(){return g.Z},useEventCallback:function(){return v.Z},useForkRef:function(){return y.Z},useIsFocusVisible:function(){return b.Z}});var r=n(98216),i=n(35893),o=n(82066),s=n(93881);var a=function(e,t){return()=>null},l=n(48502),c=n(8038),u=n(5340);n(87462);var d=function(e,t){return()=>null},h=n(7960).Z,f=n(58974),p=n(27909);var m=function(e,t,n,r,i){return null},g=n(49299),v=n(2068),y=n(51705),b=n(79674)},48502:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(67294);var i=function(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},8038:function(e,t,n){"use strict";var r=n(57094);t.Z=r.Z},5340:function(e,t,n){"use strict";var r=n(58290);t.Z=r.Z},49299:function(e,t,n){"use strict";var r=n(8925);t.Z=r.Z},58974:function(e,t,n){"use strict";var r=n(16600);t.Z=r.Z},2068:function(e,t,n){"use strict";var r=n(73633);t.Z=r.Z},51705:function(e,t,n){"use strict";var r=n(30067);t.Z=r.Z},27909:function(e,t,n){"use strict";var r=n(57579);t.Z=r.Z},79674:function(e,t,n){"use strict";var r=n(99962);t.Z=r.Z},44819:function(e,t,n){"use strict";const r=n(67294).createContext(null);t.Z=r},56760:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(67294),i=n(44819);function o(){return r.useContext(i.Z)}},19868:function(e,t,n){"use strict";n.d(t,{ZP:function(){return y}});var r=n(67294),i=n(87462),o=n(67866),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,o.Z)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),l=n(34759),c=n(70444),u=n(94199),d=a,h=function(e){return"theme"!==e},f=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?d:h},p=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!=typeof r&&n&&(r=e.__emotion_forwardProp),r},m=function e(t,n){var o,s,a=t.__emotion_real===t,d=a&&t.__emotion_base||t;void 0!==n&&(o=n.label,s=n.target);var h=p(t,n,a),m=h||f(d),g=!m("as");return function(){var v=arguments,y=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&y.push("label:"+o+";"),null==v[0]||void 0===v[0].raw)y.push.apply(y,v);else{0,y.push(v[0][0]);for(var b=v.length,w=1;w<b;w++)y.push(v[w],v[0][w])}var x=(0,l.w)((function(e,t,n){var i=g&&e.as||d,o="",a=[],p=e;if(null==e.theme){for(var v in p={},e)p[v]=e[v];p.theme=(0,r.useContext)(l.T)}"string"==typeof e.className?o=(0,c.f)(t.registered,a,e.className):null!=e.className&&(o=e.className+" ");var b=(0,u.O)(y.concat(a),t.registered,p);(0,c.M)(t,b,"string"==typeof i);o+=t.key+"-"+b.name,void 0!==s&&(o+=" "+s);var w=g&&void 0===h?f(i):m,x={};for(var _ in e)g&&"as"===_||w(_)&&(x[_]=e[_]);return x.className=o,x.ref=n,(0,r.createElement)(i,x)}));return x.displayName=void 0!==o?o:"Styled("+("string"==typeof d?d:d.displayName||d.name||"Component")+")",x.defaultProps=t.defaultProps,x.__emotion_real=x,x.__emotion_base=d,x.__emotion_styles=y,x.__emotion_forwardProp=h,Object.defineProperty(x,"toString",{value:function(){return"."+s}}),x.withComponent=function(t,r){return e(t,(0,i.Z)({},n,r,{shouldForwardProp:p(x,r,!0)})).apply(void 0,y)},x}},g=m.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){g[e]=g(e)}));var v=g;function y(e,t){return v(e,t)}},28320:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(71387);function i(e){if("string"!=typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},49064:function(e,t,n){"use strict";function r(...e){return e.reduce(((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)}),(()=>{}))}n.d(t,{Z:function(){return r}})},59766:function(e,t,n){"use strict";n.d(t,{P:function(){return i},Z:function(){return o}});var r=n(87462);function i(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function o(e,t,n={clone:!0}){const s=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?s[r]=o(e[r],t[r],n):s[r]=t[r])})),s}},71387:function(e,t,n){"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let e=1;e<arguments.length;e+=1)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},95806:function(e,t,n){"use strict";function r(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}n.d(t,{Z:function(){return r}})},57094:function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return r}})},58290:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(57094);function i(e){return(0,r.Z)(e).defaultView||window}},7960:function(e,t,n){"use strict";function r(e,t){"function"==typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},8925:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(67294);function i({controlled:e,default:t,name:n,state:i="value"}){const{current:o}=r.useRef(void 0!==e),[s,a]=r.useState(t);return[o?e:s,r.useCallback((e=>{o||a(e)}),[])]}},16600:function(e,t,n){"use strict";var r=n(67294);const i="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.Z=i},73633:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(67294),i=n(16600);function o(e){const t=r.useRef(e);return(0,i.Z)((()=>{t.current=e})),r.useCallback(((...e)=>(0,t.current)(...e)),[])}},30067:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(67294),i=n(7960);function o(e,t){return r.useMemo((()=>null==e&&null==t?null:n=>{(0,i.Z)(e,n),(0,i.Z)(t,n)}),[e,t])}},57579:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(67294);let i=0;function o(e){const[t,n]=r.useState(e),o=e||t;return r.useEffect((()=>{null==t&&(i+=1,n(`mui-${i}`))}),[t]),o}},99962:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(67294);let i,o=!0,s=!1;const a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function c(){o=!1}function u(){"hidden"===this.visibilityState&&s&&(o=!0)}function d(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(e){}return o||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!a[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function h(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",l,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",u,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!d(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(s=!0,window.clearTimeout(i),i=window.setTimeout((()=>{s=!1}),100),t.current=!1,!0)},ref:e}}},13113:function(e,t){"use strict";t.Z={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"}},43010:function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},33704:function(e,t){!function(e){"use strict";t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(t){var n,r,i,o,s,a=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),d=new Uint8Array(u);for(n=0;n<l;n+=4)r=e.indexOf(t[n]),i=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),d[c++]=r<<2|i>>4,d[c++]=(15&i)<<4|o>>2,d[c++]=(3&o)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},79742:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=l(e),s=o[0],a=o[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),u=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,l=r-i;a<l;a+=s)o.push(c(e,a,a+s>l?l:a+s));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},86010:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{Z:function(){return i}})},98767:function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},35982:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,":root {\n  --toastify-color-light: #fff;\n  --toastify-color-dark: #121212;\n  --toastify-color-info: #3498db;\n  --toastify-color-success: #07bc0c;\n  --toastify-color-warning: #f1c40f;\n  --toastify-color-error: #e74c3c;\n  --toastify-color-transparent: rgba(255, 255, 255, 0.7);\n  --toastify-icon-color-info: var(--toastify-color-info);\n  --toastify-icon-color-success: var(--toastify-color-success);\n  --toastify-icon-color-warning: var(--toastify-color-warning);\n  --toastify-icon-color-error: var(--toastify-color-error);\n  --toastify-toast-width: 320px;\n  --toastify-toast-background: #fff;\n  --toastify-toast-min-height: 64px;\n  --toastify-toast-max-height: 800px;\n  --toastify-font-family: sans-serif;\n  --toastify-z-index: 9999;\n  --toastify-text-color-light: #757575;\n  --toastify-text-color-dark: #fff;\n  --toastify-text-color-info: #fff;\n  --toastify-text-color-success: #fff;\n  --toastify-text-color-warning: #fff;\n  --toastify-text-color-error: #fff;\n  --toastify-spinner-color: #616161;\n  --toastify-spinner-color-empty-area: #e0e0e0;\n  --toastify-color-progress-light: linear-gradient(\n    to right,\n    #4cd964,\n    #5ac8fa,\n    #007aff,\n    #34aadc,\n    #5856d6,\n    #ff2d55\n  );\n  --toastify-color-progress-dark: #bb86fc;\n  --toastify-color-progress-info: var(--toastify-color-info);\n  --toastify-color-progress-success: var(--toastify-color-success);\n  --toastify-color-progress-warning: var(--toastify-color-warning);\n  --toastify-color-progress-error: var(--toastify-color-error);\n}\n\n.Toastify__toast-container {\n  z-index: var(--toastify-z-index);\n  -webkit-transform: translate3d(0, 0, var(--toastify-z-index) px);\n  position: fixed;\n  padding: 4px;\n  width: var(--toastify-toast-width);\n  box-sizing: border-box;\n  color: #fff;\n}\n.Toastify__toast-container--top-left {\n  top: 1em;\n  left: 1em;\n}\n.Toastify__toast-container--top-center {\n  top: 1em;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.Toastify__toast-container--top-right {\n  top: 1em;\n  right: 1em;\n}\n.Toastify__toast-container--bottom-left {\n  bottom: 1em;\n  left: 1em;\n}\n.Toastify__toast-container--bottom-center {\n  bottom: 1em;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.Toastify__toast-container--bottom-right {\n  bottom: 1em;\n  right: 1em;\n}\n\n@media only screen and (max-width : 480px) {\n  .Toastify__toast-container {\n    width: 100vw;\n    padding: 0;\n    left: 0;\n    margin: 0;\n  }\n  .Toastify__toast-container--top-left, .Toastify__toast-container--top-center, .Toastify__toast-container--top-right {\n    top: 0;\n    transform: translateX(0);\n  }\n  .Toastify__toast-container--bottom-left, .Toastify__toast-container--bottom-center, .Toastify__toast-container--bottom-right {\n    bottom: 0;\n    transform: translateX(0);\n  }\n  .Toastify__toast-container--rtl {\n    right: 0;\n    left: initial;\n  }\n}\n.Toastify__toast {\n  position: relative;\n  min-height: var(--toastify-toast-min-height);\n  box-sizing: border-box;\n  margin-bottom: 1rem;\n  padding: 8px;\n  border-radius: 4px;\n  box-shadow: 0 1px 10px 0 rgba(0, 0, 0, 0.1), 0 2px 15px 0 rgba(0, 0, 0, 0.05);\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  max-height: var(--toastify-toast-max-height);\n  overflow: hidden;\n  font-family: var(--toastify-font-family);\n  cursor: pointer;\n  direction: ltr;\n}\n.Toastify__toast--rtl {\n  direction: rtl;\n}\n.Toastify__toast-body {\n  margin: auto 0;\n  -ms-flex: 1 1 auto;\n      flex: 1 1 auto;\n  padding: 6px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n}\n.Toastify__toast-icon {\n  -webkit-margin-end: 10px;\n          margin-inline-end: 10px;\n  width: 20px;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  display: -ms-flexbox;\n  display: flex;\n}\n\n.Toastify--animate {\n  animation-fill-mode: both;\n  animation-duration: 0.7s;\n}\n\n.Toastify--animate-icon {\n  animation-fill-mode: both;\n  animation-duration: 0.3s;\n}\n\n@media only screen and (max-width : 480px) {\n  .Toastify__toast {\n    margin-bottom: 0;\n    border-radius: 0;\n  }\n}\n.Toastify__toast-theme--dark {\n  background: var(--toastify-color-dark);\n  color: var(--toastify-text-color-dark);\n}\n.Toastify__toast-theme--light {\n  background: var(--toastify-color-light);\n  color: var(--toastify-text-color-light);\n}\n.Toastify__toast-theme--colored.Toastify__toast--default {\n  background: var(--toastify-color-light);\n  color: var(--toastify-text-color-light);\n}\n.Toastify__toast-theme--colored.Toastify__toast--info {\n  color: var(--toastify-text-color-info);\n  background: var(--toastify-color-info);\n}\n.Toastify__toast-theme--colored.Toastify__toast--success {\n  color: var(--toastify-text-color-success);\n  background: var(--toastify-color-success);\n}\n.Toastify__toast-theme--colored.Toastify__toast--warning {\n  color: var(--toastify-text-color-warning);\n  background: var(--toastify-color-warning);\n}\n.Toastify__toast-theme--colored.Toastify__toast--error {\n  color: var(--toastify-text-color-error);\n  background: var(--toastify-color-error);\n}\n\n.Toastify__progress-bar-theme--light {\n  background: var(--toastify-color-progress-light);\n}\n.Toastify__progress-bar-theme--dark {\n  background: var(--toastify-color-progress-dark);\n}\n.Toastify__progress-bar--info {\n  background: var(--toastify-color-progress-info);\n}\n.Toastify__progress-bar--success {\n  background: var(--toastify-color-progress-success);\n}\n.Toastify__progress-bar--warning {\n  background: var(--toastify-color-progress-warning);\n}\n.Toastify__progress-bar--error {\n  background: var(--toastify-color-progress-error);\n}\n.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info, .Toastify__progress-bar-theme--colored.Toastify__progress-bar--success, .Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning, .Toastify__progress-bar-theme--colored.Toastify__progress-bar--error {\n  background: var(--toastify-color-transparent);\n}\n\n.Toastify__close-button {\n  color: #fff;\n  background: transparent;\n  outline: none;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n  opacity: 0.7;\n  transition: 0.3s ease;\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n}\n.Toastify__close-button--light {\n  color: #000;\n  opacity: 0.3;\n}\n.Toastify__close-button > svg {\n  fill: currentColor;\n  height: 16px;\n  width: 14px;\n}\n.Toastify__close-button:hover, .Toastify__close-button:focus {\n  opacity: 1;\n}\n\n@keyframes Toastify__trackProgress {\n  0% {\n    transform: scaleX(1);\n  }\n  100% {\n    transform: scaleX(0);\n  }\n}\n.Toastify__progress-bar {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 5px;\n  z-index: var(--toastify-z-index);\n  opacity: 0.7;\n  transform-origin: left;\n}\n.Toastify__progress-bar--animated {\n  animation: Toastify__trackProgress linear 1 forwards;\n}\n.Toastify__progress-bar--controlled {\n  transition: transform 0.2s;\n}\n.Toastify__progress-bar--rtl {\n  right: 0;\n  left: initial;\n  transform-origin: right;\n}\n\n.Toastify__spinner {\n  width: 20px;\n  height: 20px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: var(--toastify-spinner-color-empty-area);\n  border-right-color: var(--toastify-spinner-color);\n  animation: Toastify__spin 0.65s linear infinite;\n}\n\n@keyframes Toastify__bounceInRight {\n  from, 60%, 75%, 90%, to {\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  from {\n    opacity: 0;\n    transform: translate3d(3000px, 0, 0);\n  }\n  60% {\n    opacity: 1;\n    transform: translate3d(-25px, 0, 0);\n  }\n  75% {\n    transform: translate3d(10px, 0, 0);\n  }\n  90% {\n    transform: translate3d(-5px, 0, 0);\n  }\n  to {\n    transform: none;\n  }\n}\n@keyframes Toastify__bounceOutRight {\n  20% {\n    opacity: 1;\n    transform: translate3d(-20px, 0, 0);\n  }\n  to {\n    opacity: 0;\n    transform: translate3d(2000px, 0, 0);\n  }\n}\n@keyframes Toastify__bounceInLeft {\n  from, 60%, 75%, 90%, to {\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  0% {\n    opacity: 0;\n    transform: translate3d(-3000px, 0, 0);\n  }\n  60% {\n    opacity: 1;\n    transform: translate3d(25px, 0, 0);\n  }\n  75% {\n    transform: translate3d(-10px, 0, 0);\n  }\n  90% {\n    transform: translate3d(5px, 0, 0);\n  }\n  to {\n    transform: none;\n  }\n}\n@keyframes Toastify__bounceOutLeft {\n  20% {\n    opacity: 1;\n    transform: translate3d(20px, 0, 0);\n  }\n  to {\n    opacity: 0;\n    transform: translate3d(-2000px, 0, 0);\n  }\n}\n@keyframes Toastify__bounceInUp {\n  from, 60%, 75%, 90%, to {\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  from {\n    opacity: 0;\n    transform: translate3d(0, 3000px, 0);\n  }\n  60% {\n    opacity: 1;\n    transform: translate3d(0, -20px, 0);\n  }\n  75% {\n    transform: translate3d(0, 10px, 0);\n  }\n  90% {\n    transform: translate3d(0, -5px, 0);\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes Toastify__bounceOutUp {\n  20% {\n    transform: translate3d(0, -10px, 0);\n  }\n  40%, 45% {\n    opacity: 1;\n    transform: translate3d(0, 20px, 0);\n  }\n  to {\n    opacity: 0;\n    transform: translate3d(0, -2000px, 0);\n  }\n}\n@keyframes Toastify__bounceInDown {\n  from, 60%, 75%, 90%, to {\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  0% {\n    opacity: 0;\n    transform: translate3d(0, -3000px, 0);\n  }\n  60% {\n    opacity: 1;\n    transform: translate3d(0, 25px, 0);\n  }\n  75% {\n    transform: translate3d(0, -10px, 0);\n  }\n  90% {\n    transform: translate3d(0, 5px, 0);\n  }\n  to {\n    transform: none;\n  }\n}\n@keyframes Toastify__bounceOutDown {\n  20% {\n    transform: translate3d(0, 10px, 0);\n  }\n  40%, 45% {\n    opacity: 1;\n    transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 0;\n    transform: translate3d(0, 2000px, 0);\n  }\n}\n.Toastify__bounce-enter--top-left, .Toastify__bounce-enter--bottom-left {\n  animation-name: Toastify__bounceInLeft;\n}\n.Toastify__bounce-enter--top-right, .Toastify__bounce-enter--bottom-right {\n  animation-name: Toastify__bounceInRight;\n}\n.Toastify__bounce-enter--top-center {\n  animation-name: Toastify__bounceInDown;\n}\n.Toastify__bounce-enter--bottom-center {\n  animation-name: Toastify__bounceInUp;\n}\n\n.Toastify__bounce-exit--top-left, .Toastify__bounce-exit--bottom-left {\n  animation-name: Toastify__bounceOutLeft;\n}\n.Toastify__bounce-exit--top-right, .Toastify__bounce-exit--bottom-right {\n  animation-name: Toastify__bounceOutRight;\n}\n.Toastify__bounce-exit--top-center {\n  animation-name: Toastify__bounceOutUp;\n}\n.Toastify__bounce-exit--bottom-center {\n  animation-name: Toastify__bounceOutDown;\n}\n\n@keyframes Toastify__zoomIn {\n  from {\n    opacity: 0;\n    transform: scale3d(0.3, 0.3, 0.3);\n  }\n  50% {\n    opacity: 1;\n  }\n}\n@keyframes Toastify__zoomOut {\n  from {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n    transform: scale3d(0.3, 0.3, 0.3);\n  }\n  to {\n    opacity: 0;\n  }\n}\n.Toastify__zoom-enter {\n  animation-name: Toastify__zoomIn;\n}\n\n.Toastify__zoom-exit {\n  animation-name: Toastify__zoomOut;\n}\n\n@keyframes Toastify__flipIn {\n  from {\n    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);\n    animation-timing-function: ease-in;\n    opacity: 0;\n  }\n  40% {\n    transform: perspective(400px) rotate3d(1, 0, 0, -20deg);\n    animation-timing-function: ease-in;\n  }\n  60% {\n    transform: perspective(400px) rotate3d(1, 0, 0, 10deg);\n    opacity: 1;\n  }\n  80% {\n    transform: perspective(400px) rotate3d(1, 0, 0, -5deg);\n  }\n  to {\n    transform: perspective(400px);\n  }\n}\n@keyframes Toastify__flipOut {\n  from {\n    transform: perspective(400px);\n  }\n  30% {\n    transform: perspective(400px) rotate3d(1, 0, 0, -20deg);\n    opacity: 1;\n  }\n  to {\n    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);\n    opacity: 0;\n  }\n}\n.Toastify__flip-enter {\n  animation-name: Toastify__flipIn;\n}\n\n.Toastify__flip-exit {\n  animation-name: Toastify__flipOut;\n}\n\n@keyframes Toastify__slideInRight {\n  from {\n    transform: translate3d(110%, 0, 0);\n    visibility: visible;\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes Toastify__slideInLeft {\n  from {\n    transform: translate3d(-110%, 0, 0);\n    visibility: visible;\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes Toastify__slideInUp {\n  from {\n    transform: translate3d(0, 110%, 0);\n    visibility: visible;\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes Toastify__slideInDown {\n  from {\n    transform: translate3d(0, -110%, 0);\n    visibility: visible;\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes Toastify__slideOutRight {\n  from {\n    transform: translate3d(0, 0, 0);\n  }\n  to {\n    visibility: hidden;\n    transform: translate3d(110%, 0, 0);\n  }\n}\n@keyframes Toastify__slideOutLeft {\n  from {\n    transform: translate3d(0, 0, 0);\n  }\n  to {\n    visibility: hidden;\n    transform: translate3d(-110%, 0, 0);\n  }\n}\n@keyframes Toastify__slideOutDown {\n  from {\n    transform: translate3d(0, 0, 0);\n  }\n  to {\n    visibility: hidden;\n    transform: translate3d(0, 500px, 0);\n  }\n}\n@keyframes Toastify__slideOutUp {\n  from {\n    transform: translate3d(0, 0, 0);\n  }\n  to {\n    visibility: hidden;\n    transform: translate3d(0, -500px, 0);\n  }\n}\n.Toastify__slide-enter--top-left, .Toastify__slide-enter--bottom-left {\n  animation-name: Toastify__slideInLeft;\n}\n.Toastify__slide-enter--top-right, .Toastify__slide-enter--bottom-right {\n  animation-name: Toastify__slideInRight;\n}\n.Toastify__slide-enter--top-center {\n  animation-name: Toastify__slideInDown;\n}\n.Toastify__slide-enter--bottom-center {\n  animation-name: Toastify__slideInUp;\n}\n\n.Toastify__slide-exit--top-left, .Toastify__slide-exit--bottom-left {\n  animation-name: Toastify__slideOutLeft;\n}\n.Toastify__slide-exit--top-right, .Toastify__slide-exit--bottom-right {\n  animation-name: Toastify__slideOutRight;\n}\n.Toastify__slide-exit--top-center {\n  animation-name: Toastify__slideOutUp;\n}\n.Toastify__slide-exit--bottom-center {\n  animation-name: Toastify__slideOutDown;\n}\n\n@keyframes Toastify__spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}",""]),t.Z=i},14245:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".root {\r\n  font-family: monospace;\r\n}\r\n\r\n#back-drop-canvas {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: -999;\r\n}\r\n\r\n.container {\r\n  width: 90%;\r\n  margin: auto;\r\n  margin-top: 15px;\r\n  padding: 15px;\r\n  color: #fff;\r\n  overflow-y: auto;\r\n  max-width: 1440px;\r\n}\r\n\r\n.background {\r\n  background: rgba(0, 0, 0, 0.82);\r\n  padding: 15px;\r\n}\r\n\r\n.card {\r\n  background-color: none;\r\n  color: #fff;\r\n}\r\n\r\n/* width */\r\n::-webkit-scrollbar {\r\n  width: 20px;\r\n}\r\n\r\n/* Track */\r\n::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n}\r\n\r\n/* Handle */\r\n::-webkit-scrollbar-thumb {\r\n  background: #888;\r\n}\r\n\r\n/* Handle on hover */\r\n::-webkit-scrollbar-thumb:hover {\r\n  background: #555;\r\n}\r\n",""]),t.Z=i},5071:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".btn {\r\n  height: fit-content;\r\n  /* height: 30px; */\r\n  line-height: 30px;\r\n  font-size: 18px;\r\n  width: fit-content;\r\n  /* background: rgba(0, 0, 0, 0.82);\r\n  color: white; */\r\n  padding: 10px;\r\n  margin-bottom: 10px;\r\n  margin-top: 10px;\r\n  box-shadow: 5px 5px rgba(119, 118, 118, 0.82);\r\n  transition: 0.2s;\r\n\r\n  -moz-user-select: none;\r\n  -webkit-user-select: none;\r\n  -ms-user-select: none;\r\n  -o-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n.btn:hover:not(.disabled) {\r\n  box-shadow: 1px 1px rgba(119, 118, 118, 0.82);\r\n  cursor: pointer;\r\n}\r\n\r\n@media only screen and (max-width: 600px) {\r\n  .btn {\r\n    width: 90%;\r\n  }\r\n}\r\n\r\n.disabled {\r\n  background: #ccc !important;\r\n  box-shadow: none;\r\n  color: #999 !important;\r\n}\r\n\r\n.btn__icon {\r\n  margin-right: 15px;\r\n  margin-top: 3px;\r\n  line-height: 100%;\r\n  vertical-align: middle;\r\n}\r\n\r\n.btn--white {\r\n  background: rgba(255, 255, 255, 0.82);\r\n  color: black;\r\n}\r\n\r\n.btn--black {\r\n  background: rgba(0, 0, 0, 0.82);\r\n  color: white;\r\n}\r\n\r\n/* .btn--black:hover :not(.disabled) {\r\n  background: rgba(0, 0, 0, 0.99);\r\n}\r\n\r\n.btn--white:hover:not(.disabled) {\r\n  background: rgba(255, 255, 255, 0.99);\r\n} */\r\n",""]),t.Z=i},89814:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".card {\r\n  border-radius: 0 !important;\r\n}\r\n",""]),t.Z=i},52401:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".garage__item {\r\n  cursor: pointer;\r\n  width: 100%;\r\n  min-height: 50px;\r\n  height: auto;\r\n  max-height: 150px;\r\n  text-align: center;\r\n  vertical-align: baseline;\r\n  transition: 0.2s;\r\n}\r\n\r\n.garage__item--not-owned {\r\n  filter: opacity(0.5);\r\n  border-color: gray;\r\n}\r\n",""]),t.Z=i},23682:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".MuiCheckbox-root {\r\n  color: #999 !important;\r\n}\r\n\r\n.checkbox__input {\r\n  color: #999;\r\n  height: 20px;\r\n  width: 20px;\r\n}\r\n",""]),t.Z=i},49087:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".date-input__label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n}\r\n",""]),t.Z=i},45718:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".progress {\r\n  /* min-width: 50px;\r\n  color: black;\r\n  border-radius: 0;\r\n  margin-left: 10px;\r\n  max-width: 90%; */\r\n\r\n  border: 1px solid white;\r\n  width: 200px;\r\n  height: 20px;\r\n}\r\n\r\n.progress__inner {\r\n  background-color: white;\r\n  height: 100%;\r\n  transition: 0.2s;\r\n}\r\n",""]),t.Z=i},42409:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".select {\r\n  border-radius: 0 !important;\r\n}\r\n\r\n.select__label {\r\n  display: block;\r\n  margin-bottom: 2px;\r\n}\r\n",""]),t.Z=i},82529:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".radio__label {\r\n  display: block;\r\n  margin-bottom: 2px;\r\n  width: fit-content;\r\n}\r\n\r\n.MuiRadio-root {\r\n  color: #999 !important;\r\n}\r\n",""]),t.Z=i},67818:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".text-field {\r\n  border-radius: 0 !important;\r\n}\r\n\r\n.text-field__label {\r\n  display: block;\r\n  margin-bottom: 2px;\r\n  width: fit-content;\r\n}\r\n\r\n.MuiOutlinedInput-root {\r\n  border-radius: 0 !important;\r\n}\r\n",""]),t.Z=i},27119:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"",""]),t.Z=i},58783:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".loading-bar__container {\r\n  /* visibility: visible; */\r\n  z-index: 9999;\r\n  width: 200px;\r\n  margin: auto;\r\n  border: 2px solid #fff;\r\n  height: 20px;\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n\r\n.loading-bar__inner {\r\n  border: none;\r\n  height: 20px;\r\n  background-color: #fff;\r\n  width: 0;\r\n}\r\n\r\n#loading-screen {\r\n  background-color: black;\r\n  color: white;\r\n  text-shadow: 1px 1px white;\r\n  font-size: 32px;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  text-align: center;\r\n\r\n  transition: 0.3;\r\n  height: 0;\r\n  width: 0;\r\n  opacity: 0;\r\n  z-index: 999;\r\n}\r\n\r\n.loading-screen__text {\r\n  font-size: 32px;\r\n  position: absolute;\r\n  top: 100px;\r\n  left: 50%;\r\n  transform: translate(-50%, 0);\r\n}\r\n\r\n.show {\r\n  z-index: -999;\r\n  opacity: 1 !important;\r\n  height: 100% !important;\r\n  width: 100% !important;\r\n}\r\n\r\n#load-image {\r\n  z-index: 998;\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n",""]),t.Z=i},36598:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#score-info {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  background-color: black;\r\n  color: white;\r\n}\r\n\r\n#fps-count {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  background-color: black;\r\n  color: white;\r\n}\r\n\r\n#lap-time {\r\n  position: absolute;\r\n  bottom: 0;\r\n  right: 0;\r\n  background-color: black;\r\n  color: white;\r\n}\r\n\r\n#best-lap-time {\r\n  position: absolute;\r\n  bottom: 20px;\r\n  right: 0;\r\n  background-color: black;\r\n  color: white;\r\n}\r\n\r\n#important-info {\r\n  color: black;\r\n  text-shadow: 1px 1px white;\r\n  font-size: 64px;\r\n  position: absolute;\r\n\r\n  left: 1%;\r\n  right: 1%;\r\n  top: 200px;\r\n  text-align: center;\r\n}\r\n\r\n.game-text {\r\n  color: black;\r\n  text-shadow: 1px 1px white;\r\n  font-size: 16px;\r\n  font-family: monospace;\r\n}\r\n\r\n#totalTime {\r\n  position: absolute;\r\n  top: 25px;\r\n  left: 50%;\r\n  transform: translate(-50%, 0);\r\n  font-family: monospace;\r\n  font-size: 64px;\r\n  text-shadow: 1px 1px white;\r\n  background-color: white;\r\n  opacity: 0.9;\r\n  z-index: 9;\r\n}\r\n\r\n@media only screen and (max-width: 1000px) {\r\n  #totalTime {\r\n    top: 5px;\r\n    font-size: 24px;\r\n  }\r\n}\r\n",""]),t.Z=i},32508:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'#controller-canvas {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n\r\n#controller-settings-modal {\r\n  /* width: 50%; */\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background-color: "#eeebdf";\r\n  border: "2px solid #000";\r\n  padding: 10;\r\n}\r\n\r\n.controller-btn {\r\n  /* width: 150px;\r\n  height: 150px;\r\n  line-height: 150px; */\r\n  color: green;\r\n  border-radius: 0;\r\n  text-align: center;\r\n  vertical-align: middle;\r\n  position: absolute;\r\n  z-index: 99;\r\n  touch-action: none;\r\n  -ms-touch-action: none;\r\n  -webkit-touch-callout: none;\r\n  /* pointer-events: none; */\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n.controller-btn__text {\r\n  touch-action: none;\r\n  -ms-touch-action: none;\r\n  -webkit-touch-callout: none;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n/* @media only screen and (max-width: 350px) {\r\n  .controller-btn {\r\n    width: 120px;\r\n    height: 120px;\r\n    line-height: 120px;\r\n  }\r\n} */\r\n\r\n#orientation-info {\r\n  width: 100px;\r\n  height: 100px;\r\n  color: black;\r\n  position: absolute;\r\n}\r\n\r\n#more-speed-info {\r\n  width: 100px;\r\n  height: 100px;\r\n  color: black;\r\n  position: absolute;\r\n  font-size: 32px;\r\n}\r\n\r\n#orientation-info,\r\n#more-speed-info,\r\n.controller-btn {\r\n  -webkit-touch-callout: none;\r\n  -webkit-user-select: none;\r\n  -khtml-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n.hide {\r\n  display: none;\r\n}\r\n',""]),t.Z=i},88756:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"html,\r\nbody {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-family: Arial, Helvetica, sans-serif;\r\n}\r\n\r\n/* \r\n.container {\r\n  background-color: #dbb165;\r\n  text-align: center;\r\n  padding: 15px;\r\n} */\r\n\r\n.center {\r\n  margin: auto;\r\n  text-align: center;\r\n}\r\n\r\n.italics {\r\n  text-decoration: wavy;\r\n}\r\n\r\n.large-input {\r\n  height: 25px;\r\n  width: 150px;\r\n  margin-bottom: 25px;\r\n  display: inline-block;\r\n}\r\n\r\n#waiting-room {\r\n  display: none;\r\n}\r\n\r\n.player-name:nth-child(odd) {\r\n  background-color: #b0e4b0;\r\n}\r\n\r\n.player-name {\r\n  padding: 15px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n#player-list {\r\n  padding: 15px;\r\n  margin: 15px;\r\n}\r\n\r\n.team-select-container {\r\n  padding-top: 15px;\r\n  padding-left: 15px;\r\n}\r\n\r\n.player-name-span {\r\n}\r\n\r\n.team-select-radio-button {\r\n  padding-right: 15px;\r\n}\r\n\r\n.image-logo {\r\n  width: 150px;\r\n  height: auto;\r\n  margin: auto;\r\n  display: block;\r\n}\r\n\r\n.info-image {\r\n  width: 400px;\r\n  height: auto;\r\n  margin: auto;\r\n  display: block;\r\n}\r\n\r\n.info-image-small {\r\n  width: 200px;\r\n  height: auto;\r\n  margin: auto;\r\n  display: block;\r\n}\r\n",""]),t.Z=i},39947:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".vehicle-input {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  text-shadow: 1px 0px rgb(212, 218, 161);\r\n}\r\n",""]),t.Z=i},48662:function(e,t,n){"use strict";var r=n(23645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"",""]),t.Z=i},23645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},11227:function(e,t,n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(82447)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},82447:function(e,t,n){e.exports=function(e){function t(e){let n,i,o,s=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(57824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},65987:function(e){"use strict";var t={single_source_shortest_paths:function(e,n,r){var i={},o={};o[n]=0;var s,a,l,c,u,d,h,f=t.PriorityQueue.make();for(f.push(n,0);!f.empty();)for(l in a=(s=f.pop()).value,c=s.cost,u=e[a]||{})u.hasOwnProperty(l)&&(d=c+u[l],h=o[l],(void 0===o[l]||h>d)&&(o[l]=d,f.push(l,d),i[l]=a));if(void 0!==r&&void 0===o[r]){var p=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(p)}return i},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,n,r){var i=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(e){var n,r=t.PriorityQueue,i={};for(n in e=e||{},r)r.hasOwnProperty(n)&&(i[n]=r[n]);return i.queue=[],i.sorter=e.sorter||r.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},96515:function(e,t,n){"use strict";n.r(t),n.d(t,{DotScreenShader:function(){return hi},EffectComposer:function(){return ai},ExtendedGroup:function(){return rr.k},ExtendedMesh:function(){return Cn.f},ExtendedObject3D:function(){return nr.r},FLAT:function(){return i},FirstPersonControls:function(){return Kr},GlitchPass:function(){return di},JoyStick:function(){return qr},PhysicsLoader:function(){return er.G},PointerDrag:function(){return Jr},PointerLock:function(){return Xr},Project:function(){return tr},RenderPass:function(){return ci},Scene3D:function(){return Jn},ShaderPass:function(){return ii},THREE:function(){return o},ThirdPersonControls:function(){return Yr},Types:function(){return $r}});var r={};n.r(r),n.d(r,{AsyncCompress:function(){return Qe},AsyncDecompress:function(){return mt},AsyncDeflate:function(){return Ge},AsyncGunzip:function(){return rt},AsyncGzip:function(){return Qe},AsyncInflate:function(){return Ye},AsyncUnzipInflate:function(){return Ut},AsyncUnzlib:function(){return dt},AsyncZipDeflate:function(){return Dt},AsyncZlib:function(){return at},Compress:function(){return Je},DecodeUTF8:function(){return St},Decompress:function(){return pt},Deflate:function(){return He},EncodeUTF8:function(){return Et},Gunzip:function(){return nt},Gzip:function(){return Je},Inflate:function(){return qe},Unzip:function(){return jt},UnzipInflate:function(){return zt},UnzipPassThrough:function(){return Vt},Unzlib:function(){return ut},Zip:function(){return Ft},ZipDeflate:function(){return Nt},ZipPassThrough:function(){return Ot},Zlib:function(){return st},compress:function(){return et},compressSync:function(){return tt},decompress:function(){return gt},decompressSync:function(){return vt},deflate:function(){return We},deflateSync:function(){return $e},gunzip:function(){return it},gunzipSync:function(){return ot},gzip:function(){return et},gzipSync:function(){return tt},inflate:function(){return Ke},inflateSync:function(){return Xe},strFromU8:function(){return Ct},strToU8:function(){return Tt},unzip:function(){return Ht},unzipSync:function(){return Gt},unzlib:function(){return ht},unzlibSync:function(){return ft},zip:function(){return Bt},zipSync:function(){return Zt},zlib:function(){return lt},zlibSync:function(){return ct}});var i={};n.r(i),n.d(i,{ActionSprite:function(){return Ar},Button:function(){return Rr},DrawSprite:function(){return Or},DrawTexture:function(){return Lr},SimpleSprite:function(){return Pr},SpriteSheet:function(){return Ir},TextSprite:function(){return Vr},TextTexture:function(){return Zr},TextureAtlas:function(){return Ur},destroy:function(){return Tr},getParent:function(){return Er},init:function(){return Nr},initEvents:function(){return Dr},physics:function(){return Wr},postRender:function(){return Br},preRender:function(){return Fr},setSize:function(){return Sr},updateEvents:function(){return kr}});var o=n(2212);const s=new o.Matrix4,a=new o.Object3D,l=new o.Vector3;class c extends o.EventDispatcher{constructor(){super(),this.uuid=o.MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){const t=(new o.Matrix3).getNormalMatrix(e);for(let t=0,n=this.vertices.length;t<n;t++){this.vertices[t].applyMatrix4(e)}for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];n.normal.applyMatrix3(t).normalize();for(let e=0,r=n.vertexNormals.length;e<r;e++)n.vertexNormals[e].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return s.makeRotationX(e),this.applyMatrix4(s),this}rotateY(e){return s.makeRotationY(e),this.applyMatrix4(s),this}rotateZ(e){return s.makeRotationZ(e),this.applyMatrix4(s),this}translate(e,t,n){return s.makeTranslation(e,t,n),this.applyMatrix4(s),this}scale(e,t,n){return s.makeScale(e,t,n),this.applyMatrix4(s),this}lookAt(e){return a.lookAt(e),a.updateMatrix(),this.applyMatrix4(a.matrix),this}fromBufferGeometry(e){const t=this,n=null!==e.index?e.index:void 0,r=e.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const i=r.position,s=r.normal,a=r.color,l=r.uv,c=r.uv2;void 0!==c&&(this.faceVertexUvs[1]=[]);for(let e=0;e<i.count;e++)t.vertices.push((new o.Vector3).fromBufferAttribute(i,e)),void 0!==a&&t.colors.push((new o.Color).fromBufferAttribute(a,e));function u(e,n,r,i){const u=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],h=void 0===s?[]:[(new o.Vector3).fromBufferAttribute(s,e),(new o.Vector3).fromBufferAttribute(s,n),(new o.Vector3).fromBufferAttribute(s,r)],f=new d(e,n,r,h,u,i);t.faces.push(f),void 0!==l&&t.faceVertexUvs[0].push([(new o.Vector2).fromBufferAttribute(l,e),(new o.Vector2).fromBufferAttribute(l,n),(new o.Vector2).fromBufferAttribute(l,r)]),void 0!==c&&t.faceVertexUvs[1].push([(new o.Vector2).fromBufferAttribute(c,e),(new o.Vector2).fromBufferAttribute(c,n),(new o.Vector2).fromBufferAttribute(c,r)])}const h=e.groups;if(h.length>0)for(let e=0;e<h.length;e++){const t=h[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)void 0!==n?u(n.getX(e),n.getX(e+1),n.getX(e+2),t.materialIndex):u(e,e+1,e+2,t.materialIndex)}else if(void 0!==n)for(let e=0;e<n.count;e+=3)u(n.getX(e),n.getX(e+1),n.getX(e+2));else for(let e=0;e<i.count;e+=3)u(e,e+1,e+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(l).negate(),this.translate(l.x,l.y,l.z),this}normalize(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new o.Matrix4;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this}computeFaceNormals(){const e=new o.Vector3,t=new o.Vector3;for(let n=0,r=this.faces.length;n<r;n++){const r=this.faces[n],i=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,o),t.subVectors(i,o),e.cross(t),e.normalize(),r.normal.copy(e)}}computeVertexNormals(e=!0){const t=new Array(this.vertices.length);for(let e=0,n=this.vertices.length;e<n;e++)t[e]=new o.Vector3;if(e){const e=new o.Vector3,n=new o.Vector3;for(let r=0,i=this.faces.length;r<i;r++){const i=this.faces[r],o=this.vertices[i.a],s=this.vertices[i.b],a=this.vertices[i.c];e.subVectors(a,s),n.subVectors(o,s),e.cross(n),t[i.a].add(e),t[i.b].add(e),t[i.c].add(e)}}else{this.computeFaceNormals();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let e=0,n=this.vertices.length;e<n;e++)t[e].normalize();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e],r=n.vertexNormals;3===r.length?(r[0].copy(t[n.a]),r[1].copy(t[n.b]),r[2].copy(t[n.c])):(r[0]=t[n.a].clone(),r[1]=t[n.b].clone(),r[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],n=t.vertexNormals;3===n.length?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone(),t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(let e=0,n=t.vertexNormals.length;e<n;e++)t.__originalVertexNormals[e]?t.__originalVertexNormals[e].copy(t.vertexNormals[e]):t.__originalVertexNormals[e]=t.vertexNormals[e].clone()}const e=new c;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const e=this.morphNormals[t].faceNormals,n=this.morphNormals[t].vertexNormals;for(let t=0,r=this.faces.length;t<r;t++){const t=new o.Vector3,r={a:new o.Vector3,b:new o.Vector3,c:new o.Vector3};e.push(t),n.push(r)}}const n=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],r=n.faceNormals[e],i=n.vertexNormals[e];r.copy(t.normal),i.a.copy(t.vertexNormals[0]),i.b.copy(t.vertexNormals[1]),i.c.copy(t.vertexNormals[2])}}for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals}}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new o.Box3),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,n=0){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let r;const i=this.vertices.length,s=this.vertices,a=e.vertices,l=this.faces,c=e.faces,u=this.colors,h=e.colors;void 0!==t&&(r=(new o.Matrix3).getNormalMatrix(t));for(let e=0,n=a.length;e<n;e++){const n=a[e].clone();void 0!==t&&n.applyMatrix4(t),s.push(n)}for(let e=0,t=h.length;e<t;e++)u.push(h[e].clone());for(let e=0,t=c.length;e<t;e++){const t=c[e];let o,s;const a=t.vertexNormals,u=t.vertexColors,h=new d(t.a+i,t.b+i,t.c+i);h.normal.copy(t.normal),void 0!==r&&h.normal.applyMatrix3(r).normalize();for(let e=0,t=a.length;e<t;e++)o=a[e].clone(),void 0!==r&&o.applyMatrix3(r).normalize(),h.vertexNormals.push(o);h.color.copy(t.color);for(let e=0,t=u.length;e<t;e++)s=u[e],h.vertexColors.push(s.clone());h.materialIndex=t.materialIndex+n,l.push(h)}for(let t=0,n=e.faceVertexUvs.length;t<n;t++){const n=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,r=n.length;e<r;e++){const r=n[e],i=[];for(let e=0,t=r.length;e<t;e++)i.push(r[e].clone());this.faceVertexUvs[t].push(i)}}}mergeMesh(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)}mergeVertices(e=4){const t={},n=[],r=[],i=Math.pow(10,e);for(let e=0,o=this.vertices.length;e<o;e++){const o=this.vertices[e],s=Math.round(o.x*i)+"_"+Math.round(o.y*i)+"_"+Math.round(o.z*i);void 0===t[s]?(t[s]=e,n.push(this.vertices[e]),r[e]=n.length-1):r[e]=r[t[s]]}const o=[];for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.a=r[t.a],t.b=r[t.b],t.c=r[t.c];const n=[t.a,t.b,t.c];for(let t=0;t<3;t++)if(n[t]===n[(t+1)%3]){o.push(e);break}}for(let e=o.length-1;e>=0;e--){const t=o[e];this.faces.splice(t,1);for(let e=0,n=this.faceVertexUvs.length;e<n;e++)this.faceVertexUvs[e].splice(t,1)}const s=this.vertices.length-n.length;return this.vertices=n,s}setFromPoints(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){const n=e[t];this.vertices.push(new o.Vector3(n.x,n.y,n.z||0))}return this}sortFacesByMaterialIndex(){const e=this.faces,t=e.length;for(let n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));const n=this.faceVertexUvs[0],r=this.faceVertexUvs[1];let i,o;n&&n.length===t&&(i=[]),r&&r.length===t&&(o=[]);for(let s=0;s<t;s++){const t=e[s]._id;i&&i.push(n[t]),o&&o.push(r[t])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)}toJSON(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}const t=[];for(let e=0;e<this.vertices.length;e++){const n=this.vertices[e];t.push(n.x,n.y,n.z)}const n=[],r=[],i={},o=[],s={},a=[],l={};for(let e=0;e<this.faces.length;e++){const t=this.faces[e],r=!0,i=!1,o=void 0!==this.faceVertexUvs[0][e],s=t.normal.length()>0,a=t.vertexNormals.length>0,l=1!==t.color.r||1!==t.color.g||1!==t.color.b,f=t.vertexColors.length>0;let p=0;if(p=c(p,0,0),p=c(p,1,r),p=c(p,2,i),p=c(p,3,o),p=c(p,4,s),p=c(p,5,a),p=c(p,6,l),p=c(p,7,f),n.push(p),n.push(t.a,t.b,t.c),n.push(t.materialIndex),o){const t=this.faceVertexUvs[0][e];n.push(h(t[0]),h(t[1]),h(t[2]))}if(s&&n.push(u(t.normal)),a){const e=t.vertexNormals;n.push(u(e[0]),u(e[1]),u(e[2]))}if(l&&n.push(d(t.color)),f){const e=t.vertexColors;n.push(d(e[0]),d(e[1]),d(e[2]))}}function c(e,t,n){return n?e|1<<t:e&~(1<<t)}function u(e){const t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==i[t]||(i[t]=r.length/3,r.push(e.x,e.y,e.z)),i[t]}function d(e){const t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==s[t]||(s[t]=o.length,o.push(e.getHex())),s[t]}function h(e){const t=e.x.toString()+e.y.toString();return void 0!==l[t]||(l[t]=a.length/2,a.push(e.x,e.y)),l[t]}return e.data={},e.data.vertices=t,e.data.normals=r,o.length>0&&(e.data.colors=o),a.length>0&&(e.data.uvs=[a]),e.data.faces=n,e}clone(){return(new c).copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let e=0,n=t.length;e<n;e++)this.vertices.push(t[e].clone());const n=e.colors;for(let e=0,t=n.length;e<t;e++)this.colors.push(n[e].clone());const r=e.faces;for(let e=0,t=r.length;e<t;e++)this.faces.push(r[e].clone());for(let t=0,n=e.faceVertexUvs.length;t<n;t++){const n=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,r=n.length;e<r;e++){const r=n[e],i=[];for(let e=0,t=r.length;e<t;e++){const t=r[e];i.push(t.clone())}this.faceVertexUvs[t].push(i)}}const i=e.morphTargets;for(let e=0,t=i.length;e<t;e++){const t={};if(t.name=i[e].name,void 0!==i[e].vertices){t.vertices=[];for(let n=0,r=i[e].vertices.length;n<r;n++)t.vertices.push(i[e].vertices[n].clone())}if(void 0!==i[e].normals){t.normals=[];for(let n=0,r=i[e].normals.length;n<r;n++)t.normals.push(i[e].normals[n].clone())}this.morphTargets.push(t)}const o=e.morphNormals;for(let e=0,t=o.length;e<t;e++){const t={};if(void 0!==o[e].vertexNormals){t.vertexNormals=[];for(let n=0,r=o[e].vertexNormals.length;n<r;n++){const r=o[e].vertexNormals[n],i={};i.a=r.a.clone(),i.b=r.b.clone(),i.c=r.c.clone(),t.vertexNormals.push(i)}}if(void 0!==o[e].faceNormals){t.faceNormals=[];for(let n=0,r=o[e].faceNormals.length;n<r;n++)t.faceNormals.push(o[e].faceNormals[n].clone())}this.morphNormals.push(t)}const s=e.skinWeights;for(let e=0,t=s.length;e<t;e++)this.skinWeights.push(s[e].clone());const a=e.skinIndices;for(let e=0,t=a.length;e<t;e++)this.skinIndices.push(a[e].clone());const l=e.lineDistances;for(let e=0,t=l.length;e<t;e++)this.lineDistances.push(l[e]);const c=e.boundingBox;null!==c&&(this.boundingBox=c.clone());const u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){const e=(new u).fromGeometry(this),t=new o.BufferGeometry,n=new Float32Array(3*e.vertices.length);if(t.setAttribute("position",new o.BufferAttribute(n,3).copyVector3sArray(e.vertices)),e.normals.length>0){const n=new Float32Array(3*e.normals.length);t.setAttribute("normal",new o.BufferAttribute(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const n=new Float32Array(3*e.colors.length);t.setAttribute("color",new o.BufferAttribute(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const n=new Float32Array(2*e.uvs.length);t.setAttribute("uv",new o.BufferAttribute(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const n=new Float32Array(2*e.uvs2.length);t.setAttribute("uv2",new o.BufferAttribute(n,2).copyVector2sArray(e.uvs2))}t.groups=e.groups;for(const n in e.morphTargets){const r=[],i=e.morphTargets[n];for(let e=0,t=i.length;e<t;e++){const t=i[e],n=new o.Float32BufferAttribute(3*t.data.length,3);n.name=t.name,r.push(n.copyVector3sArray(t.data))}t.morphAttributes[n]=r}if(e.skinIndices.length>0){const n=new o.Float32BufferAttribute(4*e.skinIndices.length,4);t.setAttribute("skinIndex",n.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const n=new o.Float32BufferAttribute(4*e.skinWeights.length,4);t.setAttribute("skinWeight",n.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(t.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new o.BufferGeometry;const n=e.geometry;if(e.isPoints||e.isLine){const e=new o.Float32BufferAttribute(3*n.vertices.length,3),r=new o.Float32BufferAttribute(3*n.colors.length,3);if(t.setAttribute("position",e.copyVector3sArray(n.vertices)),t.setAttribute("color",r.copyColorsArray(n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){const e=new o.Float32BufferAttribute(n.lineDistances.length,1);t.setAttribute("lineDistance",e.copyArray(n.lineDistances))}null!==n.boundingSphere&&(t.boundingSphere=n.boundingSphere.clone()),null!==n.boundingBox&&(t.boundingBox=n.boundingBox.clone())}else e.isMesh&&(t=n.toBufferGeometry());return t}}c.prototype.isGeometry=!0;class u{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const t=[];let n,r,i;const o=e.faces;for(r=0;r<o.length;r++){const e=o[r];e.materialIndex!==i&&(i=e.materialIndex,void 0!==n&&(n.count=3*r-n.start,t.push(n)),n={start:3*r,materialIndex:i})}void 0!==n&&(n.count=3*r-n.start,t.push(n)),this.groups=t}fromGeometry(e){const t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,a=e.morphTargets,l=a.length;let c;if(l>0){c=[];for(let e=0;e<l;e++)c[e]={name:a[e].name,data:[]};this.morphTargets.position=c}const u=e.morphNormals,d=u.length;let h;if(d>0){h=[];for(let e=0;e<d;e++)h[e]={name:u[e].name,data:[]};this.morphTargets.normal=h}const f=e.skinIndices,p=e.skinWeights,m=f.length===n.length,g=p.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let e=0;e<t.length;e++){const v=t[e];this.vertices.push(n[v.a],n[v.b],n[v.c]);const y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{const e=v.normal;this.normals.push(e,e,e)}const b=v.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{const e=v.color;this.colors.push(e,e,e)}if(!0===i){const t=r[0][e];void 0!==t?this.uvs.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",e),this.uvs.push(new o.Vector2,new o.Vector2,new o.Vector2))}if(!0===s){const t=r[1][e];void 0!==t?this.uvs2.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",e),this.uvs2.push(new o.Vector2,new o.Vector2,new o.Vector2))}for(let e=0;e<l;e++){const t=a[e].vertices;c[e].data.push(t[v.a],t[v.b],t[v.c])}for(let t=0;t<d;t++){const n=u[t].vertexNormals[e];h[t].data.push(n.a,n.b,n.c)}m&&this.skinIndices.push(f[v.a],f[v.b],f[v.c]),g&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}class d{constructor(e,t,n,r,i,s=0){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new o.Vector3,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new o.Color,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=s}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}class h{constructor(e,t,n,r,i,s=0){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new o.Vector3,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new o.Color,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=s}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}class f extends o.Loader{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,n,r){const i=this,s=new o.FileLoader(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(n))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this;function n(e,t,n,i,o,s,a,l){if(0==t||0==n)return void e.lineTo(l.x,l.y);i=i*Math.PI/180,t=Math.abs(t),n=Math.abs(n);const c=(a.x-l.x)/2,u=(a.y-l.y)/2,d=Math.cos(i)*c+Math.sin(i)*u,h=-Math.sin(i)*c+Math.cos(i)*u;let f=t*t,p=n*n;const m=d*d,g=h*h,v=m/f+g/p;if(v>1){const e=Math.sqrt(v);f=(t*=e)*t,p=(n*=e)*n}const y=f*g+p*m,b=(f*p-y)/y;let w=Math.sqrt(Math.max(0,b));o===s&&(w=-w);const x=w*t*h/n,_=-w*n*d/t,S=Math.cos(i)*x-Math.sin(i)*_+(a.x+l.x)/2,E=Math.sin(i)*x+Math.cos(i)*_+(a.y+l.y)/2,T=r(1,0,(d-x)/t,(h-_)/n),C=r((d-x)/t,(h-_)/n,(-d-x)/t,(-h-_)/n)%(2*Math.PI);e.currentPath.absellipse(S,E,t,n,T,T+C,0===s,i)}function r(e,t,n,r){const i=e*n+t*r,o=Math.sqrt(e*e+t*t)*Math.sqrt(n*n+r*r);let s=Math.acos(Math.max(-1,Math.min(1,i/o)));return e*r-t*n<0&&(s=-s),s}function i(e,t){t=Object.assign({},t);let n={};if(e.hasAttribute("class")){const t=e.getAttribute("class").split(/\s/).filter(Boolean).map((e=>e.trim()));for(let e=0;e<t.length;e++)n=Object.assign(n,p["."+t[e]])}function r(r,i,o){void 0===o&&(o=function(e){return e.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),e}),e.hasAttribute(r)&&(t[i]=o(e.getAttribute(r))),n[r]&&(t[i]=o(n[r])),e.style&&""!==e.style[r]&&(t[i]=o(e.style[r]))}function i(e){return Math.max(0,Math.min(1,u(e)))}function o(e){return Math.max(0,u(e))}return e.hasAttribute("id")&&(n=Object.assign(n,p["#"+e.getAttribute("id")])),r("fill","fill"),r("fill-opacity","fillOpacity",i),r("fill-rule","fillRule"),r("opacity","opacity",i),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",i),r("stroke-width","strokeWidth",o),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",o),r("visibility","visibility"),t}function s(e,t){return e-(t-e)}function a(e,t,n){if("string"!=typeof e)throw new TypeError("Invalid input: "+typeof e);const r={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let i=0,o=!0,s="",a="";const l=[];function c(e,t,n){const r=new SyntaxError('Unexpected character "'+e+'" at index '+t+".");throw r.partial=n,r}function u(){""!==s&&(""===a?l.push(Number(s)):l.push(Number(s)*Math.pow(10,Number(a)))),s="",a=""}let d;const h=e.length;for(let f=0;f<h;f++)if(d=e[f],Array.isArray(t)&&t.includes(l.length%n)&&r.FLAGS.test(d))i=1,s=d,u();else{if(0===i){if(r.WHITESPACE.test(d))continue;if(r.DIGIT.test(d)||r.SIGN.test(d)){i=1,s=d;continue}if(r.POINT.test(d)){i=2,s=d;continue}r.COMMA.test(d)&&(o&&c(d,f,l),o=!0)}if(1===i){if(r.DIGIT.test(d)){s+=d;continue}if(r.POINT.test(d)){s+=d,i=2;continue}if(r.EXP.test(d)){i=3;continue}r.SIGN.test(d)&&1===s.length&&r.SIGN.test(s[0])&&c(d,f,l)}if(2===i){if(r.DIGIT.test(d)){s+=d;continue}if(r.EXP.test(d)){i=3;continue}r.POINT.test(d)&&"."===s[s.length-1]&&c(d,f,l)}if(3===i){if(r.DIGIT.test(d)){a+=d;continue}if(r.SIGN.test(d)){if(""===a){a+=d;continue}1===a.length&&r.SIGN.test(a)&&c(d,f,l)}}r.WHITESPACE.test(d)?(u(),i=0,o=!1):r.COMMA.test(d)?(u(),i=0,o=!0):r.SIGN.test(d)?(u(),i=1,s=d):r.POINT.test(d)?(u(),i=2,s=d):c(d,f,l)}return u(),l}const l=["mm","cm","in","pt","pc","px"],c={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function u(e){let n,r="px";if("string"==typeof e||e instanceof String)for(let t=0,n=l.length;t<n;t++){const n=l[t];if(e.endsWith(n)){r=n,e=e.substring(0,e.length-n.length);break}}return"px"===r&&"px"!==t.defaultUnit?n=c.in[t.defaultUnit]/t.defaultDPI:(n=c[r][t.defaultUnit],n<0&&(n=c[r].in*t.defaultDPI)),n*parseFloat(e)}function d(e){const t=e.elements;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function h(e){const t=e.elements;return Math.sqrt(t[3]*t[3]+t[4]*t[4])}const f=[],p={},m=[],g=new o.Matrix3,v=new o.Matrix3,y=new o.Matrix3,b=new o.Matrix3,w=new o.Vector2,x=new o.Vector3,_=new o.Matrix3,S=(new DOMParser).parseFromString(e,"image/svg+xml");!function e(t,r){if(1!==t.nodeType)return;const l=function(e){if(!(e.hasAttribute("transform")||"use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))))return null;const t=function(e){const t=new o.Matrix3,n=g;if("use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))){const n=u(e.getAttribute("x")),r=u(e.getAttribute("y"));t.translate(n,r)}if(e.hasAttribute("transform")){const r=e.getAttribute("transform").split(")");for(let e=r.length-1;e>=0;e--){const i=r[e].trim();if(""===i)continue;const o=i.indexOf("("),s=i.length;if(o>0&&o<s){const e=i.substr(0,o),t=a(i.substr(o+1,s-o-1));switch(n.identity(),e){case"translate":if(t.length>=1){const e=t[0];let r=e;t.length>=2&&(r=t[1]),n.translate(e,r)}break;case"rotate":if(t.length>=1){let e=0,r=0,i=0;e=-t[0]*Math.PI/180,t.length>=3&&(r=t[1],i=t[2]),v.identity().translate(-r,-i),y.identity().rotate(e),b.multiplyMatrices(y,v),v.identity().translate(r,i),n.multiplyMatrices(v,b)}break;case"scale":if(t.length>=1){const e=t[0];let r=e;t.length>=2&&(r=t[1]),n.scale(e,r)}break;case"skewX":1===t.length&&n.set(1,Math.tan(t[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===t.length&&n.set(1,0,0,Math.tan(t[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===t.length&&n.set(t[0],t[2],t[4],t[1],t[3],t[5],0,0,1)}}t.premultiply(n)}}return t}(e);m.length>0&&t.premultiply(m[m.length-1]);return _.copy(t),m.push(t),t}(t);let c=!0,S=null;switch(t.nodeName){case"svg":break;case"style":!function(e){if(!e.sheet||!e.sheet.cssRules||!e.sheet.cssRules.length)return;for(let t=0;t<e.sheet.cssRules.length;t++){const n=e.sheet.cssRules[t];if(1!==n.type)continue;const r=n.selectorText.split(/,/gm).filter(Boolean).map((e=>e.trim()));for(let e=0;e<r.length;e++)p[r[e]]=Object.assign(p[r[e]]||{},n.style)}}(t);break;case"g":r=i(t,r);break;case"path":r=i(t,r),t.hasAttribute("d")&&(S=function(e){const t=new o.ShapePath,r=new o.Vector2,i=new o.Vector2,l=new o.Vector2;let c=!0,u=!1;const d=e.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let e=0,o=d.length;e<o;e++){const o=d[e],h=o.charAt(0),f=o.substr(1).trim();let p;switch(!0===c&&(u=!0,c=!1),h){case"M":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x=p[e+0],r.y=p[e+1],i.x=r.x,i.y=r.y,0===e?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y),0===e&&l.copy(r);break;case"H":p=a(f);for(let e=0,n=p.length;e<n;e++)r.x=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&l.copy(r);break;case"V":p=a(f);for(let e=0,n=p.length;e<n;e++)r.y=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&l.copy(r);break;case"L":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x=p[e+0],r.y=p[e+1],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&l.copy(r);break;case"C":p=a(f);for(let e=0,n=p.length;e<n;e+=6)t.bezierCurveTo(p[e+0],p[e+1],p[e+2],p[e+3],p[e+4],p[e+5]),i.x=p[e+2],i.y=p[e+3],r.x=p[e+4],r.y=p[e+5],0===e&&!0===u&&l.copy(r);break;case"S":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.bezierCurveTo(s(r.x,i.x),s(r.y,i.y),p[e+0],p[e+1],p[e+2],p[e+3]),i.x=p[e+0],i.y=p[e+1],r.x=p[e+2],r.y=p[e+3],0===e&&!0===u&&l.copy(r);break;case"Q":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.quadraticCurveTo(p[e+0],p[e+1],p[e+2],p[e+3]),i.x=p[e+0],i.y=p[e+1],r.x=p[e+2],r.y=p[e+3],0===e&&!0===u&&l.copy(r);break;case"T":p=a(f);for(let e=0,n=p.length;e<n;e+=2){const n=s(r.x,i.x),o=s(r.y,i.y);t.quadraticCurveTo(n,o,p[e+0],p[e+1]),i.x=n,i.y=o,r.x=p[e+0],r.y=p[e+1],0===e&&!0===u&&l.copy(r)}break;case"A":p=a(f,[3,4],7);for(let e=0,o=p.length;e<o;e+=7){if(p[e+5]==r.x&&p[e+6]==r.y)continue;const o=r.clone();r.x=p[e+5],r.y=p[e+6],i.x=r.x,i.y=r.y,n(t,p[e],p[e+1],p[e+2],p[e+3],p[e+4],o,r),0===e&&!0===u&&l.copy(r)}break;case"m":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x+=p[e+0],r.y+=p[e+1],i.x=r.x,i.y=r.y,0===e?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y),0===e&&l.copy(r);break;case"h":p=a(f);for(let e=0,n=p.length;e<n;e++)r.x+=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&l.copy(r);break;case"v":p=a(f);for(let e=0,n=p.length;e<n;e++)r.y+=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&l.copy(r);break;case"l":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x+=p[e+0],r.y+=p[e+1],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===u&&l.copy(r);break;case"c":p=a(f);for(let e=0,n=p.length;e<n;e+=6)t.bezierCurveTo(r.x+p[e+0],r.y+p[e+1],r.x+p[e+2],r.y+p[e+3],r.x+p[e+4],r.y+p[e+5]),i.x=r.x+p[e+2],i.y=r.y+p[e+3],r.x+=p[e+4],r.y+=p[e+5],0===e&&!0===u&&l.copy(r);break;case"s":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.bezierCurveTo(s(r.x,i.x),s(r.y,i.y),r.x+p[e+0],r.y+p[e+1],r.x+p[e+2],r.y+p[e+3]),i.x=r.x+p[e+0],i.y=r.y+p[e+1],r.x+=p[e+2],r.y+=p[e+3],0===e&&!0===u&&l.copy(r);break;case"q":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.quadraticCurveTo(r.x+p[e+0],r.y+p[e+1],r.x+p[e+2],r.y+p[e+3]),i.x=r.x+p[e+0],i.y=r.y+p[e+1],r.x+=p[e+2],r.y+=p[e+3],0===e&&!0===u&&l.copy(r);break;case"t":p=a(f);for(let e=0,n=p.length;e<n;e+=2){const n=s(r.x,i.x),o=s(r.y,i.y);t.quadraticCurveTo(n,o,r.x+p[e+0],r.y+p[e+1]),i.x=n,i.y=o,r.x=r.x+p[e+0],r.y=r.y+p[e+1],0===e&&!0===u&&l.copy(r)}break;case"a":p=a(f,[3,4],7);for(let e=0,o=p.length;e<o;e+=7){if(0==p[e+5]&&0==p[e+6])continue;const o=r.clone();r.x+=p[e+5],r.y+=p[e+6],i.x=r.x,i.y=r.y,n(t,p[e],p[e+1],p[e+2],p[e+3],p[e+4],o,r),0===e&&!0===u&&l.copy(r)}break;case"Z":case"z":t.currentPath.autoClose=!0,t.currentPath.curves.length>0&&(r.copy(l),t.currentPath.currentPoint.copy(r),c=!0);break;default:console.warn(o)}u=!1}return t}(t));break;case"rect":r=i(t,r),S=function(e){const t=u(e.getAttribute("x")||0),n=u(e.getAttribute("y")||0),r=u(e.getAttribute("rx")||e.getAttribute("ry")||0),i=u(e.getAttribute("ry")||e.getAttribute("rx")||0),s=u(e.getAttribute("width")),a=u(e.getAttribute("height")),l=.448084975506,c=new o.ShapePath;c.moveTo(t+r,n),c.lineTo(t+s-r,n),(0!==r||0!==i)&&c.bezierCurveTo(t+s-r*l,n,t+s,n+i*l,t+s,n+i);c.lineTo(t+s,n+a-i),(0!==r||0!==i)&&c.bezierCurveTo(t+s,n+a-i*l,t+s-r*l,n+a,t+s-r,n+a);c.lineTo(t+r,n+a),(0!==r||0!==i)&&c.bezierCurveTo(t+r*l,n+a,t,n+a-i*l,t,n+a-i);c.lineTo(t,n+i),(0!==r||0!==i)&&c.bezierCurveTo(t,n+i*l,t+r*l,n,t+r,n);return c}(t);break;case"polygon":r=i(t,r),S=function(e){function t(e,t,n){const o=u(t),s=u(n);0===i?r.moveTo(o,s):r.lineTo(o,s),i++}const n=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,r=new o.ShapePath;let i=0;return e.getAttribute("points").replace(n,t),r.currentPath.autoClose=!0,r}(t);break;case"polyline":r=i(t,r),S=function(e){function t(e,t,n){const o=u(t),s=u(n);0===i?r.moveTo(o,s):r.lineTo(o,s),i++}const n=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,r=new o.ShapePath;let i=0;return e.getAttribute("points").replace(n,t),r.currentPath.autoClose=!1,r}(t);break;case"circle":r=i(t,r),S=function(e){const t=u(e.getAttribute("cx")||0),n=u(e.getAttribute("cy")||0),r=u(e.getAttribute("r")||0),i=new o.Path;i.absarc(t,n,r,0,2*Math.PI);const s=new o.ShapePath;return s.subPaths.push(i),s}(t);break;case"ellipse":r=i(t,r),S=function(e){const t=u(e.getAttribute("cx")||0),n=u(e.getAttribute("cy")||0),r=u(e.getAttribute("rx")||0),i=u(e.getAttribute("ry")||0),s=new o.Path;s.absellipse(t,n,r,i,0,2*Math.PI);const a=new o.ShapePath;return a.subPaths.push(s),a}(t);break;case"line":r=i(t,r),S=function(e){const t=u(e.getAttribute("x1")||0),n=u(e.getAttribute("y1")||0),r=u(e.getAttribute("x2")||0),i=u(e.getAttribute("y2")||0),s=new o.ShapePath;return s.moveTo(t,n),s.lineTo(r,i),s.currentPath.autoClose=!1,s}(t);break;case"defs":c=!1;break;case"use":r=i(t,r);const l=t.href.baseVal.substring(1),d=t.viewportElement.getElementById(l);d?e(d,r):console.warn("SVGLoader: 'use node' references non-existent node id: "+l)}if(S&&(void 0!==r.fill&&"none"!==r.fill&&S.color.setStyle(r.fill),function(e,t){function n(e){x.set(e.x,e.y,1).applyMatrix3(t),e.set(x.x,x.y)}const r=function(e){return 0!==e.elements[1]||0!==e.elements[3]}(t),i=e.subPaths;for(let e=0,o=i.length;e<o;e++){const o=i[e].curves;for(let e=0;e<o.length;e++){const i=o[e];i.isLineCurve?(n(i.v1),n(i.v2)):i.isCubicBezierCurve?(n(i.v0),n(i.v1),n(i.v2),n(i.v3)):i.isQuadraticBezierCurve?(n(i.v0),n(i.v1),n(i.v2)):i.isEllipseCurve&&(r&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),w.set(i.aX,i.aY),n(w),i.aX=w.x,i.aY=w.y,i.xRadius*=d(t),i.yRadius*=h(t))}}}(S,_),f.push(S),S.userData={node:t,style:r}),c){const n=t.childNodes;for(let t=0;t<n.length;t++)e(n[t],r)}l&&(m.pop(),m.length>0?_.copy(m[m.length-1]):_.identity())}(S.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});return{paths:f,xml:S.documentElement}}static createShapes(e){const t=999999999,n=0,r=1,i=2,s=3,a=4,l=5,c=6,u={loc:n,t:0};function d(e,t,r,o){const s=e.x,a=t.x,l=r.x,c=o.x,d=e.y,f=t.y,p=r.y,m=o.y,g=(c-l)*(d-p)-(m-p)*(s-l),v=(m-p)*(a-s)-(c-l)*(f-d),y=g/v,b=((a-s)*(d-p)-(f-d)*(s-l))/v;if(0===v&&0!==g||y<=0||y>=1||b<0||b>1)return null;if(0===g&&0===v){for(let l=0;l<2;l++){if(h(0===l?r:o,e,t),u.loc==n){const e=0===l?r:o;return{x:e.x,y:e.y,t:u.t}}if(u.loc==i){return{x:+(s+u.t*(a-s)).toPrecision(10),y:+(d+u.t*(f-d)).toPrecision(10),t:u.t}}}return null}for(let i=0;i<2;i++)if(h(0===i?r:o,e,t),u.loc==n){const e=0===i?r:o;return{x:e.x,y:e.y,t:u.t}}return{x:+(s+y*(a-s)).toPrecision(10),y:+(d+y*(f-d)).toPrecision(10),t:y}}function h(e,t,o){const d=o.x-t.x,h=o.y-t.y,f=e.x-t.x,p=e.y-t.y,m=d*p-f*h;if(e.x===t.x&&e.y===t.y)return u.loc=n,void(u.t=0);if(e.x===o.x&&e.y===o.y)return u.loc=r,void(u.t=1);if(m<-Number.EPSILON)return void(u.loc=s);if(m>Number.EPSILON)return void(u.loc=a);if(d*f<0||h*p<0)return void(u.loc=l);if(Math.sqrt(d*d+h*h)<Math.sqrt(f*f+p*p))return void(u.loc=c);let g;g=0!==d?f/d:p/h,u.loc=i,u.t=g}function f(e,t,n){const r=new o.Vector2;t.getCenter(r);const i=[];return n.forEach((t=>{if(t.boundingBox.containsPoint(r)){const n=function(e,t){const n=[],r=[];for(let i=1;i<e.length;i++){const s=e[i-1],a=e[i];for(let e=1;e<t.length;e++){const i=d(s,a,t[e-1],t[e]);null!==i&&void 0===n.find((e=>e.t<=i.t+Number.EPSILON&&e.t>=i.t-Number.EPSILON))&&(n.push(i),r.push(new o.Vector2(i.x,i.y)))}}return r}(e,t.points);n.forEach((e=>{i.push({identifier:t.identifier,isCW:t.isCW,point:e})}))}})),i.sort(((e,t)=>e.point.x-t.point.x)),i}let p=0,m=t,g=-999999999,v=e.subPaths.map((e=>{const n=e.getPoints();let r=-999999999,i=t,s=-999999999,a=t;for(let e=0;e<n.length;e++){const t=n[e];t.y>r&&(r=t.y),t.y<i&&(i=t.y),t.x>s&&(s=t.x),t.x<a&&(a=t.x)}return g<=s&&(g=s+1),m>=a&&(m=a-1),{curves:e.curves,points:n,isCW:o.ShapeUtils.isClockWise(n),identifier:p++,boundingBox:new o.Box2(new o.Vector2(a,i),new o.Vector2(s,r))}}));v=v.filter((e=>e.points.length>1));const y=v.map((t=>function(e,t,n,r,i){null!=i&&""!==i||(i="nonzero");const s=new o.Vector2;e.boundingBox.getCenter(s);const a=f([new o.Vector2(n,s.y),new o.Vector2(r,s.y)],e.boundingBox,t);a.sort(((e,t)=>e.point.x-t.point.x));const l=[],c=[];a.forEach((t=>{t.identifier===e.identifier?l.push(t):c.push(t)}));const u=l[0].point.x,d=[];let h=0;for(;h<c.length&&c[h].point.x<u;)d.length>0&&d[d.length-1]===c[h].identifier?d.pop():d.push(c[h].identifier),h++;if(d.push(e.identifier),"evenodd"===i){const t=d.length%2==0,n=d[d.length-2];return{identifier:e.identifier,isHole:t,for:n}}if("nonzero"===i){let n=!0,r=null,i=null;for(let e=0;e<d.length;e++){const o=d[e];n?(i=t[o].isCW,n=!1,r=o):i!==t[o].isCW&&(i=t[o].isCW,n=!0)}return{identifier:e.identifier,isHole:n,for:r}}console.warn('fill-rule: "'+i+'" is currently not implemented.')}(t,v,m,g,e.userData.style.fillRule))),b=[];return v.forEach((e=>{if(!y[e.identifier].isHole){const t=new o.Shape;t.curves=e.curves;y.filter((t=>t.isHole&&t.for===e.identifier)).forEach((e=>{const n=v[e.identifier],r=new o.Path;r.curves=n.curves,t.holes.push(r)})),b.push(t)}})),b}static getStrokeStyle(e,t,n,r,i){return{strokeColor:t=void 0!==t?t:"#000",strokeWidth:e=void 0!==e?e:1,strokeLineJoin:n=void 0!==n?n:"miter",strokeLineCap:r=void 0!==r?r:"butt",strokeMiterLimit:i=void 0!==i?i:4}}static pointsToStroke(e,t,n,r){const i=[],s=[],a=[];if(0===f.pointsToStrokeWithBuffers(e,t,n,r,i,s,a))return null;const l=new o.BufferGeometry;return l.setAttribute("position",new o.Float32BufferAttribute(i,3)),l.setAttribute("normal",new o.Float32BufferAttribute(s,3)),l.setAttribute("uv",new o.Float32BufferAttribute(a,2)),l}static pointsToStrokeWithBuffers(e,t,n,r,i,s,a,l){const c=new o.Vector2,u=new o.Vector2,d=new o.Vector2,h=new o.Vector2,f=new o.Vector2,p=new o.Vector2,m=new o.Vector2,g=new o.Vector2,v=new o.Vector2,y=new o.Vector2,b=new o.Vector2,w=new o.Vector2,x=new o.Vector2,_=new o.Vector2,S=new o.Vector2,E=new o.Vector2,T=new o.Vector2;n=void 0!==n?n:12,r=void 0!==r?r:.001,l=void 0!==l?l:0,e=function(e){let t=!1;for(let n=1,i=e.length-1;n<i;n++)if(e[n].distanceTo(e[n+1])<r){t=!0;break}if(!t)return e;const n=[];n.push(e[0]);for(let t=1,i=e.length-1;t<i;t++)e[t].distanceTo(e[t+1])>=r&&n.push(e[t]);return n.push(e[e.length-1]),n}(e);const C=e.length;if(C<2)return 0;const M=e[0].equals(e[C-1]);let k,P,A=e[0];const I=t.strokeWidth/2,R=1/(C-1);let L,O,N,D,F=0,B=!1,Z=0,V=3*l,z=2*l;U(e[0],e[1],c).multiplyScalar(I),g.copy(e[0]).sub(c),v.copy(e[0]).add(c),y.copy(g),b.copy(v);for(let n=1;n<C;n++){k=e[n],P=n===C-1?M?e[1]:void 0:e[n+1];const r=c;if(U(A,k,r),d.copy(r).multiplyScalar(I),w.copy(k).sub(d),x.copy(k).add(d),L=F+R,O=!1,void 0!==P){U(k,P,u),d.copy(u).multiplyScalar(I),_.copy(k).sub(d),S.copy(k).add(d),N=!0,d.subVectors(P,A),r.dot(d)<0&&(N=!1),1===n&&(B=N),d.subVectors(P,k),d.normalize();const e=Math.abs(r.dot(d));if(0!==e){const n=I/e;d.multiplyScalar(-n),h.subVectors(k,A),f.copy(h).setLength(n).add(d),E.copy(f).negate();const r=f.length(),i=h.length();h.divideScalar(i),p.subVectors(P,k);const o=p.length();switch(p.divideScalar(o),h.dot(E)<i&&p.dot(E)<o&&(O=!0),T.copy(f).add(k),E.add(k),D=!1,O?N?(S.copy(E),x.copy(E)):(_.copy(E),w.copy(E)):G(),t.strokeLineJoin){case"bevel":W(N,O,L);break;case"round":$(N,O),N?H(k,w,_,L,0):H(k,S,x,L,1);break;default:const e=I*t.strokeMiterLimit/r;if(e<1){if("miter-clip"!==t.strokeLineJoin){W(N,O,L);break}$(N,O),N?(p.subVectors(T,w).multiplyScalar(e).add(w),m.subVectors(T,_).multiplyScalar(e).add(_),j(w,L,0),j(p,L,0),j(k,L,.5),j(k,L,.5),j(p,L,0),j(m,L,0),j(k,L,.5),j(m,L,0),j(_,L,0)):(p.subVectors(T,x).multiplyScalar(e).add(x),m.subVectors(T,S).multiplyScalar(e).add(S),j(x,L,1),j(p,L,1),j(k,L,.5),j(k,L,.5),j(p,L,1),j(m,L,1),j(k,L,.5),j(m,L,1),j(S,L,1))}else O?(N?(j(v,F,1),j(g,F,0),j(T,L,0),j(v,F,1),j(T,L,0),j(E,L,1)):(j(v,F,1),j(g,F,0),j(T,L,1),j(g,F,0),j(E,L,0),j(T,L,1)),N?_.copy(T):S.copy(T)):N?(j(w,L,0),j(T,L,0),j(k,L,.5),j(k,L,.5),j(T,L,0),j(_,L,0)):(j(x,L,1),j(T,L,1),j(k,L,.5),j(k,L,.5),j(T,L,1),j(S,L,1)),D=!0}}else G()}else G();M||n!==C-1||q(e[0],y,b,N,!0,F),F=L,A=k,g.copy(_),v.copy(S)}if(M){if(O&&i){let e=T,t=E;B!==N&&(e=E,t=T),N?(D||B)&&(t.toArray(i,0),t.toArray(i,9),D&&e.toArray(i,3)):!D&&B||(t.toArray(i,3),t.toArray(i,9),D&&e.toArray(i,0))}}else q(k,w,x,N,!1,L);return Z;function U(e,t,n){return n.subVectors(t,e),n.set(-n.y,n.x).normalize()}function j(e,t,n){i&&(i[V]=e.x,i[V+1]=e.y,i[V+2]=0,s&&(s[V]=0,s[V+1]=0,s[V+2]=1),V+=3,a&&(a[z]=t,a[z+1]=n,z+=2)),Z+=3}function H(e,t,r,i,o){c.copy(t).sub(e).normalize(),u.copy(r).sub(e).normalize();let s=Math.PI;const a=c.dot(u);Math.abs(a)<1&&(s=Math.abs(Math.acos(a))),s/=n,d.copy(t);for(let t=0,r=n-1;t<r;t++)h.copy(d).rotateAround(e,s),j(d,i,o),j(h,i,o),j(e,i,.5),d.copy(h);j(h,i,o),j(r,i,o),j(e,i,.5)}function G(){j(v,F,1),j(g,F,0),j(w,L,0),j(v,F,1),j(w,L,1),j(x,L,0)}function W(e,t,n){t?e?(j(v,F,1),j(g,F,0),j(w,L,0),j(v,F,1),j(w,L,0),j(E,L,1),j(w,n,0),j(_,n,0),j(E,n,.5)):(j(v,F,1),j(g,F,0),j(x,L,1),j(g,F,0),j(E,L,0),j(x,L,1),j(x,n,1),j(S,n,0),j(E,n,.5)):e?(j(w,n,0),j(_,n,0),j(k,n,.5)):(j(x,n,1),j(S,n,0),j(k,n,.5))}function $(e,t){t&&(e?(j(v,F,1),j(g,F,0),j(w,L,0),j(v,F,1),j(w,L,0),j(E,L,1),j(w,F,0),j(k,L,.5),j(E,L,1),j(k,L,.5),j(_,F,0),j(E,L,1)):(j(v,F,1),j(g,F,0),j(x,L,1),j(g,F,0),j(E,L,0),j(x,L,1),j(x,F,1),j(E,L,0),j(k,L,.5),j(k,L,.5),j(E,L,0),j(S,F,1)))}function q(e,n,r,o,s,a){switch(t.strokeLineCap){case"round":s?H(e,r,n,a,.5):H(e,n,r,a,.5);break;case"square":if(s)c.subVectors(n,e),u.set(c.y,-c.x),d.addVectors(c,u).add(e),h.subVectors(u,c).add(e),o?(d.toArray(i,3),h.toArray(i,0),h.toArray(i,9)):(d.toArray(i,3),d.toArray(i,9),h.toArray(i,0));else{c.subVectors(r,e),u.set(c.y,-c.x),d.addVectors(c,u).add(e),h.subVectors(u,c).add(e);const t=i.length;o?(d.toArray(i,t-3),h.toArray(i,t-6),h.toArray(i,t-12)):(d.toArray(i,t-6),h.toArray(i,t-3),h.toArray(i,t-12))}}}}}class p{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const t=[];let n,r,i;const o=e.faces;for(r=0;r<o.length;r++){const e=o[r];e.materialIndex!==i&&(i=e.materialIndex,void 0!==n&&(n.count=3*r-n.start,t.push(n)),n={start:3*r,materialIndex:i})}void 0!==n&&(n.count=3*r-n.start,t.push(n)),this.groups=t}fromGeometry(e){const t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,a=e.morphTargets,l=a.length;let c;if(l>0){c=[];for(let e=0;e<l;e++)c[e]={name:a[e].name,data:[]};this.morphTargets.position=c}const u=e.morphNormals,d=u.length;let h;if(d>0){h=[];for(let e=0;e<d;e++)h[e]={name:u[e].name,data:[]};this.morphTargets.normal=h}const f=e.skinIndices,p=e.skinWeights,m=f.length===n.length,g=p.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let e=0;e<t.length;e++){const v=t[e];this.vertices.push(n[v.a],n[v.b],n[v.c]);const y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{const e=v.normal;this.normals.push(e,e,e)}const b=v.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{const e=v.color;this.colors.push(e,e,e)}if(!0===i){const t=r[0][e];void 0!==t?this.uvs.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",e),this.uvs.push(new o.Vector2,new o.Vector2,new o.Vector2))}if(!0===s){const t=r[1][e];void 0!==t?this.uvs2.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",e),this.uvs2.push(new o.Vector2,new o.Vector2,new o.Vector2))}for(let e=0;e<l;e++){const t=a[e].vertices;c[e].data.push(t[v.a],t[v.b],t[v.c])}for(let t=0;t<d;t++){const n=u[t].vertexNormals[e];h[t].data.push(n.a,n.b,n.c)}m&&this.skinIndices.push(f[v.a],f[v.b],f[v.c]),g&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}const m=(e,t)=>{const n=(new p).fromGeometry(t);return g(e,n)},g=(e,t)=>{var n,r;const i=new Float32Array(3*t.vertices.length);if(e.setAttribute("position",new o.BufferAttribute(i,3).copyVector3sArray(t.vertices)),t.normals.length>0){const n=new Float32Array(3*t.normals.length);e.setAttribute("normal",new o.BufferAttribute(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){const n=new Float32Array(3*t.colors.length);e.setAttribute("color",new o.BufferAttribute(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){const n=new Float32Array(2*t.uvs.length);e.setAttribute("uv",new o.BufferAttribute(n,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){const n=new Float32Array(2*t.uvs2.length);e.setAttribute("uv2",new o.BufferAttribute(n,2).copyVector2sArray(t.uvs2))}e.groups=t.groups;for(const n in t.morphTargets){const r=[],i=t.morphTargets[n];for(let e=0,t=i.length;e<t;e++){const t=i[e],n=new o.Float32BufferAttribute(3*t.data.length,3);n.name=t.name,r.push(n.copyVector3sArray(t.data))}e.morphAttributes[n]=r}if(t.skinIndices.length>0){const n=new o.Float32BufferAttribute(4*t.skinIndices.length,4);e.setAttribute("skinIndex",n.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){const n=new o.Float32BufferAttribute(4*t.skinWeights.length,4);e.setAttribute("skinWeight",n.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(e.boundingSphere=null===(n=t.boundingSphere)||void 0===n?void 0:n.clone()),null!==t.boundingBox&&(e.boundingBox=null===(r=t.boundingBox)||void 0===r?void 0:r.clone()),e};class v{constructor(e,t){this.camera=e,this.renderer=t}static geometryToBufferGeometry(e){return e.isGeometry?m(new o.BufferGeometry,e):e}static bufferGeometryToGeometry(e){return e.isBufferGeometry?(new c).fromBufferGeometry(e):e}fromSVGtoShape(e,t=!1,n){if(e){const r=new f,i=[];return r.parse(e).paths.forEach((e=>{e.toShapes(t,n).forEach((e=>{i.push(e)}))})),i}return[]}from3dto2d(e){const t=new o.Vector3(e.x,e.y,e.z),n=this.renderer.domElement;this.camera.updateMatrixWorld(),t.project(this.camera);const r=Math.round((t.x+1)*(n.width/2)),i=Math.round((1-t.y)*(n.height/2));return new o.Vector2(r,i)}from2dto3d(e,t,n){var r;if(!this.tmpPlane){const e=new o.PlaneBufferGeometry(1e4,1e4),t=new o.MeshBasicMaterial({transparent:!0,opacity:.25});this.tmpPlane=new o.Mesh(e,t),this.tmpPlane.name="_tmp_raycast_plane"}let i;this.tmpRaycaster||(this.tmpRaycaster=new o.Raycaster),this.tmpVector3||(this.tmpVector3=new o.Vector3),this.tmpPlane.setRotationFromEuler(this.camera.rotation);const s=this.camera.position;this.tmpPlane.position.set(s.x,s.y,s.z),this.camera.getWorldDirection(this.tmpVector3),this.tmpPlane.position.add(this.tmpVector3.clone().multiplyScalar(n)),this.tmpPlane.updateMatrix(),this.tmpPlane.updateMatrixWorld(!0),this.tmpRaycaster.setFromCamera({x:e,y:t},this.camera);const a=this.tmpRaycaster.intersectObjects([this.tmpPlane]);return"_tmp_raycast_plane"===(null===(r=a[0])||void 0===r?void 0:r.object.name)&&(i=a[0].point),i}}class y{static toGeometry(e,t){e.geometry=v.bufferGeometryToGeometry(e.geometry),t.geometry=v.bufferGeometryToGeometry(t.geometry)}static toBufferGeometry(e){e.geometry=v.geometryToBufferGeometry(e.geometry)}static union(e,t){this.toGeometry(e,t);const n=this.doCSG(e,t,"union");return this.toBufferGeometry(n),n}static subtract(e,t){this.toGeometry(e,t);const n=this.doCSG(e,t,"subtract");return this.toBufferGeometry(n),n}static intersect(e,t){this.toGeometry(e,t);const n=this.doCSG(e,t,"intersect");return this.toBufferGeometry(n),n}static doCSG(e,t,n){e.updateMatrix(),t.updateMatrix();const r=b.fromMesh(e),i=b.fromMesh(t),o=r[n](i);return b.toMesh(o,e.matrix)}}class b{constructor(){this.polygons=[]}static fromPolygons(e){const t=new b;return t.polygons=e,t}static fromGeometry(e){e.isBufferGeometry&&(e=(new c).fromBufferGeometry(e));const t=e.faces,n=e.vertices,r=[],i=["a","b","c"];for(let o=0;o<t.length;o++){const s=t[o],a=[];for(let t=0;t<3;t++){const r=void 0!==e.faceVertexUvs[0][o]&&void 0!==e.faceVertexUvs[0][o][t]?e.faceVertexUvs[0][o][t]:void 0;a.push(new x(n[s[i[t]]],s.vertexNormals[t],r))}r.push(new S(a))}return b.fromPolygons(r)}static fromMesh(e){const t=b.fromGeometry(e.geometry);b._tmpm3.getNormalMatrix(e.matrix);for(const n of t.polygons)for(const t of n.vertices)t.pos.applyMatrix4(e.matrix),t.normal.applyMatrix3(b._tmpm3);return t}static toMesh(e,t){const n=new c,r=e.polygons,i=n.vertices,s=n.faceVertexUvs[0];for(const e of r){const t=e.vertices,r=i.length,a=t.length;for(const e of t)i.push((new o.Vector3).copy(e.pos));for(let i=3;i<=a;i++){const a=new h(r,r+i-2,r+i-1),l=[];s.push(l);const c=a.vertexNormals;c.push((new o.Vector3).copy(t[0].normal)),c.push((new o.Vector3).copy(t[i-2].normal)),c.push((new o.Vector3).copy(t[i-1].normal)),t[0].uv&&t[i-2].uv&&t[i-1].uv&&(l.push((new o.Vector3).copy(t[0].uv)),l.push((new o.Vector3).copy(t[i-2].uv)),l.push((new o.Vector3).copy(t[i-1].uv))),a.normal=(new o.Vector3).copy(e.plane.normal),n.faces.push(a)}}const a=parseInt(o.REVISION)>=123?(new o.Matrix4).copy(t).invert():(new o.Matrix4).getInverse(t);n.applyMatrix4(a),n.verticesNeedUpdate=n.elementsNeedUpdate=n.normalsNeedUpdate=!0,n.computeBoundingSphere(),n.computeBoundingBox();const l=new o.Mesh(n);return l.matrix.copy(t),l.matrix.decompose(l.position,l.rotation,l.scale),l.updateMatrixWorld(),l}static iEval(e,t=0){var n;if("string"==typeof e)b.currentOp=e;else if(e instanceof Array)for(const t of e)b.iEval(t,0);else if("object"==typeof e){const t=b.currentOp;e.updateMatrix(),e.updateMatrixWorld(),b.sourceMesh?(b.nextPrim=b.fromMesh(e),b.currentPrim=b.currentPrim[t](b.nextPrim)):b.currentPrim=b.fromMesh(b.sourceMesh=e),b.doRemove&&(null===(n=null==e?void 0:e.parent)||void 0===n||n.remove(e))}}static eval(e,t){delete b.currentOp,delete b.sourceMesh,b.doRemove=t,b.iEval(e);const n=b.toMesh(b.currentPrim,b.sourceMesh.matrix);return n.material=b.sourceMesh.material,n.castShadow=n.receiveShadow=!0,n}clone(){const e=new b;return e.polygons=this.polygons.map((e=>e.clone())),e}toPolygons(){return this.polygons}union(e){const t=new E(this.clone().polygons),n=new E(e.clone().polygons);return t.clipTo(n),n.clipTo(t),n.invert(),n.clipTo(t),n.invert(),t.build(n.allPolygons()),b.fromPolygons(t.allPolygons())}subtract(e){const t=new E(this.clone().polygons),n=new E(e.clone().polygons);return t.invert(),t.clipTo(n),n.clipTo(t),n.invert(),n.clipTo(t),n.invert(),t.build(n.allPolygons()),t.invert(),b.fromPolygons(t.allPolygons())}intersect(e){const t=new E(this.clone().polygons),n=new E(e.clone().polygons);return t.invert(),n.clipTo(t),n.invert(),t.clipTo(n),n.clipTo(t),t.build(n.allPolygons()),t.invert(),b.fromPolygons(t.allPolygons())}inverse(){const e=this.clone();return e.polygons.map((e=>{e.flip()})),e}}b._tmpm3=new o.Matrix3;class w extends o.Vector3{constructor(e,t,n){if(3===arguments.length)super(e,t,n);else if(Array.isArray(e))super(e[0],e[1],e[2]);else{if("object"!=typeof e)throw new Error("Invalid constructor to vector");this.copy(e)}}clone(){return new w(this.x,this.y,this.z)}negated(){return this.clone().multiplyScalar(-1)}plus(e){return this.clone().add(e)}minus(e){return this.clone().sub(e)}times(e){return this.clone().multiplyScalar(e)}dividedBy(e){return this.clone().divideScalar(e)}lerp(e,t){return this.plus(e.minus(this).times(t))}unit(){return this.dividedBy(this.length())}cross(e,t){return o.Vector3.prototype.cross.call(this.clone(),e)}}class x{constructor(e,t,n){this.pos=new w(e.x,e.y,e.z),this.normal=new w(t.x,t.y,t.z),n&&(this.uv=new w(n.x,n.y,n.z))}clone(){return new x(this.pos.clone(),this.normal.clone(),this.uv?this.uv.clone():void 0)}flip(){this.normal=this.normal.negated()}interpolate(e,t){return new x(this.pos.lerp(e.pos,t),this.normal.lerp(e.normal,t),this.uv?this.uv.lerp(e.uv,t):void 0)}}class _{constructor(e,t){this.normal=e,this.w=t}static fromPoints(e,t,n){const r=t.minus(e).cross(n.minus(e)).unit();return new _(r,r.dot(e))}clone(){return new _(this.normal.clone(),this.w)}flip(){this.normal=this.normal.negated(),this.w=-this.w}splitPolygon(e,t,n,r,i){let o=0;const s=[];for(const t of e.vertices){const e=this.normal.dot(t.pos)-this.w,n=e<-_.EPSILON?2:e>_.EPSILON?1:0;o|=n,s.push(n)}switch(o){case 0:this.normal.dot(e.plane.normal)>0?t.push(e):n.push(e);break;case 1:r.push(e);break;case 2:i.push(e);break;case 3:const o=[],a=[];for(let t=0;t<e.vertices.length;t++){const n=(t+1)%e.vertices.length,r=s[t],i=s[n],l=e.vertices[t],c=e.vertices[n];if(2!==r&&o.push(l),1!==r&&a.push(2!==r?l.clone():l),3==(r|i)){const e=(this.w-this.normal.dot(l.pos))/this.normal.dot(c.pos.minus(l.pos)),t=l.interpolate(c,e);o.push(t),a.push(t.clone())}}o.length>=3&&r.push(new S(o,e.shared)),a.length>=3&&i.push(new S(a,e.shared))}}}_.EPSILON=1e-5;class S{constructor(e,t=null){this.vertices=e,this.shared=t,this.plane=_.fromPoints(e[0].pos,e[1].pos,e[2].pos)}clone(){const e=this.vertices.map((e=>e.clone()));return new S(e,this.shared)}flip(){this.vertices.reverse().map((e=>{e.flip()})),this.plane.flip()}}class E{constructor(e){delete this.plane,delete this.front,delete this.back,this.polygons=[],e&&this.build(e)}clone(){const e=new E;return e.plane=this.plane&&this.plane.clone(),e.front=this.front&&this.front.clone(),e.back=this.back&&this.back.clone(),e.polygons=this.polygons.map((e=>e.clone())),e}invert(){for(const e of this.polygons)e.flip();this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();const e=this.front;this.front=this.back,this.back=e}clipPolygons(e){if(!this.plane)return e.slice();let t=[],n=[];for(const r of e)this.plane.splitPolygon(r,t,n,t,n);return this.front&&(t=this.front.clipPolygons(t)),n=this.back?this.back.clipPolygons(n):[],t.concat(n)}clipTo(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)}allPolygons(){let e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e}build(e){if(!e.length)return;this.plane||(this.plane=e[0].plane.clone());const t=[],n=[];for(const r of e)this.plane.splitPolygon(r,this.polygons,this.polygons,t,n);t.length&&(this.front||(this.front=new E),this.front.build(t)),n.length&&(this.back||(this.back=new E),this.back.build(n))}}var T={},C=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},M=function(e){return new Worker(e)};try{URL.revokeObjectURL(C(""))}catch(e){C=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},M=function(e){return new Worker(e,{type:"module"})}}var k=Uint8Array,P=Uint16Array,A=Uint32Array,I=new k([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),R=new k([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),L=new k([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O=function(e,t){for(var n=new P(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new A(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},N=O(I,2),D=N[0],F=N[1];D[28]=258,F[258]=28;for(var B=O(R,0),Z=B[0],V=B[1],z=new P(32768),U=0;U<32768;++U){var j=(43690&U)>>>1|(21845&U)<<1;j=(61680&(j=(52428&j)>>>2|(13107&j)<<2))>>>4|(3855&j)<<4,z[U]=((65280&j)>>>8|(255&j)<<8)>>>1}var H=function(e,t,n){for(var r=e.length,i=0,o=new P(t);i<r;++i)++o[e[i]-1];var s,a=new P(t);for(i=0;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;if(n){s=new P(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],d=a[e[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)s[z[d]>>>l]=c}else for(s=new P(r),i=0;i<r;++i)e[i]&&(s[i]=z[a[e[i]-1]++]>>>15-e[i]);return s},G=new k(288);for(U=0;U<144;++U)G[U]=8;for(U=144;U<256;++U)G[U]=9;for(U=256;U<280;++U)G[U]=7;for(U=280;U<288;++U)G[U]=8;var W=new k(32);for(U=0;U<32;++U)W[U]=5;var $=H(G,9,0),q=H(G,9,1),Y=H(W,5,0),K=H(W,5,1),X=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},J=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},Q=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},ee=function(e){return(e/8|0)+(7&e&&1)},te=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof P?P:e instanceof A?A:k)(n-t);return r.set(e.subarray(t,n)),r},ne=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new k(0);var i=!t||n,o=!n||n.i;n||(n={}),t||(t=new k(3*r));var s=function(e){var n=t.length;if(e>n){var r=new k(Math.max(2*n,e));r.set(t),t=r}},a=n.f||0,l=n.p||0,c=n.b||0,u=n.l,d=n.d,h=n.m,f=n.n,p=8*r;do{if(!u){n.f=a=J(e,l,1);var m=J(e,l+1,3);if(l+=3,!m){var g=e[(M=ee(l)+4)-4]|e[M-3]<<8,v=M+g;if(v>r){if(o)throw"unexpected EOF";break}i&&s(c+g),t.set(e.subarray(M,v),c),n.b=c+=g,n.p=l=8*v;continue}if(1==m)u=q,d=K,h=9,f=5;else{if(2!=m)throw"invalid block type";var y=J(e,l,31)+257,b=J(e,l+10,15)+4,w=y+J(e,l+5,31)+1;l+=14;for(var x=new k(w),_=new k(19),S=0;S<b;++S)_[L[S]]=J(e,l+3*S,7);l+=3*b;var E=X(_),T=(1<<E)-1,C=H(_,E,1);for(S=0;S<w;){var M,P=C[J(e,l,T)];if(l+=15&P,(M=P>>>4)<16)x[S++]=M;else{var A=0,O=0;for(16==M?(O=3+J(e,l,3),l+=2,A=x[S-1]):17==M?(O=3+J(e,l,7),l+=3):18==M&&(O=11+J(e,l,127),l+=7);O--;)x[S++]=A}}var N=x.subarray(0,y),F=x.subarray(y);h=X(N),f=X(F),u=H(N,h,1),d=H(F,f,1)}if(l>p){if(o)throw"unexpected EOF";break}}i&&s(c+131072);for(var B=(1<<h)-1,V=(1<<f)-1,z=l;;z=l){var U=(A=u[Q(e,l)&B])>>>4;if((l+=15&A)>p){if(o)throw"unexpected EOF";break}if(!A)throw"invalid length/literal";if(U<256)t[c++]=U;else{if(256==U){z=l,u=null;break}var j=U-254;if(U>264){var G=I[S=U-257];j=J(e,l,(1<<G)-1)+D[S],l+=G}var W=d[Q(e,l)&V],$=W>>>4;if(!W)throw"invalid distance";l+=15&W;F=Z[$];if($>3){G=R[$];F+=Q(e,l)&(1<<G)-1,l+=G}if(l>p){if(o)throw"unexpected EOF";break}i&&s(c+131072);for(var Y=c+j;c<Y;c+=4)t[c]=t[c-F],t[c+1]=t[c+1-F],t[c+2]=t[c+2-F],t[c+3]=t[c+3-F];c=Y}}n.l=u,n.p=z,n.b=c,u&&(a=1,n.m=h,n.d=d,n.n=f)}while(!a);return c==t.length?t:te(t,0,c)},re=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},ie=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},oe=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return[he,0];if(1==i){var s=new k(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var h=o[0].s;for(r=1;r<i;++r)o[r].s>h&&(h=o[r].s);var f=new P(h+1),p=se(n[u-1],f,0);if(p>t){r=0;var m=0,g=p-t,v=1<<g;for(o.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));r<i;++r){var y=o[r].s;if(!(f[y]>t))break;m+=v-(1<<p-f[y]),f[y]=t}for(m>>>=g;m>0;){var b=o[r].s;f[b]<t?m-=1<<t-f[b]++-1:++r}for(;r>=0&&m;--r){var w=o[r].s;f[w]==t&&(--f[w],++m)}p=t}return[new k(f),p]},se=function(e,t,n){return-1==e.s?Math.max(se(e.l,t,n+1),se(e.r,t,n+1)):t[e.s]=n},ae=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new P(++t),r=0,i=e[0],o=1,s=function(e){n[r++]=e},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return[n.subarray(0,r),t]},le=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},ce=function(e,t,n){var r=n.length,i=ee(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},ue=function(e,t,n,r,i,o,s,a,l,c,u){re(t,u++,n),++i[256];for(var d=oe(i,15),h=d[0],f=d[1],p=oe(o,15),m=p[0],g=p[1],v=ae(h),y=v[0],b=v[1],w=ae(m),x=w[0],_=w[1],S=new P(19),E=0;E<y.length;++E)S[31&y[E]]++;for(E=0;E<x.length;++E)S[31&x[E]]++;for(var T=oe(S,7),C=T[0],M=T[1],k=19;k>4&&!C[L[k-1]];--k);var A,O,N,D,F=c+5<<3,B=le(i,G)+le(o,W)+s,Z=le(i,h)+le(o,m)+s+14+3*k+le(S,C)+(2*S[16]+3*S[17]+7*S[18]);if(F<=B&&F<=Z)return ce(t,u,e.subarray(l,l+c));if(re(t,u,1+(Z<B)),u+=2,Z<B){A=H(h,f,0),O=h,N=H(m,g,0),D=m;var V=H(C,M,0);re(t,u,b-257),re(t,u+5,_-1),re(t,u+10,k-4),u+=14;for(E=0;E<k;++E)re(t,u+3*E,C[L[E]]);u+=3*k;for(var z=[y,x],U=0;U<2;++U){var j=z[U];for(E=0;E<j.length;++E){var q=31&j[E];re(t,u,V[q]),u+=C[q],q>15&&(re(t,u,j[E]>>>5&127),u+=j[E]>>>12)}}}else A=$,O=G,N=Y,D=W;for(E=0;E<a;++E)if(r[E]>255){q=r[E]>>>18&31;ie(t,u,A[q+257]),u+=O[q+257],q>7&&(re(t,u,r[E]>>>23&31),u+=I[q]);var K=31&r[E];ie(t,u,N[K]),u+=D[K],K>3&&(ie(t,u,r[E]>>>5&8191),u+=R[K])}else ie(t,u,A[r[E]]),u+=O[r[E]];return ie(t,u,A[256]),u+O[256]},de=new A([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),he=new k(0),fe=function(e,t,n,r,i,o){var s=e.length,a=new k(r+s+5*(1+Math.ceil(s/7e3))+i),l=a.subarray(r,a.length-i),c=0;if(!t||s<8)for(var u=0;u<=s;u+=65535){var d=u+65535;d<s?c=ce(l,c,e.subarray(u,d)):(l[u]=o,c=ce(l,c,e.subarray(u,s)))}else{for(var h=de[t-1],f=h>>>13,p=8191&h,m=(1<<n)-1,g=new P(32768),v=new P(m+1),y=Math.ceil(n/3),b=2*y,w=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<b)&m},x=new A(25e3),_=new P(288),S=new P(32),E=0,T=0,C=(u=0,0),M=0,L=0;u<s;++u){var O=w(u),N=32767&u,D=v[O];if(g[N]=D,v[O]=N,M<=u){var B=s-u;if((E>7e3||C>24576)&&B>423){c=ue(e,l,0,x,_,S,T,C,L,u-L,c),C=E=T=0,L=u;for(var Z=0;Z<286;++Z)_[Z]=0;for(Z=0;Z<30;++Z)S[Z]=0}var z=2,U=0,j=p,H=N-D&32767;if(B>2&&O==w(u-H))for(var G=Math.min(f,B)-1,W=Math.min(32767,u),$=Math.min(258,B);H<=W&&--j&&N!=D;){if(e[u+z]==e[u+z-H]){for(var q=0;q<$&&e[u+q]==e[u+q-H];++q);if(q>z){if(z=q,U=H,q>G)break;var Y=Math.min(H,q-2),K=0;for(Z=0;Z<Y;++Z){var X=u-H+Z+32768&32767,J=X-g[X]+32768&32767;J>K&&(K=J,D=X)}}}H+=(N=D)-(D=g[N])+32768&32767}if(U){x[C++]=268435456|F[z]<<18|V[U];var Q=31&F[z],ne=31&V[U];T+=I[Q]+R[ne],++_[257+Q],++S[ne],M=u+z,++E}else x[C++]=e[u],++_[e[u]]}}c=ue(e,l,o,x,_,S,T,C,L,u-L,c),!o&&7&c&&(c=ce(l,c+1,he))}return te(a,0,r+ee(c)+i)},pe=function(){for(var e=new A(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),me=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=pe[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},ge=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,o=n.length,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=n[s];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}e=r,t=i},d:function(){return(255&(e%=65521))<<24|e>>>8<<16|(255&(t%=65521))<<8|t>>>8}}},ve=function(e,t,n,r,i){return fe(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!i)},ye=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},be=function(e,t,n){for(var r=e(),i=e.toString(),o=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),s=0;s<r.length;++s){var a=r[s],l=o[s];if("function"==typeof a){t+=";"+l+"=";var c=a.toString();if(a.prototype)if(-1!=c.indexOf("[native code]")){var u=c.indexOf(" ",8)+1;t+=c.slice(u,c.indexOf("(",u))}else for(var d in t+=c,a.prototype)t+=";"+l+".prototype."+d+"="+a.prototype[d].toString();else t+=c}else n[l]=a}return[t,n]},we=[],xe=function(e,t,n,r){var i;if(!we[n]){for(var o="",s={},a=e.length-1,l=0;l<a;++l)o=(i=be(e[l],o,s))[0],s=i[1];we[n]=be(e[a],o,s)}var c=ye({},we[n][1]);return function(e,t,n,r,i){var o=M(T[t]||(T[t]=C(e)));return o.onerror=function(e){return i(e.error,null)},o.onmessage=function(e){return i(null,e.data)},o.postMessage(n,r),o}(we[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,c,function(e){var t=[];for(var n in e)(e[n]instanceof k||e[n]instanceof P||e[n]instanceof A)&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t}(c),r)},_e=function(){return[k,P,A,I,R,L,D,Z,q,K,z,H,X,J,Q,ee,te,ne,Xe,ke,Pe]},Se=function(){return[k,P,A,I,R,L,F,V,$,G,Y,W,z,de,he,H,re,ie,oe,se,ae,le,ce,ue,ee,te,fe,ve,$e,ke]},Ee=function(){return[Fe,Ve,De,me,pe]},Te=function(){return[Be,Ze]},Ce=function(){return[ze,De,ge]},Me=function(){return[Ue]},ke=function(e){return postMessage(e,[e.buffer])},Pe=function(e){return e&&e.size&&new k(e.size)},Ae=function(e,t,n,r,i,o){var s=xe(n,r,i,(function(e,t){s.terminate(),o(e,t)}));return s.postMessage([e,t],t.consume?[e.buffer]:[]),function(){s.terminate()}},Ie=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},Re=function(e,t,n,r,i){var o,s=xe(e,r,i,(function(e,n){e?(s.terminate(),t.ondata.call(t,e)):(n[1]&&s.terminate(),t.ondata.call(t,e,n[0],n[1]))}));s.postMessage(n),t.push=function(e,n){if(o)throw"stream finished";if(!t.ondata)throw"no stream handler";s.postMessage([e,o=n],[e.buffer])},t.terminate=function(){s.terminate()}},Le=function(e,t){return e[t]|e[t+1]<<8},Oe=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},Ne=function(e,t){return Oe(e,t)+4294967296*Oe(e,t+4)},De=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Fe=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&De(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},Be=function(e){if(31!=e[0]||139!=e[1]||8!=e[2])throw"invalid gzip data";var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)},Ze=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},Ve=function(e){return 10+(e.filename&&e.filename.length+1||0)},ze=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},Ue=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function je(e,t){return t||"function"!=typeof e||(t=e,e={}),this.ondata=t,e}var He=function(){function e(e,t){t||"function"!=typeof e||(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(ve(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e}(),Ge=function(){return function(e,t){Re([Se,function(){return[Ie,He]}],this,je.call(this,e,t),(function(e){var t=new He(e.data);onmessage=Ie(t)}),6)}}();function We(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return Ae(e,t,[Se],(function(e){return ke($e(e.data[0],e.data[1]))}),0,n)}function $e(e,t){return ve(e,t||{},0,0)}var qe=function(){function e(e){this.s={},this.p=new k(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,n=new k(t+e.length);n.set(this.p),n.set(e,t),this.p=n},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=ne(this.p,this.o,this.s);this.ondata(te(n,t,this.s.b),this.d),this.o=te(n,this.s.b-32768),this.s.b=this.o.length,this.p=te(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}(),Ye=function(){return function(e){this.ondata=e,Re([_e,function(){return[Ie,qe]}],this,0,(function(){var e=new qe;onmessage=Ie(e)}),7)}}();function Ke(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return Ae(e,t,[_e],(function(e){return ke(Xe(e.data[0],Pe(e.data[1])))}),1,n)}function Xe(e,t){return ne(e,t)}var Je=function(){function e(e,t){this.c=me(),this.l=0,this.v=1,He.call(this,e,t)}return e.prototype.push=function(e,t){He.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=ve(e,this.o,this.v&&Ve(this.o),t&&8,!t);this.v&&(Fe(n,this.o),this.v=0),t&&(De(n,n.length-8,this.c.d()),De(n,n.length-4,this.l)),this.ondata(n,t)},e}(),Qe=function(){return function(e,t){Re([Se,Ee,function(){return[Ie,He,Je]}],this,je.call(this,e,t),(function(e){var t=new Je(e.data);onmessage=Ie(t)}),8)}}();function et(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return Ae(e,t,[Se,Ee,function(){return[tt]}],(function(e){return ke(tt(e.data[0],e.data[1]))}),2,n)}function tt(e,t){t||(t={});var n=me(),r=e.length;n.p(e);var i=ve(e,t,Ve(t),8),o=i.length;return Fe(i,t),De(i,o-8,n.d()),De(i,o-4,r),i}var nt=function(){function e(e){this.v=1,qe.call(this,e)}return e.prototype.push=function(e,t){if(qe.prototype.e.call(this,e),this.v){var n=this.p.length>3?Be(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}qe.prototype.c.call(this,t)},e}(),rt=function(){return function(e){this.ondata=e,Re([_e,Te,function(){return[Ie,qe,nt]}],this,0,(function(){var e=new nt;onmessage=Ie(e)}),9)}}();function it(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return Ae(e,t,[_e,Te,function(){return[ot]}],(function(e){return ke(ot(e.data[0]))}),3,n)}function ot(e,t){return ne(e.subarray(Be(e),-8),t||new k(Ze(e)))}var st=function(){function e(e,t){this.c=ge(),this.v=1,He.call(this,e,t)}return e.prototype.push=function(e,t){He.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=ve(e,this.o,this.v&&2,t&&4,!t);this.v&&(ze(n,this.o),this.v=0),t&&De(n,n.length-4,this.c.d()),this.ondata(n,t)},e}(),at=function(){return function(e,t){Re([Se,Ce,function(){return[Ie,He,st]}],this,je.call(this,e,t),(function(e){var t=new st(e.data);onmessage=Ie(t)}),10)}}();function lt(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return Ae(e,t,[Se,Ce,function(){return[ct]}],(function(e){return ke(ct(e.data[0],e.data[1]))}),4,n)}function ct(e,t){t||(t={});var n=ge();n.p(e);var r=ve(e,t,2,4);return ze(r,t),De(r,r.length-4,n.d()),r}var ut=function(){function e(e){this.v=1,qe.call(this,e)}return e.prototype.push=function(e,t){if(qe.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}qe.prototype.c.call(this,t)},e}(),dt=function(){return function(e){this.ondata=e,Re([_e,Me,function(){return[Ie,qe,ut]}],this,0,(function(){var e=new ut;onmessage=Ie(e)}),11)}}();function ht(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return Ae(e,t,[_e,Me,function(){return[ft]}],(function(e){return ke(ft(e.data[0],Pe(e.data[1])))}),5,n)}function ft(e,t){return ne((Ue(e),e.subarray(2,-4)),t)}var pt=function(){function e(e){this.G=nt,this.I=qe,this.Z=ut,this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var n=new k(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,i=function(){r.ondata.apply(r,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(i):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(i):new this.Z(i),this.s.push(this.p,t),this.p=null}}},e}(),mt=function(){function e(e){this.G=rt,this.I=Ye,this.Z=dt,this.ondata=e}return e.prototype.push=function(e,t){pt.prototype.push.call(this,e,t)},e}();function gt(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return 31==e[0]&&139==e[1]&&8==e[2]?it(e,t,n):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Ke(e,t,n):ht(e,t,n)}function vt(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?ot(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Xe(e,t):ft(e,t)}var yt=function(e,t,n,r){for(var i in e){var o=e[i],s=t+i;o instanceof k?n[s]=[o,r]:Array.isArray(o)?n[s]=[o[0],ye(r,o[1])]:yt(o,s+"/",n,r)}},bt="undefined"!=typeof TextEncoder&&new TextEncoder,wt="undefined"!=typeof TextDecoder&&new TextDecoder,xt=0;try{wt.decode(he,{stream:!0}),xt=1}catch(e){}var _t=function(e){for(var t="",n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return[t,te(e,n-1)];i?3==i?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&i?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}},St=function(){function e(e){this.ondata=e,xt?this.t=new TextDecoder:this.p=he}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}}else{if(!this.p)throw"stream finished";var n=new k(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length);var r=_t(n),i=r[0],o=r[1];if(t){if(o.length)throw"invalid utf-8 data";this.p=null}else this.p=o;this.ondata(i,t)}},e}(),Et=function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(Tt(e),this.d=t||!1)},e}();function Tt(e,t){if(t){for(var n=new k(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(bt)return bt.encode(e);var i=e.length,o=new k(e.length+(e.length>>1)),s=0,a=function(e){o[s++]=e};for(r=0;r<i;++r){if(s+5>o.length){var l=new k(s+8+(i-r<<1));l.set(o),o=l}var c=e.charCodeAt(r);c<128||t?a(c):c<2048?(a(192|c>>6),a(128|63&c)):c>55295&&c<57344?(a(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++r))>>18),a(128|c>>12&63),a(128|c>>6&63),a(128|63&c)):(a(224|c>>12),a(128|c>>6&63),a(128|63&c))}return te(o,0,s)}function Ct(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(wt)return wt.decode(e);var i=_t(e),o=i[0];if(i[1].length)throw"invalid utf-8 data";return o}var Mt=function(e){return 1==e?3:e<6?2:9==e?1:0},kt=function(e,t){return t+30+Le(e,t+26)+Le(e,t+28)},Pt=function(e,t,n){var r=Le(e,t+28),i=Ct(e.subarray(t+46,t+46+r),!(2048&Le(e,t+8))),o=t+46+r,s=Oe(e,t+20),a=n&&4294967295==s?At(e,o):[s,Oe(e,t+24),Oe(e,t+42)],l=a[0],c=a[1],u=a[2];return[Le(e,t+10),l,c,i,o+Le(e,t+30)+Le(e,t+32),u]},At=function(e,t){for(;1!=Le(e,t);t+=4+Le(e,t+2));return[Ne(e,t+12),Ne(e,t+4),Ne(e,t+20)]},It=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},Rt=function(e,t,n,r,i,o,s,a){var l=r.length,c=n.extra,u=a&&a.length,d=It(c);De(e,t,null!=s?33639248:67324752),t+=4,null!=s&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==o&&8),e[t++]=i&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var h=new Date(null==n.mtime?Date.now():n.mtime),f=h.getFullYear()-1980;if(f<0||f>119)throw"date not in range 1980-2099";if(De(e,t,f<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>>1),t+=4,null!=o&&(De(e,t,n.crc),De(e,t+4,o),De(e,t+8,n.size)),De(e,t+12,l),De(e,t+14,d),t+=16,null!=s&&(De(e,t,u),De(e,t+6,n.attrs),De(e,t+10,s),t+=14),e.set(r,t),t+=l,d)for(var p in c){var m=c[p],g=m.length;De(e,t,+p),De(e,t+2,g),e.set(m,t+4),t+=4+g}return u&&(e.set(a,t),t+=u),t},Lt=function(e,t,n,r,i){De(e,t,101010256),De(e,t+8,n),De(e,t+10,n),De(e,t+12,r),De(e,t+16,i)},Ot=function(){function e(e){this.filename=e,this.c=me(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e}(),Nt=function(){function e(e,t){var n=this;t||(t={}),Ot.call(this,e),this.d=new He(t,(function(e,t){n.ondata(null,e,t)})),this.compression=8,this.flag=Mt(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){Ot.prototype.push.call(this,e,t)},e}(),Dt=function(){function e(e,t){var n=this;t||(t={}),Ot.call(this,e),this.d=new Ge(t,(function(e,t,r){n.ondata(e,t,r)})),this.compression=8,this.flag=Mt(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){Ot.prototype.push.call(this,e,t)},e}(),Ft=function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var t=this;if(2&this.d)throw"stream finished";var n=Tt(e.filename),r=n.length,i=e.comment,o=i&&Tt(i),s=r!=e.filename.length||o&&i.length!=o.length,a=r+It(e.extra)+30;if(r>65535)throw"filename too long";var l=new k(a);Rt(l,0,e,n,s);var c=[l],u=function(){for(var e=0,n=c;e<n.length;e++){var r=n[e];t.ondata(null,r,!1)}c=[]},d=this.d;this.d=0;var h=this.u.length,f=ye(e,{f:n,u:s,o:o,t:function(){e.terminate&&e.terminate()},r:function(){if(u(),d){var e=t.u[h+1];e?e.r():t.d=1}d=1}}),p=0;e.ondata=function(n,r,i){if(n)t.ondata(n,r,i),t.terminate();else if(p+=r.length,c.push(r),i){var o=new k(16);De(o,0,134695760),De(o,4,e.crc),De(o,8,p),De(o,12,e.size),c.push(o),f.c=p,f.b=a+p+16,f.crc=e.crc,f.size=e.size,d&&f.r(),d=1}else d&&u()},this.u.push(f)},e.prototype.end=function(){var e=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&e.d&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,t=0,n=0,r=0,i=this.u;r<i.length;r++){n+=46+(l=i[r]).f.length+It(l.extra)+(l.o?l.o.length:0)}for(var o=new k(n+22),s=0,a=this.u;s<a.length;s++){var l=a[s];Rt(o,e,l,l.f,l.u,l.c,t,l.o),e+=46+l.f.length+It(l.extra)+(l.o?l.o.length:0),t+=l.b}Lt(o,e,this.u.length,n,t),this.ondata(null,o,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){t[e].t()}this.d=2},e}();function Bt(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";var r={};yt(e,"",r,t);var i=Object.keys(r),o=i.length,s=0,a=0,l=o,c=new Array(o),u=[],d=function(){for(var e=0;e<u.length;++e)u[e]()},h=function(){var e=new k(a+22),t=s,r=a-s;a=0;for(var i=0;i<l;++i){var o=c[i];try{var u=o.c.length;Rt(e,a,o,o.f,o.u,u);var d=30+o.f.length+It(o.extra),h=a+d;e.set(o.c,h),Rt(e,s,o,o.f,o.u,u,a,o.m),s+=16+d+(o.m?o.m.length:0),a=h+u}catch(e){return n(e,null)}}Lt(e,s,c.length,r,t),n(null,e)};o||h();for(var f=function(e){var t=i[e],l=r[t],f=l[0],p=l[1],m=me(),g=f.length;m.p(f);var v=Tt(t),y=v.length,b=p.comment,w=b&&Tt(b),x=w&&w.length,_=It(p.extra),S=0==p.level?0:8,E=function(r,i){if(r)d(),n(r,null);else{var l=i.length;c[e]=ye(p,{size:g,crc:m.d(),c:i,f:v,m:w,u:y!=t.length||w&&b.length!=x,compression:S}),s+=30+y+_+l,a+=76+2*(y+_)+(x||0)+l,--o||h()}};if(y>65535&&E("filename too long",null),S)if(g<16e4)try{E(null,$e(f,p))}catch(e){E(e,null)}else u.push(We(f,p,E));else E(null,f)},p=0;p<l;++p)f(p);return d}function Zt(e,t){t||(t={});var n={},r=[];yt(e,"",n,t);var i=0,o=0;for(var s in n){var a=n[s],l=a[0],c=a[1],u=0==c.level?0:8,d=(S=Tt(s)).length,h=c.comment,f=h&&Tt(h),p=f&&f.length,m=It(c.extra);if(d>65535)throw"filename too long";var g=u?$e(l,c):l,v=g.length,y=me();y.p(l),r.push(ye(c,{size:l.length,crc:y.d(),c:g,f:S,m:f,u:d!=s.length||f&&h.length!=p,o:i,compression:u})),i+=30+d+m+v,o+=76+2*(d+m)+(p||0)+v}for(var b=new k(o+22),w=i,x=o-i,_=0;_<r.length;++_){var S=r[_];Rt(b,S.o,S,S.f,S.u,S.c.length);var E=30+S.f.length+It(S.extra);b.set(S.c,S.o+E),Rt(b,i,S,S.f,S.u,S.c.length,S.o,S.m),i+=16+E+(S.m?S.m.length:0)}return Lt(b,i,r.length,x,w),b}var Vt=function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e}(),zt=function(){function e(){var e=this;this.i=new qe((function(t,n){e.ondata(null,t,n)}))}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(n){this.ondata(n,e,t)}},e.compression=8,e}(),Ut=function(){function e(e,t){var n=this;t<32e4?this.i=new qe((function(e,t){n.ondata(null,e,t)})):(this.i=new Ye((function(e,t,r){n.ondata(e,t,r)})),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=te(e,0)),this.i.push(e,t)},e.compression=8,e}(),jt=function(){function e(e){this.onfile=e,this.k=[],this.o={0:Vt},this.p=he}return e.prototype.push=function(e,t){var n=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var r=Math.min(this.c,e.length),i=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(i,!this.c):this.k[0].push(i),(e=e.subarray(r)).length)return this.push(e,t)}else{var o=0,s=0,a=void 0,l=void 0;this.p.length?e.length?((l=new k(this.p.length+e.length)).set(this.p),l.set(e,this.p.length)):l=this.p:l=e;for(var c=l.length,u=this.c,d=u&&this.d,h=function(){var e,t=Oe(l,s);if(67324752==t){o=1,a=s,f.d=null,f.c=0;var r=Le(l,s+6),i=Le(l,s+8),d=2048&r,h=8&r,p=Le(l,s+26),m=Le(l,s+28);if(c>s+30+p+m){var g=[];f.k.unshift(g),o=2;var v,y=Oe(l,s+18),b=Oe(l,s+22),w=Ct(l.subarray(s+30,s+=30+p),!d);4294967295==y?(e=h?[-2]:At(l,s),y=e[0],b=e[1]):h&&(y=-1),s+=m,f.c=y;var x={name:w,compression:i,start:function(){if(!x.ondata)throw"no callback";if(y){var e=n.o[i];if(!e)throw"unknown compression type "+i;(v=y<0?new e(w):new e(w,y,b)).ondata=function(e,t,n){x.ondata(e,t,n)};for(var t=0,r=g;t<r.length;t++){var o=r[t];v.push(o,!1)}n.k[0]==g&&n.c?n.d=v:v.push(he,!0)}else x.ondata(null,he,!0)},terminate:function(){v&&v.terminate&&v.terminate()}};y>=0&&(x.size=y,x.originalSize=b),f.onfile(x)}return"break"}if(u){if(134695760==t)return a=s+=12+(-2==u&&8),o=3,f.c=0,"break";if(33639248==t)return a=s-=4,o=3,f.c=0,"break"}},f=this;s<c-4;++s){if("break"===h())break}if(this.p=he,u<0){var p=o?l.subarray(0,a-12-(-2==u&&8)-(134695760==Oe(l,a-16)&&4)):l.subarray(0,s);d?d.push(p,!!o):this.k[+(2==o)].push(p)}if(2&o)return this.push(l.subarray(s),t);this.p=l.subarray(s)}if(t){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(e){this.o[e.compression]=e},e}();function Ht(e,t){if("function"!=typeof t)throw"no callback";for(var n=[],r=function(){for(var e=0;e<n.length;++e)n[e]()},i={},o=e.length-22;101010256!=Oe(e,o);--o)if(!o||e.length-o>65558)return void t("invalid zip file",null);var s=Le(e,o+8);s||t(null,{});var a=s,l=Oe(e,o+16),c=4294967295==l;if(c){if(o=Oe(e,o-12),101075792!=Oe(e,o))return void t("invalid zip file",null);a=s=Oe(e,o+32),l=Oe(e,o+48)}for(var u=function(o){var a=Pt(e,l,c),u=a[0],d=a[1],h=a[2],f=a[3],p=a[4],m=a[5],g=kt(e,m);l=p;var v=function(e,n){e?(r(),t(e,null)):(i[f]=n,--s||t(null,i))};if(u)if(8==u){var y=e.subarray(g,g+d);if(d<32e4)try{v(null,Xe(y,new k(h)))}catch(e){v(e,null)}else n.push(Ke(y,{size:h},v))}else v("unknown compression type "+u,null);else v(null,te(e,g,g+d))},d=0;d<a;++d)u();return r}function Gt(e){for(var t={},n=e.length-22;101010256!=Oe(e,n);--n)if(!n||e.length-n>65558)throw"invalid zip file";var r=Le(e,n+8);if(!r)return{};var i=Oe(e,n+16),o=4294967295==i;if(o){if(n=Oe(e,n-12),101075792!=Oe(e,n))throw"invalid zip file";r=Oe(e,n+32),i=Oe(e,n+48)}for(var s=0;s<r;++s){var a=Pt(e,i,o),l=a[0],c=a[1],u=a[2],d=a[3],h=a[4],f=a[5],p=kt(e,f);if(i=h,l){if(8!=l)throw"unknown compression type "+l;t[d]=Xe(e.subarray(p,p+c),new k(u))}else t[d]=te(e,p,p+c)}return t}function Wt(e,t,n){const r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;let i=e,o=r,s=Math.floor((i+o)/2);for(;t<n[s]||t>=n[s+1];)t<n[s]?o=s:i=s,s=Math.floor((i+o)/2);return s}function $t(e,t,n,r){const i=[],o=[],s=[];i[0]=1;for(let a=1;a<=n;++a){o[a]=t-r[e+1-a],s[a]=r[e+a]-t;let n=0;for(let e=0;e<a;++e){const t=s[e+1],r=o[a-e],l=i[e]/(t+r);i[e]=n+t*l,n=r*l}i[a]=n}return i}function qt(e,t){let n=1;for(let t=2;t<=e;++t)n*=t;let r=1;for(let e=2;e<=t;++e)r*=e;for(let n=2;n<=e-t;++n)r*=n;return n/r}function Yt(e,t,n,r,i){const s=function(e,t,n,r,i){const s=i<e?i:e,a=[],l=Wt(e,r,t),c=function(e,t,n,r,i){const o=[];for(let e=0;e<=n;++e)o[e]=0;const s=[];for(let e=0;e<=r;++e)s[e]=o.slice(0);const a=[];for(let e=0;e<=n;++e)a[e]=o.slice(0);a[0][0]=1;const l=o.slice(0),c=o.slice(0);for(let r=1;r<=n;++r){l[r]=t-i[e+1-r],c[r]=i[e+r]-t;let n=0;for(let e=0;e<r;++e){const t=c[e+1],i=l[r-e];a[r][e]=t+i;const o=a[e][r-1]/a[r][e];a[e][r]=n+t*o,n=i*o}a[r][r]=n}for(let e=0;e<=n;++e)s[0][e]=a[e][n];for(let e=0;e<=n;++e){let t=0,i=1;const l=[];for(let e=0;e<=n;++e)l[e]=o.slice(0);l[0][0]=1;for(let o=1;o<=r;++o){let r=0;const c=e-o,u=n-o;e>=o&&(l[i][0]=l[t][0]/a[u+1][c],r=l[i][0]*a[c][u]);const d=e-1<=u?o-1:n-e;for(let e=c>=-1?1:-c;e<=d;++e)l[i][e]=(l[t][e]-l[t][e-1])/a[u+1][c+e],r+=l[i][e]*a[c+e][u];e<=u&&(l[i][o]=-l[t][o-1]/a[u+1][e],r+=l[i][o]*a[e][u]),s[o][e]=r;const h=t;t=i,i=h}}let u=n;for(let e=1;e<=r;++e){for(let t=0;t<=n;++t)s[e][t]*=u;u*=n-e}return s}(l,r,e,s,t),u=[];for(let e=0;e<n.length;++e){const t=n[e].clone(),r=t.w;t.x*=r,t.y*=r,t.z*=r,u[e]=t}for(let t=0;t<=s;++t){const n=u[l-e].clone().multiplyScalar(c[t][0]);for(let r=1;r<=e;++r)n.add(u[l-e+r].clone().multiplyScalar(c[t][r]));a[t]=n}for(let e=s+1;e<=i+1;++e)a[e]=new o.Vector4(0,0,0);return a}(e,t,n,r,i);return function(e){const t=e.length,n=[],r=[];for(let i=0;i<t;++i){const t=e[i];n[i]=new o.Vector3(t.x,t.y,t.z),r[i]=t.w}const i=[];for(let e=0;e<t;++e){const t=n[e].clone();for(let n=1;n<=e;++n)t.sub(i[e-n].clone().multiplyScalar(qt(e,n)*r[n]));i[e]=t.divideScalar(r[0])}return i}(s)}class Kt extends o.Curve{constructor(e,t,n,r,i){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=i||this.knots.length-1;for(let e=0;e<n.length;++e){const t=n[e];this.controlPoints[e]=new o.Vector4(t.x,t.y,t.z,t.w)}}getPoint(e,t=new o.Vector3){const n=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=function(e,t,n,r){const i=Wt(e,r,t),s=$t(i,r,e,t),a=new o.Vector4(0,0,0,0);for(let t=0;t<=e;++t){const r=n[i-e+t],o=s[t],l=r.w*o;a.x+=r.x*l,a.y+=r.y*l,a.z+=r.z*l,a.w+=r.w*o}return a}(this.degree,this.knots,this.controlPoints,r);return 1!==i.w&&i.divideScalar(i.w),n.set(i.x,i.y,i.z)}getTangent(e,t=new o.Vector3){const n=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),i=Yt(this.degree,this.knots,this.controlPoints,r,1);return n.copy(i[1]).normalize(),n}}let Xt,Jt,Qt;class en extends o.Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,s=""===i.path?o.LoaderUtils.extractUrlBase(e):i.path,a=new o.FileLoader(this.manager);a.setPath(i.path),a.setResponseType("arraybuffer"),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(n,s))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===yn(e,0,t.length)}(e))Xt=(new sn).parse(e);else{const t=yn(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(t){const r=e[t-1];return e=e.slice(n+t),n++,r}for(let e=0;e<t.length;++e){if(r(1)===t[e])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(cn(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+cn(t));Xt=(new on).parse(t)}const n=new o.TextureLoader(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new tn(n,this.manager).parse(Xt)}}class tn{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Jt=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),i=(new nn).parse(r);return this.parseScene(r,i,n),Qt}parseConnections(){const e=new Map;if("Connections"in Xt){Xt.Connections.connections.forEach((function(t){const n=t[0],r=t[1],i=t[2];e.has(n)||e.set(n,{parents:[],children:[]});const o={ID:r,relationship:i};e.get(n).parents.push(o),e.has(r)||e.set(r,{parents:[],children:[]});const s={ID:n,relationship:i};e.get(r).children.push(s)}))}return e}parseImages(){const e={},t={};if("Video"in Xt.Objects){const n=Xt.Objects.Video;for(const r in n){const i=n[r];if(e[parseInt(r)]=i.RelativeFilename||i.Filename,"Content"in i){const e=i.Content instanceof ArrayBuffer&&i.Content.byteLength>0,o="string"==typeof i.Content&&""!==i.Content;if(e||o){const e=this.parseImage(n[r]);t[i.RelativeFilename||i.Filename]=e}}}}for(const n in e){const r=e[n];void 0!==t[r]?e[n]=t[r]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();let i;switch(r){case"bmp":i="image/bmp";break;case"jpg":case"jpeg":i="image/jpeg";break;case"png":i="image/png";break;case"tif":i="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),i="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof t)return"data:"+i+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:i}))}}parseTextures(e){const t=new Map;if("Texture"in Xt.Objects){const n=Xt.Objects.Texture;for(const r in n){const i=this.parseTexture(n[r],e);t.set(parseInt(r),i)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const r=e.WrapModeU,i=e.WrapModeV,s=void 0!==r?r.value:0,a=void 0!==i?i.value:0;if(n.wrapS=0===s?o.RepeatWrapping:o.ClampToEdgeWrapping,n.wrapT=0===a?o.RepeatWrapping:o.ClampToEdgeWrapping,"Scaling"in e){const t=e.Scaling.value;n.repeat.x=t[0],n.repeat.y=t[1]}return n}loadTexture(e,t){let n;const r=this.textureLoader.path,i=Jt.get(e.id).children;let s;void 0!==i&&i.length>0&&void 0!==t[i[0].ID]&&(n=t[i[0].ID],0!==n.indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));const a=e.FileName.slice(-3).toLowerCase();if("tga"===a){const t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),s=new o.Texture):(t.setPath(this.textureLoader.path),s=t.load(n))}else"psd"===a?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),s=new o.Texture):s=this.textureLoader.load(n);return this.textureLoader.setPath(r),s}parseMaterials(e){const t=new Map;if("Material"in Xt.Objects){const n=Xt.Objects.Material;for(const r in n){const i=this.parseMaterial(n[r],e);null!==i&&t.set(parseInt(r),i)}}return t}parseMaterial(e,t){const n=e.id,r=e.attrName;let i=e.ShadingModel;if("object"==typeof i&&(i=i.value),!Jt.has(n))return null;const s=this.parseParameters(e,t,n);let a;switch(i.toLowerCase()){case"phong":a=new o.MeshPhongMaterial;break;case"lambert":a=new o.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',i),a=new o.MeshPhongMaterial}return a.setValues(s),a.name=r,a}parseParameters(e,t,n){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=(new o.Color).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(r.color=(new o.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=(new o.Color).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(r.emissive=(new o.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=(new o.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(r.specular=(new o.Color).fromArray(e.SpecularColor.value));const i=this;return Jt.get(n).children.forEach((function(e){const n=e.relationship;switch(n){case"Bump":r.bumpMap=i.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":r.aoMap=i.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=i.getTexture(t,e.ID),void 0!==r.map&&(r.map.encoding=o.sRGBEncoding);break;case"DisplacementColor":r.displacementMap=i.getTexture(t,e.ID);break;case"EmissiveColor":r.emissiveMap=i.getTexture(t,e.ID),void 0!==r.emissiveMap&&(r.emissiveMap.encoding=o.sRGBEncoding);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=i.getTexture(t,e.ID);break;case"ReflectionColor":r.envMap=i.getTexture(t,e.ID),void 0!==r.envMap&&(r.envMap.mapping=o.EquirectangularReflectionMapping,r.envMap.encoding=o.sRGBEncoding);break;case"SpecularColor":r.specularMap=i.getTexture(t,e.ID),void 0!==r.specularMap&&(r.specularMap.encoding=o.sRGBEncoding);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=i.getTexture(t,e.ID),r.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}})),r}getTexture(e,t){return"LayeredTexture"in Xt.Objects&&t in Xt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Jt.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Xt.Objects){const n=Xt.Objects.Deformer;for(const r in n){const i=n[r],o=Jt.get(parseInt(r));if("Skin"===i.attrType){const t=this.parseSkeleton(o,n);t.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=o.parents[0].ID,e[r]=t}else if("BlendShape"===i.attrType){const e={id:r};e.rawTargets=this.parseMorphTargets(o,n),e.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach((function(e){const r=t[e.ID];if("Cluster"!==r.attrType)return;const i={ID:e.ID,indices:[],weights:[],transformLink:(new o.Matrix4).fromArray(r.TransformLink.a)};"Indexes"in r&&(i.indices=r.Indexes.a,i.weights=r.Weights.a),n.push(i)})),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let r=0;r<e.children.length;r++){const i=e.children[r],o=t[i.ID],s={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;s.geoID=Jt.get(parseInt(i.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(s)}return n}parseScene(e,t,n){Qt=new o.Group;const r=this.parseModels(e.skeletons,t,n),i=Xt.Objects.Model,s=this;r.forEach((function(e){const t=i[e.ID];s.setLookAtProperties(e,t);Jt.get(e.ID).parents.forEach((function(t){const n=r.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&Qt.add(e)})),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),Qt.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=mn(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const a=(new rn).parse();1===Qt.children.length&&Qt.children[0].isGroup&&(Qt.children[0].animations=a,Qt=Qt.children[0]),Qt.animations=a}parseModels(e,t,n){const r=new Map,i=Xt.Objects.Model;for(const s in i){const a=parseInt(s),l=i[s],c=Jt.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,n);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new o.Bone;break;default:u=new o.Group}u.name=l.attrName?o.PropertyBinding.sanitizeNodeName(l.attrName):"",u.ID=a}this.getTransformData(u,l),r.set(a,u)}return r}buildSkeleton(e,t,n,r){let i=null;return e.parents.forEach((function(e){for(const s in t){const a=t[s];a.rawBones.forEach((function(t,s){if(t.ID===e.ID){const e=i;i=new o.Bone,i.matrixWorld.copy(t.transformLink),i.name=r?o.PropertyBinding.sanitizeNodeName(r):"",i.ID=n,a.bones[s]=i,null!==e&&i.add(e)}}))}})),i}createCamera(e){let t,n;if(e.children.forEach((function(e){const t=Xt.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new o.Object3D;else{let e=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(e=1);let r=1;void 0!==n.NearPlane&&(r=n.NearPlane.value/1e3);let i=1e3;void 0!==n.FarPlane&&(i=n.FarPlane.value/1e3);let s=window.innerWidth,a=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(s=n.AspectWidth.value,a=n.AspectHeight.value);const l=s/a;let c=45;void 0!==n.FieldOfView&&(c=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(e){case 0:t=new o.PerspectiveCamera(c,l,r,i),null!==u&&t.setFocalLength(u);break;case 1:t=new o.OrthographicCamera(-s/2,s/2,a/2,-a/2,r,i);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new o.Object3D}}return t}createLight(e){let t,n;if(e.children.forEach((function(e){const t=Xt.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new o.Object3D;else{let e;e=void 0===n.LightType?0:n.LightType.value;let r=16777215;void 0!==n.Color&&(r=(new o.Color).fromArray(n.Color.value));let i=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(i=0);let s=0;void 0!==n.FarAttenuationEnd&&(s=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);const a=1;switch(e){case 0:t=new o.PointLight(r,i,s,a);break;case 1:t=new o.DirectionalLight(r,i);break;case 2:let e=Math.PI/3;void 0!==n.InnerAngle&&(e=o.MathUtils.degToRad(n.InnerAngle.value));let l=0;void 0!==n.OuterAngle&&(l=o.MathUtils.degToRad(n.OuterAngle.value),l=Math.max(l,1)),t=new o.SpotLight(r,i,s,e,l,a);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new o.PointLight(r,i)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,n){let r,i=null,s=null;const a=[];return e.children.forEach((function(e){t.has(e.ID)&&(i=t.get(e.ID)),n.has(e.ID)&&a.push(n.get(e.ID))})),a.length>1?s=a:a.length>0?s=a[0]:(s=new o.MeshPhongMaterial({color:13421772}),a.push(s)),"color"in i.attributes&&a.forEach((function(e){e.vertexColors=!0})),i.FBX_Deformer?(r=new o.SkinnedMesh(i,s),r.normalizeSkinWeights()):r=new o.Mesh(i,s),r}createCurve(e,t){const n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),r=new o.LineBasicMaterial({color:3342591,linewidth:1});return new o.Line(n,r)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?gn(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){if("LookAtProperty"in t){Jt.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const n=Xt.Objects.Model[t.ID];if("Lcl_Translation"in n){const t=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),Qt.add(e.target)):e.lookAt((new o.Vector3).fromArray(t))}}}))}}bindSkeleton(e,t,n){const r=this.parsePoseNodes();for(const i in e){const s=e[i];Jt.get(parseInt(s.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;Jt.get(t).parents.forEach((function(e){if(n.has(e.ID)){n.get(e.ID).bind(new o.Skeleton(s.bones),r[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in Xt.Objects){const t=Xt.Objects.Pose;for(const n in t)if("BindPose"===t[n].attrType&&t[n].NbPoseNodes>0){const r=t[n].PoseNode;Array.isArray(r)?r.forEach((function(t){e[t.Node]=(new o.Matrix4).fromArray(t.Matrix.a)})):e[r.Node]=(new o.Matrix4).fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Xt&&"AmbientColor"in Xt.GlobalSettings){const e=Xt.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(0!==t||0!==n||0!==r){const e=new o.Color(t,n,r);Qt.add(new o.AmbientLight(e,1))}}}}class nn{parse(e){const t=new Map;if("Geometry"in Xt.Objects){const n=Xt.Objects.Geometry;for(const r in n){const i=Jt.get(parseInt(r)),o=this.parseGeometry(i,n[r],e);t.set(parseInt(r),o)}}return t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const r=n.skeletons,i=[],o=e.parents.map((function(e){return Xt.Objects.Model[e.ID]}));if(0===o.length)return;const s=e.children.reduce((function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&i.push(n.morphTargets[e.ID])}));const a=o[0],l={};"RotationOrder"in a&&(l.eulerOrder=gn(a.RotationOrder.value)),"InheritType"in a&&(l.inheritType=parseInt(a.InheritType.value)),"GeometricTranslation"in a&&(l.translation=a.GeometricTranslation.value),"GeometricRotation"in a&&(l.rotation=a.GeometricRotation.value),"GeometricScaling"in a&&(l.scale=a.GeometricScaling.value);const c=mn(l);return this.genGeometry(t,s,i,c)}genGeometry(e,t,n,r){const i=new o.BufferGeometry;e.attrName&&(i.name=e.attrName);const s=this.parseGeoNode(e,t),a=this.genBuffers(s),l=new o.Float32BufferAttribute(a.vertex,3);if(l.applyMatrix4(r),i.setAttribute("position",l),a.colors.length>0&&i.setAttribute("color",new o.Float32BufferAttribute(a.colors,3)),t&&(i.setAttribute("skinIndex",new o.Uint16BufferAttribute(a.weightsIndices,4)),i.setAttribute("skinWeight",new o.Float32BufferAttribute(a.vertexWeights,4)),i.FBX_Deformer=t),a.normal.length>0){const e=(new o.Matrix3).getNormalMatrix(r),t=new o.Float32BufferAttribute(a.normal,3);t.applyNormalMatrix(e),i.setAttribute("normal",t)}if(a.uvs.forEach((function(e,t){let n="uv"+(t+1).toString();0===t&&(n="uv"),i.setAttribute(n,new o.Float32BufferAttribute(a.uvs[t],2))})),s.material&&"AllSame"!==s.material.mappingType){let e=a.materialIndex[0],t=0;if(a.materialIndex.forEach((function(n,r){n!==e&&(i.addGroup(t,r-t,e),e=n,t=r)})),i.groups.length>0){const t=i.groups[i.groups.length-1],n=t.start+t.count;n!==a.materialIndex.length&&i.addGroup(n,a.materialIndex.length-n,e)}0===i.groups.length&&i.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(i,e,n,r),i}parseGeoNode(e,t){const n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,r=0,i=!1,o=[],s=[],a=[],l=[],c=[],u=[];const d=this;return e.vertexIndices.forEach((function(h,f){let p,m=!1;h<0&&(h^=-1,m=!0);let g=[],v=[];if(o.push(3*h,3*h+1,3*h+2),e.color){const t=hn(f,n,h,e.color);a.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[h]&&e.weightTable[h].forEach((function(e){v.push(e.weight),g.push(e.id)})),v.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);const e=[0,0,0,0],t=[0,0,0,0];v.forEach((function(n,r){let i=n,o=g[r];t.forEach((function(t,n,r){if(i>t){r[n]=i,i=t;const s=e[n];e[n]=o,o=s}}))})),g=e,v=t}for(;v.length<4;)v.push(0),g.push(0);for(let e=0;e<4;++e)c.push(v[e]),u.push(g[e])}if(e.normal){const t=hn(f,n,h,e.normal);s.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(p=hn(f,n,h,e.material)[0]),e.uv&&e.uv.forEach((function(e,t){const r=hn(f,n,h,e);void 0===l[t]&&(l[t]=[]),l[t].push(r[0]),l[t].push(r[1])})),r++,m&&(d.genFace(t,e,o,p,s,a,l,c,u,r),n++,r=0,o=[],s=[],a=[],l=[],c=[],u=[])})),t}genFace(e,t,n,r,i,o,s,a,l,c){for(let u=2;u<c;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(u-1)]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+2]]),e.vertex.push(t.vertexPositions[n[3*u]]),e.vertex.push(t.vertexPositions[n[3*u+1]]),e.vertex.push(t.vertexPositions[n[3*u+2]]),t.skeleton&&(e.vertexWeights.push(a[0]),e.vertexWeights.push(a[1]),e.vertexWeights.push(a[2]),e.vertexWeights.push(a[3]),e.vertexWeights.push(a[4*(u-1)]),e.vertexWeights.push(a[4*(u-1)+1]),e.vertexWeights.push(a[4*(u-1)+2]),e.vertexWeights.push(a[4*(u-1)+3]),e.vertexWeights.push(a[4*u]),e.vertexWeights.push(a[4*u+1]),e.vertexWeights.push(a[4*u+2]),e.vertexWeights.push(a[4*u+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(u-1)]),e.weightsIndices.push(l[4*(u-1)+1]),e.weightsIndices.push(l[4*(u-1)+2]),e.weightsIndices.push(l[4*(u-1)+3]),e.weightsIndices.push(l[4*u]),e.weightsIndices.push(l[4*u+1]),e.weightsIndices.push(l[4*u+2]),e.weightsIndices.push(l[4*u+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(u-1)]),e.colors.push(o[3*(u-1)+1]),e.colors.push(o[3*(u-1)+2]),e.colors.push(o[3*u]),e.colors.push(o[3*u+1]),e.colors.push(o[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(u-1)]),e.normal.push(i[3*(u-1)+1]),e.normal.push(i[3*(u-1)+2]),e.normal.push(i[3*u]),e.normal.push(i[3*u+1]),e.normal.push(i[3*u+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(s[n][0]),e.uvs[n].push(s[n][1]),e.uvs[n].push(s[n][2*(u-1)]),e.uvs[n].push(s[n][2*(u-1)+1]),e.uvs[n].push(s[n][2*u]),e.uvs[n].push(s[n][2*u+1])}))}addMorphTargets(e,t,n,r){if(0===n.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const i=this;n.forEach((function(n){n.rawTargets.forEach((function(n){const o=Xt.Objects.Geometry[n.geoID];void 0!==o&&i.genMorphGeometry(e,t,o,r,n.name)}))}))}genMorphGeometry(e,t,n,r,i){const s=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],a=void 0!==n.Vertices?n.Vertices.a:[],l=void 0!==n.Indexes?n.Indexes.a:[],c=3*e.attributes.position.count,u=new Float32Array(c);for(let e=0;e<l.length;e++){const t=3*l[e];u[t]=a[3*e],u[t+1]=a[3*e+1],u[t+2]=a[3*e+2]}const d={vertexIndices:s,vertexPositions:u},h=this.genBuffers(d),f=new o.Float32BufferAttribute(h.vertex,3);f.name=i||n.attrName,f.applyMatrix4(r),e.morphAttributes.position.push(f)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a;let i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a;let i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a;let i=[];return"IndexToDirect"===n&&(i=e.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const r=e.Materials.a,i=[];for(let e=0;e<r.length;++e)i.push(e);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}}parseNurbsGeometry(e){if(void 0===Kt)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new o.BufferGeometry;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new o.BufferGeometry;const n=t-1,r=e.KnotVector.a,i=[],s=e.Points.a;for(let e=0,t=s.length;e<t;e+=4)i.push((new o.Vector4).fromArray(s,e));let a,l;if("Closed"===e.Form)i.push(i[0]);else if("Periodic"===e.Form){a=n,l=r.length-1-a;for(let e=0;e<n;++e)i.push(i[e])}const c=new Kt(n,r,i,a,l).getPoints(12*i.length);return(new o.BufferGeometry).setFromPoints(c)}}class rn{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const n in t){const r=t[n],i=this.addClip(r);e.push(i)}return e}parseClips(){if(void 0===Xt.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Xt.Objects.AnimationCurveNode,t=new Map;for(const n in e){const r=e[n];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){const e={id:r.id,attr:r.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=Xt.Objects.AnimationCurve;for(const n in t){const r={id:t[n].id,times:t[n].KeyTime.a.map(un),values:t[n].KeyValueFloat.a},i=Jt.get(r.id);if(void 0!==i){const t=i.parents[0].ID,n=i.parents[0].relationship;n.match(/X/)?e.get(t).curves.x=r:n.match(/Y/)?e.get(t).curves.y=r:n.match(/Z/)?e.get(t).curves.z=r:n.match(/d|DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=r)}}}parseAnimationLayers(e){const t=Xt.Objects.AnimationLayer,n=new Map;for(const r in t){const t=[],i=Jt.get(parseInt(r));if(void 0!==i){i.children.forEach((function(n,r){if(e.has(n.ID)){const i=e.get(n.ID);if(void 0!==i.curves.x||void 0!==i.curves.y||void 0!==i.curves.z){if(void 0===t[r]){const e=Jt.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const i=Xt.Objects.Model[e.toString()];if(void 0===i)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",n);const s={modelName:i.attrName?o.PropertyBinding.sanitizeNodeName(i.attrName):"",ID:i.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Qt.traverse((function(e){e.ID===i.id&&(s.transform=e.matrix,e.userData.transformData&&(s.eulerOrder=e.userData.transformData.eulerOrder))})),s.transform||(s.transform=new o.Matrix4),"PreRotation"in i&&(s.preRotation=i.PreRotation.value),"PostRotation"in i&&(s.postRotation=i.PostRotation.value),t[r]=s}}t[r]&&(t[r][i.attr]=i)}else if(void 0!==i.curves.morph){if(void 0===t[r]){const e=Jt.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,i=Jt.get(e).parents[0].ID,s=Jt.get(i).parents[0].ID,a=Jt.get(s).parents[0].ID,l=Xt.Objects.Model[a],c={modelName:l.attrName?o.PropertyBinding.sanitizeNodeName(l.attrName):"",morphName:Xt.Objects.Deformer[e].attrName};t[r]=c}t[r][i.attr]=i}}})),n.set(parseInt(r),t)}}return n}parseAnimStacks(e){const t=Xt.Objects.AnimationStack,n={};for(const r in t){const i=Jt.get(parseInt(r)).children;i.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(i[0].ID);n[r]={name:t[r].attrName,layer:o}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new o.AnimationClip(e.name,-1,t)}generateTracks(e){const t=[];let n=new o.Vector3,r=new o.Quaternion,i=new o.Vector3;if(e.transform&&e.transform.decompose(n,r,i),n=n.toArray(),r=(new o.Euler).setFromQuaternion(r,e.eulerOrder).toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==r&&t.push(r)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const n=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);void 0!==n&&t.push(n)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==n&&t.push(n)}if(void 0!==e.DeformPercent){const n=this.generateMorphTrack(e);void 0!==n&&t.push(n)}return t}generateVectorTrack(e,t,n,r){const i=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(i,t,n);return new o.VectorKeyframeTrack(e+"."+r,i,s)}generateRotationTrack(e,t,n,r,i,s){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(o.MathUtils.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(o.MathUtils.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(o.MathUtils.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,n);void 0!==r&&((r=r.map(o.MathUtils.degToRad)).push(s),r=(new o.Euler).fromArray(r),r=(new o.Quaternion).setFromEuler(r)),void 0!==i&&((i=i.map(o.MathUtils.degToRad)).push(s),i=(new o.Euler).fromArray(i),i=(new o.Quaternion).setFromEuler(i).invert());const c=new o.Quaternion,u=new o.Euler,d=[];for(let e=0;e<l.length;e+=3)u.set(l[e],l[e+1],l[e+2],s),c.setFromEuler(u),void 0!==r&&c.premultiply(r),void 0!==i&&c.multiply(i),c.toArray(d,e/3*4);return new o.QuaternionKeyframeTrack(e+".quaternion",a,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),r=Qt.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new o.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,n=t[0];for(let r=1;r<t.length;r++){const i=t[r];i!==n&&(t[e]=i,n=i,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,n){const r=n,i=[];let o=-1,s=-1,a=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(s=t.y.times.indexOf(e)),t.z&&(a=t.z.times.indexOf(e)),-1!==o){const e=t.x.values[o];i.push(e),r[0]=e}else i.push(r[0]);if(-1!==s){const e=t.y.values[s];i.push(e),r[1]=e}else i.push(r[1]);if(-1!==a){const e=t.z.values[a];i.push(e),r[2]=e}else i.push(r[2])})),i}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],r=e.values[t]-n,i=Math.abs(r);if(i>=180){const o=i/180,s=r/o;let a=n+s;const l=e.times[t-1],c=(e.times[t]-l)/o;let u=l+c;const d=[],h=[];for(;u<e.times[t];)d.push(u),u+=c,h.push(a),a+=s;e.times=bn(e.times,t,d),e.values=bn(e.values,t,h)}}}}class on{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new ln,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){const i=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(i||o)return;const s=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),a=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");s?t.parseNodeBegin(e,s):a?t.parseNodeProperty(e,a,n[++r]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},o=this.parseNodeAttr(r),s=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in s?("PoseNode"===n?s.PoseNode.push(i):void 0!==s[n].id&&(s[n]={},s[n][s[n].id]=s[n]),""!==o.id&&(s[n][o.id]=i)):"number"==typeof o.id?(s[n]={},s[n][o.id]=i):"Properties70"!==n&&(s[n]="PoseNode"===n?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){const e=i.split(",").slice(1),t=parseInt(e[0]),n=parseInt(e[1]);let s=i.split(",").slice(3);s=s.map((function(e){return e.trim().replace(/^"/,"")})),r="connections",i=[t,n],function(e,t){for(let n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i,s),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=i),r in o&&Array.isArray(o[r])?o[r].push(i):"a"!==r?o[r]=i:o.a=i,this.setCurrentProp(o,r),"a"===r&&","!==i.slice(-1)&&(o.a=vn(i))}else this.parseNodeSpecialProperty(e,r,i)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=vn(t.a))}parseNodeSpecialProperty(e,t,n){const r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],o=r[1],s=r[2],a=r[3];let l=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=vn(l)}this.getPrevNode()[i]={type:o,type2:s,flag:a,value:l},this.setCurrentProp(this.getPrevNode(),i)}}class sn{parse(e){const t=new an(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const r=new ln;for(;!this.endOfContent(t);){const e=this.parseNode(t,n);null!==e&&r.add(e.name,e)}return r}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),s=e.getString(o);if(0===r)return null;const a=[];for(let t=0;t<i;t++)a.push(this.parseProperty(e));const l=a.length>0?a[0]:"",c=a.length>1?a[1]:"",u=a.length>2?a[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){const r=this.parseNode(e,t);null!==r&&this.parseSubNode(s,n,r)}return n.propertyList=a,"number"==typeof l&&(n.id=l),""!==c&&(n.attrName=c),""!==u&&(n.attrType=u),""!==s&&(n.name=s),n}parseSubNode(e,t,n){if(!0===n.singleProperty){const e=n.propertyList[0];Array.isArray(e)?(t[n.name]=n,n.a=e):t[n.name]=e}else if("Connections"===e&&"C"===n.name){const e=[];n.propertyList.forEach((function(t,n){0!==n&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){let e=n.propertyList[0],r=n.propertyList[1];const i=n.propertyList[2],o=n.propertyList[3];let s;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),s="Color"===r||"ColorRGB"===r||"Vector"===r||"Vector3D"===r||0===r.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[e]={type:r,type2:i,flag:o,value:s}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),o=e.getUint32(),s=e.getUint32();if(0===o)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}void 0===r&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const a=ft(new Uint8Array(e.getArrayBuffer(s))),l=new an(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class an{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1==(1&this.getUint8())}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let n=0;n<e;n++)t[n]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),o.LoaderUtils.decodeText(new Uint8Array(t))}}class ln{add(e,t){this[e]=t}}function cn(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function un(e){return e/46186158e3}const dn=[];function hn(e,t,n,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);const o=i*r.dataSize,s=o+r.dataSize;return function(e,t,n,r){for(let i=n,o=0;i<r;i++,o++)e[o]=t[i];return e}(dn,r.buffer,o,s)}const fn=new o.Euler,pn=new o.Vector3;function mn(e){const t=new o.Matrix4,n=new o.Matrix4,r=new o.Matrix4,i=new o.Matrix4,s=new o.Matrix4,a=new o.Matrix4,l=new o.Matrix4,c=new o.Matrix4,u=new o.Matrix4,d=new o.Matrix4,h=new o.Matrix4,f=new o.Matrix4,p=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(pn.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(o.MathUtils.degToRad);t.push(e.eulerOrder),n.makeRotationFromEuler(fn.fromArray(t))}if(e.rotation){const t=e.rotation.map(o.MathUtils.degToRad);t.push(e.eulerOrder),r.makeRotationFromEuler(fn.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(o.MathUtils.degToRad);t.push(e.eulerOrder),i.makeRotationFromEuler(fn.fromArray(t)),i.invert()}e.scale&&s.scale(pn.fromArray(e.scale)),e.scalingOffset&&l.setPosition(pn.fromArray(e.scalingOffset)),e.scalingPivot&&a.setPosition(pn.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(pn.fromArray(e.rotationOffset)),e.rotationPivot&&u.setPosition(pn.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(h.copy(e.parentMatrix),d.copy(e.parentMatrixWorld));const m=n.clone().multiply(r).multiply(i),g=new o.Matrix4;g.extractRotation(d);const v=new o.Matrix4;v.copyPosition(d);const y=v.clone().invert().multiply(d),b=g.clone().invert().multiply(y),w=s,x=new o.Matrix4;if(0===p)x.copy(g).multiply(m).multiply(b).multiply(w);else if(1===p)x.copy(g).multiply(b).multiply(m).multiply(w);else{const e=(new o.Matrix4).scale((new o.Vector3).setFromMatrixScale(h)).clone().invert(),t=b.clone().multiply(e);x.copy(g).multiply(m).multiply(t).multiply(w)}const _=u.clone().invert(),S=a.clone().invert();let E=t.clone().multiply(c).multiply(u).multiply(n).multiply(r).multiply(i).multiply(_).multiply(l).multiply(a).multiply(s).multiply(S);const T=(new o.Matrix4).copyPosition(E),C=d.clone().multiply(T);return f.copyPosition(C),E=f.clone().multiply(x),E.premultiply(d.invert()),E}function gn(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function vn(e){return e.split(",").map((function(e){return parseFloat(e)}))}function yn(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),o.LoaderUtils.decodeText(new Uint8Array(e,t,n))}function bn(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}var wn=n(1217),xn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class _n{constructor(e,t){this.cache=e,this.textureAnisotropy=t}get fileLoader(){return this._fileLoader||(this._fileLoader=new o.FileLoader),this._fileLoader}get imageLoader(){return this._imgLoader||(this._imgLoader=new o.ImageLoader),this._imgLoader}get svgLoader(){return this._svgLoader||(this._svgLoader=new f),this._svgLoader}get textureLoader(){return this._textureLoader||(this._textureLoader=new o.TextureLoader),this._textureLoader}get objectLoader(){return this._objectLoader||(this._objectLoader=new o.ObjectLoader),this._objectLoader}get gltfLoader(){return this._gltfLoader||(this._gltfLoader=new wn.GLTFLoader),this._gltfLoader}get fbxLoader(){return this._fbxLoader||(this._fbxLoader=new en),this._fbxLoader}preload(e,t){return xn(this,void 0,void 0,(function*(){return this.cache.add(e,t),new Promise((e=>{const n=/\.fbx$|\.glb$|\.gltf$/.test(t);/\.jpe?g$|\.png$/.test(t)?this.textureLoader.load(t,(t=>e(t))):(n&&this.fileLoader.setResponseType("arraybuffer"),this.fileLoader.load(t,(t=>e(t))))}))}))}textureAtlas(e,t,n="JSONHash"){return xn(this,void 0,void 0,(function*(){let n=JSON.parse(yield this.file(t));if(n.textures){const e=n.textures[0].frames;let t={frames:{}};e.forEach((e=>{t=Object.assign(Object.assign({},t),{frames:Object.assign(Object.assign({},t.frames),{[e.filename]:{frame:e.frame,rotated:e.rotated,sourceSize:e.sourceSize,spriteSourceSize:e.spriteSourceSize,trimmed:e.trimmed}})})})),n=t}return{texture:yield this.texture(e),json:n}}))}file(e){const t=this.cache.get(e);return e=t||e,new Promise((t=>{this.fileLoader.load(e,(e=>t(e)))}))}svg(e){const t=this.cache.get(e);return e=t||e,new Promise((t=>{this.svgLoader.load(e,(e=>t(e)))}))}texture(e){if(!/^data:image\/[\S]+;base64,/gm.test(e)){const t=this.cache.get(e);e=t||e}return new Promise((t=>{this.textureLoader.load(e,(e=>{e.anisotropy=this.textureAnisotropy,e.needsUpdate=!0,t(e)}))}))}object(e){const t=this.cache.get(e);return e=t||e,new Promise((t=>{this.objectLoader.load(e,(e=>{t(e)}))}))}gltf(e){const t=this.cache.get(e);return e=t||e,new Promise((t=>{this.gltfLoader.load(e,(e=>{t(e)}))}))}fbx(e){const t=this.cache.get(e);return e=t||e,new Promise((t=>{this.fbxLoader.load(e,(e=>{t(e)}))}))}}class Sn extends o.Object3D{constructor(e,t,n,r){super(),this.scene=e,this.light=t,this.size=n,this.color=r,this.geo=new o.SphereBufferGeometry(n||.2,16,8),this.mat=new o.MeshBasicMaterial({color:r||t.color}),this.mesh=new o.Mesh(this.geo,this.mat),this.add(this.mesh),t.add(this)}dispose(){this.mesh.geometry.dispose(),Array.isArray(this.mesh.material)?this.mesh.material.forEach((e=>e.dispose())):this.mesh.material.dispose(),this.remove(this.mesh)}update(){}}class En{constructor(e){this.scene=e}get helper(){return{directionalLightHelper:(e,t,n)=>{const r=new o.DirectionalLightHelper(e,t,n);return this.scene.add(r),r},spotLightHelper:(e,t)=>{const n=new o.SpotLightHelper(e,t);return this.scene.add(n),n},pointLightHelper:(e,t,n)=>new Sn(this.scene,e,t,n)}}directionalLight(e={}){const{color:t=16777215,intensity:n=1}=e,r=new o.DirectionalLight(t,n);return r.castShadow=!0,this.scene.add(r),r}hemisphereLight(e={}){const{skyColor:t=16777215,groundColor:n=16777215,intensity:r=1}=e,i=new o.HemisphereLight(t,n,r);return this.scene.add(i),i}ambientLight(e={}){const{color:t=16777215,intensity:n=1}=e,r=new o.AmbientLight(t,n);return this.scene.add(r),r}pointLight(e={}){const{color:t=16777215,intensity:n=1,distance:r=0,decay:i=1}=e,s=new o.PointLight(t,n,r,i);return s.castShadow=!0,this.scene.add(s),s}spotLight(e={}){const{color:t=16777215,intensity:n=1,distance:r=0,angle:i=Math.PI/8,penumbra:s=0,decay:a=1}=e,l=new o.SpotLight(t,n,r,i,s,a);return l.castShadow=!0,this.scene.add(l),l}rectAreaLight(e={}){const{color:t=16777215,intensity:n=1,width:r=10,height:i=10}=e,s=new o.RectAreaLight(t,n,r,i);return this.scene.add(s),s}}var Tn=n(85958),Cn=n(45326);class Mn{constructor(e){this.scene=e}add(e,t={}){const n=this.make(e,t);return n?this.scene.add(n):console.warn("Could not make heightmap"),n}make(e,t={}){const{image:n}=e,{width:r,height:i}=n,{colorScale:s}=t,a=document.createElement("canvas");a.width=r,a.height=i;const l=a.getContext("2d");if(!l)return;l.drawImage(e.image,0,0);const u=l.getImageData(0,0,r,i),d=(new c).fromBufferGeometry(new o.PlaneBufferGeometry(10,10,r-1,i-1));let h={color:13421772,side:o.DoubleSide};s&&(h=Object.assign(Object.assign({},h),{vertexColors:!0}));const f=new o.MeshPhongMaterial(h),p=new Cn.f(d,f);p.receiveShadow=p.castShadow=!0,p.shape="concave";const g=p.geometry;for(let e=0;e<g.vertices.length;e++)g.vertices[e].z=u.data[4*e]/120;return s&&g.faces.forEach((e=>e.color=new o.Color(s(((e,t)=>{var n=e.vertices[t.a].z,r=e.vertices[t.b].z,i=e.vertices[t.c].z;return Math.max(n,r,i)})(g,e)).hex()))),p.rotateX(-Math.PI/2),p.updateMatrix(),d.computeFaceNormals(),d.computeVertexNormals(),p.name="heightmap",p.geometry=m(new o.BufferGeometry,p.geometry),p}}var kn=n(69365),Pn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class An{constructor(e,t,n,r,i,o,s){this.scene=e,this.renderer=t,this.camera=n,this.lights=r,this.physics=i,this.load=o,this.factories=s}warpSpeed(...e){return Pn(this,void 0,void 0,(function*(){let t={};const n=e.filter((e=>/^-\w+/.test(e))),r=n.length>0;if((0===e.length||r)&&(e=["light","camera","lookAtCenter","ground","grid","orbitControls","fog","sky"]),r){n.map((e=>e.substr(1))).forEach((t=>{const n=e.indexOf(t);e.splice(n,1)}))}if(e.includes("sky")){const e=["varying vec3 vWorldPosition;","","void main() {","","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","","}"].join("\n"),t=["uniform vec3 topColor;","uniform vec3 bottomColor;","uniform float offset;","uniform float exponent;","","varying vec3 vWorldPosition;","","void main() {","","float h = normalize( vWorldPosition + offset ).y;","gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h , 0.0), exponent ), 0.0 ) ), 1.0 );","","}"].join("\n"),n={topColor:{value:new o.Color(30719)},bottomColor:{value:new o.Color(15595007)},offset:{value:33},exponent:{value:.6}};var i=new o.SphereBufferGeometry(500,32,15),s=new o.ShaderMaterial({uniforms:n,vertexShader:e,fragmentShader:t,side:o.BackSide}),a=new o.Mesh(i,s);this.scene.add(a)}if(e.includes("camera")&&(this.camera.position.set(0,6,12),t=Object.assign({camera:this.camera},t)),e.includes("light")){const e=.4,n=this.lights.hemisphereLight({skyColor:16777215,groundColor:0,intensity:e}),r=this.lights.ambientLight({color:16777215,intensity:e}),i=this.lights.directionalLight({color:16777215,intensity:e});i.position.set(100,200,50);const o=20;i.shadow.camera.top=o,i.shadow.camera.bottom=-o,i.shadow.camera.left=-o,i.shadow.camera.right=o,i.shadow.mapSize.set(1024,1024);const s={ambientLight:r,directionalLight:i,hemisphereLight:n};t=Object.assign({lights:s},t)}if(e.includes("lookAtCenter")&&this.camera.lookAt(this.scene.position),e.includes("ground")){const n=e.includes("grid"),r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOnAAADusBZ+q87AAAAJtJREFUeJzt0EENwDAAxLDbNP6UOxh+NEYQ5dl2drFv286598GrA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAa4AO0BqgA7QG6ACtATpAu37AD8eaBH5JQdVbAAAAAElFTkSuQmCC",i=yield this.load.texture(r);i.wrapS=i.wrapT=o.RepeatWrapping,i.repeat.set(21,21);const s={name:"ground",width:21,height:21,depth:1,y:-.5},a={phong:{map:n?i:null,color:16777215}};let l;window.__loadPhysics?(l=this.physics.add.ground(s,a),l.body.setRestitution(1)):l=this.factories.add.ground(s,a),l.receiveShadow=!0,t=Object.assign({ground:l},t)}if(e.includes("orbitControls")){const e=new kn.OrbitControls(this.camera,document.getElementById("enable3d-phaser-canvas")||this.renderer.domElement);t=Object.assign({orbitControls:e},t)}return t}))}}var In=class{constructor(){this._mixers=[]}animationMixer(e){const t=new o.AnimationMixer(e);return this.mixers.add(t),t}get mixers(){return{create:e=>this.animationMixer(e),add:e=>this._mixers.push(e),get:()=>this._mixers,update:e=>{var t;return null===(t=this._mixers)||void 0===t?void 0:t.forEach((t=>t.update(e/1e3)))}}}};class Rn extends o.Mesh{constructor(e,t={}){super(e),this.type="Reflector";const n=this,r=void 0!==t.color?new o.Color(t.color):new o.Color(8355711),i=t.textureWidth||512,s=t.textureHeight||512,a=t.clipBias||0,l=t.shader||Rn.ReflectorShader,c=new o.Plane,u=new o.Vector3,d=new o.Vector3,h=new o.Vector3,f=new o.Matrix4,p=new o.Vector3(0,0,-1),m=new o.Vector4,g=new o.Vector3,v=new o.Vector3,y=new o.Vector4,b=new o.Matrix4,w=new o.PerspectiveCamera,x={minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBFormat},_=new o.WebGLRenderTarget(i,s,x);o.MathUtils.isPowerOfTwo(i)&&o.MathUtils.isPowerOfTwo(s)||(_.texture.generateMipmaps=!1);const S=new o.ShaderMaterial({uniforms:o.UniformsUtils.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});S.uniforms.tDiffuse.value=_.texture,S.uniforms.color.value=r,S.uniforms.textureMatrix.value=b,this.material=S,this.onBeforeRender=function(e,t,r){if(d.setFromMatrixPosition(n.matrixWorld),h.setFromMatrixPosition(r.matrixWorld),f.extractRotation(n.matrixWorld),u.set(0,0,1),u.applyMatrix4(f),g.subVectors(d,h),g.dot(u)>0)return;g.reflect(u).negate(),g.add(d),f.extractRotation(r.matrixWorld),p.set(0,0,-1),p.applyMatrix4(f),p.add(h),v.subVectors(d,p),v.reflect(u).negate(),v.add(d),w.position.copy(g),w.up.set(0,1,0),w.up.applyMatrix4(f),w.up.reflect(u),w.lookAt(v),w.far=r.far,w.updateMatrixWorld(),w.projectionMatrix.copy(r.projectionMatrix),b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(w.projectionMatrix),b.multiply(w.matrixWorldInverse),b.multiply(n.matrixWorld),c.setFromNormalAndCoplanarPoint(u,d),c.applyMatrix4(w.matrixWorldInverse),m.set(c.normal.x,c.normal.y,c.normal.z,c.constant);const i=w.projectionMatrix;y.x=(Math.sign(m.x)+i.elements[8])/i.elements[0],y.y=(Math.sign(m.y)+i.elements[9])/i.elements[5],y.z=-1,y.w=(1+i.elements[10])/i.elements[14],m.multiplyScalar(2/m.dot(y)),i.elements[2]=m.x,i.elements[6]=m.y,i.elements[10]=m.z+1-a,i.elements[14]=m.w,_.texture.encoding=e.outputEncoding,n.visible=!1;const o=e.getRenderTarget(),s=e.xr.enabled,l=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(_),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,w),e.xr.enabled=s,e.shadowMap.autoUpdate=l,e.setRenderTarget(o);const x=r.viewport;void 0!==x&&e.state.viewport(x),n.visible=!0},this.getRenderTarget=function(){return _},this.dispose=function(){_.dispose(),n.material.dispose()}}}Rn.prototype.isReflector=!0,Rn.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}"};class Ln extends o.Mesh{constructor(e,t={}){super(e),this.type="Refractor";const n=this,r=void 0!==t.color?new o.Color(t.color):new o.Color(8355711),i=t.textureWidth||512,s=t.textureHeight||512,a=t.clipBias||0,l=t.shader||Ln.RefractorShader,c=new o.PerspectiveCamera;c.matrixAutoUpdate=!1,c.userData.refractor=!0;const u=new o.Plane,d=new o.Matrix4,h={minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBFormat},f=new o.WebGLRenderTarget(i,s,h);o.MathUtils.isPowerOfTwo(i)&&o.MathUtils.isPowerOfTwo(s)||(f.texture.generateMipmaps=!1),this.material=new o.ShaderMaterial({uniforms:o.UniformsUtils.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,transparent:!0}),this.material.uniforms.color.value=r,this.material.uniforms.tDiffuse.value=f.texture,this.material.uniforms.textureMatrix.value=d;const p=function(){const e=new o.Vector3,t=new o.Vector3,r=new o.Matrix4,i=new o.Vector3,s=new o.Vector3;return function(o){return e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(o.matrixWorld),i.subVectors(e,t),r.extractRotation(n.matrixWorld),s.set(0,0,1),s.applyMatrix4(r),i.dot(s)<0}}(),m=function(){const e=new o.Vector3,t=new o.Vector3,r=new o.Quaternion,i=new o.Vector3;return function(){n.matrixWorld.decompose(t,r,i),e.set(0,0,1).applyQuaternion(r).normalize(),e.negate(),u.setFromNormalAndCoplanarPoint(e,t)}}(),g=function(){const e=new o.Plane,t=new o.Vector4,n=new o.Vector4;return function(r){c.matrixWorld.copy(r.matrixWorld),c.matrixWorldInverse.copy(c.matrixWorld).invert(),c.projectionMatrix.copy(r.projectionMatrix),c.far=r.far,e.copy(u),e.applyMatrix4(c.matrixWorldInverse),t.set(e.normal.x,e.normal.y,e.normal.z,e.constant);const i=c.projectionMatrix;n.x=(Math.sign(t.x)+i.elements[8])/i.elements[0],n.y=(Math.sign(t.y)+i.elements[9])/i.elements[5],n.z=-1,n.w=(1+i.elements[10])/i.elements[14],t.multiplyScalar(2/t.dot(n)),i.elements[2]=t.x,i.elements[6]=t.y,i.elements[10]=t.z+1-a,i.elements[14]=t.w}}();this.onBeforeRender=function(e,t,r){f.texture.encoding=e.outputEncoding,!0!==r.userData.refractor&&!0!=!p(r)&&(m(),function(e){d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d.multiply(e.projectionMatrix),d.multiply(e.matrixWorldInverse),d.multiply(n.matrixWorld)}(r),g(r),function(e,t,r){n.visible=!1;const i=e.getRenderTarget(),o=e.xr.enabled,s=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(f),!1===e.autoClear&&e.clear(),e.render(t,c),e.xr.enabled=o,e.shadowMap.autoUpdate=s,e.setRenderTarget(i);const a=r.viewport;void 0!==a&&e.state.viewport(a),n.visible=!0}(e,t,r))},this.getRenderTarget=function(){return f},this.dispose=function(){f.dispose(),n.material.dispose()}}}Ln.prototype.isRefractor=!0,Ln.RefractorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec4 vUv;\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}"};class On extends o.Mesh{constructor(e,t={}){super(e),this.type="Water";const n=this,r=void 0!==t.color?new o.Color(t.color):new o.Color(16777215),i=t.textureWidth||512,s=t.textureHeight||512,a=t.clipBias||0,l=t.flowDirection||new o.Vector2(1,0),c=t.flowSpeed||.03,u=t.reflectivity||.02,d=t.scale||1,h=t.shader||On.WaterShader,f=new o.TextureLoader,p=t.flowMap||void 0,m=t.normalMap0||f.load("textures/water/Water_1_M_Normal.jpg"),g=t.normalMap1||f.load("textures/water/Water_2_M_Normal.jpg"),v=.15,y=.075,b=new o.Matrix4,w=new o.Clock;if(void 0===Rn)return void console.error("THREE.Water: Required component Reflector not found.");if(void 0===Ln)return void console.error("THREE.Water: Required component Refractor not found.");const x=new Rn(e,{textureWidth:i,textureHeight:s,clipBias:a}),_=new Ln(e,{textureWidth:i,textureHeight:s,clipBias:a});x.matrixAutoUpdate=!1,_.matrixAutoUpdate=!1,this.material=new o.ShaderMaterial({uniforms:o.UniformsUtils.merge([o.UniformsLib.fog,h.uniforms]),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,transparent:!0,fog:!0}),void 0!==p?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:p}):this.material.uniforms.flowDirection={type:"v2",value:l},m.wrapS=m.wrapT=o.RepeatWrapping,g.wrapS=g.wrapT=o.RepeatWrapping,this.material.uniforms.tReflectionMap.value=x.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=_.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=m,this.material.uniforms.tNormalMap1.value=g,this.material.uniforms.color.value=r,this.material.uniforms.reflectivity.value=u,this.material.uniforms.textureMatrix.value=b,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=y,this.material.uniforms.config.value.z=y,this.material.uniforms.config.value.w=d,this.onBeforeRender=function(e,t,r){!function(e){b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(e.projectionMatrix),b.multiply(e.matrixWorldInverse),b.multiply(n.matrixWorld)}(r),function(){const e=w.getDelta(),t=n.material.uniforms.config;t.value.x+=c*e,t.value.y=t.value.x+y,t.value.x>=v?(t.value.x=0,t.value.y=y):t.value.y>=v&&(t.value.y=t.value.y-v)}(),n.visible=!1,x.matrixWorld.copy(n.matrixWorld),_.matrixWorld.copy(n.matrixWorld),x.onBeforeRender(e,t,r),_.onBeforeRender(e,t,r),n.visible=!0}}}On.prototype.isWater=!0,On.WaterShader={uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new o.Vector4}},vertexShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\n\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tuniform sampler2D tReflectionMap;\n\t\tuniform sampler2D tRefractionMap;\n\t\tuniform sampler2D tNormalMap0;\n\t\tuniform sampler2D tNormalMap1;\n\n\t\t#ifdef USE_FLOWMAP\n\t\t\tuniform sampler2D tFlowMap;\n\t\t#else\n\t\t\tuniform vec2 flowDirection;\n\t\t#endif\n\n\t\tuniform vec3 color;\n\t\tuniform float reflectivity;\n\t\tuniform vec4 config;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tfloat flowMapOffset0 = config.x;\n\t\t\tfloat flowMapOffset1 = config.y;\n\t\t\tfloat halfCycle = config.z;\n\t\t\tfloat scale = config.w;\n\n\t\t\tvec3 toEye = normalize( vToEye );\n\n\t\t\t// determine flow direction\n\t\t\tvec2 flow;\n\t\t\t#ifdef USE_FLOWMAP\n\t\t\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;\n\t\t\t#else\n\t\t\t\tflow = flowDirection;\n\t\t\t#endif\n\t\t\tflow.x *= - 1.0;\n\n\t\t\t// sample normal maps (distort uvs with flowdata)\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\n\n\t\t\t// linear interpolate to get the final normal color\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\n\n\t\t\t// calculate normal vector\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\n\n\t\t\t// calculate final uv coords\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\n\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\n\t\t\tvec4 refractColor = texture2D( tRefractionMap, uv );\n\n\t\t\t// multiply water color with the mix of both textures\n\t\t\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}"};var Nn=n(54996);class Dn{constructor(e,t,n){this.scene=e,this.renderer=t,this.factories=n}water(e={}){((e,t,n={})=>{const{width:r=20,height:i=20,x:s=0,y:a=0,z:l=0,color:c="#ffffff",scale:u=4,flowX:d=1,flowY:h=1,normalMap0:f,normalMap1:p}=n,m=new o.PlaneBufferGeometry(r,i),g=new o.MeshStandardMaterial({color:30654,transparent:!0,opacity:.8}),v=new o.Mesh(m,g);v.position.set(s,a,l),v.rotation.x=-.5*Math.PI,e.add(v);const y=new o.PlaneBufferGeometry(r,i),b=new On(y,{color:c,scale:u,flowDirection:new o.Vector2(d,h),textureWidth:1024,textureHeight:1024,normalMap0:f,normalMap1:p,encoding:t.outputEncoding});b.position.set(s,a+.1,l),b.rotation.x=-.5*Math.PI,e.add(b)})(this.scene,this.renderer,e)}textureCube(e){6!==e.length&&(0,Nn.k)("You need to pass 6 urls to textureCube()");const t=new Fn;return e.forEach(((e,n)=>{e.wrapS=e.wrapT=o.RepeatWrapping;const r=this.factories.add.material({phong:{map:e}});t.materials[n]=r})),t}}class Fn{constructor(){this.materials=new Array(6)}get texture(){return{left:this.getTexture(0),right:this.getTexture(1),up:this.getTexture(2),down:this.getTexture(3),front:this.getTexture(4),back:this.getTexture(5)}}getTexture(e){return this.materials[e].map}}const Bn={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};async function Zn(e){const t=await fetch(e);if(t.ok)return t.json();throw new Error(t.statusText)}async function Vn(e,t,n=null,r=!0){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No basePath supplied");const i=await async function(e){if(!e)throw new Error("No basePath supplied");return await Zn(`${e}/profilesList.json`)}(t);let o;if(e.profiles.some((e=>{const n=i[e];return n&&(o={profileId:e,profilePath:`${t}/${n.path}`,deprecated:!!n.deprecated}),!!o})),!o){if(!n)throw new Error("No matching profile name found");const e=i[n];if(!e)throw new Error(`No matching profile name found and default profile "${n}" missing.`);o={profileId:n,profilePath:`${t}/${e.path}`,deprecated:!!e.deprecated}}const s=await Zn(o.profilePath);let a;if(r){let t;if(t="any"===e.handedness?s.layouts[Object.keys(s.layouts)[0]]:s.layouts[e.handedness],!t)throw new Error(`No matching handedness, ${e.handedness}, in profile ${o.profileId}`);t.assetPath&&(a=o.profilePath.replace("profile.json",t.assetPath))}return{profile:s,assetPath:a}}const zn={xAxis:0,yAxis:0,button:0,state:Bn.ComponentState.DEFAULT};class Un{constructor(e){this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===Bn.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(zn)}updateFromComponent({xAxis:e,yAxis:t,button:n,state:r}){const{normalizedXAxis:i,normalizedYAxis:o}=function(e=0,t=0){let n=e,r=t;if(Math.sqrt(e*e+t*t)>1){const i=Math.atan2(t,e);n=Math.cos(i),r=Math.sin(i)}return{normalizedXAxis:.5*n+.5,normalizedYAxis:.5*r+.5}}(e,t);switch(this.componentProperty){case Bn.ComponentProperty.X_AXIS:this.value=this.states.includes(r)?i:.5;break;case Bn.ComponentProperty.Y_AXIS:this.value=this.states.includes(r)?o:.5;break;case Bn.ComponentProperty.BUTTON:this.value=this.states.includes(r)?n:0;break;case Bn.ComponentProperty.STATE:this.valueNodeProperty===Bn.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(r):this.value=this.states.includes(r)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class jn{constructor(e,t){if(!(e&&t&&t.visualResponses&&t.gamepadIndices&&0!==Object.keys(t.gamepadIndices).length))throw new Error("Invalid arguments supplied");this.id=e,this.type=t.type,this.rootNodeName=t.rootNodeName,this.touchPointNodeName=t.touchPointNodeName,this.visualResponses={},Object.keys(t.visualResponses).forEach((e=>{const n=new Un(t.visualResponses[e]);this.visualResponses[e]=n})),this.gamepadIndices=Object.assign({},t.gamepadIndices),this.values={state:Bn.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(e){if(this.values.state=Bn.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&e.buttons.length>this.gamepadIndices.button){const t=e.buttons[this.gamepadIndices.button];this.values.button=t.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,t.pressed||1===this.values.button?this.values.state=Bn.ComponentState.PRESSED:(t.touched||this.values.button>Bn.ButtonTouchThreshold)&&(this.values.state=Bn.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===Bn.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>Bn.AxisTouchThreshold&&(this.values.state=Bn.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===Bn.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>Bn.AxisTouchThreshold&&(this.values.state=Bn.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach((e=>{e.updateFromComponent(this.values)}))}}class Hn{constructor(e,t,n){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No profile supplied");this.xrInputSource=e,this.assetUrl=n,this.id=t.profileId,this.layoutDescription=t.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach((e=>{const t=this.layoutDescription.components[e];this.components[e]=new jn(e,t)})),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach((t=>{e.push(t.data)})),e}updateFromGamepad(){Object.values(this.components).forEach((e=>{e.updateFromGamepad(this.xrInputSource.gamepad)}))}}class Gn extends o.Object3D{constructor(){super(),this.motionController=null,this.envMap=null}setEnvironmentMap(e){return this.envMap==e||(this.envMap=e,this.traverse((e=>{e.isMesh&&(e.material.envMap=this.envMap,e.material.needsUpdate=!0)}))),this}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach((e=>{Object.values(e.visualResponses).forEach((e=>{const{valueNode:t,minNode:n,maxNode:r,value:i,valueNodeProperty:o}=e;t&&(o===Bn.VisualResponseProperty.VISIBILITY?t.visible=i:o===Bn.VisualResponseProperty.TRANSFORM&&(t.quaternion.slerpQuaternions(n.quaternion,r.quaternion,i),t.position.lerpVectors(n.position,r.position,i)))}))})))}}function Wn(e,t){!function(e,t){Object.values(e.components).forEach((e=>{const{type:n,touchPointNodeName:r,visualResponses:i}=e;if(n===Bn.ComponentType.TOUCHPAD)if(e.touchPointNode=t.getObjectByName(r),e.touchPointNode){const t=new o.SphereGeometry(.001),n=new o.MeshBasicMaterial({color:255}),r=new o.Mesh(t,n);e.touchPointNode.add(r)}else console.warn(`Could not find touch dot, ${e.touchPointNodeName}, in touchpad component ${e.id}`);Object.values(i).forEach((e=>{const{valueNodeName:n,minNodeName:r,maxNodeName:i,valueNodeProperty:o}=e;if(o===Bn.VisualResponseProperty.TRANSFORM){if(e.minNode=t.getObjectByName(r),e.maxNode=t.getObjectByName(i),!e.minNode)return void console.warn(`Could not find ${r} in the model`);if(!e.maxNode)return void console.warn(`Could not find ${i} in the model`)}e.valueNode=t.getObjectByName(n),e.valueNode||console.warn(`Could not find ${n} in the model`)}))}))}(e.motionController,t),e.envMap&&t.traverse((t=>{t.isMesh&&(t.material.envMap=e.envMap,t.material.needsUpdate=!0)})),e.add(t)}class $n{constructor(e=null){this.gltfLoader=e,this.path="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",this._assetCache={},this.gltfLoader||(this.gltfLoader=new wn.GLTFLoader)}createControllerModel(e){const t=new Gn;let n=null;return e.addEventListener("connected",(e=>{const r=e.data;"tracked-pointer"===r.targetRayMode&&r.gamepad&&Vn(r,this.path,"generic-trigger").then((({profile:e,assetPath:i})=>{t.motionController=new Hn(r,e,i);const o=this._assetCache[t.motionController.assetUrl];if(o)n=o.scene.clone(),Wn(t,n);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(t.motionController.assetUrl,(e=>{this._assetCache[t.motionController.assetUrl]=e,n=e.scene.clone(),Wn(t,n)}),null,(()=>{throw new Error(`Asset ${t.motionController.assetUrl} missing or malformed.`)}))}})).catch((e=>{console.warn(e)}))})),e.addEventListener("disconnected",(()=>{t.motionController=null,t.remove(n),n=null})),t}}class qn{constructor(e,t,n){this._renderer=e,this._scene=t,this._camera=n,this.controllerModelFactory=new $n,this.cameraGroup=new o.Group,this.cameraGroup.add(n),t.add(this.cameraGroup),e.xr.enabled=!0;const r=class{static createButton(e,t){t&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');const n=document.createElement("button");function r(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null,n.textContent="VR NOT SUPPORTED"}function i(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return n.id="VRButton",n.style.display="none",i(n),navigator.xr.isSessionSupported("immersive-vr").then((function(t){t?function(){let t=null;async function r(r){r.addEventListener("end",i),await e.xr.setSession(r),n.textContent="EXIT VR",t=r}function i(){t.removeEventListener("end",i),n.textContent="ENTER VR",t=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="ENTER VR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){if(null===t){const e={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",e).then(r)}else t.end()}}():r()})),n;{const e=document.createElement("a");return!1===window.isSecureContext?(e.href=document.location.href.replace(/^http:/,"https:"),e.innerHTML="WEBXR NEEDS HTTPS"):(e.href="https://immersiveweb.dev/",e.innerHTML="WEBXR NOT AVAILABLE"),e.style.left="calc(50% - 90px)",e.style.width="180px",e.style.textDecoration="none",i(e),e}}}.createButton(e);r.style.cssText+="background: rgba(0, 0, 0, 0.8); ",document.body.appendChild(r)}get isPresenting(){var e,t;return!!(null===(t=null===(e=this._renderer)||void 0===e?void 0:e.xr)||void 0===t?void 0:t.isPresenting)}getController(e){const t=this._renderer.xr.getController(e);return this.cameraGroup.add(t),t}getControllerGrip(e){const t=this._renderer.xr.getControllerGrip(e),n=this.controllerModelFactory.createControllerModel(t);return t.add(n),this.cameraGroup.add(t),t}getControllerRay(e){const{targetRayMode:t}=e;if("tracked-pointer"===t){const e=new o.BufferGeometry;e.setAttribute("position",new o.Float32BufferAttribute([0,0,0,0,0,-1],3)),e.setAttribute("color",new o.Float32BufferAttribute([1,0,0,1,1,1],3));const t=new o.LineBasicMaterial({vertexColors:!0});return new o.Line(e,t)}if("gaze"===t){const e=new o.RingBufferGeometry(.02,.04,32).translate(0,0,-1),t=new o.MeshBasicMaterial({color:"red",opacity:.5,transparent:!0});return new o.Mesh(e,t)}}get camera(){return this.WebXRCamera}get WebXRCamera(){var e;return{group:this.cameraGroup,position:null===(e=this.cameraGroup)||void 0===e?void 0:e.position,rotation:this.isPresenting?this._renderer.xr.getCamera(this._camera).rotation:void 0,getWorldDirection:e=>this.isPresenting?this._renderer.xr.getCamera(this._camera).getWorldDirection(e):void 0}}}var Yn=(e=20,t)=>{if(window.__loadPhysics)for(let n=0;n<e;n++){const e=["standard","basic","normal","phong","line","points"],n=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),r=e=>e[Math.floor(Math.random()*e.length)];Math.random()>.5?t.add.box({x:n(-10,10),y:n(10,20),z:n(-10,10),width:n(1,2)/10,height:n(1,2)/10,depth:n(1,2)/10,mass:1},{[r(e)]:{color:Math.floor(16777215*Math.random())}}).body.setRestitution(Math.floor(10*Math.random())/20):t.add.sphere({x:n(-10,10),y:n(10,20),z:n(-10,10),radius:n(1,2)/10,mass:1},{[r(e)]:{color:Math.floor(16777215*Math.random())}}).body.setRestitution(Math.floor(10*Math.random())/20)}else console.log("There is not much fun without physics enabled!")};class Kn{perspectiveCamera(e={}){return Kn.Perspective(e)}orthographicCamera(e={}){return Kn.Orthographic(e)}static Perspective(e={}){const{fov:t=50,aspect:n=window.innerWidth/window.innerHeight,near:r=.1,far:i=2e3,x:s=0,y:a=5,z:l=25}=e,c=new o.PerspectiveCamera(t,n,r,i);return c.position.set(s,a,l),c}static Orthographic(e={}){const t=window.innerWidth,n=window.innerHeight,{left:r=t/-2,right:i=t/2,top:s=n/2,bottom:a=n/-2,near:l=1,far:c=1e3,x:u=0,y:d=0,z:h=10}=e,f=new o.OrthographicCamera(r,i,s,a,l,c);return f.position.set(u,d,h),f}}var Xn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class Jn{constructor(e={}){this.sceneConfig=e,this.scenes=new Map,this.__config={},this._isRunning=!1,this._deconstructor=[];const{key:t=Math.random().toString(),enableXR:n=!1}=e;this.__config.sceneKey=t,this.__config.enableXR=n}get deconstructor(){return{add:(...e)=>{e.forEach((e=>{this._deconstructor.push(e)}))}}}initializeScene(e){const{renderer:t,parent:n,canvas:r,scene:i,scenes:s,camera:a,cache:l,physics:c,sceneConfig:u}=e;this.scene=i,this.scenes=s,this.camera=a,this.cache=l,this.physics=c,this.renderer=t,this.parent=n,this.canvas=r;const{autoStart:d,textureAnisotropy:h}=u;this.load=new _n(this.cache,h),this.lights=new En(this.scene),this.transform=new v(this.camera,this.renderer),this.csg=y,this.heightMap=new Mn(this.scene),this.factories=new Tn.Z(this.scene),this.misc=new Dn(this.scene,this.renderer,this.factories),this.ws=new An(i,t,a,this.lights,this.physics,this.load,this.factories),this.mixers=new In,this.cameras=new Kn,this.clock=new o.Clock,this.__config.enableXR&&(this.webXR=new qn(this.renderer,this.scene,this.camera)),d&&this.start(this.__config.sceneKey)}get sceneKey(){return this.__config.sceneKey}destroy(e){var t;null===(t=this.physics)||void 0===t||t.destroy(e.body),this.scene.remove(e),e=null}warpSpeed(...e){return Xn(this,void 0,void 0,(function*(){return yield this.ws.warpSpeed(...e)}))}get animationMixers(){return this.mixers.mixers}get make(){return this.factories.make}get add(){return this.factories.add}haveSomeFun(e=20){Yn(e,this.physics)}isRunning(){return this._isRunning}start(e,t){var n;return Xn(this,void 0,void 0,(function*(){e&&e!==this.__config.sceneKey?(this.stop(),null===(n=this.scenes.get(e))||void 0===n||n._start(t)):this._start(t)}))}_start(e){var t;return Xn(this,void 0,void 0,(function*(){yield null===(t=this.init)||void 0===t?void 0:t.call(this,e),yield this._preload(),yield this._create(),this.renderer.setAnimationLoop((()=>{this._update()})),this._isRunning=!0}))}restart(e){return Xn(this,void 0,void 0,(function*(){yield this.stop(),yield this.start(this.__config.sceneKey,e)}))}stop(){var e,t,n;return Xn(this,void 0,void 0,(function*(){this._isRunning=!1,this.renderer.setAnimationLoop(null),this.clock.start();for(let n of this._deconstructor)yield null===(e=n.dispose)||void 0===e?void 0:e.call(n),yield null===(t=n.destroy)||void 0===t?void 0:t.call(n),"function"==typeof n&&(yield null==n?void 0:n()),n=null;if(this._deconstructor=[],null===(n=this.physics)||void 0===n?void 0:n.rigidBodies)for(let e=this.physics.rigidBodies.length-1;e>=0;e--)this.physics.destroy(this.physics.rigidBodies[e]);for(let e=this.scene.children.length-1;e>=0;e--)this.scene.remove(this.scene.children[e])}))}setSize(e,t){this.renderer.setSize(e,t),void 0!==this.camera.aspect&&(this.camera.aspect=e/t),this.camera.updateProjectionMatrix()}setPixelRatio(e){this.renderer.setPixelRatio(e)}init(e={}){}preload(){}create(){}update(e,t){}preRender(){}postRender(){}_preload(){var e;return Xn(this,void 0,void 0,(function*(){yield null===(e=this.preload)||void 0===e?void 0:e.call(this)}))}_create(){var e;return Xn(this,void 0,void 0,(function*(){yield null===(e=this.create)||void 0===e?void 0:e.call(this)}))}_update(){var e,t,n;const r=1e3*this.clock.getDelta(),i=this.clock.getElapsedTime();null===(e=this.update)||void 0===e||e.call(this,parseFloat(i.toFixed(3)),parseInt(r.toString())),null===(t=this.physics)||void 0===t||t.update(r),null===(n=this.physics)||void 0===n||n.updateDebugger(),this.animationMixers.update(r),this.preRender(),this.composer?this.composer.render():this.renderer.render(this.scene,this.camera),this.postRender()}}var Qn=n(34700);var er=n(77205);console.log("%c %c %c %c %c Powered by enable3d v0.24.0 %c https://enable3d.io/","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none");class tr extends class{constructor(e={}){this.threeGraphicsConfig=e;const{alpha:t=!1,anisotropy:n=1,camera:r=Kn.Perspective({z:25,y:5}),antialias:i=!1,usePhysics:s=!0,renderer:a}=e;this.textureAnisotropy=n,this.camera=r,this.scene=new o.Scene,this.renderer=a||new o.WebGLRenderer({antialias:i,alpha:t}),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=o.PCFSoftShadowMap,this.cache=o.Cache,this.cache.enabled=!0,s&&("undefined"!=typeof Ammo?this.physics=new Qn.AmmoPhysics(this.scene,e):(0,Nn.k)("Are you sure you included ammo.js?"))}}{constructor(e){var t;super(e),this.projectConfig=e,this.scenes=new Map,this.renderer.setSize(window.innerWidth,window.innerHeight),this.projectConfig.parent?this.parent=document.getElementById(this.projectConfig.parent):this.parent=document.body,this.parent||((0,Nn.k)(`Parent "${this.projectConfig.parent}" not found! Will add it to the body.`),this.parent=document.body),this.parent.appendChild(this.renderer.domElement),this.canvas=this.renderer.domElement;let n="";this.projectConfig.scenes.forEach(((e,t)=>{const r=new e;0===t&&(n=r.sceneKey);const i={sceneConfig:{textureAnisotropy:this.textureAnisotropy,autoStart:!1},renderer:this.renderer,parent:this.parent,canvas:this.canvas,scene:this.scene,scenes:this.scenes,camera:this.camera,cache:this.cache,physics:this.physics};r.initializeScene(i),0===t&&(r.setSize(this.parent.clientWidth,this.parent.clientHeight),r.setPixelRatio(Math.max(1,window.devicePixelRatio/2))),this.scenes.set(r.sceneKey,r)})),null===(t=this.scenes.get(n))||void 0===t||t.start(n)}}var nr=n(87803),rr=n(11230),ir=n(47070);const or=[{name:"pointer",enabled:!0,test:"onpointerdown"in window,events:{down:"pointerdown",move:"pointermove",up:"pointerup"}},{name:"touch",enabled:!0,test:"ontouchstart"in window&&window.navigator.maxTouchPoints>=1,events:{down:"touchstart",move:"touchmove",up:"touchend"}},{name:"mouse",enabled:!0,test:"onmousedown"in window,events:{down:"mousedown",move:"mousemove",up:"mouseup"}}];class sr{constructor(e){this._events=new ir.Events,this.domElement=null,this._isDown=!1,this._isPaused=!1,this.active={touch:!1,mouse:!1,pointer:!1},this.registered={touch:!1,mouse:!1,pointer:!1},this._currentPosition={x:-1,y:-1},this._lastPosition={x:-1,y:-1},this._isPointerLockAvailable="onpointerlockchange"in document,this._add(e)}static get VERSION(){return"0.0.3"}get isDown(){return this._isDown}set _position(e){e.x===this._currentPosition.x&&e.y==this._currentPosition.y||(this._lastPosition=this._currentPosition,this._currentPosition=e)}get currentPosition(){return this._currentPosition}get lastPosition(){return this._lastPosition}get isPaused(){return this._isPaused}pause(){this._isPaused=!0}resume(){this._isPaused=!1}_onPointerLockChange(){return new Promise((e=>{document.addEventListener("pointerlockchange",(t=>{e(t)}),{once:!0})}))}get pointerLock(){return{onceChange:this._onPointerLockChange,request:()=>new Promise(((e,t)=>this._isPointerLockAvailable?this.pointerLock.isLocked?t("Pointer is already locked!"):(this._onPointerLockChange().then((t=>{e(t)})),void this.once.down((()=>{var e;null===(e=this.domElement)||void 0===e||e.requestPointerLock()}))):t("PointerLock is not available!"))),exit:()=>new Promise(((e,t)=>{if(!this.pointerLock.isLocked)return t("Pointer is not locked!");this._onPointerLockChange().then((t=>{e(t)})),document.exitPointerLock()})),available:this._isPointerLockAvailable,isLocked:!!document.pointerLockElement}}get once(){return{down:e=>{this._events.once("down",(t=>{e(t)}))},move:e=>{this._events.once("move",(t=>{e(t)}))},up:e=>{this._events.once("up",(t=>{e(t)}))}}}get on(){return{down:e=>{this._events.on("down",(t=>{this._isPaused||e(t)}))},move:e=>{this._events.on("move",(t=>{this._isPaused||e(t)}))},up:e=>{this._events.on("up",(t=>{this._isPaused||e(t)}))}}}_add(e){const t=this.domElement=null!=e?e:window;t||console.warn("[tap] No domElement found!"),this._onDown=this._onDown.bind(this),this._onMove=this._onMove.bind(this),this._onUp=this._onUp.bind(this),or.forEach((e=>{e.test&&e.enabled&&(this.active[e.name]=!0,t.addEventListener(e.events.down,this._onDown,!1),t.addEventListener(e.events.move,this._onMove,!1),t.addEventListener(e.events.up,this._onUp,!1))}))}_remove(e){if(!this.active[e])return;const t=this.domElement;t||console.warn("[tap] No domElement found!"),or.forEach((n=>{n.name===e&&(t.removeEventListener(n.events.down,this._onDown,!1),t.removeEventListener(n.events.move,this._onMove,!1),t.removeEventListener(n.events.up,this._onUp,!1))})),this.active[e]=!1}destroy(){this.pause(),Object.keys(this.active).forEach((e=>{this._remove(e)})),this._events.removeAllListeners(),this._events=null,this.domElement=null,this._isDown=null,this._isPaused=null,this.active=null,this.registered=null,this._currentPosition=null,this._lastPosition=null}_calcPosition(e){let t,n;return e.touches&&e.touches[0]?(t=e.touches[0].pageX,n=e.touches[0].pageY):e.clientX?(t=e.clientX,n=e.clientY):(t=this._currentPosition.x,n=this._currentPosition.y),this.pointerLock.isLocked&&(t=e.movementX,n=e.movementY),this._position={x:t,y:n},{x:t,y:n}}_removeDuplicates(e){return"pointerdown"===e.type&&(this.registered.pointer=!0),"touchstart"===e.type&&(this.registered.touch=!0),"mousedown"===e.type&&(this.registered.mouse=!0),"touchstart"===e.type&&this.active.touch&&this.registered.pointer?(this._remove("touch"),!1):"mousedown"!==e.type||!this.active.mouse||!this.registered.pointer&&!this.registered.touch||(this._remove("mouse"),!1)}_onDown(e){this._removeDuplicates(e)&&(this._isDown=!0,this._events.emit("down",{position:this._calcPosition(e),event:e}))}_onMove(e){this._events.emit("move",{position:this._calcPosition(e),event:e,dragging:this._isDown})}_onUp(e){this._isDown=!1,this._events.emit("up",{position:this._calcPosition(e),event:e})}}var ar=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const lr=(e,t,n,r,i,o)=>{r<2*o&&(o=r/2),i<2*o&&(o=i/2),e.beginPath(),e.moveTo(t+o,n),e.arcTo(t+r,n,t+r,n+i,o),e.arcTo(t+r,n+i,t,n+i,o),e.arcTo(t,n+i,t,n,o),e.arcTo(t,n,t+r,n,o),e.closePath()},cr=new Map,ur=e=>{const t=new o.Texture(e);return t.minFilter=o.LinearFilter,t.generateMipmaps=!1,t.needsUpdate=!0,t},dr=document.createElement("canvas");let hr,fr,pr,mr=!1;const gr=[],vr=new o.Raycaster,yr=new o.Vector2,br=new o.Vector2,wr=new o.Vector2,xr=[],_r=e=>{xr.includes(e)||(console.warn(e),xr.push(e))},Sr=(e,t)=>{wr.x=e,wr.y=t},Er=()=>hr,Tr=()=>{Mr(),pr&&pr.destroy()},Cr=e=>{0===gr.length&&(()=>{const e=Er();e?pr=new sr(e):_r('Please call "FLAT.initEvents()" first.')})(),gr.push(e)},Mr=()=>{for(;gr.length>0;)gr.pop()},kr=e=>ar(void 0,void 0,void 0,(function*(){if(!pr)return;const{currentPosition:{x:t,y:n},isDown:r}=pr;if(!(yr.x!==t||yr.y!==n)&&!(mr!==r))return;if(mr=r,yr.x=t,yr.y=n,0===wr.x||void 0===wr.x)return void _r("[FLAT] Please call FLAT.setSize() first!");br.x=t/wr.x*2-1,br.y=-n/wr.y*2+1,vr.setFromCamera(br,e);let i=[...gr];const o=vr.intersectObjects(i);0===o.length?document.body.style.cursor="default":document.body.style.cursor="pointer",fr&&fr.enabled&&o.length>=0&&(fr.enabled=!1),fr&&!fr.enabled&&0===o.length&&(fr.enabled=!0);for(let e=0;e<o.length;e++){const t=o[e].object;let n=!1;if(t.pixelPerfect){const e=e=>{dr.width=e.width,dr.height=e.height;const t=dr.getContext("2d");return t.drawImage(e,0,0),t.getImageData(0,0,e.width,e.height)},r=(e,t,n)=>{const r=4*(t+e.width*n),i=e.data;return{r:i[r],g:i[r+1],b:i[r+2],a:i[r+3]}},i=o[0].uv,{x:s,y:a}=t.texture.transformUv(i),l=e(yield createImageBitmap(t.texture.image)),{r:c,g:u,b:d,a:h}=r(l,Math.round(s*l.width),Math.round(a*l.height));n=c+u+d+h===0}if(t.pixelPerfect&&n)continue;t.event=pr.isDown?"down":"over";const r=i.findIndex((e=>e.uuid===t.uuid));i=[...i.slice(0,r),...i.slice(r+1)];break}return i.forEach((e=>{e.event="out"})),o}));class Pr extends o.Sprite{constructor(e,t=!0){super(new o.SpriteMaterial({map:t?e.clone():e,color:16777215})),this._event="out",this._pixelPerfect=!1,this._isInteractive=!1,this._depth=0,this._bodyOffset={x:0,y:0},this._internalScale={x:1,y:1},this._pixelRatio=1,this.onInputOver=()=>{},this.onInputOut=()=>{},this.onInputDown=()=>{},this._setTexture(),this.setScale(this._internalScale.x,this._internalScale.y),this.setDepth(this._calcZ())}_onInputOver(){}_onInputOut(){}_onInputDown(){}set event(e){this._event!==e&&(this._event=e,"over"===e?(this._onInputOver(),this.onInputOver()):"out"===e?(this._onInputOut(),this.onInputOut()):"down"===e&&(this._onInputDown(),this.onInputDown()))}setPixelRatio(e){this._pixelRatio=e,this.setScale(this._internalScale.x,this._internalScale.y)}setInteractive({pixelPerfect:e=!1}={}){this._isInteractive||(this._isInteractive=!0,this._pixelPerfect=e,Cr(this))}get pixelPerfect(){return this._pixelPerfect}_calcZ(){return this._depth/100-1e-8*this.id}getTexture(){return this.texture}setTexture(e){this._setTexture(e)}get texture(){return this.material.map}_setTexture(e){if(!this.material.map)return void console.warn("Something went wrong!");e&&(this.material.map=e);const{width:t,height:n}=this.material.map.image;this.textureWidth=t,this.textureHeight=n,this.material.map.needsUpdate=!0}getBodyOffset(){return{x:this._bodyOffset.x*this.getScale().x,y:this._bodyOffset.y*this.getScale().y}}setPosition(e,t){this.position.set(e,t,this._calcZ())}setDepth(e){this._depth=e,this.position.setZ(this._calcZ())}setRotation(e){this.material.rotation=e}getRotation(){return this.material.rotation}getPixelRatio(){return this._pixelRatio}getScale(){return{x:this._internalScale.x,y:this._internalScale.y}}setScale(e,t){this._internalScale.x=e,this._internalScale.y=t||e;const n=e,r=t||e;this.scale.set(n*this.textureWidth/this._pixelRatio,r*this.textureHeight/this._pixelRatio,1)}}class Ar extends Pr{constructor(e){super(e),this._anims=[],this._flipX=!1,this._frame={name:"",index:-1,width:-1,height:-1},this._currentIndex=0,this._currentAnimationName=""}get frame(){return{name:this._frame.name,index:this._frame.index,width:this._frame.width*this._internalScale.x*1/this._pixelRatio,height:this._frame.height*this._internalScale.y*1/this._pixelRatio}}get anims(){return{add:this._add.bind(this),get:this.getAnimationByName.bind(this),play:this._play.bind(this),stop:this._stop.bind(this),getName:()=>this._currentAnimationName,name:this._currentAnimationName}}getAnimationByName(e){return this._anims.filter((t=>t.name===e))[0]}_add(e,t){const{start:n,end:r,rate:i=30,repeat:o=-1,timeline:s=[]}=t;if(this.getAnimationByName(e))console.warn(`The animation "${e}" does already exist!`);else{if(0===s.length){if(void 0===r||void 0===n)return void console.warn('You need to provide "start" and "end or a "timeline"!');for(let e=n;e<=r;e++)s.push(e)}this._anims.push({name:e,timeline:s,rate:i,repeat:o})}}_stop(){this.interval&&clearInterval(this.interval)}_play(e){this._stop(),this._currentAnimationName=e;const t=this.getAnimationByName(e);t||console.warn(`Animation "${e}" does not exist!`);const{timeline:n,rate:r,repeat:i}=t;this._currentIndex=-1;let o=0;const s=()=>{this._currentIndex++,this._currentIndex>=n.length&&(this._currentIndex=0,o++);if(!(-1===i||o<i))return this._stop(),void this._events.emit("complete");this.setFrame(n[this._currentIndex])};return s(),this.interval=window.setInterval((()=>{s()}),1e3/r),{onComplete:e=>this._events.once("complete",e)}}get _events(){return{emit:e=>{this._eventEmitter||(this._eventEmitter=new ir.Events),this._eventEmitter.emit(e)},once:(e,t)=>{this._eventEmitter||(this._eventEmitter=new ir.Events),this._eventEmitter.once(e,t)}}}}class Ir extends Ar{constructor(e,t){super(e);const{width:n=this.textureWidth,height:r=this.textureHeight}=t;this._tilesHoriz=this.textureWidth/n,this._tilesVert=this.textureHeight/r,this._tilesHoriz!==Math.round(this._tilesHoriz)&&console.warn("The horizontal row does not seem to fit!"),this._tilesVert!==Math.round(this._tilesVert)&&console.warn("The vertical row does not seem to fit!"),this._width=n,this._height=r,this._frame.width=n,this._frame.height=r,this.sizeFrame(1/this._tilesHoriz,1/this._tilesVert),this.scaleFrame()}setScale(e,t){super.setScale(e,t),this.scaleFrame()}scaleFrame(){this.scale.set(this._width*this._internalScale.x/this._pixelRatio,this._height*this._internalScale.y/this._pixelRatio,1)}getRow(e){return Math.floor(e/this._tilesHoriz)}getColumn(e){return e%this._tilesHoriz}sizeFrame(e,t){this.texture.wrapS=this.texture.wrapT=o.RepeatWrapping,this.texture.repeat.set(e,t),this.texture.needsUpdate=!0}offsetTexture(e,t){this._flipX&&(e+=1/this._tilesHoriz),this.texture.offset.setX(e),this.texture.offset.setY(t)}flipX(e){this._flipX=e;let t=1/this._tilesHoriz;const n=1/this._tilesVert;e&&(t*=-1),this.texture.repeat.set(t,n),this.setFrame(this._frame.index)}setFrame(e){this._frame.index=e;const t=this.getColumn(e)/this._tilesHoriz,n=(this._tilesVert-this.getRow(e)-1)/this._tilesVert;this.offsetTexture(t,n)}}class Rr extends Ir{constructor(e,t,n,r,i){super(e,t),this.overFrame=n,this.outFrame=r,this.downFrame=i,this.setFrame(r)}_onInputOver(){this.setFrame(this.overFrame)}_onInputOut(){this.setFrame(this.outFrame)}_onInputDown(){this.setFrame(this.downFrame)}}class Lr extends o.Texture{constructor(e,t,n){const r=dr.getContext("2d");r.clearRect(0,0,dr.width,dr.height),dr.height=t,dr.width=e,n(r);super(r.getImageData(0,0,dr.width,dr.height)),this.minFilter=o.LinearFilter,this.generateMipmaps=!1,this.width=e,this.height=t,this.drawCanvas=n,this.needsUpdate=!0}clone(){return new Lr(this.width,this.height,this.drawCanvas).copy(this)}copy(e){return super.copy(e),this}}class Or extends Pr{constructor(e,t,n){const r=dr.getContext("2d");r.clearRect(0,0,dr.width,dr.height),dr.height=t,dr.width=e,n(r);const i=r.getImageData(0,0,dr.width,dr.height);super(ur(i)),this._drawCanvas=n}clone(){return new Or(this.textureWidth,this.textureHeight,this._drawCanvas).copy(this)}copy(e){return super.copy(e),this}}const Nr=(e,t={})=>{e.autoClear=!1;const{width:n=window.innerWidth,height:r=window.innerHeight,size:i=e.getSize(new o.Vector2)}=t;return Sr(i.x,i.y),{camera:Kn.Orthographic({left:0,right:n,bottom:0,top:r}),scene:new o.Scene}},Dr=({canvas:e,orbitControls:t})=>{(e=>{e&&(fr=e)})(t),(e=>{hr=e})(e)},Fr=e=>{e.clear()},Br=(e,t)=>{t&&t.scene&&t.camera&&(e.clearDepth(),e.render(t.scene,t.camera),kr(t.camera))};class Zr extends o.Texture{constructor(e,t={}){const{imageData:n,width:r,height:i}=zr(e,t);super(n),this.width=r,this.height=i,this._text=e,this._styles=t,this._image=n,this.minFilter=o.LinearFilter,this.generateMipmaps=!1,this.needsUpdate=!0}getText(){return this._text}getStyles(){return this._styles}clone(){return new Zr(this._text,this._styles).copy(this)}copy(e){return super.copy(e),this}}class Vr extends Pr{constructor(e){super(e,!1),this._text=e.getText(),this._styles=e.getStyles()}getText(){return this._text}getStyles(){return this._styles}setStyles(e){this._styles=e,this.texture.dispose(),this.setTexture(ur(zr(this._text,e).imageData))}setText(e){this._text=e,this.texture.dispose(),this.setTexture(ur(zr(e,this._styles).imageData)),this._update()}_update(){this.textureHeight=this.texture.image.height,this.textureWidth=this.texture.image.width,this.texture.needsUpdate=!0,this.material.needsUpdate=!0;const{x:e,y:t}=this._internalScale;this.setScale(e,t)}}const zr=(e,t)=>{const{align:n="center",background:r="",baseline:i="middle",borderColor:o="",borderRadius:s=0,borderWidth:a=0,fillStyle:l="SlateBlue",fontFamily:c="Arial",fontSize:u=48,fontWeight:d="",lineHeight:h=1,lineWidth:f=4,padding:p=0,strokeStyle:m=""}=t,{offset:{x:g=0,y:v=0}={}}=t;let y,b;"number"!=typeof p?(y=p.x||0,b=p.y||0):(y=p,b=p);const w=`${d} ${u}px ${c}`,x=dr.getContext("2d");x.clearRect(0,0,dr.width,dr.height);const _=e.split("\n");x.font=w;const S=((e,t,n,r=1)=>{const i=t+n;let o=cr.get(i);if(!o){const s=document.createElement("p");s.style.fontFamily=n,s.style.fontSize=`${t}px`,s.style.whiteSpace="nowrap",s.style.lineHeight=r.toString(),s.textContent=e,document.body.appendChild(s),o=Math.ceil(s.offsetHeight),document.body.removeChild(s),cr.set(i,o)}return o})(e,u,c,h),E=l?2*f:f,T=S*_.length+2*b+2*a,C=((e,t)=>Math.max(...t.map((t=>Math.ceil(e.measureText(t).width)))))(x,_)+E+2*y+2*a;dr.height=T,dr.width=C,o&&(x.strokeStyle=o,lr(x,a/2,a/2,dr.width-a,dr.height-a,s),x.lineWidth=a,x.stroke()),r&&(x.fillStyle=r,lr(x,a,a,dr.width-2*a,dr.height-2*a,o?s/2:s),x.fill()),x.font=w,x.textAlign=n,x.textBaseline=i,m&&f&&(x.strokeStyle=m,x.lineWidth=E),l&&(x.fillStyle=l);for(var M=0;M<_.length;M++){let e=M*S+S/2,t=0;"left"===n&&(t=E/2,t+=y,t+=a),"center"===n&&(t=C/2),"right"===n&&(t=C-E/2,t-=y,t-=a),e+=b,e+=a,e+=v,t+=g,m&&f&&x.strokeText(_[M],t,e),l&&x.fillText(_[M],t,e)}return{imageData:x.getImageData(0,0,dr.width,dr.height),width:C,height:T}};class Ur extends Ar{constructor(e,t){super(e.texture),this.positionOffset={x:0,y:0},this.JSONHash=e.json,t&&this.setFrame(t)}setScale(e,t){this._internalScale.x=e,this._internalScale.y=t||e,this.scaleFrame()}scaleFrame(){var e;if(!(null===(e=this._frame)||void 0===e?void 0:e.name))return;const{frame:{w:t,h:n}}=this.getFrame(this._frame.name),r=t*this._internalScale.x/this._pixelRatio,i=n*this._internalScale.y/this._pixelRatio;this.scale.set(r,i,1)}sizeFrame(e,t){this.texture.wrapS=this.texture.wrapT=o.RepeatWrapping,this.texture.repeat.set(e,t),this.texture.needsUpdate=!0}offsetTexture(e,t){this.texture.offset.setX(e),this.texture.offset.setY(t)}flipX(e){this._flipX=e,this.update()}getFrame(e){return this.JSONHash.frames[e]}setFrame(e){this.update(e)}update(e){if(e||(e=this._frame.name),!e)return;const t=this.getFrame(e);t||console.warn(`Frame ${e} not found!`);const{frame:n,rotated:r,trimmed:i,spriteSourceSize:o,sourceSize:s}=t;this._frame.name=e,this.texture.rotation=0;const a=n.x/this.textureWidth;let l=1-(n.y+n.h)/this.textureHeight,c=n.w,u=n.h;if(this._frame.width=c,this._frame.height=u,r&&(this.texture.rotation=Math.PI/2,l=1-n.y/this.textureHeight,[c,u]=[u,c],this._flipX&&(this.texture.rotation*=-1)),i){const e=((s.w-n.w)/2-o.x)/(1/this._internalScale.x),t=((s.h-n.h)/2-o.y)/(1/this._internalScale.x);this._flipX?this.position.x+=e-this.positionOffset.x:this.position.x-=e-this.positionOffset.x,this.position.y+=t-this.positionOffset.y,this.positionOffset.x=e,this.positionOffset.y=t}let d=a,h=l,f=c/this.textureWidth;const p=u/this.textureHeight;this._flipX&&(f*=-1,r?h-=n.w/this.textureHeight:d+=n.w/this.textureWidth),this.offsetTexture(d,h),this.sizeFrame(f,p),this.scaleFrame()}}var jr=n(89842);const Hr={colors:{dynamic:"#ff0000",static:"#90ee90",sensor:"#ffff00",sleeping:"#464646"},lineWidth:2,fill:!1,opacity:.25},Gr=(e,t=0,n,r)=>{const i=((e={})=>{const{colors:t}=Hr;return e.isStatic?t.static:e.isSensor?t.sensor:e.isSleeping?t.sleeping:t.dynamic})(e),o=Hr.opacity,s=Hr.lineWidth,a=Hr.fill;let l=null!=n?n:i+Math.round(255*o).toString(16);a||(l=null!=n?n:"transparent"),!e.isSleeping||e.isStatic||e.isSensor||(l=null!=n?n:i);const c=null!=r?r:i;e.render.fillStyle=l,e.render.strokeStyle=c,e.render.lineWidth=s,t>=5||e.parts.forEach((e=>{Gr(e,t+1,l,c)}))};class Wr{constructor(e=!0){this._objects=new Map,this.width=window.innerWidth,this.height=window.innerHeight;const t=e;if(this.engine=jr.Engine.create({enableSleeping:!0,gravity:{x:0,y:1,scale:.001}}),this.world=this.engine.world,this.runner=jr.Runner.create(),t){const e=document.createElement("canvas");e.id="matter-debug",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",document.body.append(e),this.render=jr.Render.create({canvas:e,engine:this.engine,options:{width:this.width,height:this.height,background:"transparent",wireframeBackground:"transparent",wireframes:!1,showConvexHulls:!0,showPositions:!0,showVelocity:!0}}),jr.Render.run(this.render)}jr.Runner.run(this.runner,this.engine),jr.Events.on(this.engine,"afterUpdate",(()=>this.update()))}destroy(){jr.World.clear(this.world,!1),jr.Engine.clear(this.engine)}parsePhysics(e){const t=JSON.parse(e);delete t.generator_info;let n={};for(const e in t){const r=t[e].fixtures;n=Object.assign(Object.assign({},n),{[e]:r})}return n}addBodyFromFixtures(e,t,n){const r=[];let i;return n.forEach((n=>{let i;n.vertices?i=this.add.fromVertices(e,t,n.vertices):n.circle?i=this.add.circle(e+n.circle.x,t+n.circle.y,n.circle.radius):console.log("Shape not recognized!"),i&&r.push(i)})),i=r.length>1?jr.Body.create({parts:r}):r[0],jr.Body.setPosition(i,{x:e,y:t}),i}fromVertices_Fixed(e,t,n,r={}){const i=[];for(var o=0;o<n.length;o++){const s=jr.Bodies.fromVertices(e,t,[n[o]],Object.assign({},r));i.push(s);const a=jr.Vertices.centre(n[o]);jr.Body.setPosition(s,{x:s.position.x+a.x,y:s.position.y+a.y})}return jr.Body.create(Object.assign(Object.assign({},r),{parts:i}))}fromVertices(e,t,n,r={}){return this.fromVertices_Fixed(e,t,n,Object.assign({},r))}setBounds(e=0,t=0,n=this.width,r=this.height,i=50){jr.World.add(this.world,[this.add.rectangle(e+n/2,t+0-i/2,n+2*i,i,{isStatic:!0}),this.add.rectangle(e+n/2,t+r+i/2,n+2*i,i,{isStatic:!0}),this.add.rectangle(e+0-i/2,t+r/2,i,r+2*i,{isStatic:!0}),this.add.rectangle(e+n+i/2,t+r/2,i,r+2*i,{isStatic:!0})])}rectangle(e,t,n,r,i={}){return jr.Bodies.rectangle(e,t,n,r,Object.assign({},i))}circle(e,t,n,r={}){return jr.Bodies.circle(e,t,n,Object.assign({},r))}existing(e){this.add.bodyToSprite(e),this._objects.set(e.body.id.toString(),e)}calcBodyOffset(e){const t=e.body,n=t.bounds.max.x-t.bounds.min.x,r=t.bounds.max.y-t.bounds.min.y,i=jr.Vector.sub(t.bounds.min,t.position),o=(t.position,{x:i.x+n/2,y:i.y+r/2});e._bodyOffset=o}_addBodyToSprite(e){this.add.body(e.body),this.calcBodyOffset(e);const t=e.getScale().x,n=e.getScale().y;((e,t,n)=>{e.circleRadius||e.parts.forEach((e=>{((e,t,n)=>{e.circleRadius&&(t===n?e.circleRadius*=t:e.circleRadius=void 0)})(e,t,n)})),jr.Body.scale(e,t,n)})(e.body,t,n),e.setBodyPosition=(t,n)=>{jr.Body.setPosition(e.body,{x:t-e.getBodyOffset().x,y:n-e.getBodyOffset().y})}}_addBody(e){jr.World.add(this.world,e)}get add(){return{body:this._addBody.bind(this),bodyToSprite:this._addBodyToSprite.bind(this),fromVertices:this.fromVertices.bind(this),circle:this.circle.bind(this),existing:this.existing.bind(this),rectangle:this.rectangle.bind(this)}}adjustDebugColor(e){Gr(e)}update(){this._objects.forEach((e=>{const{body:t}=e,{angle:n,position:r}=t,{x:i,y:s}=r,a=new o.Vector2(e.getBodyOffset().x,e.getBodyOffset().y);a.rotateAround(new o.Vector2,n),e.setPosition(i+a.x,this.height-s-a.y),e.setRotation(-n),Gr(t)}))}}var $r=n(38122);class qr extends ir.Events{constructor(){super(...arguments),this.id=-1}get add(){return{axis:(e={})=>this.addAxis(e),button:(e={})=>this.addButton(e)}}addAxis(e={}){this.id++;const{styles:t={left:35,bottom:35,size:100}}=e,n=this.circle({styles:t}),r=this.thumb({styles:t});n.appendChild(r),document.body.appendChild(n);const{maxRadius:i=40,rotationDamping:o=.06,moveDamping:s=.01}=e,a={id:this.id,domElement:r,maxRadius:i,maxRadiusSquared:i*i,origin:{left:r.offsetLeft,top:r.offsetTop},offset:{x:0,y:0},rotationDamping:o,moveDamping:s};if(null==a?void 0:a.domElement){const{domElement:e}=a;"ontouchstart"in window?e.addEventListener("touchstart",(e=>{e.preventDefault(),this.tap(e,a),e.stopPropagation()})):e.addEventListener("mousedown",(e=>{e.preventDefault(),this.tap(e,a),e.stopPropagation()}))}return{onMove:e=>{this.on(`axis_onmove_${a.id}`,(t=>{e(t)}))}}}addButton(e={}){this.id++;const{styles:t={right:35,bottom:35,size:80},letter:n="A"}=e,r=this.circle({styles:t}),i=this.letter({letter:n});r.appendChild(i),document.body.appendChild(r);const o={id:this.id,domElement:r,offset:{x:0,y:0}};return(null==o?void 0:o.domElement)&&this.click(o),{onClick:e=>{this.on(`button_onclick_${o.id}`,(t=>{e(t)}))},onRelease:e=>{this.on(`button_onrelease_${o.id}`,(t=>{e(t)}))}}}circle(e={}){const{styles:t}=e,{top:n,right:r,bottom:i,left:o,size:s}=t,a=document.createElement("div");let l=`position:absolute; width:${s}px; height:${s}px; background:rgba(126, 126, 126, 0.5); border:#444 solid medium; border-radius:50%; cursor: pointer; `;return n&&(l+=`top:${n}px; `),r&&(l+=`right:${r}px; `),i&&(l+=`bottom:${i}px; `),o&&(l+=`left:${o}px; `),a.style.cssText=l,a}thumb(e={}){const{styles:t}=e,{size:n}=t,r=document.createElement("div");return r.style.cssText=`position: absolute; left: ${n/4}px; top: ${n/4}px; width: ${n/2}px; height: ${n/2}px; border-radius: 50%; background: #fff; `,r}letter(e={}){const{letter:t}=e,n=document.createElement("span");return n.innerText=t,n.style.cssText="position: absolute; text-align: center; top: 4px; width: 80px; height: 80px; font-size: 64px; color: #fff; ",n}click(e){const{id:t,domElement:n}=e;"ontouchstart"in window?(n.addEventListener("touchstart",(e=>{e.preventDefault(),this.emit(`button_onclick_${t}`)})),n.addEventListener("touchend",(e=>{e.preventDefault(),this.emit(`button_onrelease_${t}`)}))):(n.addEventListener("mousedown",(e=>{e.preventDefault(),this.emit(`button_onclick_${t}`),e.stopPropagation()})),n.addEventListener("mouseup",(e=>{e.preventDefault(),this.emit(`button_onrelease_${t}`),e.stopPropagation()})))}tap(e,t){e=e||window.event,t.offset=this.getMousePosition(e),"ontouchstart"in window?(document.ontouchmove=e=>{e.target===t.domElement&&this.move(e,t)},document.ontouchend=e=>{e.target===t.domElement&&this.up(t)}):(document.onmousemove=e=>{e.target===t.domElement&&this.move(e,t)},document.onmouseup=e=>{this.up(t)})}move(e,t){const{domElement:n,maxRadius:r,maxRadiusSquared:i,origin:o,offset:s,id:a}=t;e=e||window.event;const l=this.getMousePosition(e);let c=l.x-s.x,u=l.y-s.y;const d=c*c+u*u;if(d>i){const e=Math.sqrt(d);c/=e,u/=e,c*=r,u*=r}n.style.top=`${u+n.clientHeight/2}px`,n.style.left=`${c+n.clientWidth/2}px`;const h=-(u-o.top+n.clientHeight/2)/r,f=(c-o.left+n.clientWidth/2)/r;this.emit(`axis_onmove_${a}`,{top:h,right:f})}up(e){const{domElement:t,origin:n,id:r}=e;"ontouchstart"in window?(document.ontouchmove=null,document.touchend=null):(document.onmousemove=null,document.onmouseup=null),t.style.top=`${n.top}px`,t.style.left=`${n.left}px`,this.emit(`axis_onmove_${r}`,{top:0,right:0})}getMousePosition(e){return{x:e.targetTouches?e.targetTouches[0].pageX:e.clientX,y:e.targetTouches?e.targetTouches[0].pageY:e.clientY}}}class Yr{constructor(e,t,n){this.camera=e,this.target=t,this.config=n;const{offset:r=new o.Vector3(0,0,0),sensitivity:i=new o.Vector2(.25,.25),radius:s=8,targetRadius:a=10,interpolationFactor:l=.05,pointerLock:c=!0,autoUpdate:u=!0,theta:d=0,phi:h=0,maxPhi:f=85,minPhi:p=-85}=n;this.offset=r,this.sensitivity=i,this.radius=s,this.targetRadius=a,this.interpolationFactor=l,this.theta=d,this.phi=h,this.maxPhi=f,this.minPhi=p}update(e,t){const n=this.target.position.clone().add(this.offset);this.theta-=e*(this.sensitivity.x/2),this.theta%=360,this.phi+=t*(this.sensitivity.y/2),this.phi=Math.min(this.maxPhi,Math.max(this.minPhi,this.phi)),this.radius=o.MathUtils.lerp(this.radius,this.targetRadius,this.interpolationFactor),this.camera.position.x=n.x+this.radius*Math.sin(this.theta*Math.PI/180)*Math.cos(this.phi*Math.PI/180),this.camera.position.y=n.y+this.radius*Math.sin(this.phi*Math.PI/180),this.camera.position.z=n.z+this.radius*Math.cos(this.theta*Math.PI/180)*Math.cos(this.phi*Math.PI/180),this.camera.updateMatrix(),this.camera.lookAt(n)}}class Kr{constructor(e,t,n){this.camera=e,this.target=t,this.config=n;const{offset:r=new o.Vector3(0,0,0),sensitivity:i=new o.Vector2(.25,.25),radius:s=8,targetRadius:a=10,interpolationFactor:l=.05,pointerLock:c=!0,autoUpdate:u=!0}=n;this.offset=r,this.sensitivity=i,this.radius=s,this.targetRadius=a,this.interpolationFactor=l,this.theta=0,this.phi=0}update(e,t){const n=this.target.position.clone().add(this.offset);this.camera.position.copy(n),this.theta-=e*(this.sensitivity.x/2),this.theta%=360,this.phi+=t*(-this.sensitivity.y/2),this.phi=Math.min(85,Math.max(-85,this.phi));const r=new o.Vector3;r.x=n.x+this.radius*Math.sin(this.theta*Math.PI/180)*Math.cos(this.phi*Math.PI/180),r.y=n.y+this.radius*Math.sin(this.phi*Math.PI/180),r.z=n.z+this.radius*Math.cos(this.theta*Math.PI/180)*Math.cos(this.phi*Math.PI/180),this.camera.updateMatrix(),this.camera.lookAt(r)}}class Xr{constructor(e,t=!0){this._element=e,this._isRunning=!1,t&&this.request()}isLocked(){return!!document.pointerLockElement}exit(){this._isRunning=!1,document.exitPointerLock(),this.removeListeners()}removeListeners(){document.removeEventListener("pointerlockchange",(()=>this.pointerLockChangeHandler())),this._element.removeEventListener("pointerdown",(()=>this.pointerDownHandlerHandler()))}pointerLockChangeHandler(){this._isRunning&&this._request()}pointerDownHandlerHandler(){this._isRunning&&this._element.requestPointerLock()}request(){this._isRunning=!0,this._request()}_request(){document.addEventListener("pointerlockchange",(()=>this.pointerLockChangeHandler()),{once:!0}),document.pointerLockElement||this._element.addEventListener("pointerdown",(()=>this.pointerDownHandlerHandler()),{once:!0})}}class Jr{constructor(e,t=!0){this._element=e,this._isRunning=!1,this._position={x:0,y:0},this._delta={x:0,y:0},this._onMoveCallback=()=>{},this._isPointerDown=!1,t&&this.start()}get isTouchDevice(){return"ontouchstart"in window}get isPointerDown(){return this._isPointerDown}start(){this._isRunning||(this._isRunning=!0,this.isTouchDevice?(this._element.addEventListener("touchstart",(e=>this.onTouchStart(e))),this._element.addEventListener("touchend",(e=>this.onTouchEnd(e))),this._element.addEventListener("touchmove",(e=>this.onTouchMove(e)))):(this._element.addEventListener("mousedown",(e=>this.onPointerDown(e))),this._element.addEventListener("mouseup",(e=>this.onPointerUp(e))),this._element.addEventListener("mouseleave",(e=>this.onPointerLeave(e))),this._element.addEventListener("mouseover",(e=>this.onPointerOver(e))),this._element.addEventListener("mousemove",(e=>this.onPointerMove(e)))))}stop(){this.isTouchDevice?(this._element.removeEventListener("touchstart",(e=>this.onTouchStart(e))),this._element.removeEventListener("touchend",(e=>this.onTouchEnd(e))),this._element.removeEventListener("touchmove",(e=>this.onTouchMove(e)))):(this._element.removeEventListener("mousedown",(e=>this.onPointerDown(e))),this._element.removeEventListener("mouseleave",(e=>this.onPointerLeave(e))),this._element.removeEventListener("mouseup",(e=>this.onPointerUp(e))),this._element.removeEventListener("mouseover",(e=>this.onPointerOver(e))),this._element.removeEventListener("mousemove",(e=>this.onPointerMove(e)))),this._isRunning=!1}removeListeners(){this.stop()}onMove(e){this._onMoveCallback=e}onPointerDown(e){this._isPointerDown=!0}onPointerUp(e){this._isPointerDown=!1}onPointerLeave(e){this._isPointerDown=!1}onPointerMove(e){const t=e.movementX,n=e.movementY;this._delta={x:t,y:n},this._onMoveCallback(this._delta)}onPointerOver(e){}onTouchStart(e){const t=e.touches[0].clientX,n=e.touches[0].clientY;this._position={x:t,y:n}}onTouchEnd(e){this._position={x:0,y:0},this._delta={x:0,y:0},this._onMoveCallback(this._delta)}onTouchMove(e){const t=e.touches[0].clientX,n=e.touches[0].clientY;this._delta={x:t-this._position.x,y:n-this._position.y},this._onMoveCallback(this._delta),this._position={x:t,y:n}}}var Qr={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"};class ei{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const ti=new o.OrthographicCamera(-1,1,1,-1,0,1),ni=new o.BufferGeometry;ni.setAttribute("position",new o.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),ni.setAttribute("uv",new o.Float32BufferAttribute([0,2,0,0,2,0],2));class ri{constructor(e){this._mesh=new o.Mesh(ni,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,ti)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ii extends ei{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof o.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=o.UniformsUtils.clone(e.uniforms),this.material=new o.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new ri(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class oi extends ei{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),i=e.state;let o,s;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,s=1):(o=1,s=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(s),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class si extends ei{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class ai{constructor(e,t){if(this.renderer=e,void 0===t){const n={minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat},r=e.getSize(new o.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,(t=new o.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===Qr&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===ii&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new ii(Qr),this.clock=new o.Clock}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let t=0,r=this.passes.length;t<r;t++){const r=this.passes[t];if(!1!==r.enabled){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(t),r.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),r.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==oi&&(r instanceof oi?n=!0:r instanceof si&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new o.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new o.OrthographicCamera(-1,1,1,-1,0,1);const li=new o.BufferGeometry;li.setAttribute("position",new o.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),li.setAttribute("uv",new o.Float32BufferAttribute([0,2,0,0,2,0],2));class ci extends ei{constructor(e,t,n,r,i){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new o.Color}render(e,t,n){const r=e.autoClear;let i,o;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=r}}const ui={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\tuniform int byp; //should we apply the glitch ?\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDisp;\n\n\t\tuniform float amount;\n\t\tuniform float angle;\n\t\tuniform float seed;\n\t\tuniform float seed_x;\n\t\tuniform float seed_y;\n\t\tuniform float distortion_x;\n\t\tuniform float distortion_y;\n\t\tuniform float col_s;\n\n\t\tvarying vec2 vUv;\n\n\n\t\tfloat rand(vec2 co){\n\t\t\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tif(byp<1) {\n\t\t\t\tvec2 p = vUv;\n\t\t\t\tfloat xs = floor(gl_FragCoord.x / 0.5);\n\t\t\t\tfloat ys = floor(gl_FragCoord.y / 0.5);\n\t\t\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\t\tvec4 normal = texture2D (tDisp, p*seed*seed);\n\t\t\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n\t\t\t\t\tif(seed_x>0.){\n\t\t\t\t\t\tp.y = 1. - (p.y + distortion_y);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.y = distortion_y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\n\t\t\t\t\tif(seed_y>0.){\n\t\t\t\t\t\tp.x=distortion_x;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.x = 1. - (p.x + distortion_x);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tp.x+=normal.x*seed_x*(seed/5.);\n\t\t\t\tp.y+=normal.y*seed_y*(seed/5.);\n\t\t\t\t//base from RGB shift shader\n\t\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\t\tvec4 cr = texture2D(tDiffuse, p + offset);\n\t\t\t\tvec4 cga = texture2D(tDiffuse, p);\n\t\t\t\tvec4 cb = texture2D(tDiffuse, p - offset);\n\t\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\t\t\t\t//add noise\n\t\t\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\n\t\t\t\tgl_FragColor = gl_FragColor+ snow;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor=texture2D (tDiffuse, vUv);\n\t\t\t}\n\t\t}"};class di extends ei{constructor(e=64){super(),void 0===ui&&console.error("THREE.GlitchPass relies on DigitalGlitch");const t=ui;this.uniforms=o.UniformsUtils.clone(t.uniforms),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new o.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.fsQuad=new ri(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=o.MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=o.MathUtils.randFloat(-1,1),this.uniforms.seed_y.value=o.MathUtils.randFloat(-1,1),this.uniforms.distortion_x.value=o.MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=o.MathUtils.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=o.MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=o.MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=o.MathUtils.randFloat(0,1),this.uniforms.seed_x.value=o.MathUtils.randFloat(-.3,.3),this.uniforms.seed_y.value=o.MathUtils.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}generateTrigger(){this.randX=o.MathUtils.randInt(120,240)}generateHeightmap(e){const t=new Float32Array(e*e*3),n=e*e;for(let e=0;e<n;e++){const n=o.MathUtils.randFloat(0,1);t[3*e+0]=n,t[3*e+1]=n,t[3*e+2]=n}const r=new o.DataTexture(t,e,e,o.RGBFormat,o.FloatType);return r.needsUpdate=!0,r}}const hi={uniforms:{tDiffuse:{value:null},tSize:{value:new o.Vector2(256,256)},center:{value:new o.Vector2(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform vec2 center;\n\t\tuniform float angle;\n\t\tuniform float scale;\n\t\tuniform vec2 tSize;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tfloat pattern() {\n\n\t\t\tfloat s = sin( angle ), c = cos( angle );\n\n\t\t\tvec2 tex = vUv * tSize - center;\n\t\t\tvec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;\n\n\t\t\treturn ( sin( point.x ) * sin( point.y ) ) * 4.0;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 color = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat average = ( color.r + color.g + color.b ) / 3.0;\n\n\t\t\tgl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );\n\n\t\t}"}},83549:function(e){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},45983:function(e,t,n){const r=n(92192);e.exports=(e,t)=>new r(e,t),e.exports.Socket=r,e.exports.protocol=r.protocol,e.exports.Transport=n(86496),e.exports.transports=n(63352),e.exports.parser=n(69743)},92192:function(e,t,n){const r=n(63352),i=n(98767),o=n(11227)("engine.io-client:socket"),s=n(69743),a=n(64187),l=n(81830);class c extends i{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=a(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=a(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=l.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){o('creating transport "%s"',e);const t=function(e){const t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=s.protocol,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return o("options: %j",n),new r[e](n)}open(){let e;if(this.opts.rememberUpgrade&&c.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void setTimeout((()=>{this.emit("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return o("error while creating transport: %s",e),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){o("setting transport %s",e.name),this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(e){o('probing transport "%s"',e);let t=this.createTransport(e,{probe:1}),n=!1;c.priorWebsocketSuccess=!1;const r=()=>{n||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(r=>{if(!n)if("pong"===r.type&&"probe"===r.data){if(o('probe transport "%s" pong',e),this.upgrading=!0,this.emit("upgrading",t),!t)return;c.priorWebsocketSuccess="websocket"===t.name,o('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{n||"closed"!==this.readyState&&(o("changing transport and sending upgrade packet"),d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emit("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{o('probe transport "%s" failed',e);const n=new Error("probe error");n.transport=t.name,this.emit("upgradeError",n)}})))};function i(){n||(n=!0,d(),t.close(),t=null)}const s=n=>{const r=new Error("probe error: "+n);r.transport=t.name,i(),o('probe transport "%s" failed because of error: %s',e,n),this.emit("upgradeError",r)};function a(){s("transport closed")}function l(){s("socket closed")}function u(e){t&&e.name!==t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),i())}const d=()=>{t.removeListener("open",r),t.removeListener("error",s),t.removeListener("close",a),this.removeListener("close",l),this.removeListener("upgrading",u)};t.once("open",r),t.once("error",s),t.once("close",a),this.once("close",l),this.once("upgrading",u),t.open()}onOpen(){if(o("socket open"),this.readyState="open",c.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){o("starting upgrade probes");let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),o("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.removeListener("upgrade",t),this.removeListener("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}onError(e){o("socket error %j",e),c.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(o('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const r=e.length;for(;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}c.priorWebsocketSuccess=!1,c.protocol=s.protocol,e.exports=c},86496:function(e,t,n){const r=n(69743),i=n(98767),o=n(11227)("engine.io-client:transport");e.exports=class extends i{constructor(e){super(),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):o("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(e){const t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){this.emit("packet",e)}onClose(){this.readyState="closed",this.emit("close")}}},63352:function(e,t,n){const r=n(72777),i=n(13416),o=n(99785),s=n(74442);t.polling=function(e){let t,n=!1,s=!1;const a=!1!==e.jsonp;if("undefined"!=typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?443:80),n=e.hostname!==location.hostname||r!==e.port,s=e.secure!==t}if(e.xdomain=n,e.xscheme=s,t=new r(e),"open"in t&&!e.forceJSONP)return new i(e);if(!a)throw new Error("JSONP disabled");return new o(e)},t.websocket=s},99785:function(e,t,n){const r=n(9015),i=n(83549),o=/\n/g,s=/\\n/g;let a;e.exports=class extends r{constructor(e){super(e),this.query=this.query||{},a||(a=i.___eio=i.___eio||[]),this.index=a.length,a.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=e=>{this.onError("jsonp poll error",e)};const t=document.getElementsByTagName("script")[0];t?t.parentNode.insertBefore(e,t):(document.head||document.body).appendChild(e),this.script=e;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){const e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)}doWrite(e,t){let n;if(!this.form){const e=document.createElement("form"),t=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;e.className="socketio",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.target=n,e.method="POST",e.setAttribute("accept-charset","utf-8"),t.name="d",e.appendChild(t),document.body.appendChild(e),this.form=e,this.area=t}function r(){i(),t()}this.form.action=this.uri();const i=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(e){this.onError("jsonp polling iframe removal error",e)}try{const e='<iframe src="javascript:0" name="'+this.iframeId+'">';n=document.createElement(e)}catch(e){n=document.createElement("iframe"),n.name=this.iframeId,n.src="javascript:0"}n.id=this.iframeId,this.form.appendChild(n),this.iframe=n};i(),e=e.replace(s,"\\\n"),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=()=>{"complete"===this.iframe.readyState&&r()}:this.iframe.onload=r}}},13416:function(e,t,n){const r=n(72777),i=n(9015),o=n(98767),{pick:s}=n(16839),a=n(83549),l=n(11227)("engine.io-client:polling-xhr");function c(){}const u=null!=new r({xdomain:!1}).responseType;class d extends o{constructor(e,t){super(),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=s(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new r(e);try{l("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=()=>{this.onLoad()},t.onerror=()=>{this.onError(t.responseText)}):t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():setTimeout((()=>{this.onError("number"==typeof t.status?t.status:0)}),0))},l("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=d.requestsCount++,d.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&this.onData(e)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}if(d.requestsCount=0,d.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",h);else if("function"==typeof addEventListener){addEventListener("onpagehide"in a?"pagehide":"unload",h,!1)}function h(){for(let e in d.requests)d.requests.hasOwnProperty(e)&&d.requests[e].abort()}e.exports=class extends i{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=u&&!t}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new d(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e=>{this.onError("xhr post error",e)}))}doPoll(){l("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e=>{this.onError("xhr poll error",e)})),this.pollXhr=e}},e.exports.Request=d},9015:function(e,t,n){const r=n(86496),i=n(81830),o=n(69743),s=n(82281),a=n(11227)("engine.io-client:polling");e.exports=class extends r{get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{a("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(a("we are currently polling - waiting to pause"),e++,this.once("pollComplete",(function(){a("pre-pause polling complete"),--e||t()}))),this.writable||(a("we are currently writing - waiting to pause"),e++,this.once("drain",(function(){a("pre-pause writing complete"),--e||t()})))}else t()}poll(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){a("polling got data %s",e);o.decodePayload(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose(),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{a("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(a("transport open - closing"),e()):(a("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,o.encodePayload(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),e.length&&(e="?"+e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}}},60866:function(e,t,n){const r=n(83549),i="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):e=>setTimeout(e,0);e.exports={WebSocket:r.WebSocket||r.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:i}},74442:function(e,t,n){const r=n(86496),i=n(69743),o=n(81830),s=n(82281),{pick:a}=n(16839),{WebSocket:l,usingBrowserWebSocket:c,defaultBinaryType:u,nextTick:d}=n(60866),h=n(11227)("engine.io-client:websocket"),f="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class p extends r{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=f?{}:a(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=c&&!f?t?new l(e,t):new l(e):new l(e,t,n)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||u,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;i.encodePacket(n,this.supportsBinary,(e=>{const t={};if(!c&&(n.options&&(t.compress=n.options.compress),this.opts.perMessageDeflate)){("string"==typeof e?Buffer.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(t.compress=!1)}try{c?this.ws.send(e):this.ws.send(e,t)}catch(e){h("websocket closed before onclose event")}r&&d((()=>{this.writable=!0,this.emit("drain")}))}))}}onClose(){r.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=s()),this.supportsBinary||(e.b64=1),e=o.encode(e),e.length&&(e="?"+e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}check(){return!(!l||"__initialize"in l&&this.name===p.prototype.name)}}e.exports=p},16839:function(e){e.exports.pick=(e,...t)=>t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})},72777:function(e,t,n){const r=n(38058),i=n(83549);e.exports=function(e){const t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(e){}if(!t)try{return new(i[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},31712:function(e){const t=Object.create(null);t.open="0",t.close="1",t.ping="2",t.pong="3",t.message="4",t.upgrade="5",t.noop="6";const n=Object.create(null);Object.keys(t).forEach((e=>{n[t[e]]=e}));e.exports={PACKET_TYPES:t,PACKET_TYPES_REVERSE:n,ERROR_PACKET:{type:"error",data:"parser error"}}},44965:function(e,t,n){const{PACKET_TYPES_REVERSE:r,ERROR_PACKET:i}=n(31712);let o;"function"==typeof ArrayBuffer&&(o=n(33704));const s=(e,t)=>{if(o){const n=o.decode(e);return a(n,t)}return{base64:!0,data:e}},a=(e,t)=>"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e;e.exports=(e,t)=>{if("string"!=typeof e)return{type:"message",data:a(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:s(e.substring(1),t)};return r[n]?e.length>1?{type:r[n],data:e.substring(1)}:{type:r[n]}:i}},22929:function(e,t,n){const{PACKET_TYPES:r}=n(31712),i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),o="function"==typeof ArrayBuffer,s=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)};e.exports=({type:e,data:t},n,a)=>{return i&&t instanceof Blob?n?a(t):s(t,a):o&&(t instanceof ArrayBuffer||(l=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(l):l&&l.buffer instanceof ArrayBuffer))?n?a(t):s(new Blob([t]),a):a(r[e]+(t||""));var l}},69743:function(e,t,n){const r=n(22929),i=n(44965),o=String.fromCharCode(30);e.exports={protocol:4,encodePacket:r,encodePayload:(e,t)=>{const n=e.length,i=new Array(n);let s=0;e.forEach(((e,a)=>{r(e,!1,(e=>{i[a]=e,++s===n&&t(i.join(o))}))}))},decodePacket:i,decodePayload:(e,t)=>{const n=e.split(o),r=[];for(let e=0;e<n.length;e++){const o=i(n[e],t);if(r.push(o),"error"===o.type)break}return r}}},57224:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/alpha.gif"},77471:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/beta.gif"},92070:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/collisio-fb.png"},89133:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/connect-with-login.PNG"},34022:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/connect-with-roomid.PNG"},9932:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/gameplay.PNG"},62959:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/gamma.gif"},73437:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/hugi.jpg"},16342:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/mobile-gui.PNG"},96235:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/mobile-settings.PNG"},17109:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/phone-orientation-leftTurn.PNG"},16430:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/phone-orientation-noTurn.PNG"},6867:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/phone-orientation-rightTurn.PNG"},74821:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/resetorient.jpg"},66947:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/split-screen.PNG"},74433:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/connect1.PNG"},84769:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/connect2.PNG"},94017:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/connect3.PNG"},2319:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/basic-tag-course.png"},81348:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/basic1.png"},65854:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/basic2.png"},98267:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/basic3.png"},28966:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/basic4.png"},75056:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/f1-track-2.PNG"},49889:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/f1-track.PNG"},13450:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/farm.PNG"},623:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/ferrari-top.png"},45436:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/german2.png"},55119:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-basic-tag-course.png"},65206:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-basic1.png"},48331:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-basic2.png"},43559:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-basic3.png"},40314:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-basic4.png"},58381:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-f1-track-2.PNG"},31684:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-f1-track.PNG"},58488:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-farm-track.PNG"},57922:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-ferrari-top.png"},84349:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-german2.png"},53156:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-russia-top.png"},80745:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-sea-side-track.PNG"},54350:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-simple-tag-course.png"},14050:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/min-spa-top.png"},66196:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/russia-top.png"},54798:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/sea-side-track.PNG"},7377:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/simple-tag-course.png"},10330:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/spa-top.png"},69851:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/vehicle-select-1.PNG"},98855:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/vehicle-select-2.PNG"},75977:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/f1.PNG"},22843:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/future.PNG"},14307:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/gokart.PNG"},59435:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/normal2.PNG"},11982:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/offRoader.PNG"},86140:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/simpleSphere.PNG"},2385:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/sportsCar.PNG"},10400:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/tractor.PNG"},15503:function(e,t,n){"use strict";n.r(t),n.d(t,{FirebaseError:function(){return r.ZR},SDK_VERSION:function(){return r.Jn},_DEFAULT_ENTRY_NAME:function(){return r.l4},_addComponent:function(){return r.H9},_addOrOverwriteComponent:function(){return r.Vr},_apps:function(){return r.Af},_clearComponents:function(){return r.Z8},_components:function(){return r.lz},_getProvider:function(){return r.qX},_registerComponent:function(){return r.Xd},_removeServiceInstance:function(){return r.wN},deleteApp:function(){return r.P2},getApp:function(){return r.Mq},getApps:function(){return r.C6},initializeApp:function(){return r.ZF},onLog:function(){return r.TP},registerVersion:function(){return r.KN},setLogLevel:function(){return r.Ub}});var r=n(32238);(0,r.KN)("firebase","9.6.4","app")},16690:function(e,t,n){"use strict";n.r(t),n.d(t,{ActionCodeOperation:function(){return r.ActionCodeOperation},ActionCodeURL:function(){return r.ActionCodeURL},AuthCredential:function(){return r.AuthCredential},AuthErrorCodes:function(){return r.AuthErrorCodes},EmailAuthCredential:function(){return r.EmailAuthCredential},EmailAuthProvider:function(){return r.EmailAuthProvider},FacebookAuthProvider:function(){return r.FacebookAuthProvider},FactorId:function(){return r.FactorId},GithubAuthProvider:function(){return r.GithubAuthProvider},GoogleAuthProvider:function(){return r.GoogleAuthProvider},OAuthCredential:function(){return r.OAuthCredential},OAuthProvider:function(){return r.OAuthProvider},OperationType:function(){return r.OperationType},PhoneAuthCredential:function(){return r.PhoneAuthCredential},PhoneAuthProvider:function(){return r.PhoneAuthProvider},PhoneMultiFactorGenerator:function(){return r.PhoneMultiFactorGenerator},ProviderId:function(){return r.ProviderId},RecaptchaVerifier:function(){return r.RecaptchaVerifier},SAMLAuthProvider:function(){return r.SAMLAuthProvider},SignInMethod:function(){return r.SignInMethod},TwitterAuthProvider:function(){return r.TwitterAuthProvider},applyActionCode:function(){return r.applyActionCode},browserLocalPersistence:function(){return r.browserLocalPersistence},browserPopupRedirectResolver:function(){return r.browserPopupRedirectResolver},browserSessionPersistence:function(){return r.browserSessionPersistence},checkActionCode:function(){return r.checkActionCode},confirmPasswordReset:function(){return r.confirmPasswordReset},connectAuthEmulator:function(){return r.connectAuthEmulator},createUserWithEmailAndPassword:function(){return r.createUserWithEmailAndPassword},debugErrorMap:function(){return r.debugErrorMap},deleteUser:function(){return r.deleteUser},fetchSignInMethodsForEmail:function(){return r.fetchSignInMethodsForEmail},getAdditionalUserInfo:function(){return r.getAdditionalUserInfo},getAuth:function(){return r.getAuth},getIdToken:function(){return r.getIdToken},getIdTokenResult:function(){return r.getIdTokenResult},getMultiFactorResolver:function(){return r.getMultiFactorResolver},getRedirectResult:function(){return r.getRedirectResult},inMemoryPersistence:function(){return r.inMemoryPersistence},indexedDBLocalPersistence:function(){return r.indexedDBLocalPersistence},initializeAuth:function(){return r.initializeAuth},isSignInWithEmailLink:function(){return r.isSignInWithEmailLink},linkWithCredential:function(){return r.linkWithCredential},linkWithPhoneNumber:function(){return r.linkWithPhoneNumber},linkWithPopup:function(){return r.linkWithPopup},linkWithRedirect:function(){return r.linkWithRedirect},multiFactor:function(){return r.multiFactor},onAuthStateChanged:function(){return r.onAuthStateChanged},onIdTokenChanged:function(){return r.onIdTokenChanged},parseActionCodeURL:function(){return r.parseActionCodeURL},prodErrorMap:function(){return r.prodErrorMap},reauthenticateWithCredential:function(){return r.reauthenticateWithCredential},reauthenticateWithPhoneNumber:function(){return r.reauthenticateWithPhoneNumber},reauthenticateWithPopup:function(){return r.reauthenticateWithPopup},reauthenticateWithRedirect:function(){return r.reauthenticateWithRedirect},reload:function(){return r.reload},sendEmailVerification:function(){return r.sendEmailVerification},sendPasswordResetEmail:function(){return r.sendPasswordResetEmail},sendSignInLinkToEmail:function(){return r.sendSignInLinkToEmail},setPersistence:function(){return r.setPersistence},signInAnonymously:function(){return r.signInAnonymously},signInWithCredential:function(){return r.signInWithCredential},signInWithCustomToken:function(){return r.signInWithCustomToken},signInWithEmailAndPassword:function(){return r.signInWithEmailAndPassword},signInWithEmailLink:function(){return r.signInWithEmailLink},signInWithPhoneNumber:function(){return r.signInWithPhoneNumber},signInWithPopup:function(){return r.signInWithPopup},signInWithRedirect:function(){return r.signInWithRedirect},signOut:function(){return r.signOut},unlink:function(){return r.unlink},updateCurrentUser:function(){return r.updateCurrentUser},updateEmail:function(){return r.updateEmail},updatePassword:function(){return r.updatePassword},updatePhoneNumber:function(){return r.updatePhoneNumber},updateProfile:function(){return r.updateProfile},useDeviceLanguage:function(){return r.useDeviceLanguage},verifyBeforeUpdateEmail:function(){return r.verifyBeforeUpdateEmail},verifyPasswordResetCode:function(){return r.verifyPasswordResetCode}});var r=n(75149)},96257:function(e,t,n){"use strict";n.r(t),n.d(t,{AbstractUserDataWriter:function(){return r.AbstractUserDataWriter},Bytes:function(){return r.Bytes},CACHE_SIZE_UNLIMITED:function(){return r.CACHE_SIZE_UNLIMITED},CollectionReference:function(){return r.CollectionReference},DocumentReference:function(){return r.DocumentReference},DocumentSnapshot:function(){return r.DocumentSnapshot},FieldPath:function(){return r.FieldPath},FieldValue:function(){return r.FieldValue},Firestore:function(){return r.Firestore},FirestoreError:function(){return r.FirestoreError},GeoPoint:function(){return r.GeoPoint},LoadBundleTask:function(){return r.LoadBundleTask},Query:function(){return r.Query},QueryConstraint:function(){return r.QueryConstraint},QueryDocumentSnapshot:function(){return r.QueryDocumentSnapshot},QuerySnapshot:function(){return r.QuerySnapshot},SnapshotMetadata:function(){return r.SnapshotMetadata},Timestamp:function(){return r.Timestamp},Transaction:function(){return r.Transaction},WriteBatch:function(){return r.WriteBatch},_DatabaseId:function(){return r._DatabaseId},_DocumentKey:function(){return r._DocumentKey},_EmptyAppCheckTokenProvider:function(){return r._EmptyAppCheckTokenProvider},_EmptyAuthCredentialsProvider:function(){return r._EmptyAuthCredentialsProvider},_FieldPath:function(){return r._FieldPath},_cast:function(){return r._cast},_debugAssert:function(){return r._debugAssert},_isBase64Available:function(){return r._isBase64Available},_logWarn:function(){return r._logWarn},_validateIsNotUsedTogether:function(){return r._validateIsNotUsedTogether},addDoc:function(){return r.addDoc},arrayRemove:function(){return r.arrayRemove},arrayUnion:function(){return r.arrayUnion},clearIndexedDbPersistence:function(){return r.clearIndexedDbPersistence},collection:function(){return r.collection},collectionGroup:function(){return r.collectionGroup},connectFirestoreEmulator:function(){return r.connectFirestoreEmulator},deleteDoc:function(){return r.deleteDoc},deleteField:function(){return r.deleteField},disableNetwork:function(){return r.disableNetwork},doc:function(){return r.doc},documentId:function(){return r.documentId},enableIndexedDbPersistence:function(){return r.enableIndexedDbPersistence},enableMultiTabIndexedDbPersistence:function(){return r.enableMultiTabIndexedDbPersistence},enableNetwork:function(){return r.enableNetwork},endAt:function(){return r.endAt},endBefore:function(){return r.endBefore},ensureFirestoreConfigured:function(){return r.ensureFirestoreConfigured},executeWrite:function(){return r.executeWrite},getDoc:function(){return r.getDoc},getDocFromCache:function(){return r.getDocFromCache},getDocFromServer:function(){return r.getDocFromServer},getDocs:function(){return r.getDocs},getDocsFromCache:function(){return r.getDocsFromCache},getDocsFromServer:function(){return r.getDocsFromServer},getFirestore:function(){return r.getFirestore},increment:function(){return r.increment},initializeFirestore:function(){return r.initializeFirestore},limit:function(){return r.limit},limitToLast:function(){return r.limitToLast},loadBundle:function(){return r.loadBundle},namedQuery:function(){return r.namedQuery},onSnapshot:function(){return r.onSnapshot},onSnapshotsInSync:function(){return r.onSnapshotsInSync},orderBy:function(){return r.orderBy},query:function(){return r.query},queryEqual:function(){return r.queryEqual},refEqual:function(){return r.refEqual},runTransaction:function(){return r.runTransaction},serverTimestamp:function(){return r.serverTimestamp},setDoc:function(){return r.setDoc},setLogLevel:function(){return r.setLogLevel},snapshotEqual:function(){return r.snapshotEqual},startAfter:function(){return r.startAfter},startAt:function(){return r.startAt},terminate:function(){return r.terminate},updateDoc:function(){return r.updateDoc},waitForPendingWrites:function(){return r.waitForPendingWrites},where:function(){return r.where},writeBatch:function(){return r.writeBatch}});var r=n(83680)},33404:function(e,t,n){"use strict";n.r(t),n.d(t,{StringFormat:function(){return r.StringFormat},_FbsBlob:function(){return r._FbsBlob},_Location:function(){return r._Location},_TaskEvent:function(){return r._TaskEvent},_TaskState:function(){return r._TaskState},_UploadTask:function(){return r._UploadTask},_dataFromString:function(){return r._dataFromString},_getChild:function(){return r._getChild},_invalidArgument:function(){return r._invalidArgument},_invalidRootOperation:function(){return r._invalidRootOperation},connectStorageEmulator:function(){return r.connectStorageEmulator},deleteObject:function(){return r.deleteObject},getBlob:function(){return r.getBlob},getBytes:function(){return r.getBytes},getDownloadURL:function(){return r.getDownloadURL},getMetadata:function(){return r.getMetadata},getStorage:function(){return r.getStorage},getStream:function(){return r.getStream},list:function(){return r.list},listAll:function(){return r.listAll},ref:function(){return r.ref},updateMetadata:function(){return r.updateMetadata},uploadBytes:function(){return r.uploadBytes},uploadBytesResumable:function(){return r.uploadBytesResumable},uploadString:function(){return r.uploadString}});var r=n(90774)},38058:function(e){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},90071:function(e,t,n){"use strict";n.d(t,{lX:function(){return S},q_:function(){return P},ob:function(){return m},PP:function(){return I},Ep:function(){return p},Hp:function(){return g}});var r=n(87462);function i(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var s=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],s=t&&t.split("/")||[],a=e&&i(e),l=t&&i(t),c=a||l;if(e&&i(e)?s=r:r.length&&(s.pop(),s=s.concat(r)),!s.length)return"/";if(s.length){var u=s[s.length-1];n="."===u||".."===u||""===u}else n=!1;for(var d=0,h=s.length;h>=0;h--){var f=s[h];"."===f?o(s,h):".."===f?(o(s,h),d++):d&&(o(s,h),d--)}if(!c)for(;d--;d)s.unshift("..");!c||""===s[0]||s[0]&&i(s[0])||s.unshift("");var p=s.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function a(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var l=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"==typeof t||"object"==typeof n){var r=a(t),i=a(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},c=n(2177);function u(e){return"/"===e.charAt(0)?e:"/"+e}function d(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function f(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function m(e,t,n,i){var o;"string"==typeof e?(o=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),o.state=t):(void 0===(o=(0,r.Z)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=s(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function g(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&l(e.state,t.state)}function v(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var y=!("undefined"==typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}var w="popstate",x="hashchange";function _(){try{return window.history.state||{}}catch(e){return{}}}function S(e){void 0===e&&(e={}),y||(0,c.Z)(!1);var t,n=window.history,i=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,o=!(-1===window.navigator.userAgent.indexOf("Trident")),s=e,a=s.forceRefresh,l=void 0!==a&&a,d=s.getUserConfirmation,g=void 0===d?b:d,S=s.keyLength,E=void 0===S?6:S,T=e.basename?f(u(e.basename)):"";function C(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return T&&(o=h(o,T)),m(o,r,n)}function M(){return Math.random().toString(36).substr(2,E)}var k=v();function P(e){(0,r.Z)(z,e),z.length=n.length,k.notifyListeners(z.location,z.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||L(C(e.state))}function I(){L(C(_()))}var R=!1;function L(e){if(R)R=!1,P();else{k.confirmTransitionTo(e,"POP",g,(function(t){t?P({action:"POP",location:e}):function(e){var t=z.location,n=N.indexOf(t.key);-1===n&&(n=0);var r=N.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(R=!0,F(i))}(e)}))}}var O=C(_()),N=[O.key];function D(e){return T+p(e)}function F(e){n.go(e)}var B=0;function Z(e){1===(B+=e)&&1===e?(window.addEventListener(w,A),o&&window.addEventListener(x,I)):0===B&&(window.removeEventListener(w,A),o&&window.removeEventListener(x,I))}var V=!1;var z={length:n.length,action:"POP",location:O,createHref:D,push:function(e,t){var r="PUSH",o=m(e,t,M(),z.location);k.confirmTransitionTo(o,r,g,(function(e){if(e){var t=D(o),s=o.key,a=o.state;if(i)if(n.pushState({key:s,state:a},null,t),l)window.location.href=t;else{var c=N.indexOf(z.location.key),u=N.slice(0,c+1);u.push(o.key),N=u,P({action:r,location:o})}else window.location.href=t}}))},replace:function(e,t){var r="REPLACE",o=m(e,t,M(),z.location);k.confirmTransitionTo(o,r,g,(function(e){if(e){var t=D(o),s=o.key,a=o.state;if(i)if(n.replaceState({key:s,state:a},null,t),l)window.location.replace(t);else{var c=N.indexOf(z.location.key);-1!==c&&(N[c]=o.key),P({action:r,location:o})}else window.location.replace(t)}}))},go:F,goBack:function(){F(-1)},goForward:function(){F(1)},block:function(e){void 0===e&&(e=!1);var t=k.setPrompt(e);return V||(Z(1),V=!0),function(){return V&&(V=!1,Z(-1)),t()}},listen:function(e){var t=k.appendListener(e);return Z(1),function(){Z(-1),t()}}};return z}var E="hashchange",T={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+d(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:d,decodePath:u},slash:{encodePath:u,decodePath:u}};function C(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function M(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function k(e){window.location.replace(C(window.location.href)+"#"+e)}function P(e){void 0===e&&(e={}),y||(0,c.Z)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,o=void 0===i?b:i,s=n.hashType,a=void 0===s?"slash":s,l=e.basename?f(u(e.basename)):"",d=T[a],g=d.encodePath,w=d.decodePath;function x(){var e=w(M());return l&&(e=h(e,l)),m(e)}var _=v();function S(e){(0,r.Z)(V,e),V.length=t.length,_.notifyListeners(V.location,V.action)}var P=!1,A=null;function I(){var e,t,n=M(),r=g(n);if(n!==r)k(r);else{var i=x(),s=V.location;if(!P&&(t=i,(e=s).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(A===p(i))return;A=null,function(e){if(P)P=!1,S();else{var t="POP";_.confirmTransitionTo(e,t,o,(function(n){n?S({action:t,location:e}):function(e){var t=V.location,n=N.lastIndexOf(p(t));-1===n&&(n=0);var r=N.lastIndexOf(p(e));-1===r&&(r=0);var i=n-r;i&&(P=!0,D(i))}(e)}))}}(i)}}var R=M(),L=g(R);R!==L&&k(L);var O=x(),N=[p(O)];function D(e){t.go(e)}var F=0;function B(e){1===(F+=e)&&1===e?window.addEventListener(E,I):0===F&&window.removeEventListener(E,I)}var Z=!1;var V={length:t.length,action:"POP",location:O,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=C(window.location.href)),n+"#"+g(l+p(e))},push:function(e,t){var n="PUSH",r=m(e,void 0,void 0,V.location);_.confirmTransitionTo(r,n,o,(function(e){if(e){var t=p(r),i=g(l+t);if(M()!==i){A=t,function(e){window.location.hash=e}(i);var o=N.lastIndexOf(p(V.location)),s=N.slice(0,o+1);s.push(t),N=s,S({action:n,location:r})}else S()}}))},replace:function(e,t){var n="REPLACE",r=m(e,void 0,void 0,V.location);_.confirmTransitionTo(r,n,o,(function(e){if(e){var t=p(r),i=g(l+t);M()!==i&&(A=t,k(i));var o=N.indexOf(p(V.location));-1!==o&&(N[o]=t),S({action:n,location:r})}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(e){void 0===e&&(e=!1);var t=_.setPrompt(e);return Z||(B(1),Z=!0),function(){return Z&&(Z=!1,B(-1)),t()}},listen:function(e){var t=_.appendListener(e);return B(1),function(){B(-1),t()}}};return V}function A(e,t,n){return Math.min(Math.max(e,t),n)}function I(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,o=void 0===i?["/"]:i,s=t.initialIndex,a=void 0===s?0:s,l=t.keyLength,c=void 0===l?6:l,u=v();function d(e){(0,r.Z)(w,e),w.length=w.entries.length,u.notifyListeners(w.location,w.action)}function h(){return Math.random().toString(36).substr(2,c)}var f=A(a,0,o.length-1),g=o.map((function(e){return m(e,void 0,"string"==typeof e?h():e.key||h())})),y=p;function b(e){var t=A(w.index+e,0,w.entries.length-1),r=w.entries[t];u.confirmTransitionTo(r,"POP",n,(function(e){e?d({action:"POP",location:r,index:t}):d()}))}var w={length:g.length,action:"POP",location:g[f],index:f,entries:g,createHref:y,push:function(e,t){var r="PUSH",i=m(e,t,h(),w.location);u.confirmTransitionTo(i,r,n,(function(e){if(e){var t=w.index+1,n=w.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),d({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=m(e,t,h(),w.location);u.confirmTransitionTo(i,r,n,(function(e){e&&(w.entries[w.index]=i,d({action:r,location:i}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=w.index+e;return t>=0&&t<w.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return w}},8679:function(e,t,n){"use strict";var r=n(21296),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=l(t),m=l(n),g=0;g<s.length;++g){var v=s[g];if(!(o[v]||r&&r[v]||m&&m[v]||a&&a[v])){var y=h(n,v);try{c(t,v,y)}catch(e){}}}}return t}},96103:function(e,t){"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function _(e){return x(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return _(e)||x(e)===u},t.isConcurrentMode=_,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===s},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===a||e===s||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=x},21296:function(e,t,n){"use strict";e.exports=n(96103)},80645:function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+f]=255&s,f+=p,s/=256,c-=8);e[n+f-p]|=128*m}},5826:function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},89842:function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t){var r={};e.exports=r,function(){r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r._warnedOnce={},r._decomp=null,r.extend=function(e,t){var n,i;"boolean"==typeof t?(n=2,i=t):(n=1,i=!0);for(var o=n;o<arguments.length;o++){var s=arguments[o];if(s)for(var a in s)i&&s[a]&&s[a].constructor===Object?e[a]&&e[a].constructor!==Object?e[a]=s[a]:(e[a]=e[a]||{},r.extend(e[a],i,s[a])):e[a]=s[a]}return e},r.clone=function(e,t){return r.extend({},t,e)},r.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},r.values=function(e){var t=[];if(Object.keys){for(var n=Object.keys(e),r=0;r<n.length;r++)t.push(e[n[r]]);return t}for(var i in e)t.push(e[i]);return t},r.get=function(e,t,n,r){t=t.split(".").slice(n,r);for(var i=0;i<t.length;i+=1)e=e[t[i]];return e},r.set=function(e,t,n,i,o){var s=t.split(".").slice(i,o);return r.get(e,t,0,-1)[s[s.length-1]]=n,n},r.shuffle=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(r.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}return e},r.choose=function(e){return e[Math.floor(r.random()*e.length)]},r.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},r.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},r.isFunction=function(e){return"function"==typeof e},r.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},r.isString=function(e){return"[object String]"===toString.call(e)},r.clamp=function(e,t,n){return e<t?t:e>n?n:e},r.sign=function(e){return e<0?-1:1},r.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-r._nowStartTime},r.random=function(t,n){return n=void 0!==n?n:1,(t=void 0!==t?t:0)+e()*(n-t)};var e=function(){return r._seed=(9301*r._seed+49297)%233280,r._seed/233280};r.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warnOnce=function(){var e=Array.prototype.slice.call(arguments).join(" ");r._warnedOnce[e]||(r.warn(e),r._warnedOnce[e]=!0)},r.deprecated=function(e,t,n){e[t]=r.chain((function(){r.warnOnce(" deprecated ",n)}),e[t])},r.nextId=function(){return r._nextId++},r.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},r.map=function(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n},r.topologicalSort=function(e){var t=[],n=[],i=[];for(var o in e)n[o]||i[o]||r._topologicalSort(o,n,i,e,t);return t},r._topologicalSort=function(e,t,n,i,o){var s=i[e]||[];n[e]=!0;for(var a=0;a<s.length;a+=1){var l=s[a];n[l]||t[l]||r._topologicalSort(l,t,n,i,o)}n[e]=!1,t[e]=!0,o.push(e)},r.chain=function(){for(var e=[],t=0;t<arguments.length;t+=1){var n=arguments[t];n._chained?e.push.apply(e,n._chained):e.push(n)}var r=function(){for(var t,n=new Array(arguments.length),r=0,i=arguments.length;r<i;r++)n[r]=arguments[r];for(r=0;r<e.length;r+=1){var o=e[r].apply(t,n);void 0!==o&&(t=o)}return t};return r._chained=e,r},r.chainPathBefore=function(e,t,n){return r.set(e,t,r.chain(n,r.get(e,t)))},r.chainPathAfter=function(e,t,n){return r.set(e,t,r.chain(r.get(e,t),n))},r.setDecomp=function(e){r._decomp=e},r.getDecomp=function(){var e=r._decomp;try{e||"undefined"==typeof window||(e=window.decomp),e||void 0===n.g||(e=n.g.decomp)}catch(t){e=null}return e}}()},function(e,t){var n={};e.exports=n,n.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&n.update(t,e),t},n.update=function(e,t,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<t.length;r++){var i=t[r];i.x>e.max.x&&(e.max.x=i.x),i.x<e.min.x&&(e.min.x=i.x),i.y>e.max.y&&(e.max.y=i.y),i.y<e.min.y&&(e.min.y=i.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},n.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},n.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},n.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},n.shift=function(e,t){var n=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+n,e.min.y=t.y,e.max.y=t.y+r}},function(e,t){var n={};e.exports=n,n.create=function(e,t){return{x:e||0,y:t||0}},n.clone=function(e){return{x:e.x,y:e.y}},n.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},n.rotate=function(e,t,n){var r=Math.cos(t),i=Math.sin(t);n||(n={});var o=e.x*r-e.y*i;return n.y=e.x*i+e.y*r,n.x=o,n},n.rotateAbout=function(e,t,n,r){var i=Math.cos(t),o=Math.sin(t);r||(r={});var s=n.x+((e.x-n.x)*i-(e.y-n.y)*o);return r.y=n.y+((e.x-n.x)*o+(e.y-n.y)*i),r.x=s,r},n.normalise=function(e){var t=n.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.cross=function(e,t){return e.x*t.y-e.y*t.x},n.cross3=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},n.add=function(e,t,n){return n||(n={}),n.x=e.x+t.x,n.y=e.y+t.y,n},n.sub=function(e,t,n){return n||(n={}),n.x=e.x-t.x,n.y=e.y-t.y,n},n.mult=function(e,t){return{x:e.x*t,y:e.y*t}},n.div=function(e,t){return{x:e.x/t,y:e.y/t}},n.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},n.neg=function(e){return{x:-e.x,y:-e.y}},n.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]},function(e,t,n){var r={};e.exports=r;var i=n(2),o=n(0);r.create=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o={x:i.x,y:i.y,index:r,body:t,isInternal:!1};n.push(o)}return n},r.fromPath=function(e,t){var n=[];return e.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(e,t,r){n.push({x:parseFloat(t),y:parseFloat(r)})})),r.create(n,t)},r.centre=function(e){for(var t,n,o,s=r.area(e,!0),a={x:0,y:0},l=0;l<e.length;l++)o=(l+1)%e.length,t=i.cross(e[l],e[o]),n=i.mult(i.add(e[l],e[o]),t),a=i.add(a,n);return i.div(a,6*s)},r.mean=function(e){for(var t={x:0,y:0},n=0;n<e.length;n++)t.x+=e[n].x,t.y+=e[n].y;return i.div(t,e.length)},r.area=function(e,t){for(var n=0,r=e.length-1,i=0;i<e.length;i++)n+=(e[r].x-e[i].x)*(e[r].y+e[i].y),r=i;return t?n/2:Math.abs(n)/2},r.inertia=function(e,t){for(var n,r,o=0,s=0,a=e,l=0;l<a.length;l++)r=(l+1)%a.length,o+=(n=Math.abs(i.cross(a[r],a[l])))*(i.dot(a[r],a[r])+i.dot(a[r],a[l])+i.dot(a[l],a[l])),s+=n;return t/6*(o/s)},r.translate=function(e,t,n){var r;if(n)for(r=0;r<e.length;r++)e[r].x+=t.x*n,e[r].y+=t.y*n;else for(r=0;r<e.length;r++)e[r].x+=t.x,e[r].y+=t.y;return e},r.rotate=function(e,t,n){if(0!==t){for(var r=Math.cos(t),i=Math.sin(t),o=0;o<e.length;o++){var s=e[o],a=s.x-n.x,l=s.y-n.y;s.x=n.x+(a*r-l*i),s.y=n.y+(a*i+l*r)}return e}},r.contains=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=e[(n+1)%e.length];if((t.x-r.x)*(i.y-r.y)+(t.y-r.y)*(r.x-i.x)>0)return!1}return!0},r.scale=function(e,t,n,o){if(1===t&&1===n)return e;var s,a;o=o||r.centre(e);for(var l=0;l<e.length;l++)s=e[l],a=i.sub(s,o),e[l].x=o.x+a.x*t,e[l].y=o.y+a.y*n;return e},r.chamfer=function(e,t,n,r,s){t="number"==typeof t?[t]:t||[8],n=void 0!==n?n:-1,r=r||2,s=s||14;for(var a=[],l=0;l<e.length;l++){var c=e[l-1>=0?l-1:e.length-1],u=e[l],d=e[(l+1)%e.length],h=t[l<t.length?l:t.length-1];if(0!==h){var f=i.normalise({x:u.y-c.y,y:c.x-u.x}),p=i.normalise({x:d.y-u.y,y:u.x-d.x}),m=Math.sqrt(2*Math.pow(h,2)),g=i.mult(o.clone(f),h),v=i.normalise(i.mult(i.add(f,p),.5)),y=i.sub(u,i.mult(v,m)),b=n;-1===n&&(b=1.75*Math.pow(h,.32)),(b=o.clamp(b,r,s))%2==1&&(b+=1);for(var w=Math.acos(i.dot(f,p))/b,x=0;x<b;x++)a.push(i.add(i.rotate(g,w*x),y))}else a.push(u)}return a},r.clockwiseSort=function(e){var t=r.mean(e);return e.sort((function(e,n){return i.angle(t,e)-i.angle(t,n)})),e},r.isConvex=function(e){var t,n,r,i,o=0,s=e.length;if(s<3)return null;for(t=0;t<s;t++)if(r=(t+2)%s,i=(e[n=(t+1)%s].x-e[t].x)*(e[r].y-e[n].y),(i-=(e[n].y-e[t].y)*(e[r].x-e[n].x))<0?o|=1:i>0&&(o|=2),3===o)return!1;return 0!==o||null},r.hull=function(e){var t,n,r=[],o=[];for((e=e.slice(0)).sort((function(e,t){var n=e.x-t.x;return 0!==n?n:e.y-t.y})),n=0;n<e.length;n+=1){for(t=e[n];o.length>=2&&i.cross3(o[o.length-2],o[o.length-1],t)<=0;)o.pop();o.push(t)}for(n=e.length-1;n>=0;n-=1){for(t=e[n];r.length>=2&&i.cross3(r[r.length-2],r[r.length-1],t)<=0;)r.pop();r.push(t)}return r.pop(),o.pop(),r.concat(o)}},function(e,t,n){var r={};e.exports=r;var i=n(0);r.on=function(e,t,n){for(var r,i=t.split(" "),o=0;o<i.length;o++)r=i[o],e.events=e.events||{},e.events[r]=e.events[r]||[],e.events[r].push(n);return n},r.off=function(e,t,n){if(t){"function"==typeof t&&(n=t,t=i.keys(e.events).join(" "));for(var r=t.split(" "),o=0;o<r.length;o++){var s=e.events[r[o]],a=[];if(n&&s)for(var l=0;l<s.length;l++)s[l]!==n&&a.push(s[l]);e.events[r[o]]=a}}else e.events={}},r.trigger=function(e,t,n){var r,o,s,a,l=e.events;if(l&&i.keys(l).length>0){n||(n={}),r=t.split(" ");for(var c=0;c<r.length;c++)if(s=l[o=r[c]]){(a=i.clone(n,!1)).name=o,a.source=e;for(var u=0;u<s.length;u++)s[u].apply(e,[a])}}}},function(e,t,n){var r={};e.exports=r;var i=n(4),o=n(0),s=n(1),a=n(6);r.create=function(e){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},r.setModified=function(e,t,n,i){if(e.isModified=t,n&&e.parent&&r.setModified(e.parent,t,n,i),i)for(var o=0;o<e.composites.length;o++){var s=e.composites[o];r.setModified(s,t,n,i)}},r.add=function(e,t){var n=[].concat(t);i.trigger(e,"beforeAdd",{object:t});for(var s=0;s<n.length;s++){var a=n[s];switch(a.type){case"body":if(a.parent!==a){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(e,a);break;case"constraint":r.addConstraint(e,a);break;case"composite":r.addComposite(e,a);break;case"mouseConstraint":r.addConstraint(e,a.constraint)}}return i.trigger(e,"afterAdd",{object:t}),e},r.remove=function(e,t,n){var o=[].concat(t);i.trigger(e,"beforeRemove",{object:t});for(var s=0;s<o.length;s++){var a=o[s];switch(a.type){case"body":r.removeBody(e,a,n);break;case"constraint":r.removeConstraint(e,a,n);break;case"composite":r.removeComposite(e,a,n);break;case"mouseConstraint":r.removeConstraint(e,a.constraint)}}return i.trigger(e,"afterRemove",{object:t}),e},r.addComposite=function(e,t){return e.composites.push(t),t.parent=e,r.setModified(e,!0,!0,!1),e},r.removeComposite=function(e,t,n){var i=o.indexOf(e.composites,t);if(-1!==i&&(r.removeCompositeAt(e,i),r.setModified(e,!0,!0,!1)),n)for(var s=0;s<e.composites.length;s++)r.removeComposite(e.composites[s],t,!0);return e},r.removeCompositeAt=function(e,t){return e.composites.splice(t,1),r.setModified(e,!0,!0,!1),e},r.addBody=function(e,t){return e.bodies.push(t),r.setModified(e,!0,!0,!1),e},r.removeBody=function(e,t,n){var i=o.indexOf(e.bodies,t);if(-1!==i&&(r.removeBodyAt(e,i),r.setModified(e,!0,!0,!1)),n)for(var s=0;s<e.composites.length;s++)r.removeBody(e.composites[s],t,!0);return e},r.removeBodyAt=function(e,t){return e.bodies.splice(t,1),r.setModified(e,!0,!0,!1),e},r.addConstraint=function(e,t){return e.constraints.push(t),r.setModified(e,!0,!0,!1),e},r.removeConstraint=function(e,t,n){var i=o.indexOf(e.constraints,t);if(-1!==i&&r.removeConstraintAt(e,i),n)for(var s=0;s<e.composites.length;s++)r.removeConstraint(e.composites[s],t,!0);return e},r.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),r.setModified(e,!0,!0,!1),e},r.clear=function(e,t,n){if(n)for(var i=0;i<e.composites.length;i++)r.clear(e.composites[i],t,!0);return t?e.bodies=e.bodies.filter((function(e){return e.isStatic})):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,r.setModified(e,!0,!0,!1),e},r.allBodies=function(e){for(var t=[].concat(e.bodies),n=0;n<e.composites.length;n++)t=t.concat(r.allBodies(e.composites[n]));return t},r.allConstraints=function(e){for(var t=[].concat(e.constraints),n=0;n<e.composites.length;n++)t=t.concat(r.allConstraints(e.composites[n]));return t},r.allComposites=function(e){for(var t=[].concat(e.composites),n=0;n<e.composites.length;n++)t=t.concat(r.allComposites(e.composites[n]));return t},r.get=function(e,t,n){var i,o;switch(n){case"body":i=r.allBodies(e);break;case"constraint":i=r.allConstraints(e);break;case"composite":i=r.allComposites(e).concat(e)}return i?0===(o=i.filter((function(e){return e.id.toString()===t.toString()}))).length?null:o[0]:null},r.move=function(e,t,n){return r.remove(e,t),r.add(n,t),e},r.rebase=function(e){for(var t=r.allBodies(e).concat(r.allConstraints(e)).concat(r.allComposites(e)),n=0;n<t.length;n++)t[n].id=o.nextId();return r.setModified(e,!0,!0,!1),e},r.translate=function(e,t,n){for(var i=n?r.allBodies(e):e.bodies,o=0;o<i.length;o++)a.translate(i[o],t);return r.setModified(e,!0,!0,!1),e},r.rotate=function(e,t,n,i){for(var o=Math.cos(t),s=Math.sin(t),l=i?r.allBodies(e):e.bodies,c=0;c<l.length;c++){var u=l[c],d=u.position.x-n.x,h=u.position.y-n.y;a.setPosition(u,{x:n.x+(d*o-h*s),y:n.y+(d*s+h*o)}),a.rotate(u,t)}return r.setModified(e,!0,!0,!1),e},r.scale=function(e,t,n,i,o){for(var s=o?r.allBodies(e):e.bodies,l=0;l<s.length;l++){var c=s[l],u=c.position.x-i.x,d=c.position.y-i.y;a.setPosition(c,{x:i.x+u*t,y:i.y+d*n}),a.scale(c,t,n)}return r.setModified(e,!0,!0,!1),e},r.bounds=function(e){for(var t=r.allBodies(e),n=[],i=0;i<t.length;i+=1){var o=t[i];n.push(o.bounds.min,o.bounds.max)}return s.create(n)}},function(e,t,n){var r={};e.exports=r;var i=n(3),o=n(2),s=n(7),a=(n(16),n(0)),l=n(1),c=n(10);!function(){r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r.create=function(t){var n={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:i.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},r=a.extend(n,t);return e(r,t),r},r.nextGroup=function(e){return e?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var e=function(e,t){t=t||{},r.set(e,{bounds:e.bounds||l.create(e.vertices),positionPrev:e.positionPrev||o.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),i.rotate(e.vertices,e.angle,e.position),c.rotate(e.axes,e.angle),l.update(e.bounds,e.vertices,e.velocity),r.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var n=e.isStatic?"#14151f":a.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),s=e.isStatic?"#555":"#ccc",u=e.isStatic&&null===e.render.fillStyle?1:0;e.render.fillStyle=e.render.fillStyle||n,e.render.strokeStyle=e.render.strokeStyle||s,e.render.lineWidth=e.render.lineWidth||u,e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};r.set=function(e,t,n){var i;for(i in"string"==typeof t&&(i=t,(t={})[i]=n),t)if(Object.prototype.hasOwnProperty.call(t,i))switch(n=t[i],i){case"isStatic":r.setStatic(e,n);break;case"isSleeping":s.set(e,n);break;case"mass":r.setMass(e,n);break;case"density":r.setDensity(e,n);break;case"inertia":r.setInertia(e,n);break;case"vertices":r.setVertices(e,n);break;case"position":r.setPosition(e,n);break;case"angle":r.setAngle(e,n);break;case"velocity":r.setVelocity(e,n);break;case"angularVelocity":r.setAngularVelocity(e,n);break;case"parts":r.setParts(e,n);break;case"centre":r.setCentre(e,n);break;default:e[i]=n}},r.setStatic=function(e,t){for(var n=0;n<e.parts.length;n++){var r=e.parts[n];r.isStatic=t,t?(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia},r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,r._original=null)}},r.setMass=function(e,t){var n=e.inertia/(e.mass/6);e.inertia=n*(t/6),e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},r.setDensity=function(e,t){r.setMass(e,t*e.area),e.density=t},r.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},r.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=i.create(t,e),e.axes=c.fromVertices(e.vertices),e.area=i.area(e.vertices),r.setMass(e,e.density*e.area);var n=i.centre(e.vertices);i.translate(e.vertices,n,-1),r.setInertia(e,r._inertiaScale*i.inertia(e.vertices,e.mass)),i.translate(e.vertices,e.position),l.update(e.bounds,e.vertices,e.velocity)},r.setParts=function(e,t,n){var o;for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,o=0;o<t.length;o++){var s=t[o];s!==e&&(s.parent=e,e.parts.push(s))}if(1!==e.parts.length){if(n=void 0===n||n){var a=[];for(o=0;o<t.length;o++)a=a.concat(t[o].vertices);i.clockwiseSort(a);var l=i.hull(a),c=i.centre(l);r.setVertices(e,l),i.translate(e.vertices,c)}var u=r._totalProperties(e);e.area=u.area,e.parent=e,e.position.x=u.centre.x,e.position.y=u.centre.y,e.positionPrev.x=u.centre.x,e.positionPrev.y=u.centre.y,r.setMass(e,u.mass),r.setInertia(e,u.inertia),r.setPosition(e,u.centre)}},r.setCentre=function(e,t,n){n?(e.positionPrev.x+=t.x,e.positionPrev.y+=t.y,e.position.x+=t.x,e.position.y+=t.y):(e.positionPrev.x=t.x-(e.position.x-e.positionPrev.x),e.positionPrev.y=t.y-(e.position.y-e.positionPrev.y),e.position.x=t.x,e.position.y=t.y)},r.setPosition=function(e,t){var n=o.sub(t,e.position);e.positionPrev.x+=n.x,e.positionPrev.y+=n.y;for(var r=0;r<e.parts.length;r++){var s=e.parts[r];s.position.x+=n.x,s.position.y+=n.y,i.translate(s.vertices,n),l.update(s.bounds,s.vertices,e.velocity)}},r.setAngle=function(e,t){var n=t-e.angle;e.anglePrev+=n;for(var r=0;r<e.parts.length;r++){var s=e.parts[r];s.angle+=n,i.rotate(s.vertices,n,e.position),c.rotate(s.axes,n),l.update(s.bounds,s.vertices,e.velocity),r>0&&o.rotateAbout(s.position,n,e.position,s.position)}},r.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=o.magnitude(e.velocity)},r.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=Math.abs(e.angularVelocity)},r.translate=function(e,t){r.setPosition(e,o.add(e.position,t))},r.rotate=function(e,t,n){if(n){var i=Math.cos(t),o=Math.sin(t),s=e.position.x-n.x,a=e.position.y-n.y;r.setPosition(e,{x:n.x+(s*i-a*o),y:n.y+(s*o+a*i)}),r.setAngle(e,e.angle+t)}else r.setAngle(e,e.angle+t)},r.scale=function(e,t,n,o){var s=0,a=0;o=o||e.position;for(var u=0;u<e.parts.length;u++){var d=e.parts[u];i.scale(d.vertices,t,n,o),d.axes=c.fromVertices(d.vertices),d.area=i.area(d.vertices),r.setMass(d,e.density*d.area),i.translate(d.vertices,{x:-d.position.x,y:-d.position.y}),r.setInertia(d,r._inertiaScale*i.inertia(d.vertices,d.mass)),i.translate(d.vertices,{x:d.position.x,y:d.position.y}),u>0&&(s+=d.area,a+=d.inertia),d.position.x=o.x+(d.position.x-o.x)*t,d.position.y=o.y+(d.position.y-o.y)*n,l.update(d.bounds,d.vertices,e.velocity)}e.parts.length>1&&(e.area=s,e.isStatic||(r.setMass(e,e.density*s),r.setInertia(e,a))),e.circleRadius&&(t===n?e.circleRadius*=t:e.circleRadius=null)},r.update=function(e,t,n,r){var s=Math.pow(t*n*e.timeScale,2),a=1-e.frictionAir*n*e.timeScale,u=e.position.x-e.positionPrev.x,d=e.position.y-e.positionPrev.y;e.velocity.x=u*a*r+e.force.x/e.mass*s,e.velocity.y=d*a*r+e.force.y/e.mass*s,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*a*r+e.torque/e.inertia*s,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=o.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var h=0;h<e.parts.length;h++){var f=e.parts[h];i.translate(f.vertices,e.velocity),h>0&&(f.position.x+=e.velocity.x,f.position.y+=e.velocity.y),0!==e.angularVelocity&&(i.rotate(f.vertices,e.angularVelocity,e.position),c.rotate(f.axes,e.angularVelocity),h>0&&o.rotateAbout(f.position,e.angularVelocity,e.position,f.position)),l.update(f.bounds,f.vertices,e.velocity)}},r.applyForce=function(e,t,n){e.force.x+=n.x,e.force.y+=n.y;var r=t.x-e.position.x,i=t.y-e.position.y;e.torque+=r*n.y-i*n.x},r._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===e.parts.length?0:1;n<e.parts.length;n++){var r=e.parts[n],i=r.mass!==1/0?r.mass:1;t.mass+=i,t.area+=r.area,t.inertia+=r.inertia,t.centre=o.add(t.centre,o.mult(r.position,i))}return t.centre=o.div(t.centre,t.mass),t}}()},function(e,t,n){var r={};e.exports=r;var i=n(4);r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(e,t){for(var n=t*t*t,i=0;i<e.length;i++){var o=e[i],s=o.speed*o.speed+o.angularSpeed*o.angularSpeed;if(0===o.force.x&&0===o.force.y){var a=Math.min(o.motion,s),l=Math.max(o.motion,s);o.motion=r._minBias*a+(1-r._minBias)*l,o.sleepThreshold>0&&o.motion<r._motionSleepThreshold*n?(o.sleepCounter+=1,o.sleepCounter>=o.sleepThreshold&&r.set(o,!0)):o.sleepCounter>0&&(o.sleepCounter-=1)}else r.set(o,!1)}},r.afterCollisions=function(e,t){for(var n=t*t*t,i=0;i<e.length;i++){var o=e[i];if(o.isActive){var s=o.collision,a=s.bodyA.parent,l=s.bodyB.parent;if(!(a.isSleeping&&l.isSleeping||a.isStatic||l.isStatic)&&(a.isSleeping||l.isSleeping)){var c=a.isSleeping&&!a.isStatic?a:l,u=c===a?l:a;!c.isStatic&&u.motion>r._motionWakeThreshold*n&&r.set(c,!1)}}}},r.set=function(e,t){var n=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,n||i.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,n&&i.trigger(e,"sleepEnd"))}},function(e,t,n){var r={};e.exports=r;var i=n(3),o=n(2),s=n(7),a=n(1),l=n(10),c=n(0);r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?o.add(t.bodyA.position,t.pointA):t.pointA,r=t.bodyB?o.add(t.bodyB.position,t.pointB):t.pointB,i=o.magnitude(o.sub(n,r));t.length=void 0!==t.length?t.length:i,t.id=t.id||c.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var s={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&t.stiffness>.1?(s.type="pin",s.anchors=!1):t.stiffness<.9&&(s.type="spring"),t.render=c.extend(s,t.render),t},r.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var n=e[t],r=n.constraintImpulse;n.isStatic||0===r.x&&0===r.y&&0===r.angle||(n.position.x+=r.x,n.position.y+=r.y,n.angle+=r.angle)}},r.solveAll=function(e,t){for(var n=0;n<e.length;n+=1){var i=e[n],o=!i.bodyA||i.bodyA&&i.bodyA.isStatic,s=!i.bodyB||i.bodyB&&i.bodyB.isStatic;(o||s)&&r.solve(e[n],t)}for(n=0;n<e.length;n+=1)o=!(i=e[n]).bodyA||i.bodyA&&i.bodyA.isStatic,s=!i.bodyB||i.bodyB&&i.bodyB.isStatic,o||s||r.solve(e[n],t)},r.solve=function(e,t){var n=e.bodyA,i=e.bodyB,s=e.pointA,a=e.pointB;if(n||i){n&&!n.isStatic&&(o.rotate(s,n.angle-e.angleA,s),e.angleA=n.angle),i&&!i.isStatic&&(o.rotate(a,i.angle-e.angleB,a),e.angleB=i.angle);var l=s,c=a;if(n&&(l=o.add(n.position,s)),i&&(c=o.add(i.position,a)),l&&c){var u=o.sub(l,c),d=o.magnitude(u);d<r._minLength&&(d=r._minLength);var h,f,p,m,g,v=(d-e.length)/d,y=e.stiffness<1?e.stiffness*t:e.stiffness,b=o.mult(u,v*y),w=(n?n.inverseMass:0)+(i?i.inverseMass:0),x=w+((n?n.inverseInertia:0)+(i?i.inverseInertia:0));if(e.damping){var _=o.create();p=o.div(u,d),g=o.sub(i&&o.sub(i.position,i.positionPrev)||_,n&&o.sub(n.position,n.positionPrev)||_),m=o.dot(p,g)}n&&!n.isStatic&&(f=n.inverseMass/w,n.constraintImpulse.x-=b.x*f,n.constraintImpulse.y-=b.y*f,n.position.x-=b.x*f,n.position.y-=b.y*f,e.damping&&(n.positionPrev.x-=e.damping*p.x*m*f,n.positionPrev.y-=e.damping*p.y*m*f),h=o.cross(s,b)/x*r._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle-=h,n.angle-=h),i&&!i.isStatic&&(f=i.inverseMass/w,i.constraintImpulse.x+=b.x*f,i.constraintImpulse.y+=b.y*f,i.position.x+=b.x*f,i.position.y+=b.y*f,e.damping&&(i.positionPrev.x+=e.damping*p.x*m*f,i.positionPrev.y+=e.damping*p.y*m*f),h=o.cross(a,b)/x*r._torqueDampen*i.inverseInertia*(1-e.angularStiffness),i.constraintImpulse.angle+=h,i.angle+=h)}}},r.postSolveAll=function(e){for(var t=0;t<e.length;t++){var n=e[t],c=n.constraintImpulse;if(!(n.isStatic||0===c.x&&0===c.y&&0===c.angle)){s.set(n,!1);for(var u=0;u<n.parts.length;u++){var d=n.parts[u];i.translate(d.vertices,c),u>0&&(d.position.x+=c.x,d.position.y+=c.y),0!==c.angle&&(i.rotate(d.vertices,c.angle,n.position),l.rotate(d.axes,c.angle),u>0&&o.rotateAbout(d.position,c.angle,n.position,d.position)),a.update(d.bounds,d.vertices,n.velocity)}c.angle*=r._warming,c.x*=r._warming,c.y*=r._warming}}},r.pointAWorld=function(e){return{x:(e.bodyA?e.bodyA.position.x:0)+e.pointA.x,y:(e.bodyA?e.bodyA.position.y:0)+e.pointA.y}},r.pointBWorld=function(e){return{x:(e.bodyB?e.bodyB.position.x:0)+e.pointB.x,y:(e.bodyB?e.bodyB.position.y:0)+e.pointB.y}}},function(e,t,n){var r={};e.exports=r;var i=n(17);r.create=function(e,t){var n=e.bodyA,i=e.bodyB,o=e.parentA,s=e.parentB,a={id:r.id(n,i),bodyA:n,bodyB:i,contacts:{},activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||i.isSensor,timeCreated:t,timeUpdated:t,inverseMass:o.inverseMass+s.inverseMass,friction:Math.min(o.friction,s.friction),frictionStatic:Math.max(o.frictionStatic,s.frictionStatic),restitution:Math.max(o.restitution,s.restitution),slop:Math.max(o.slop,s.slop)};return r.update(a,e,t),a},r.update=function(e,t,n){var o=e.contacts,s=t.supports,a=e.activeContacts,l=t.parentA,c=t.parentB;if(e.collision=t,e.inverseMass=l.inverseMass+c.inverseMass,e.friction=Math.min(l.friction,c.friction),e.frictionStatic=Math.max(l.frictionStatic,c.frictionStatic),e.restitution=Math.max(l.restitution,c.restitution),e.slop=Math.max(l.slop,c.slop),a.length=0,t.collided){for(var u=0;u<s.length;u++){var d=s[u],h=i.id(d),f=o[h];f?a.push(f):a.push(o[h]=i.create(d))}e.separation=t.depth,r.setActive(e,!0,n)}else!0===e.isActive&&r.setActive(e,!1,n)},r.setActive=function(e,t,n){t?(e.isActive=!0,e.timeUpdated=n):(e.isActive=!1,e.activeContacts.length=0)},r.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}},function(e,t,n){var r={};e.exports=r;var i=n(2),o=n(0);r.fromVertices=function(e){for(var t={},n=0;n<e.length;n++){var r=(n+1)%e.length,s=i.normalise({x:e[r].y-e[n].y,y:e[n].x-e[r].x}),a=0===s.y?1/0:s.x/s.y;t[a=a.toFixed(3).toString()]=s}return o.values(t)},r.rotate=function(e,t){if(0!==t)for(var n=Math.cos(t),r=Math.sin(t),i=0;i<e.length;i++){var o,s=e[i];o=s.x*n-s.y*r,s.y=s.x*r+s.y*n,s.x=o}}},function(e,t,n){var r={};e.exports=r;var i=n(3),o=n(0),s=n(6),a=n(1),l=n(2);r.rectangle=function(e,t,n,r,a){a=a||{};var l={label:"Rectangle Body",position:{x:e,y:t},vertices:i.fromPath("L 0 0 L "+n+" 0 L "+n+" "+r+" L 0 "+r)};if(a.chamfer){var c=a.chamfer;l.vertices=i.chamfer(l.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete a.chamfer}return s.create(o.extend({},l,a))},r.trapezoid=function(e,t,n,r,a,l){l=l||{};var c,u=n*(a*=.5),d=u+(1-2*a)*n,h=d+u;c=a<.5?"L 0 0 L "+u+" "+-r+" L "+d+" "+-r+" L "+h+" 0":"L 0 0 L "+d+" "+-r+" L "+h+" 0";var f={label:"Trapezoid Body",position:{x:e,y:t},vertices:i.fromPath(c)};if(l.chamfer){var p=l.chamfer;f.vertices=i.chamfer(f.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete l.chamfer}return s.create(o.extend({},f,l))},r.circle=function(e,t,n,i,s){i=i||{};var a={label:"Circle Body",circleRadius:n};s=s||25;var l=Math.ceil(Math.max(10,Math.min(s,n)));return l%2==1&&(l+=1),r.polygon(e,t,l,n,o.extend({},a,i))},r.polygon=function(e,t,n,a,l){if(l=l||{},n<3)return r.circle(e,t,a,l);for(var c=2*Math.PI/n,u="",d=.5*c,h=0;h<n;h+=1){var f=d+h*c,p=Math.cos(f)*a,m=Math.sin(f)*a;u+="L "+p.toFixed(3)+" "+m.toFixed(3)+" "}var g={label:"Polygon Body",position:{x:e,y:t},vertices:i.fromPath(u)};if(l.chamfer){var v=l.chamfer;g.vertices=i.chamfer(g.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete l.chamfer}return s.create(o.extend({},g,l))},r.fromVertices=function(e,t,n,r,c,u,d,h){var f,p,m,g,v,y,b,w,x,_,S=o.getDecomp();for(f=Boolean(S&&S.quickDecomp),r=r||{},m=[],c=void 0!==c&&c,u=void 0!==u?u:.01,d=void 0!==d?d:10,h=void 0!==h?h:.01,o.isArray(n[0])||(n=[n]),x=0;x<n.length;x+=1)if(v=n[x],!(g=i.isConvex(v))&&!f&&o.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),g||!f)v=g?i.clockwiseSort(v):i.hull(v),m.push({position:{x:e,y:t},vertices:v});else{var E=v.map((function(e){return[e.x,e.y]}));S.makeCCW(E),!1!==u&&S.removeCollinearPoints(E,u),!1!==h&&S.removeDuplicatePoints&&S.removeDuplicatePoints(E,h);var T=S.quickDecomp(E);for(y=0;y<T.length;y++){var C=T[y].map((function(e){return{x:e[0],y:e[1]}}));d>0&&i.area(C)<d||m.push({position:i.centre(C),vertices:C})}}for(y=0;y<m.length;y++)m[y]=s.create(o.extend(m[y],r));if(c)for(y=0;y<m.length;y++){var M=m[y];for(b=y+1;b<m.length;b++){var k=m[b];if(a.overlaps(M.bounds,k.bounds)){var P=M.vertices,A=k.vertices;for(w=0;w<M.vertices.length;w++)for(_=0;_<k.vertices.length;_++){var I=l.magnitudeSquared(l.sub(P[(w+1)%P.length],A[_])),R=l.magnitudeSquared(l.sub(P[w],A[(_+1)%A.length]));I<5&&R<5&&(P[w].isInternal=!0,A[_].isInternal=!0)}}}}return m.length>1?(p=s.create(o.extend({parts:m.slice(0)},r)),s.setPosition(p,{x:e,y:t}),p):m[0]}},function(e,t,n){var r={};e.exports=r;var i=n(0);r.create=function(e){var t={};return e||i.log("Mouse.create: element was undefined, defaulting to document.body","warn"),t.element=e||document.body,t.absolute={x:0,y:0},t.position={x:0,y:0},t.mousedownPosition={x:0,y:0},t.mouseupPosition={x:0,y:0},t.offset={x:0,y:0},t.scale={x:1,y:1},t.wheelDelta=0,t.button=-1,t.pixelRatio=parseInt(t.element.getAttribute("data-pixel-ratio"),10)||1,t.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},t.mousemove=function(e){var n=r._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&(t.button=0,e.preventDefault()),t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.sourceEvents.mousemove=e},t.mousedown=function(e){var n=r._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches?(t.button=0,e.preventDefault()):t.button=e.button,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mousedownPosition.x=t.position.x,t.mousedownPosition.y=t.position.y,t.sourceEvents.mousedown=e},t.mouseup=function(e){var n=r._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&e.preventDefault(),t.button=-1,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mouseupPosition.x=t.position.x,t.mouseupPosition.y=t.position.y,t.sourceEvents.mouseup=e},t.mousewheel=function(e){t.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault()},r.setElement(t,t.element),t},r.setElement=function(e,t){e.element=t,t.addEventListener("mousemove",e.mousemove),t.addEventListener("mousedown",e.mousedown),t.addEventListener("mouseup",e.mouseup),t.addEventListener("mousewheel",e.mousewheel),t.addEventListener("DOMMouseScroll",e.mousewheel),t.addEventListener("touchmove",e.mousemove),t.addEventListener("touchstart",e.mousedown),t.addEventListener("touchend",e.mouseup)},r.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},r.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},r.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},r._getRelativeMousePosition=function(e,t,n){var r,i,o=t.getBoundingClientRect(),s=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:s.scrollLeft,l=void 0!==window.pageYOffset?window.pageYOffset:s.scrollTop,c=e.changedTouches;return c?(r=c[0].pageX-o.left-a,i=c[0].pageY-o.top-l):(r=e.pageX-o.left-a,i=e.pageY-o.top-l),{x:r/(t.clientWidth/(t.width||t.clientWidth)*n),y:i/(t.clientHeight/(t.height||t.clientHeight)*n)}}},function(e,t,n){var r={};e.exports=r;var i=n(14),o=n(9),s=n(1);r.collisions=function(e,t){for(var n=[],a=t.pairs.table,l=0;l<e.length;l++){var c=e[l][0],u=e[l][1];if((!c.isStatic&&!c.isSleeping||!u.isStatic&&!u.isSleeping)&&r.canCollide(c.collisionFilter,u.collisionFilter)&&s.overlaps(c.bounds,u.bounds))for(var d=c.parts.length>1?1:0;d<c.parts.length;d++)for(var h=c.parts[d],f=u.parts.length>1?1:0;f<u.parts.length;f++){var p=u.parts[f];if(h===c&&p===u||s.overlaps(h.bounds,p.bounds)){var m,g=a[o.id(h,p)];m=g&&g.isActive?g.collision:null;var v=i.collides(h,p,m);v.collided&&n.push(v)}}}return n},r.canCollide=function(e,t){return e.group===t.group&&0!==e.group?e.group>0:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}},function(e,t,n){var r={};e.exports=r;var i=n(3),o=n(2);r.collides=function(e,t,n){var s,a,l,c,u=!1;if(n){var d=e.parent,h=t.parent,f=d.speed*d.speed+d.angularSpeed*d.angularSpeed+h.speed*h.speed+h.angularSpeed*h.angularSpeed;u=n&&n.collided&&f<.2,c=n}else c={collided:!1,bodyA:e,bodyB:t};if(n&&u){var p=c.axisBody,m=p===e?t:e,g=[p.axes[n.axisNumber]];if(l=r._overlapAxes(p.vertices,m.vertices,g),c.reused=!0,l.overlap<=0)return c.collided=!1,c}else{if((s=r._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return c.collided=!1,c;if((a=r._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return c.collided=!1,c;s.overlap<a.overlap?(l=s,c.axisBody=e):(l=a,c.axisBody=t),c.axisNumber=l.axisNumber}c.bodyA=e.id<t.id?e:t,c.bodyB=e.id<t.id?t:e,c.collided=!0,c.depth=l.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,e=c.bodyA,t=c.bodyB,o.dot(l.axis,o.sub(t.position,e.position))<0?c.normal={x:l.axis.x,y:l.axis.y}:c.normal={x:-l.axis.x,y:-l.axis.y},c.tangent=o.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var v=r._findSupports(e,t,c.normal),y=[];if(i.contains(e.vertices,v[0])&&y.push(v[0]),i.contains(e.vertices,v[1])&&y.push(v[1]),y.length<2){var b=r._findSupports(t,e,o.neg(c.normal));i.contains(t.vertices,b[0])&&y.push(b[0]),y.length<2&&i.contains(t.vertices,b[1])&&y.push(b[1])}return y.length<1&&(y=[v[0]]),c.supports=y,c},r._overlapAxes=function(e,t,n){for(var i,s,a=o._temp[0],l=o._temp[1],c={overlap:Number.MAX_VALUE},u=0;u<n.length;u++){if(s=n[u],r._projectToAxis(a,e,s),r._projectToAxis(l,t,s),(i=Math.min(a.max-l.min,l.max-a.min))<=0)return c.overlap=i,c;i<c.overlap&&(c.overlap=i,c.axis=s,c.axisNumber=u)}return c},r._projectToAxis=function(e,t,n){for(var r=o.dot(t[0],n),i=r,s=1;s<t.length;s+=1){var a=o.dot(t[s],n);a>i?i=a:a<r&&(r=a)}e.min=r,e.max=i},r._findSupports=function(e,t,n){for(var r,i,s,a,l=Number.MAX_VALUE,c=o._temp[0],u=t.vertices,d=e.position,h=0;h<u.length;h++)i=u[h],c.x=i.x-d.x,c.y=i.y-d.y,(r=-o.dot(n,c))<l&&(l=r,s=i);return i=u[s.index-1>=0?s.index-1:u.length-1],c.x=i.x-d.x,c.y=i.y-d.y,l=-o.dot(n,c),a=i,i=u[(s.index+1)%u.length],c.x=i.x-d.x,c.y=i.y-d.y,(r=-o.dot(n,c))<l&&(a=i),[s,a]}},function(e,t,n){var r={};e.exports=r;var i=n(0);r._registry={},r.register=function(e){if(r.isPlugin(e)||i.warn("Plugin.register:",r.toString(e),"does not implement all required fields."),e.name in r._registry){var t=r._registry[e.name],n=r.versionParse(e.version).number,o=r.versionParse(t.version).number;n>o?(i.warn("Plugin.register:",r.toString(t),"was upgraded to",r.toString(e)),r._registry[e.name]=e):n<o?i.warn("Plugin.register:",r.toString(t),"can not be downgraded to",r.toString(e)):e!==t&&i.warn("Plugin.register:",r.toString(e),"is already registered to different plugin object")}else r._registry[e.name]=e;return e},r.resolve=function(e){return r._registry[r.dependencyParse(e).name]},r.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},r.isPlugin=function(e){return e&&e.name&&e.version&&e.install},r.isUsed=function(e,t){return e.used.indexOf(t)>-1},r.isFor=function(e,t){var n=e.for&&r.dependencyParse(e.for);return!e.for||t.name===n.name&&r.versionSatisfies(t.version,n.range)},r.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0!==e.uses.length){for(var n=r.dependencies(e),o=i.topologicalSort(n),s=[],a=0;a<o.length;a+=1)if(o[a]!==e.name){var l=r.resolve(o[a]);l?r.isUsed(e,l.name)||(r.isFor(l,e)||(i.warn("Plugin.use:",r.toString(l),"is for",l.for,"but installed on",r.toString(e)+"."),l._warned=!0),l.install?l.install(e):(i.warn("Plugin.use:",r.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(s.push(" "+r.toString(l)),delete l._warned):s.push(" "+r.toString(l)),e.used.push(l.name)):s.push(" "+o[a])}s.length>0&&i.info(s.join("  "))}else i.warn("Plugin.use:",r.toString(e),"does not specify any dependencies to install.")},r.dependencies=function(e,t){var n=r.dependencyParse(e),o=n.name;if(!(o in(t=t||{}))){e=r.resolve(e)||e,t[o]=i.map(e.uses||[],(function(t){r.isPlugin(t)&&r.register(t);var o=r.dependencyParse(t),s=r.resolve(t);return s&&!r.versionSatisfies(s.version,o.range)?(i.warn("Plugin.dependencies:",r.toString(s),"does not satisfy",r.toString(o),"used by",r.toString(n)+"."),s._warned=!0,e._warned=!0):s||(i.warn("Plugin.dependencies:",r.toString(t),"used by",r.toString(n),"could not be resolved."),e._warned=!0),o.name}));for(var s=0;s<t[o].length;s+=1)r.dependencies(t[o][s],t);return t}},r.dependencyParse=function(e){return i.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||i.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},r.versionParse=function(e){var t=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-]+)?$/;t.test(e)||i.warn("Plugin.versionParse:",e,"is not a valid version or range.");var n=t.exec(e),r=Number(n[4]),o=Number(n[5]),s=Number(n[6]);return{isRange:Boolean(n[1]||n[2]),version:n[3],range:e,operator:n[1]||n[2]||"",major:r,minor:o,patch:s,parts:[r,o,s],prerelease:n[7],number:1e8*r+1e4*o+s}},r.versionSatisfies=function(e,t){t=t||"*";var n=r.versionParse(t),i=r.versionParse(e);if(n.isRange){if("*"===n.operator||"*"===e)return!0;if(">"===n.operator)return i.number>n.number;if(">="===n.operator)return i.number>=n.number;if("~"===n.operator)return i.major===n.major&&i.minor===n.minor&&i.patch>=n.patch;if("^"===n.operator)return n.major>0?i.major===n.major&&i.number>=n.number:n.minor>0?i.minor===n.minor&&i.patch>=n.patch:i.patch===n.patch}return e===t||"*"===e}},function(e,t,n){var r={};e.exports=r;var i=n(0),o=n(5),s=n(1),a=n(4),l=n(2),c=n(12);!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout((function(){e(i.now())}),1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r._goodFps=30,r._goodDelta=1e3/60,r.create=function(e){var t={controller:r,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},n=i.extend(t,e);return n.canvas&&(n.canvas.width=n.options.width||n.canvas.width,n.canvas.height=n.options.height||n.canvas.height),n.mouse=e.mouse,n.engine=e.engine,n.canvas=n.canvas||d(n.options.width,n.options.height),n.context=n.canvas.getContext("2d"),n.textures={},n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.canvas.width,y:n.canvas.height}},1!==n.options.pixelRatio&&r.setPixelRatio(n,n.options.pixelRatio),i.isElement(n.element)?n.element.appendChild(n.canvas):n.canvas.parentNode||i.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),n},r.run=function(t){!function i(o){t.frameRequestId=e(i),n(t,o),r.world(t,o),(t.options.showStats||t.options.showDebug)&&r.stats(t,t.context,o),(t.options.showPerformance||t.options.showDebug)&&r.performance(t,t.context,o)}()},r.stop=function(e){t(e.frameRequestId)},r.setPixelRatio=function(e,t){var n=e.options,r=e.canvas;"auto"===t&&(t=h(r)),n.pixelRatio=t,r.setAttribute("data-pixel-ratio",t),r.width=n.width*t,r.height=n.height*t,r.style.width=n.width+"px",r.style.height=n.height+"px"},r.lookAt=function(e,t,n,r){r=void 0===r||r,t=i.isArray(t)?t:[t],n=n||{x:0,y:0};for(var o={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},s=0;s<t.length;s+=1){var a=t[s],l=a.bounds?a.bounds.min:a.min||a.position||a,u=a.bounds?a.bounds.max:a.max||a.position||a;l&&u&&(l.x<o.min.x&&(o.min.x=l.x),u.x>o.max.x&&(o.max.x=u.x),l.y<o.min.y&&(o.min.y=l.y),u.y>o.max.y&&(o.max.y=u.y))}var d=o.max.x-o.min.x+2*n.x,h=o.max.y-o.min.y+2*n.y,f=e.canvas.height,p=e.canvas.width/f,m=d/h,g=1,v=1;m>p?v=m/p:g=p/m,e.options.hasBounds=!0,e.bounds.min.x=o.min.x,e.bounds.max.x=o.min.x+d*g,e.bounds.min.y=o.min.y,e.bounds.max.y=o.min.y+h*v,r&&(e.bounds.min.x+=.5*d-d*g*.5,e.bounds.max.x+=.5*d-d*g*.5,e.bounds.min.y+=.5*h-h*v*.5,e.bounds.max.y+=.5*h-h*v*.5),e.bounds.min.x-=n.x,e.bounds.max.x-=n.x,e.bounds.min.y-=n.y,e.bounds.max.y-=n.y,e.mouse&&(c.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),c.setOffset(e.mouse,e.bounds.min))},r.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,r=t/e.options.width,i=n/e.options.height;e.context.setTransform(e.options.pixelRatio/r,0,0,e.options.pixelRatio/i,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},r.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},r.world=function(e,t){var n,u=i.now(),d=e.engine,h=d.world,f=e.canvas,m=e.context,g=e.options,v=e.timing,y=o.allBodies(h),b=o.allConstraints(h),w=g.wireframes?g.wireframeBackground:g.background,x=[],_=[],S={timestamp:d.timing.timestamp};if(a.trigger(e,"beforeRender",S),e.currentBackground!==w&&p(e,w),m.globalCompositeOperation="source-in",m.fillStyle="transparent",m.fillRect(0,0,f.width,f.height),m.globalCompositeOperation="source-over",g.hasBounds){for(n=0;n<y.length;n++){var E=y[n];s.overlaps(E.bounds,e.bounds)&&x.push(E)}for(n=0;n<b.length;n++){var T=b[n],C=T.bodyA,M=T.bodyB,k=T.pointA,P=T.pointB;C&&(k=l.add(C.position,T.pointA)),M&&(P=l.add(M.position,T.pointB)),k&&P&&(s.contains(e.bounds,k)||s.contains(e.bounds,P))&&_.push(T)}r.startViewTransform(e),e.mouse&&(c.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.options.width,y:(e.bounds.max.y-e.bounds.min.y)/e.options.height}),c.setOffset(e.mouse,e.bounds.min))}else _=b,x=y,1!==e.options.pixelRatio&&e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0);!g.wireframes||d.enableSleeping&&g.showSleeping?r.bodies(e,x,m):(g.showConvexHulls&&r.bodyConvexHulls(e,x,m),r.bodyWireframes(e,x,m)),g.showBounds&&r.bodyBounds(e,x,m),(g.showAxes||g.showAngleIndicator)&&r.bodyAxes(e,x,m),g.showPositions&&r.bodyPositions(e,x,m),g.showVelocity&&r.bodyVelocity(e,x,m),g.showIds&&r.bodyIds(e,x,m),g.showSeparations&&r.separations(e,d.pairs.list,m),g.showCollisions&&r.collisions(e,d.pairs.list,m),g.showVertexNumbers&&r.vertexNumbers(e,x,m),g.showMousePosition&&r.mousePosition(e,e.mouse,m),r.constraints(_,m),g.showBroadphase&&r.grid(e,d.grid,m),g.hasBounds&&r.endViewTransform(e),a.trigger(e,"afterRender",S),v.lastElapsed=i.now()-u},r.stats=function(e,t,n){for(var r=e.engine,i=r.world,s=o.allBodies(i),a=0,l=0,c=0;c<s.length;c+=1)a+=s[c].parts.length;var u={Part:a,Body:s.length,Cons:o.allConstraints(i).length,Comp:o.allComposites(i).length,Pair:r.pairs.list.length};for(var d in t.fillStyle="#0e0f19",t.fillRect(l,0,302.5,44),t.font="12px Arial",t.textBaseline="top",t.textAlign="right",u){var h=u[d];t.fillStyle="#aaa",t.fillText(d,l+55,8),t.fillStyle="#eee",t.fillText(h,l+55,26),l+=55}},r.performance=function(e,t){var n=e.engine,i=e.timing,o=i.deltaHistory,s=i.elapsedHistory,a=i.timestampElapsedHistory,l=i.engineDeltaHistory,c=i.engineElapsedHistory,d=n.timing.lastDelta,h=u(o),f=u(s),p=u(l),m=u(c),g=u(a)/h||0,v=1e3/h||0,y=60;t.fillStyle="#0e0f19",t.fillRect(0,50,370,34),r.status(t,10,69,y,4,o.length,Math.round(v)+" fps",v/r._goodFps,(function(e){return o[e]/h-1})),r.status(t,82,69,y,4,l.length,d.toFixed(2)+" dt",r._goodDelta/d,(function(e){return l[e]/p-1})),r.status(t,154,69,y,4,c.length,m.toFixed(2)+" ut",1-m/r._goodFps,(function(e){return c[e]/m-1})),r.status(t,226,69,y,4,s.length,f.toFixed(2)+" rt",1-f/r._goodFps,(function(e){return s[e]/f-1})),r.status(t,298,69,y,4,a.length,g.toFixed(2)+" x",g*g*g,(function(e){return(a[e]/o[e]/g||0)-1}))},r.status=function(e,t,n,r,o,s,a,l,c){e.strokeStyle="#888",e.fillStyle="#444",e.lineWidth=1,e.fillRect(t,n+7,r,1),e.beginPath(),e.moveTo(t,n+7-o*i.clamp(.4*c(0),-2,2));for(var u=0;u<r;u+=1)e.lineTo(t+u,n+7-(u<s?o*i.clamp(.4*c(u),-2,2):0));e.stroke(),e.fillStyle="hsl("+i.clamp(25+95*l,0,120)+",100%,60%)",e.fillRect(t,n-7,4,4),e.font="12px Arial",e.textBaseline="middle",e.textAlign="right",e.fillStyle="#eee",e.fillText(a,t+r,n-5)},r.constraints=function(e,t){for(var n=t,r=0;r<e.length;r++){var o=e[r];if(o.render.visible&&o.pointA&&o.pointB){var s,a,c=o.bodyA,u=o.bodyB;if(s=c?l.add(c.position,o.pointA):o.pointA,"pin"===o.render.type)n.beginPath(),n.arc(s.x,s.y,3,0,2*Math.PI),n.closePath();else{if(a=u?l.add(u.position,o.pointB):o.pointB,n.beginPath(),n.moveTo(s.x,s.y),"spring"===o.render.type)for(var d,h=l.sub(a,s),f=l.perp(l.normalise(h)),p=Math.ceil(i.clamp(o.length/5,12,20)),m=1;m<p;m+=1)d=m%2==0?1:-1,n.lineTo(s.x+h.x*(m/p)+f.x*d*4,s.y+h.y*(m/p)+f.y*d*4);n.lineTo(a.x,a.y)}o.render.lineWidth&&(n.lineWidth=o.render.lineWidth,n.strokeStyle=o.render.strokeStyle,n.stroke()),o.render.anchors&&(n.fillStyle=o.render.strokeStyle,n.beginPath(),n.arc(s.x,s.y,3,0,2*Math.PI),n.arc(a.x,a.y,3,0,2*Math.PI),n.closePath(),n.fill())}}},r.bodies=function(e,t,n){var r,i,o,s,a=n,l=(e.engine,e.options),c=l.showInternalEdges||!l.wireframes;for(o=0;o<t.length;o++)if((r=t[o]).render.visible)for(s=r.parts.length>1?1:0;s<r.parts.length;s++)if((i=r.parts[s]).render.visible){if(l.showSleeping&&r.isSleeping?a.globalAlpha=.5*i.render.opacity:1!==i.render.opacity&&(a.globalAlpha=i.render.opacity),i.render.sprite&&i.render.sprite.texture&&!l.wireframes){var u=i.render.sprite,d=f(e,u.texture);a.translate(i.position.x,i.position.y),a.rotate(i.angle),a.drawImage(d,d.width*-u.xOffset*u.xScale,d.height*-u.yOffset*u.yScale,d.width*u.xScale,d.height*u.yScale),a.rotate(-i.angle),a.translate(-i.position.x,-i.position.y)}else{if(i.circleRadius)a.beginPath(),a.arc(i.position.x,i.position.y,i.circleRadius,0,2*Math.PI);else{a.beginPath(),a.moveTo(i.vertices[0].x,i.vertices[0].y);for(var h=1;h<i.vertices.length;h++)!i.vertices[h-1].isInternal||c?a.lineTo(i.vertices[h].x,i.vertices[h].y):a.moveTo(i.vertices[h].x,i.vertices[h].y),i.vertices[h].isInternal&&!c&&a.moveTo(i.vertices[(h+1)%i.vertices.length].x,i.vertices[(h+1)%i.vertices.length].y);a.lineTo(i.vertices[0].x,i.vertices[0].y),a.closePath()}l.wireframes?(a.lineWidth=1,a.strokeStyle="#bbb",a.stroke()):(a.fillStyle=i.render.fillStyle,i.render.lineWidth&&(a.lineWidth=i.render.lineWidth,a.strokeStyle=i.render.strokeStyle,a.stroke()),a.fill())}a.globalAlpha=1}},r.bodyWireframes=function(e,t,n){var r,i,o,s,a,l=n,c=e.options.showInternalEdges;for(l.beginPath(),o=0;o<t.length;o++)if((r=t[o]).render.visible)for(a=r.parts.length>1?1:0;a<r.parts.length;a++){for(i=r.parts[a],l.moveTo(i.vertices[0].x,i.vertices[0].y),s=1;s<i.vertices.length;s++)!i.vertices[s-1].isInternal||c?l.lineTo(i.vertices[s].x,i.vertices[s].y):l.moveTo(i.vertices[s].x,i.vertices[s].y),i.vertices[s].isInternal&&!c&&l.moveTo(i.vertices[(s+1)%i.vertices.length].x,i.vertices[(s+1)%i.vertices.length].y);l.lineTo(i.vertices[0].x,i.vertices[0].y)}l.lineWidth=1,l.strokeStyle="#bbb",l.stroke()},r.bodyConvexHulls=function(e,t,n){var r,i,o,s=n;for(s.beginPath(),i=0;i<t.length;i++)if((r=t[i]).render.visible&&1!==r.parts.length){for(s.moveTo(r.vertices[0].x,r.vertices[0].y),o=1;o<r.vertices.length;o++)s.lineTo(r.vertices[o].x,r.vertices[o].y);s.lineTo(r.vertices[0].x,r.vertices[0].y)}s.lineWidth=1,s.strokeStyle="rgba(255,255,255,0.2)",s.stroke()},r.vertexNumbers=function(e,t,n){var r,i,o,s=n;for(r=0;r<t.length;r++){var a=t[r].parts;for(o=a.length>1?1:0;o<a.length;o++){var l=a[o];for(i=0;i<l.vertices.length;i++)s.fillStyle="rgba(255,255,255,0.2)",s.fillText(r+"_"+i,l.position.x+.8*(l.vertices[i].x-l.position.x),l.position.y+.8*(l.vertices[i].y-l.position.y))}}},r.mousePosition=function(e,t,n){var r=n;r.fillStyle="rgba(255,255,255,0.8)",r.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},r.bodyBounds=function(e,t,n){var r=n,i=(e.engine,e.options);r.beginPath();for(var o=0;o<t.length;o++)if(t[o].render.visible)for(var s=t[o].parts,a=s.length>1?1:0;a<s.length;a++){var l=s[a];r.rect(l.bounds.min.x,l.bounds.min.y,l.bounds.max.x-l.bounds.min.x,l.bounds.max.y-l.bounds.min.y)}i.wireframes?r.strokeStyle="rgba(255,255,255,0.08)":r.strokeStyle="rgba(0,0,0,0.1)",r.lineWidth=1,r.stroke()},r.bodyAxes=function(e,t,n){var r,i,o,s,a=n,l=(e.engine,e.options);for(a.beginPath(),i=0;i<t.length;i++){var c=t[i],u=c.parts;if(c.render.visible)if(l.showAxes)for(o=u.length>1?1:0;o<u.length;o++)for(r=u[o],s=0;s<r.axes.length;s++){var d=r.axes[s];a.moveTo(r.position.x,r.position.y),a.lineTo(r.position.x+20*d.x,r.position.y+20*d.y)}else for(o=u.length>1?1:0;o<u.length;o++)for(r=u[o],s=0;s<r.axes.length;s++)a.moveTo(r.position.x,r.position.y),a.lineTo((r.vertices[0].x+r.vertices[r.vertices.length-1].x)/2,(r.vertices[0].y+r.vertices[r.vertices.length-1].y)/2)}l.wireframes?(a.strokeStyle="indianred",a.lineWidth=1):(a.strokeStyle="rgba(255, 255, 255, 0.4)",a.globalCompositeOperation="overlay",a.lineWidth=2),a.stroke(),a.globalCompositeOperation="source-over"},r.bodyPositions=function(e,t,n){var r,i,o,s,a=n,l=(e.engine,e.options);for(a.beginPath(),o=0;o<t.length;o++)if((r=t[o]).render.visible)for(s=0;s<r.parts.length;s++)i=r.parts[s],a.arc(i.position.x,i.position.y,3,0,2*Math.PI,!1),a.closePath();for(l.wireframes?a.fillStyle="indianred":a.fillStyle="rgba(0,0,0,0.5)",a.fill(),a.beginPath(),o=0;o<t.length;o++)(r=t[o]).render.visible&&(a.arc(r.positionPrev.x,r.positionPrev.y,2,0,2*Math.PI,!1),a.closePath());a.fillStyle="rgba(255,165,0,0.8)",a.fill()},r.bodyVelocity=function(e,t,n){var r=n;r.beginPath();for(var i=0;i<t.length;i++){var o=t[i];o.render.visible&&(r.moveTo(o.position.x,o.position.y),r.lineTo(o.position.x+2*(o.position.x-o.positionPrev.x),o.position.y+2*(o.position.y-o.positionPrev.y)))}r.lineWidth=3,r.strokeStyle="cornflowerblue",r.stroke()},r.bodyIds=function(e,t,n){var r,i,o=n;for(r=0;r<t.length;r++)if(t[r].render.visible){var s=t[r].parts;for(i=s.length>1?1:0;i<s.length;i++){var a=s[i];o.font="12px Arial",o.fillStyle="rgba(255,255,255,0.5)",o.fillText(a.id,a.position.x+10,a.position.y-10)}}},r.collisions=function(e,t,n){var r,i,o,s,a=n,l=e.options;for(a.beginPath(),o=0;o<t.length;o++)if((r=t[o]).isActive)for(i=r.collision,s=0;s<r.activeContacts.length;s++){var c=r.activeContacts[s].vertex;a.rect(c.x-1.5,c.y-1.5,3.5,3.5)}for(l.wireframes?a.fillStyle="rgba(255,255,255,0.7)":a.fillStyle="orange",a.fill(),a.beginPath(),o=0;o<t.length;o++)if((r=t[o]).isActive&&(i=r.collision,r.activeContacts.length>0)){var u=r.activeContacts[0].vertex.x,d=r.activeContacts[0].vertex.y;2===r.activeContacts.length&&(u=(r.activeContacts[0].vertex.x+r.activeContacts[1].vertex.x)/2,d=(r.activeContacts[0].vertex.y+r.activeContacts[1].vertex.y)/2),i.bodyB===i.supports[0].body||!0===i.bodyA.isStatic?a.moveTo(u-8*i.normal.x,d-8*i.normal.y):a.moveTo(u+8*i.normal.x,d+8*i.normal.y),a.lineTo(u,d)}l.wireframes?a.strokeStyle="rgba(255,165,0,0.7)":a.strokeStyle="orange",a.lineWidth=1,a.stroke()},r.separations=function(e,t,n){var r,i,o,s,a,l=n,c=e.options;for(l.beginPath(),a=0;a<t.length;a++)if((r=t[a]).isActive){o=(i=r.collision).bodyA;var u=1;(s=i.bodyB).isStatic||o.isStatic||(u=.5),s.isStatic&&(u=0),l.moveTo(s.position.x,s.position.y),l.lineTo(s.position.x-i.penetration.x*u,s.position.y-i.penetration.y*u),u=1,s.isStatic||o.isStatic||(u=.5),o.isStatic&&(u=0),l.moveTo(o.position.x,o.position.y),l.lineTo(o.position.x+i.penetration.x*u,o.position.y+i.penetration.y*u)}c.wireframes?l.strokeStyle="rgba(255,165,0,0.5)":l.strokeStyle="orange",l.stroke()},r.grid=function(e,t,n){var r=n;e.options.wireframes?r.strokeStyle="rgba(255,180,0,0.1)":r.strokeStyle="rgba(255,180,0,0.5)",r.beginPath();for(var o=i.keys(t.buckets),s=0;s<o.length;s++){var a=o[s];if(!(t.buckets[a].length<2)){var l=a.split(/C|R/);r.rect(.5+parseInt(l[1],10)*t.bucketWidth,.5+parseInt(l[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}r.lineWidth=1,r.stroke()},r.inspector=function(e,t){e.engine;var n,r=e.selected,i=e.render,o=i.options;if(o.hasBounds){var s=i.bounds.max.x-i.bounds.min.x,a=i.bounds.max.y-i.bounds.min.y,l=s/i.options.width,c=a/i.options.height;t.scale(1/l,1/c),t.translate(-i.bounds.min.x,-i.bounds.min.y)}for(var u=0;u<r.length;u++){var d=r[u].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),d.type){case"body":n=d.bounds,t.beginPath(),t.rect(Math.floor(n.min.x-3),Math.floor(n.min.y-3),Math.floor(n.max.x-n.min.x+6),Math.floor(n.max.y-n.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var h=d.pointA;d.bodyA&&(h=d.pointB),t.beginPath(),t.arc(h.x,h.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",n=e.selectBounds,t.beginPath(),t.rect(Math.floor(n.min.x),Math.floor(n.min.y),Math.floor(n.max.x-n.min.x),Math.floor(n.max.y-n.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),o.hasBounds&&t.setTransform(1,0,0,1,0,0)};var n=function(e,t){var n=e.engine,i=e.timing,o=i.historySize,s=n.timing.timestamp;i.delta=t-i.lastTime||r._goodDelta,i.lastTime=t,i.timestampElapsed=s-i.lastTimestamp||0,i.lastTimestamp=s,i.deltaHistory.unshift(i.delta),i.deltaHistory.length=Math.min(i.deltaHistory.length,o),i.engineDeltaHistory.unshift(n.timing.lastDelta),i.engineDeltaHistory.length=Math.min(i.engineDeltaHistory.length,o),i.timestampElapsedHistory.unshift(i.timestampElapsed),i.timestampElapsedHistory.length=Math.min(i.timestampElapsedHistory.length,o),i.engineElapsedHistory.unshift(n.timing.lastElapsed),i.engineElapsedHistory.length=Math.min(i.engineElapsedHistory.length,o),i.elapsedHistory.unshift(i.lastElapsed),i.elapsedHistory.length=Math.min(i.elapsedHistory.length,o)},u=function(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length||0},d=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.oncontextmenu=function(){return!1},n.onselectstart=function(){return!1},n},h=function(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},f=function(e,t){var n=e.textures[t];return n||((n=e.textures[t]=new Image).src=t,n)},p=function(e,t){var n=t;/(jpg|gif|png)$/.test(t)&&(n="url("+t+")"),e.canvas.style.background=n,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},function(e,t){var n={};e.exports=n,n.create=function(e){return{id:n.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},n.id=function(e){return e.body.id+"_"+e.index}},function(e,t,n){var r={};e.exports=r;var i=n(7),o=n(19),s=n(13),a=n(20),l=n(21),c=n(4),u=n(5),d=n(8),h=n(0),f=n(6);r.create=function(e){e=e||{};var t=h.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},grid:null,gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},e);return t.world=e.world||u.create({label:"World"}),t.grid=l.create(e.grid||e.broadphase),t.pairs=a.create(),t.world.gravity=t.gravity,t.broadphase=t.grid,t.metrics={},t},r.update=function(e,t,n){var f=h.now();t=t||1e3/60,n=n||1;var p,m,g=e.world,v=e.timing,y=e.grid;v.timestamp+=t*v.timeScale,v.lastDelta=t*v.timeScale;var b={timestamp:v.timestamp};c.trigger(e,"beforeUpdate",b);var w=u.allBodies(g),x=u.allConstraints(g);for(e.enableSleeping&&i.update(w,v.timeScale),r._bodiesApplyGravity(w,e.gravity),r._bodiesUpdate(w,t,v.timeScale,n,g.bounds),d.preSolveAll(w),m=0;m<e.constraintIterations;m++)d.solveAll(x,v.timeScale);d.postSolveAll(w),g.isModified&&l.clear(y),l.update(y,w,e,g.isModified),p=y.pairsList,g.isModified&&u.setModified(g,!1,!1,!0);var _=s.collisions(p,e),S=e.pairs,E=v.timestamp;for(a.update(S,_,E),a.removeOld(S,E),e.enableSleeping&&i.afterCollisions(S.list,v.timeScale),S.collisionStart.length>0&&c.trigger(e,"collisionStart",{pairs:S.collisionStart}),o.preSolvePosition(S.list),m=0;m<e.positionIterations;m++)o.solvePosition(S.list,v.timeScale);for(o.postSolvePosition(w),d.preSolveAll(w),m=0;m<e.constraintIterations;m++)d.solveAll(x,v.timeScale);for(d.postSolveAll(w),o.preSolveVelocity(S.list),m=0;m<e.velocityIterations;m++)o.solveVelocity(S.list,v.timeScale);return S.collisionActive.length>0&&c.trigger(e,"collisionActive",{pairs:S.collisionActive}),S.collisionEnd.length>0&&c.trigger(e,"collisionEnd",{pairs:S.collisionEnd}),r._bodiesClearForces(w),c.trigger(e,"afterUpdate",b),e.timing.lastElapsed=h.now()-f,e},r.merge=function(e,t){if(h.extend(e,t),t.world){e.world=t.world,r.clear(e);for(var n=u.allBodies(e.world),o=0;o<n.length;o++){var s=n[o];i.set(s,!1),s.id=h.nextId()}}},r.clear=function(e){var t=e.world,n=u.allBodies(t);a.clear(e.pairs),l.clear(e.grid),l.update(e.grid,n,e,!0)},r._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.force.x=0,n.force.y=0,n.torque=0}},r._bodiesApplyGravity=function(e,t){var n=void 0!==t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==n)for(var r=0;r<e.length;r++){var i=e[r];i.isStatic||i.isSleeping||(i.force.y+=i.mass*t.y*n,i.force.x+=i.mass*t.x*n)}},r._bodiesUpdate=function(e,t,n,r,i){for(var o=0;o<e.length;o++){var s=e[o];s.isStatic||s.isSleeping||f.update(s,t,n,r)}}},function(e,t,n){var r={};e.exports=r;var i=n(3),o=n(2),s=n(0),a=n(1);r._restingThresh=4,r._restingThreshTangent=6,r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r.preSolvePosition=function(e){var t,n,r;for(t=0;t<e.length;t++)(n=e[t]).isActive&&(r=n.activeContacts.length,n.collision.parentA.totalContacts+=r,n.collision.parentB.totalContacts+=r)},r.solvePosition=function(e,t){var n,i,s,a,l,c,u,d,h,f=o._temp[0],p=o._temp[1],m=o._temp[2],g=o._temp[3];for(n=0;n<e.length;n++)(i=e[n]).isActive&&!i.isSensor&&(a=(s=i.collision).parentA,l=s.parentB,c=s.normal,u=o.sub(o.add(l.positionImpulse,l.position,f),o.add(a.positionImpulse,o.sub(l.position,s.penetration,p),m),g),i.separation=o.dot(c,u));for(n=0;n<e.length;n++)(i=e[n]).isActive&&!i.isSensor&&(a=(s=i.collision).parentA,l=s.parentB,c=s.normal,h=(i.separation-i.slop)*t,(a.isStatic||l.isStatic)&&(h*=2),a.isStatic||a.isSleeping||(d=r._positionDampen/a.totalContacts,a.positionImpulse.x+=c.x*h*d,a.positionImpulse.y+=c.y*h*d),l.isStatic||l.isSleeping||(d=r._positionDampen/l.totalContacts,l.positionImpulse.x-=c.x*h*d,l.positionImpulse.y-=c.y*h*d))},r.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.totalContacts=0,0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var s=0;s<n.parts.length;s++){var l=n.parts[s];i.translate(l.vertices,n.positionImpulse),a.update(l.bounds,l.vertices,n.velocity),l.position.x+=n.positionImpulse.x,l.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,o.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=r._positionWarming,n.positionImpulse.y*=r._positionWarming)}}},r.preSolveVelocity=function(e){var t,n,r,i,s,a,l,c,u,d,h,f,p,m,g=o._temp[0],v=o._temp[1];for(t=0;t<e.length;t++)if((r=e[t]).isActive&&!r.isSensor)for(i=r.activeContacts,a=(s=r.collision).parentA,l=s.parentB,c=s.normal,u=s.tangent,n=0;n<i.length;n++)h=(d=i[n]).vertex,f=d.normalImpulse,p=d.tangentImpulse,0===f&&0===p||(g.x=c.x*f+u.x*p,g.y=c.y*f+u.y*p,a.isStatic||a.isSleeping||(m=o.sub(h,a.position,v),a.positionPrev.x+=g.x*a.inverseMass,a.positionPrev.y+=g.y*a.inverseMass,a.anglePrev+=o.cross(m,g)*a.inverseInertia),l.isStatic||l.isSleeping||(m=o.sub(h,l.position,v),l.positionPrev.x-=g.x*l.inverseMass,l.positionPrev.y-=g.y*l.inverseMass,l.anglePrev-=o.cross(m,g)*l.inverseInertia))},r.solveVelocity=function(e,t){for(var n=t*t,i=o._temp[0],a=o._temp[1],l=o._temp[2],c=o._temp[3],u=o._temp[4],d=o._temp[5],h=0;h<e.length;h++){var f=e[h];if(f.isActive&&!f.isSensor){var p=f.collision,m=p.parentA,g=p.parentB,v=p.normal,y=p.tangent,b=f.activeContacts,w=1/b.length;m.velocity.x=m.position.x-m.positionPrev.x,m.velocity.y=m.position.y-m.positionPrev.y,g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,g.angularVelocity=g.angle-g.anglePrev;for(var x=0;x<b.length;x++){var _=b[x],S=_.vertex,E=o.sub(S,m.position,a),T=o.sub(S,g.position,l),C=o.add(m.velocity,o.mult(o.perp(E),m.angularVelocity),c),M=o.add(g.velocity,o.mult(o.perp(T),g.angularVelocity),u),k=o.sub(C,M,d),P=o.dot(v,k),A=o.dot(y,k),I=Math.abs(A),R=s.sign(A),L=(1+f.restitution)*P,O=s.clamp(f.separation+P,0,1)*r._frictionNormalMultiplier,N=A,D=1/0;I>f.friction*f.frictionStatic*O*n&&(D=I,N=s.clamp(f.friction*R*n,-D,D));var F=o.cross(E,v),B=o.cross(T,v),Z=w/(m.inverseMass+g.inverseMass+m.inverseInertia*F*F+g.inverseInertia*B*B);if(L*=Z,N*=Z,P<0&&P*P>r._restingThresh*n)_.normalImpulse=0;else{var V=_.normalImpulse;_.normalImpulse=Math.min(_.normalImpulse+L,0),L=_.normalImpulse-V}if(A*A>r._restingThreshTangent*n)_.tangentImpulse=0;else{var z=_.tangentImpulse;_.tangentImpulse=s.clamp(_.tangentImpulse+N,-D,D),N=_.tangentImpulse-z}i.x=v.x*L+y.x*N,i.y=v.y*L+y.y*N,m.isStatic||m.isSleeping||(m.positionPrev.x+=i.x*m.inverseMass,m.positionPrev.y+=i.y*m.inverseMass,m.anglePrev+=o.cross(E,i)*m.inverseInertia),g.isStatic||g.isSleeping||(g.positionPrev.x-=i.x*g.inverseMass,g.positionPrev.y-=i.y*g.inverseMass,g.anglePrev-=o.cross(T,i)*g.inverseInertia)}}}}},function(e,t,n){var r={};e.exports=r;var i=n(9),o=n(0);r._pairMaxIdleLife=1e3,r.create=function(e){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},r.update=function(e,t,n){var r,o,s,a,l=e.list,c=e.table,u=e.collisionStart,d=e.collisionEnd,h=e.collisionActive;for(u.length=0,d.length=0,h.length=0,a=0;a<l.length;a++)l[a].confirmedActive=!1;for(a=0;a<t.length;a++)(r=t[a]).collided&&((s=c[o=i.id(r.bodyA,r.bodyB)])?(s.isActive?h.push(s):u.push(s),i.update(s,r,n),s.confirmedActive=!0):(s=i.create(r,n),c[o]=s,u.push(s),l.push(s)));for(a=0;a<l.length;a++)(s=l[a]).isActive&&!s.confirmedActive&&(i.setActive(s,!1,n),d.push(s))},r.removeOld=function(e,t){var n,i,o,s,a=e.list,l=e.table,c=[];for(s=0;s<a.length;s++)(i=(n=a[s]).collision).bodyA.isSleeping||i.bodyB.isSleeping?n.timeUpdated=t:t-n.timeUpdated>r._pairMaxIdleLife&&c.push(s);for(s=0;s<c.length;s++)delete l[(n=a[o=c[s]-s]).id],a.splice(o,1)},r.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},function(e,t,n){var r={};e.exports=r;var i=n(9),o=n(0);r.create=function(e){return o.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},e)},r.update=function(e,t,n,i){var o,s,a,l,c,u=n.world,d=e.buckets,h=!1;for(o=0;o<t.length;o++){var f=t[o];if((!f.isSleeping||i)&&(!u.bounds||!(f.bounds.max.x<u.bounds.min.x||f.bounds.min.x>u.bounds.max.x||f.bounds.max.y<u.bounds.min.y||f.bounds.min.y>u.bounds.max.y))){var p=r._getRegion(e,f);if(!f.region||p.id!==f.region.id||i){f.region&&!i||(f.region=p);var m=r._regionUnion(p,f.region);for(s=m.startCol;s<=m.endCol;s++)for(a=m.startRow;a<=m.endRow;a++){l=d[c=r._getBucketId(s,a)];var g=s>=p.startCol&&s<=p.endCol&&a>=p.startRow&&a<=p.endRow,v=s>=f.region.startCol&&s<=f.region.endCol&&a>=f.region.startRow&&a<=f.region.endRow;!g&&v&&v&&l&&r._bucketRemoveBody(e,l,f),(f.region===p||g&&!v||i)&&(l||(l=r._createBucket(d,c)),r._bucketAddBody(e,l,f))}f.region=p,h=!0}}}h&&(e.pairsList=r._createActivePairsList(e))},r.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},r._regionUnion=function(e,t){var n=Math.min(e.startCol,t.startCol),i=Math.max(e.endCol,t.endCol),o=Math.min(e.startRow,t.startRow),s=Math.max(e.endRow,t.endRow);return r._createRegion(n,i,o,s)},r._getRegion=function(e,t){var n=t.bounds,i=Math.floor(n.min.x/e.bucketWidth),o=Math.floor(n.max.x/e.bucketWidth),s=Math.floor(n.min.y/e.bucketHeight),a=Math.floor(n.max.y/e.bucketHeight);return r._createRegion(i,o,s,a)},r._createRegion=function(e,t,n,r){return{id:e+","+t+","+n+","+r,startCol:e,endCol:t,startRow:n,endRow:r}},r._getBucketId=function(e,t){return"C"+e+"R"+t},r._createBucket=function(e,t){return e[t]=[]},r._bucketAddBody=function(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];if(!(n.id===o.id||n.isStatic&&o.isStatic)){var s=i.id(n,o),a=e.pairs[s];a?a[2]+=1:e.pairs[s]=[n,o,1]}}t.push(n)},r._bucketRemoveBody=function(e,t,n){t.splice(o.indexOf(t,n),1);for(var r=0;r<t.length;r++){var s=t[r],a=i.id(n,s),l=e.pairs[a];l&&(l[2]-=1)}},r._createActivePairsList=function(e){var t,n,r=[];t=o.keys(e.pairs);for(var i=0;i<t.length;i++)(n=e.pairs[t[i]])[2]>0?r.push(n):delete e.pairs[t[i]];return r}},function(e,t,n){var r=e.exports=n(23);r.Axes=n(10),r.Bodies=n(11),r.Body=n(6),r.Bounds=n(1),r.Common=n(0),r.Composite=n(5),r.Composites=n(24),r.Constraint=n(8),r.Contact=n(17),r.Detector=n(13),r.Engine=n(18),r.Events=n(4),r.Grid=n(21),r.Mouse=n(12),r.MouseConstraint=n(25),r.Pair=n(9),r.Pairs=n(20),r.Plugin=n(15),r.Query=n(26),r.Render=n(16),r.Resolver=n(19),r.Runner=n(27),r.SAT=n(14),r.Sleeping=n(7),r.Svg=n(28),r.Vector=n(2),r.Vertices=n(3),r.World=n(29),r.Engine.run=r.Runner.run,r.Common.deprecated(r.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")},function(e,t,n){var r={};e.exports=r;var i=n(15),o=n(0);r.name="matter-js",r.version="0.17.1",r.uses=[],r.used=[],r.use=function(){i.use(r,Array.prototype.slice.call(arguments))},r.before=function(e,t){return e=e.replace(/^Matter./,""),o.chainPathBefore(r,e,t)},r.after=function(e,t){return e=e.replace(/^Matter./,""),o.chainPathAfter(r,e,t)}},function(e,t,n){var r={};e.exports=r;var i=n(5),o=n(8),s=n(0),a=n(6),l=n(11),c=s.deprecated;r.stack=function(e,t,n,r,o,s,l){for(var c,u=i.create({label:"Stack"}),d=e,h=t,f=0,p=0;p<r;p++){for(var m=0,g=0;g<n;g++){var v=l(d,h,g,p,c,f);if(v){var y=v.bounds.max.y-v.bounds.min.y,b=v.bounds.max.x-v.bounds.min.x;y>m&&(m=y),a.translate(v,{x:.5*b,y:.5*y}),d=v.bounds.max.x+o,i.addBody(u,v),c=v,f+=1}else d+=o}h+=m+s,d=e}return u},r.chain=function(e,t,n,r,a,l){for(var c=e.bodies,u=1;u<c.length;u++){var d=c[u-1],h=c[u],f=d.bounds.max.y-d.bounds.min.y,p=d.bounds.max.x-d.bounds.min.x,m=h.bounds.max.y-h.bounds.min.y,g={bodyA:d,pointA:{x:p*t,y:f*n},bodyB:h,pointB:{x:(h.bounds.max.x-h.bounds.min.x)*r,y:m*a}},v=s.extend(g,l);i.addConstraint(e,o.create(v))}return e.label+=" Chain",e},r.mesh=function(e,t,n,r,a){var l,c,u,d,h,f=e.bodies;for(l=0;l<n;l++){for(c=1;c<t;c++)u=f[c-1+l*t],d=f[c+l*t],i.addConstraint(e,o.create(s.extend({bodyA:u,bodyB:d},a)));if(l>0)for(c=0;c<t;c++)u=f[c+(l-1)*t],d=f[c+l*t],i.addConstraint(e,o.create(s.extend({bodyA:u,bodyB:d},a))),r&&c>0&&(h=f[c-1+(l-1)*t],i.addConstraint(e,o.create(s.extend({bodyA:h,bodyB:d},a)))),r&&c<t-1&&(h=f[c+1+(l-1)*t],i.addConstraint(e,o.create(s.extend({bodyA:h,bodyB:d},a))))}return e.label+=" Mesh",e},r.pyramid=function(e,t,n,i,o,s,l){return r.stack(e,t,n,i,o,s,(function(t,r,s,c,u,d){var h=Math.min(i,Math.ceil(n/2)),f=u?u.bounds.max.x-u.bounds.min.x:0;if(!(c>h||s<(c=h-c)||s>n-1-c))return 1===d&&a.translate(u,{x:(s+(n%2==1?1:-1))*f,y:0}),l(e+(u?s*f:0)+s*o,r,s,c,u,d)}))},r.newtonsCradle=function(e,t,n,r,s){for(var a=i.create({label:"Newtons Cradle"}),c=0;c<n;c++){var u=l.circle(e+c*(1.9*r),t+s,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),d=o.create({pointA:{x:e+c*(1.9*r),y:t},bodyB:u});i.addBody(a,u),i.addConstraint(a,d)}return a},c(r,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),r.car=function(e,t,n,r,s){var c=a.nextGroup(!0),u=.5*-n+20,d=.5*n-20,h=i.create({label:"Car"}),f=l.rectangle(e,t,n,r,{collisionFilter:{group:c},chamfer:{radius:.5*r},density:2e-4}),p=l.circle(e+u,t+0,s,{collisionFilter:{group:c},friction:.8}),m=l.circle(e+d,t+0,s,{collisionFilter:{group:c},friction:.8}),g=o.create({bodyB:f,pointB:{x:u,y:0},bodyA:p,stiffness:1,length:0}),v=o.create({bodyB:f,pointB:{x:d,y:0},bodyA:m,stiffness:1,length:0});return i.addBody(h,f),i.addBody(h,p),i.addBody(h,m),i.addConstraint(h,g),i.addConstraint(h,v),h},c(r,"car","Composites.car  moved to car example"),r.softBody=function(e,t,n,i,o,a,c,u,d,h){d=s.extend({inertia:1/0},d),h=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},h);var f=r.stack(e,t,n,i,o,a,(function(e,t){return l.circle(e,t,u,d)}));return r.mesh(f,n,i,c,h),f.label="Soft Body",f},c(r,"softBody","Composites.softBody  moved to softBody and cloth examples")},function(e,t,n){var r={};e.exports=r;var i=n(3),o=n(7),s=n(12),a=n(4),l=n(13),c=n(8),u=n(5),d=n(0),h=n(1);r.create=function(e,t){var n=(e?e.mouse:null)||(t?t.mouse:null);n||(e&&e.render&&e.render.canvas?n=s.create(e.render.canvas):t&&t.element?n=s.create(t.element):(n=s.create(),d.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var i={type:"mouseConstraint",mouse:n,element:null,body:null,constraint:c.create({label:"Mouse Constraint",pointA:n.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},o=d.extend(i,t);return a.on(e,"beforeUpdate",(function(){var t=u.allBodies(e.world);r.update(o,t),r._triggerEvents(o)})),o},r.update=function(e,t){var n=e.mouse,r=e.constraint,s=e.body;if(0===n.button){if(r.bodyB)o.set(r.bodyB,!1),r.pointA=n.position;else for(var c=0;c<t.length;c++)if(s=t[c],h.contains(s.bounds,n.position)&&l.canCollide(s.collisionFilter,e.collisionFilter))for(var u=s.parts.length>1?1:0;u<s.parts.length;u++){var d=s.parts[u];if(i.contains(d.vertices,n.position)){r.pointA=n.position,r.bodyB=e.body=s,r.pointB={x:n.position.x-s.position.x,y:n.position.y-s.position.y},r.angleB=s.angle,o.set(s,!1),a.trigger(e,"startdrag",{mouse:n,body:s});break}}}else r.bodyB=e.body=null,r.pointB=null,s&&a.trigger(e,"enddrag",{mouse:n,body:s})},r._triggerEvents=function(e){var t=e.mouse,n=t.sourceEvents;n.mousemove&&a.trigger(e,"mousemove",{mouse:t}),n.mousedown&&a.trigger(e,"mousedown",{mouse:t}),n.mouseup&&a.trigger(e,"mouseup",{mouse:t}),s.clearSourceEvents(t)}},function(e,t,n){var r={};e.exports=r;var i=n(2),o=n(14),s=n(1),a=n(11),l=n(3);r.collides=function(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r];if(s.overlaps(i.bounds,e.bounds))for(var a=1===i.parts.length?0:1;a<i.parts.length;a++){var l=i.parts[a];if(s.overlaps(l.bounds,e.bounds)){var c=o.collides(l,e);if(c.collided){n.push(c);break}}}}return n},r.ray=function(e,t,n,o){o=o||1e-100;for(var s=i.angle(t,n),l=i.magnitude(i.sub(t,n)),c=.5*(n.x+t.x),u=.5*(n.y+t.y),d=a.rectangle(c,u,l,o,{angle:s}),h=r.collides(d,e),f=0;f<h.length;f+=1){var p=h[f];p.body=p.bodyB=p.bodyA}return h},r.region=function(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=e[i],a=s.overlaps(o.bounds,t);(a&&!n||!a&&n)&&r.push(o)}return r},r.point=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(s.contains(i.bounds,t))for(var o=1===i.parts.length?0:1;o<i.parts.length;o++){var a=i.parts[o];if(s.contains(a.bounds,t)&&l.contains(a.vertices,t)){n.push(i);break}}}return n}},function(e,t,n){var r={};e.exports=r;var i,o,s,a=n(4),l=n(18),c=n(0);"undefined"!=typeof window&&(i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i||(i=function(e){s=setTimeout((function(){e(c.now())}),1e3/60)},o=function(){clearTimeout(s)}),r.create=function(e){var t=c.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(.5*t.fps),t.fps=1e3/t.delta,t},r.run=function(e,t){return void 0!==e.positionIterations&&(t=e,e=r.create()),function n(o){e.frameRequestId=i(n),o&&e.enabled&&r.tick(e,t,o)}(),e},r.tick=function(e,t,n){var r,i=t.timing,o=1,s={timestamp:i.timestamp};a.trigger(e,"beforeTick",s),e.isFixed?r=e.delta:(r=n-e.timePrev||e.delta,e.timePrev=n,e.deltaHistory.push(r),e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize),o=(r=(r=(r=Math.min.apply(null,e.deltaHistory))<e.deltaMin?e.deltaMin:r)>e.deltaMax?e.deltaMax:r)/e.delta,e.delta=r),0!==e.timeScalePrev&&(o*=i.timeScale/e.timeScalePrev),0===i.timeScale&&(o=0),e.timeScalePrev=i.timeScale,e.correction=o,e.frameCounter+=1,n-e.counterTimestamp>=1e3&&(e.fps=e.frameCounter*((n-e.counterTimestamp)/1e3),e.counterTimestamp=n,e.frameCounter=0),a.trigger(e,"tick",s),a.trigger(e,"beforeUpdate",s),l.update(t,r,o),a.trigger(e,"afterUpdate",s),a.trigger(e,"afterTick",s)},r.stop=function(e){o(e.frameRequestId)},r.start=function(e,t){r.run(e,t)}},function(e,t,n){var r={};e.exports=r,n(1);var i=n(0);r.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||i.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,o,s,a,l,c,u,d,h,f,p,m=[],g=0,v=0,y=0;t=t||15;var b=function(e,t,n){var r=n%2==1&&n>1;if(!h||e!=h.x||t!=h.y){h&&r?(f=h.x,p=h.y):(f=0,p=0);var i={x:f+e,y:p+t};!r&&h||(h=i),m.push(i),v=f+e,y=p+t}},w=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":v=e.x,y=e.y;break;case"H":v=e.x;break;case"V":y=e.y}b(v,y,e.pathSegType)}};for(r._svgPathToAbsolute(e),s=e.getTotalLength(),c=[],n=0;n<e.pathSegList.numberOfItems;n+=1)c.push(e.pathSegList.getItem(n));for(u=c.concat();g<s;){if((l=c[e.getPathSegAtLength(g)])!=d){for(;u.length&&u[0]!=l;)w(u.shift());d=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=e.getPointAtLength(g),b(a.x,a.y,0)}g+=t}for(n=0,o=u.length;n<o;++n)w(u[n]);return m},r._svgPathToAbsolute=function(e){for(var t,n,r,i,o,s,a=e.pathSegList,l=0,c=0,u=a.numberOfItems,d=0;d<u;++d){var h=a.getItem(d),f=h.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(f))"x"in h&&(l=h.x),"y"in h&&(c=h.y);else switch("x1"in h&&(r=l+h.x1),"x2"in h&&(o=l+h.x2),"y1"in h&&(i=c+h.y1),"y2"in h&&(s=c+h.y2),"x"in h&&(l+=h.x),"y"in h&&(c+=h.y),f){case"m":a.replaceItem(e.createSVGPathSegMovetoAbs(l,c),d);break;case"l":a.replaceItem(e.createSVGPathSegLinetoAbs(l,c),d);break;case"h":a.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(l),d);break;case"v":a.replaceItem(e.createSVGPathSegLinetoVerticalAbs(c),d);break;case"c":a.replaceItem(e.createSVGPathSegCurvetoCubicAbs(l,c,r,i,o,s),d);break;case"s":a.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(l,c,o,s),d);break;case"q":a.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(l,c,r,i),d);break;case"t":a.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(l,c),d);break;case"a":a.replaceItem(e.createSVGPathSegArcAbs(l,c,h.r1,h.r2,h.angle,h.largeArcFlag,h.sweepFlag),d);break;case"z":case"Z":l=t,c=n}"M"!=f&&"m"!=f||(t=l,n=c)}}},function(e,t,n){var r={};e.exports=r;var i=n(5);n(0),r.create=i.create,r.add=i.add,r.remove=i.remove,r.clear=i.clear,r.addComposite=i.addComposite,r.addBody=i.addBody,r.addConstraint=i.addConstraint}])},e.exports=r()},57824:function(e){var t=1e3,n=60*t,r=60*n,i=24*r,o=7*i,s=365.25*i;function a(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,l){l=l||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*s;case"weeks":case"week":case"w":return l*o;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===c&&isFinite(e))return l.long?function(e){var o=Math.abs(e);if(o>=i)return a(e,o,i,"day");if(o>=r)return a(e,o,r,"hour");if(o>=n)return a(e,o,n,"minute");if(o>=t)return a(e,o,t,"second");return e+" ms"}(e):function(e){var o=Math.abs(e);if(o>=i)return Math.round(e/i)+"d";if(o>=r)return Math.round(e/r)+"h";if(o>=n)return Math.round(e/n)+"m";if(o>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},27418:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var s,a,l=i(e),c=1;c<arguments.length;c++){for(var u in s=Object(arguments[c]))n.call(s,u)&&(l[u]=s[u]);if(t){a=t(s);for(var d=0;d<a.length;d++)r.call(s,a[d])&&(l[a[d]]=s[a[d]])}}return l}},81830:function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},64187:function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var r=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var s,a,l=t.exec(e||""),c={},u=14;u--;)c[n[u]]=l[u]||"";return-1!=i&&-1!=o&&(c.source=r,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,c.path),c.queryKey=(s=c.query,a={},s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(a[t]=n)})),a),c}},14779:function(e,t,n){var r=n(96173);e.exports=f,e.exports.parse=o,e.exports.compile=function(e,t){return a(o(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,s=0,a="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var d=n[0],h=n[1],f=n.index;if(a+=e.slice(s,f),s=f+d.length,h)a+=h[1];else{var p=e[s],m=n[2],g=n[3],v=n[4],y=n[5],b=n[6],w=n[7];a&&(r.push(a),a="");var x=null!=m&&null!=p&&p!==m,_="+"===b||"*"===b,S="?"===b||"*"===b,E=n[2]||u,T=v||y;r.push({name:g||o++,prefix:m||"",delimiter:E,optional:S,repeat:_,partial:x,asterisk:!!w,pattern:T?c(T):w?".*":"[^"+l(E)+"]+?"})}}return s<e.length&&(a+=e.substr(s)),a&&r.push(a),r}function s(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",d(t)));return function(t,i){for(var o="",a=t||{},l=(i||{}).pretty?s:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!=typeof u){var d,h=a[u.name];if(null==h){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(h)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(d=l(h[f]),!n[c].test(d))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(d)+"`");o+=(0===f?u.prefix:u.delimiter)+d}}else{if(d=u.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(h),!n[c].test(d))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+d+'"');o+=u.prefix+d}}else o+=u}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,s="",a=0;a<e.length;a++){var c=e[a];if("string"==typeof c)s+=l(c);else{var h=l(c.prefix),f="(?:"+c.pattern+")";t.push(c),c.repeat&&(f+="(?:"+h+f+")*"),s+=f=c.optional?c.partial?h+"("+f+")?":"(?:"+h+"("+f+"))?":h+"("+f+")"}}var p=l(n.delimiter||"/"),m=s.slice(-p.length)===p;return i||(s=(m?s.slice(0,-p.length):s)+"(?:"+p+"(?=$))?"),s+=o?"$":i&&m?"":"(?="+p+"|$)",u(new RegExp("^"+s,d(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return h(o(e,n),t,n)}(e,t,n)}},96173:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},92703:function(e,t,n){"use strict";var r=n(50414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},45697:function(e,t,n){e.exports=n(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},92592:function(e,t,n){var r=n(47138),i=n(95115),o=n(6907),s=n(93776);function a(e,t,n,o,s){var a=[].slice.call(arguments,1),l=a.length,c="function"==typeof a[l-1];if(!c&&!r())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=o=void 0):2!==l||t.getContext||(o=n,n=t,t=void 0),new Promise((function(r,s){try{var a=i.create(n,o);r(e(a,t,o))}catch(e){s(e)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(s=n,n=t,t=o=void 0):3===l&&(t.getContext&&void 0===s?(s=o,o=void 0):(s=o,o=n,n=t,t=void 0));try{var u=i.create(n,o);s(null,e(u,t,o))}catch(e){s(e)}}t.create=i.create,t.toCanvas=a.bind(null,o.render),t.toDataURL=a.bind(null,o.renderToDataURL),t.toString=a.bind(null,(function(e,t,n){return s.render(e,n)}))},47138:function(e){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},21845:function(e,t,n){var r=n(10242).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,n=r(e),i=145===n?26:2*Math.ceil((n-13)/(2*t-2)),o=[n-7],s=1;s<t-1;s++)o[s]=o[s-1]-i;return o.push(6),o.reverse()},t.getPositions=function(e){for(var n=[],r=t.getRowColCoords(e),i=r.length,o=0;o<i;o++)for(var s=0;s<i;s++)0===o&&0===s||0===o&&s===i-1||o===i-1&&0===s||n.push([r[o],r[s]]);return n}},8260:function(e,t,n){var r=n(76910),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=r.ALPHANUMERIC,this.data=e}o.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var n=45*i.indexOf(this.data[t]);n+=i.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(i.indexOf(this.data[t]),6)},e.exports=o},97245:function(e){function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},73280:function(e,t,n){var r=n(99131);function i(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=r.alloc(e*e),this.reservedBit=r.alloc(e*e)}i.prototype.set=function(e,t,n,r){var i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)},i.prototype.get=function(e,t){return this.data[e*this.size+t]},i.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},i.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=i},43424:function(e,t,n){var r=n(99131),i=n(76910);function o(e){this.mode=i.BYTE,this.data=r.from(e)}o.getBitsLength=function(e){return 8*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=o},35393:function(e,t,n){var r=n(64908),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return i[4*(e-1)+0];case r.M:return i[4*(e-1)+1];case r.Q:return i[4*(e-1)+2];case r.H:return i[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return o[4*(e-1)+0];case r.M:return o[4*(e-1)+1];case r.Q:return o[4*(e-1)+2];case r.H:return o[4*(e-1)+3];default:return}}},64908:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return n}}},76526:function(e,t,n){var r=n(10242).getSymbolSize;t.getPositions=function(e){var t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},61642:function(e,t,n){var r=n(10242),i=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var n=e.bit<<3|t,o=n<<10;r.getBCHDigit(o)-i>=0;)o^=1335<<r.getBCHDigit(o)-i;return 21522^(n<<10|o)}},69729:function(e,t,n){var r=n(99131),i=r.alloc(512),o=r.alloc(256);!function(){for(var e=1,t=0;t<255;t++)i[t]=e,o[e]=t,256&(e<<=1)&&(e^=285);for(t=255;t<512;t++)i[t]=i[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return o[e]},t.exp=function(e){return i[e]},t.mul=function(e,t){return 0===e||0===t?0:i[o[e]+o[t]]}},35442:function(e,t,n){var r=n(76910),i=n(10242);function o(e){this.mode=r.KANJI,this.data=e}o.getBitsLength=function(e){return 13*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var n=i.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=o},27126:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var n=3,r=3,i=40,o=10;function s(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(n+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return n*r%2+n*r%3==0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,r=0,i=0,o=0,s=null,a=null,l=0;l<t;l++){i=o=0,s=a=null;for(var c=0;c<t;c++){var u=e.get(l,c);u===s?i++:(i>=5&&(r+=n+(i-5)),s=u,i=1),(u=e.get(c,l))===a?o++:(o>=5&&(r+=n+(o-5)),a=u,o=1)}i>=5&&(r+=n+(i-5)),o>=5&&(r+=n+(o-5))}return r},t.getPenaltyN2=function(e){for(var t=e.size,n=0,i=0;i<t-1;i++)for(var o=0;o<t-1;o++){var s=e.get(i,o)+e.get(i,o+1)+e.get(i+1,o)+e.get(i+1,o+1);4!==s&&0!==s||n++}return n*r},t.getPenaltyN3=function(e){for(var t=e.size,n=0,r=0,o=0,s=0;s<t;s++){r=o=0;for(var a=0;a<t;a++)r=r<<1&2047|e.get(s,a),a>=10&&(1488===r||93===r)&&n++,o=o<<1&2047|e.get(a,s),a>=10&&(1488===o||93===o)&&n++}return n*i},t.getPenaltyN4=function(e){for(var t=0,n=e.data.length,r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*o},t.applyMask=function(e,t){for(var n=t.size,r=0;r<n;r++)for(var i=0;i<n;i++)t.isReserved(i,r)||t.xor(i,r,s(e,i,r))},t.getBestMask=function(e,n){for(var r=Object.keys(t.Patterns).length,i=0,o=1/0,s=0;s<r;s++){n(s),t.applyMask(s,e);var a=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(s,e),a<o&&(o=a,i=s)}return i}},76910:function(e,t,n){var r=n(43114),i=n(7007);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return i.testNumeric(e)?t.NUMERIC:i.testAlphanumeric(e)?t.ALPHANUMERIC:i.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return n}}},41085:function(e,t,n){var r=n(76910);function i(e){this.mode=r.NUMERIC,this.data=e.toString()}i.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);var i=this.data.length-t;i>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*i+1))},e.exports=i},26143:function(e,t,n){var r=n(99131),i=n(69729);t.mul=function(e,t){for(var n=r.alloc(e.length+t.length-1),o=0;o<e.length;o++)for(var s=0;s<t.length;s++)n[o+s]^=i.mul(e[o],t[s]);return n},t.mod=function(e,t){for(var n=r.from(e);n.length-t.length>=0;){for(var o=n[0],s=0;s<t.length;s++)n[s]^=i.mul(t[s],o);for(var a=0;a<n.length&&0===n[a];)a++;n=n.slice(a)}return n},t.generateECPolynomial=function(e){for(var n=r.from([1]),o=0;o<e;o++)n=t.mul(n,[1,i.exp(o)]);return n}},95115:function(e,t,n){var r=n(99131),i=n(10242),o=n(64908),s=n(97245),a=n(73280),l=n(21845),c=n(76526),u=n(27126),d=n(35393),h=n(52882),f=n(23103),p=n(61642),m=n(76910),g=n(16130),v=n(5826);function y(e,t,n){var r,i,o=e.size,s=p.getEncodedBits(t,n);for(r=0;r<15;r++)i=1==(s>>r&1),r<6?e.set(r,8,i,!0):r<8?e.set(r+1,8,i,!0):e.set(o-15+r,8,i,!0),r<8?e.set(8,o-r-1,i,!0):r<9?e.set(8,15-r-1+1,i,!0):e.set(8,15-r-1,i,!0);e.set(o-8,8,1,!0)}function b(e,t,n){var o=new s;n.forEach((function(t){o.put(t.mode.bit,4),o.put(t.getLength(),m.getCharCountIndicator(t.mode,e)),t.write(o)}));var a=8*(i.getSymbolTotalCodewords(e)-d.getTotalCodewordsCount(e,t));for(o.getLengthInBits()+4<=a&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);for(var l=(a-o.getLengthInBits())/8,c=0;c<l;c++)o.put(c%2?17:236,8);return function(e,t,n){for(var o=i.getSymbolTotalCodewords(t),s=d.getTotalCodewordsCount(t,n),a=o-s,l=d.getBlocksCount(t,n),c=l-o%l,u=Math.floor(o/l),f=Math.floor(a/l),p=f+1,m=u-f,g=new h(m),v=0,y=new Array(l),b=new Array(l),w=0,x=r.from(e.buffer),_=0;_<l;_++){var S=_<c?f:p;y[_]=x.slice(v,v+S),b[_]=g.encode(y[_]),v+=S,w=Math.max(w,S)}var E,T,C=r.alloc(o),M=0;for(E=0;E<w;E++)for(T=0;T<l;T++)E<y[T].length&&(C[M++]=y[T][E]);for(E=0;E<m;E++)for(T=0;T<l;T++)C[M++]=b[T][E];return C}(o,e,t)}function w(e,t,n,r){var o;if(v(e))o=g.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");var s=t;if(!s){var d=g.rawSplit(e);s=f.getBestVersionForData(d,n)}o=g.fromString(e,s||40)}var h=f.getBestVersionForData(o,n);if(!h)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<h)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+h+".\n")}else t=h;var p=b(t,n,o),m=i.getSymbolSize(t),w=new a(m);return function(e,t){for(var n=e.size,r=c.getPositions(t),i=0;i<r.length;i++)for(var o=r[i][0],s=r[i][1],a=-1;a<=7;a++)if(!(o+a<=-1||n<=o+a))for(var l=-1;l<=7;l++)s+l<=-1||n<=s+l||(a>=0&&a<=6&&(0===l||6===l)||l>=0&&l<=6&&(0===a||6===a)||a>=2&&a<=4&&l>=2&&l<=4?e.set(o+a,s+l,!0,!0):e.set(o+a,s+l,!1,!0))}(w,t),function(e){for(var t=e.size,n=8;n<t-8;n++){var r=n%2==0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}(w),function(e,t){for(var n=l.getPositions(t),r=0;r<n.length;r++)for(var i=n[r][0],o=n[r][1],s=-2;s<=2;s++)for(var a=-2;a<=2;a++)-2===s||2===s||-2===a||2===a||0===s&&0===a?e.set(i+s,o+a,!0,!0):e.set(i+s,o+a,!1,!0)}(w,t),y(w,n,0),t>=7&&function(e,t){for(var n,r,i,o=e.size,s=f.getEncodedBits(t),a=0;a<18;a++)n=Math.floor(a/3),r=a%3+o-8-3,i=1==(s>>a&1),e.set(n,r,i,!0),e.set(r,n,i,!0)}(w,t),function(e,t){for(var n=e.size,r=-1,i=n-1,o=7,s=0,a=n-1;a>0;a-=2)for(6===a&&a--;;){for(var l=0;l<2;l++)if(!e.isReserved(i,a-l)){var c=!1;s<t.length&&(c=1==(t[s]>>>o&1)),e.set(i,a-l,c),-1==--o&&(s++,o=7)}if((i+=r)<0||n<=i){i-=r,r=-r;break}}}(w,p),isNaN(r)&&(r=u.getBestMask(w,y.bind(null,w,n))),u.applyMask(r,w),y(w,n,r),{modules:w,version:t,errorCorrectionLevel:n,maskPattern:r,segments:o}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");var n,r,s=o.M;return void 0!==t&&(s=o.from(t.errorCorrectionLevel,o.M),n=f.from(t.version),r=u.from(t.maskPattern),t.toSJISFunc&&i.setToSJISFunction(t.toSJISFunc)),w(e,n,s,r)}},52882:function(e,t,n){var r=n(99131),i=n(26143),o=n(6772).lW;function s(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}s.prototype.initialize=function(e){this.degree=e,this.genPoly=i.generateECPolynomial(this.degree)},s.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=r.alloc(this.degree),n=o.concat([e,t],e.length+this.degree),s=i.mod(n,this.genPoly),a=this.degree-s.length;if(a>0){var l=r.alloc(this.degree);return s.copy(l,a),l}return s},e.exports=s},7007:function(e,t){var n="[0-9]+",r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",i="(?:(?![A-Z0-9 $%*+\\-./:]|"+(r=r.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(i,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var o=new RegExp("^"+r+"$"),s=new RegExp("^[0-9]+$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return o.test(e)},t.testNumeric=function(e){return s.test(e)},t.testAlphanumeric=function(e){return a.test(e)}},16130:function(e,t,n){var r=n(76910),i=n(41085),o=n(8260),s=n(43424),a=n(35442),l=n(7007),c=n(10242),u=n(65987);function d(e){return unescape(encodeURIComponent(e)).length}function h(e,t,n){for(var r,i=[];null!==(r=e.exec(n));)i.push({data:r[0],index:r.index,mode:t,length:r[0].length});return i}function f(e){var t,n,i=h(l.NUMERIC,r.NUMERIC,e),o=h(l.ALPHANUMERIC,r.ALPHANUMERIC,e);return c.isKanjiModeEnabled()?(t=h(l.BYTE,r.BYTE,e),n=h(l.KANJI,r.KANJI,e)):(t=h(l.BYTE_KANJI,r.BYTE,e),n=[]),i.concat(o,t,n).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function p(e,t){switch(t){case r.NUMERIC:return i.getBitsLength(e);case r.ALPHANUMERIC:return o.getBitsLength(e);case r.KANJI:return a.getBitsLength(e);case r.BYTE:return s.getBitsLength(e)}}function m(e,t){var n,l=r.getBestModeForData(e);if((n=r.from(t,l))!==r.BYTE&&n.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(l));switch(n!==r.KANJI||c.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new i(e);case r.ALPHANUMERIC:return new o(e);case r.KANJI:return new a(e);case r.BYTE:return new s(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e}),[])},t.fromString=function(e,n){for(var i=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];switch(i.mode){case r.NUMERIC:t.push([i,{data:i.data,mode:r.ALPHANUMERIC,length:i.length},{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.ALPHANUMERIC:t.push([i,{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.KANJI:t.push([i,{data:i.data,mode:r.BYTE,length:d(i.data)}]);break;case r.BYTE:t.push([{data:i.data,mode:r.BYTE,length:d(i.data)}])}}return t}(f(e,c.isKanjiModeEnabled())),o=function(e,t){for(var n={},i={start:{}},o=["start"],s=0;s<e.length;s++){for(var a=e[s],l=[],c=0;c<a.length;c++){var u=a[c],d=""+s+c;l.push(d),n[d]={node:u,lastCount:0},i[d]={};for(var h=0;h<o.length;h++){var f=o[h];n[f]&&n[f].node.mode===u.mode?(i[f][d]=p(n[f].lastCount+u.length,u.mode)-p(n[f].lastCount,u.mode),n[f].lastCount+=u.length):(n[f]&&(n[f].lastCount=u.length),i[f][d]=p(u.length,u.mode)+4+r.getCharCountIndicator(u.mode,t))}}o=l}for(h=0;h<o.length;h++)i[o[h]].end=0;return{map:i,table:n}}(i,n),s=u.find_path(o.map,"start","end"),a=[],l=1;l<s.length-1;l++)a.push(o.table[s[l]].node);return t.fromArray(function(e){return e.reduce((function(e,t){var n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(a))},t.rawSplit=function(e){return t.fromArray(f(e,c.isKanjiModeEnabled()))}},10242:function(e,t){var n,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},43114:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},23103:function(e,t,n){var r=n(10242),i=n(35393),o=n(64908),s=n(76910),a=n(43114),l=n(5826),c=r.getBCHDigit(7973);function u(e,t){return s.getCharCountIndicator(e,t)+4}function d(e,t){var n=0;return e.forEach((function(e){var r=u(e.mode,t);n+=r+e.getBitsLength()})),n}t.from=function(e,t){return a.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!a.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=s.BYTE);var o=8*(r.getSymbolTotalCodewords(e)-i.getTotalCodewordsCount(e,t));if(n===s.MIXED)return o;var l=o-u(n,e);switch(n){case s.NUMERIC:return Math.floor(l/10*3);case s.ALPHANUMERIC:return Math.floor(l/11*2);case s.KANJI:return Math.floor(l/13);case s.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){var r,i=o.from(n,o.M);if(l(e)){if(e.length>1)return function(e,n){for(var r=1;r<=40;r++)if(d(e,r)<=t.getCapacity(r,n,s.MIXED))return r}(e,i);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(var i=1;i<=40;i++)if(n<=t.getCapacity(i,r,e))return i}(r.mode,r.getLength(),i)},t.getEncodedBits=function(e){if(!a.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;r.getBCHDigit(t)-c>=0;)t^=7973<<r.getBCHDigit(t)-c;return e<<12|t}},6907:function(e,t,n){var r=n(89653);t.render=function(e,t,n){var i=n,o=t;void 0!==i||t&&t.getContext||(i=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),i=r.getOptions(i);var s=r.getImageWidth(e.modules.size,i),a=o.getContext("2d"),l=a.createImageData(s,s);return r.qrToImageData(l.data,e,i),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(a,o,s),a.putImageData(l,0,0),o},t.renderToDataURL=function(e,n,r){var i=r;void 0!==i||n&&n.getContext||(i=n,n=void 0),i||(i={});var o=t.render(e,n,i),s=i.type||"image/png",a=i.rendererOpts||{};return o.toDataURL(s,a.quality)}},93776:function(e,t,n){var r=n(89653);function i(e,t){var n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function o(e,t,n){var r=e+t;return void 0!==n&&(r+=" "+n),r}t.render=function(e,t,n){var s=r.getOptions(t),a=e.modules.size,l=e.modules.data,c=a+2*s.margin,u=s.color.light.a?"<path "+i(s.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",d="<path "+i(s.color.dark,"stroke")+' d="'+function(e,t,n){for(var r="",i=0,s=!1,a=0,l=0;l<e.length;l++){var c=Math.floor(l%t),u=Math.floor(l/t);c||s||(s=!0),e[l]?(a++,l>0&&c>0&&e[l-1]||(r+=s?o("M",c+n,.5+u+n):o("m",i,0),i=0,s=!1),c+1<t&&e[l+1]||(r+=o("h",a),a=0)):i++}return r}(l,a,s.margin)+'"/>',h='viewBox="0 0 '+c+" "+c+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+h+' shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"==typeof n&&n(null,f),f}},89653:function(e,t){function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){var r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){for(var i=n.modules.size,o=n.modules.data,s=t.getScale(i,r),a=Math.floor((i+2*r.margin)*s),l=r.margin*s,c=[r.color.light,r.color.dark],u=0;u<a;u++)for(var d=0;d<a;d++){var h=4*(u*a+d),f=r.color.light;if(u>=l&&d>=l&&u<a-l&&d<a-l)f=c[o[Math.floor((u-l)/s)*i+Math.floor((d-l)/s)]?1:0];e[h++]=f.r,e[h++]=f.g,e[h++]=f.b,e[h]=f.a}}},99131:function(e,t,n){"use strict";var r=n(5826);o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}();var i=o.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function o(e,t,n){return o.TYPED_ARRAY_SUPPORT||this instanceof o?"number"==typeof e?l(this,e):function(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer)return function(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");var i;i=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);o.TYPED_ARRAY_SUPPORT?i.__proto__=o.prototype:i=c(e,i);return i}(e,t,n,r);if("string"==typeof t)return function(e,t){var n=0|d(t),r=a(e,n),i=r.write(t);i!==n&&(r=r.slice(0,i));return r}(e,t);return function(e,t){if(o.isBuffer(t)){var n=0|s(t.length),r=a(e,n);return 0===r.length||t.copy(r,0,0,n),r}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):c(e,t);if("Buffer"===t.type&&Array.isArray(t.data))return c(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}(this,e,t,n):new o(e,t,n)}function s(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function a(e,t){var n;return o.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(t)).__proto__=o.prototype:(null===(n=e)&&(n=new o(t)),n.length=t),n}function l(e,t){var n=a(e,t<0?0:0|s(t));if(!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)n[r]=0;return n}function c(e,t){for(var n=t.length<0?0:0|s(t.length),r=a(e,n),i=0;i<n;i+=1)r[i]=255&t[i];return r}function u(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function d(e){return o.isBuffer(e)?e.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)?e.byteLength:("string"!=typeof e&&(e=""+e),0===e.length?0:u(e).length)}o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),o.prototype.write=function(e,t,n){void 0===t||void 0===n&&"string"==typeof t?(n=this.length,t=0):isFinite(t)&&(t|=0,isFinite(n)?n|=0:n=void 0);var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(e,t,n,r){return function(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}(u(t,e.length-n),e,n,r)}(this,e,t,n)},o.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),o.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},o.prototype.fill=function(e,t,n){if("string"==typeof e){if("string"==typeof t?(t=0,n=this.length):"string"==typeof n&&(n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=o.isBuffer(e)?e:new o(e),a=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this},o.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a(null,0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l(null,t),s=0;for(n=0;n<e.length;++n){var c=e[n];if(!o.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(i,s),s+=c.length}return i},o.byteLength=d,o.prototype._isBuffer=!0,o.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.exports.alloc=function(e){var t=new o(e);return t.fill(0),t},e.exports.from=function(e){return new o(e)}},6772:function(e,t,n){"use strict";var r=n(79742),i=n(80645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=l,t.h2=50;var s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|m(e,t),r=a(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(z(e,Uint8Array)){var t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(z(e,ArrayBuffer)||e&&z(e.buffer,ArrayBuffer))return f(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(z(e,SharedArrayBuffer)||e&&z(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);var i=function(e){if(l.isBuffer(e)){var t=0|p(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||U(e.length)?a(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),a(e<0?0:0|p(e))}function h(e){for(var t=e.length<0?0:0|p(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(i)return r?-1:B(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),U(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){var o,s=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var u=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var d=!0,h=0;h<l;h++)if(c(e,o+h)!==c(t,h)){d=!1;break}if(d)return o}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(U(a))return s;e[n+s]=a}return s}function x(e,t,n,r){return V(B(t,e.length-n),e,n,r)}function _(e,t,n,r){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return V(Z(t),e,n,r)}function E(e,t,n,r){return V(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,l,c=e[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=M));return n}(r)}l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),z(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(z(o,Uint8Array))i+o.length>r.length?l.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,i){if(z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),u=e.slice(t,n),d=0;d<a;++d)if(c[d]!==u[d]){o=c[d],s=u[d];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":case"latin1":case"binary":return _(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=j[e[o]];return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,o){return t=+t,n>>>=0,o||O(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,o){return t=+t,n>>>=0,o||O(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=l.isBuffer(e)?e:l.from(e,r),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var F=/[^+/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Z(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function U(e){return e!=e}var j=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},64448:function(e,t,n){"use strict";var r=n(67294),i=n(27418),o=n(63840);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));var a=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,S=60106,E=60107,T=60108,C=60114,M=60109,k=60110,P=60112,A=60113,I=60120,R=60115,L=60116,O=60121,N=60128,D=60129,F=60130,B=60131;if("function"==typeof Symbol&&Symbol.for){var Z=Symbol.for;_=Z("react.element"),S=Z("react.portal"),E=Z("react.fragment"),T=Z("react.strict_mode"),C=Z("react.profiler"),M=Z("react.provider"),k=Z("react.context"),P=Z("react.forward_ref"),A=Z("react.suspense"),I=Z("react.suspense_list"),R=Z("react.memo"),L=Z("react.lazy"),O=Z("react.block"),Z("react.scope"),N=Z("react.opaque.id"),D=Z("react.debug_trace_mode"),F=Z("react.offscreen"),B=Z("react.legacy_hidden")}var V,z="function"==typeof Symbol&&Symbol.iterator;function U(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=z&&e[z]||e["@@iterator"])?e:null}function j(e){if(void 0===V)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var H=!1;function G(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a])return"\n"+i[s].replace(" at new "," at ")}while(1<=s&&0<=a);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function W(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function $(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case C:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case I:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case M:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return $(e.type);case O:return $(e._render);case L:t=e._payload,e=e._init;try{return $(e(t))}catch(e){}}return null}function q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function se(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ce(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge,ve=(ge=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=xe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(be).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Se=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ce(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Me=null,ke=null,Pe=null;function Ae(e){if(e=ri(e)){if("function"!=typeof Me)throw Error(s(280));var t=e.stateNode;t&&(t=oi(t),Me(e.stateNode,e.type,t))}}function Ie(e){ke?Pe?Pe.push(e):Pe=[e]:ke=e}function Re(){if(ke){var e=ke,t=Pe;if(Pe=ke=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Le(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function Ne(){}var De=Le,Fe=!1,Be=!1;function Ze(){null===ke&&null===Pe||(Ne(),Re())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=oi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var ze=!1;if(d)try{var Ue={};Object.defineProperty(Ue,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,Ue)}catch(ge){ze=!1}function je(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var He=!1,Ge=null,We=!1,$e=null,qe={onError:function(e){He=!0,Ge=e}};function Ye(e,t,n,r,i,o,s,a,l){He=!1,Ge=null,je.apply(qe,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ke(e)!==e)throw Error(s(188))}function Qe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Je(i),e;if(o===r)return Je(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,ot=!1,st=[],at=null,lt=null,ct=null,ut=new Map,dt=new Map,ht=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function mt(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function gt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=pt(t,n,r,i,o),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function vt(e){var t=ni(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function wt(){for(ot=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==at&&yt(at)&&(at=null),null!==lt&&yt(lt)&&(lt=null),null!==ct&&yt(ct)&&(ct=null),ut.forEach(bt),dt.forEach(bt)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,wt)))}function _t(e){function t(t){return xt(t,e)}if(0<st.length){xt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&xt(at,e),null!==lt&&xt(lt,e),null!==ct&&xt(ct,e),ut.forEach(t),dt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)vt(n),null===n.blockedOn&&ht.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Tt={},Ct={};function Mt(e){if(Tt[e])return Tt[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ct)return Tt[e]=n[t];return e}d&&(Ct=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var kt=Mt("animationend"),Pt=Mt("animationiteration"),At=Mt("animationstart"),It=Mt("transitionend"),Rt=new Map,Lt=new Map,Ot=["abort","abort",kt,"animationEnd",Pt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",It,"transitionEnd","waiting","waiting"];function Nt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Lt.set(r,t),Rt.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Dt=8;function Ft(e){if(0!=(1&e))return Dt=15,1;if(0!=(2&e))return Dt=14,2;if(0!=(4&e))return Dt=13,4;var t=24&e;return 0!==t?(Dt=12,t):0!=(32&e)?(Dt=11,32):0!==(t=192&e)?(Dt=10,t):0!=(256&e)?(Dt=9,256):0!==(t=3584&e)?(Dt=8,t):0!=(4096&e)?(Dt=7,4096):0!==(t=4186112&e)?(Dt=6,t):0!==(t=62914560&e)?(Dt=5,t):67108864&e?(Dt=4,67108864):0!=(134217728&e)?(Dt=3,134217728):0!==(t=805306368&e)?(Dt=2,t):0!=(1073741824&e)?(Dt=1,1073741824):(Dt=8,e)}function Bt(e,t){var n=e.pendingLanes;if(0===n)return Dt=0;var r=0,i=0,o=e.expiredLanes,s=e.suspendedLanes,a=e.pingedLanes;if(0!==o)r=o,i=Dt=15;else if(0!==(o=134217727&n)){var l=o&~s;0!==l?(r=Ft(l),i=Dt):0!==(a&=o)&&(r=Ft(a),i=Dt)}else 0!==(o=n&~s)?(r=Ft(o),i=Dt):0!==a&&(r=Ft(a),i=Dt);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&s)){if(Ft(t),i<=Dt)return t;Dt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function Zt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=zt(24&~t))?Vt(10,t):e;case 10:return 0===(e=zt(192&~t))?Vt(8,t):e;case 8:return 0===(e=zt(3584&~t))&&(0===(e=zt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=zt(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function zt(e){return e&-e}function Ut(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Wt|0)|0},Gt=Math.log,Wt=Math.LN2;var $t=o.unstable_UserBlockingPriority,qt=o.unstable_runWithPriority,Yt=!0;function Kt(e,t,n,r){Fe||Ne();var i=Jt,o=Fe;Fe=!0;try{Oe(i,e,t,n,r)}finally{(Fe=o)||Ze()}}function Xt(e,t,n,r){qt($t,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Yt)if((i=0==(4&t))&&0<st.length&&-1<ft.indexOf(e))e=pt(null,e,t,n,r),st.push(e);else{var o=Qt(e,t,n,r);if(null===o)i&&mt(e,r);else{if(i){if(-1<ft.indexOf(e))return e=pt(o,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return at=gt(at,e,t,n,r,i),!0;case"dragenter":return lt=gt(lt,e,t,n,r,i),!0;case"mouseover":return ct=gt(ct,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ut.set(o,gt(ut.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,dt.set(o,gt(dt.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;mt(e,r)}Nr(e,t,r,null,n)}}}function Qt(e,t,n,r){var i=Ce(r);if(null!==(i=ni(i))){var o=Ke(i);if(null===o)i=null;else{var s=o.tag;if(13===s){if(null!==(i=Xe(o)))return i;i=null}else if(3===s){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Nr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function an(){return!1}function ln(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:an,this.isPropagationStopped=an,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var cn,un,dn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=ln(hn),pn=i({},hn,{view:0,detail:0}),mn=ln(pn),gn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(cn=e.screenX-dn.screenX,un=e.screenY-dn.screenY):un=cn=0,dn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=ln(gn),yn=ln(i({},gn,{dataTransfer:0})),bn=ln(i({},pn,{relatedTarget:0})),wn=ln(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=ln(xn),Sn=ln(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function kn(){return Mn}var Pn=i({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=ln(Pn),In=ln(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=ln(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Ln=ln(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=ln(On),Dn=[9,13,27,32],Fn=d&&"CompositionEvent"in window,Bn=null;d&&"documentMode"in document&&(Bn=document.documentMode);var Zn=d&&"TextEvent"in window&&!Bn,Vn=d&&(!Fn||Bn&&8<Bn&&11>=Bn),zn=String.fromCharCode(32),Un=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Ie(r),0<(t=Fr(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Kn=null;function Xn(e){Pr(e,0)}function Jn(e){if(X(ii(e)))return e}function Qn(e,t){if("change"===e)return t}var er=!1;if(d){var tr;if(d){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"==typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",or),Kn=Yn=null)}function or(e){if("value"===e.propertyName&&Jn(Kn)){var t=[];if(qn(t,Kn,e,Ce(e)),e=Xn,Fe)e(t);else{Fe=!0;try{Le(e,t)}finally{Fe=!1,Ze()}}}}function sr(e,t,n){"focusin"===e?(ir(),Kn=n,(Yn=t).attachEvent("onpropertychange",or)):"focusout"===e&&ir()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Kn)}function lr(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var ur="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},dr=Object.prototype.hasOwnProperty;function hr(e,t){if(ur(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!dr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=fr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fr(r)}}function mr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=d&&"documentMode"in document&&11>=document.documentMode,br=null,wr=null,xr=null,_r=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==br||br!==J(r)||("selectionStart"in(r=br)&&vr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&hr(xr,r)||(xr=r,0<(r=Fr(wr,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Nt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Nt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Nt(Ot,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Tr=0;Tr<Er.length;Tr++)Lt.set(Er[Tr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cr));function kr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ye.apply(this,arguments),He){if(!He)throw Error(s(198));var u=Ge;He=!1,Ge=null,We||(We=!0,$e=u)}}(r,t,void 0,e),e.currentTarget=null}function Pr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;kr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;kr(i,a,c),o=l}}}if(We)throw e=$e,We=!1,$e=null,e}function Ar(e,t){var n=si(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Ir="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){e[Ir]||(e[Ir]=!0,a.forEach((function(t){Mr.has(t)||Lr(t,!1,e,null),Lr(t,!0,e,null)})))}function Lr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Mr.has(e)){if("scroll"!==e)return;i|=2,o=r}var s=si(o),a=e+"__"+(t?"capture":"bubble");s.has(a)||(t&&(i|=4),Or(o,e,i,t),s.add(a))}function Or(e,t,n,r){var i=Lt.get(t);switch(void 0===i?2:i){case 0:i=Kt;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Nr(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=ni(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Be)return e(t,n);Be=!0;try{De(e,t,n)}finally{Be=!1,Ze()}}((function(){var r=o,i=Ce(n),s=[];e:{var a=Rt.get(e);if(void 0!==a){var l=fn,c=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=bn;break;case"focusout":c="blur",l=bn;break;case"beforeblur":case"afterblur":l=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case kt:case Pt:case At:l=wn;break;case It:l=Ln;break;case"scroll":l=mn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!=(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ve(p,h))&&u.push(Dr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(d=Ke(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=vn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:ii(l),f=null==c?a:ii(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,ni(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Br(f))p++;for(f=0,m=h;m;m=Br(m))f++;for(;0<p-f;)u=Br(u),p--;for(;0<f-p;)h=Br(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Br(u),h=Br(h)}u=null}else u=null;null!==l&&Zr(s,a,l,u,!1),null!==c&&null!==d&&Zr(s,d,c,u,!0)}if("select"===(l=(a=r?ii(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Qn;else if($n(a))if(er)g=cr;else{g=ar;var v=sr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=lr);switch(g&&(g=g(e,r))?qn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ie(a,"number",a.value)),v=r?ii(r):window,e){case"focusin":($n(v)||"true"===v.contentEditable)&&(br=v,wr=r,xr=null);break;case"focusout":xr=wr=br=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Sr(s,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Sr(s,n,i)}var y;if(Fn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Vn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(y=rn()):(tn="value"in(en=i)?en.value:en.textContent,Gn=!0)),0<(v=Fr(r,b)).length&&(b=new Sn(b,e,null,n,i),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Hn(n))&&(b.data=y))),(y=Zn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Un=!0,zn);case"textInput":return(e=t.data)===zn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Fn&&jn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Pr(s,t)}))}function Dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ve(e,n))&&r.unshift(Dr(e,o,i)),null!=(o=Ve(e,t))&&r.push(Dr(e,o,i))),e=e.return}return r}function Br(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ve(n,o))&&s.unshift(Dr(n,l,a)):i||null!=(l=Ve(n,o))&&s.push(Dr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}function Vr(){}var zr=null,Ur=null;function jr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"==typeof setTimeout?setTimeout:void 0,Wr="function"==typeof clearTimeout?clearTimeout:void 0;function $r(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Kr=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,Qr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Jr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function oi(e){return e[Qr]||null}function si(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ai=[],li=-1;function ci(e){return{current:e}}function ui(e){0>li||(e.current=ai[li],ai[li]=null,li--)}function di(e,t){li++,ai[li]=e.current,e.current=t}var hi={},fi=ci(hi),pi=ci(!1),mi=hi;function gi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function vi(e){return null!=(e=e.childContextTypes)}function yi(){ui(pi),ui(fi)}function bi(e,t,n){if(fi.current!==hi)throw Error(s(168));di(fi,t),di(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(s(108,$(t)||"Unknown",o));return i({},n,r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,mi=fi.current,di(fi,e),di(pi,pi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=wi(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,ui(pi),ui(fi),di(fi,e)):ui(pi),di(pi,n)}var Si=null,Ei=null,Ti=o.unstable_runWithPriority,Ci=o.unstable_scheduleCallback,Mi=o.unstable_cancelCallback,ki=o.unstable_shouldYield,Pi=o.unstable_requestPaint,Ai=o.unstable_now,Ii=o.unstable_getCurrentPriorityLevel,Ri=o.unstable_ImmediatePriority,Li=o.unstable_UserBlockingPriority,Oi=o.unstable_NormalPriority,Ni=o.unstable_LowPriority,Di=o.unstable_IdlePriority,Fi={},Bi=void 0!==Pi?Pi:function(){},Zi=null,Vi=null,zi=!1,Ui=Ai(),ji=1e4>Ui?Ai:function(){return Ai()-Ui};function Hi(){switch(Ii()){case Ri:return 99;case Li:return 98;case Oi:return 97;case Ni:return 96;case Di:return 95;default:throw Error(s(332))}}function Gi(e){switch(e){case 99:return Ri;case 98:return Li;case 97:return Oi;case 96:return Ni;case 95:return Di;default:throw Error(s(332))}}function Wi(e,t){return e=Gi(e),Ti(e,t)}function $i(e,t,n){return e=Gi(e),Ci(e,t,n)}function qi(){if(null!==Vi){var e=Vi;Vi=null,Mi(e)}Yi()}function Yi(){if(!zi&&null!==Zi){zi=!0;var e=0;try{var t=Zi;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Zi=null}catch(t){throw null!==Zi&&(Zi=Zi.slice(e+1)),Ci(Ri,qi),t}finally{zi=!1}}}var Ki=x.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),Qi=null,eo=null,to=null;function no(){to=eo=Qi=null}function ro(e){var t=Ji.current;ui(Ji),e.type._context._currentValue=t}function io(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function oo(e,t){Qi=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Fs=!0),e.firstContext=null)}function so(e,t){if(to!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===Qi)throw Error(s(308));eo=t,Qi.dependencies={lanes:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var ao=!1;function lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function co(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ho(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function po(e,t,n,r){var o=e.updateQueue;ao=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var c=l,u=c.next;c.next=null,null===a?s=u:a.next=u,a=c;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==a&&(null===h?d.firstBaseUpdate=u:h.next=u,d.lastBaseUpdate=c)}}if(null!==s){for(h=o.baseState,a=0,d=u=c=null;;){l=s.lane;var f=s.eventTime;if((r&l)===l){null!==d&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(l=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(f,h,l);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(l="function"==typeof(p=m.payload)?p.call(f,h,l):p))break e;h=i({},h,l);break e;case 2:ao=!0}}null!==s.callback&&(e.flags|=32,null===(l=o.effects)?o.effects=[s]:l.push(s))}else f={eventTime:f,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(u=d=f,c=h):d=d.next=f,a|=l;if(null===(s=s.next)){if(null===(l=o.shared.pending))break;s=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===d&&(c=h),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=d,za|=a,e.lanes=a,e.memoizedState=h}}function mo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var go=(new r.Component).refs;function vo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hl(),i=fl(e),o=uo(r,i);o.payload=t,null!=n&&(o.callback=n),ho(e,o),pl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hl(),i=fl(e),o=uo(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),ho(e,o),pl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hl(),r=fl(e),i=uo(n,r);i.tag=2,null!=t&&(i.callback=t),ho(e,i),pl(e,r,n)}};function bo(e,t,n,r,i,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,o))}function wo(e,t,n){var r=!1,i=hi,o=t.contextType;return"object"==typeof o&&null!==o?o=so(o):(i=vi(t)?mi:fi.current,o=(r=null!=(r=t.contextTypes))?gi(e,i):hi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function xo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function _o(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=go,lo(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=so(o):(o=vi(t)?mi:fi.current,i.context=gi(e,o)),po(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(vo(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&yo.enqueueReplaceState(i,i.state,null),po(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var So=Array.isArray;function Eo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===go&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function To(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Co(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Wl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Kl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Eo(e,t,n),r.return=e,r):((r=$l(n.type,n.key,n.props,null,e.mode,r)).ref=Eo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=ql(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Kl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _:return(n=$l(t.type,t.key,t.props,null,e.mode,n)).ref=Eo(e,null,t),n.return=e,n;case S:return(t=Xl(t,e.mode,n)).return=e,t}if(So(t)||U(t))return(t=ql(t,e.mode,n,null)).return=e,t;To(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===E?d(e,t,n.props.children,r,i):c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null}if(So(n)||U(n))return null!==i?null:d(e,t,n,r,null);To(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===E?d(t,e,r.props.children,i,r.key):c(t,e,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(So(r)||U(r))return d(t,e=e.get(n)||null,r,i,null);To(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),c}function g(i,a,l,c){var u=U(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,o,l){var c="object"==typeof o&&null!==o&&o.type===E&&null===o.key;c&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case _:e:{for(u=o.key,c=r;null!==c;){if(c.key===u){if(7===c.tag){if(o.type===E){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}}else if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=Eo(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===E?((r=ql(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=$l(o.type,o.key,o.props,null,e.mode,l)).ref=Eo(e,r,o),l.return=e,e=l)}return a(e);case S:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xl(o,e.mode,l)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Kl(o,e.mode,l)).return=e,e=r),a(e);if(So(o))return m(e,r,o,l);if(U(o))return g(e,r,o,l);if(u&&To(e,o),void 0===o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,$(e.type)||"Component"))}return n(e,r)}}var Mo=Co(!0),ko=Co(!1),Po={},Ao=ci(Po),Io=ci(Po),Ro=ci(Po);function Lo(e){if(e===Po)throw Error(s(174));return e}function Oo(e,t){switch(di(Ro,t),di(Io,e),di(Ao,Po),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Ao),di(Ao,t)}function No(){ui(Ao),ui(Io),ui(Ro)}function Do(e){Lo(Ro.current);var t=Lo(Ao.current),n=pe(t,e.type);t!==n&&(di(Io,e),di(Ao,n))}function Fo(e){Io.current===e&&(ui(Ao),ui(Io))}var Bo=ci(0);function Zo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vo=null,zo=null,Uo=!1;function jo(e,t){var n=Hl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ho(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Go(e){if(Uo){var t=zo;if(t){var n=t;if(!Ho(e,t)){if(!(t=qr(n.nextSibling))||!Ho(e,t))return e.flags=-1025&e.flags|2,Uo=!1,void(Vo=e);jo(Vo,n)}Vo=e,zo=qr(t.firstChild)}else e.flags=-1025&e.flags|2,Uo=!1,Vo=e}}function Wo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Vo=e}function $o(e){if(e!==Vo)return!1;if(!Uo)return Wo(e),Uo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=zo;t;)jo(e,t),t=qr(t.nextSibling);if(Wo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){zo=qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}zo=null}}else zo=Vo?qr(e.stateNode.nextSibling):null;return!0}function qo(){zo=Vo=null,Uo=!1}var Yo=[];function Ko(){for(var e=0;e<Yo.length;e++)Yo[e]._workInProgressVersionPrimary=null;Yo.length=0}var Xo=x.ReactCurrentDispatcher,Jo=x.ReactCurrentBatchConfig,Qo=0,es=null,ts=null,ns=null,rs=!1,is=!1;function os(){throw Error(s(321))}function ss(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function as(e,t,n,r,i,o){if(Qo=o,es=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xo.current=null===e||null===e.memoizedState?Ls:Os,e=n(r,i),is){o=0;do{if(is=!1,!(25>o))throw Error(s(301));o+=1,ns=ts=null,t.updateQueue=null,Xo.current=Ns,e=n(r,i)}while(is)}if(Xo.current=Rs,t=null!==ts&&null!==ts.next,Qo=0,ns=ts=es=null,rs=!1,t)throw Error(s(300));return e}function ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ns?es.memoizedState=ns=e:ns=ns.next=e,ns}function cs(){if(null===ts){var e=es.alternate;e=null!==e?e.memoizedState:null}else e=ts.next;var t=null===ns?es.memoizedState:ns.next;if(null!==t)ns=t,ts=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ts=e).memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},null===ns?es.memoizedState=ns=e:ns=ns.next=e}return ns}function us(e,t){return"function"==typeof t?t(e):t}function ds(e){var t=cs(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ts,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=o=null,c=i;do{var u=c.lane;if((Qo&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=d,o=r):l=l.next=d,es.lanes|=u,za|=u}c=c.next}while(null!==c&&c!==i);null===l?o=r:l.next=a,ur(r,t.memoizedState)||(Fs=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function hs(e){var t=cs(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ur(o,t.memoizedState)||(Fs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function fs(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Qo&e)===e)&&(t._workInProgressVersionPrimary=r,Yo.push(t))),e)return n(t._source);throw Yo.push(t),Error(s(350))}function ps(e,t,n,r){var i=La;if(null===i)throw Error(s(349));var o=t._getVersion,a=o(t._source),l=Xo.current,c=l.useState((function(){return fs(i,t,n)})),u=c[1],d=c[0];c=ns;var h=e.memoizedState,f=h.refs,p=f.getSnapshot,m=h.source;h=h.subscribe;var g=es;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=u;var e=o(t._source);if(!ur(a,e)){e=n(t._source),ur(d,e)||(u(e),e=fl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var l=31-Ht(s),c=1<<l;r[l]|=e,s&=~c}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=fl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),ur(p,n)&&ur(m,t)&&ur(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:us,lastRenderedState:d}).dispatch=u=Is.bind(null,es,e),c.queue=e,c.baseQueue=null,d=fs(i,t,n),c.memoizedState=c.baseState=d),d}function ms(e,t,n){return ps(cs(),e,t,n)}function gs(e){var t=ls();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:us,lastRenderedState:e}).dispatch=Is.bind(null,es,e),[t.memoizedState,e]}function vs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=es.updateQueue)?(t={lastEffect:null},es.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ys(e){return e={current:e},ls().memoizedState=e}function bs(){return cs().memoizedState}function ws(e,t,n,r){var i=ls();es.flags|=e,i.memoizedState=vs(1|t,n,void 0,void 0===r?null:r)}function xs(e,t,n,r){var i=cs();r=void 0===r?null:r;var o=void 0;if(null!==ts){var s=ts.memoizedState;if(o=s.destroy,null!==r&&ss(r,s.deps))return void vs(t,n,o,r)}es.flags|=e,i.memoizedState=vs(1|t,n,o,r)}function _s(e,t){return ws(516,4,e,t)}function Ss(e,t){return xs(516,4,e,t)}function Es(e,t){return xs(4,2,e,t)}function Ts(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Cs(e,t,n){return n=null!=n?n.concat([e]):null,xs(4,2,Ts.bind(null,t,e),n)}function Ms(){}function ks(e,t){var n=cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ss(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ps(e,t){var n=cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ss(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function As(e,t){var n=Hi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Jo.transition;Jo.transition=1;try{e(!1),t()}finally{Jo.transition=n}}))}function Is(e,t,n){var r=hl(),i=fl(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(null===s?o.next=o:(o.next=s.next,s.next=o),t.pending=o,s=e.alternate,e===es||null!==s&&s===es)is=rs=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=s(a,n);if(o.eagerReducer=s,o.eagerState=l,ur(l,a))return}catch(e){}pl(e,i,r)}}var Rs={readContext:so,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useLayoutEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useMutableSource:os,useOpaqueIdentifier:os,unstable_isNewReconciler:!1},Ls={readContext:so,useCallback:function(e,t){return ls().memoizedState=[e,void 0===t?null:t],e},useContext:so,useEffect:_s,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ws(4,2,Ts.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ws(4,2,e,t)},useMemo:function(e,t){var n=ls();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ls();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Is.bind(null,es,e),[r.memoizedState,e]},useRef:ys,useState:gs,useDebugValue:Ms,useDeferredValue:function(e){var t=gs(e),n=t[0],r=t[1];return _s((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=gs(!1),t=e[0];return ys(e=As.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ls();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ps(r,e,t,n)},useOpaqueIdentifier:function(){if(Uo){var e=!1,t=function(e){return{$$typeof:N,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Kr++).toString(36))),Error(s(355))})),n=gs(t)[1];return 0==(2&es.mode)&&(es.flags|=516,vs(5,(function(){n("r:"+(Kr++).toString(36))}),void 0,null)),t}return gs(t="r:"+(Kr++).toString(36)),t},unstable_isNewReconciler:!1},Os={readContext:so,useCallback:ks,useContext:so,useEffect:Ss,useImperativeHandle:Cs,useLayoutEffect:Es,useMemo:Ps,useReducer:ds,useRef:bs,useState:function(){return ds(us)},useDebugValue:Ms,useDeferredValue:function(e){var t=ds(us),n=t[0],r=t[1];return Ss((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=ds(us)[0];return[bs().current,e]},useMutableSource:ms,useOpaqueIdentifier:function(){return ds(us)[0]},unstable_isNewReconciler:!1},Ns={readContext:so,useCallback:ks,useContext:so,useEffect:Ss,useImperativeHandle:Cs,useLayoutEffect:Es,useMemo:Ps,useReducer:hs,useRef:bs,useState:function(){return hs(us)},useDebugValue:Ms,useDeferredValue:function(e){var t=hs(us),n=t[0],r=t[1];return Ss((function(){var t=Jo.transition;Jo.transition=1;try{r(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=hs(us)[0];return[bs().current,e]},useMutableSource:ms,useOpaqueIdentifier:function(){return hs(us)[0]},unstable_isNewReconciler:!1},Ds=x.ReactCurrentOwner,Fs=!1;function Bs(e,t,n,r){t.child=null===e?ko(t,null,n,r):Mo(t,e.child,n,r)}function Zs(e,t,n,r,i){n=n.render;var o=t.ref;return oo(t,i),r=as(e,t,n,r,o,i),null===e||Fs?(t.flags|=1,Bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,oa(e,t,i))}function Vs(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!=typeof s||Gl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=$l(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,zs(e,t,s,r,i,o))}return s=e.child,0==(i&o)&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?oa(e,t,o):(t.flags|=1,(e=Wl(s,r)).ref=t.ref,e.return=t,t.child=e)}function zs(e,t,n,r,i,o){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fs=!1,0==(o&i))return t.lanes=e.lanes,oa(e,t,o);0!=(16384&e.flags)&&(Fs=!0)}return Hs(e,t,n,r,o)}function Us(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},_l(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_l(t,e),null;t.memoizedState={baseLanes:0},_l(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,_l(t,r);return Bs(e,t,i,n),t.child}function js(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Hs(e,t,n,r,i){var o=vi(n)?mi:fi.current;return o=gi(t,o),oo(t,i),n=as(e,t,n,r,o,i),null===e||Fs?(t.flags|=1,Bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,oa(e,t,i))}function Gs(e,t,n,r,i){if(vi(n)){var o=!0;xi(t)}else o=!1;if(oo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),wo(t,n,r),_o(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=so(c):c=gi(t,c=vi(n)?mi:fi.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==c)&&xo(t,s,r,c),ao=!1;var h=t.memoizedState;s.state=h,po(t,r,s,i),l=t.memoizedState,a!==r||h!==l||pi.current||ao?("function"==typeof u&&(vo(t,n,u,r),l=t.memoizedState),(a=ao||bo(t,n,a,r,h,l,c))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4)):("function"==typeof s.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"==typeof s.componentDidMount&&(t.flags|=4),r=!1)}else{s=t.stateNode,co(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Xi(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=so(l):l=gi(t,l=vi(n)?mi:fi.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==d||h!==l)&&xo(t,s,r,l),ao=!1,h=t.memoizedState,s.state=h,po(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||pi.current||ao?("function"==typeof f&&(vo(t,n,f,r),p=t.memoizedState),(c=ao||bo(t,n,c,r,h,p,l))?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ws(e,t,n,r,o,i)}function Ws(e,t,n,r,i,o){js(e,t);var s=0!=(64&t.flags);if(!r&&!s)return i&&_i(t,n,!1),oa(e,t,o);r=t.stateNode,Ds.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Mo(t,e.child,null,o),t.child=Mo(t,null,a,o)):Bs(e,t,a,o),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function $s(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),Oo(e,t.containerInfo)}var qs,Ys,Ks,Xs={dehydrated:null,retryLane:0};function Js(e,t,n){var r,i=t.pendingProps,o=Bo.current,s=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(s=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),di(Bo,1&o),null===e?(void 0!==i.fallback&&Go(t),e=i.children,o=i.fallback,s?(e=Qs(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xs,e):"number"==typeof i.unstable_expectedLoadTime?(e=Qs(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xs,t.lanes=33554432,e):((n=Yl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,s?(i=ta(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},s.childLanes=e.childLanes&~n,t.memoizedState=Xs,i):(n=ea(e,t,i.children,n),t.memoizedState=null,n))}function Qs(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Yl(t,i,0,null),n=ql(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function ea(e,t,n,r){var i=e.child;return e=i.sibling,n=Wl(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ta(e,t,n,r,i){var o=t.mode,s=e.child;e=s.sibling;var a={mode:"hidden",children:n};return 0==(2&o)&&t.child!==s?((n=t.child).childLanes=0,n.pendingProps=a,null!==(s=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Wl(s,a),null!==e?r=Wl(e,r):(r=ql(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function na(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),io(e.return,t)}function ra(e,t,n,r,i,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i,s.lastEffect=o)}function ia(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Bs(e,t,r.children,n),0!=(2&(r=Bo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&na(e,n);else if(19===e.tag)na(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(di(Bo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Zo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ra(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Zo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ra(t,!0,n,null,o,t.lastEffect);break;case"together":ra(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function oa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),za|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Wl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function sa(e,t){if(!Uo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function aa(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return vi(t.type)&&yi(),null;case 3:return No(),ui(pi),ui(fi),Ko(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||($o(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Fo(t);var o=Lo(Ro.current);if(n=t.type,null!==e&&null!=t.stateNode)Ys(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Lo(Ao.current),$o(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Jr]=t,r[Qr]=a,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Cr.length;e++)Ar(Cr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,a),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ar("invalid",r);break;case"textarea":le(r,a),Ar("invalid",r)}for(var c in Ee(n,a),e=null,a)a.hasOwnProperty(c)&&(o=a[c],"children"===c?"string"==typeof o?r.textContent!==o&&(e=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(e=["children",""+o]):l.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":K(r),re(r,a,!0);break;case"textarea":K(r),ue(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,e===de&&(e=fe(n)),e===de?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Qr]=r,qs(e,t),t.stateNode=e,c=Te(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),o=r;break;case"iframe":case"object":case"embed":Ar("load",e),o=r;break;case"video":case"audio":for(o=0;o<Cr.length;o++)Ar(Cr[o],e);o=r;break;case"source":Ar("error",e),o=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),o=r;break;case"details":Ar("toggle",e),o=r;break;case"input":ee(e,r),o=Q(e,r),Ar("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":le(e,r),o=ae(e,r),Ar("invalid",e);break;default:o=r}Ee(n,o);var u=o;for(a in u)if(u.hasOwnProperty(a)){var d=u[a];"style"===a?_e(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ve(e,d):"children"===a?"string"==typeof d?("textarea"!==n||""!==d)&&ye(e,d):"number"==typeof d&&ye(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=d&&"onScroll"===a&&Ar("scroll",e):null!=d&&w(e,a,d,c))}switch(n){case"input":K(e),re(e,r,!1);break;case"textarea":K(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?se(e,!!r.multiple,a,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Vr)}jr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ks(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));n=Lo(Ro.current),Lo(Ao.current),$o(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ui(Bo),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&$o(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Bo.current)?0===Ba&&(Ba=3):(0!==Ba&&3!==Ba||(Ba=4),null===La||0==(134217727&za)&&0==(134217727&Ua)||yl(La,Na))),(r||n)&&(t.flags|=4),null);case 4:return No(),null===e&&Rr(t.stateNode.containerInfo),null;case 10:return ro(t),null;case 19:if(ui(Bo),null===(r=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(c=r.rendering))if(a)sa(r,!1);else{if(0!==Ba||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Zo(e))){for(t.flags|=64,sa(r,!1),null!==(a=c.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return di(Bo,1&Bo.current|2),t.child}e=e.sibling}null!==r.tail&&ji()>Wa&&(t.flags|=64,a=!0,sa(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Zo(c))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),sa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Uo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*ji()-r.renderingStartTime>Wa&&1073741824!==n&&(t.flags|=64,a=!0,sa(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=ji(),n.sibling=null,t=Bo.current,di(Bo,a?1&t|2:1&t),n):null;case 23:case 24:return Sl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function la(e){switch(e.tag){case 1:vi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(No(),ui(pi),ui(fi),Ko(),0!=(64&(t=e.flags)))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return Fo(e),null;case 13:return ui(Bo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ui(Bo),null;case 4:return No(),null;case 10:return ro(e),null;case 23:case 24:return Sl(),null;default:return null}}function ca(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function ua(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}qs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ys=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Lo(Ao.current);var s,a=null;switch(n){case"input":o=Q(e,o),r=Q(e,r),a=[];break;case"option":o=oe(e,o),r=oe(e,r),a=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":o=ae(e,o),r=ae(e,r),a=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Vr)}for(d in Ee(n,r),n=null,o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var c=o[d];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(c=null!=o?o[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(null!=u||null!=c))if("style"===d)if(c){for(s in c)!c.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&c[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(d,n)),n=u;else"dangerouslySetInnerHTML"===d?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(a=a||[]).push(d,u)):"children"===d?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(d,""+u):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=u&&"onScroll"===d&&Ar("scroll",e),a||c===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===N?u.toString():(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Ks=function(e,t,n,r){n!==r&&(t.flags|=4)};var da="function"==typeof WeakMap?WeakMap:Map;function ha(e,t,n){(n=uo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ka||(Ka=!0,Xa=r),ua(0,t)},n}function fa(e,t,n){(n=uo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return ua(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ja?Ja=new Set([this]):Ja.add(this),ua(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pa="function"==typeof WeakSet?WeakSet:Set;function ma(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Vl(e,t)}else t.current=null}function ga(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&$r(t.stateNode.containerInfo))}throw Error(s(163))}function va(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Fl(n,e),Dl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&mo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}mo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&jr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(s(163))}function ya(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=xe("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ba(e,t){if(Ei&&"function"==typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(Si,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Fl(t,n);else{r=t;try{i()}catch(e){Vl(r,e)}}n=n.next}while(n!==e)}break;case 1:if(ma(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Vl(t,e)}break;case 5:ma(t);break;case 4:Ta(e,t)}}function wa(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function xa(e){return 5===e.tag||3===e.tag||4===e.tag}function _a(e){e:{for(var t=e.return;null!==t;){if(xa(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||xa(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Sa(e,n,t):Ea(e,n,t)}function Sa(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(Sa(e,t,n),e=e.sibling;null!==e;)Sa(e,t,n),e=e.sibling}function Ea(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ea(e,t,n),e=e.sibling;null!==e;)Ea(e,t,n),e=e.sibling}function Ta(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(s(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var a=e,l=i,c=l;;)if(ba(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(a=n,l=i.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ba(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Ca(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,i),t=Te(e,r),i=0;i<o.length;i+=2){var a=o[i],l=o[i+1];"style"===a?_e(n,l):"dangerouslySetInnerHTML"===a?ve(n,l):"children"===a?ye(n,l):w(n,a,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?se(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?se(n,!!r.multiple,r.defaultValue,!0):se(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ga=ji(),ya(t.child,!0)),void Ma(t);case 19:return void Ma(t);case 23:case 24:return void ya(t,null!==t.memoizedState)}throw Error(s(163))}function Ma(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pa),t.forEach((function(t){var r=Ul.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ka(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Pa=Math.ceil,Aa=x.ReactCurrentDispatcher,Ia=x.ReactCurrentOwner,Ra=0,La=null,Oa=null,Na=0,Da=0,Fa=ci(0),Ba=0,Za=null,Va=0,za=0,Ua=0,ja=0,Ha=null,Ga=0,Wa=1/0;function $a(){Wa=ji()+500}var qa,Ya=null,Ka=!1,Xa=null,Ja=null,Qa=!1,el=null,tl=90,nl=[],rl=[],il=null,ol=0,sl=null,al=-1,ll=0,cl=0,ul=null,dl=!1;function hl(){return 0!=(48&Ra)?ji():-1!==al?al:al=ji()}function fl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Hi()?1:2;if(0===ll&&(ll=Va),0!==Ki.transition){0!==cl&&(cl=null!==Ha?Ha.pendingLanes:0),e=ll;var t=4186112&~cl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Hi(),0!=(4&Ra)&&98===e?e=Vt(12,ll):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function pl(e,t,n){if(50<ol)throw ol=0,sl=null,Error(s(185));if(null===(e=ml(e,t)))return null;jt(e,t,n),e===La&&(Ua|=t,4===Ba&&yl(e,Na));var r=Hi();1===t?0!=(8&Ra)&&0==(48&Ra)?bl(e):(gl(e,n),0===Ra&&($a(),qi())):(0==(4&Ra)||98!==r&&99!==r||(null===il?il=new Set([e]):il.add(e)),gl(e,n)),Ha=e}function ml(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Ht(a),c=1<<l,u=o[l];if(-1===u){if(0==(c&r)||0!=(c&i)){u=t,Ft(c);var d=Dt;o[l]=10<=d?u+250:6<=d?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);a&=~c}if(r=Bt(e,e===La?Na:0),t=Dt,0===r)null!==n&&(n!==Fi&&Mi(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Mi(n)}15===t?(n=bl.bind(null,e),null===Zi?(Zi=[n],Vi=Ci(Ri,Yi)):Zi.push(n),n=Fi):14===t?n=$i(99,bl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),n=$i(n,vl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function vl(e){if(al=-1,cl=ll=0,0!=(48&Ra))throw Error(s(327));var t=e.callbackNode;if(Nl()&&e.callbackNode!==t)return null;var n=Bt(e,e===La?Na:0);if(0===n)return null;var r=n,i=Ra;Ra|=16;var o=Cl();for(La===e&&Na===r||($a(),El(e,r));;)try{Pl();break}catch(t){Tl(e,t)}if(no(),Aa.current=o,Ra=i,null!==Oa?r=0:(La=null,Na=0,r=Ba),0!=(Va&Ua))El(e,0);else if(0!==r){if(2===r&&(Ra|=64,e.hydrate&&(e.hydrate=!1,$r(e.containerInfo)),0!==(n=Zt(e))&&(r=Ml(e,n))),1===r)throw t=Za,El(e,0),yl(e,n),gl(e,ji()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(s(345));case 2:case 5:Rl(e);break;case 3:if(yl(e,n),(62914560&n)===n&&10<(r=Ga+500-ji())){if(0!==Bt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Rl.bind(null,e),r);break}Rl(e);break;case 4:if(yl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-Ht(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=ji()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Pa(n/1960))-n)){e.timeoutHandle=Gr(Rl.bind(null,e),n);break}Rl(e);break;default:throw Error(s(329))}}return gl(e,ji()),e.callbackNode===t?vl.bind(null,e):null}function yl(e,t){for(t&=~ja,t&=~Ua,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function bl(e){if(0!=(48&Ra))throw Error(s(327));if(Nl(),e===La&&0!=(e.expiredLanes&Na)){var t=Na,n=Ml(e,t);0!=(Va&Ua)&&(n=Ml(e,t=Bt(e,t)))}else n=Ml(e,t=Bt(e,0));if(0!==e.tag&&2===n&&(Ra|=64,e.hydrate&&(e.hydrate=!1,$r(e.containerInfo)),0!==(t=Zt(e))&&(n=Ml(e,t))),1===n)throw n=Za,El(e,0),yl(e,t),gl(e,ji()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rl(e),gl(e,ji()),null}function wl(e,t){var n=Ra;Ra|=1;try{return e(t)}finally{0===(Ra=n)&&($a(),qi())}}function xl(e,t){var n=Ra;Ra&=-2,Ra|=8;try{return e(t)}finally{0===(Ra=n)&&($a(),qi())}}function _l(e,t){di(Fa,Da),Da|=t,Va|=t}function Sl(){Da=Fa.current,ui(Fa)}function El(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Oa)for(n=Oa.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&yi();break;case 3:No(),ui(pi),ui(fi),Ko();break;case 5:Fo(r);break;case 4:No();break;case 13:case 19:ui(Bo);break;case 10:ro(r);break;case 23:case 24:Sl()}n=n.return}La=e,Oa=Wl(e.current,null),Na=Da=Va=t,Ba=0,Za=null,ja=Ua=za=0}function Tl(e,t){for(;;){var n=Oa;try{if(no(),Xo.current=Rs,rs){for(var r=es.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}rs=!1}if(Qo=0,ns=ts=es=null,is=!1,Ia.current=null,null===n||null===n.return){Ba=1,Za=t,Oa=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=Na,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l;if(0==(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var d=0!=(1&Bo.current),h=s;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=h.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!d)}}if(f){var g=h.updateQueue;if(null===g){var v=new Set;v.add(c),h.updateQueue=v}else g.add(c);if(0==(2&h.mode)){if(h.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=uo(-1,1);y.tag=2,ho(a,y)}a.lanes|=1;break e}l=void 0,a=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new da,l=new Set,b.set(c,l)):void 0===(l=b.get(c))&&(l=new Set,b.set(c,l)),!l.has(a)){l.add(a);var w=zl.bind(null,o,c,a);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);l=Error(($(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ba&&(Ba=2),l=ca(l,a),h=s;do{switch(h.tag){case 3:o=l,h.flags|=4096,t&=-t,h.lanes|=t,fo(h,ha(0,o,t));break e;case 1:o=l;var x=h.type,_=h.stateNode;if(0==(64&h.flags)&&("function"==typeof x.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===Ja||!Ja.has(_)))){h.flags|=4096,t&=-t,h.lanes|=t,fo(h,fa(h,o,t));break e}}h=h.return}while(null!==h)}Il(n)}catch(e){t=e,Oa===n&&null!==n&&(Oa=n=n.return);continue}break}}function Cl(){var e=Aa.current;return Aa.current=Rs,null===e?Rs:e}function Ml(e,t){var n=Ra;Ra|=16;var r=Cl();for(La===e&&Na===t||El(e,t);;)try{kl();break}catch(t){Tl(e,t)}if(no(),Ra=n,Aa.current=r,null!==Oa)throw Error(s(261));return La=null,Na=0,Ba}function kl(){for(;null!==Oa;)Al(Oa)}function Pl(){for(;null!==Oa&&!ki();)Al(Oa)}function Al(e){var t=qa(e.alternate,e,Da);e.memoizedProps=e.pendingProps,null===t?Il(e):Oa=t,Ia.current=null}function Il(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=aa(n,t,Da)))return void(Oa=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Da)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=la(t)))return n.flags&=2047,void(Oa=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Oa=t);Oa=t=e}while(null!==t);0===Ba&&(Ba=5)}function Rl(e){var t=Hi();return Wi(99,Ll.bind(null,e,t)),null}function Ll(e,t){do{Nl()}while(null!==el);if(0!=(48&Ra))throw Error(s(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<o;){var c=31-Ht(o),u=1<<c;i[c]=0,a[c]=-1,l[c]=-1,o&=~u}if(null!==il&&0==(24&r)&&il.has(e)&&il.delete(e),e===La&&(Oa=La=null,Na=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ra,Ra|=32,Ia.current=null,zr=Yt,vr(a=gr())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,o=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(e){l=null;break e}var d=0,h=-1,f=-1,p=0,m=0,g=a,v=null;t:for(;;){for(var y;g!==l||0!==o&&3!==g.nodeType||(h=d+o),g!==c||0!==u&&3!==g.nodeType||(f=d+u),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===a)break t;if(v===l&&++p===o&&(h=d),v===c&&++m===u&&(f=d),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}l=-1===h||-1===f?null:{start:h,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;Ur={focusedElem:a,selectionRange:l},Yt=!1,ul=null,dl=!1,Ya=r;do{try{Ol()}catch(e){if(null===Ya)throw Error(s(330));Vl(Ya,e),Ya=Ya.nextEffect}}while(null!==Ya);ul=null,Ya=r;do{try{for(a=e;null!==Ya;){var b=Ya.flags;if(16&b&&ye(Ya.stateNode,""),128&b){var w=Ya.alternate;if(null!==w){var x=w.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&b){case 2:_a(Ya),Ya.flags&=-3;break;case 6:_a(Ya),Ya.flags&=-3,Ca(Ya.alternate,Ya);break;case 1024:Ya.flags&=-1025;break;case 1028:Ya.flags&=-1025,Ca(Ya.alternate,Ya);break;case 4:Ca(Ya.alternate,Ya);break;case 8:Ta(a,l=Ya);var _=l.alternate;wa(l),null!==_&&wa(_)}Ya=Ya.nextEffect}}catch(e){if(null===Ya)throw Error(s(330));Vl(Ya,e),Ya=Ya.nextEffect}}while(null!==Ya);if(x=Ur,w=gr(),b=x.focusedElem,a=x.selectionRange,w!==b&&b&&b.ownerDocument&&mr(b.ownerDocument.documentElement,b)){null!==a&&vr(b)&&(w=a.start,void 0===(x=a.end)&&(x=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(x,b.value.length)):(x=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),l=b.textContent.length,_=Math.min(a.start,l),a=void 0===a.end?_:Math.min(a.end,l),!x.extend&&_>a&&(l=a,a=_,_=l),l=pr(b,_),o=pr(b,a),l&&o&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((w=w.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),_>a?(x.addRange(w),x.extend(o.node,o.offset)):(w.setEnd(o.node,o.offset),x.addRange(w))))),w=[];for(x=b;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(x=w[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Yt=!!zr,Ur=zr=null,e.current=n,Ya=r;do{try{for(b=e;null!==Ya;){var S=Ya.flags;if(36&S&&va(b,Ya.alternate,Ya),128&S){w=void 0;var E=Ya.ref;if(null!==E){var T=Ya.stateNode;Ya.tag,w=T,"function"==typeof E?E(w):E.current=w}}Ya=Ya.nextEffect}}catch(e){if(null===Ya)throw Error(s(330));Vl(Ya,e),Ya=Ya.nextEffect}}while(null!==Ya);Ya=null,Bi(),Ra=i}else e.current=n;if(Qa)Qa=!1,el=e,tl=t;else for(Ya=r;null!==Ya;)t=Ya.nextEffect,Ya.nextEffect=null,8&Ya.flags&&((S=Ya).sibling=null,S.stateNode=null),Ya=t;if(0===(r=e.pendingLanes)&&(Ja=null),1===r?e===sl?ol++:(ol=0,sl=e):ol=0,n=n.stateNode,Ei&&"function"==typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(Si,n,void 0,64==(64&n.current.flags))}catch(e){}if(gl(e,ji()),Ka)throw Ka=!1,e=Xa,Xa=null,e;return 0!=(8&Ra)||qi(),null}function Ol(){for(;null!==Ya;){var e=Ya.alternate;dl||null===ul||(0!=(8&Ya.flags)?et(Ya,ul)&&(dl=!0):13===Ya.tag&&ka(e,Ya)&&et(Ya,ul)&&(dl=!0));var t=Ya.flags;0!=(256&t)&&ga(e,Ya),0==(512&t)||Qa||(Qa=!0,$i(97,(function(){return Nl(),null}))),Ya=Ya.nextEffect}}function Nl(){if(90!==tl){var e=97<tl?97:tl;return tl=90,Wi(e,Bl)}return!1}function Dl(e,t){nl.push(t,e),Qa||(Qa=!0,$i(97,(function(){return Nl(),null})))}function Fl(e,t){rl.push(t,e),Qa||(Qa=!0,$i(97,(function(){return Nl(),null})))}function Bl(){if(null===el)return!1;var e=el;if(el=null,0!=(48&Ra))throw Error(s(331));var t=Ra;Ra|=32;var n=rl;rl=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===o)throw Error(s(330));Vl(o,e)}}for(n=nl,nl=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===o)throw Error(s(330));Vl(o,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Ra=t,qi(),!0}function Zl(e,t,n){ho(e,t=ha(0,t=ca(n,t),1)),t=hl(),null!==(e=ml(e,1))&&(jt(e,1,t),gl(e,t))}function Vl(e,t){if(3===e.tag)Zl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Zl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ja||!Ja.has(r))){var i=fa(n,e=ca(t,e),1);if(ho(n,i),i=hl(),null!==(n=ml(n,1)))jt(n,1,i),gl(n,i);else if("function"==typeof r.componentDidCatch&&(null===Ja||!Ja.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function zl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hl(),e.pingedLanes|=e.suspendedLanes&n,La===e&&(Na&n)===n&&(4===Ba||3===Ba&&(62914560&Na)===Na&&500>ji()-Ga?El(e,0):ja|=n),gl(e,t)}function Ul(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Hi()?1:2:(0===ll&&(ll=Va),0===(t=zt(62914560&~ll))&&(t=4194304))),n=hl(),null!==(e=ml(e,t))&&(jt(e,t,n),gl(e,n))}function jl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hl(e,t,n,r){return new jl(e,t,n,r)}function Gl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wl(e,t){var n=e.alternate;return null===n?((n=Hl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $l(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Gl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case E:return ql(n.children,i,o,t);case D:a=8,i|=16;break;case T:a=8,i|=1;break;case C:return(e=Hl(12,n,t,8|i)).elementType=C,e.type=C,e.lanes=o,e;case A:return(e=Hl(13,n,t,i)).type=A,e.elementType=A,e.lanes=o,e;case I:return(e=Hl(19,n,t,i)).elementType=I,e.lanes=o,e;case F:return Yl(n,i,o,t);case B:return(e=Hl(24,n,t,i)).elementType=B,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case M:a=10;break e;case k:a=9;break e;case P:a=11;break e;case R:a=14;break e;case L:a=16,r=null;break e;case O:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Hl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function ql(e,t,n,r){return(e=Hl(7,e,r,t)).lanes=n,e}function Yl(e,t,n,r){return(e=Hl(23,e,r,t)).elementType=F,e.lanes=n,e}function Kl(e,t,n){return(e=Hl(6,e,null,t)).lanes=n,e}function Xl(e,t,n){return(t=Hl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ut(0),this.expirationTimes=Ut(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.mutableSourceEagerHydrationData=null}function Ql(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,o=hl(),a=fl(i);e:if(n){t:{if(Ke(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(vi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var c=n.type;if(vi(c)){n=wi(n,c,l);break e}}n=l}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=uo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ho(i,t),pl(i,a,o),a}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Jl(e,t,null!=n&&!0===n.hydrate),t=Hl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,lo(t),e[ei]=n.current,Rr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function oc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function sc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"==typeof i){var a=i;i=function(){var e=tc(s);a.call(e)}}ec(t,s,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=tc(s);l.call(e)}}xl((function(){ec(t,s,e,i)}))}return tc(s)}function ac(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!oc(t))throw Error(s(200));return Ql(e,t,null,n)}qa=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fs=!0;else{if(0==(n&r)){switch(Fs=!1,t.tag){case 3:$s(t),qo();break;case 5:Do(t);break;case 1:vi(t.type)&&xi(t);break;case 4:Oo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;di(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Js(e,t,n):(di(Bo,1&Bo.current),null!==(t=oa(e,t,n))?t.sibling:null);di(Bo,1&Bo.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return ia(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),di(Bo,Bo.current),r)break;return null;case 23:case 24:return t.lanes=0,Us(e,t,n)}return oa(e,t,n)}Fs=0!=(16384&e.flags)}else Fs=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=gi(t,fi.current),oo(t,n),i=as(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vi(r)){var o=!0;xi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,lo(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&vo(t,r,a,e),i.updater=yo,t.stateNode=i,i._reactInternals=t,_o(t,r,e,n),t=Ws(null,t,r,!0,o,n)}else t.tag=0,Bs(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return Gl(e)?1:0;if(null!=e){if((e=e.$$typeof)===P)return 11;if(e===R)return 14}return 2}(i),e=Xi(i,e),o){case 0:t=Hs(null,t,i,e,n);break e;case 1:t=Gs(null,t,i,e,n);break e;case 11:t=Zs(null,t,i,e,n);break e;case 14:t=Vs(null,t,i,Xi(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Hs(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Gs(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if($s(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,co(e,t),po(t,r,null,n),(r=t.memoizedState.element)===i)qo(),t=oa(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(zo=qr(t.stateNode.containerInfo.firstChild),Vo=t,o=Uo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Yo.push(o);for(n=ko(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Bs(e,t,r,n),qo();t=t.child}return t;case 5:return Do(t),null===e&&Go(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Hr(r,i)?a=null:null!==o&&Hr(r,o)&&(t.flags|=16),js(e,t),Bs(e,t,a,n),t.child;case 6:return null===e&&Go(t),null;case 13:return Js(e,t,n);case 4:return Oo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Mo(t,null,r,n):Bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Zs(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var l=t.type._context;if(di(Ji,l._currentValue),l._currentValue=o,null!==a)if(l=a.value,0===(o=ur(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(a.children===i.children&&!pi.current){t=oa(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&o)){1===l.tag&&((u=uo(-1,n&-n)).tag=2,ho(l,u)),l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),io(l.return,n),c.lanes|=n;break}u=u.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,oo(t,n),r=r(i=so(i,o.unstable_observedBits)),t.flags|=1,Bs(e,t,r,n),t.child;case 14:return o=Xi(i=t.type,t.pendingProps),Vs(e,t,i,o=Xi(i.type,o),r,n);case 15:return zs(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,vi(r)?(e=!0,xi(t)):e=!1,oo(t,n),wo(t,r,i),_o(t,r,i,n),Ws(null,t,r,!0,e,n);case 19:return ia(e,t,n);case 23:case 24:return Us(e,t,n)}throw Error(s(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pl(e,4,hl()),rc(e,4))},nt=function(e){13===e.tag&&(pl(e,67108864,hl()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hl(),n=fl(e);pl(e,n,t),rc(e,n)}},it=function(e,t){return t()},Me=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=oi(r);if(!i)throw Error(s(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&se(e,!!n.multiple,t,!1)}},Le=wl,Oe=function(e,t,n,r,i){var o=Ra;Ra|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Ra=o)&&($a(),qi())}},Ne=function(){0==(49&Ra)&&(function(){if(null!==il){var e=il;il=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gl(e,ji())}))}qi()}(),Nl())},De=function(e,t){var n=Ra;Ra|=2;try{return e(t)}finally{0===(Ra=n)&&($a(),qi())}};var lc={Events:[ri,ii,oi,Ie,Re,Nl,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},uc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{Si=dc.inject(uc),Ei=dc}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lc,t.createPortal=ac,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ra;if(0!=(48&n))return e(t);Ra|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ra=n,qi()}},t.hydrate=function(e,t,n){if(!oc(t))throw Error(s(200));return sc(null,e,t,!0,n)},t.render=function(e,t,n){if(!oc(t))throw Error(s(200));return sc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!oc(e))throw Error(s(40));return!!e._reactRootContainer&&(xl((function(){sc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=wl,t.unstable_createPortal=function(e,t){return ac(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return sc(e,t,n,!1,r)},t.version="17.0.2"},73935:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(64448)},69921:function(e,t){"use strict";var n=60103,r=60106,i=60107,o=60108,s=60114,a=60109,l=60110,c=60112,u=60113,d=60120,h=60115,f=60116,p=60121,m=60122,g=60117,v=60129,y=60131;if("function"==typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),i=b("react.fragment"),o=b("react.strict_mode"),s=b("react.profiler"),a=b("react.provider"),l=b("react.context"),c=b("react.forward_ref"),u=b("react.suspense"),d=b("react.suspense_list"),h=b("react.memo"),f=b("react.lazy"),p=b("react.block"),m=b("react.server.block"),g=b("react.fundamental"),v=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case o:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case h:case a:return e;default:return t}}case r:return t}}}},59864:function(e,t,n){"use strict";n(69921)},73727:function(e,t,n){"use strict";n.r(t),n.d(t,{MemoryRouter:function(){return r.MemoryRouter},Prompt:function(){return r.Prompt},Redirect:function(){return r.Redirect},Route:function(){return r.Route},Router:function(){return r.Router},StaticRouter:function(){return r.StaticRouter},Switch:function(){return r.Switch},generatePath:function(){return r.generatePath},matchPath:function(){return r.matchPath},useHistory:function(){return r.useHistory},useLocation:function(){return r.useLocation},useParams:function(){return r.useParams},useRouteMatch:function(){return r.useRouteMatch},withRouter:function(){return r.withRouter},BrowserRouter:function(){return u},HashRouter:function(){return d},Link:function(){return v},NavLink:function(){return w}});var r=n(5977),i=n(51721),o=n(67294),s=n(90071),a=n(87462),l=n(63366),c=n(2177),u=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,s.lX)(t.props),t}return(0,i.Z)(t,e),t.prototype.render=function(){return o.createElement(r.Router,{history:this.history,children:this.props.children})},t}(o.Component);var d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,s.q_)(t.props),t}return(0,i.Z)(t,e),t.prototype.render=function(){return o.createElement(r.Router,{history:this.history,children:this.props.children})},t}(o.Component);var h=function(e,t){return"function"==typeof e?e(t):e},f=function(e,t){return"string"==typeof e?(0,s.ob)(e,null,null,t):e},p=function(e){return e},m=o.forwardRef;void 0===m&&(m=p);var g=m((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,s=(0,l.Z)(e,["innerRef","navigate","onClick"]),c=s.target,u=(0,a.Z)({},s,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return u.ref=p!==m&&t||n,o.createElement("a",u)}));var v=m((function(e,t){var n=e.component,i=void 0===n?g:n,u=e.replace,d=e.to,v=e.innerRef,y=(0,l.Z)(e,["component","replace","to","innerRef"]);return o.createElement(r.__RouterContext.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=e.history,r=f(h(d,e.location),e.location),l=r?n.createHref(r):"",g=(0,a.Z)({},y,{href:l,navigate:function(){var t=h(d,e.location),r=(0,s.Ep)(e.location)===(0,s.Ep)(f(t));(u||r?n.replace:n.push)(t)}});return p!==m?g.ref=t||v:g.innerRef=v,o.createElement(i,g)}))})),y=function(e){return e},b=o.forwardRef;void 0===b&&(b=y);var w=b((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,s=e.activeClassName,u=void 0===s?"active":s,d=e.activeStyle,p=e.className,m=e.exact,g=e.isActive,w=e.location,x=e.sensitive,_=e.strict,S=e.style,E=e.to,T=e.innerRef,C=(0,l.Z)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.createElement(r.__RouterContext.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=w||e.location,s=f(h(E,n),n),l=s.pathname,M=l&&l.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),k=M?(0,r.matchPath)(n.pathname,{path:M,exact:m,sensitive:x,strict:_}):null,P=!!(g?g(k,n):k),A="function"==typeof p?p(P):p,I="function"==typeof S?S(P):S;P&&(A=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(A,u),I=(0,a.Z)({},I,d));var R=(0,a.Z)({"aria-current":P&&i||null,className:A,style:I,to:s},C);return y!==b?R.ref=t||T:R.innerRef=T,o.createElement(v,R)}))}))},5977:function(e,t,n){"use strict";n.r(t),n.d(t,{MemoryRouter:function(){return E},Prompt:function(){return C},Redirect:function(){return A},Route:function(){return O},Router:function(){return S},StaticRouter:function(){return V},Switch:function(){return z},__HistoryContext:function(){return x},__RouterContext:function(){return _},generatePath:function(){return P},matchPath:function(){return L},useHistory:function(){return H},useLocation:function(){return G},useParams:function(){return W},useRouteMatch:function(){return $},withRouter:function(){return U}});var r=n(51721),i=n(67294),o=n(90071),s=n(45697),a=n.n(s),l=1073741823,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{};function u(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var d=i.createContext||function(e,t){var n,o,s="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",d=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=u(t.props.value),t}(0,r.Z)(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[s]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((o=r)===(s=i)?0!==o||1/o==1/s:o!=o&&s!=s)?n=0:(n="function"==typeof t?t(r,i):l,0!==(n|=0)&&this.emitter.set(e.value,n))}var o,s},i.render=function(){return this.props.children},n}(i.Component);d.childContextTypes=((n={})[s]=a().object.isRequired,n);var h=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}(0,r.Z)(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?l:t},i.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?l:e},i.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},i.getValue=function(){return this.context[s]?this.context[s].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return h.contextTypes=((o={})[s]=a().object,o),{Provider:d,Consumer:h}},h=d,f=n(2177),p=n(87462),m=n(14779),g=n.n(m),v=(n(50663),n(63366)),y=n(8679),b=n.n(y),w=function(e){var t=h();return t.displayName=e,t},x=w("Router-History"),_=w("Router"),S=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}(0,r.Z)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return i.createElement(_.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.createElement(x.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.Component);var E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,o.PP)(t.props),t}return(0,r.Z)(t,e),t.prototype.render=function(){return i.createElement(S,{history:this.history,children:this.props.children})},t}(i.Component);var T=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(i.Component);function C(e){var t=e.message,n=e.when,r=void 0===n||n;return i.createElement(_.Consumer,null,(function(e){if(e||(0,f.Z)(!1),!r||e.staticContext)return null;var n=e.history.block;return i.createElement(T,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var M={},k=0;function P(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(M[e])return M[e];var t=g().compile(e);return k<1e4&&(M[e]=t,k++),t}(e)(t,{pretty:!0})}function A(e){var t=e.computedMatch,n=e.to,r=e.push,s=void 0!==r&&r;return i.createElement(_.Consumer,null,(function(e){e||(0,f.Z)(!1);var r=e.history,a=e.staticContext,l=s?r.push:r.replace,c=(0,o.ob)(t?"string"==typeof n?P(n,t.params):(0,p.Z)({},n,{pathname:P(n.pathname,t.params)}):n);return a?(l(c),null):i.createElement(T,{onMount:function(){l(c)},onUpdate:function(e,t){var n=(0,o.ob)(t.to);(0,o.Hp)(n,(0,p.Z)({},c,{key:n.key}))||l(c)},to:n})}))}var I={},R=0;function L(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,s=n.strict,a=void 0!==s&&s,l=n.sensitive,c=void 0!==l&&l;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=I[n]||(I[n]={});if(r[e])return r[e];var i=[],o={regexp:g()(e,i,t),keys:i};return R<1e4&&(r[e]=o,R++),o}(n,{end:o,strict:a,sensitive:c}),i=r.regexp,s=r.keys,l=i.exec(e);if(!l)return null;var u=l[0],d=l.slice(1),h=e===u;return o&&!h?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:h,params:s.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}var O=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(_.Consumer,null,(function(t){t||(0,f.Z)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?L(n.pathname,e.props):t.match,o=(0,p.Z)({},t,{location:n,match:r}),s=e.props,a=s.children,l=s.component,c=s.render;return Array.isArray(a)&&function(e){return 0===i.Children.count(e)}(a)&&(a=null),i.createElement(_.Provider,{value:o},o.match?a?"function"==typeof a?a(o):a:l?i.createElement(l,o):c?c(o):null:"function"==typeof a?a(o):null)}))},t}(i.Component);function N(e){return"/"===e.charAt(0)?e:"/"+e}function D(e,t){if(!e)return t;var n=N(e);return 0!==t.pathname.indexOf(n)?t:(0,p.Z)({},t,{pathname:t.pathname.substr(n.length)})}function F(e){return"string"==typeof e?e:(0,o.Ep)(e)}function B(e){return function(){(0,f.Z)(!1)}}function Z(){}var V=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return Z},t.handleBlock=function(){return Z},t}(0,r.Z)(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,i=void 0===r?"":r,s=n.context,a=void 0===s?{}:s;a.action=t,a.location=function(e,t){return e?(0,p.Z)({},t,{pathname:N(e)+t.pathname}):t}(i,(0,o.ob)(e)),a.url=F(a.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,s=void 0===r?{}:r,a=e.location,l=void 0===a?"/":a,c=(0,v.Z)(e,["basename","context","location"]),u={createHref:function(e){return N(n+F(e))},action:"POP",location:D(n,(0,o.ob)(l)),push:this.handlePush,replace:this.handleReplace,go:B(),goBack:B(),goForward:B(),listen:this.handleListen,block:this.handleBlock};return i.createElement(S,(0,p.Z)({},c,{history:u,staticContext:s}))},t}(i.Component);var z=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(_.Consumer,null,(function(t){t||(0,f.Z)(!1);var n,r,o=e.props.location||t.location;return i.Children.forEach(e.props.children,(function(e){if(null==r&&i.isValidElement(e)){n=e;var s=e.props.path||e.props.from;r=s?L(o.pathname,(0,p.Z)({},e.props,{path:s})):t.match}})),r?i.cloneElement(n,{location:o,computedMatch:r}):null}))},t}(i.Component);function U(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=(0,v.Z)(t,["wrappedComponentRef"]);return i.createElement(_.Consumer,null,(function(t){return t||(0,f.Z)(!1),i.createElement(e,(0,p.Z)({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,b()(n,e)}var j=i.useContext;function H(){return j(x)}function G(){return j(_).location}function W(){var e=j(_).match;return e?e.params:{}}function $(e){var t=G(),n=j(_).match;return e?L(t.pathname,e):n}},30086:function(e,t){"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function _(e){return x(e)===d}},50663:function(e,t,n){"use strict";n(30086)},72132:function(e,t,n){"use strict";n.r(t),n.d(t,{Bounce:function(){return O},Flip:function(){return F},Icons:function(){return R},Slide:function(){return N},ToastContainer:function(){return B},Zoom:function(){return D},collapseToast:function(){return y},cssTransition:function(){return b},toast:function(){return K},useToast:function(){return M},useToastContainer:function(){return E}});var r=n(67294),i=n(86010),o=n(73935);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function l(e){return"number"==typeof e&&!isNaN(e)}function c(e){return"boolean"==typeof e}function u(e){return"string"==typeof e}function d(e){return"function"==typeof e}function h(e){return u(e)||d(e)?e:null}function f(e){return 0===e||e}var p=!("undefined"==typeof window||!window.document||!window.document.createElement);function m(e){return(0,r.isValidElement)(e)||u(e)||d(e)||l(e)}var g={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},v={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"};function y(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=r+"px",i.transition="all "+n+"ms",requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}function b(e){var t=e.enter,n=e.exit,i=e.appendPosition,o=void 0!==i&&i,s=e.collapse,a=void 0===s||s,l=e.collapseDuration,c=void 0===l?300:l;return function(e){var i=e.children,s=e.position,l=e.preventExitTransition,u=e.done,d=e.nodeRef,h=e.isIn,f=o?t+"--"+s:t,p=o?n+"--"+s:n,m=(0,r.useRef)(),g=(0,r.useRef)(0);function v(e){if(e.target===d.current){var t=d.current;t.removeEventListener("animationend",v),0===g.current&&(t.className=m.current)}}function b(){var e=d.current;e.removeEventListener("animationend",b),a?y(e,u,c):u()}return(0,r.useLayoutEffect)((function(){var e;e=d.current,m.current=e.className,e.className+=" "+f,e.addEventListener("animationend",v)}),[]),(0,r.useEffect)((function(){h||(l?b():function(){g.current=1;var e=d.current;e.className+=" "+p,e.addEventListener("animationend",b)}())}),[h]),r.createElement(r.Fragment,null,i)}}var w={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.list.has(e)&&this.list.get(e).forEach((function(n){var i=setTimeout((function(){n.apply(void 0,r)}),0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(i)}))}};function x(e,t){void 0===t&&(t=!1);var n=(0,r.useRef)(e);return(0,r.useEffect)((function(){t&&(n.current=e)})),n.current}function _(e,t){switch(t.type){case 0:return[].concat(e,[t.toastId]).filter((function(e){return e!==t.staleId}));case 1:return f(t.toastId)?e.filter((function(e){return e!==t.toastId})):[]}}var S=["delay","staleId"];function E(e){var t=(0,r.useReducer)((function(e){return e+1}),0)[1],n=(0,r.useReducer)(_,[]),i=n[0],o=n[1],s=(0,r.useRef)(null),p=x(0),g=x([]),v=x({}),y=x({toastKey:1,displayedToast:0,props:e,containerId:null,isToastActive:b,getToast:function(e){return v[e]||null}});function b(e){return-1!==i.indexOf(e)}function E(e){var t=e.containerId;!y.props.limit||t&&y.containerId!==t||(p-=g.length,g=[])}function T(e){o({type:1,toastId:e})}function C(){var e=g.shift();k(e.toastContent,e.toastProps,e.staleId)}function M(e,n){var i=n.delay,o=n.staleId,b=a(n,S);if(m(e)&&!function(e){var t=e.containerId,n=e.toastId,r=e.updateId;return!!(!s.current||y.props.enableMultiContainer&&t!==y.props.containerId||v[n]&&null==r)}(b)){var w=b.toastId,x=b.updateId,_=b.data,E=y.props,M=function(){return T(w)},P=null==b.updateId;P&&p++;var A,I,R={toastId:w,updateId:x,isLoading:b.isLoading,theme:b.theme||E.theme,icon:b.icon||E.icon,isIn:!1,key:b.key||y.toastKey++,type:b.type,closeToast:M,closeButton:b.closeButton,rtl:E.rtl,position:b.position||E.position,transition:b.transition||E.transition,className:h(b.className||E.toastClassName),bodyClassName:h(b.bodyClassName||E.bodyClassName),style:b.style||E.toastStyle,bodyStyle:b.bodyStyle||E.bodyStyle,onClick:b.onClick||E.onClick,pauseOnHover:c(b.pauseOnHover)?b.pauseOnHover:E.pauseOnHover,pauseOnFocusLoss:c(b.pauseOnFocusLoss)?b.pauseOnFocusLoss:E.pauseOnFocusLoss,draggable:c(b.draggable)?b.draggable:E.draggable,draggablePercent:l(b.draggablePercent)?b.draggablePercent:E.draggablePercent,draggableDirection:b.draggableDirection||E.draggableDirection,closeOnClick:c(b.closeOnClick)?b.closeOnClick:E.closeOnClick,progressClassName:h(b.progressClassName||E.progressClassName),progressStyle:b.progressStyle||E.progressStyle,autoClose:!b.isLoading&&(A=b.autoClose,I=E.autoClose,!1===A||l(A)&&A>0?A:I),hideProgressBar:c(b.hideProgressBar)?b.hideProgressBar:E.hideProgressBar,progress:b.progress,role:u(b.role)?b.role:E.role,deleteToast:function(){!function(e){delete v[e];var n=g.length;(p=f(e)?p-1:p-y.displayedToast)<0&&(p=0);if(n>0){var r=f(e)?1:y.props.limit;if(1===n||1===r)y.displayedToast++,C();else{var i=r>n?n:r;y.displayedToast=i;for(var o=0;o<i;o++)C()}}else t()}(w)}};d(b.onOpen)&&(R.onOpen=b.onOpen),d(b.onClose)&&(R.onClose=b.onClose),"y"===R.draggableDirection&&80===R.draggablePercent&&(R.draggablePercent*=1.5);var L=E.closeButton;!1===b.closeButton||m(b.closeButton)?L=b.closeButton:!0===b.closeButton&&(L=!m(E.closeButton)||E.closeButton),R.closeButton=L;var O=e;(0,r.isValidElement)(e)&&!u(e.type)?O=(0,r.cloneElement)(e,{closeToast:M,toastProps:R,data:_}):d(e)&&(O=e({closeToast:M,toastProps:R,data:_})),E.limit&&E.limit>0&&p>E.limit&&P?g.push({toastContent:O,toastProps:R,staleId:o}):l(i)&&i>0?setTimeout((function(){k(O,R,o)}),i):k(O,R,o)}}function k(e,t,n){var r=t.toastId;n&&delete v[n],v[r]={content:e,props:t},o({type:0,toastId:r,staleId:n})}return(0,r.useEffect)((function(){return y.containerId=e.containerId,w.cancelEmit(3).on(0,M).on(1,(function(e){return s.current&&T(e)})).on(5,E).emit(2,y),function(){return w.emit(3,y)}}),[]),(0,r.useEffect)((function(){y.isToastActive=b,y.displayedToast=i.length,w.emit(4,i.length,e.containerId)}),[i]),(0,r.useEffect)((function(){y.props=e})),{getToastToRender:function(t){for(var n={},r=e.newestOnTop?Object.keys(v).reverse():Object.keys(v),i=0;i<r.length;i++){var o=v[r[i]],s=o.props.position;n[s]||(n[s]=[]),n[s].push(o)}return Object.keys(n).map((function(e){return t(e,n[e])}))},collection:v,containerRef:s,isToastActive:b}}function T(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function C(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function M(e){var t=(0,r.useState)(!0),n=t[0],i=t[1],o=(0,r.useState)(!1),s=o[0],a=o[1],l=(0,r.useRef)(null),c=x({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null}),u=x(e,!0),h=e.autoClose,f=e.pauseOnHover,p=e.closeToast,m=e.onClick,g=e.closeOnClick;function v(t){if(e.draggable){var n=l.current;c.canCloseOnClick=!0,c.canDrag=!0,c.boundingRect=n.getBoundingClientRect(),n.style.transition="",c.x=T(t.nativeEvent),c.y=C(t.nativeEvent),"x"===e.draggableDirection?(c.start=c.x,c.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(c.start=c.y,c.removalDistance=n.offsetHeight*(e.draggablePercent/100))}}function y(){if(c.boundingRect){var t=c.boundingRect,n=t.top,r=t.bottom,i=t.left,o=t.right;e.pauseOnHover&&c.x>=i&&c.x<=o&&c.y>=n&&c.y<=r?w():b()}}function b(){i(!0)}function w(){i(!1)}function _(t){if(c.canDrag){t.preventDefault();var r=l.current;n&&w(),c.x=T(t),c.y=C(t),"x"===e.draggableDirection?c.delta=c.x-c.start:c.delta=c.y-c.start,c.start!==c.x&&(c.canCloseOnClick=!1),r.style.transform="translate"+e.draggableDirection+"("+c.delta+"px)",r.style.opacity=""+(1-Math.abs(c.delta/c.removalDistance))}}function S(){var t=l.current;if(c.canDrag){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance)return a(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}(0,r.useEffect)((function(){return d(e.onOpen)&&e.onOpen((0,r.isValidElement)(e.children)&&e.children.props),function(){d(u.onClose)&&u.onClose((0,r.isValidElement)(u.children)&&u.children.props)}}),[]),(0,r.useEffect)((function(){return e.draggable&&(document.addEventListener("mousemove",_),document.addEventListener("mouseup",S),document.addEventListener("touchmove",_),document.addEventListener("touchend",S)),function(){e.draggable&&(document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",S),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",S))}}),[e.draggable]),(0,r.useEffect)((function(){return e.pauseOnFocusLoss&&function(){document.hasFocus()||w();window.addEventListener("focus",b),window.addEventListener("blur",w)}(),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",b),window.removeEventListener("blur",w))}}),[e.pauseOnFocusLoss]);var E={onMouseDown:v,onTouchStart:v,onMouseUp:y,onTouchEnd:y};return h&&f&&(E.onMouseEnter=w,E.onMouseLeave=b),g&&(E.onClick=function(e){m&&m(e),c.canCloseOnClick&&p()}),{playToast:b,pauseToast:w,isRunning:n,preventExitTransition:s,toastRef:l,eventHandlers:E}}function k(e){var t=e.closeToast,n=e.theme,i=e.ariaLabel,o=void 0===i?"close":i;return(0,r.createElement)("button",{className:"Toastify__close-button Toastify__close-button--"+n,type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":o},(0,r.createElement)("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},(0,r.createElement)("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function P(e){var t,n,o=e.delay,a=e.isRunning,l=e.closeToast,c=e.type,u=e.hide,h=e.className,f=e.style,p=e.controlledProgress,m=e.progress,g=e.rtl,v=e.isIn,y=e.theme,b=s({},f,{animationDuration:o+"ms",animationPlayState:a?"running":"paused",opacity:u?0:1});p&&(b.transform="scaleX("+m+")");var w=(0,i.Z)("Toastify__progress-bar",p?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--"+y,"Toastify__progress-bar--"+c,((t={})["Toastify__progress-bar--rtl"]=g,t)),x=d(h)?h({rtl:g,type:c,defaultClassName:w}):(0,i.Z)(w,h),_=((n={})[p&&m>=1?"onTransitionEnd":"onAnimationEnd"]=p&&m<1?null:function(){v&&l()},n);return(0,r.createElement)("div",Object.assign({role:"progressbar","aria-hidden":u?"true":"false","aria-label":"notification timer",className:x,style:b},_))}P.defaultProps={type:v.DEFAULT,hide:!1};var A=["theme","type"],I=function(e){var t=e.theme,n=e.type,i=a(e,A);return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-"+n+")"},i))};var R={info:function(e){return r.createElement(I,Object.assign({},e),r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return r.createElement(I,Object.assign({},e),r.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return r.createElement(I,Object.assign({},e),r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return r.createElement(I,Object.assign({},e),r.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return r.createElement("div",{className:"Toastify__spinner"})}},L=function(e){var t,n,o=M(e),s=o.isRunning,a=o.preventExitTransition,l=o.toastRef,c=o.eventHandlers,h=e.closeButton,f=e.children,p=e.autoClose,m=e.onClick,g=e.type,v=e.hideProgressBar,y=e.closeToast,b=e.transition,w=e.position,x=e.className,_=e.style,S=e.bodyClassName,E=e.bodyStyle,T=e.progressClassName,C=e.progressStyle,k=e.updateId,A=e.role,I=e.progress,L=e.rtl,O=e.toastId,N=e.deleteToast,D=e.isIn,F=e.isLoading,B=e.icon,Z=e.theme,V=(0,i.Z)("Toastify__toast","Toastify__toast-theme--"+Z,"Toastify__toast--"+g,((t={})["Toastify__toast--rtl"]=L,t)),z=d(x)?x({rtl:L,position:w,type:g,defaultClassName:V}):(0,i.Z)(V,x),U=!!I,j=R[g],H={theme:Z,type:g},G=j&&j(H);return!1===B?G=void 0:d(B)?G=B(H):(0,r.isValidElement)(B)?G=(0,r.cloneElement)(B,H):u(B)?G=B:F&&(G=R.spinner()),(0,r.createElement)(b,{isIn:D,done:N,position:w,preventExitTransition:a,nodeRef:l},(0,r.createElement)("div",Object.assign({id:O,onClick:m,className:z},c,{style:_,ref:l}),(0,r.createElement)("div",Object.assign({},D&&{role:A},{className:d(S)?S({type:g}):(0,i.Z)("Toastify__toast-body",S),style:E}),G&&(0,r.createElement)("div",{className:(0,i.Z)("Toastify__toast-icon",(n={},n["Toastify--animate-icon Toastify__zoom-enter"]=!F,n))},G),(0,r.createElement)("div",null,f)),function(e){if(e){var t={closeToast:y,type:g,theme:Z};return d(e)?e(t):(0,r.isValidElement)(e)?(0,r.cloneElement)(e,t):void 0}}(h),(p||U)&&(0,r.createElement)(P,Object.assign({},k&&!U?{key:"pb-"+k}:{},{rtl:L,theme:Z,delay:p,isRunning:s,isIn:D,closeToast:y,hide:v,type:g,style:C,className:T,controlledProgress:U,progress:I}))))},O=b({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),N=b({enter:"Toastify--animate Toastify__slide-enter",exit:"Toastify--animate Toastify__slide-exit",appendPosition:!0}),D=b({enter:"Toastify--animate Toastify__zoom-enter",exit:"Toastify--animate Toastify__zoom-exit"}),F=b({enter:"Toastify--animate Toastify__flip-enter",exit:"Toastify--animate Toastify__flip-exit"}),B=function(e){var t=E(e),n=t.getToastToRender,o=t.containerRef,a=t.isToastActive,l=e.className,c=e.style,u=e.rtl,f=e.containerId;function p(e){var t,n=(0,i.Z)("Toastify__toast-container","Toastify__toast-container--"+e,((t={})["Toastify__toast-container--rtl"]=u,t));return d(l)?l({position:e,rtl:u,defaultClassName:n}):(0,i.Z)(n,h(l))}return(0,r.createElement)("div",{ref:o,className:"Toastify",id:f},n((function(e,t){var n=0===t.length?s({},c,{pointerEvents:"none"}):s({},c);return(0,r.createElement)("div",{className:p(e),style:n,key:"container-"+e},t.map((function(e){var t=e.content,n=e.props;return(0,r.createElement)(L,Object.assign({},n,{isIn:a(n.toastId),key:"toast-"+n.key,closeButton:!0===n.closeButton?k:n.closeButton}),t)})))})))};B.defaultProps={position:g.TOP_RIGHT,transition:O,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:k,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var Z,V,z,U=new Map,j=[],H=!1;function G(){return Math.random().toString(36).substr(2,9)}function W(e){return e&&(u(e.toastId)||l(e.toastId))?e.toastId:G()}function $(e,t){return U.size>0?w.emit(0,e,t):(j.push({content:e,options:t}),H&&p&&(H=!1,V=document.createElement("div"),document.body.appendChild(V),(0,o.render)((0,r.createElement)(B,Object.assign({},z)),V))),t.toastId}function q(e,t){return s({},t,{type:t&&t.type||e,toastId:W(t)})}var Y=function(e){return function(t,n){return $(t,q(e,n))}},K=function(e,t){return $(e,q(v.DEFAULT,t))};K.loading=function(e,t){return $(e,q(v.DEFAULT,s({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},K.promise=function(e,t,n){var r=t.pending,i=t.error,o=t.success,a=u(r)?K.loading(r,n):K.loading(r.render,s({},n,r)),l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=function(e,t,r){var i=u(t)?{render:t}:t;return K.update(a,s({type:e},l,n,i,{data:r})),r},h=d(e)?e():e;return h.then((function(e){return c("success",o,e)})).catch((function(e){return c("error",i,e)})),h},K.success=Y(v.SUCCESS),K.info=Y(v.INFO),K.error=Y(v.ERROR),K.warning=Y(v.WARNING),K.warn=K.warning,K.dark=function(e,t){return $(e,q(v.DEFAULT,s({theme:"dark"},t)))},K.dismiss=function(e){return w.emit(1,e)},K.clearWaitingQueue=function(e){return void 0===e&&(e={}),w.emit(5,e)},K.isActive=function(e){var t=!1;return U.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},K.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=U.get(n||Z);return r?r.getToast(e):null}(e,t);if(n){var r=n.props,i=n.content,o=s({},r,t,{toastId:t.toastId||e,updateId:G()});o.toastId!==e&&(o.staleId=e);var a=o.render||i;delete o.render,$(a,o)}}),0)},K.done=function(e){K.update(e,{progress:1})},K.onChange=function(e){return d(e)&&w.on(4,e),function(){d(e)&&w.off(4,e)}},K.configure=function(e){void 0===e&&(e={}),H=!0,z=e},K.POSITION=g,K.TYPE=v,w.on(2,(function(e){Z=e.containerId||e,U.set(Z,e),j.forEach((function(e){w.emit(0,e.content,e.options)})),j=[]})).on(3,(function(e){U.delete(e.containerId||e),0===U.size&&w.off(0).off(1).off(5),p&&V&&document.body.removeChild(V)}))},12666:function(e,t,n){"use strict";n.d(t,{ZP:function(){return g}});var r=n(63366),i=n(51721),o=n(67294),s=n(73935),a=!1,l=n(220),c="unmounted",u="exited",d="entering",h="entered",f="exiting",p=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=u,r.appearStatus=d):i=h:i=t.unmountOnExit||t.mountOnEnter?c:u,r.state={status:i},r.nextCallback=null,r}(0,i.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===c?{status:u}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==d&&n!==h&&(t=d):n!==d&&n!==h||(t=f)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===d?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===u&&this.setState({status:c})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],l=i[1],c=this.getTimeouts(),u=r?c.appear:c.enter;!e&&!n||a?this.safeSetState({status:h},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,l),this.safeSetState({status:d},(function(){t.props.onEntering(o,l),t.onTransitionEnd(u,(function(){t.safeSetState({status:h},(function(){t.props.onEntered(o,l)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!a?(this.props.onExit(r),this.safeSetState({status:f},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:u},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:u},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===c)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(l.Z.Provider,{value:null},"function"==typeof n?n(e,i):o.cloneElement(o.Children.only(n),i))},t}(o.Component);function m(){}p.contextType=l.Z,p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},p.UNMOUNTED=c,p.EXITED=u,p.ENTERING=d,p.ENTERED=h,p.EXITING=f;var g=p},220:function(e,t,n){"use strict";var r=n(67294);t.Z=r.createContext(null)},75251:function(e,t,n){"use strict";n(27418);var r=n(67294),i=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.jsx=c,t.jsxs=c},72408:function(e,t,n){"use strict";var r=n(27418),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var s=60109,a=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"==typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),o=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),s=d("react.provider"),a=d("react.context"),l=d("react.forward_ref"),t.Suspense=d("react.suspense"),c=d("react.memo"),u=d("react.lazy")}var h="function"==typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,r(b,g.prototype),b.isPureReactComponent=!0;var w={current:null},x=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,r)&&!_.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:i,type:e,key:s,ref:a,props:o,_owner:w.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,n,r,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case o:l=!0}}if(l)return s=s(l=e),e=""===r?"."+C(l,0):r,Array.isArray(s)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),M(s,t,n,"",(function(e){return e}))):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=r+C(a=e[c],c);l+=M(a,t,n,u,s)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=M(a=a.value,t,n,u=r+C(a,c++),s);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function k(e,t,n){if(null==e)return e;var r=[],i=0;return M(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function I(){var e=A.current;if(null===e)throw Error(f(321));return e}var R={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null==e)throw Error(f(267,e));var o=r({},e.props),s=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=w.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)x.call(t,u)&&!_.hasOwnProperty(u)&&(o[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];o.children=c}return{$$typeof:i,type:e.type,key:s,ref:a,props:o,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return I().useCallback(e,t)},t.useContext=function(e,t){return I().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return I().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return I().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return I().useLayoutEffect(e,t)},t.useMemo=function(e,t){return I().useMemo(e,t)},t.useReducer=function(e,t,n){return I().useReducer(e,t,n)},t.useRef=function(e){return I().useRef(e)},t.useState=function(e){return I().useState(e)},t.version="17.0.2"},67294:function(e,t,n){"use strict";e.exports=n(72408)},85893:function(e,t,n){"use strict";e.exports=n(75251)},60053:function(e,t){"use strict";var n,r,i,o;if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,u=null,d=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(d,0),e}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(d,0))},r=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,v=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,x=w.port2;w.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();b=e+y;try{g(!0,e)?x.postMessage(null):(m=!1,g=null)}catch(e){throw x.postMessage(null),e}}else m=!1},n=function(e){g=e,m||(m=!0,x.postMessage(null))},r=function(e,n){v=h((function(){e(t.unstable_now())}),n)},i=function(){f(v),v=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<T(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,s=e[o],a=o+1,l=e[a];if(void 0!==s&&0>T(s,n))void 0!==l&&0>T(l,s)?(e[r]=l,e[a]=n,r=a):(e[r]=s,e[o]=n,r=o);else{if(!(void 0!==l&&0>T(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],M=[],k=1,P=null,A=3,I=!1,R=!1,L=!1;function O(e){for(var t=S(M);null!==t;){if(null===t.callback)E(M);else{if(!(t.startTime<=e))break;E(M),t.sortIndex=t.expirationTime,_(C,t)}t=S(M)}}function N(e){if(L=!1,O(e),!R)if(null!==S(C))R=!0,n(D);else{var t=S(M);null!==t&&r(N,t.startTime-e)}}function D(e,n){R=!1,L&&(L=!1,i()),I=!0;var o=A;try{for(O(n),P=S(C);null!==P&&(!(P.expirationTime>n)||e&&!t.unstable_shouldYield());){var s=P.callback;if("function"==typeof s){P.callback=null,A=P.priorityLevel;var a=s(P.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?P.callback=a:P===S(C)&&E(C),O(n)}else E(C);P=S(C)}if(null!==P)var l=!0;else{var c=S(M);null!==c&&r(N,c.startTime-n),l=!1}return l}finally{P=null,A=o,I=!1}}var F=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||I||(R=!0,n(D))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,o,s){var a=t.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:k++,callback:o,priorityLevel:e,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>a?(e.sortIndex=s,_(M,e),null===S(C)&&e===S(M)&&(L?i():L=!0,r(N,s-a))):(e.sortIndex=l,_(C,e),R||I||(R=!0,n(D))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},63840:function(e,t,n){"use strict";e.exports=n(60053)},67719:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;const r=n(22986);function i(e,t){if(!e)return e;if(r.isBinary(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=i(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=i(e[r],t));return n}return e}function o(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=o(e[n],t);else if("object"==typeof e)for(const n in e)e.hasOwnProperty(n)&&(e[n]=o(e[n],t));return e}t.deconstructPacket=function(e){const t=[],n=e.data,r=e;return r.data=i(n,t),r.attachments=t.length,{packet:r,buffers:t}},t.reconstructPacket=function(e,t){return e.data=o(e.data,t),e.attachments=void 0,e}},95485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const r=n(98767),i=n(67719),o=n(22986),s=n(11227)("socket.io-parser");var a;t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(a=t.PacketType||(t.PacketType={}));t.Encoder=class{encode(e){return s("encoding packet %j",e),e.type!==a.EVENT&&e.type!==a.ACK||!o.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==a.BINARY_EVENT&&e.type!==a.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),s("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=i.deconstructPacket(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}};class l extends r{constructor(){super()}add(e){let t;if("string"==typeof e)t=this.decodeString(e),t.type===a.BINARY_EVENT||t.type===a.BINARY_ACK?(this.reconstructor=new c(t),0===t.attachments&&super.emit("decoded",t)):super.emit("decoded",t);else{if(!o.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emit("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===a[n.type])throw new Error("unknown packet type "+n.type);if(n.type===a.BINARY_EVENT||n.type===a.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!l.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return s("decoded %s as %j",e,n),n}static isPayloadValid(e,t){switch(e){case a.CONNECT:return"object"==typeof t;case a.DISCONNECT:return void 0===t;case a.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}t.Decoder=l;class c{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},22986:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;const n="function"==typeof ArrayBuffer,r=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function s(e){return n&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||i&&e instanceof Blob||o&&e instanceof File}t.isBinary=s,t.hasBinary=function e(t,n){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(e(t[n]))return!0;return!1}if(s(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return!0;return!1}},55202:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(35982),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},60373:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(14245),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},89727:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(5071),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},17026:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(89814),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},56415:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(52401),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},14734:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(23682),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},64914:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(49087),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},23906:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(45718),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},22296:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(42409),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},98248:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(82529),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},78777:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(67818),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},52140:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(27119),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},18361:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(58783),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},21793:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(36598),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},98667:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(32508),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},86046:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(88756),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},57999:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(39947),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},68377:function(e,t,n){"use strict";n.r(t);var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),l=n.n(a),c=n(3565),u=n.n(c),d=n(19216),h=n.n(d),f=n(44589),p=n.n(f),m=n(48662),g={};g.styleTagTransform=p(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=h();i()(m.Z,g);t.default=m.Z&&m.Z.locals?m.Z.locals:void 0},93379:function(e){"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},s=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],u=o[c]||0,d="".concat(c," ").concat(u);o[c]=u+1;var h=n(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(f);else{var p=i(f,r);r.byIndex=a,t.splice(a,0,{identifier:d,updater:p,references:1})}s.push(d)}return s}function i(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var a=n(o[s]);t[a].references--}for(var l=r(e,i),c=0;c<o.length;c++){var u=n(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=l}}},90569:function(e){"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},19216:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:function(e,t,n){"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:function(e){"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},44589:function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2212:function(e,t,n){"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:function(){return ne},AddEquation:function(){return T},AddOperation:function(){return X},AdditiveAnimationBlendMode:function(){return Gt},AdditiveBlending:function(){return x},AlphaFormat:function(){return De},AlwaysDepth:function(){return U},AlwaysStencilFunc:function(){return vn},AmbientLight:function(){return rh},AmbientLightProbe:function(){return wh},AnimationClip:function(){return kd},AnimationLoader:function(){return Dd},AnimationMixer:function(){return Qh},AnimationObjectGroup:function(){return Xh},AnimationUtils:function(){return md},ArcCurve:function(){return Yc},ArrayCamera:function(){return yl},ArrowHelper:function(){return jf},Audio:function(){return Rh},AudioAnalyser:function(){return Bh},AudioContext:function(){return vh},AudioListener:function(){return Ih},AudioLoader:function(){return yh},AxesHelper:function(){return Hf},AxisHelper:function(){return bp},BackSide:function(){return m},BasicDepthPacking:function(){return Xt},BasicShadowMap:function(){return u},BinaryTextureLoader:function(){return Ep},Bone:function(){return ic},BooleanKeyframeTrack:function(){return xd},BoundingBoxHelper:function(){return wp},Box2:function(){return uf},Box3:function(){return ar},Box3Helper:function(){return Bf},BoxBufferGeometry:function(){return mo},BoxGeometry:function(){return mo},BoxHelper:function(){return Ff},BufferAttribute:function(){return Ai},BufferGeometry:function(){return qi},BufferGeometryLoader:function(){return uh},ByteType:function(){return Te},Cache:function(){return Ad},Camera:function(){return wo},CameraHelper:function(){return Of},CanvasRenderer:function(){return Cp},CanvasTexture:function(){return Dc},CatmullRomCurve3:function(){return tu},CineonToneMapping:function(){return te},CircleBufferGeometry:function(){return Fc},CircleGeometry:function(){return Fc},ClampToEdgeWrapping:function(){return he},Clock:function(){return Th},Color:function(){return Ci},ColorKeyframeTrack:function(){return _d},CompressedTexture:function(){return Nc},CompressedTextureLoader:function(){return Fd},ConeBufferGeometry:function(){return Zc},ConeGeometry:function(){return Zc},CubeCamera:function(){return So},CubeReflectionMapping:function(){return oe},CubeRefractionMapping:function(){return se},CubeTexture:function(){return Eo},CubeTextureLoader:function(){return Zd},CubeUVReflectionMapping:function(){return ce},CubeUVRefractionMapping:function(){return ue},CubicBezierCurve:function(){return ou},CubicBezierCurve3:function(){return su},CubicInterpolant:function(){return vd},CullFaceBack:function(){return a},CullFaceFront:function(){return l},CullFaceFrontBack:function(){return c},CullFaceNone:function(){return s},Curve:function(){return $c},CurvePath:function(){return fu},CustomBlending:function(){return E},CustomToneMapping:function(){return re},CylinderBufferGeometry:function(){return Bc},CylinderGeometry:function(){return Bc},Cylindrical:function(){return lf},DataTexture:function(){return oc},DataTexture2DArray:function(){return ws},DataTexture3D:function(){return Cs},DataTextureLoader:function(){return Vd},DataUtils:function(){return qf},DecrementStencilOp:function(){return sn},DecrementWrapStencilOp:function(){return ln},DefaultLoadingManager:function(){return Rd},DepthFormat:function(){return ze},DepthStencilFormat:function(){return Ue},DepthTexture:function(){return _l},DirectionalLight:function(){return nh},DirectionalLightHelper:function(){return If},DiscreteInterpolant:function(){return bd},DodecahedronBufferGeometry:function(){return zc},DodecahedronGeometry:function(){return zc},DoubleSide:function(){return g},DstAlphaFactor:function(){return D},DstColorFactor:function(){return B},DynamicBufferAttribute:function(){return cp},DynamicCopyUsage:function(){return Tn},DynamicDrawUsage:function(){return bn},DynamicReadUsage:function(){return _n},EdgesGeometry:function(){return Wc},EdgesHelper:function(){return xp},EllipseCurve:function(){return qc},EqualDepth:function(){return G},EqualStencilFunc:function(){return hn},EquirectangularReflectionMapping:function(){return ae},EquirectangularRefractionMapping:function(){return le},Euler:function(){return Gr},EventDispatcher:function(){return Pn},ExtrudeBufferGeometry:function(){return Hu},ExtrudeGeometry:function(){return Hu},FaceColors:function(){return Jf},FileLoader:function(){return Nd},FlatShading:function(){return v},Float16BufferAttribute:function(){return Bi},Float32Attribute:function(){return vp},Float32BufferAttribute:function(){return Zi},Float64Attribute:function(){return yp},Float64BufferAttribute:function(){return Vi},FloatType:function(){return Ae},Fog:function(){return kl},FogExp2:function(){return Ml},Font:function(){return Lp},FontLoader:function(){return Rp},FramebufferTexture:function(){return Oc},FrontSide:function(){return p},Frustum:function(){return Ro},GLBufferAttribute:function(){return nf},GLSL1:function(){return Mn},GLSL3:function(){return kn},GreaterDepth:function(){return $},GreaterEqualDepth:function(){return W},GreaterEqualStencilFunc:function(){return gn},GreaterStencilFunc:function(){return pn},GridHelper:function(){return Cf},Group:function(){return bl},HalfFloatType:function(){return Ie},HemisphereLight:function(){return jd},HemisphereLightHelper:function(){return Tf},HemisphereLightProbe:function(){return bh},IcosahedronBufferGeometry:function(){return Wu},IcosahedronGeometry:function(){return Wu},ImageBitmapLoader:function(){return mh},ImageLoader:function(){return Bd},ImageUtils:function(){return Yn},ImmediateRenderObject:function(){return Op},IncrementStencilOp:function(){return on},IncrementWrapStencilOp:function(){return an},InstancedBufferAttribute:function(){return cc},InstancedBufferGeometry:function(){return ch},InstancedInterleavedBuffer:function(){return tf},InstancedMesh:function(){return pc},Int16Attribute:function(){return fp},Int16BufferAttribute:function(){return Oi},Int32Attribute:function(){return mp},Int32BufferAttribute:function(){return Di},Int8Attribute:function(){return up},Int8BufferAttribute:function(){return Ii},IntType:function(){return ke},InterleavedBuffer:function(){return Al},InterleavedBufferAttribute:function(){return Rl},Interpolant:function(){return gd},InterpolateDiscrete:function(){return Bt},InterpolateLinear:function(){return Zt},InterpolateSmooth:function(){return Vt},InvertStencilOp:function(){return cn},JSONLoader:function(){return Mp},KeepStencilOp:function(){return nn},KeyframeTrack:function(){return wd},LOD:function(){return Xl},LatheBufferGeometry:function(){return $u},LatheGeometry:function(){return $u},Layers:function(){return Wr},LensFlare:function(){return Pp},LessDepth:function(){return j},LessEqualDepth:function(){return H},LessEqualStencilFunc:function(){return fn},LessStencilFunc:function(){return dn},Light:function(){return Ud},LightProbe:function(){return sh},Line:function(){return xc},Line3:function(){return ff},LineBasicMaterial:function(){return mc},LineCurve:function(){return au},LineCurve3:function(){return lu},LineDashedMaterial:function(){return fd},LineLoop:function(){return Tc},LinePieces:function(){return Kf},LineSegments:function(){return Ec},LineStrip:function(){return Yf},LinearEncoding:function(){return Yt},LinearFilter:function(){return be},LinearInterpolant:function(){return yd},LinearMipMapLinearFilter:function(){return Se},LinearMipMapNearestFilter:function(){return xe},LinearMipmapLinearFilter:function(){return _e},LinearMipmapNearestFilter:function(){return we},LinearToneMapping:function(){return Q},Loader:function(){return Ld},LoaderUtils:function(){return lh},LoadingManager:function(){return Id},LoopOnce:function(){return Nt},LoopPingPong:function(){return Ft},LoopRepeat:function(){return Dt},LuminanceAlphaFormat:function(){return Ve},LuminanceFormat:function(){return Ze},MOUSE:function(){return i},Material:function(){return bi},MaterialLoader:function(){return ah},Math:function(){return zn},MathUtils:function(){return zn},Matrix3:function(){return jn},Matrix4:function(){return Nr},MaxEquation:function(){return P},Mesh:function(){return fo},MeshBasicMaterial:function(){return Mi},MeshDepthMaterial:function(){return hl},MeshDistanceMaterial:function(){return fl},MeshFaceMaterial:function(){return ep},MeshLambertMaterial:function(){return dd},MeshMatcapMaterial:function(){return hd},MeshNormalMaterial:function(){return ud},MeshPhongMaterial:function(){return ld},MeshPhysicalMaterial:function(){return ad},MeshStandardMaterial:function(){return sd},MeshToonMaterial:function(){return cd},MinEquation:function(){return k},MirroredRepeatWrapping:function(){return fe},MixOperation:function(){return K},MultiMaterial:function(){return tp},MultiplyBlending:function(){return S},MultiplyOperation:function(){return Y},NearestFilter:function(){return pe},NearestMipMapLinearFilter:function(){return ye},NearestMipMapNearestFilter:function(){return ge},NearestMipmapLinearFilter:function(){return ve},NearestMipmapNearestFilter:function(){return me},NeverDepth:function(){return z},NeverStencilFunc:function(){return un},NoBlending:function(){return b},NoColors:function(){return Xf},NoToneMapping:function(){return J},NormalAnimationBlendMode:function(){return Ht},NormalBlending:function(){return w},NotEqualDepth:function(){return q},NotEqualStencilFunc:function(){return mn},NumberKeyframeTrack:function(){return Sd},Object3D:function(){return si},ObjectLoader:function(){return dh},ObjectSpaceNormalMap:function(){return en},OctahedronBufferGeometry:function(){return qu},OctahedronGeometry:function(){return qu},OneFactor:function(){return I},OneMinusDstAlphaFactor:function(){return F},OneMinusDstColorFactor:function(){return Z},OneMinusSrcAlphaFactor:function(){return N},OneMinusSrcColorFactor:function(){return L},OrthographicCamera:function(){return Go},PCFShadowMap:function(){return d},PCFSoftShadowMap:function(){return h},PMREMGenerator:function(){return as},ParametricGeometry:function(){return Ap},Particle:function(){return rp},ParticleBasicMaterial:function(){return sp},ParticleSystem:function(){return ip},ParticleSystemMaterial:function(){return ap},Path:function(){return pu},PerspectiveCamera:function(){return xo},Plane:function(){return Po},PlaneBufferGeometry:function(){return No},PlaneGeometry:function(){return No},PlaneHelper:function(){return Zf},PointCloud:function(){return np},PointCloudMaterial:function(){return op},PointLight:function(){return eh},PointLightHelper:function(){return xf},Points:function(){return Ic},PointsMaterial:function(){return Cc},PolarGridHelper:function(){return Mf},PolyhedronBufferGeometry:function(){return Vc},PolyhedronGeometry:function(){return Vc},PositionalAudio:function(){return Fh},PropertyBinding:function(){return Kh},PropertyMixer:function(){return Zh},QuadraticBezierCurve:function(){return cu},QuadraticBezierCurve3:function(){return uu},Quaternion:function(){return rr},QuaternionKeyframeTrack:function(){return Td},QuaternionLinearInterpolant:function(){return Ed},REVISION:function(){return r},RGBADepthPacking:function(){return Jt},RGBAFormat:function(){return Be},RGBAIntegerFormat:function(){return qe},RGBA_ASTC_10x10_Format:function(){return vt},RGBA_ASTC_10x5_Format:function(){return pt},RGBA_ASTC_10x6_Format:function(){return mt},RGBA_ASTC_10x8_Format:function(){return gt},RGBA_ASTC_12x10_Format:function(){return yt},RGBA_ASTC_12x12_Format:function(){return bt},RGBA_ASTC_4x4_Format:function(){return st},RGBA_ASTC_5x4_Format:function(){return at},RGBA_ASTC_5x5_Format:function(){return lt},RGBA_ASTC_6x5_Format:function(){return ct},RGBA_ASTC_6x6_Format:function(){return ut},RGBA_ASTC_8x5_Format:function(){return dt},RGBA_ASTC_8x6_Format:function(){return ht},RGBA_ASTC_8x8_Format:function(){return ft},RGBA_BPTC_Format:function(){return wt},RGBA_ETC2_EAC_Format:function(){return ot},RGBA_PVRTC_2BPPV1_Format:function(){return nt},RGBA_PVRTC_4BPPV1_Format:function(){return tt},RGBA_S3TC_DXT1_Format:function(){return Ke},RGBA_S3TC_DXT3_Format:function(){return Xe},RGBA_S3TC_DXT5_Format:function(){return Je},RGBFormat:function(){return Fe},RGBIntegerFormat:function(){return $e},RGB_ETC1_Format:function(){return rt},RGB_ETC2_Format:function(){return it},RGB_PVRTC_2BPPV1_Format:function(){return et},RGB_PVRTC_4BPPV1_Format:function(){return Qe},RGB_S3TC_DXT1_Format:function(){return Ye},RGFormat:function(){return Ge},RGIntegerFormat:function(){return We},RawShaderMaterial:function(){return Wo},Ray:function(){return Or},Raycaster:function(){return rf},RectAreaLight:function(){return ih},RedFormat:function(){return je},RedIntegerFormat:function(){return He},ReinhardToneMapping:function(){return ee},RepeatWrapping:function(){return de},ReplaceStencilOp:function(){return rn},ReverseSubtractEquation:function(){return M},RingBufferGeometry:function(){return Yu},RingGeometry:function(){return Yu},SRGB8_ALPHA8_ASTC_10x10_Format:function(){return Rt},SRGB8_ALPHA8_ASTC_10x5_Format:function(){return Pt},SRGB8_ALPHA8_ASTC_10x6_Format:function(){return At},SRGB8_ALPHA8_ASTC_10x8_Format:function(){return It},SRGB8_ALPHA8_ASTC_12x10_Format:function(){return Lt},SRGB8_ALPHA8_ASTC_12x12_Format:function(){return Ot},SRGB8_ALPHA8_ASTC_4x4_Format:function(){return xt},SRGB8_ALPHA8_ASTC_5x4_Format:function(){return _t},SRGB8_ALPHA8_ASTC_5x5_Format:function(){return St},SRGB8_ALPHA8_ASTC_6x5_Format:function(){return Et},SRGB8_ALPHA8_ASTC_6x6_Format:function(){return Tt},SRGB8_ALPHA8_ASTC_8x5_Format:function(){return Ct},SRGB8_ALPHA8_ASTC_8x6_Format:function(){return Mt},SRGB8_ALPHA8_ASTC_8x8_Format:function(){return kt},Scene:function(){return Pl},SceneUtils:function(){return kp},ShaderChunk:function(){return Do},ShaderLib:function(){return Bo},ShaderMaterial:function(){return bo},ShadowMaterial:function(){return od},Shape:function(){return mu},ShapeBufferGeometry:function(){return Ku},ShapeGeometry:function(){return Ku},ShapePath:function(){return Gf},ShapeUtils:function(){return zu},ShortType:function(){return Ce},Skeleton:function(){return lc},SkeletonHelper:function(){return bf},SkinnedMesh:function(){return rc},SmoothShading:function(){return y},Sphere:function(){return Cr},SphereBufferGeometry:function(){return Xu},SphereGeometry:function(){return Xu},Spherical:function(){return af},SphericalHarmonics3:function(){return oh},SplineCurve:function(){return du},SpotLight:function(){return Yd},SpotLightHelper:function(){return mf},Sprite:function(){return $l},SpriteMaterial:function(){return Ll},SrcAlphaFactor:function(){return O},SrcAlphaSaturateFactor:function(){return V},SrcColorFactor:function(){return R},StaticCopyUsage:function(){return En},StaticDrawUsage:function(){return yn},StaticReadUsage:function(){return xn},StereoCamera:function(){return Eh},StreamCopyUsage:function(){return Cn},StreamDrawUsage:function(){return wn},StreamReadUsage:function(){return Sn},StringKeyframeTrack:function(){return Cd},SubtractEquation:function(){return C},SubtractiveBlending:function(){return _},TOUCH:function(){return o},TangentSpaceNormalMap:function(){return Qt},TetrahedronBufferGeometry:function(){return Ju},TetrahedronGeometry:function(){return Ju},TextGeometry:function(){return Ip},Texture:function(){return Xn},TextureLoader:function(){return zd},TorusBufferGeometry:function(){return Qu},TorusGeometry:function(){return Qu},TorusKnotBufferGeometry:function(){return ed},TorusKnotGeometry:function(){return ed},Triangle:function(){return vi},TriangleFanDrawMode:function(){return qt},TriangleStripDrawMode:function(){return $t},TrianglesDrawMode:function(){return Wt},TubeBufferGeometry:function(){return td},TubeGeometry:function(){return td},UVMapping:function(){return ie},Uint16Attribute:function(){return pp},Uint16BufferAttribute:function(){return Ni},Uint32Attribute:function(){return gp},Uint32BufferAttribute:function(){return Fi},Uint8Attribute:function(){return dp},Uint8BufferAttribute:function(){return Ri},Uint8ClampedAttribute:function(){return hp},Uint8ClampedBufferAttribute:function(){return Li},Uniform:function(){return ef},UniformsLib:function(){return Fo},UniformsUtils:function(){return yo},UnsignedByteType:function(){return Ee},UnsignedInt248Type:function(){return Ne},UnsignedIntType:function(){return Pe},UnsignedShort4444Type:function(){return Re},UnsignedShort5551Type:function(){return Le},UnsignedShort565Type:function(){return Oe},UnsignedShortType:function(){return Me},VSMShadowMap:function(){return f},Vector2:function(){return Un},Vector3:function(){return ir},Vector4:function(){return Qn},VectorKeyframeTrack:function(){return Md},Vertex:function(){return lp},VertexColors:function(){return Qf},VideoTexture:function(){return Lc},WebGL1Renderer:function(){return Cl},WebGLCubeRenderTarget:function(){return To},WebGLMultipleRenderTargets:function(){return tr},WebGLMultisampleRenderTarget:function(){return nr},WebGLRenderTarget:function(){return er},WebGLRenderTargetCube:function(){return Tp},WebGLRenderer:function(){return Tl},WebGLUtils:function(){return vl},WireframeGeometry:function(){return nd},WireframeHelper:function(){return _p},WrapAroundEnding:function(){return jt},XHRLoader:function(){return Sp},ZeroCurvatureEnding:function(){return zt},ZeroFactor:function(){return A},ZeroSlopeEnding:function(){return Ut},ZeroStencilOp:function(){return tn},sRGBEncoding:function(){return Kt}});const r="136",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,a=1,l=2,c=3,u=0,d=1,h=2,f=3,p=0,m=1,g=2,v=1,y=2,b=0,w=1,x=2,_=3,S=4,E=5,T=100,C=101,M=102,k=103,P=104,A=200,I=201,R=202,L=203,O=204,N=205,D=206,F=207,B=208,Z=209,V=210,z=0,U=1,j=2,H=3,G=4,W=5,$=6,q=7,Y=0,K=1,X=2,J=0,Q=1,ee=2,te=3,ne=4,re=5,ie=300,oe=301,se=302,ae=303,le=304,ce=306,ue=307,de=1e3,he=1001,fe=1002,pe=1003,me=1004,ge=1004,ve=1005,ye=1005,be=1006,we=1007,xe=1007,_e=1008,Se=1008,Ee=1009,Te=1010,Ce=1011,Me=1012,ke=1013,Pe=1014,Ae=1015,Ie=1016,Re=1017,Le=1018,Oe=1019,Ne=1020,De=1021,Fe=1022,Be=1023,Ze=1024,Ve=1025,ze=1026,Ue=1027,je=1028,He=1029,Ge=1030,We=1031,$e=1032,qe=1033,Ye=33776,Ke=33777,Xe=33778,Je=33779,Qe=35840,et=35841,tt=35842,nt=35843,rt=36196,it=37492,ot=37496,st=37808,at=37809,lt=37810,ct=37811,ut=37812,dt=37813,ht=37814,ft=37815,pt=37816,mt=37817,gt=37818,vt=37819,yt=37820,bt=37821,wt=36492,xt=37840,_t=37841,St=37842,Et=37843,Tt=37844,Ct=37845,Mt=37846,kt=37847,Pt=37848,At=37849,It=37850,Rt=37851,Lt=37852,Ot=37853,Nt=2200,Dt=2201,Ft=2202,Bt=2300,Zt=2301,Vt=2302,zt=2400,Ut=2401,jt=2402,Ht=2500,Gt=2501,Wt=0,$t=1,qt=2,Yt=3e3,Kt=3001,Xt=3200,Jt=3201,Qt=0,en=1,tn=0,nn=7680,rn=7681,on=7682,sn=7683,an=34055,ln=34056,cn=5386,un=512,dn=513,hn=514,fn=515,pn=516,mn=517,gn=518,vn=519,yn=35044,bn=35048,wn=35040,xn=35045,_n=35049,Sn=35041,En=35046,Tn=35050,Cn=35042,Mn="100",kn="300 es";class Pn{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const An=[];for(let e=0;e<256;e++)An[e]=(e<16?"0":"")+e.toString(16);let In=1234567;const Rn=Math.PI/180,Ln=180/Math.PI;function On(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(An[255&e]+An[e>>8&255]+An[e>>16&255]+An[e>>24&255]+"-"+An[255&t]+An[t>>8&255]+"-"+An[t>>16&15|64]+An[t>>24&255]+"-"+An[63&n|128]+An[n>>8&255]+"-"+An[n>>16&255]+An[n>>24&255]+An[255&r]+An[r>>8&255]+An[r>>16&255]+An[r>>24&255]).toUpperCase()}function Nn(e,t,n){return Math.max(t,Math.min(n,e))}function Dn(e,t){return(e%t+t)%t}function Fn(e,t,n){return(1-n)*e+n*t}function Bn(e){return 0==(e&e-1)&&0!==e}function Zn(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Vn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var zn=Object.freeze({__proto__:null,DEG2RAD:Rn,RAD2DEG:Ln,generateUUID:On,clamp:Nn,euclideanModulo:Dn,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Fn,damp:function(e,t,n,r){return Fn(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(Dn(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(In=e%2147483647),In=16807*In%2147483647,(In-1)/2147483646},degToRad:function(e){return e*Rn},radToDeg:function(e){return e*Ln},isPowerOfTwo:Bn,ceilPowerOfTwo:Zn,floorPowerOfTwo:Vn,setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((t+r)/2),u=s((t+r)/2),d=o((t-r)/2),h=s((t-r)/2),f=o((r-t)/2),p=s((r-t)/2);switch(i){case"XYX":e.set(a*u,l*d,l*h,a*c);break;case"YZY":e.set(l*h,a*u,l*d,a*c);break;case"ZXZ":e.set(l*d,l*h,a*u,a*c);break;case"XZX":e.set(a*u,l*p,l*f,a*c);break;case"YXY":e.set(l*f,a*u,l*p,a*c);break;case"ZYZ":e.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}});class Un{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Un.prototype.isVector2=!0;class jn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,s,a,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=i,c[5]=a,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],w=r[2],x=r[5],_=r[8];return i[0]=o*p+s*v+a*w,i[3]=o*m+s*y+a*x,i[6]=o*g+s*b+a*_,i[1]=l*p+c*v+u*w,i[4]=l*m+c*y+u*x,i[7]=l*g+c*b+u*_,i[2]=d*p+h*v+f*w,i[5]=d*m+h*y+f*x,i[8]=d*g+h*b+f*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*o*c-t*s*l-n*i*c+n*s*a+r*i*l-r*o*a}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=c*o-s*l,d=s*a-c*i,h=l*i-o*a,f=t*u+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(s*n-r*o)*p,e[3]=d*p,e[4]=(c*t-r*a)*p,e[5]=(r*i-s*t)*p,e[6]=h*p,e[7]=(n*a-l*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,s){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*o+l*s)+o+e,-r*l,r*a,-r*(-l*o+a*s)+s+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],s=r[6],a=r[1],l=r[4],c=r[7];return r[0]=t*i+n*a,r[3]=t*o+n*l,r[6]=t*s+n*c,r[1]=-n*i+t*a,r[4]=-n*o+t*l,r[7]=-n*s+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Hn(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}jn.prototype.isMatrix3=!0;const Gn={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Wn(e,t){return new Gn[e](t)}function $n(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}let qn;class Yn{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===qn&&(qn=$n("canvas")),qn.width=e.width,qn.height=e.height;const n=qn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=qn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let Kn=0;class Xn extends Pn{constructor(e=Xn.DEFAULT_IMAGE,t=Xn.DEFAULT_MAPPING,n=he,r=he,i=be,o=_e,s=Be,a=Ee,l=1,c=Yt){super(),Object.defineProperty(this,"id",{value:Kn++}),this.uuid=On(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new Un(0,0),this.repeat=new Un(1,1),this.center=new Un(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=On()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(Jn(r[e].image)):t.push(Jn(r[e]))}else t=Jn(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ie)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case de:e.x=e.x-Math.floor(e.x);break;case he:e.x=e.x<0?0:1;break;case fe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case de:e.y=e.y-Math.floor(e.y);break;case he:e.y=e.y<0?0:1;break;case fe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function Jn(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Yn.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Xn.DEFAULT_IMAGE=void 0,Xn.DEFAULT_MAPPING=ie,Xn.prototype.isTexture=!0;class Qn{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,s=.1,a=e.elements,l=a[0],c=a[4],u=a[8],d=a[1],h=a[5],f=a[9],p=a[2],m=a[6],g=a[10];if(Math.abs(c-d)<o&&Math.abs(u-p)<o&&Math.abs(f-m)<o){if(Math.abs(c+d)<s&&Math.abs(u+p)<s&&Math.abs(f+m)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(h+1)/2,v=(g+1)/2,y=(c+d)/4,b=(u+p)/4,w=(f+m)/4;return e>a&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):a>v?a<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=y/r,i=w/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=w/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Qn.prototype.isVector4=!0;class er extends Pn{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Qn(0,0,e,t),this.scissorTest=!1,this.viewport=new Qn(0,0,e,t),this.texture=new Xn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:be,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}er.prototype.isWebGLRenderTarget=!0;class tr extends er{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=r.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}tr.prototype.isWebGLMultipleRenderTargets=!0;class nr extends er{constructor(e,t,n={}){super(e,t,n),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===n.ignoreDepth||n.ignoreDepth,this.useRenderToTexture=void 0!==n.useRenderToTexture&&n.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}nr.prototype.isWebGLMultisampleRenderTarget=!0;class rr{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,o,s){let a=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=i[o+0],h=i[o+1],f=i[o+2],p=i[o+3];if(0===s)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(u!==p||a!==d||l!==h||c!==f){let e=1-s;const t=a*d+l*h+c*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,s=Math.sin(s*o)/i}const i=s*n;if(a=a*e+d*i,l=l*e+h*i,c=c*e+f*i,u=u*e+p*i,e===1-s){const e=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=e,l*=e,c*=e,u*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const s=n[r],a=n[r+1],l=n[r+2],c=n[r+3],u=i[o],d=i[o+1],h=i[o+2],f=i[o+3];return e[t]=s*f+c*u+a*h-l*d,e[t+1]=a*f+c*d+l*u-s*h,e[t+2]=l*f+c*h+s*d-a*u,e[t+3]=c*f-s*u-a*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(r/2),u=s(i/2),d=a(n/2),h=a(r/2),f=a(i/2);switch(o){case"XYZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"YXZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"ZXY":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"ZYX":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"YZX":this._x=d*c*u+l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u-d*h*f;break;case"XZY":this._x=d*c*u-l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],s=t[5],a=t[9],l=t[2],c=t[6],u=t[10],d=n+s+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-a)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-a)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Nn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+o*s+r*l-i*a,this._y=r*c+o*a+i*s-n*l,this._z=i*c+o*l+n*a-r*s,this._w=o*c-n*s-r*a-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let s=o*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}rr.prototype.isQuaternion=!0;class ir{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(sr.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(sr.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,s=e.z,a=e.w,l=a*t+o*r-s*n,c=a*n+s*t-i*r,u=a*r+i*n-o*t,d=-i*t-o*n-s*r;return this.x=l*a+d*-i+c*-s-u*-o,this.y=c*a+d*-o+u*-i-l*-s,this.z=u*a+d*-s+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,s=t.y,a=t.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return or.copy(this).projectOnVector(e),this.sub(or)}reflect(e){return this.sub(or.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Nn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}ir.prototype.isVector3=!0;const or=new ir,sr=new rr;class ar{constructor(e=new ir(1/0,1/0,1/0),t=new ir(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;for(let a=0,l=e.length;a<l;a+=3){const l=e[a],c=e[a+1],u=e[a+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>s&&(s=u)}return this.min.set(t,n,r),this.max.set(i,o,s),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;for(let a=0,l=e.count;a<l;a++){const l=e.getX(a),c=e.getY(a),u=e.getZ(a);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>s&&(s=u)}return this.min.set(t,n,r),this.max.set(i,o,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=cr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),ur.copy(t.boundingBox),ur.applyMatrix4(e.matrixWorld),this.union(ur));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,cr),cr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(vr),yr.subVectors(this.max,vr),dr.subVectors(e.a,vr),hr.subVectors(e.b,vr),fr.subVectors(e.c,vr),pr.subVectors(hr,dr),mr.subVectors(fr,hr),gr.subVectors(dr,fr);let t=[0,-pr.z,pr.y,0,-mr.z,mr.y,0,-gr.z,gr.y,pr.z,0,-pr.x,mr.z,0,-mr.x,gr.z,0,-gr.x,-pr.y,pr.x,0,-mr.y,mr.x,0,-gr.y,gr.x,0];return!!xr(t,dr,hr,fr,yr)&&(t=[1,0,0,0,1,0,0,0,1],!!xr(t,dr,hr,fr,yr)&&(br.crossVectors(pr,mr),t=[br.x,br.y,br.z],xr(t,dr,hr,fr,yr)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return cr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(cr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(lr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),lr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),lr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),lr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),lr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),lr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),lr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),lr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(lr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}ar.prototype.isBox3=!0;const lr=[new ir,new ir,new ir,new ir,new ir,new ir,new ir,new ir],cr=new ir,ur=new ar,dr=new ir,hr=new ir,fr=new ir,pr=new ir,mr=new ir,gr=new ir,vr=new ir,yr=new ir,br=new ir,wr=new ir;function xr(e,t,n,r,i){for(let o=0,s=e.length-3;o<=s;o+=3){wr.fromArray(e,o);const s=i.x*Math.abs(wr.x)+i.y*Math.abs(wr.y)+i.z*Math.abs(wr.z),a=t.dot(wr),l=n.dot(wr),c=r.dot(wr);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>s)return!1}return!0}const _r=new ar,Sr=new ir,Er=new ir,Tr=new ir;class Cr{constructor(e=new ir,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):_r.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Tr.subVectors(e,this.center);const t=Tr.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(Tr.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return!0===this.center.equals(e.center)?Er.set(0,0,1).multiplyScalar(e.radius):Er.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Sr.copy(e.center).add(Er)),this.expandByPoint(Sr.copy(e.center).sub(Er)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Mr=new ir,kr=new ir,Pr=new ir,Ar=new ir,Ir=new ir,Rr=new ir,Lr=new ir;class Or{constructor(e=new ir,t=new ir(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Mr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Mr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Mr.copy(this.direction).multiplyScalar(t).add(this.origin),Mr.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){kr.copy(e).add(t).multiplyScalar(.5),Pr.copy(t).sub(e).normalize(),Ar.copy(this.origin).sub(kr);const i=.5*e.distanceTo(t),o=-this.direction.dot(Pr),s=Ar.dot(this.direction),a=-Ar.dot(Pr),l=Ar.lengthSq(),c=Math.abs(1-o*o);let u,d,h,f;if(c>0)if(u=o*a-s,d=o*s-a,f=i*c,u>=0)if(d>=-f)if(d<=f){const e=1/c;u*=e,d*=e,h=u*(u+o*d+2*s)+d*(o*u+d+2*a)+l}else d=i,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+l;else d=-i,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+l;else d<=-f?(u=Math.max(0,-(-o*i+s)),d=u>0?-i:Math.min(Math.max(-i,-a),i),h=-u*u+d*(d+2*a)+l):d<=f?(u=0,d=Math.min(Math.max(-i,-a),i),h=d*(d+2*a)+l):(u=Math.max(0,-(o*i+s)),d=u>0?i:Math.min(Math.max(-i,-a),i),h=-u*u+d*(d+2*a)+l);else d=o>0?-i:i,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Pr).multiplyScalar(d).add(kr),h}intersectSphere(e,t){Mr.subVectors(e.center,this.origin);const n=Mr.dot(this.direction),r=Mr.dot(Mr)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),s=n-o,a=n+o;return s<0&&a<0?null:s<0?this.at(a,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,s,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),u>=0?(s=(e.min.z-d.z)*u,a=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,a=(e.min.z-d.z)*u),n>a||s>r?null:((s>n||n!=n)&&(n=s),(a<r||r!=r)&&(r=a),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Mr)}intersectTriangle(e,t,n,r,i){Ir.subVectors(t,e),Rr.subVectors(n,e),Lr.crossVectors(Ir,Rr);let o,s=this.direction.dot(Lr);if(s>0){if(r)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}Ar.subVectors(this.origin,e);const a=o*this.direction.dot(Rr.crossVectors(Ar,Rr));if(a<0)return null;const l=o*this.direction.dot(Ir.cross(Ar));if(l<0)return null;if(a+l>s)return null;const c=-o*Ar.dot(Lr);return c<0?null:this.at(c/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Nr{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,s,a,l,c,u,d,h,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Nr).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Dr.setFromMatrixColumn(e,0).length(),i=1/Dr.setFromMatrixColumn(e,1).length(),o=1/Dr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=s*c,i=s*u;t[0]=a*c,t[4]=-a*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-s*a,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*a}else if("YXZ"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e+i*s,t[4]=r*s-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e-i*s,t[4]=-o*u,t[8]=r+n*s,t[1]=n+r*s,t[5]=o*c,t[9]=i-e*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*c,n=o*u,r=s*c,i=s*u;t[0]=a*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=a*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,n=o*l,r=s*a,i=s*l;t[0]=a*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*a,n=o*l,r=s*a,i=s*l;t[0]=a*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=s*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Br,e,Zr)}lookAt(e,t,n){const r=this.elements;return Ur.subVectors(e,t),0===Ur.lengthSq()&&(Ur.z=1),Ur.normalize(),Vr.crossVectors(n,Ur),0===Vr.lengthSq()&&(1===Math.abs(n.z)?Ur.x+=1e-4:Ur.z+=1e-4,Ur.normalize(),Vr.crossVectors(n,Ur)),Vr.normalize(),zr.crossVectors(Ur,Vr),r[0]=Vr.x,r[4]=zr.x,r[8]=Ur.x,r[1]=Vr.y,r[5]=zr.y,r[9]=Ur.y,r[2]=Vr.z,r[6]=zr.z,r[10]=Ur.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],w=n[15],x=r[0],_=r[4],S=r[8],E=r[12],T=r[1],C=r[5],M=r[9],k=r[13],P=r[2],A=r[6],I=r[10],R=r[14],L=r[3],O=r[7],N=r[11],D=r[15];return i[0]=o*x+s*T+a*P+l*L,i[4]=o*_+s*C+a*A+l*O,i[8]=o*S+s*M+a*I+l*N,i[12]=o*E+s*k+a*R+l*D,i[1]=c*x+u*T+d*P+h*L,i[5]=c*_+u*C+d*A+h*O,i[9]=c*S+u*M+d*I+h*N,i[13]=c*E+u*k+d*R+h*D,i[2]=f*x+p*T+m*P+g*L,i[6]=f*_+p*C+m*A+g*O,i[10]=f*S+p*M+m*I+g*N,i[14]=f*E+p*k+m*R+g*D,i[3]=v*x+y*T+b*P+w*L,i[7]=v*_+y*C+b*A+w*O,i[11]=v*S+y*M+b*I+w*N,i[15]=v*E+y*k+b*R+w*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+i*a*u-r*l*u-i*s*d+n*l*d+r*s*h-n*a*h)+e[7]*(+t*a*h-t*l*d+i*o*d-r*o*h+r*l*c-i*a*c)+e[11]*(+t*l*u-t*s*h-i*o*u+n*o*h+i*s*c-n*l*c)+e[15]*(-r*s*c-t*a*u+t*s*d+r*o*u-n*o*d+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*d*l+p*a*h-s*m*h-u*a*g+s*d*g,y=f*d*l-c*m*l-f*a*h+o*m*h+c*a*g-o*d*g,b=c*p*l-f*u*l+f*s*h-o*p*h-c*s*g+o*u*g,w=f*u*a-c*p*a-f*s*d+o*p*d+c*s*m-o*u*m,x=t*v+n*y+r*b+i*w;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/x;return e[0]=v*_,e[1]=(p*d*i-u*m*i-p*r*h+n*m*h+u*r*g-n*d*g)*_,e[2]=(s*m*i-p*a*i+p*r*l-n*m*l-s*r*g+n*a*g)*_,e[3]=(u*a*i-s*d*i-u*r*l+n*d*l+s*r*h-n*a*h)*_,e[4]=y*_,e[5]=(c*m*i-f*d*i+f*r*h-t*m*h-c*r*g+t*d*g)*_,e[6]=(f*a*i-o*m*i-f*r*l+t*m*l+o*r*g-t*a*g)*_,e[7]=(o*d*i-c*a*i+c*r*l-t*d*l-o*r*h+t*a*h)*_,e[8]=b*_,e[9]=(f*u*i-c*p*i-f*n*h+t*p*h+c*n*g-t*u*g)*_,e[10]=(o*p*i-f*s*i+f*n*l-t*p*l-o*n*g+t*s*g)*_,e[11]=(c*s*i-o*u*i-c*n*l+t*u*l+o*n*h-t*s*h)*_,e[12]=w*_,e[13]=(c*p*r-f*u*r+f*n*d-t*p*d-c*n*m+t*u*m)*_,e[14]=(f*s*r-o*p*r-f*n*a+t*p*a+o*n*m-t*s*m)*_,e[15]=(o*u*r-c*s*r+c*n*a-t*u*a-o*n*d+t*s*d)*_,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,s=e.y,a=e.z,l=i*o,c=i*s;return this.set(l*o+n,l*s-r*a,l*a+r*s,0,l*s+r*a,c*s+n,c*a-r*o,0,l*a-r*s,c*a+r*o,i*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,s=t._z,a=t._w,l=i+i,c=o+o,u=s+s,d=i*l,h=i*c,f=i*u,p=o*c,m=o*u,g=s*u,v=a*l,y=a*c,b=a*u,w=n.x,x=n.y,_=n.z;return r[0]=(1-(p+g))*w,r[1]=(h+b)*w,r[2]=(f-y)*w,r[3]=0,r[4]=(h-b)*x,r[5]=(1-(d+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(f+y)*_,r[9]=(m-v)*_,r[10]=(1-(d+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Dr.set(r[0],r[1],r[2]).length();const o=Dr.set(r[4],r[5],r[6]).length(),s=Dr.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Fr.copy(this);const a=1/i,l=1/o,c=1/s;return Fr.elements[0]*=a,Fr.elements[1]*=a,Fr.elements[2]*=a,Fr.elements[4]*=l,Fr.elements[5]*=l,Fr.elements[6]*=l,Fr.elements[8]*=c,Fr.elements[9]*=c,Fr.elements[10]*=c,t.setFromRotationMatrix(Fr),n.x=i,n.y=o,n.z=s,this}makePerspective(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,a=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),d=-(o+i)/(o-i),h=-2*o*i/(o-i);return s[0]=a,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,r,i,o){const s=this.elements,a=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*a,d=(n+r)*l,h=(o+i)*c;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-h,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Nr.prototype.isMatrix4=!0;const Dr=new ir,Fr=new Nr,Br=new ir(0,0,0),Zr=new ir(1,1,1),Vr=new ir,zr=new ir,Ur=new ir,jr=new Nr,Hr=new rr;class Gr{constructor(e=0,t=0,n=0,r=Gr.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],s=r[8],a=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Nn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Nn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Nn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-Nn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Nn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-Nn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return jr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jr,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Hr.setFromEuler(this),this.setFromQuaternion(Hr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new ir(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Gr.prototype.isEuler=!0,Gr.DefaultOrder="XYZ",Gr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Wr{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let $r=0;const qr=new ir,Yr=new rr,Kr=new Nr,Xr=new ir,Jr=new ir,Qr=new ir,ei=new rr,ti=new ir(1,0,0),ni=new ir(0,1,0),ri=new ir(0,0,1),ii={type:"added"},oi={type:"removed"};class si extends Pn{constructor(){super(),Object.defineProperty(this,"id",{value:$r++}),this.uuid=On(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=si.DefaultUp.clone();const e=new ir,t=new Gr,n=new rr,r=new ir(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Nr},normalMatrix:{value:new jn}}),this.matrix=new Nr,this.matrixWorld=new Nr,this.matrixAutoUpdate=si.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Wr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Yr.setFromAxisAngle(e,t),this.quaternion.multiply(Yr),this}rotateOnWorldAxis(e,t){return Yr.setFromAxisAngle(e,t),this.quaternion.premultiply(Yr),this}rotateX(e){return this.rotateOnAxis(ti,e)}rotateY(e){return this.rotateOnAxis(ni,e)}rotateZ(e){return this.rotateOnAxis(ri,e)}translateOnAxis(e,t){return qr.copy(e).applyQuaternion(this.quaternion),this.position.add(qr.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ti,e)}translateY(e){return this.translateOnAxis(ni,e)}translateZ(e){return this.translateOnAxis(ri,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Kr.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Xr.copy(e):Xr.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Jr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Kr.lookAt(Jr,Xr,this.up):Kr.lookAt(Xr,Jr,this.up),this.quaternion.setFromRotationMatrix(Kr),r&&(Kr.extractRotation(r.matrixWorld),Yr.setFromRotationMatrix(Kr),this.quaternion.premultiply(Yr.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ii)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(oi)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(oi)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Kr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Kr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Kr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jr,e,Qr),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jr,ei,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),s=o(e.images),a=o(e.shapes),l=o(e.skeletons),c=o(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}si.DefaultUp=new ir(0,1,0),si.DefaultMatrixAutoUpdate=!0,si.prototype.isObject3D=!0;const ai=new ir,li=new ir,ci=new ir,ui=new ir,di=new ir,hi=new ir,fi=new ir,pi=new ir,mi=new ir,gi=new ir;class vi{constructor(e=new ir,t=new ir,n=new ir){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ai.subVectors(e,t),r.cross(ai);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){ai.subVectors(r,t),li.subVectors(n,t),ci.subVectors(e,t);const o=ai.dot(ai),s=ai.dot(li),a=ai.dot(ci),l=li.dot(li),c=li.dot(ci),u=o*l-s*s;if(0===u)return i.set(-2,-1,-1);const d=1/u,h=(l*a-s*c)*d,f=(o*c-s*a)*d;return i.set(1-h-f,f,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,ui),ui.x>=0&&ui.y>=0&&ui.x+ui.y<=1}static getUV(e,t,n,r,i,o,s,a){return this.getBarycoord(e,t,n,r,ui),a.set(0,0),a.addScaledVector(i,ui.x),a.addScaledVector(o,ui.y),a.addScaledVector(s,ui.z),a}static isFrontFacing(e,t,n,r){return ai.subVectors(n,t),li.subVectors(e,t),ai.cross(li).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ai.subVectors(this.c,this.b),li.subVectors(this.a,this.b),.5*ai.cross(li).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return vi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return vi.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return vi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,s;di.subVectors(r,n),hi.subVectors(i,n),pi.subVectors(e,n);const a=di.dot(pi),l=hi.dot(pi);if(a<=0&&l<=0)return t.copy(n);mi.subVectors(e,r);const c=di.dot(mi),u=hi.dot(mi);if(c>=0&&u<=c)return t.copy(r);const d=a*u-c*l;if(d<=0&&a>=0&&c<=0)return o=a/(a-c),t.copy(n).addScaledVector(di,o);gi.subVectors(e,i);const h=di.dot(gi),f=hi.dot(gi);if(f>=0&&h<=f)return t.copy(i);const p=h*l-a*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(n).addScaledVector(hi,s);const m=c*f-h*u;if(m<=0&&u-c>=0&&h-f>=0)return fi.subVectors(i,r),s=(u-c)/(u-c+(h-f)),t.copy(r).addScaledVector(fi,s);const g=1/(m+p+d);return o=p*g,s=d*g,t.copy(n).addScaledVector(di,o).addScaledVector(hi,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let yi=0;class bi extends Pn{constructor(){super(),Object.defineProperty(this,"id",{value:yi++}),this.uuid=On(),this.name="",this.type="Material",this.fog=!0,this.blending=w,this.side=p,this.vertexColors=!1,this.opacity=1,this.format=Be,this.transparent=!1,this.blendSrc=O,this.blendDst=N,this.blendEquation=T,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=H,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=vn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nn,this.stencilZFail=nn,this.stencilZPass=nn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===v;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==w&&(n.blending=this.blending),this.side!==p&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==Be&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}bi.prototype.isMaterial=!0;const wi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},xi={h:0,s:0,l:0},_i={h:0,s:0,l:0};function Si(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Ei(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Ti(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Ci{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Dn(e,1),t=Nn(t,0,1),n=Nn(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Si(i,r,e+1/3),this.g=Si(i,r,e),this.b=Si(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=wi[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ei(e.r),this.g=Ei(e.g),this.b=Ei(e.b),this}copyLinearToSRGB(e){return this.r=Ti(e.r),this.g=Ti(e.g),this.b=Ti(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),o=Math.min(t,n,r);let s,a;const l=(o+i)/2;if(o===i)s=0,a=0;else{const e=i-o;switch(a=l<=.5?e/(i+o):e/(2-i-o),i){case t:s=(n-r)/e+(n<r?6:0);break;case n:s=(r-t)/e+2;break;case r:s=(t-n)/e+4}s/=6}return e.h=s,e.s=a,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(xi),xi.h+=e,xi.s+=t,xi.l+=n,this.setHSL(xi.h,xi.s,xi.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(xi),e.getHSL(_i);const n=Fn(xi.h,_i.h,t),r=Fn(xi.s,_i.s,t),i=Fn(xi.l,_i.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Ci.NAMES=wi,Ci.prototype.isColor=!0,Ci.prototype.r=1,Ci.prototype.g=1,Ci.prototype.b=1;class Mi extends bi{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Ci(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Mi.prototype.isMeshBasicMaterial=!0;const ki=new ir,Pi=new Un;class Ai{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=yn,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Ci),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Un),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new ir),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Qn),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Pi.fromBufferAttribute(this,t),Pi.applyMatrix3(e),this.setXY(t,Pi.x,Pi.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)ki.fromBufferAttribute(this,t),ki.applyMatrix3(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ki.x=this.getX(t),ki.y=this.getY(t),ki.z=this.getZ(t),ki.applyMatrix4(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ki.x=this.getX(t),ki.y=this.getY(t),ki.z=this.getZ(t),ki.applyNormalMatrix(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ki.x=this.getX(t),ki.y=this.getY(t),ki.z=this.getZ(t),ki.transformDirection(e),this.setXYZ(t,ki.x,ki.y,ki.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==yn&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}Ai.prototype.isBufferAttribute=!0;class Ii extends Ai{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Ri extends Ai{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Li extends Ai{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Oi extends Ai{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Ni extends Ai{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Di extends Ai{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Fi extends Ai{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Bi extends Ai{constructor(e,t,n){super(new Uint16Array(e),t,n)}}Bi.prototype.isFloat16BufferAttribute=!0;class Zi extends Ai{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Vi extends Ai{constructor(e,t,n){super(new Float64Array(e),t,n)}}let zi=0;const Ui=new Nr,ji=new si,Hi=new ir,Gi=new ar,Wi=new ar,$i=new ir;class qi extends Pn{constructor(){super(),Object.defineProperty(this,"id",{value:zi++}),this.uuid=On(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Hn(e)>65535?Fi:Ni)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new jn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ui.makeRotationFromQuaternion(e),this.applyMatrix4(Ui),this}rotateX(e){return Ui.makeRotationX(e),this.applyMatrix4(Ui),this}rotateY(e){return Ui.makeRotationY(e),this.applyMatrix4(Ui),this}rotateZ(e){return Ui.makeRotationZ(e),this.applyMatrix4(Ui),this}translate(e,t,n){return Ui.makeTranslation(e,t,n),this.applyMatrix4(Ui),this}scale(e,t,n){return Ui.makeScale(e,t,n),this.applyMatrix4(Ui),this}lookAt(e){return ji.lookAt(e),ji.updateMatrix(),this.applyMatrix4(ji.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hi).negate(),this.translate(Hi.x,Hi.y,Hi.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Zi(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ar);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ir(-1/0,-1/0,-1/0),new ir(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Gi.setFromBufferAttribute(n),this.morphTargetsRelative?($i.addVectors(this.boundingBox.min,Gi.min),this.boundingBox.expandByPoint($i),$i.addVectors(this.boundingBox.max,Gi.max),this.boundingBox.expandByPoint($i)):(this.boundingBox.expandByPoint(Gi.min),this.boundingBox.expandByPoint(Gi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Cr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ir,1/0);if(e){const n=this.boundingSphere.center;if(Gi.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Wi.setFromBufferAttribute(n),this.morphTargetsRelative?($i.addVectors(Gi.min,Wi.min),Gi.expandByPoint($i),$i.addVectors(Gi.max,Wi.max),Gi.expandByPoint($i)):(Gi.expandByPoint(Wi.min),Gi.expandByPoint(Wi.max))}Gi.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)$i.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared($i));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],s=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)$i.fromBufferAttribute(o,t),s&&(Hi.fromBufferAttribute(e,t),$i.add(Hi)),r=Math.max(r,n.distanceToSquared($i))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,s=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Ai(new Float32Array(4*s),4));const a=t.tangent.array,l=[],c=[];for(let e=0;e<s;e++)l[e]=new ir,c[e]=new ir;const u=new ir,d=new ir,h=new ir,f=new Un,p=new Un,m=new Un,g=new ir,v=new ir;function y(e,t,n){u.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),f.fromArray(o,2*e),p.fromArray(o,2*t),m.fromArray(o,2*n),d.sub(u),h.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(i),v.copy(h).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)y(n[e+0],n[e+1],n[e+2])}const w=new ir,x=new ir,_=new ir,S=new ir;function E(e){_.fromArray(i,3*e),S.copy(_);const t=l[e];w.copy(t),w.sub(_.multiplyScalar(_.dot(t))).normalize(),x.crossVectors(S,t);const n=x.dot(c[e])<0?-1:1;a[4*e]=w.x,a[4*e+1]=w.y,a[4*e+2]=w.z,a[4*e+3]=n}for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)E(n[e+0]),E(n[e+1]),E(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ai(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new ir,i=new ir,o=new ir,s=new ir,a=new ir,l=new ir,c=new ir,u=new ir;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),f=e.getX(d+1),p=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),s.fromBufferAttribute(n,h),a.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),s.add(c),a.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,o=e.attributes[r],s=o.array,a=o.itemSize*t,l=Math.min(s.length,i.length-a);for(let e=0,t=a;e<l;e++,t++)i[t]=s[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)$i.fromBufferAttribute(e,t),$i.normalize(),e.setXYZ(t,$i.x,$i.y,$i.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let s=0,a=0;for(let i=0,l=t.length;i<l;i++){s=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)o[a++]=n[s++]}return new Ai(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new qi,n=this.index.array,r=this.attributes;for(const i in r){const o=e(r[i],n);t.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],s=i[r];for(let t=0,r=s.length;t<r;t++){const r=e(s[t],n);o.push(r)}t.morphAttributes[r]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];o.push(r.toJSON(e.data))}o.length>0&&(r[t]=o,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}qi.prototype.isBufferGeometry=!0;const Yi=new Nr,Ki=new Or,Xi=new Cr,Ji=new ir,Qi=new ir,eo=new ir,to=new ir,no=new ir,ro=new ir,io=new ir,oo=new ir,so=new ir,ao=new Un,lo=new Un,co=new Un,uo=new ir,ho=new ir;class fo extends si{constructor(e=new qi,t=new Mi){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Xi.copy(n.boundingSphere),Xi.applyMatrix4(i),!1===e.ray.intersectsSphere(Xi))return;if(Yi.copy(i).invert(),Ki.copy(e.ray).applyMatrix4(Yi),null!==n.boundingBox&&!1===Ki.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,s=n.attributes.position,a=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,d=n.groups,h=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,f=d.length;n<f;n++){const f=d[n],p=r[f.materialIndex];for(let n=Math.max(f.start,h.start),r=Math.min(i.count,Math.min(f.start+f.count,h.start+h.count));n<r;n+=3){const r=i.getX(n),d=i.getX(n+1),h=i.getX(n+2);o=po(this,p,e,Ki,s,a,l,c,u,r,d,h),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=f.materialIndex,t.push(o))}}else{for(let n=Math.max(0,h.start),d=Math.min(i.count,h.start+h.count);n<d;n+=3){const d=i.getX(n),h=i.getX(n+1),f=i.getX(n+2);o=po(this,r,e,Ki,s,a,l,c,u,d,h,f),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==s)if(Array.isArray(r))for(let n=0,i=d.length;n<i;n++){const i=d[n],f=r[i.materialIndex];for(let n=Math.max(i.start,h.start),r=Math.min(s.count,Math.min(i.start+i.count,h.start+h.count));n<r;n+=3){o=po(this,f,e,Ki,s,a,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}}else{for(let n=Math.max(0,h.start),i=Math.min(s.count,h.start+h.count);n<i;n+=3){o=po(this,r,e,Ki,s,a,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function po(e,t,n,r,i,o,s,a,l,c,u,d){Ji.fromBufferAttribute(i,c),Qi.fromBufferAttribute(i,u),eo.fromBufferAttribute(i,d);const h=e.morphTargetInfluences;if(o&&h){io.set(0,0,0),oo.set(0,0,0),so.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=h[e],n=o[e];0!==t&&(to.fromBufferAttribute(n,c),no.fromBufferAttribute(n,u),ro.fromBufferAttribute(n,d),s?(io.addScaledVector(to,t),oo.addScaledVector(no,t),so.addScaledVector(ro,t)):(io.addScaledVector(to.sub(Ji),t),oo.addScaledVector(no.sub(Qi),t),so.addScaledVector(ro.sub(eo),t)))}Ji.add(io),Qi.add(oo),eo.add(so)}e.isSkinnedMesh&&(e.boneTransform(c,Ji),e.boneTransform(u,Qi),e.boneTransform(d,eo));const f=function(e,t,n,r,i,o,s,a){let l;if(l=t.side===m?r.intersectTriangle(s,o,i,!0,a):r.intersectTriangle(i,o,s,t.side!==g,a),null===l)return null;ho.copy(a),ho.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(ho);return c<n.near||c>n.far?null:{distance:c,point:ho.clone(),object:e}}(e,t,n,r,Ji,Qi,eo,uo);if(f){a&&(ao.fromBufferAttribute(a,c),lo.fromBufferAttribute(a,u),co.fromBufferAttribute(a,d),f.uv=vi.getUV(uo,Ji,Qi,eo,ao,lo,co,new Un)),l&&(ao.fromBufferAttribute(l,c),lo.fromBufferAttribute(l,u),co.fromBufferAttribute(l,d),f.uv2=vi.getUV(uo,Ji,Qi,eo,ao,lo,co,new Un));const e={a:c,b:u,c:d,normal:new ir,materialIndex:0};vi.getNormal(Ji,Qi,eo,e.normal),f.face=e}return f}fo.prototype.isMesh=!0;class mo extends qi{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const s=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const a=[],l=[],c=[],u=[];let d=0,h=0;function f(e,t,n,r,i,o,f,p,m,g,v){const y=o/m,b=f/g,w=o/2,x=f/2,_=p/2,S=m+1,E=g+1;let T=0,C=0;const M=new ir;for(let o=0;o<E;o++){const s=o*b-x;for(let a=0;a<S;a++){const d=a*y-w;M[e]=d*r,M[t]=s*i,M[n]=_,l.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=p>0?1:-1,c.push(M.x,M.y,M.z),u.push(a/m),u.push(1-o/g),T+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=d+t+S*e,r=d+t+S*(e+1),i=d+(t+1)+S*(e+1),o=d+(t+1)+S*e;a.push(n,r,o),a.push(r,i,o),C+=6}s.addGroup(h,C,v),h+=C,d+=T}f("z","y","x",-1,-1,n,t,e,o,i,0),f("z","y","x",1,-1,n,t,-e,o,i,1),f("x","z","y",1,1,e,n,t,r,o,2),f("x","z","y",1,-1,e,n,-t,r,o,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new Zi(l,3)),this.setAttribute("normal",new Zi(c,3)),this.setAttribute("uv",new Zi(u,2))}static fromJSON(e){return new mo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function go(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function vo(e){const t={};for(let n=0;n<e.length;n++){const r=go(e[n]);for(const e in r)t[e]=r[e]}return t}const yo={clone:go,merge:vo};class bo extends bi{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=go(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}bo.prototype.isShaderMaterial=!0;class wo extends si{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Nr,this.projectionMatrix=new Nr,this.projectionMatrixInverse=new Nr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}wo.prototype.isCamera=!0;class xo extends wo{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ln*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Rn*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ln*Math.atan(Math.tan(.5*Rn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Rn*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/s,r*=o.width/e,n*=o.height/s}const s=this.filmOffset;0!==s&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}xo.prototype.isPerspectiveCamera=!0;const _o=90;class So extends si{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new xo(_o,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ir(1,0,0)),this.add(r);const i=new xo(_o,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new ir(-1,0,0)),this.add(i);const o=new xo(_o,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new ir(0,1,0)),this.add(o);const s=new xo(_o,1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new ir(0,-1,0)),this.add(s);const a=new xo(_o,1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new ir(0,0,1)),this.add(a);const l=new xo(_o,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ir(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,s,a,l]=this.children,c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,a),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c}}class Eo extends Xn{constructor(e,t,n,r,i,o,s,a,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:oe,n,r,i,o,s,a,l,c),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Eo.prototype.isCubeTexture=!0;class To extends er{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new Eo(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:be,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Be,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new mo(5,5,5),i=new bo({name:"CubemapFromEquirect",uniforms:go(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:m,blending:b});i.uniforms.tEquirect.value=t;const o=new fo(r,i),s=t.minFilter;t.minFilter===_e&&(t.minFilter=be);return new So(1,10,this).update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}To.prototype.isWebGLCubeRenderTarget=!0;const Co=new ir,Mo=new ir,ko=new jn;class Po{constructor(e=new ir(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Co.subVectors(n,t).cross(Mo.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Co),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||ko.getNormalMatrix(e),r=this.coplanarPoint(Co).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Po.prototype.isPlane=!0;const Ao=new Cr,Io=new ir;class Ro{constructor(e=new Po,t=new Po,n=new Po,r=new Po,i=new Po,o=new Po){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(s-r,u-a,p-d,y-m).normalize(),t[1].setComponents(s+r,u+a,p+d,y+m).normalize(),t[2].setComponents(s+i,u+l,p+h,y+g).normalize(),t[3].setComponents(s-i,u-l,p-h,y-g).normalize(),t[4].setComponents(s-o,u-c,p-f,y-v).normalize(),t[5].setComponents(s+o,u+c,p+f,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Ao.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ao)}intersectsSprite(e){return Ao.center.set(0,0,0),Ao.radius=.7071067811865476,Ao.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ao)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Io.x=r.normal.x>0?e.max.x:e.min.x,Io.y=r.normal.y>0?e.max.y:e.min.y,Io.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Io)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Lo(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Oo(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,s=e.createBuffer();e.bindBuffer(r,s),e.bufferData(r,i,o),t.onUploadCallback();let a=5126;return i instanceof Float32Array?a=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?a=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):a=5123:i instanceof Int16Array?a=5122:i instanceof Uint32Array?a=5125:i instanceof Int32Array?a=5124:i instanceof Int8Array?a=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(a=5121),{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){const o=r.array,s=r.updateRange;e.bindBuffer(i,t),-1===s.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):e.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1)}(o.buffer,t,i),o.version=t.version)}}}class No extends qi{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,s=Math.floor(n),a=Math.floor(r),l=s+1,c=a+1,u=e/s,d=t/a,h=[],f=[],p=[],m=[];for(let e=0;e<c;e++){const t=e*d-o;for(let n=0;n<l;n++){const r=n*u-i;f.push(r,-t,0),p.push(0,0,1),m.push(n/s),m.push(1-e/a)}}for(let e=0;e<a;e++)for(let t=0;t<s;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),o=t+1+l*e;h.push(n,r,o),h.push(r,i,o)}this.setIndex(h),this.setAttribute("position",new Zi(f,3)),this.setAttribute("normal",new Zi(p,3)),this.setAttribute("uv",new Zi(m,2))}static fromJSON(e){return new No(e.width,e.height,e.widthSegments,e.heightSegments)}}const Do={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Fo={common:{diffuse:{value:new Ci(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new jn},uv2Transform:{value:new jn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Un(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ci(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ci(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new jn}},sprite:{diffuse:{value:new Ci(16777215)},opacity:{value:1},center:{value:new Un(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new jn}}},Bo={basic:{uniforms:vo([Fo.common,Fo.specularmap,Fo.envmap,Fo.aomap,Fo.lightmap,Fo.fog]),vertexShader:Do.meshbasic_vert,fragmentShader:Do.meshbasic_frag},lambert:{uniforms:vo([Fo.common,Fo.specularmap,Fo.envmap,Fo.aomap,Fo.lightmap,Fo.emissivemap,Fo.fog,Fo.lights,{emissive:{value:new Ci(0)}}]),vertexShader:Do.meshlambert_vert,fragmentShader:Do.meshlambert_frag},phong:{uniforms:vo([Fo.common,Fo.specularmap,Fo.envmap,Fo.aomap,Fo.lightmap,Fo.emissivemap,Fo.bumpmap,Fo.normalmap,Fo.displacementmap,Fo.fog,Fo.lights,{emissive:{value:new Ci(0)},specular:{value:new Ci(1118481)},shininess:{value:30}}]),vertexShader:Do.meshphong_vert,fragmentShader:Do.meshphong_frag},standard:{uniforms:vo([Fo.common,Fo.envmap,Fo.aomap,Fo.lightmap,Fo.emissivemap,Fo.bumpmap,Fo.normalmap,Fo.displacementmap,Fo.roughnessmap,Fo.metalnessmap,Fo.fog,Fo.lights,{emissive:{value:new Ci(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Do.meshphysical_vert,fragmentShader:Do.meshphysical_frag},toon:{uniforms:vo([Fo.common,Fo.aomap,Fo.lightmap,Fo.emissivemap,Fo.bumpmap,Fo.normalmap,Fo.displacementmap,Fo.gradientmap,Fo.fog,Fo.lights,{emissive:{value:new Ci(0)}}]),vertexShader:Do.meshtoon_vert,fragmentShader:Do.meshtoon_frag},matcap:{uniforms:vo([Fo.common,Fo.bumpmap,Fo.normalmap,Fo.displacementmap,Fo.fog,{matcap:{value:null}}]),vertexShader:Do.meshmatcap_vert,fragmentShader:Do.meshmatcap_frag},points:{uniforms:vo([Fo.points,Fo.fog]),vertexShader:Do.points_vert,fragmentShader:Do.points_frag},dashed:{uniforms:vo([Fo.common,Fo.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Do.linedashed_vert,fragmentShader:Do.linedashed_frag},depth:{uniforms:vo([Fo.common,Fo.displacementmap]),vertexShader:Do.depth_vert,fragmentShader:Do.depth_frag},normal:{uniforms:vo([Fo.common,Fo.bumpmap,Fo.normalmap,Fo.displacementmap,{opacity:{value:1}}]),vertexShader:Do.meshnormal_vert,fragmentShader:Do.meshnormal_frag},sprite:{uniforms:vo([Fo.sprite,Fo.fog]),vertexShader:Do.sprite_vert,fragmentShader:Do.sprite_frag},background:{uniforms:{uvTransform:{value:new jn},t2D:{value:null}},vertexShader:Do.background_vert,fragmentShader:Do.background_frag},cube:{uniforms:vo([Fo.envmap,{opacity:{value:1}}]),vertexShader:Do.cube_vert,fragmentShader:Do.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Do.equirect_vert,fragmentShader:Do.equirect_frag},distanceRGBA:{uniforms:vo([Fo.common,Fo.displacementmap,{referencePosition:{value:new ir},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Do.distanceRGBA_vert,fragmentShader:Do.distanceRGBA_frag},shadow:{uniforms:vo([Fo.lights,Fo.fog,{color:{value:new Ci(0)},opacity:{value:1}}]),vertexShader:Do.shadow_vert,fragmentShader:Do.shadow_frag}};function Zo(e,t,n,r,i){const o=new Ci(0);let s,a,l=0,c=null,u=0,d=null;function h(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),l=t,h(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,h(o,l)},render:function(n,i){let f=!1,g=!0===i.isScene?i.background:null;g&&g.isTexture&&(g=t.get(g));const v=e.xr,y=v.getSession&&v.getSession();y&&"additive"===y.environmentBlendMode&&(g=null),null===g?h(o,l):g&&g.isColor&&(h(g,1),f=!0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||g.mapping===ce)?(void 0===a&&(a=new fo(new mo(1,1,1),new bo({name:"BackgroundCubeMaterial",uniforms:go(Bo.cube.uniforms),vertexShader:Bo.cube.vertexShader,fragmentShader:Bo.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(a)),a.material.uniforms.envMap.value=g,a.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,c===g&&u===g.version&&d===e.toneMapping||(a.material.needsUpdate=!0,c=g,u=g.version,d=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):g&&g.isTexture&&(void 0===s&&(s=new fo(new No(2,2),new bo({name:"BackgroundMaterial",uniforms:go(Bo.background.uniforms),vertexShader:Bo.background.vertexShader,fragmentShader:Bo.background.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),s.material.uniforms.uvTransform.value.copy(g.matrix),c===g&&u===g.version&&d===e.toneMapping||(s.material.needsUpdate=!0,c=g,u=g.version,d=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null))}}}function Vo(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||null!==o,a={},l=h(null);let c=l;function u(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function h(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,i){const o=c.newAttributes,s=c.enabledAttributes,a=c.attributeDivisors;if(o[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),a[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i}}function g(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,i,o,s,a){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,s,a):e.vertexAttribIPointer(t,n,i,s,a)}function y(){b(),c!==l&&(c=l,u(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,y,b){let w=!1;if(s){const t=function(t,n,i){const s=!0===i.wireframe;let l=a[t.id];void 0===l&&(l={},a[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[s];void 0===u&&(u=h(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[s]=u);return u}(y,d,l);c!==t&&(c=t,u(c.object)),w=function(e,t){const n=c.attributes,r=e.attributes;let i=0;for(const e in r){const t=n[e],o=r[e];if(void 0===t)return!0;if(t.attribute!==o)return!0;if(t.data!==o.data)return!0;i++}return c.attributesNum!==i||c.index!==t}(y,b),w&&function(e,t){const n={},r=e.attributes;let i=0;for(const e in r){const t=r[e],o={};o.attribute=t,t.data&&(o.data=t.data),n[e]=o,i++}c.attributes=n,c.attributesNum=i,c.index=t}(y,b)}else{const e=!0===l.wireframe;c.geometry===y.id&&c.program===d.id&&c.wireframe===e||(c.geometry=y.id,c.program=d.id,c.wireframe=e,w=!0)}!0===i.isInstancedMesh&&(w=!0),null!==b&&n.update(b,34963),w&&(!function(i,o,s,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=a.attributes,c=s.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const t=o.normalized,s=o.itemSize,l=n.get(o);if(void 0===l)continue;const c=l.buffer,u=l.type,d=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,h=o.offset;if(n&&n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)m(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)p(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)v(r.location+e,s/r.locationSize,u,t,l*d,(h+s/r.locationSize*e)*d)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)m(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)p(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)v(r.location+e,s/r.locationSize,u,t,s*d,s/r.locationSize*e*d)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}g()}(i,l,d,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete a[e]}},releaseStatesOfGeometry:function(e){if(void 0===a[e.id])return;const t=a[e.id];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete a[e.id]},releaseStatesOfProgram:function(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)d(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:g}}function zo(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,s,a){if(0===a)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,s,a),n.update(s,o,a)}}function Uo(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const a=i(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const l=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=d>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?e.getParameter(36183):0}}function jo(e){const t=this;let n=null,r=0,i=!1,o=!1;const s=new Po,a=new jn,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==o;++t,n+=4)s.copy(e[t]).applyMatrix4(i,a),s.normal.toArray(c,n),c[n+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const s=0!==e.length||t||0!==r||i;return i=t,n=u(e,o,0),r=e.length,s},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(t,s,a){const d=t.clippingPlanes,h=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===d||0===d.length||o&&!f)o?u(null):c();else{const e=o?0:r,t=4*e;let i=p.clippingState||null;l.value=i,i=u(d,s,t,a);for(let e=0;e!==t;++e)i[e]=n[e];p.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Ho(e){let t=new WeakMap;function n(e,t){return t===ae?e.mapping=oe:t===le&&(e.mapping=se),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(o===ae||o===le){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const s=e.getRenderTarget(),a=new To(o.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),e.setRenderTarget(s),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}Bo.physical={uniforms:vo([Bo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Un(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ci(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Un},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ci(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Ci(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Do.meshphysical_vert,fragmentShader:Do.meshphysical_frag};class Go extends wo{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,s=r+t,a=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,s-=t*this.view.offsetY,a=s-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Go.prototype.isOrthographicCamera=!0;class Wo extends bo{constructor(e){super(e),this.type="RawShaderMaterial"}}Wo.prototype.isRawShaderMaterial=!0;const $o=Math.pow(2,8),qo=[.125,.215,.35,.446,.526,.582],Yo=5+qo.length,Ko=20,Xo={[Yt]:0,[Kt]:1},Jo=new Go,{_lodPlanes:Qo,_sizeLods:es,_sigmas:ts}=ls(),ns=new Ci;let rs=null;const is=(1+Math.sqrt(5))/2,os=1/is,ss=[new ir(1,1,1),new ir(-1,1,1),new ir(1,1,-1),new ir(-1,1,-1),new ir(0,is,os),new ir(0,is,-os),new ir(os,0,is),new ir(-os,0,is),new ir(is,os,0),new ir(-is,os,0)];class as{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),n=new ir(0,1,0);return new Wo({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:fs(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${ps()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}(Ko),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){rs=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=hs(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=ds(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Qo.length;e++)Qo[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(rs),e.scissorTest=!1,us(e,0,0,e.width,e.height)}_fromTexture(e){rs=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:be,minFilter:be,generateMipmaps:!1,type:Ie,format:Be,encoding:Yt,depthBuffer:!1},n=cs(t);return n.depthBuffer=!e,this._pingPongRenderTarget=cs(t),n}_compileMaterial(e){const t=new fo(Qo[0],e);this._renderer.compile(t,Jo)}_sceneToCubeUV(e,t,n,r){const i=new xo(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(ns),a.toneMapping=J,a.autoClear=!1;const u=new Mi({name:"PMREM.Background",side:m,depthWrite:!1,depthTest:!1}),d=new fo(new mo,u);let h=!1;const f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,h=!0):(u.color.copy(ns),h=!0);for(let t=0;t<6;t++){const n=t%3;0==n?(i.up.set(0,o[t],0),i.lookAt(s[t],0,0)):1==n?(i.up.set(0,0,o[t]),i.lookAt(0,s[t],0)):(i.up.set(0,o[t],0),i.lookAt(0,0,s[t])),us(r,n*$o,t>2?$o:0,$o,$o),a.setRenderTarget(r),h&&a.render(d,i),a.render(e,i)}d.geometry.dispose(),d.material.dispose(),a.toneMapping=c,a.autoClear=l,e.background=f}_setEncoding(e,t){!0===this._renderer.capabilities.isWebGL2&&t.format===Be&&t.type===Ee&&t.encoding===Kt?e.value=Xo[Yt]:e.value=Xo[t.encoding]}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===oe||e.mapping===se;r?null==this._cubemapShader&&(this._cubemapShader=hs()):null==this._equirectShader&&(this._equirectShader=ds());const i=r?this._cubemapShader:this._equirectShader,o=new fo(Qo[0],i),s=i.uniforms;s.envMap.value=e,r||s.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(s.inputEncoding,e),us(t,0,0,3*$o,2*$o),n.setRenderTarget(t),n.render(o,Jo)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<Yo;t++){const n=Math.sqrt(ts[t]*ts[t]-ts[t-1]*ts[t-1]),r=ss[(t-1)%ss.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,s){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new fo(Qo[r],l),u=l.uniforms,d=es[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,f=i/h,p=isFinite(i)?1+Math.floor(3*f):Ko;p>Ko&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<Ko;++e){const t=e/f,n=Math.exp(-t*t/2);m.push(n),0==e?g+=n:e<p&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===o,s&&(u.poleAxis.value=s),u.dTheta.value=h,u.mipInt.value=8-n;const v=es[r];us(t,3*Math.max(0,$o-2*v),(0===r?0:2*$o)+2*v*(r>4?r-8+4:0),3*v,2*v),a.setRenderTarget(t),a.render(c,Jo)}}function ls(){const e=[],t=[],n=[];let r=8;for(let i=0;i<Yo;i++){const o=Math.pow(2,r);t.push(o);let s=1/o;i>4?s=qo[i-8+4-1]:0==i&&(s=0),n.push(s);const a=1/(o-1),l=-a/2,c=1+a/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],d=6,h=6,f=3,p=2,m=1,g=new Float32Array(f*h*d),v=new Float32Array(p*h*d),y=new Float32Array(m*h*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(r,f*h*e),v.set(u,p*h*e);const i=[e,e,e,e,e,e];y.set(i,m*h*e)}const b=new qi;b.setAttribute("position",new Ai(g,f)),b.setAttribute("uv",new Ai(v,p)),b.setAttribute("faceIndex",new Ai(y,m)),e.push(b),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function cs(e){const t=new er(3*$o,3*$o,e);return t.texture.mapping=ce,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function us(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function ds(){const e=new Un(1,1);return new Wo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Xo[Yt]}},vertexShader:fs(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${ps()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}function hs(){return new Wo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Xo[Yt]}},vertexShader:fs(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${ps()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}function fs(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function ps(){return"\n\n\t\tuniform int inputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function ms(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping,s=o===ae||o===le,a=o===oe||o===se;if(s||a){if(t.has(i))return t.get(i).texture;{const o=i.image;if(s&&o&&o.height>0||a&&o&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(o)){const o=e.getRenderTarget();null===n&&(n=new as(e));const a=s?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,a),e.setRenderTarget(o),i.addEventListener("dispose",r),a.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function gs(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function vs(e,t,n,r){const i={},o=new WeakMap;function s(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const e in a.attributes)t.remove(a.attributes[e]);a.removeEventListener("dispose",s),delete i[a.id];const l=o.get(a);l&&(t.remove(l),o.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],r=e.index,i=e.attributes.position;let s=0;if(null!==r){const e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;s=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const a=new(Hn(n)>65535?Fi:Ni)(n,1);a.version=s;const l=o.get(e);l&&t.remove(l),o.set(e,a)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return o.get(e)}}}function ys(e,t,n,r){const i=r.isWebGL2;let o,s,a;this.setMode=function(e){o=e},this.setIndex=function(e){s=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,s,t*a),n.update(r,o,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,d;if(i)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](o,l,s,r*a,c),n.update(l,o,c)}}function bs(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}class ws extends Xn{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=pe,this.minFilter=pe,this.wrapR=he,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function xs(e,t){return e[0]-t[0]}function _s(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Ss(e,t){let n=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function Es(e,t,n){const r={},i=new Float32Array(8),o=new WeakMap,s=new ir,a=[];for(let e=0;e<8;e++)a[e]=[e,0];return{update:function(l,c,u,d){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const r=c.morphAttributes.position.length;let i=o.get(c);if(void 0===i||i.count!==r){void 0!==i&&i.texture.dispose();const e=void 0!==c.morphAttributes.normal,n=c.morphAttributes.position,a=c.morphAttributes.normal||[],l=!0===e?2:1;let u=c.attributes.position.count*l,d=1;u>t.maxTextureSize&&(d=Math.ceil(u/t.maxTextureSize),u=t.maxTextureSize);const h=new Float32Array(u*d*4*r),f=new ws(h,u,d,r);f.format=Be,f.type=Ae,f.needsUpdate=!0;const p=4*l;for(let t=0;t<r;t++){const r=n[t],i=a[t],o=u*d*4*t;for(let t=0;t<r.count;t++){s.fromBufferAttribute(r,t),!0===r.normalized&&Ss(s,r);const n=t*p;h[o+n+0]=s.x,h[o+n+1]=s.y,h[o+n+2]=s.z,h[o+n+3]=0,!0===e&&(s.fromBufferAttribute(i,t),!0===i.normalized&&Ss(s,i),h[o+n+4]=s.x,h[o+n+5]=s.y,h[o+n+6]=s.z,h[o+n+7]=0)}}i={count:r,texture:f,size:new Un(u,d)},o.set(c,i)}let a=0;for(let e=0;e<h.length;e++)a+=h[e];const l=c.morphTargetsRelative?1:1-a;d.getUniforms().setValue(e,"morphTargetBaseInfluence",l),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",i.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",i.size)}else{const t=void 0===h?0:h.length;let n=r[c.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[c.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=h[e]}n.sort(_s);for(let e=0;e<8;e++)e<t&&n[e][1]?(a[e][0]=n[e][0],a[e][1]=n[e][1]):(a[e][0]=Number.MAX_SAFE_INTEGER,a[e][1]=0);a.sort(xs);const o=c.morphAttributes.position,s=c.morphAttributes.normal;let l=0;for(let e=0;e<8;e++){const t=a[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(o&&c.getAttribute("morphTarget"+e)!==o[n]&&c.setAttribute("morphTarget"+e,o[n]),s&&c.getAttribute("morphNormal"+e)!==s[n]&&c.setAttribute("morphNormal"+e,s[n]),i[e]=r,l+=r):(o&&!0===c.hasAttribute("morphTarget"+e)&&c.deleteAttribute("morphTarget"+e),s&&!0===c.hasAttribute("morphNormal"+e)&&c.deleteAttribute("morphNormal"+e),i[e]=0)}const u=c.morphTargetsRelative?1:1-l;d.getUniforms().setValue(e,"morphTargetBaseInfluence",u),d.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Ts(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const s=r.render.frame,a=e.geometry,l=t.get(e,a);return i.get(l)!==s&&(t.update(l),i.set(l,s)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}ws.prototype.isDataTexture2DArray=!0;class Cs extends Xn{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=pe,this.minFilter=pe,this.wrapR=he,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Cs.prototype.isDataTexture3D=!0;const Ms=new Xn,ks=new ws,Ps=new Cs,As=new Eo,Is=[],Rs=[],Ls=new Float32Array(16),Os=new Float32Array(9),Ns=new Float32Array(4);function Ds(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=Is[i];if(void 0===o&&(o=new Float32Array(i),Is[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function Fs(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Bs(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Zs(e,t){let n=Rs[t];void 0===n&&(n=new Int32Array(t),Rs[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Vs(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function zs(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Fs(n,t))return;e.uniform2fv(this.addr,t),Bs(n,t)}}function Us(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Fs(n,t))return;e.uniform3fv(this.addr,t),Bs(n,t)}}function js(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Fs(n,t))return;e.uniform4fv(this.addr,t),Bs(n,t)}}function Hs(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Fs(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Bs(n,t)}else{if(Fs(n,r))return;Ns.set(r),e.uniformMatrix2fv(this.addr,!1,Ns),Bs(n,r)}}function Gs(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Fs(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Bs(n,t)}else{if(Fs(n,r))return;Os.set(r),e.uniformMatrix3fv(this.addr,!1,Os),Bs(n,r)}}function Ws(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Fs(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Bs(n,t)}else{if(Fs(n,r))return;Ls.set(r),e.uniformMatrix4fv(this.addr,!1,Ls),Bs(n,r)}}function $s(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function qs(e,t){const n=this.cache;Fs(n,t)||(e.uniform2iv(this.addr,t),Bs(n,t))}function Ys(e,t){const n=this.cache;Fs(n,t)||(e.uniform3iv(this.addr,t),Bs(n,t))}function Ks(e,t){const n=this.cache;Fs(n,t)||(e.uniform4iv(this.addr,t),Bs(n,t))}function Xs(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Js(e,t){const n=this.cache;Fs(n,t)||(e.uniform2uiv(this.addr,t),Bs(n,t))}function Qs(e,t){const n=this.cache;Fs(n,t)||(e.uniform3uiv(this.addr,t),Bs(n,t))}function ea(e,t){const n=this.cache;Fs(n,t)||(e.uniform4uiv(this.addr,t),Bs(n,t))}function ta(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Ms,i)}function na(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Ps,i)}function ra(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||As,i)}function ia(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||ks,i)}function oa(e,t){e.uniform1fv(this.addr,t)}function sa(e,t){const n=Ds(t,this.size,2);e.uniform2fv(this.addr,n)}function aa(e,t){const n=Ds(t,this.size,3);e.uniform3fv(this.addr,n)}function la(e,t){const n=Ds(t,this.size,4);e.uniform4fv(this.addr,n)}function ca(e,t){const n=Ds(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function ua(e,t){const n=Ds(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function da(e,t){const n=Ds(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function ha(e,t){e.uniform1iv(this.addr,t)}function fa(e,t){e.uniform2iv(this.addr,t)}function pa(e,t){e.uniform3iv(this.addr,t)}function ma(e,t){e.uniform4iv(this.addr,t)}function ga(e,t){e.uniform1uiv(this.addr,t)}function va(e,t){e.uniform2uiv(this.addr,t)}function ya(e,t){e.uniform3uiv(this.addr,t)}function ba(e,t){e.uniform4uiv(this.addr,t)}function wa(e,t,n){const r=t.length,i=Zs(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTexture2D(t[e]||Ms,i[e])}function xa(e,t,n){const r=t.length,i=Zs(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTexture3D(t[e]||Ps,i[e])}function _a(e,t,n){const r=t.length,i=Zs(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTextureCube(t[e]||As,i[e])}function Sa(e,t,n){const r=t.length,i=Zs(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.setTexture2DArray(t[e]||ks,i[e])}function Ea(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Vs;case 35664:return zs;case 35665:return Us;case 35666:return js;case 35674:return Hs;case 35675:return Gs;case 35676:return Ws;case 5124:case 35670:return $s;case 35667:case 35671:return qs;case 35668:case 35672:return Ys;case 35669:case 35673:return Ks;case 5125:return Xs;case 36294:return Js;case 36295:return Qs;case 36296:return ea;case 35678:case 36198:case 36298:case 36306:case 35682:return ta;case 35679:case 36299:case 36307:return na;case 35680:case 36300:case 36308:case 36293:return ra;case 36289:case 36303:case 36311:case 36292:return ia}}(t.type)}function Ta(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return oa;case 35664:return sa;case 35665:return aa;case 35666:return la;case 35674:return ca;case 35675:return ua;case 35676:return da;case 5124:case 35670:return ha;case 35667:case 35671:return fa;case 35668:case 35672:return pa;case 35669:case 35673:return ma;case 5125:return ga;case 36294:return va;case 36295:return ya;case 36296:return ba;case 35678:case 36198:case 36298:case 36306:case 35682:return wa;case 35679:case 36299:case 36307:return xa;case 35680:case 36300:case 36308:case 36293:return _a;case 36289:case 36303:case 36311:case 36292:return Sa}}(t.type)}function Ca(e){this.id=e,this.seq=[],this.map={}}Ta.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Bs(t,e)},Ca.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}};const Ma=/(\w+)(\])?(\[|\.)?/g;function ka(e,t){e.seq.push(t),e.map[t.id]=t}function Pa(e,t,n){const r=e.name,i=r.length;for(Ma.lastIndex=0;;){const o=Ma.exec(r),s=Ma.lastIndex;let a=o[1];const l="]"===o[2],c=o[3];if(l&&(a|=0),void 0===c||"["===c&&s+2===i){ka(n,void 0===c?new Ea(a,e,t):new Ta(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new Ca(a),ka(n,e)),n=e}}}function Aa(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Pa(n,e.getUniformLocation(t,n.name),this)}}function Ia(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Aa.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Aa.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},Aa.upload=function(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},Aa.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let Ra=0;function La(e){switch(e){case Yt:return["Linear","( value )"];case Kt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Oa(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":n.toUpperCase()+"\n\n"+i+"\n\n"+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Na(e,t){const n=La(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Da(e,t){const n=La(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Fa(e,t){let n;switch(t){case Q:n="Linear";break;case ee:n="Reinhard";break;case te:n="OptimizedCineon";break;case ne:n="ACESFilmic";break;case re:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ba(e){return""!==e}function Za(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Va(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const za=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ua(e){return e.replace(za,ja)}function ja(e,t){const n=Do[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ua(n)}const Ha=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ga=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Wa(e){return e.replace(Ga,qa).replace(Ha,$a)}function $a(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),qa(e,t,n,r)}function qa(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function Ya(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Ka(e,t,n,r){const i=e.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===d?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===f&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case oe:case se:t="ENVMAP_TYPE_CUBE";break;case ce:case ue:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case se:case ue:t="ENVMAP_MODE_REFRACTION"}return t}(n),p=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Y:t="ENVMAP_BLENDING_MULTIPLY";break;case K:t="ENVMAP_BLENDING_MIX";break;case X:t="ENVMAP_BLENDING_ADD"}return t}(n),m=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ba).join("\n")}(n),g=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),v=i.createProgram();let y,b,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(y=[g].filter(Ba).join("\n"),y.length>0&&(y+="\n"),b=[m,g].filter(Ba).join("\n"),b.length>0&&(b+="\n")):(y=[Ya(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ba).join("\n"),b=[m,Ya(n),"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==J?"#define TONE_MAPPING":"",n.toneMapping!==J?Do.tonemapping_pars_fragment:"",n.toneMapping!==J?Fa("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===Fe?"#define OPAQUE":"",Do.encodings_pars_fragment,n.map?Na("mapTexelToLinear",n.mapEncoding):"",n.matcap?Na("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Na("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Na("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?Na("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?Na("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?Na("lightMapTexelToLinear",n.lightMapEncoding):"",Da("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ba).join("\n")),s=Ua(s),s=Za(s,n),s=Va(s,n),a=Ua(a),a=Za(a,n),a=Va(a,n),s=Wa(s),a=Wa(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,b=["#define varying in",n.glslVersion===kn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===kn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const x=w+b+a,_=Ia(i,35633,w+y+s),S=Ia(i,35632,x);if(i.attachShader(v,_),i.attachShader(v,S),void 0!==n.index0AttributeName?i.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(v).trim(),t=i.getShaderInfoLog(_).trim(),n=i.getShaderInfoLog(S).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(v,35714)){r=!1;const t=Oa(i,_,"vertex"),n=Oa(i,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:y},fragmentShader:{log:n,prefix:b}})}let E,T;return i.deleteShader(_),i.deleteShader(S),this.getUniforms=function(){return void 0===E&&(E=new Aa(i,v)),E},this.getAttributes=function(){return void 0===T&&(T=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let s=1;35674===r.type&&(s=2),35675===r.type&&(s=3),35676===r.type&&(s=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(i,v)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Ra++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=_,this.fragmentShader=S,this}let Xa=0;class Ja{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const n=new Qa;t.set(e,n)}return t.get(e)}}class Qa{constructor(){this.id=Xa++,this.usedTimes=0}}function el(e,t,n,r,i,o,s){const a=new Wr,l=new Ja,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.floatVertexTextures,f=i.maxVertexUniforms,p=i.vertexTextures;let v=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Yt,u&&e&&e.isTexture&&e.format===Be&&e.type===Ee&&e.encoding===Kt&&(t=Yt),t}return{getParameters:function(o,a,c,w,x){const _=w.fog,S=o.isMeshStandardMaterial?w.environment:null,E=(o.isMeshStandardMaterial?n:t).get(o.envMap||S),T=y[o.type],C=x.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(h)return 1024;{const e=f,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(x):0;let M,k,P,A;if(null!==o.precision&&(v=i.getMaxPrecision(o.precision),v!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",v,"instead.")),T){const e=Bo[T];M=e.vertexShader,k=e.fragmentShader}else M=o.vertexShader,k=o.fragmentShader,l.update(o),P=l.getVertexShaderID(o),A=l.getFragmentShaderID(o);const I=e.getRenderTarget(),R=o.alphaTest>0,L=o.clearcoat>0;return{isWebGL2:u,shaderID:T,shaderName:o.type,vertexShader:M,fragmentShader:k,defines:o.defines,customVertexShaderID:P,customFragmentShaderID:A,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:v,instancing:!0===x.isInstancedMesh,instancingColor:!0===x.isInstancedMesh&&null!==x.instanceColor,supportsVertexTextures:p,outputEncoding:null!==I?b(I.texture):e.outputEncoding,map:!!o.map,mapEncoding:b(o.map),matcap:!!o.matcap,matcapEncoding:b(o.matcap),envMap:!!E,envMapMode:E&&E.mapping,envMapEncoding:b(E),envMapCubeUV:!!E&&(E.mapping===ce||E.mapping===ue),lightMap:!!o.lightMap,lightMapEncoding:b(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:b(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===en,tangentSpaceNormalMap:o.normalMapType===Qt,clearcoat:L,clearcoatMap:L&&!!o.clearcoatMap,clearcoatRoughnessMap:L&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:L&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,specularColorMapEncoding:b(o.specularColorMap),alphaMap:!!o.alphaMap,alphaTest:R,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenColorMapEncoding:b(o.sheenColorMap),sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!x.geometry&&!!x.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!x.geometry&&!!x.geometry.attributes.color&&4===x.geometry.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheenColorMap||o.sheenRoughnessMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!_,useFog:o.fog,fogExp2:_&&_.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===x.isSkinnedMesh&&C>0,maxBones:C,useVertexTexture:h,morphTargets:!!x.geometry&&!!x.geometry.morphAttributes.position,morphNormals:!!x.geometry&&!!x.geometry.morphAttributes.normal,morphTargetsCount:x.geometry&&x.geometry.morphAttributes.position?x.geometry.morphAttributes.position.length:0,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,format:o.format,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:J,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===g,flipSided:o.side===m,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.mapEncoding),e.push(t.matcapEncoding),e.push(t.envMapMode),e.push(t.envMapEncoding),e.push(t.lightMapEncoding),e.push(t.emissiveMapEncoding),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.maxBones),e.push(t.morphTargetsCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.format),e.push(t.specularColorMapEncoding),e.push(t.sheenColorMapEncoding)}(n,t),function(e,t){a.disableAll(),t.isWebGL2&&a.enable(0);t.supportsVertexTextures&&a.enable(1);t.instancing&&a.enable(2);t.instancingColor&&a.enable(3);t.map&&a.enable(4);t.matcap&&a.enable(5);t.envMap&&a.enable(6);t.envMapCubeUV&&a.enable(7);t.lightMap&&a.enable(8);t.aoMap&&a.enable(9);t.emissiveMap&&a.enable(10);t.bumpMap&&a.enable(11);t.normalMap&&a.enable(12);t.objectSpaceNormalMap&&a.enable(13);t.tangentSpaceNormalMap&&a.enable(14);t.clearcoat&&a.enable(15);t.clearcoatMap&&a.enable(16);t.clearcoatRoughnessMap&&a.enable(17);t.clearcoatNormalMap&&a.enable(18);t.displacementMap&&a.enable(19);t.specularMap&&a.enable(20);t.roughnessMap&&a.enable(21);t.metalnessMap&&a.enable(22);t.gradientMap&&a.enable(23);t.alphaMap&&a.enable(24);t.alphaTest&&a.enable(25);t.vertexColors&&a.enable(26);t.vertexAlphas&&a.enable(27);t.vertexUvs&&a.enable(28);t.vertexTangents&&a.enable(29);t.uvsVertexOnly&&a.enable(30);t.fog&&a.enable(31);e.push(a.mask),a.disableAll(),t.useFog&&a.enable(0);t.flatShading&&a.enable(1);t.logarithmicDepthBuffer&&a.enable(2);t.skinning&&a.enable(3);t.useVertexTexture&&a.enable(4);t.morphTargets&&a.enable(5);t.morphNormals&&a.enable(6);t.premultipliedAlpha&&a.enable(7);t.shadowMapEnabled&&a.enable(8);t.physicallyCorrectLights&&a.enable(9);t.doubleSided&&a.enable(10);t.flipSided&&a.enable(11);t.depthPacking&&a.enable(12);t.dithering&&a.enable(13);t.specularIntensityMap&&a.enable(14);t.specularColorMap&&a.enable(15);t.transmission&&a.enable(16);t.transmissionMap&&a.enable(17);t.thicknessMap&&a.enable(18);t.sheen&&a.enable(19);t.sheenColorMap&&a.enable(20);t.sheenRoughnessMap&&a.enable(21);e.push(a.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=y[e.type];let n;if(t){const e=Bo[t];n=yo.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Ka(e,n,t,o),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function tl(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function nl(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function rl(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function il(){const e=[];let t=0;const n=[],r=[],i=[];function o(n,r,i,o,s,a){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=a),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,s,a,l,c){const u=o(e,t,s,a,l,c);s.transmission>0?r.push(u):!0===s.transparent?i.push(u):n.push(u)},unshift:function(e,t,s,a,l,c){const u=o(e,t,s,a,l,c);s.transmission>0?r.unshift(u):!0===s.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||nl),r.length>1&&r.sort(t||rl),i.length>1&&i.sort(t||rl)}}}function ol(){let e=new WeakMap;return{get:function(t,n){let r;return!1===e.has(t)?(r=new il,e.set(t,[r])):n>=e.get(t).length?(r=new il,e.get(t).push(r)):r=e.get(t)[n],r},dispose:function(){e=new WeakMap}}}function sl(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new ir,color:new Ci};break;case"SpotLight":n={position:new ir,direction:new ir,color:new Ci,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ir,color:new Ci,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ir,skyColor:new Ci,groundColor:new Ci};break;case"RectAreaLight":n={color:new Ci,position:new ir,halfWidth:new ir,halfHeight:new ir}}return e[t.id]=n,n}}}let al=0;function ll(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function cl(e,t){const n=new sl,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Un};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Un,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)i.probe.push(new ir);const o=new ir,s=new Nr,a=new Nr;return{setup:function(o,s){let a=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0;o.sort(ll);const y=!0!==s?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],s=t.color,b=t.intensity,w=t.distance,x=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=s.r*b*y,l+=s.g*b*y,c+=s.b*b*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],b);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=x,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(b*y),e.distance=w,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=x,i.spotShadowMatrix[h]=t.shadow.matrix,v++}i.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(b),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=x,i.pointShadowMatrix[d]=t.shadow.matrix,g++}i.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(b*y),e.groundColor.copy(t.groundColor).multiplyScalar(b*y),i.hemi[p]=e,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Fo.LTC_FLOAT_1,i.rectAreaLTC2=Fo.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Fo.LTC_HALF_1,i.rectAreaLTC2=Fo.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=l,i.ambient[2]=c;const b=i.hash;b.directionalLength===u&&b.pointLength===d&&b.spotLength===h&&b.rectAreaLength===f&&b.hemiLength===p&&b.numDirectionalShadows===m&&b.numPointShadows===g&&b.numSpotShadows===v||(i.directional.length=u,i.spot.length=h,i.rectArea.length=f,i.point.length=d,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,b.directionalLength=u,b.pointLength=d,b.spotLength=h,b.rectAreaLength=f,b.hemiLength=p,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=v,i.version=al++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){const h=e[t];if(h.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),o.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),n++}else if(h.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(h.matrixWorld),o.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),l++}else if(h.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),a.identity(),s.copy(h.matrixWorld),s.premultiply(d),a.extractRotation(s),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(h.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),r++}else if(h.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(d),e.direction.normalize(),u++}}},state:i}}function ul(e,t){const n=new cl(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function dl(e,t){let n=new WeakMap;return{get:function(r,i=0){let o;return!1===n.has(r)?(o=new ul(e,t),n.set(r,[o])):i>=n.get(r).length?(o=new ul(e,t),n.get(r).push(o)):o=n.get(r)[i],o},dispose:function(){n=new WeakMap}}}class hl extends bi{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=Xt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}hl.prototype.isMeshDepthMaterial=!0;class fl extends bi{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new ir,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}fl.prototype.isMeshDistanceMaterial=!0;function pl(e,t,n){let r=new Ro;const i=new Un,o=new Un,s=new Qn,a=new hl({depthPacking:Jt}),l=new fl,c={},u=n.maxTextureSize,h={0:m,1:p,2:g},v=new bo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Un},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const w=new qi;w.setAttribute("position",new Ai(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new fo(w,v),_=this;function S(n,r){const i=t.update(x);v.defines.VSM_SAMPLES!==n.blurSamples&&(v.defines.VSM_SAMPLES=n.blurSamples,y.defines.VSM_SAMPLES=n.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),v.uniforms.shadow_pass.value=n.map.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,v,x,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,y,x,null)}function E(t,n,r,i,o,s,u){let d=null;const p=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(d=void 0!==p?p:!0===i.isPointLight?l:a,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){const e=d.uuid,t=r.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let i=n[t];void 0===i&&(i=d.clone(),n[t]=i),d=i}return d.visible=r.visible,d.wireframe=r.wireframe,d.side=u===f?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],d.alphaMap=r.alphaMap,d.alphaTest=r.alphaTest,d.clipShadows=r.clipShadows,d.clippingPlanes=r.clippingPlanes,d.clipIntersection=r.clipIntersection,d.displacementMap=r.displacementMap,d.displacementScale=r.displacementScale,d.displacementBias=r.displacementBias,d.wireframeLinewidth=r.wireframeLinewidth,d.linewidth=r.linewidth,!0===i.isPointLight&&!0===d.isMeshDistanceMaterial&&(d.referencePosition.setFromMatrixPosition(i.matrixWorld),d.nearDistance=o,d.farDistance=s),d}function T(n,i,o,s,a){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===f)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=E(n,0,u,s,o.near,o.far,a);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){const t=E(n,0,i,s,o.near,o.far,a);e.renderBufferDirect(o,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)T(l[e],i,o,s,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=d,this.render=function(t,n,a){if(!1===_.enabled)return;if(!1===_.autoUpdate&&!1===_.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(b),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let l=0,c=t.length;l<c;l++){const c=t[l],d=c.shadow;if(void 0===d){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===d.autoUpdate&&!1===d.needsUpdate)continue;i.copy(d.mapSize);const p=d.getFrameExtents();if(i.multiply(p),o.copy(d.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/p.x),i.x=o.x*p.x,d.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/p.y),i.y=o.y*p.y,d.mapSize.y=o.y)),null===d.map&&!d.isPointLightShadow&&this.type===f){const e={minFilter:be,magFilter:be,format:Be};d.map=new er(i.x,i.y,e),d.map.texture.name=c.name+".shadowMap",d.mapPass=new er(i.x,i.y,e),d.camera.updateProjectionMatrix()}if(null===d.map){const e={minFilter:pe,magFilter:pe,format:Be};d.map=new er(i.x,i.y,e),d.map.texture.name=c.name+".shadowMap",d.camera.updateProjectionMatrix()}e.setRenderTarget(d.map),e.clear();const m=d.getViewportCount();for(let e=0;e<m;e++){const t=d.getViewport(e);s.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),h.viewport(s),d.updateMatrices(c,e),r=d.getFrustum(),T(n,a,d.camera,c,this.type)}d.isPointLightShadow||this.type!==f||S(d,a),d.needsUpdate=!1}_.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function ml(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new Qn;let r=null;const i=new Qn(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,s,a){!0===a&&(t*=s,r*=s,o*=s),n.set(t,r,o,s),!1===i.equals(n)&&(e.clearColor(t,r,o,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?ve(2929):ye(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case z:e.depthFunc(512);break;case U:e.depthFunc(519);break;case j:e.depthFunc(513);break;case H:e.depthFunc(515);break;case G:e.depthFunc(514);break;case W:e.depthFunc(518);break;case $:e.depthFunc(516);break;case q:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},c=new function(){let t=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null;return{setTest:function(e){t||(e?ve(2960):ye(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){r===t&&i===n&&o===s||(e.stencilFunc(t,n,s),r=t,i=n,o=s)},setOp:function(t,n,r){s===t&&a===n&&l===r||(e.stencilOp(t,n,r),s=t,a=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null}}};let u={},d={},h=null,f=!1,p=null,v=null,y=null,Y=null,K=null,X=null,J=null,Q=!1,ee=null,te=null,ne=null,re=null,ie=null;const oe=e.getParameter(35661);let se=!1,ae=0;const le=e.getParameter(7938);-1!==le.indexOf("WebGL")?(ae=parseFloat(/^WebGL (\d)/.exec(le)[1]),se=ae>=1):-1!==le.indexOf("OpenGL ES")&&(ae=parseFloat(/^OpenGL ES (\d)/.exec(le)[1]),se=ae>=2);let ce=null,ue={};const de=e.getParameter(3088),he=e.getParameter(2978),fe=(new Qn).fromArray(de),pe=(new Qn).fromArray(he);function me(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return o}const ge={};function ve(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function ye(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}ge[3553]=me(3553,3553,1),ge[34067]=me(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),c.setClear(0),ve(2929),o.setFunc(H),_e(!1),Se(a),ve(2884),xe(b);const be={[T]:32774,[C]:32778,[M]:32779};if(r)be[k]=32775,be[P]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(be[k]=e.MIN_EXT,be[P]=e.MAX_EXT)}const we={[A]:0,[I]:1,[R]:768,[O]:770,[V]:776,[B]:774,[D]:772,[L]:769,[N]:771,[Z]:775,[F]:773};function xe(t,n,r,i,o,s,a,l){if(t!==b){if(!1===f&&(ve(3042),f=!0),t===E)o=o||n,s=s||r,a=a||i,n===v&&o===K||(e.blendEquationSeparate(be[n],be[o]),v=n,K=o),r===y&&i===Y&&s===X&&a===J||(e.blendFuncSeparate(we[r],we[i],we[s],we[a]),y=r,Y=i,X=s,J=a),p=t,Q=null;else if(t!==p||l!==Q){if(v===T&&K===T||(e.blendEquation(32774),v=T,K=T),l)switch(t){case w:e.blendFuncSeparate(1,771,1,771);break;case x:e.blendFunc(1,1);break;case _:e.blendFuncSeparate(0,0,769,771);break;case S:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case w:e.blendFuncSeparate(770,771,1,771);break;case x:e.blendFunc(770,1);break;case _:e.blendFunc(0,769);break;case S:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,Y=null,X=null,J=null,p=t,Q=l}}else!0===f&&(ye(3042),f=!1)}function _e(t){ee!==t&&(t?e.frontFace(2304):e.frontFace(2305),ee=t)}function Se(t){t!==s?(ve(2884),t!==te&&(t===a?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):ye(2884),te=t}function Ee(t,n,r){t?(ve(32823),re===n&&ie===r||(e.polygonOffset(n,r),re=n,ie=r)):ye(32823)}function Te(t){void 0===t&&(t=33984+oe-1),ce!==t&&(e.activeTexture(t),ce=t)}return{buffers:{color:i,depth:o,stencil:c},enable:ve,disable:ye,bindFramebuffer:function(t,n){return d[t]!==n&&(e.bindFramebuffer(t,n),d[t]=n,r&&(36009===t&&(d[36160]=n),36160===t&&(d[36009]=n)),!0)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:xe,setMaterial:function(e,t){e.side===g?ye(2884):ve(2884);let n=e.side===m;t&&(n=!n),_e(n),e.blending===w&&!1===e.transparent?xe(b):xe(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;c.setTest(r),r&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ee(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?ve(32926):ye(32926)},setFlipSided:_e,setCullFace:Se,setLineWidth:function(t){t!==ne&&(se&&e.lineWidth(t),ne=t)},setPolygonOffset:Ee,setScissorTest:function(e){e?ve(3089):ye(3089)},activeTexture:Te,bindTexture:function(t,n){null===ce&&Te();let r=ue[ce];void 0===r&&(r={type:void 0,texture:void 0},ue[ce]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||ge[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=ue[ce];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===fe.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),fe.copy(t))},viewport:function(t){!1===pe.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),pe.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},ce=null,ue={},d={},h=null,f=!1,p=null,v=null,y=null,Y=null,K=null,X=null,J=null,Q=!1,ee=null,te=null,ne=null,re=null,ie=null,fe.set(0,0,e.canvas.width,e.canvas.height),pe.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),c.reset()}}}function gl(e,t,n,r,i,o,s){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):void 0,f=new WeakMap;let p,m=!1;try{m="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function g(e,t){return m?new OffscreenCanvas(e,t):$n("canvas")}function v(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Vn:Math.floor,o=r(i*e.width),s=r(i*e.height);void 0===p&&(p=g(o,s));const a=n?g(o,s):p;a.width=o,a.height=s;return a.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function y(e){return Bn(e.width)&&Bn(e.height)}function b(e,t){return e.generateMipmaps&&t&&e.minFilter!==pe&&e.minFilter!==be}function w(t){e.generateMipmap(t)}function x(n,r,i,o){if(!1===a)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),6407===r&&(5126===i&&(s=34837),5131===i&&(s=34843),5121===i&&(s=32849)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=o===Kt?35907:32856)),33325!==s&&33326!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function _(e,t,n){return!0===b(e,n)||e.isFramebufferTexture&&e.minFilter!==pe&&e.minFilter!==be?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function S(e){return e===pe||e===me||e===ve?9728:9729}function E(t){const n=t.target;n.removeEventListener("dispose",E),function(t){const n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&f.delete(n),s.memory.textures--}function T(t){const n=t.target;n.removeEventListener("dispose",T),function(t){const n=t.texture,i=r.get(t),o=r.get(n);if(!t)return;void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),s.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),s.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}let C=0;function M(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=s.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void L(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function k(t,i){const s=r.get(t);t.version>0&&s.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;R(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const s=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),l=r.image[0]&&r.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=s||l?l?r.image[e].image:r.image[e]:v(r.image[e],!1,!0,c);const d=u[0],h=y(d)||a,f=o.convert(r.format),p=o.convert(r.type),m=x(r.internalFormat,f,p,r.encoding),g=a&&!0!==r.isVideoTexture,S=void 0===t.__version;let E,T=_(r,d,h);if(I(34067,r,h),s){g&&S&&n.texStorage2D(34067,T,m,d.width,d.height);for(let e=0;e<6;e++){E=u[e].mipmaps;for(let t=0;t<E.length;t++){const i=E[t];r.format!==Be&&r.format!==Fe?null!==f?g?n.compressedTexSubImage2D(34069+e,t,0,0,i.width,i.height,f,i.data):n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?n.texSubImage2D(34069+e,t,0,0,i.width,i.height,f,p,i.data):n.texImage2D(34069+e,t,m,i.width,i.height,0,f,p,i.data)}}}else{E=r.mipmaps,g&&S&&(E.length>0&&T++,n.texStorage2D(34067,T,m,u[0].width,u[0].height));for(let e=0;e<6;e++)if(l){g?n.texSubImage2D(34069+e,0,0,0,u[e].width,u[e].height,f,p,u[e].data):n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,f,p,u[e].data);for(let t=0;t<E.length;t++){const r=E[t].image[e].image;g?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,f,p,r.data):n.texImage2D(34069+e,t+1,m,r.width,r.height,0,f,p,r.data)}}else{g?n.texSubImage2D(34069+e,0,0,0,f,p,u[e]):n.texImage2D(34069+e,0,m,f,p,u[e]);for(let t=0;t<E.length;t++){const r=E[t];g?n.texSubImage2D(34069+e,t+1,0,0,f,p,r.image[e]):n.texImage2D(34069+e,t+1,m,f,p,r.image[e])}}}b(r,h)&&w(34067);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(s,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,s.__webglTexture))}const P={[de]:10497,[he]:33071,[fe]:33648},A={[pe]:9728,[me]:9984,[ve]:9986,[be]:9729,[we]:9985,[_e]:9987};function I(n,o,s){if(s?(e.texParameteri(n,10242,P[o.wrapS]),e.texParameteri(n,10243,P[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,P[o.wrapR]),e.texParameteri(n,10240,A[o.magFilter]),e.texParameteri(n,10241,A[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===he&&o.wrapT===he||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,S(o.magFilter)),e.texParameteri(n,10241,S(o.minFilter)),o.minFilter!==pe&&o.minFilter!==be&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(o.type===Ae&&!1===t.has("OES_texture_float_linear"))return;if(!1===a&&o.type===Ie&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function R(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",E),t.__webglTexture=e.createTexture(),s.memory.textures++)}function L(t,r,i){let s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),R(t,r),n.activeTexture(33984+i),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const l=function(e){return!a&&(e.wrapS!==he||e.wrapT!==he||e.minFilter!==pe&&e.minFilter!==be)}(r)&&!1===y(r.image),c=v(r.image,l,!1,u),d=y(c)||a,h=o.convert(r.format);let f,p=o.convert(r.type),m=x(r.internalFormat,h,p,r.encoding);I(s,r,d);const g=r.mipmaps,S=a&&!0!==r.isVideoTexture,E=void 0===t.__version,T=_(r,c,d);if(r.isDepthTexture)m=6402,a?m=r.type===Ae?36012:r.type===Pe?33190:r.type===Ne?35056:33189:r.type===Ae&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===ze&&6402===m&&r.type!==Me&&r.type!==Pe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Me,p=o.convert(r.type)),r.format===Ue&&6402===m&&(m=34041,r.type!==Ne&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ne,p=o.convert(r.type))),S&&E?n.texStorage2D(3553,1,m,c.width,c.height):n.texImage2D(3553,0,m,c.width,c.height,0,h,p,null);else if(r.isDataTexture)if(g.length>0&&d){S&&E&&n.texStorage2D(3553,T,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],S?n.texSubImage2D(3553,0,0,0,f.width,f.height,h,p,f.data):n.texImage2D(3553,e,m,f.width,f.height,0,h,p,f.data);r.generateMipmaps=!1}else S?(E&&n.texStorage2D(3553,T,m,c.width,c.height),n.texSubImage2D(3553,0,0,0,c.width,c.height,h,p,c.data)):n.texImage2D(3553,0,m,c.width,c.height,0,h,p,c.data);else if(r.isCompressedTexture){S&&E&&n.texStorage2D(3553,T,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],r.format!==Be&&r.format!==Fe?null!==h?S?n.compressedTexSubImage2D(3553,e,0,0,f.width,f.height,h,f.data):n.compressedTexImage2D(3553,e,m,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?n.texSubImage2D(3553,e,0,0,f.width,f.height,h,p,f.data):n.texImage2D(3553,e,m,f.width,f.height,0,h,p,f.data)}else if(r.isDataTexture2DArray)S?(E&&n.texStorage3D(35866,T,m,c.width,c.height,c.depth),n.texSubImage3D(35866,0,0,0,0,c.width,c.height,c.depth,h,p,c.data)):n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,h,p,c.data);else if(r.isDataTexture3D)S?(E&&n.texStorage3D(32879,T,m,c.width,c.height,c.depth),n.texSubImage3D(32879,0,0,0,0,c.width,c.height,c.depth,h,p,c.data)):n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,h,p,c.data);else if(r.isFramebufferTexture)S&&E?n.texStorage2D(3553,T,m,c.width,c.height):n.texImage2D(3553,0,m,c.width,c.height,0,h,p,null);else if(g.length>0&&d){S&&E&&n.texStorage2D(3553,T,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)f=g[e],S?n.texSubImage2D(3553,e,0,0,h,p,f):n.texImage2D(3553,e,m,h,p,f);r.generateMipmaps=!1}else S?(E&&n.texStorage2D(3553,T,m,c.width,c.height),n.texSubImage2D(3553,0,0,0,h,p,c)):n.texImage2D(3553,0,m,h,p,c);b(r,d)&&w(s),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function O(t,i,s,a,l){const c=o.convert(s.format),u=o.convert(s.type),d=x(s.internalFormat,c,u,s.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,d,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,d,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,t),i.useRenderToTexture?h.framebufferTexture2DMultisampleEXT(36160,a,l,r.get(s).__webglTexture,0,F(i)):e.framebufferTexture2D(36160,a,l,r.get(s).__webglTexture,0),n.bindFramebuffer(36160,null)}function N(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||n.useRenderToTexture){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Ae?i=36012:t.type===Pe&&(i=33190));const r=F(n);n.useRenderToTexture?h.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=F(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):n.useRenderToTexture?h.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,i=o.convert(t.format),s=o.convert(t.type),a=x(t.internalFormat,i,s,t.encoding),l=F(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,l,a,n.width,n.height):n.useRenderToTexture?h.renderbufferStorageMultisampleEXT(36161,l,a,n.width,n.height):e.renderbufferStorage(36161,a,n.width,n.height)}e.bindRenderbuffer(36161,null)}function D(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),M(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,s=F(i);if(i.depthTexture.format===ze)i.useRenderToTexture?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,s):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==Ue)throw new Error("Unknown depthTexture format");i.useRenderToTexture?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,s):e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),N(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),N(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function F(e){return a&&(e.useRenderbuffer||e.useRenderToTexture)?Math.min(d,e.samples):0}let B=!1,Z=!1;this.allocateTextureUnit=function(){const e=C;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=M,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=k,this.rebindTextures=function(e,t,n){const i=r.get(e);void 0!==t&&O(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&D(e)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",T),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,s.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,f=l.isDataTexture3D||l.isDataTexture2DArray,p=y(t)||a;if(!a||l.format!==Fe||l.type!==Ae&&l.type!==Ie||(l.format=Be,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else if(c.__webglFramebuffer=e.createFramebuffer(),h)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(t.useRenderbuffer)if(a){c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const r=o.convert(l.format),i=o.convert(l.type),s=x(l.internalFormat,r,i,l.encoding),a=F(t);e.renderbufferStorageMultisample(36161,a,s,t.width,t.height),n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),N(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(d){n.bindTexture(34067,u.__webglTexture),I(34067,l,p);for(let e=0;e<6;e++)O(c.__webglFramebuffer[e],t,l,36064,34069+e);b(l,p)&&w(34067),n.unbindTexture()}else if(h){const e=t.texture;for(let i=0,o=e.length;i<o;i++){const o=e[i],s=r.get(o);n.bindTexture(3553,s.__webglTexture),I(3553,o,p),O(c.__webglFramebuffer,t,o,36064+i,3553),b(o,p)&&w(3553)}n.unbindTexture()}else{let e=3553;if(f)if(a){e=l.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(e,u.__webglTexture),I(e,l,p),O(c.__webglFramebuffer,t,l,36064,e),b(l,p)&&w(e),n.unbindTexture()}t.depthBuffer&&D(t)},this.updateRenderTargetMipmap=function(e){const t=y(e)||a,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,s=i.length;o<s;o++){const s=i[o];if(b(s,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(s).__webglTexture;n.bindTexture(t,i),w(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.useRenderbuffer)if(a){const i=t.width,o=t.height;let s=16384;const a=[36064],l=t.stencilBuffer?33306:36096;t.depthBuffer&&a.push(l),t.ignoreDepthForMultisampleCopy||(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024));const c=r.get(t);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer),t.ignoreDepthForMultisampleCopy&&(e.invalidateFramebuffer(36008,[l]),e.invalidateFramebuffer(36009,[l])),e.blitFramebuffer(0,0,i,o,0,0,i,o,s,9728),e.invalidateFramebuffer(36008,a),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=D,this.setupFrameBufferTexture=O,this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),M(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===Z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Z=!0),e=e.texture),k(e,t)}}function vl(e,t,n){const r=n.isWebGL2;return{convert:function(e){let n;if(e===Ee)return 5121;if(e===Re)return 32819;if(e===Le)return 32820;if(e===Oe)return 33635;if(e===Te)return 5120;if(e===Ce)return 5122;if(e===Me)return 5123;if(e===ke)return 5124;if(e===Pe)return 5125;if(e===Ae)return 5126;if(e===Ie)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===De)return 6406;if(e===Fe)return 6407;if(e===Be)return 6408;if(e===Ze)return 6409;if(e===Ve)return 6410;if(e===ze)return 6402;if(e===Ue)return 34041;if(e===je)return 6403;if(e===He)return 36244;if(e===Ge)return 33319;if(e===We)return 33320;if(e===$e)return 36248;if(e===qe)return 36249;if(e===Ye||e===Ke||e===Xe||e===Je){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===Ye)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Ke)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Xe)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Je)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===Qe||e===et||e===tt||e===nt){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===Qe)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===et)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===tt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===nt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===rt)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===it||e===ot)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===it)return n.COMPRESSED_RGB8_ETC2;if(e===ot)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===st||e===at||e===lt||e===ct||e===ut||e===dt||e===ht||e===ft||e===pt||e===mt||e===gt||e===vt||e===yt||e===bt||e===xt||e===_t||e===St||e===Et||e===Tt||e===Ct||e===Mt||e===kt||e===Pt||e===At||e===It||e===Rt||e===Lt||e===Ot?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===wt?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===Ne?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class yl extends xo{constructor(e=[]){super(),this.cameras=e}}yl.prototype.isArrayCamera=!0;class bl extends si{constructor(){super(),this.type="Group"}}bl.prototype.isGroup=!0;const wl={type:"move"};class xl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new bl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new bl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ir,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ir),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new bl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ir,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ir),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==s&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(wl))),l&&e.hand){o=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new bl;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const i=l.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),a=.02,c=.005;l.inputState.pinching&&s>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));return null!==s&&(s.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==o),this}}class _l extends Xn{constructor(e,t,n,r,i,o,s,a,l,c){if((c=void 0!==c?c:ze)!==ze&&c!==Ue)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===ze&&(n=Me),void 0===n&&c===Ue&&(n=Ne),super(null,r,i,o,s,a,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:pe,this.minFilter=void 0!==a?a:pe,this.flipY=!1,this.generateMipmaps=!1}}_l.prototype.isDepthTexture=!0;class Sl extends Pn{constructor(e,t){super();const n=this;let r=null,i=1,o=null,s="local-floor";const a=e.extensions.has("WEBGL_multisampled_render_to_texture");let l=null,c=null,u=null,d=null,h=!1,f=null;const p=t.getContextAttributes();let m=null,g=null;const v=[],y=new Map,b=new xo;b.layers.enable(1),b.viewport=new Qn;const w=new xo;w.layers.enable(2),w.viewport=new Qn;const x=[b,w],_=new yl;_.layers.enable(1),_.layers.enable(2);let S=null,E=null;function T(e){const t=y.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function C(){y.forEach((function(e,t){e.disconnect(t)})),y.clear(),S=null,E=null,e.setRenderTarget(m),d=null,u=null,c=null,r=null,g=null,R.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function M(e){const t=r.inputSources;for(let e=0;e<v.length;e++)y.set(t[e],v[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=y.get(n);r&&(r.dispatchEvent({type:"disconnected",data:n}),y.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],r=y.get(n);r&&r.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new xl,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new xl,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new xl,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",C),r.addEventListener("inputsourceschange",M),!0!==p.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),g=new er(d.framebufferWidth,d.framebufferHeight,{format:Be,type:Ee,encoding:e.outputEncoding})}else{h=p.antialias;let n=null,o=null,s=null;p.depth&&(s=p.stencil?35056:33190,n=p.stencil?Ue:ze,o=p.stencil?Ne:Me);const l={colorFormat:p.alpha||h?32856:32849,depthFormat:s,scaleFactor:i};c=new XRWebGLBinding(r,t),u=c.createProjectionLayer(l),r.updateRenderState({layers:[u]}),g=h?new nr(u.textureWidth,u.textureHeight,{format:Be,type:Ee,depthTexture:new _l(u.textureWidth,u.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,ignoreDepth:u.ignoreDepthValues,useRenderToTexture:a,encoding:e.outputEncoding}):new er(u.textureWidth,u.textureHeight,{format:p.alpha?Be:Fe,type:Ee,depthTexture:new _l(u.textureWidth,u.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,ignoreDepth:u.ignoreDepthValues,encoding:e.outputEncoding})}this.setFoveation(1),o=await r.requestReferenceSpace(s),R.setContext(r),R.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const k=new ir,P=new ir;function A(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;_.near=w.near=b.near=e.near,_.far=w.far=b.far=e.far,S===_.near&&E===_.far||(r.updateRenderState({depthNear:_.near,depthFar:_.far}),S=_.near,E=_.far);const t=e.parent,n=_.cameras;A(_,t);for(let e=0;e<n.length;e++)A(n[e],t);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),e.position.copy(_.position),e.quaternion.copy(_.quaternion),e.scale.copy(_.scale),e.matrix.copy(_.matrix),e.matrixWorld.copy(_.matrixWorld);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){k.setFromMatrixPosition(t.matrixWorld),P.setFromMatrixPosition(n.matrixWorld);const r=k.distanceTo(P),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,s=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(o[8]+1)/o[0],h=s*u,f=s*d,p=r/(-u+d),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+p,v=a+p,y=h-m,b=f+(r-m),w=l*a/v*g,x=c*a/v*g;e.projectionMatrix.makePerspective(y,b,w,x,g,v)}(_,b,w):_.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(e){null!==u&&(u.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};let I=null;const R=new Lo;R.setAnimationLoop((function(t,n){if(l=n.getViewerPose(o),f=n,null!==l){const t=l.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==_.cameras.length&&(_.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==d)o=d.getViewport(i);else{const t=c.getViewSubImage(u,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}const s=x[r];s.matrix.fromArray(i.transform.matrix),s.projectionMatrix.fromArray(i.projectionMatrix),s.viewport.set(o.x,o.y,o.width,o.height),0===r&&_.matrix.copy(s.matrix),!0===n&&_.cameras.push(s)}}const i=r.inputSources;for(let e=0;e<v.length;e++){const t=v[e],r=i[e];t.update(r,n,o)}I&&I(t,n),f=null})),this.setAnimationLoop=function(e){I=e},this.dispose=function(){}}}function El(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);const r=e.get(n).envMap;let i,o;r&&(t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio),n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap?i=n.clearcoatRoughnessMap:n.specularIntensityMap?i=n.specularIntensityMap:n.specularColorMap?i=n.specularColorMap:n.transmissionMap?i=n.transmissionMap:n.thicknessMap?i=n.thicknessMap:n.sheenColorMap?i=n.sheenColorMap:n.sheenRoughnessMap&&(i=n.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===m&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===m&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,s){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===m&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,s):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Tl(e={}){const t=void 0!==e.canvas?e.canvas:function(){const e=$n("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,o=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,l=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",d=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,f=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Yt,this.physicallyCorrectLights=!1,this.toneMapping=J,this.toneMappingExposure=1;const b=this;let w=!1,x=0,_=0,S=null,E=-1,T=null;const C=new Qn,M=new Qn;let k=null,P=t.width,A=t.height,I=1,R=null,L=null;const O=new Qn(0,0,P,A),N=new Qn(0,0,P,A);let D=!1;const F=[],B=new Ro;let Z=!1,V=!1,z=null;const U=new Nr,j=new ir,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===S?I:1}let W,$,q,Y,K,X,Q,ee,te,ne,re,ie,oe,se,ae,le,ce,ue,de,fe,me,ge,ve,ye=n;function be(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:i,depth:o,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${r}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",Te,!1),null===ye){const t=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&t.shift(),ye=be(t,e),null===ye)throw be(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ye.getShaderPrecisionFormat&&(ye.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function we(){W=new gs(ye),$=new Uo(ye,W,e),W.init($),ge=new vl(ye,W,$),q=new ml(ye,W,$),F[0]=1029,Y=new bs(ye),K=new tl,X=new gl(ye,W,q,K,$,ge,Y),Q=new Ho(b),ee=new ms(b),te=new Oo(ye,$),ve=new Vo(ye,W,te,$),ne=new vs(ye,te,Y,ve),re=new Ts(ye,ne,te,Y),de=new Es(ye,$,X),le=new jo(K),ie=new el(b,Q,ee,W,$,ve,le),oe=new El(K),se=new ol,ae=new dl(W,$),ue=new Zo(b,Q,q,re,l),ce=new pl(b,re,$),fe=new zo(ye,W,Y,$),me=new ys(ye,W,Y,$),Y.programs=ie.programs,b.capabilities=$,b.extensions=W,b.properties=K,b.renderLists=se,b.shadowMap=ce,b.state=q,b.info=Y}we();const xe=new Sl(b,ye);function Se(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Te(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const e=Y.autoReset,t=ce.enabled,n=ce.autoUpdate,r=ce.needsUpdate,i=ce.type;we(),Y.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=r,ce.type=i}function Ce(e){const t=e.target;t.removeEventListener("dispose",Ce),function(e){(function(e){const t=K.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))})(e),K.remove(e)}(t)}this.xr=xe,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const e=W.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=W.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(e){void 0!==e&&(I=e,this.setSize(P,A,!1))},this.getSize=function(e){return e.set(P,A)},this.setSize=function(e,n,r){xe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(P=e,A=n,t.width=Math.floor(e*I),t.height=Math.floor(n*I),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(P*I,A*I).floor()},this.setDrawingBufferSize=function(e,n,r){P=e,A=n,I=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(C)},this.getViewport=function(e){return e.copy(O)},this.setViewport=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),q.viewport(C.copy(O).multiplyScalar(I).floor())},this.getScissor=function(e){return e.copy(N)},this.setScissor=function(e,t,n,r){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,r),q.scissor(M.copy(N).multiplyScalar(I).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(e){q.setScissorTest(D=e)},this.setOpaqueSort=function(e){R=e},this.setTransparentSort=function(e){L=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ye.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",Te,!1),se.dispose(),ae.dispose(),K.dispose(),Q.dispose(),ee.dispose(),re.dispose(),ve.dispose(),ie.dispose(),xe.dispose(),xe.removeEventListener("sessionstart",ke),xe.removeEventListener("sessionend",Pe),z&&(z.dispose(),z=null),Re.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=H);const s=i.isMesh&&i.matrixWorld.determinant()<0,a=function(e,t,n,r,i){!0!==t.isScene&&(t=H);X.resetTextureUnits();const o=t.fog,s=r.isMeshStandardMaterial?t.environment:null,a=null===S?b.outputEncoding:S.texture.encoding,l=(r.isMeshStandardMaterial?ee:Q).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=n.morphAttributes.position?n.morphAttributes.position.length:0,m=r.toneMapped?b.toneMapping:J,g=K.get(r),v=f.state.lights;if(!0===Z&&(!0===V||e!==T)){const t=e===T&&r.id===E;le.setState(r,e,t)}let y=!1;r.version===g.__version?g.needsLights&&g.lightsStateVersion!==v.state.version||g.outputEncoding!==a||i.isInstancedMesh&&!1===g.instancing?y=!0:i.isInstancedMesh||!0!==g.instancing?i.isSkinnedMesh&&!1===g.skinning?y=!0:i.isSkinnedMesh||!0!==g.skinning?g.envMap!==l||r.fog&&g.fog!==o?y=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===le.numPlanes&&g.numIntersection===le.numIntersection?(g.vertexAlphas!==c||g.vertexTangents!==u||g.morphTargets!==d||g.morphNormals!==h||g.toneMapping!==m||!0===$.isWebGL2&&g.morphTargetsCount!==p)&&(y=!0):y=!0:y=!0:y=!0:(y=!0,g.__version=r.version);let w=g.currentProgram;!0===y&&(w=Fe(r,t,i));let x=!1,_=!1,C=!1;const M=w.getUniforms(),k=g.uniforms;q.useProgram(w.program)&&(x=!0,_=!0,C=!0);r.id!==E&&(E=r.id,_=!0);if(x||T!==e){if(M.setValue(ye,"projectionMatrix",e.projectionMatrix),$.logarithmicDepthBuffer&&M.setValue(ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),T!==e&&(T=e,_=!0,C=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=M.map.cameraPosition;void 0!==t&&t.setValue(ye,j.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&M.setValue(ye,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&M.setValue(ye,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){M.setOptional(ye,i,"bindMatrix"),M.setOptional(ye,i,"bindMatrixInverse");const e=i.skeleton;e&&($.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),M.setValue(ye,"boneTexture",e.boneTexture,X),M.setValue(ye,"boneTextureSize",e.boneTextureSize)):M.setOptional(ye,e,"boneMatrices"))}!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||de.update(i,n,r,w);(_||g.receiveShadow!==i.receiveShadow)&&(g.receiveShadow=i.receiveShadow,M.setValue(ye,"receiveShadow",i.receiveShadow));_&&(M.setValue(ye,"toneMappingExposure",b.toneMappingExposure),g.needsLights&&(R=C,(P=k).ambientLightColor.needsUpdate=R,P.lightProbe.needsUpdate=R,P.directionalLights.needsUpdate=R,P.directionalLightShadows.needsUpdate=R,P.pointLights.needsUpdate=R,P.pointLightShadows.needsUpdate=R,P.spotLights.needsUpdate=R,P.spotLightShadows.needsUpdate=R,P.rectAreaLights.needsUpdate=R,P.hemisphereLights.needsUpdate=R),o&&r.fog&&oe.refreshFogUniforms(k,o),oe.refreshMaterialUniforms(k,r,I,A,z),Aa.upload(ye,g.uniformsList,k,X));var P,R;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Aa.upload(ye,g.uniformsList,k,X),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&M.setValue(ye,"center",i.center);return M.setValue(ye,"modelViewMatrix",i.modelViewMatrix),M.setValue(ye,"normalMatrix",i.normalMatrix),M.setValue(ye,"modelMatrix",i.matrixWorld),w}(e,t,n,r,i);q.setMaterial(r,s);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,d=1;!0===r.wireframe&&(l=ne.getWireframeAttribute(n),d=2),ve.setup(i,r,a,n,l);let h=fe;null!==l&&(u=te.get(l),h=me,h.setIndex(u));const p=null!==l?l.count:c.count,m=n.drawRange.start*d,g=n.drawRange.count*d,v=null!==o?o.start*d:0,y=null!==o?o.count*d:1/0,w=Math.max(m,v),x=Math.min(p,m+g,v+y)-1,_=Math.max(0,x-w+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(q.setLineWidth(r.wireframeLinewidth*G()),h.setMode(1)):h.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),q.setLineWidth(e*G()),i.isLineSegments?h.setMode(1):i.isLineLoop?h.setMode(2):h.setMode(3)}else i.isPoints?h.setMode(0):i.isSprite&&h.setMode(4);if(i.isInstancedMesh)h.renderInstances(w,_,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(w,_,e)}else h.render(w,_)}},this.compile=function(e,t){f=ae.get(e),f.init(),y.push(f),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(b.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){Fe(n[r],e,t)}else Fe(n,e,t)})),y.pop(),f=null};let Me=null;function ke(){Re.stop()}function Pe(){Re.start()}const Re=new Lo;function Le(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||B.intersectsSprite(e)){r&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);const t=re.update(e),i=e.material;i.visible&&h.push(e,t,i,n,j.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Y.render.frame&&(e.skeleton.update(),e.skeleton.frame=Y.render.frame),!e.frustumCulled||B.intersectsObject(e))){r&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);const t=re.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,s=r.length;o<s;o++){const s=r[o],a=i[s.materialIndex];a&&a.visible&&h.push(e,t,a,n,j.z,s)}}else i.visible&&h.push(e,t,i,n,j.z,null)}const i=e.children;for(let e=0,o=i.length;e<o;e++)Le(i[e],t,n,r)}function Oe(e,t,n,r){const i=e.opaque,o=e.transmissive,s=e.transparent;f.setupLightsView(n),o.length>0&&function(e,t,n){if(null===z){const e=!0===a&&!0===$.isWebGL2;z=new(e?nr:er)(1024,1024,{generateMipmaps:!0,type:null!==ge.convert(Ie)?Ie:Ee,minFilter:_e,magFilter:pe,wrapS:he,wrapT:he,useRenderToTexture:W.has("WEBGL_multisampled_render_to_texture")})}const r=b.getRenderTarget();b.setRenderTarget(z),b.clear();const i=b.toneMapping;b.toneMapping=J,Ne(e,t,n),b.toneMapping=i,X.updateMultisampleRenderTarget(z),X.updateRenderTargetMipmap(z),b.setRenderTarget(r)}(i,t,n),r&&q.viewport(C.copy(r)),i.length>0&&Ne(i,t,n),o.length>0&&Ne(o,t,n),s.length>0&&Ne(s,t,n)}function Ne(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],s=o.object,a=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&De(s,t,n,a,l,c)}}function De(e,t,n,r,i,o){e.onBeforeRender(b,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(b,t,n,r,e,o),!0===i.transparent&&i.side===g?(i.side=m,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,o),i.side=p,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,o),i.side=g):b.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(b,t,n,r,i,o)}function Fe(e,t,n){!0!==t.isScene&&(t=H);const r=K.get(e),i=f.state.lights,o=f.state.shadowsArray,s=i.state.version,a=ie.getParameters(e,i.state,o,t,n),l=ie.getProgramCacheKey(a);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:Q).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",Ce),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return Ze(e,a),u}else a.uniforms=ie.getUniforms(e),e.onBuild(n,a,b),e.onBeforeCompile(a,b),u=ie.acquireProgram(a,l),c.set(l,u),r.uniforms=a.uniforms;const d=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=le.uniform),Ze(e,a),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=s,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotShadowMatrix.value=i.state.spotShadowMatrix,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);const h=u.getUniforms(),p=Aa.seqWithValue(h.seq,d);return r.currentProgram=u,r.uniformsList=p,u}function Ze(e,t){const n=K.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Re.setAnimationLoop((function(e){Me&&Me(e)})),"undefined"!=typeof window&&Re.setContext(window),this.setAnimationLoop=function(e){Me=e,xe.setAnimationLoop(e),null===e?Re.stop():Re.start()},xe.addEventListener("sessionstart",ke),xe.addEventListener("sessionend",Pe),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===w)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===xe.enabled&&!0===xe.isPresenting&&(!0===xe.cameraAutoUpdate&&xe.updateCamera(t),t=xe.getCamera()),!0===e.isScene&&e.onBeforeRender(b,e,t,S),f=ae.get(e,y.length),f.init(),y.push(f),U.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),B.setFromProjectionMatrix(U),V=this.localClippingEnabled,Z=le.init(this.clippingPlanes,V,t),h=se.get(e,v.length),h.init(),v.push(h),Le(e,t,0,b.sortObjects),h.finish(),!0===b.sortObjects&&h.sort(R,L),!0===Z&&le.beginShadows();const n=f.state.shadowsArray;if(ce.render(n,e,t),!0===Z&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(h,e),f.setupLights(b.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Oe(h,e,r,r.viewport)}}else Oe(h,e,t);null!==S&&(X.updateMultisampleRenderTarget(S),X.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(b,e,t),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1),ve.resetDefaultState(),E=-1,T=null,y.pop(),f=y.length>0?y[y.length-1]:null,v.pop(),h=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){K.get(e.texture).__webglTexture=t,K.get(e.depthTexture).__webglTexture=n;const r=K.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||e.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),e.useRenderToTexture=!1,e.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(e,t){const n=K.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){S=e,x=t,_=n;let r=!0;if(e){const t=K.get(e);void 0!==t.__useDefaultFramebuffer?(q.bindFramebuffer(36160,null),r=!1):void 0===t.__webglFramebuffer?X.setupRenderTarget(e):t.__hasExternalTextures&&X.rebindTextures(e,K.get(e.texture).__webglTexture,K.get(e.depthTexture).__webglTexture)}let i=null,o=!1,s=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(s=!0);const r=K.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=r[t],o=!0):i=e.useRenderbuffer?K.get(e).__webglMultisampledFramebuffer:r,C.copy(e.viewport),M.copy(e.scissor),k=e.scissorTest}else C.copy(O).multiplyScalar(I).floor(),M.copy(N).multiplyScalar(I).floor(),k=D;if(q.bindFramebuffer(36160,i)&&$.drawBuffers&&r){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const n=e.texture;if(F.length!==n.length||36064!==F[0]){for(let e=0,t=n.length;e<t;e++)F[e]=36064+e;F.length=n.length,t=!0}}else 1===F.length&&36064===F[0]||(F[0]=36064,F.length=1,t=!0);else 1===F.length&&1029===F[0]||(F[0]=1029,F.length=1,t=!0);t&&($.isWebGL2?ye.drawBuffers(F):W.get("WEBGL_draw_buffers").drawBuffersWEBGL(F))}if(q.viewport(C),q.scissor(M),q.setScissorTest(k),o){const r=K.get(e.texture);ye.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(s){const r=K.get(e.texture),i=t||0;ye.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}E=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=K.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){q.bindFramebuffer(36160,a);try{const s=e.texture,a=s.format,l=s.type;if(a!==Be&&ge.convert(a)!==ye.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Ie&&(W.has("EXT_color_buffer_half_float")||$.isWebGL2&&W.has("EXT_color_buffer_float"));if(!(l===Ee||ge.convert(l)===ye.getParameter(35738)||l===Ae&&($.isWebGL2||W.has("OES_texture_float")||W.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ye.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ye.readPixels(t,n,r,i,ge.convert(a),ge.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==S?K.get(S).__webglFramebuffer:null;q.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){if(!0!==t.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);X.setTexture2D(t,0),ye.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,o),q.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,s=ge.convert(n.format),a=ge.convert(n.type);X.setTexture2D(n,0),ye.pixelStorei(37440,n.flipY),ye.pixelStorei(37441,n.premultiplyAlpha),ye.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ye.texSubImage2D(3553,r,e.x,e.y,i,o,s,a,t.image.data):t.isCompressedTexture?ye.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):ye.texSubImage2D(3553,r,e.x,e.y,s,a,t.image),0===r&&n.generateMipmaps&&ye.generateMipmap(3553),q.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(b.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,a=e.max.z-e.min.z+1,l=ge.convert(r.format),c=ge.convert(r.type);let u;if(r.isDataTexture3D)X.setTexture3D(r,0),u=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(r,0),u=35866}ye.pixelStorei(37440,r.flipY),ye.pixelStorei(37441,r.premultiplyAlpha),ye.pixelStorei(3317,r.unpackAlignment);const d=ye.getParameter(3314),h=ye.getParameter(32878),f=ye.getParameter(3316),p=ye.getParameter(3315),m=ye.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ye.pixelStorei(3314,g.width),ye.pixelStorei(32878,g.height),ye.pixelStorei(3316,e.min.x),ye.pixelStorei(3315,e.min.y),ye.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?ye.texSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ye.compressedTexSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,g.data)):ye.texSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,c,g),ye.pixelStorei(3314,d),ye.pixelStorei(32878,h),ye.pixelStorei(3316,f),ye.pixelStorei(3315,p),ye.pixelStorei(32877,m),0===i&&r.generateMipmaps&&ye.generateMipmap(u),q.unbindTexture()},this.initTexture=function(e){X.setTexture2D(e,0),q.unbindTexture()},this.resetState=function(){x=0,_=0,S=null,q.reset(),ve.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Tl.prototype.isWebGLRenderer=!0;class Cl extends Tl{}Cl.prototype.isWebGL1Renderer=!0;class Ml{constructor(e,t=25e-5){this.name="",this.color=new Ci(e),this.density=t}clone(){return new Ml(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Ml.prototype.isFogExp2=!0;class kl{constructor(e,t=1,n=1e3){this.name="",this.color=new Ci(e),this.near=t,this.far=n}clone(){return new kl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}kl.prototype.isFog=!0;class Pl extends si{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Pl.prototype.isScene=!0;class Al{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=yn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=On()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=On()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=On()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Al.prototype.isInterleavedBuffer=!0;const Il=new ir;class Rl{constructor(e,t,n,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Il.x=this.getX(t),Il.y=this.getY(t),Il.z=this.getZ(t),Il.applyMatrix4(e),this.setXYZ(t,Il.x,Il.y,Il.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Il.x=this.getX(t),Il.y=this.getY(t),Il.z=this.getZ(t),Il.applyNormalMatrix(e),this.setXYZ(t,Il.x,Il.y,Il.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Il.x=this.getX(t),Il.y=this.getY(t),Il.z=this.getZ(t),Il.transformDirection(e),this.setXYZ(t,Il.x,Il.y,Il.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Ai(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Rl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Rl.prototype.isInterleavedBufferAttribute=!0;class Ll extends bi{constructor(e){super(),this.type="SpriteMaterial",this.color=new Ci(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Ol;Ll.prototype.isSpriteMaterial=!0;const Nl=new ir,Dl=new ir,Fl=new ir,Bl=new Un,Zl=new Un,Vl=new Nr,zl=new ir,Ul=new ir,jl=new ir,Hl=new Un,Gl=new Un,Wl=new Un;class $l extends si{constructor(e){if(super(),this.type="Sprite",void 0===Ol){Ol=new qi;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Al(e,5);Ol.setIndex([0,1,2,0,2,3]),Ol.setAttribute("position",new Rl(t,3,0,!1)),Ol.setAttribute("uv",new Rl(t,2,3,!1))}this.geometry=Ol,this.material=void 0!==e?e:new Ll,this.center=new Un(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Dl.setFromMatrixScale(this.matrixWorld),Vl.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Fl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Dl.multiplyScalar(-Fl.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;ql(zl.set(-.5,-.5,0),Fl,o,Dl,r,i),ql(Ul.set(.5,-.5,0),Fl,o,Dl,r,i),ql(jl.set(.5,.5,0),Fl,o,Dl,r,i),Hl.set(0,0),Gl.set(1,0),Wl.set(1,1);let s=e.ray.intersectTriangle(zl,Ul,jl,!1,Nl);if(null===s&&(ql(Ul.set(-.5,.5,0),Fl,o,Dl,r,i),Gl.set(0,1),s=e.ray.intersectTriangle(zl,jl,Ul,!1,Nl),null===s))return;const a=e.ray.origin.distanceTo(Nl);a<e.near||a>e.far||t.push({distance:a,point:Nl.clone(),uv:vi.getUV(Nl,zl,Ul,jl,Hl,Gl,Wl,new Un),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function ql(e,t,n,r,i,o){Bl.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Zl.x=o*Bl.x-i*Bl.y,Zl.y=i*Bl.x+o*Bl.y):Zl.copy(Bl),e.copy(t),e.x+=Zl.x,e.y+=Zl.y,e.applyMatrix4(Vl)}$l.prototype.isSprite=!0;const Yl=new ir,Kl=new ir;class Xl extends si{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Yl.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Yl);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Yl.setFromMatrixPosition(e.matrixWorld),Kl.setFromMatrixPosition(this.matrixWorld);const n=Yl.distanceTo(Kl)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}const Jl=new ir,Ql=new Qn,ec=new Qn,tc=new ir,nc=new Nr;class rc extends fo{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Nr,this.bindMatrixInverse=new Nr}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Qn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Ql.fromBufferAttribute(r.attributes.skinIndex,e),ec.fromBufferAttribute(r.attributes.skinWeight,e),Jl.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=ec.getComponent(e);if(0!==r){const i=Ql.getComponent(e);nc.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(tc.copy(Jl).applyMatrix4(nc),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}rc.prototype.isSkinnedMesh=!0;class ic extends si{constructor(){super(),this.type="Bone"}}ic.prototype.isBone=!0;class oc extends Xn{constructor(e=null,t=1,n=1,r,i,o,s,a,l=pe,c=pe,u,d){super(null,o,s,a,l,c,r,i,u,d),this.image={data:e,width:t,height:n},this.magFilter=l,this.minFilter=c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}oc.prototype.isDataTexture=!0;const sc=new Nr,ac=new Nr;class lc{constructor(e=[],t=[]){this.uuid=On(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Nr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Nr;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:ac;sc.multiplyMatrices(i,t[r]),sc.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new lc(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Zn(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new oc(t,e,e,Be,Ae);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new ic),this.bones.push(i),this.boneInverses.push((new Nr).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}class cc extends Ai{constructor(e,t,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}cc.prototype.isInstancedBufferAttribute=!0;const uc=new Nr,dc=new Nr,hc=[],fc=new fo;class pc extends fo{constructor(e,t,n){super(e,t),this.instanceMatrix=new cc(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(fc.geometry=this.geometry,fc.material=this.material,void 0!==fc.material)for(let i=0;i<r;i++){this.getMatrixAt(i,uc),dc.multiplyMatrices(n,uc),fc.matrixWorld=dc,fc.raycast(e,hc);for(let e=0,n=hc.length;e<n;e++){const n=hc[e];n.instanceId=i,n.object=this,t.push(n)}hc.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new cc(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}pc.prototype.isInstancedMesh=!0;class mc extends bi{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Ci(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}mc.prototype.isLineBasicMaterial=!0;const gc=new ir,vc=new ir,yc=new Nr,bc=new Or,wc=new Cr;class xc extends si{constructor(e=new qi,t=new mc){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)gc.fromBufferAttribute(t,e-1),vc.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=gc.distanceTo(vc);e.setAttribute("lineDistance",new Zi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),wc.copy(n.boundingSphere),wc.applyMatrix4(r),wc.radius+=i,!1===e.ray.intersectsSphere(wc))return;yc.copy(r).invert(),bc.copy(e.ray).applyMatrix4(yc);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=new ir,c=new ir,u=new ir,d=new ir,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){for(let n=Math.max(0,o.start),s=Math.min(r.count,o.start+o.count)-1;n<s;n+=h){const o=r.getX(n),s=r.getX(n+1);l.fromBufferAttribute(i,o),c.fromBufferAttribute(i,s);if(bc.distanceSqToSegment(l,c,d,u)>a)continue;d.applyMatrix4(this.matrixWorld);const h=e.ray.origin.distanceTo(d);h<e.near||h>e.far||t.push({distance:h,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(i.count,o.start+o.count)-1;n<r;n+=h){l.fromBufferAttribute(i,n),c.fromBufferAttribute(i,n+1);if(bc.distanceSqToSegment(l,c,d,u)>a)continue;d.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}xc.prototype.isLine=!0;const _c=new ir,Sc=new ir;class Ec extends xc{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)_c.fromBufferAttribute(t,e),Sc.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+_c.distanceTo(Sc);e.setAttribute("lineDistance",new Zi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Ec.prototype.isLineSegments=!0;class Tc extends xc{constructor(e,t){super(e,t),this.type="LineLoop"}}Tc.prototype.isLineLoop=!0;class Cc extends bi{constructor(e){super(),this.type="PointsMaterial",this.color=new Ci(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Cc.prototype.isPointsMaterial=!0;const Mc=new Nr,kc=new Or,Pc=new Cr,Ac=new ir;class Ic extends si{constructor(e=new qi,t=new Cc){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Pc.copy(n.boundingSphere),Pc.applyMatrix4(r),Pc.radius+=i,!1===e.ray.intersectsSphere(Pc))return;Mc.copy(r).invert(),kc.copy(e.ray).applyMatrix4(Mc);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s;if(n.isBufferGeometry){const i=n.index,s=n.attributes.position;if(null!==i){for(let n=Math.max(0,o.start),l=Math.min(i.count,o.start+o.count);n<l;n++){const o=i.getX(n);Ac.fromBufferAttribute(s,o),Rc(Ac,o,a,r,e,t,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(s.count,o.start+o.count);n<i;n++)Ac.fromBufferAttribute(s,n),Rc(Ac,n,a,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Rc(e,t,n,r,i,o,s){const a=kc.distanceSqToPoint(e);if(a<n){const n=new ir;kc.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,object:s})}}Ic.prototype.isPoints=!0;class Lc extends Xn{constructor(e,t,n,r,i,o,s,a,l){super(e,t,n,r,i,o,s,a,l),this.format=void 0!==s?s:Fe,this.minFilter=void 0!==o?o:be,this.magFilter=void 0!==i?i:be,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Lc.prototype.isVideoTexture=!0;class Oc extends Xn{constructor(e,t,n){super({width:e,height:t}),this.format=n,this.magFilter=pe,this.minFilter=pe,this.generateMipmaps=!1,this.needsUpdate=!0}}Oc.prototype.isFramebufferTexture=!0;class Nc extends Xn{constructor(e,t,n,r,i,o,s,a,l,c,u,d){super(null,o,s,a,l,c,r,i,u,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Nc.prototype.isCompressedTexture=!0;class Dc extends Xn{constructor(e,t,n,r,i,o,s,a,l){super(e,t,n,r,i,o,s,a,l),this.needsUpdate=!0}}Dc.prototype.isCanvasTexture=!0;class Fc extends qi{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],o=[],s=[],a=[],l=new ir,c=new Un;o.push(0,0,0),s.push(0,0,1),a.push(.5,.5);for(let i=0,u=3;i<=t;i++,u+=3){const d=n+i/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),o.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(o[u]/e+1)/2,c.y=(o[u+1]/e+1)/2,a.push(c.x,c.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new Zi(o,3)),this.setAttribute("normal",new Zi(s,3)),this.setAttribute("uv",new Zi(a,2))}static fromJSON(e){return new Fc(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Bc extends qi{constructor(e=1,t=1,n=1,r=8,i=1,o=!1,s=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],d=[],h=[];let f=0;const p=[],m=n/2;let g=0;function v(n){const i=f,o=new Un,p=new ir;let v=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*b,0),d.push(0,b,0),h.push(.5,.5),f++;const w=f;for(let e=0;e<=r;e++){const t=e/r*a+s,n=Math.cos(t),i=Math.sin(t);p.x=y*i,p.y=m*b,p.z=y*n,u.push(p.x,p.y,p.z),d.push(0,b,0),o.x=.5*n+.5,o.y=.5*i*b+.5,h.push(o.x,o.y),f++}for(let e=0;e<r;e++){const t=i+e,r=w+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new ir,v=new ir;let y=0;const b=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*a+s,l=Math.sin(i),p=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*p,u.push(v.x,v.y,v.z),o.set(l,b,p).normalize(),d.push(o.x,o.y,o.z),h.push(t,1-g),c.push(f++)}p.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=p[t][e],r=p[t+1][e],i=p[t+1][e+1],o=p[t][e+1];c.push(n,r,o),c.push(r,i,o),y+=6}l.addGroup(g,y,0),g+=y}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Zi(u,3)),this.setAttribute("normal",new Zi(d,3)),this.setAttribute("uv",new Zi(h,2))}static fromJSON(e){return new Bc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Zc extends Bc{constructor(e=1,t=1,n=8,r=1,i=!1,o=0,s=2*Math.PI){super(0,e,t,n,r,i,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}static fromJSON(e){return new Zc(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vc extends qi{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],o=[];function s(e,t,n,r){const i=r+1,o=[];for(let r=0;r<=i;r++){o[r]=[];const s=e.clone().lerp(n,r/i),a=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)o[r][e]=0===e&&r===i?s:s.clone().lerp(a,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(a(o[e][n+1]),a(o[e+1][n]),a(o[e][n])):(a(o[e][n+1]),a(o[e+1][n+1]),a(o[e+1][n]))}}function a(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new ir,r=new ir,i=new ir;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),s(n,r,i,e)}(r),function(e){const t=new ir;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new ir;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,s=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(r,1-s)}var t;(function(){const e=new ir,t=new ir,n=new ir,r=new ir,s=new Un,a=new Un,l=new Un;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),s.set(o[h+0],o[h+1]),a.set(o[h+2],o[h+3]),l.set(o[h+4],o[h+5]),r.copy(e).add(t).add(n).divideScalar(3);const f=u(r);c(s,h+0,e,f),c(a,h+2,t,f),c(l,h+4,n,f)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),s=Math.min(t,n,r);i>.9&&s<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Zi(i,3)),this.setAttribute("normal",new Zi(i.slice(),3)),this.setAttribute("uv",new Zi(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new Vc(e.vertices,e.indices,e.radius,e.details)}}class zc extends Vc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zc(e.radius,e.detail)}}const Uc=new ir,jc=new ir,Hc=new ir,Gc=new vi;class Wc extends qi{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(Rn*t),o=e.getIndex(),s=e.getAttribute("position"),a=o?o.count:s.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let e=0;e<a;e+=3){o?(l[0]=o.getX(e),l[1]=o.getX(e+1),l[2]=o.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:a}=Gc;if(t.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),a.fromBufferAttribute(s,l[2]),Gc.getNormal(Hc),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(a.x*r)},${Math.round(a.y*r)},${Math.round(a.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],o=Gc[c[e]],s=Gc[c[t]],a=`${n}_${r}`,f=`${r}_${n}`;f in d&&d[f]?(Hc.dot(d[f].normal)<=i&&(h.push(o.x,o.y,o.z),h.push(s.x,s.y,s.z)),d[f]=null):a in d||(d[a]={index0:l[e],index1:l[t],normal:Hc.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];Uc.fromBufferAttribute(s,t),jc.fromBufferAttribute(s,n),h.push(Uc.x,Uc.y,Uc.z),h.push(jc.x,jc.y,jc.z)}this.setAttribute("position",new Zi(h,3))}}}class $c{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let s,a=0,l=i-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),s=n[r]-o,s<0)a=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const c=n[r];return(r+(o-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),s=this.getPoint(i),a=t||(o.isVector2?new Un:new ir);return a.copy(s).sub(o).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new ir,r=[],i=[],o=[],s=new ir,a=new Nr;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new ir)}i[0]=new ir,o[0]=new ir;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),o[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),o[t]=o[t-1].clone(),s.crossVectors(r[t-1],r[t]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(Nn(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(a.makeRotationAxis(s,e))}o[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(Nn(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class qc extends $c{constructor(e=0,t=0,n=1,r=1,i=0,o=2*Math.PI,s=!1,a=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(e,t){const n=t||new Un,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const s=this.aStartAngle+e*i;let a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,r=l-this.aY;a=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}qc.prototype.isEllipseCurve=!0;class Yc extends qc{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.type="ArcCurve"}}function Kc(){let e=0,t=0,n=0,r=0;function i(i,o,s,a){e=i,t=s,n=-3*i+3*o-2*s-a,r=2*i-2*o+s+a}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,s,a){let l=(t-e)/o-(n-e)/(o+s)+(n-t)/s,c=(n-t)/s-(r-t)/(s+a)+(r-n)/a;l*=s,c*=s,i(t,n,l,c)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}Yc.prototype.isArcCurve=!0;const Xc=new ir,Jc=new Kc,Qc=new Kc,eu=new Kc;class tu extends $c{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new ir){const n=t,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let s,a,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?s=r[(l-1)%i]:(Xc.subVectors(r[0],r[1]).add(r[0]),s=Xc);const u=r[l%i],d=r[(l+1)%i];if(this.closed||l+2<i?a=r[(l+2)%i]:(Xc.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=Xc),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),r=Math.pow(d.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Jc.initNonuniformCatmullRom(s.x,u.x,d.x,a.x,t,n,r),Qc.initNonuniformCatmullRom(s.y,u.y,d.y,a.y,t,n,r),eu.initNonuniformCatmullRom(s.z,u.z,d.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(Jc.initCatmullRom(s.x,u.x,d.x,a.x,this.tension),Qc.initCatmullRom(s.y,u.y,d.y,a.y,this.tension),eu.initCatmullRom(s.z,u.z,d.z,a.z,this.tension));return n.set(Jc.calc(c),Qc.calc(c),eu.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new ir).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function nu(e,t,n,r,i){const o=.5*(r-t),s=.5*(i-n),a=e*e;return(2*n-2*r+o+s)*(e*a)+(-3*n+3*r-2*o-s)*a+o*e+n}function ru(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function iu(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}tu.prototype.isCatmullRomCurve3=!0;class ou extends $c{constructor(e=new Un,t=new Un,n=new Un,r=new Un){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Un){const n=t,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(iu(e,r.x,i.x,o.x,s.x),iu(e,r.y,i.y,o.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}ou.prototype.isCubicBezierCurve=!0;class su extends $c{constructor(e=new ir,t=new ir,n=new ir,r=new ir){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ir){const n=t,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(iu(e,r.x,i.x,o.x,s.x),iu(e,r.y,i.y,o.y,s.y),iu(e,r.z,i.z,o.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}su.prototype.isCubicBezierCurve3=!0;class au extends $c{constructor(e=new Un,t=new Un){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Un){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Un;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}au.prototype.isLineCurve=!0;class lu extends $c{constructor(e=new ir,t=new ir){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new ir){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cu extends $c{constructor(e=new Un,t=new Un,n=new Un){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Un){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(ru(e,r.x,i.x,o.x),ru(e,r.y,i.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}cu.prototype.isQuadraticBezierCurve=!0;class uu extends $c{constructor(e=new ir,t=new ir,n=new ir){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ir){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(ru(e,r.x,i.x,o.x),ru(e,r.y,i.y,o.y),ru(e,r.z,i.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}uu.prototype.isQuadraticBezierCurve3=!0;class du extends $c{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Un){const n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),s=i-o,a=r[0===o?o:o-1],l=r[o],c=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(nu(s,a.x,l.x,c.x,u.x),nu(s,a.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Un).fromArray(n))}return this}}du.prototype.isSplineCurve=!0;var hu=Object.freeze({__proto__:null,ArcCurve:Yc,CatmullRomCurve3:tu,CubicBezierCurve:ou,CubicBezierCurve3:su,EllipseCurve:qc,LineCurve:au,LineCurve3:lu,QuadraticBezierCurve:cu,QuadraticBezierCurve3:uu,SplineCurve:du});class fu extends $c{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new au(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,o=this.curves[i],s=o.getLength(),a=0===s?0:1-e/s;return o.getPointAt(a,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],s=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s);for(let e=0;e<a.length;e++){const r=a[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new hu[n.type]).fromJSON(n))}return this}}class pu extends fu{constructor(e){super(),this.type="Path",this.currentPoint=new Un,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new au(this.currentPoint.clone(),new Un(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new cu(this.currentPoint.clone(),new Un(e,t),new Un(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){const s=new ou(this.currentPoint.clone(),new Un(e,t),new Un(n,r),new Un(i,o));return this.curves.push(s),this.currentPoint.set(i,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new du(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){const s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+s,t+a,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,s,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,o,s,a),this}absellipse(e,t,n,r,i,o,s,a){const l=new qc(e,t,n,r,i,o,s,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class mu extends pu{constructor(e){super(e),this.uuid=On(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new pu).fromJSON(n))}return this}}const gu=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let o=vu(e,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c,u,d,h,f;if(r&&(o=function(e,t,n,r){const i=[];let o,s,a,l,c;for(o=0,s=t.length;o<s;o++)a=t[o]*r,l=o<s-1?t[o+1]*r:e.length,c=vu(e,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(ku(c));for(i.sort(Eu),o=0;o<i.length;o++)Tu(i[o],n),n=yu(n,n.next);return n}(e,t,o,n)),e.length>80*n){a=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)d=e[t],h=e[t+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=0!==f?1/f:0}return bu(o,s,n,a,l,f),s};function vu(e,t,n,r,i){let o,s;if(i===function(e,t,n,r){let i=0;for(let o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)s=Bu(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=Bu(o,e[o],e[o+1],s);return s&&Ru(s,s.next)&&(Zu(s),s=s.next),s}function yu(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Ru(r,r.next)&&0!==Iu(r.prev,r,r.next))r=r.next;else{if(Zu(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function bu(e,t,n,r,i,o,s){if(!e)return;!s&&o&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=Mu(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,s,a,l,c=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<c&&(a++,r=r.nextZ,r);t++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(e,r,i,o);let a,l,c=e;for(;e.prev!==e.next;)if(a=e.prev,l=e.next,o?xu(e,r,i,o):wu(e))t.push(a.i/n),t.push(e.i/n),t.push(l.i/n),Zu(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?bu(e=_u(yu(e),t,n),t,n,r,i,o,2):2===s&&Su(e,t,n,r,i,o):bu(yu(e),t,n,r,i,o,1);break}}function wu(e){const t=e.prev,n=e,r=e.next;if(Iu(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(Pu(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Iu(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function xu(e,t,n,r){const i=e.prev,o=e,s=e.next;if(Iu(i,o,s)>=0)return!1;const a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,l=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,u=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,d=Mu(a,l,t,n,r),h=Mu(c,u,t,n,r);let f=e.prevZ,p=e.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==e.prev&&f!==e.next&&Pu(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Iu(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&Pu(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Iu(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&Pu(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Iu(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&Pu(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Iu(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function _u(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!Ru(i,o)&&Lu(i,r,r.next,o)&&Du(i,o)&&Du(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Zu(r),Zu(r.next),r=e=o),r=r.next}while(r!==e);return yu(r)}function Su(e,t,n,r,i,o){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&Au(s,e)){let a=Fu(s,e);return s=yu(s,s.next),a=yu(a,a.next),bu(s,t,n,r,i,o),void bu(a,t,n,r,i,o)}e=e.next}s=s.next}while(s!==e)}function Eu(e,t){return e.x-t.x}function Tu(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let o,s=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>s){if(s=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===s)return o;const a=o,l=o.x,c=o.y;let u,d=1/0;n=o;do{r>=n.x&&n.x>=l&&r!==n.x&&Pu(i<c?r:s,i,l,c,i<c?s:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),Du(n,e)&&(u<d||u===d&&(n.x>o.x||n.x===o.x&&Cu(o,n)))&&(o=n,d=u)),n=n.next}while(n!==a);return o}(e,t),t){const n=Fu(t,e);yu(t,t.next),yu(n,n.next)}}function Cu(e,t){return Iu(e.prev,e,t.prev)<0&&Iu(t.next,e,e.next)<0}function Mu(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ku(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Pu(e,t,n,r,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(r-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function Au(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Lu(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Du(e,t)&&Du(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Iu(e.prev,e,t.prev)||Iu(e,t.prev,t))||Ru(e,t)&&Iu(e.prev,e,e.next)>0&&Iu(t.prev,t,t.next)>0)}function Iu(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ru(e,t){return e.x===t.x&&e.y===t.y}function Lu(e,t,n,r){const i=Nu(Iu(e,t,n)),o=Nu(Iu(e,t,r)),s=Nu(Iu(n,r,e)),a=Nu(Iu(n,r,t));return i!==o&&s!==a||(!(0!==i||!Ou(e,n,t))||(!(0!==o||!Ou(e,r,t))||(!(0!==s||!Ou(n,e,r))||!(0!==a||!Ou(n,t,r)))))}function Ou(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Nu(e){return e>0?1:e<0?-1:0}function Du(e,t){return Iu(e.prev,e,e.next)<0?Iu(e,t,e.next)>=0&&Iu(e,e.prev,t)>=0:Iu(e,t,e.prev)<0||Iu(e,e.next,t)<0}function Fu(e,t){const n=new Vu(e.i,e.x,e.y),r=new Vu(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Bu(e,t,n,r){const i=new Vu(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Zu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Vu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class zu{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return zu.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];Uu(e),ju(n,e);let o=e.length;t.forEach(Uu);for(let e=0;e<t.length;e++)r.push(o),o+=t[e].length,ju(n,t[e]);const s=gu(n,r);for(let e=0;e<s.length;e+=3)i.push(s.slice(e,e+3));return i}}function Uu(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function ju(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Hu extends qi{constructor(e=new mu([new Un(.5,.5),new Un(-.5,.5),new Un(-.5,-.5),new Un(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++){o(e[t])}function o(e){const o=[],s=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:1,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Gu;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,v,y,b,w,x=!1;p&&(g=p.getSpacedPoints(a),x=!0,c=!1,v=p.computeFrenetFrames(a,!1),y=new ir,b=new ir,w=new ir),c||(f=0,u=0,d=0,h=0);const _=e.extractPoints(s);let S=_.shape;const E=_.holes;if(!zu.isClockWise(S)){S=S.reverse();for(let e=0,t=E.length;e<t;e++){const t=E[e];zu.isClockWise(t)&&(E[e]=t.reverse())}}const T=zu.triangulateShape(S,E),C=S;for(let e=0,t=E.length;e<t;e++){const t=E[e];S=S.concat(t)}function M(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const k=S.length,P=T.length;function A(e,t,n){let r,i,o;const s=e.x-t.x,a=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=s*s+a*a,d=s*c-a*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),f=t.x-a/d,p=t.y+s/d,m=((n.x-c/h-f)*c-(n.y+l/h-p)*l)/(s*c-a*l);r=f+s*m-e.x,i=p+a*m-e.y;const g=r*r+i*i;if(g<=2)return new Un(r,i);o=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(c)&&(e=!0),e?(r=-a,i=s,o=Math.sqrt(u)):(r=s,i=a,o=Math.sqrt(u/2))}return new Un(r/o,i/o)}const I=[];for(let e=0,t=C.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),I[e]=A(C[e],C[n],C[r]);const R=[];let L,O=I.concat();for(let e=0,t=E.length;e<t;e++){const t=E[e];L=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),L[e]=A(t[e],t[r],t[i]);R.push(L),O=O.concat(L)}for(let e=0;e<f;e++){const t=e/f,n=u*Math.cos(t*Math.PI/2),r=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=C.length;e<t;e++){const t=M(C[e],I[e],r);F(t.x,t.y,-n)}for(let e=0,t=E.length;e<t;e++){const t=E[e];L=R[e];for(let e=0,i=t.length;e<i;e++){const i=M(t[e],L[e],r);F(i.x,i.y,-n)}}}const N=d+h;for(let e=0;e<k;e++){const t=c?M(S[e],O[e],N):S[e];x?(b.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),w.copy(g[0]).add(b).add(y),F(w.x,w.y,w.z)):F(t.x,t.y,0)}for(let e=1;e<=a;e++)for(let t=0;t<k;t++){const n=c?M(S[t],O[t],N):S[t];x?(b.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),w.copy(g[e]).add(b).add(y),F(w.x,w.y,w.z)):F(n.x,n.y,l/a*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=u*Math.cos(t*Math.PI/2),r=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=C.length;e<t;e++){const t=M(C[e],I[e],r);F(t.x,t.y,l+n)}for(let e=0,t=E.length;e<t;e++){const t=E[e];L=R[e];for(let e=0,i=t.length;e<i;e++){const i=M(t[e],L[e],r);x?F(i.x,i.y+g[a-1].y,g[a-1].x+n):F(i.x,i.y,l+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=a+2*f;e<n;e++){const n=k*e,o=k*(e+1);Z(t+r+n,t+i+n,t+i+o,t+r+o)}}}function F(e,t,n){o.push(e),o.push(t),o.push(n)}function B(e,t,i){V(e),V(t),V(i);const o=r.length/3,s=m.generateTopUV(n,r,o-3,o-2,o-1);z(s[0]),z(s[1]),z(s[2])}function Z(e,t,i,o){V(e),V(t),V(o),V(t),V(i),V(o);const s=r.length/3,a=m.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);z(a[0]),z(a[1]),z(a[3]),z(a[1]),z(a[2]),z(a[3])}function V(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function z(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=k*e;for(let e=0;e<P;e++){const n=T[e];B(n[2]+t,n[1]+t,n[0]+t)}e=a+2*f,t=k*e;for(let e=0;e<P;e++){const n=T[e];B(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<P;e++){const t=T[e];B(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=T[e];B(t[0]+k*a,t[1]+k*a,t[2]+k*a)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;D(C,t),t+=C.length;for(let e=0,n=E.length;e<n;e++){const n=E[e];D(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Zi(r,3)),this.setAttribute("uv",new Zi(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new hu[r.type]).fromJSON(r)),new Hu(n,e.options)}}const Gu={generateTopUV:function(e,t,n,r,i){const o=t[3*n],s=t[3*n+1],a=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new Un(o,s),new Un(a,l),new Un(c,u)]},generateSideWallUV:function(e,t,n,r,i,o){const s=t[3*n],a=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],d=t[3*r+2],h=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(a-u)<Math.abs(s-c)?[new Un(s,1-l),new Un(c,1-d),new Un(h,1-p),new Un(m,1-v)]:[new Un(a,1-l),new Un(u,1-d),new Un(f,1-p),new Un(g,1-v)]}};class Wu extends Vc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wu(e.radius,e.detail)}}class $u extends qi{constructor(e=[new Un(0,.5),new Un(.5,0),new Un(0,-.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Nn(r,0,2*Math.PI);const i=[],o=[],s=[],a=[],l=[],c=1/t,u=new ir,d=new Un,h=new ir,f=new ir,p=new ir;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.normalize(),a.push(h.x,h.y,h.z);break;case e.length-1:a.push(p.x,p.y,p.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),a.push(h.x,h.y,h.z),p.copy(f)}for(let i=0;i<=t;i++){const h=n+i*c*r,f=Math.sin(h),p=Math.cos(h);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*f,u.y=e[n].y,u.z=e[n].x*p,o.push(u.x,u.y,u.z),d.x=i/t,d.y=n/(e.length-1),s.push(d.x,d.y);const r=a[3*n+0]*f,c=a[3*n+1],h=a[3*n+0]*p;l.push(r,c,h)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,o=r,s=r+e.length,a=r+e.length+1,l=r+1;i.push(o,s,l),i.push(s,a,l)}this.setIndex(i),this.setAttribute("position",new Zi(o,3)),this.setAttribute("uv",new Zi(s,2)),this.setAttribute("normal",new Zi(l,3))}static fromJSON(e){return new $u(e.points,e.segments,e.phiStart,e.phiLength)}}class qu extends Vc{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qu(e.radius,e.detail)}}class Yu extends qi{constructor(e=.5,t=1,n=8,r=1,i=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n);const s=[],a=[],l=[],c=[];let u=e;const d=(t-e)/(r=Math.max(1,r)),h=new ir,f=new Un;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*o;h.x=u*Math.cos(r),h.y=u*Math.sin(r),a.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(h.x/t+1)/2,f.y=(h.y/t+1)/2,c.push(f.x,f.y)}u+=d}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,o=r+n+1,a=r+n+2,l=r+1;s.push(i,o,l),s.push(o,a,l)}}this.setIndex(s),this.setAttribute("position",new Zi(a,3)),this.setAttribute("normal",new Zi(l,3)),this.setAttribute("uv",new Zi(c,2))}static fromJSON(e){return new Yu(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ku extends qi{constructor(e=new mu([new Un(0,.5),new Un(-.5,-.5),new Un(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let s=0,a=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(s,a,t),s+=a,a=0;function l(e){const s=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===zu.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===zu.isClockWise(t)&&(u[e]=t.reverse())}const d=zu.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),o.push(t.x,t.y)}for(let e=0,t=d.length;e<t;e++){const t=d[e],r=t[0]+s,i=t[1]+s,o=t[2]+s;n.push(r,i,o),a+=3}}this.setIndex(n),this.setAttribute("position",new Zi(r,3)),this.setAttribute("normal",new Zi(i,3)),this.setAttribute("uv",new Zi(o,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new Ku(n,e.curveSegments)}}class Xu extends qi{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let l=0;const c=[],u=new ir,d=new ir,h=[],f=[],p=[],m=[];for(let h=0;h<=n;h++){const g=[],v=h/n;let y=0;0==h&&0==o?y=.5/t:h==n&&a==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const a=n/t;u.x=-e*Math.cos(r+a*i)*Math.sin(o+v*s),u.y=e*Math.cos(o+v*s),u.z=e*Math.sin(r+a*i)*Math.sin(o+v*s),f.push(u.x,u.y,u.z),d.copy(u).normalize(),p.push(d.x,d.y,d.z),m.push(a+y,1-v),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],s=c[e+1][r],l=c[e+1][r+1];(0!==e||o>0)&&h.push(t,i,l),(e!==n-1||a<Math.PI)&&h.push(i,s,l)}this.setIndex(h),this.setAttribute("position",new Zi(f,3)),this.setAttribute("normal",new Zi(p,3)),this.setAttribute("uv",new Zi(m,2))}static fromJSON(e){return new Xu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ju extends Vc{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ju(e.radius,e.detail)}}class Qu extends qi{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],s=[],a=[],l=[],c=new ir,u=new ir,d=new ir;for(let o=0;o<=n;o++)for(let h=0;h<=r;h++){const f=h/r*i,p=o/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),s.push(u.x,u.y,u.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),d.subVectors(u,c).normalize(),a.push(d.x,d.y,d.z),l.push(h/r),l.push(o/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,s=(r+1)*(e-1)+t,a=(r+1)*e+t;o.push(n,i,a),o.push(i,s,a)}this.setIndex(o),this.setAttribute("position",new Zi(s,3)),this.setAttribute("normal",new Zi(a,3)),this.setAttribute("uv",new Zi(l,2))}static fromJSON(e){return new Qu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ed extends qi{constructor(e=1,t=.4,n=64,r=8,i=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const s=[],a=[],l=[],c=[],u=new ir,d=new ir,h=new ir,f=new ir,p=new ir,m=new ir,g=new ir;for(let s=0;s<=n;++s){const y=s/n*i*Math.PI*2;v(y,i,o,e,h),v(y+.01,i,o,e,f),m.subVectors(f,h),g.addVectors(f,h),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,o=-t*Math.cos(i),f=t*Math.sin(i);u.x=h.x+(o*g.x+f*p.x),u.y=h.y+(o*g.y+f*p.y),u.z=h.z+(o*g.z+f*p.z),a.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(s/n),c.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,a=(r+1)*(e-1)+t;s.push(n,i,a),s.push(i,o,a)}function v(e,t,n,r,i){const o=Math.cos(e),s=Math.sin(e),a=n/t*e,l=Math.cos(a);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*s*.5,i.z=r*Math.sin(a)*.5}this.setIndex(s),this.setAttribute("position",new Zi(a,3)),this.setAttribute("normal",new Zi(l,3)),this.setAttribute("uv",new Zi(c,2))}static fromJSON(e){return new ed(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class td extends qi{constructor(e=new uu(new ir(-1,-1,0),new ir(-1,1,0),new ir(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new ir,a=new ir,l=new Un;let c=new ir;const u=[],d=[],h=[],f=[];function p(i){c=e.getPointAt(i/t,c);const l=o.normals[i],h=o.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),o=-Math.cos(t);a.x=o*l.x+i*h.x,a.y=o*l.y+i*h.y,a.z=o*l.z+i*h.z,a.normalize(),d.push(a.x,a.y,a.z),s.x=c.x+n*a.x,s.y=c.y+n*a.y,s.z=c.z+n*a.z,u.push(s.x,s.y,s.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,s=(r+1)*(e-1)+t;f.push(n,i,s),f.push(i,o,s)}}()}(),this.setIndex(f),this.setAttribute("position",new Zi(u,3)),this.setAttribute("normal",new Zi(d,3)),this.setAttribute("uv",new Zi(h,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new td((new hu[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class nd extends qi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new ir,i=new ir;if(null!==e.index){const o=e.attributes.position,s=e.index;let a=e.groups;0===a.length&&(a=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=a.length;e<l;++e){const l=a[e],c=l.start;for(let e=c,a=c+l.count;e<a;e+=3)for(let a=0;a<3;a++){const l=s.getX(e+a),c=s.getX(e+(a+1)%3);r.fromBufferAttribute(o,l),i.fromBufferAttribute(o,c),!0===rd(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const o=e.attributes.position;for(let e=0,s=o.count/3;e<s;e++)for(let s=0;s<3;s++){const a=3*e+s,l=3*e+(s+1)%3;r.fromBufferAttribute(o,a),i.fromBufferAttribute(o,l),!0===rd(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new Zi(t,3))}}}function rd(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r,i),!0)}var id=Object.freeze({__proto__:null,BoxGeometry:mo,BoxBufferGeometry:mo,CircleGeometry:Fc,CircleBufferGeometry:Fc,ConeGeometry:Zc,ConeBufferGeometry:Zc,CylinderGeometry:Bc,CylinderBufferGeometry:Bc,DodecahedronGeometry:zc,DodecahedronBufferGeometry:zc,EdgesGeometry:Wc,ExtrudeGeometry:Hu,ExtrudeBufferGeometry:Hu,IcosahedronGeometry:Wu,IcosahedronBufferGeometry:Wu,LatheGeometry:$u,LatheBufferGeometry:$u,OctahedronGeometry:qu,OctahedronBufferGeometry:qu,PlaneGeometry:No,PlaneBufferGeometry:No,PolyhedronGeometry:Vc,PolyhedronBufferGeometry:Vc,RingGeometry:Yu,RingBufferGeometry:Yu,ShapeGeometry:Ku,ShapeBufferGeometry:Ku,SphereGeometry:Xu,SphereBufferGeometry:Xu,TetrahedronGeometry:Ju,TetrahedronBufferGeometry:Ju,TorusGeometry:Qu,TorusBufferGeometry:Qu,TorusKnotGeometry:ed,TorusKnotBufferGeometry:ed,TubeGeometry:td,TubeBufferGeometry:td,WireframeGeometry:nd});class od extends bi{constructor(e){super(),this.type="ShadowMaterial",this.color=new Ci(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}od.prototype.isShadowMaterial=!0;class sd extends bi{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ci(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ci(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qt,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}sd.prototype.isMeshStandardMaterial=!0;class ad extends sd{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Un(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Nn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new Ci(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ci(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ci(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}ad.prototype.isMeshPhysicalMaterial=!0;class ld extends bi{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Ci(16777215),this.specular=new Ci(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ci(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qt,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}ld.prototype.isMeshPhongMaterial=!0;class cd extends bi{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ci(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ci(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qt,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}cd.prototype.isMeshToonMaterial=!0;class ud extends bi{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qt,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}ud.prototype.isMeshNormalMaterial=!0;class dd extends bi{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Ci(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ci(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}dd.prototype.isMeshLambertMaterial=!0;class hd extends bi{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ci(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qt,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}hd.prototype.isMeshMatcapMaterial=!0;class fd extends mc{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}fd.prototype.isLineDashedMaterial=!0;var pd=Object.freeze({__proto__:null,ShadowMaterial:od,SpriteMaterial:Ll,RawShaderMaterial:Wo,ShaderMaterial:bo,PointsMaterial:Cc,MeshPhysicalMaterial:ad,MeshStandardMaterial:sd,MeshPhongMaterial:ld,MeshToonMaterial:cd,MeshNormalMaterial:ud,MeshLambertMaterial:dd,MeshDepthMaterial:hl,MeshDistanceMaterial:fl,MeshBasicMaterial:Mi,MeshMatcapMaterial:hd,LineDashedMaterial:fd,LineBasicMaterial:mc,Material:bi});const md={arraySlice:function(e,t,n){return md.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,s=0;s!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[s++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let s=o[r];if(void 0!==s)if(Array.isArray(s))do{s=o[r],void 0!==s&&(t.push(o.time),n.push.apply(n,s)),o=e[i++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[r],void 0!==s&&(t.push(o.time),s.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{s=o[r],void 0!==s&&(t.push(o.time),n.push(s)),o=e[i++]}while(void 0!==o)},subclip:function(e,t,n,r,i=30){const o=e.clone();o.name=t;const s=[];for(let e=0;e<o.tracks.length;++e){const t=o.tracks[e],a=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const o=t.times[e]*i;if(!(o<n||o>=r)){l.push(t.times[e]);for(let n=0;n<a;++n)c.push(t.values[e*a+n])}}0!==l.length&&(t.times=md.convertArray(l,t.times.constructor),t.values=md.convertArray(c,t.values.constructor),s.push(t))}o.tracks=s;let a=1/0;for(let e=0;e<o.tracks.length;++e)a>o.tracks[e].times[0]&&(a=o.tracks[e].times[0]);for(let e=0;e<o.tracks.length;++e)o.tracks[e].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const s=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===s)continue;let a=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let c=0;const u=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=r.times.length-1;let h;if(o<=r.times[0]){const e=a,t=l-a;h=md.arraySlice(r.values,e,t)}else if(o>=r.times[d]){const e=d*l+a,t=e+l-a;h=md.arraySlice(r.values,e,t)}else{const e=r.createInterpolant(),t=a,n=l-a;e.evaluate(o),h=md.arraySlice(e.resultBuffer,t,n)}if("quaternion"===i){(new rr).fromArray(h).normalize().conjugate().toArray(h)}const f=s.times.length;for(let e=0;e<f;++e){const t=e*u+c;if("quaternion"===i)rr.multiplyQuaternionsFlat(s.values,t,h,0,s.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)s.values[t+n]-=h[n]}}}return e.blendMode=Gt,e}};class gd{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const s=t[1];e<s&&(n=2,i=s);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}gd.prototype.beforeStart_=gd.prototype.copySampleValue_,gd.prototype.afterEnd_=gd.prototype.copySampleValue_;class vd extends gd{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:zt,endingEnd:zt}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,s=r[i],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case Ut:i=e,s=2*t-n;break;case jt:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case Ut:o=e,a=2*n-t;break;case jt:o=1,a=n+r[1]-r[0];break;default:o=e-1,a=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,b=h*m-h*p;for(let e=0;e!==s;++e)i[e]=g*o[c+e]+v*o[l+e]+y*o[a+e]+b*o[u+e];return i}}class yd extends gd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==s;++e)i[e]=o[l+e]*u+o[a+e]*c;return i}}class bd extends gd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class wd{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=md.convertArray(t,this.TimeBufferType),this.values=md.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:md.convertArray(e.times,Array),values:md.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new bd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new yd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new vd(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Bt:t=this.InterpolantFactoryMethodDiscrete;break;case Zt:t=this.InterpolantFactoryMethodLinear;break;case Vt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bt;case this.InterpolantFactoryMethodLinear:return Zt;case this.InterpolantFactoryMethodSmooth:return Vt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=md.arraySlice(n,i,o),this.values=md.arraySlice(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,o),e=!1;break}o=r}if(void 0!==r&&md.isTypedArray(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=md.arraySlice(this.times),t=md.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Vt,i=e.length-1;let o=1;for(let s=1;s<i;++s){let i=!1;const a=e[s];if(a!==e[s+1]&&(1!==s||a!==e[0]))if(r)i=!0;else{const e=s*n,r=e-n,o=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[r+s]||n!==t[o+s]){i=!0;break}}}if(i){if(s!==o){e[o]=e[s];const r=s*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,s=0;s!==n;++s)t[r+s]=t[e+s];++o}return o!==e.length?(this.times=md.arraySlice(e,0,o),this.values=md.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=md.arraySlice(this.times,0),t=md.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}wd.prototype.TimeBufferType=Float32Array,wd.prototype.ValueBufferType=Float32Array,wd.prototype.DefaultInterpolation=Zt;class xd extends wd{}xd.prototype.ValueTypeName="bool",xd.prototype.ValueBufferType=Array,xd.prototype.DefaultInterpolation=Bt,xd.prototype.InterpolantFactoryMethodLinear=void 0,xd.prototype.InterpolantFactoryMethodSmooth=void 0;class _d extends wd{}_d.prototype.ValueTypeName="color";class Sd extends wd{}Sd.prototype.ValueTypeName="number";class Ed extends gd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(r-t);let l=e*s;for(let e=l+s;l!==e;l+=4)rr.slerpFlat(i,0,o,l-s,o,l,a);return i}}class Td extends wd{InterpolantFactoryMethodLinear(e){return new Ed(this.times,this.values,this.getValueSize(),e)}}Td.prototype.ValueTypeName="quaternion",Td.prototype.DefaultInterpolation=Zt,Td.prototype.InterpolantFactoryMethodSmooth=void 0;class Cd extends wd{}Cd.prototype.ValueTypeName="string",Cd.prototype.ValueBufferType=Array,Cd.prototype.DefaultInterpolation=Bt,Cd.prototype.InterpolantFactoryMethodLinear=void 0,Cd.prototype.InterpolantFactoryMethodSmooth=void 0;class Md extends wd{}Md.prototype.ValueTypeName="vector";class kd{constructor(e,t=-1,n,r=Ht){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=On(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(Pd(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(wd.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let e=0;e<i;e++){let s=[],a=[];s.push((e+i-1)%i,e,(e+1)%i),a.push(0,1,0);const l=md.getKeyframeOrder(s);s=md.sortedArray(s,1,l),a=md.sortedArray(a,1,l),r||0!==s[0]||(s.push(i),a.push(a[0])),o.push(new Sd(".morphTargetInfluences["+t[e].name+"]",s,a).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.name.match(i);if(o&&o.length>1){const e=o[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const o=[];for(const e in r)o.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],s=[];md.flattenJSON(n,o,s,r),0!==o.length&&i.push(new e(t,o,s))}},r=[],i=e.name||"default",o=e.fps||30,s=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],o=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new Sd(".morphTargetInfluence["+n+"]",e,o))}a=e.length*(o||1)}else{const o=".bones["+t[e].name+"]";n(Md,o+".position",i,"pos",r),n(Td,o+".quaternion",i,"rot",r),n(Md,o+".scale",i,"scl",r)}}if(0===r.length)return null;return new this(i,a,r,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Pd(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sd;case"vector":case"vector2":case"vector3":case"vector4":return Md;case"color":return _d;case"quaternion":return Td;case"bool":case"boolean":return xd;case"string":return Cd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];md.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Ad={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Id{constructor(e,t,n){const r=this;let i,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===o&&void 0!==r.onStart&&r.onStart(e,s,a),o=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Rd=new Id;class Ld{constructor(e){this.manager=void 0!==e?e:Rd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Od={};class Nd extends Ld{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Ad.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==Od[e])return void Od[e].push({onLoad:t,onProgress:n,onError:r});Od[e]=[],Od[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body.getReader)return t;const n=Od[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),o=i?parseInt(i):0,s=0!==o;let a=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{a+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:s,loaded:a,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw Error(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`)})).then((e=>{switch(this.responseType){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,this.mimeType)));case"json":return e.json();default:return e.text()}})).then((t=>{Ad.add(e,t);const n=Od[e];delete Od[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=Od[e];if(void 0===n)throw this.manager.itemError(e),t;delete Od[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Dd extends Ld{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Nd(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=kd.parse(e[n]);t.push(r)}return t}}class Fd extends Ld{constructor(e){super(e)}load(e,t,n,r){const i=this,o=[],s=new Nc,a=new Nd(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials);let l=0;function c(c){a.load(e[c],(function(e){const n=i.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=be),s.image=o,s.format=n.format,s.needsUpdate=!0,t&&t(s))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else a.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}s.image=o}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=be),s.format=n.format,s.needsUpdate=!0,t&&t(s)}),n,r);return s}}class Bd extends Ld{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Ad.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const s=$n("img");function a(){c(),Ad.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s}}class Zd extends Ld{constructor(e){super(e)}load(e,t,n,r){const i=new Eo,o=new Bd(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function a(n){o.load(e[n],(function(e){i.images[n]=e,s++,6===s&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)a(t);return i}}class Vd extends Ld{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new oc,s=new Nd(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:he,o.wrapT=void 0!==n.wrapT?n.wrapT:he,o.magFilter=void 0!==n.magFilter?n.magFilter:be,o.minFilter=void 0!==n.minFilter?n.minFilter:be,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=_e),1===n.mipmapCount&&(o.minFilter=be),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}class zd extends Ld{constructor(e){super(e)}load(e,t,n,r){const i=new Xn,o=new Bd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Ud extends si{constructor(e,t=1){super(),this.type="Light",this.color=new Ci(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Ud.prototype.isLight=!0;class jd extends Ud{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(si.DefaultUp),this.updateMatrix(),this.groundColor=new Ci(t)}copy(e){return Ud.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}jd.prototype.isHemisphereLight=!0;const Hd=new Nr,Gd=new ir,Wd=new ir;class $d{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Un(512,512),this.map=null,this.mapPass=null,this.matrix=new Nr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ro,this._frameExtents=new Un(1,1),this._viewportCount=1,this._viewports=[new Qn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Gd.setFromMatrixPosition(e.matrixWorld),t.position.copy(Gd),Wd.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Wd),t.updateMatrixWorld(),Hd.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Hd),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class qd extends $d{constructor(){super(new xo(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*Ln*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}qd.prototype.isSpotLightShadow=!0;class Yd extends Ud{constructor(e,t,n=0,r=Math.PI/3,i=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(si.DefaultUp),this.updateMatrix(),this.target=new si,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new qd}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Yd.prototype.isSpotLight=!0;const Kd=new Nr,Xd=new ir,Jd=new ir;class Qd extends $d{constructor(){super(new xo(90,1,.5,500)),this._frameExtents=new Un(4,2),this._viewportCount=6,this._viewports=[new Qn(2,1,1,1),new Qn(0,1,1,1),new Qn(3,1,1,1),new Qn(1,1,1,1),new Qn(3,0,1,1),new Qn(1,0,1,1)],this._cubeDirections=[new ir(1,0,0),new ir(-1,0,0),new ir(0,0,1),new ir(0,0,-1),new ir(0,1,0),new ir(0,-1,0)],this._cubeUps=[new ir(0,1,0),new ir(0,1,0),new ir(0,1,0),new ir(0,1,0),new ir(0,0,1),new ir(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Xd.setFromMatrixPosition(e.matrixWorld),n.position.copy(Xd),Jd.copy(n.position),Jd.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Jd),n.updateMatrixWorld(),r.makeTranslation(-Xd.x,-Xd.y,-Xd.z),Kd.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Kd)}}Qd.prototype.isPointLightShadow=!0;class eh extends Ud{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Qd}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}eh.prototype.isPointLight=!0;class th extends $d{constructor(){super(new Go(-5,5,5,-5,.5,500))}}th.prototype.isDirectionalLightShadow=!0;class nh extends Ud{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(si.DefaultUp),this.updateMatrix(),this.target=new si,this.shadow=new th}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}nh.prototype.isDirectionalLight=!0;class rh extends Ud{constructor(e,t){super(e,t),this.type="AmbientLight"}}rh.prototype.isAmbientLight=!0;class ih extends Ud{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}ih.prototype.isRectAreaLight=!0;class oh{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ir)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}oh.prototype.isSphericalHarmonics3=!0;class sh extends Ud{constructor(e=new oh,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}sh.prototype.isLightProbe=!0;class ah extends Ld{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,o=new Nd(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=new pd[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new Ci).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.format&&(r.format=e.format),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new Ci).setHex(i.value);break;case"v2":r.uniforms[t].value=(new Un).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new ir).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new Qn).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new jn).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new Nr).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Un).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Un).fromArray(e.clearcoatNormalScale)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}}class lh{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ch extends qi{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}ch.prototype.isInstancedBufferGeometry=!0;class uh extends Ld{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Nd(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),s=Wn(i.type,o),a=new Al(s,i.stride);return a.uuid=i.uuid,t[r]=a,a}const i=e.isInstancedBufferGeometry?new ch:new qi,o=e.data.index;if(void 0!==o){const e=Wn(o.type,o.array);i.setIndex(new Ai(e,1))}const s=e.data.attributes;for(const t in s){const n=s[t];let o;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);o=new Rl(t,n.itemSize,n.offset,n.normalized)}else{const e=Wn(n.type,n.array);o=new(n.isInstancedBufferAttribute?cc:Ai)(e,n.itemSize,n.normalized)}void 0!==n.name&&(o.name=n.name),void 0!==n.usage&&o.setUsage(n.usage),void 0!==n.updateRange&&(o.updateRange.offset=n.updateRange.offset,o.updateRange.count=n.updateRange.count),i.setAttribute(t,o)}const a=e.data.morphAttributes;if(a)for(const t in a){const n=a[t],o=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let s;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);s=new Rl(t,i.itemSize,i.offset,i.normalized)}else{const e=Wn(i.type,i.array);s=new Ai(e,i.itemSize,i.normalized)}void 0!==i.name&&(s.name=i.name),o.push(s)}i.morphAttributes[t]=o}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new ir;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new Cr(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class dh extends Ld{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===this.path?lh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const s=new Nd(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const s=o.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}async loadAsync(e,t){const n=""===this.path?lh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new Nd(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),o=JSON.parse(i),s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,a,s,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in o)if(o[t]instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,i),s=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,r,s,o,t),l=this.parseSkeletons(e.skeletons,a);return this.bindSkeletons(a,l),a}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new mu).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new lc).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new uh;for(let i=0,o=e.length;i<o;i++){let o;const s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:s.type in id?o=id[s.type].fromJSON(s,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new ah;i.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];if("MultiMaterial"===o.type){const e=[];for(let t=0;t<o.materials.length;t++){const r=o.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[o.uuid]=e}else void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=kd.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function o(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Wn(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Id(t);i=new Bd(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let e=0,t=i.length;e<t;e++){const t=o(i[e]);null!==t&&(t instanceof HTMLImageElement?r[n.uuid].push(t):r[n.uuid].push(new oc(t.data,t.width,t.height)))}}else{const e=o(n.url);null!==e&&(r[n.uuid]=e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:Wn(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new Bd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],o=r.url;if(Array.isArray(o)){n[r.uuid]=[];for(let e=0,t=o.length;e<t;e++){const t=o[e],s=await i(t);null!==s&&(s instanceof HTMLImageElement?n[r.uuid].push(s):n[r.uuid].push(new oc(s.data,s.width,s.height)))}}else{const e=await i(r.url);null!==e&&(n[r.uuid]=e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,o=e.length;i<o;i++){const o=e[i];let s;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const a=t[o.image];Array.isArray(a)?(s=new Eo(a),6===a.length&&(s.needsUpdate=!0)):(s=a&&a.data?new oc(a.data,a.width,a.height):new Xn(a),a&&(s.needsUpdate=!0)),s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,hh)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],fh),s.wrapT=n(o.wrap[1],fh)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,ph)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,ph)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(s.userData=o.userData),r[o.uuid]=s}return r}parseObject(e,t,n,r,i){let o,s,a;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":o=new Pl,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new Ci(e.background):o.background=u(e.background)),void 0!==e.environment&&(o.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new kl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new Ml(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new xo(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Go(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new rh(e.color,e.intensity);break;case"DirectionalLight":o=new nh(e.color,e.intensity);break;case"PointLight":o=new eh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ih(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Yd(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new jd(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new sh).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),a=c(e.material),o=new rc(s,a),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),a=c(e.material),o=new fo(s,a);break;case"InstancedMesh":s=l(e.geometry),a=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;o=new pc(s,a,t),o.instanceMatrix=new cc(new Float32Array(n.array),16),void 0!==r&&(o.instanceColor=new cc(new Float32Array(r.array),r.itemSize));break;case"LOD":o=new Xl;break;case"Line":o=new xc(l(e.geometry),c(e.material));break;case"LineLoop":o=new Tc(l(e.geometry),c(e.material));break;case"LineSegments":o=new Ec(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new Ic(l(e.geometry),c(e.material));break;case"Sprite":o=new $l(c(e.material));break;case"Group":o=new bl;break;case"Bone":o=new ic;break;default:o=new si}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)o.add(this.parseObject(s[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];o.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=o.getObjectByProperty("uuid",n.object);void 0!==r&&o.addLevel(r,n.distance)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const hh={UVMapping:ie,CubeReflectionMapping:oe,CubeRefractionMapping:se,EquirectangularReflectionMapping:ae,EquirectangularRefractionMapping:le,CubeUVReflectionMapping:ce,CubeUVRefractionMapping:ue},fh={RepeatWrapping:de,ClampToEdgeWrapping:he,MirroredRepeatWrapping:fe},ph={NearestFilter:pe,NearestMipmapNearestFilter:me,NearestMipmapLinearFilter:ve,LinearFilter:be,LinearMipmapNearestFilter:we,LinearMipmapLinearFilter:_e};class mh extends Ld{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Ad.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Ad.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}let gh;mh.prototype.isImageBitmapLoader=!0;const vh={getContext:function(){return void 0===gh&&(gh=new(window.AudioContext||window.webkitAudioContext)),gh},setContext:function(e){gh=e}};class yh extends Ld{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Nd(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);vh.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}}class bh extends sh{constructor(e,t,n=1){super(void 0,n);const r=(new Ci).set(e),i=(new Ci).set(t),o=new ir(r.r,r.g,r.b),s=new ir(i.r,i.g,i.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(a),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(l)}}bh.prototype.isHemisphereLightProbe=!0;class wh extends sh{constructor(e,t=1){super(void 0,t);const n=(new Ci).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}wh.prototype.isAmbientLightProbe=!0;const xh=new Nr,_h=new Nr,Sh=new Nr;class Eh{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Sh.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(Rn*t.fov*.5)/t.zoom;let o,s;_h.elements[12]=-n,xh.elements[12]=n,o=-i*t.aspect+r,s=i*t.aspect+r,Sh.elements[0]=2*t.near/(s-o),Sh.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(Sh),o=-i*t.aspect-r,s=i*t.aspect-r,Sh.elements[0]=2*t.near/(s-o),Sh.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(Sh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_h),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(xh)}}class Th{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Ch(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Ch();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Ch(){return("undefined"==typeof performance?Date:performance).now()}const Mh=new ir,kh=new rr,Ph=new ir,Ah=new ir;class Ih extends si{constructor(){super(),this.type="AudioListener",this.context=vh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Th}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Mh,kh,Ph),Ah.set(0,0,-1).applyQuaternion(kh),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Mh.x,e),t.positionY.linearRampToValueAtTime(Mh.y,e),t.positionZ.linearRampToValueAtTime(Mh.z,e),t.forwardX.linearRampToValueAtTime(Ah.x,e),t.forwardY.linearRampToValueAtTime(Ah.y,e),t.forwardZ.linearRampToValueAtTime(Ah.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Mh.x,Mh.y,Mh.z),t.setOrientation(Ah.x,Ah.y,Ah.z,n.x,n.y,n.z)}}class Rh extends si{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Lh=new ir,Oh=new rr,Nh=new ir,Dh=new ir;class Fh extends Rh{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Lh,Oh,Nh),Dh.set(0,0,1).applyQuaternion(Oh);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Lh.x,e),t.positionY.linearRampToValueAtTime(Lh.y,e),t.positionZ.linearRampToValueAtTime(Lh.z,e),t.orientationX.linearRampToValueAtTime(Dh.x,e),t.orientationY.linearRampToValueAtTime(Dh.y,e),t.orientationZ.linearRampToValueAtTime(Dh.z,e)}else t.setPosition(Lh.x,Lh.y,Lh.z),t.setOrientation(Dh.x,Dh.y,Dh.z)}}class Bh{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Zh{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){s.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){rr.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const o=this._workIndex*i;rr.multiplyQuaternionsFlat(e,o,e,t,e,n),rr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){const o=1-r;for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]*o+e[n+s]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}}const Vh="\\[\\]\\.:\\/",zh=new RegExp("[\\[\\]\\.:\\/]","g"),Uh="[^\\[\\]\\.:\\/]",jh="[^"+Vh.replace("\\.","")+"]",Hh=/((?:WC+[\/:])*)/.source.replace("WC",Uh),Gh=/(WCOD+)?/.source.replace("WCOD",jh),Wh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Uh),$h=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Uh),qh=new RegExp("^"+Hh+Gh+Wh+$h+"$"),Yh=["material","materials","bones"];class Kh{constructor(e,t,n){this.path=t,this.parsedPath=n||Kh.parseTrackName(t),this.node=Kh.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Kh.Composite(e,t,n):new Kh(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(zh,"")}static parseTrackName(e){const t=qh.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Yh.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Kh.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Kh.Composite=class{constructor(e,t,n){const r=n||Kh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Kh.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Kh.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Kh.prototype.GetterByBindingType=[Kh.prototype._getValue_direct,Kh.prototype._getValue_array,Kh.prototype._getValue_arrayElement,Kh.prototype._getValue_toArray],Kh.prototype.SetterByBindingTypeAndVersioning=[[Kh.prototype._setValue_direct,Kh.prototype._setValue_direct_setNeedsUpdate,Kh.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Kh.prototype._setValue_array,Kh.prototype._setValue_array_setNeedsUpdate,Kh.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Kh.prototype._setValue_arrayElement,Kh.prototype._setValue_arrayElement_setNeedsUpdate,Kh.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Kh.prototype._setValue_fromArray,Kh.prototype._setValue_fromArray_setNeedsUpdate,Kh.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Xh{constructor(){this.uuid=On(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let s,a=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],d=u.uuid;let h=t[d];if(void 0===h){h=a++,t[d]=h,e.push(u);for(let e=0,t=o;e!==t;++e)i[e].push(new Kh(u,n[e],r[e]))}else if(h<l){s=e[h];const a=--l,c=e[a];t[c.uuid]=h,e[h]=c,t[d]=a,e[a]=u;for(let e=0,t=o;e!==t;++e){const t=i[e],o=t[a];let s=t[h];t[h]=o,void 0===s&&(s=new Kh(u,n[e],r[e])),t[a]=s}}else e[h]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o],a=s.uuid,l=t[a];if(void 0!==l&&l>=i){const o=i++,c=e[o];t[c.uuid]=l,e[l]=c,t[a]=o,e[o]=s;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[l];t[l]=r,t[o]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s].uuid,l=t[a];if(void 0!==l)if(delete t[a],l<i){const s=--i,a=e[s],c=--o,u=e[c];t[a.uuid]=l,e[l]=a,t[u.uuid]=s,e[s]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[s],i=t[c];t[l]=r,t[s]=i,t.pop()}}else{const i=--o,s=e[i];i>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,o.push(e),s.push(t),i.push(u);for(let n=c,r=a.length;n!==r;++n){const r=a[n];u[n]=new Kh(r,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];t[e[s]]=n,o[n]=a,o.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}}Xh.prototype.isAnimationObjectGroup=!0;class Jh{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,s=new Array(o),a={endingStart:zt,endingEnd:zt};for(let e=0;e!==o;++e){const t=i[e].createInterpolant(null);s[e]=t,t.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Dt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=i,a[1]=i+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Gt)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(s);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===Ft;if(0===e)return-1===i?r:o&&1==(1&i)?t-r:r;if(n===Nt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Ut,r.endingEnd=Ut):(r.endingStart=e?this.zeroSlopeAtStart?Ut:zt:jt,r.endingEnd=t?this.zeroSlopeAtEnd?Ut:zt:jt)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,a=o.sampleValues;return s[0]=i,a[0]=t,s[1]=i+e,a[1]=n,this}}class Qh extends Pn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,s=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];void 0===c&&(c={},l[a]=c);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let u=c[l];if(void 0!==u)o[e]=u;else{if(u=o[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,a,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new Zh(Kh.create(n,l,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,a,l),o[e]=u}s[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,s=o[i],a=s.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,s=o[r],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete s[i],0===Object.keys(s).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new yd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let o="string"==typeof e?kd.findByName(r,e):e;const s=null!==o?o.uuid:e,a=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:Ht),void 0!==a){const e=a.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=a.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new Jh(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?kd.findByName(n,e):e,o=i?i.uuid:e,s=this._actionsByClip[o];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let s=0;s!==n;++s){t[s]._update(r,e,i,o)}const s=this._bindings,a=this._nActiveBindings;for(let e=0;e!==a;++e)s[e].apply(o);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}Qh.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class ef{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new ef(void 0===this.value.clone?this.value:this.value.clone())}}class tf extends Al{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}tf.prototype.isInstancedInterleavedBuffer=!0;class nf{constructor(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}nf.prototype.isGLBufferAttribute=!0;class rf{constructor(e,t,n=0,r=1/0){this.ray=new Or(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Wr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return sf(e,this,n,t),n.sort(of),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)sf(e[r],this,n,t);return n.sort(of),n}}function of(e,t){return e.distance-t.distance}function sf(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)sf(r[e],t,n,!0)}}class af{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Nn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class lf{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const cf=new Un;class uf{constructor(e=new Un(1/0,1/0),t=new Un(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=cf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return cf.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}uf.prototype.isBox2=!0;const df=new ir,hf=new ir;class ff{constructor(e=new ir,t=new ir){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){df.subVectors(e,this.start),hf.subVectors(this.end,this.start);const n=hf.dot(hf);let r=hf.dot(df)/n;return t&&(r=Nn(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const pf=new ir;class mf extends si{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new qi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,o=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new Zi(r,3));const i=new mc({fog:!1,toneMapped:!1});this.cone=new Ec(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),pf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const gf=new ir,vf=new Nr,yf=new Nr;class bf extends Ec{constructor(e){const t=wf(e),n=new qi,r=[],i=[],o=new Ci(0,0,1),s=new Ci(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(s.r,s.g,s.b))}n.setAttribute("position",new Zi(r,3)),n.setAttribute("color",new Zi(i,3));super(n,new mc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");yf.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(vf.multiplyMatrices(yf,i.matrixWorld),gf.setFromMatrixPosition(vf),r.setXYZ(n,gf.x,gf.y,gf.z),vf.multiplyMatrices(yf,i.parent.matrixWorld),gf.setFromMatrixPosition(vf),r.setXYZ(n+1,gf.x,gf.y,gf.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function wf(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,wf(e.children[n]));return t}class xf extends fo{constructor(e,t,n){super(new Xu(t,4,2),new Mi({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _f=new ir,Sf=new Ci,Ef=new Ci;class Tf extends si{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new qu(t);r.rotateY(.5*Math.PI),this.material=new Mi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Ai(o,3)),this.add(new fo(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Sf.copy(this.light.color),Ef.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?Sf:Ef;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(_f.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Cf extends Ec{constructor(e=10,t=10,n=4473924,r=8947848){n=new Ci(n),r=new Ci(r);const i=t/2,o=e/t,s=e/2,a=[],l=[];for(let e=0,c=0,u=-s;e<=t;e++,u+=o){a.push(-s,0,u,s,0,u),a.push(u,0,-s,u,0,s);const t=e===i?n:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new qi;c.setAttribute("position",new Zi(a,3)),c.setAttribute("color",new Zi(l,3));super(c,new mc({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class Mf extends Ec{constructor(e=10,t=16,n=8,r=64,i=4473924,o=8947848){i=new Ci(i),o=new Ci(o);const s=[],a=[];for(let n=0;n<=t;n++){const r=n/t*(2*Math.PI),l=Math.sin(r)*e,c=Math.cos(r)*e;s.push(0,0,0),s.push(l,0,c);const u=1&n?i:o;a.push(u.r,u.g,u.b),a.push(u.r,u.g,u.b)}for(let t=0;t<=n;t++){const l=1&t?i:o,c=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c;s.push(n,0,i),a.push(l.r,l.g,l.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c,s.push(n,0,i),a.push(l.r,l.g,l.b)}}const l=new qi;l.setAttribute("position",new Zi(s,3)),l.setAttribute("color",new Zi(a,3));super(l,new mc({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const kf=new ir,Pf=new ir,Af=new ir;class If extends si{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new qi;r.setAttribute("position",new Zi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new mc({fog:!1,toneMapped:!1});this.lightPlane=new xc(r,i),this.add(this.lightPlane),r=new qi,r.setAttribute("position",new Zi([0,0,0,0,0,1],3)),this.targetLine=new xc(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){kf.setFromMatrixPosition(this.light.matrixWorld),Pf.setFromMatrixPosition(this.light.target.matrixWorld),Af.subVectors(Pf,kf),this.lightPlane.lookAt(Pf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Pf),this.targetLine.scale.z=Af.length()}}const Rf=new ir,Lf=new wo;class Of extends Ec{constructor(e){const t=new qi,n=new mc({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},s=new Ci(16755200),a=new Ci(16711680),l=new Ci(43775),c=new Ci(16777215),u=new Ci(3355443);function d(e,t,n){h(e,n),h(t,n)}function h(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}d("n1","n2",s),d("n2","n4",s),d("n4","n3",s),d("n3","n1",s),d("f1","f2",s),d("f2","f4",s),d("f4","f3",s),d("f3","f1",s),d("n1","f1",s),d("n2","f2",s),d("n3","f3",s),d("n4","f4",s),d("p","n1",a),d("p","n2",a),d("p","n3",a),d("p","n4",a),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",c),d("p","c",u),d("cn1","cn2",u),d("cn3","cn4",u),d("cf1","cf2",u),d("cf3","cf4",u),t.setAttribute("position",new Zi(r,3)),t.setAttribute("color",new Zi(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap;Lf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Nf("c",t,e,Lf,0,0,-1),Nf("t",t,e,Lf,0,0,1),Nf("n1",t,e,Lf,-1,-1,-1),Nf("n2",t,e,Lf,1,-1,-1),Nf("n3",t,e,Lf,-1,1,-1),Nf("n4",t,e,Lf,1,1,-1),Nf("f1",t,e,Lf,-1,-1,1),Nf("f2",t,e,Lf,1,-1,1),Nf("f3",t,e,Lf,-1,1,1),Nf("f4",t,e,Lf,1,1,1),Nf("u1",t,e,Lf,.7,1.1,-1),Nf("u2",t,e,Lf,-.7,1.1,-1),Nf("u3",t,e,Lf,0,2,-1),Nf("cf1",t,e,Lf,-1,0,1),Nf("cf2",t,e,Lf,1,0,1),Nf("cf3",t,e,Lf,0,-1,1),Nf("cf4",t,e,Lf,0,1,1),Nf("cn1",t,e,Lf,-1,0,-1),Nf("cn2",t,e,Lf,1,0,-1),Nf("cn3",t,e,Lf,0,-1,-1),Nf("cn4",t,e,Lf,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Nf(e,t,n,r,i,o,s){Rf.set(i,o,s).unproject(r);const a=t[e];if(void 0!==a){const e=n.getAttribute("position");for(let t=0,n=a.length;t<n;t++)e.setXYZ(a[t],Rf.x,Rf.y,Rf.z)}}const Df=new ar;class Ff extends Ec{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new qi;i.setIndex(new Ai(n,1)),i.setAttribute("position",new Ai(r,3)),super(i,new mc({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Df.setFromObject(this.object),Df.isEmpty())return;const t=Df.min,n=Df.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return Ec.prototype.copy.call(this,e),this.object=e.object,this}}class Bf extends Ec{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new qi;r.setIndex(new Ai(n,1)),r.setAttribute("position",new Zi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new mc({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class Zf extends xc{constructor(e,t=1,n=16776960){const r=n,i=new qi;i.setAttribute("position",new Zi([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new mc({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=new qi;o.setAttribute("position",new Zi([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new fo(o,new Mi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?m:p,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const Vf=new ir;let zf,Uf;class jf extends si{constructor(e=new ir(0,0,1),t=new ir(0,0,0),n=1,r=16776960,i=.2*n,o=.2*i){super(),this.type="ArrowHelper",void 0===zf&&(zf=new qi,zf.setAttribute("position",new Zi([0,0,0,0,1,0],3)),Uf=new Bc(0,.5,1,5,1),Uf.translate(0,-.5,0)),this.position.copy(t),this.line=new xc(zf,new mc({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new fo(Uf,new Mi({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Vf.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Vf,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class Hf extends Ec{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new qi;n.setAttribute("position",new Zi(t,3)),n.setAttribute("color",new Zi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new mc({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Ci,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Gf{constructor(){this.type="ShapePath",this.color=new Ci,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new pu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new mu;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=t[i],s=t[o],a=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],a=-a,s=t[i],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-a*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return r}const i=zu.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);let s,a,l;const c=[];if(1===o.length)return a=o[0],l=new mu,l.curves=a.curves,c.push(l),c;let u=!i(o[0].getPoints());u=e?!u:u;const d=[],h=[];let f,p,m=[],g=0;h[g]=void 0,m[g]=[];for(let t=0,n=o.length;t<n;t++)a=o[t],f=a.getPoints(),s=i(f),s=e?!s:s,s?(!u&&h[g]&&g++,h[g]={s:new mu,p:f},h[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:f[0]});if(!h[0])return n(o);if(h.length>1){let e=!1;const t=[];for(let e=0,t=h.length;e<t;e++)d[e]=[];for(let n=0,i=h.length;n<i;n++){const i=m[n];for(let o=0;o<i.length;o++){const s=i[o];let a=!0;for(let i=0;i<h.length;i++)r(s.p,h[i].p)&&(n!==i&&t.push({froms:n,tos:i,hole:o}),a?(a=!1,d[i].push(s)):e=!0);a&&d[n].push(s)}}t.length>0&&(e||(m=d))}for(let e=0,t=h.length;e<t;e++){l=h[e].s,c.push(l),p=m[e];for(let e=0,t=p.length;e<t;e++)l.holes.push(p[e].h)}return c}}const Wf=new Float32Array(1),$f=new Int32Array(Wf.buffer);class qf{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),Wf[0]=e;const t=$f[0];let n=t>>16&32768,r=t>>12&2047;const i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}}const Yf=0,Kf=1,Xf=0,Jf=1,Qf=2;function ep(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function tp(e=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function np(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ic(e,t)}function rp(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new $l(e)}function ip(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ic(e,t)}function op(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Cc(e)}function sp(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Cc(e)}function ap(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Cc(e)}function lp(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new ir(e,t,n)}function cp(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Ai(e,t).setUsage(bn)}function up(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ii(e,t)}function dp(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ri(e,t)}function hp(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Li(e,t)}function fp(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Oi(e,t)}function pp(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Ni(e,t)}function mp(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Di(e,t)}function gp(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Fi(e,t)}function vp(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Zi(e,t)}function yp(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Vi(e,t)}function bp(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Hf(e)}function wp(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Ff(e,t)}function xp(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ec(new Wc(e.geometry),new mc({color:void 0!==t?t:16777215}))}function _p(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ec(new nd(e.geometry),new mc({color:void 0!==t?t:16777215}))}function Sp(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Nd(e)}function Ep(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Vd(e)}function Tp(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new To(e,n)}function Cp(){console.error("THREE.CanvasRenderer has been removed")}function Mp(){console.error("THREE.JSONLoader has been removed.")}$c.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create($c.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},pu.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},Cf.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},bf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Ld.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),lh.extractUrlBase(e)},Ld.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},uf.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},uf.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},uf.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},uf.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},ar.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},ar.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ar.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},ar.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},ar.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Cr.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ro.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},ff.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},jn.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},jn.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},jn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},jn.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},jn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},jn.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Nr.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},Nr.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Nr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new ir).setFromMatrixColumn(this,3)},Nr.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},Nr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Nr.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Nr.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Nr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Nr.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},Nr.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Nr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Nr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Nr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Nr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Nr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Nr.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Nr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Nr.prototype.makeFrustum=function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)},Nr.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Po.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},rr.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},rr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Or.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Or.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},Or.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},vi.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},vi.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},vi.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},vi.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},vi.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},vi.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),vi.getBarycoord(e,t,n,r,i)},vi.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),vi.getNormal(e,t,n,r)},mu.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},mu.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Hu(this,e)},mu.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ku(this,e)},Un.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Un.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Un.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ir.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},ir.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},ir.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},ir.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},ir.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},ir.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},ir.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},ir.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},ir.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Qn.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Qn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},si.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},si.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},si.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},si.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},si.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(si.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),fo.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(fo.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Wt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),rc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},xo.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ud.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Ai.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===bn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(bn)}}}),Ai.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?bn:yn),this},Ai.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Ai.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},qi.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},qi.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Ai(arguments[1],arguments[2])))},qi.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},qi.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},qi.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},qi.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},qi.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(qi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Al.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?bn:yn),this},Al.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Hu.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Hu.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Hu.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Pl.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},ef.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(bi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ci}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===v}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(bo.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Tl.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Tl.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Tl.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Tl.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Tl.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Tl.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Tl.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Tl.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Tl.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Tl.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Tl.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Tl.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Tl.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Tl.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Tl.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Tl.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Tl.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Tl.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Tl.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Tl.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Tl.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Tl.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Tl.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Tl.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Tl.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Tl.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Kt:Yt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(pl.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(er.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Rh.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new yh).load(e,(function(e){t.setBuffer(e)})),this},Bh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},So.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},So.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},Yn.crossOrigin=void 0,Yn.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new zd;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Yn.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Zd;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Yn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Yn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const kp={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Pp(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function Ap(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new qi}function Ip(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new qi}function Rp(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Lp(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function Op(){console.error("THREE.ImmediateRenderObject has been removed.")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},2177:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r="Invariant failed";function i(e,t){if(!e)throw new Error(r)}},23053:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultTrackFromGameType=t.getGameSceneClass=t.defaultStoryTrack=t.defaultTagTrack=t.defaultRaceTrack=t.nonActiveTrackNames=t.getGameTypeFromTrackName=t.activeGameTypes=t.activeTagTrackNames=t.activeRaceTrackNames=t.activeTrackNames=t.getTimeOfDayColors=t.getTimeOfDay=t.getTrackInfo=t.getGameTypeNameFromType=t.getTrackNameFromType=t.numberOfLapsPossibilities=void 0;const r=n(12213),i=n(50706),o=n(46156),s=n(89645),a=n(28468),l=n(38990);t.numberOfLapsPossibilities=[1,2,3,5,7,13];t.getTrackNameFromType=e=>{var t,n;return null!==(n=null===(t=a.allTrackNames.find((t=>t.type===e)))||void 0===t?void 0:t.name)&&void 0!==n?n:"-"};t.getGameTypeNameFromType=e=>{switch(e){case"race":return"Race";case"tag":return"Tag";case"ball":return"Ball";case"story":return"Story";default:return"Unknown game type"}};t.getTrackInfo=e=>{for(let t of a.allTrackNames)if(t.type===e)return t};t.getTimeOfDay=e=>{var t;for(let n of a.allTrackNames)if(e===n.type)return null!==(t=n.timeOfDay)&&void 0!==t?t:"day";return"day"};const c={ambientLightColor:16777215,hemisphereBottomColor:16777215,hemisphereTopColor:30719,pointLightIntesity:1,ambientLightIntesity:1},u={ambientLightColor:3379967,hemisphereBottomColor:12648,hemisphereTopColor:30719,pointLightIntesity:.1,ambientLightIntesity:.5};t.getTimeOfDayColors=e=>e&&"evening"===e?u:c,t.activeTrackNames=["farm-track","nurn-track","sea-side-track","f1-track","f1-track-2","russia-track","ferrari-track","farmers-little-helper-map","spa-track","small-track","basic-track1","basic-track2","basic-track3","basic-track4","small-jump-track","simple-tag-course","basic-tag-course"],t.activeRaceTrackNames=t.activeTrackNames.filter((e=>{for(let t=0;t<a.allTrackNames.length;t++)if(a.allTrackNames[t].type===e)return"race"===a.allTrackNames[t].gameType;return!1})),t.activeTagTrackNames=t.activeTrackNames.filter((e=>{for(let t=0;t<a.allTrackNames.length;t++)if(a.allTrackNames[t].type===e)return"tag"===a.allTrackNames[t].gameType;return!1})),t.activeGameTypes=["race","tag"];t.getGameTypeFromTrackName=e=>{for(let t=0;t<a.allTrackNames.length;t++)if(a.allTrackNames[t].type===e)return a.allTrackNames[t].gameType},t.nonActiveTrackNames=(()=>{const e=[];for(let n of a.allTrackNames)(0,l.itemInArray)(n.type,t.activeTrackNames)||e.push(n.type);return e})(),t.defaultRaceTrack="farm-track",t.defaultTagTrack="simple-tag-course",t.defaultStoryTrack="farmers-little-helper-map";t.getGameSceneClass=e=>{switch(e){case"race":return i.RaceGameScene;case"tag":return s.TagGameScene;case"story":return o.StoryGameScene;default:return console.warn("Unknown gametype",e),r.GameScene}};t.getDefaultTrackFromGameType=e=>{switch(e){case"tag":return t.defaultTagTrack;case"story":return t.defaultStoryTrack;default:return t.defaultRaceTrack}}},66279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalTournament=t.validateCreateTournament=t.validateStartTournament=t.LocalTournament=t.createBracketTree=t.getBracketNameFromHeight=t.BracketTree=t.Tournament=void 0;const r=n(21614);class i{constructor(e,t){this.tournamentType="local",this.leaderId=e,this.leaderName=t,this.players={},this.id=(0,r.v4)().slice(0,8),this.trackName="farm-track",this.name="",this.numberOfLaps=2,this.isFinished=!1,this.hasStarted=!1,this.private=!1,this.creationDate=new Date,this.playersIds=[]}}t.Tournament=i;class o{constructor(e,t,n){this.height=e,this.seriesFinished=!1,t&&(this.parent=t),this.id=n||"root",this.player1Score=0,this.player2Score=0}splitRight(){this.child1=new o(this.height+1,this,`${this.id}_right`)}splitLeft(){this.child2=new o(this.height+1,this,`${this.id}_left`)}populateTree(e){e.sort(((e,t)=>e.ranking-t.ranking));const t=(e,n)=>{if(e.length<4*n)return e;const r=e.slice(0,e.length/2),i=e.slice(e.length/2).reverse(),o=[];for(let t=0;t<e.length/2;t+=n){for(let e=t;e<n+t;e++)e<r.length&&o.push(r[e]);for(let e=t;e<n+t;e++)e<i.length&&o.push(i[e])}return t(o,2*n)},n=t(e,1);n.reverse(),console.log("ordered players",n);let r=0;const i=e=>{e.child1?e.child2||(e.player2=n[r],r+=1):(e.player1=n[r],r+=1,e.player2=n[r],r+=1),e.child1&&i(e.child1),e.child2&&i(e.child2)};i(this)}setPlayer(e){this.player1?this.player2?console.warn("Players have been set on node",this):this.player2=e:this.player1=e}setWinner(e){this.parent?1===e?this.parent.setPlayer(this.player1):this.parent.setPlayer(this.player2):console.log("Tournament over")}getTreeHeight(){let e=this;for(;e.child1;)e=e.child1;return e.height}findLatestUnplayedGame(e){const t=n=>{var r,i;if((null===(r=n.player1)||void 0===r?void 0:r.uid)===e)return n;if((null===(i=n.player2)||void 0===i?void 0:i.uid)===e)return n;if(n.child1){if(t(n.child1))return n}if(n.child2){if(t(n.child2))return n}};return t(this)}flatten(){const e=[],t=n=>{e.push(n.getListItem()),n.child1&&t(n.child1),n.child2&&t(n.child2)};return t(this),e}findNode(e){return 0===e.length?this:"right"===e[0]?this.child1.findNode(e.slice(1)):"left"===e[0]?this.child2.findNode(e.slice(1)):void console.warn("Error finding node",e)}setFromListItem(e){this.id=e.id,this.player1=e.player1,this.player2=e.player2,this.player1Score=e.player1Score,this.player2Score=e.player2Score}getListItem(){var e,t,n;const r={height:this.height,id:this.id,player1:this.player1,player2:this.player2,player1Score:this.player1Score,player2Score:this.player2Score,parentId:null===(e=this.parent)||void 0===e?void 0:e.id,child1Id:null===(t=this.child1)||void 0===t?void 0:t.id,child2Id:null===(n=this.child2)||void 0===n?void 0:n.id,seriesFinished:this.seriesFinished};return Object.keys(r).forEach((e=>void 0===r[e]?delete r[e]:{})),r}static Deflatten(e,n){const r=(0,t.createBracketTree)(n),i=e.find((e=>"root"===e.id));i||console.warn("Currupted list",e),r.setFromListItem(i);for(let t of e)if("root"===t.id);else{const e=r.findNode(t.id.split("_").slice(1));e&&e.setFromListItem(t)}return r}static FindActiveBracketNode(e,t){var n,r,i,o;let s;console.log("player id",t);for(let a of e)console.log("item.player1?.uid === playerId || item.player2?.uid",(null===(n=a.player1)||void 0===n?void 0:n.uid)===t,(null===(r=a.player2)||void 0===r?void 0:r.uid)===t),a.seriesFinished||(null===(i=a.player1)||void 0===i?void 0:i.uid)!==t&&(null===(o=a.player2)||void 0===o?void 0:o.uid)!==t||(console.log("currentiiitttem",a),s?s.height<a.height&&(console.log("current item",a),s=a):(console.log("current item",a),s=a));return s}static FindParentBracketNode(e,t){const n=t.split("_"),r=n.slice(0,n.length-1).join("_");for(let t of e)if(t.id===r)return t}static AdvancePlayer(e,t,n){const r=t.split("_"),i=r.slice(0,r.length-1).join("_");for(let t=0;t<e.length;t++)e[t].id===i&&(e[t].player1?e[t].player2?console.warn("Both players have been set",e):e[t].player2=n:e[t].player1=n);return e}}t.BracketTree=o;t.getBracketNameFromHeight=e=>{switch(e){case 1:return"Final";case 2:return"Semi finals";case 3:return"Quarter finals";case 4:return"Eighth finals";case 5:return"16th finals";case 6:return"32th finals";default:return`${Math.pow(2,e-1)}th finals`}};t.createBracketTree=e=>{let t=2;const n=new o(1),r=Math.ceil(Math.log2(e)),i=2*(e-Math.pow(2,r-1));let s=0;const a=e=>{const n=r===e.height+1;r>e.height&&((!n||n&&s<i)&&(t+=1,e.splitRight(),n&&(s+=2),a(e.child1)),(!n||n&&s<i)&&(t+=1,e.splitLeft(),n&&(s+=2),a(e.child2)))};return console.log("number of players",e),e>2&&(a(n),t!==e&&console.warn("Error creating brackets tree, slotsCreated, numberOfPlayers",t,e),s!==i&&console.warn("Error creating brackets tree, slotsInMaxHeight, totalSlotsInMaxHeight",s,i)),n};t.LocalTournament=class extends i{constructor(e,t){super(e,t),this.tournamentType="local",this.numberOfGamesInSeries=3,this.useLowerbracket=!1}};t.validateStartTournament=e=>Object.keys(e.players).length<2?{status:"error",message:"Not enough players to start tournament."}:{status:"success",message:""};t.validateCreateTournament=e=>{if(!e.name)return{status:"error",message:"Tournament name cannot be empty"};if(e.numberOfLaps<0)return{status:"error",message:"Number of laps must be positive"};if("global"===e.tournamentType){const t=e;if(t.tournamentStart>t.tournamentEnd)return{status:"error",message:"Tournament cannot start after it ends"};if(!1!==t.runsPerPlayer&&t.runsPerPlayer<1)return{status:"error",message:"Number of runs must be greater than 0."}}return{status:"success",message:""}};t.GlobalTournament=class extends i{constructor(e,t){super(e,t),this.tournamentType="global",this.tournamentStart=new Date,this.tournamentEnd=new Date(Date.now()+72e5),this.runsPerPlayer=!1,this.allowLateJoin=!1}}},86568:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserTypeName=t.defaultUserSettings=t.defaultVehicleSettings=t.minEngineForce=t.maxEngineForce=t.steeringSensitivityStep=t.maxSteeringSensitivity=t.minSteeringSensitivity=void 0;const r=n(28468);t.minSteeringSensitivity=.1,t.maxSteeringSensitivity=3,t.steeringSensitivityStep=.1,t.maxEngineForce=2e4,t.minEngineForce=500,t.defaultVehicleSettings={steeringSensitivity:.2,chaseCameraSpeed:.25,useChaseCamera:!0,vehicleType:r.defaultVehicleType,cameraZoom:4,vehicleColor:r.vehicleColors[0].value,noSteerNumber:1,useDynamicFOV:!0},t.defaultUserSettings={vehicleSettings:t.defaultVehicleSettings};t.getUserTypeName=e=>{switch(e){case"premium":return"Premium";case"standard":return"Standard";default:return"Basic"}}},7735:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRecommendedGraphicSettings=exports.setAllLocalGameSettings=exports.getAllLocalGameSettings=exports.getLocalGameSetting=exports.setLocalGameSetting=exports.defaultGameSettings=void 0,exports.defaultGameSettings={useShadows:!1,useSound:!0,musicVolume:.2,numberOfLaps:1,trackName:"farm-track",gameType:"race",tagGameLength:2,graphics:"high",drawDistance:7500,record:!1,useGhost:!1,targetFPS:30};const setLocalGameSetting=(e,t)=>{window.localStorage.setItem(e,t.toString())};exports.setLocalGameSetting=setLocalGameSetting;const getLocalGameSetting=(key,type)=>{let value=window.localStorage.getItem(key);if(null!=value)return"number"===type?+value:"boolean"===type?eval(value):value};exports.getLocalGameSetting=getLocalGameSetting;const getAllLocalGameSettings=()=>{const e=exports.defaultGameSettings,t=Object.keys(exports.defaultGameSettings);for(let n of t){const t=(0,exports.getLocalGameSetting)(n,typeof exports.defaultGameSettings[n]);void 0!==t&&(e[n]=t)}return e};exports.getAllLocalGameSettings=getAllLocalGameSettings;const setAllLocalGameSettings=e=>{const t=Object.keys(e);for(let n of t)(0,exports.setLocalGameSetting)(n,e[n])};exports.setAllLocalGameSettings=setAllLocalGameSettings;const getRecommendedGraphicSettings=()=>({useShadow:!0,graphics:"high"});exports.getRecommendedGraphicSettings=getRecommendedGraphicSettings},59081:function(__unused_webpack_module,exports){"use strict";function getLocalStorageItem(key,type){const item=window.localStorage.getItem(key);if(item)switch(type){case"number":const num=+item;return isNaN(num)?void 0:num;case"boolean":return eval(item);default:return item}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.saveLocalStorageItem=exports.getLocalStorageItem=void 0,exports.getLocalStorageItem=getLocalStorageItem;const saveLocalStorageItem=(e,t)=>{window.localStorage.setItem(e,t)};exports.saveLocalStorageItem=saveLocalStorageItem},99222:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(672)),o=r(n(89589)),s=r(n(67294)),a=r(n(92070)),l=r(n(73437)),c=r(n(23950)),u=r(n(50622)),d=r(n(69306)),h=r(n(75718)),f=n(17091);t.default=e=>s.default.createElement(c.default,{backgroundContainer:!0},s.default.createElement(i.default,{container:!0,spacing:3},s.default.createElement(i.default,{item:!0,xs:12,lg:2},s.default.createElement(d.default,{color:"white"})),s.default.createElement(i.default,{item:!0,xs:12,lg:10},s.default.createElement(o.default,{variant:"h3"},"About Collisio")),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement("img",{src:a.default,style:{width:"100%",maxWidth:500}})),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement(o.default,{variant:"body1"},"Collisio's development started in quarantine after I contracted the Corona virus at the end of summer 2021. The game development kept me busy and away from the fact that it was illegal for me to be outside. It also kept me away from working on my master thesis defence, since I was hooked on the development.")),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement(o.default,{variant:"body1"},"After graduating I decided to work on Collisio instead of finding a job, as the development was too fun.")),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement(o.default,{variant:"body2"},"Currently I am the only person working on Collisio.")),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement("img",{src:l.default,style:{width:300,maxWidth:"50%"}})),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement(o.default,null,s.default.createElement("i",null,"Me, Hugi :)"))),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement(o.default,null,"Help support this project by buying a premium account or donating.")),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement(u.default,{link:f.buyPremiumPagePath},"Go Premium")),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement(h.default,null))))},99959:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(n(1849)),c=n(84473),u=a(n(7701)),d=a(n(672)),h=a(n(4153)),f=a(n(47696)),p=a(n(1471)),m=a(n(798)),g=a(n(89589)),v=o(n(67294)),y=n(72132),b=n(35742),w=a(n(50622)),x=a(n(24555));t.default=e=>{const[t,n]=(0,v.useState)([]),[r,i]=(0,v.useState)(!0),o=()=>s(void 0,void 0,void 0,(function*(){i(!0);(0,b.getAllAvailableRooms)(e.userId).then((e=>{n(e),i(!1)})).catch((()=>{i(!1),y.toast.error("Error getting rooms")}))}));return(0,v.useEffect)((()=>{e.userId&&o()}),[e.userId]),v.default.createElement(x.default,null,v.default.createElement(c.CardContent,null,v.default.createElement(d.default,{container:!0,spacing:1},v.default.createElement(d.default,{item:!0,xs:12},v.default.createElement(w.default,{onClick:()=>o(),startIcon:v.default.createElement(l.default,null),disabled:r},"Get available rooms")),r?v.default.createElement(v.default.Fragment,null,v.default.createElement(d.default,{item:!0,xs:12},v.default.createElement(u.default,null))):v.default.createElement(v.default.Fragment,null,t.length>0?v.default.createElement(d.default,{item:!0,xs:12},v.default.createElement(g.default,{color:"textInfo"},"Available rooms")):v.default.createElement(d.default,{item:!0,xs:12},v.default.createElement(g.default,{color:"textInfo"},"No rooms available")),v.default.createElement(d.default,{item:!0,xs:12},v.default.createElement(h.default,null,t.map((t=>v.default.createElement(f.default,{key:t.roomId},v.default.createElement(m.default,{style:{textAlign:"center"},primary:t.displayName}),v.default.createElement(m.default,{style:{textAlign:"center"},primary:t.roomId}),v.default.createElement(p.default,{style:{textAlign:"center"},onClick:()=>{e.store.setRoomId(t.roomId),e.connectButtonClicked(t.roomId)}},v.default.createElement(w.default,null,"Join")))))))))))}},99169:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(60181)),l=s(n(23508)),c=s(n(94718)),u=s(n(50961)),d=s(n(73537)),h=s(n(67276)),f=s(n(55435)),p=s(n(79540)),m=s(n(672)),g=s(n(74113)),v=s(n(4153)),y=s(n(47696)),b=s(n(798)),w=s(n(89589)),x=o(n(67294)),_=n(5977),S=n(73727),E=s(n(57224)),T=s(n(77471)),C=s(n(89133)),M=s(n(34022)),k=s(n(9932)),P=s(n(62959)),A=s(n(16342)),I=s(n(17109)),R=s(n(16430)),L=s(n(6867)),O=s(n(74821)),N=s(n(66947)),D=s(n(69851)),F=s(n(98855));n(86046);const B=s(n(23950)),Z=s(n(24555)),V=s(n(69306)),z=n(17091),U=e=>{const[t,n]=(0,x.useState)(!1);return x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(Z.default,{style:{cursor:"pointer"}},x.default.createElement(d.default,{onClick:()=>n(!t),subheader:e.header,action:x.default.createElement(g.default,null,t?x.default.createElement(a.default,null):x.default.createElement(l.default,null))}),x.default.createElement(f.default,{in:t},x.default.createElement(u.default,null,e.children))))};t.default=e=>{const t=(0,_.useHistory)();return x.default.createElement(B.default,{backgroundContainer:!0},x.default.createElement(m.default,{container:!0,spacing:1,style:{maxWidth:600,width:"95%",margin:"auto"}},x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,{variant:"h4",component:"div"},"How to play")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(V.default,null)),x.default.createElement(U,{header:"Connecting to a room"},x.default.createElement(m.default,{container:!0,spacing:3},x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"During this tutorial we will talk about rooms and games. You create a room on your desktop browser and then on your mobile you connect to that room. Upto four people can connect to a room at the same time. Many games can be played in one room.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,'There are a few ways to create a room. First on your desktop press "Create game", this button is only visible on your desktop, not your mobile.')),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"Logging in on both mobile and desktop")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(h.default,{src:C.default,component:"img"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"If you are logged in on the same account on your phone and desktop, then after creating a game on your desktop you can see the game on your mobile on the frontpage.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(p.default,{variant:"middle"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"Scanning the QR code")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"After creating a game a QR code is generated for that room, which you can scan with your phone to enter the room.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(p.default,{variant:"middle"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"Entering the room id")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(h.default,{src:M.default,component:"img"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,'You can enter the room id into the "Room id" input area on your mobile. Alternatively you can copy the link and paste it into your phone\'s browser.')))),x.default.createElement(U,{header:"Game play"},x.default.createElement(m.default,{container:!0,spacing:3},x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"The game works by using your phone to steer a vehicle that is displayed on a desktop. The idea is to simulate driving a real vehicle, so grab your phone as you would grap a steering wheel."),x.default.createElement(w.default,{color:"InfoText"},"You then compete against your friends for highscores.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(p.default,{variant:"middle"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,{component:"h3"},"The desktop")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(h.default,{src:k.default,component:"img"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"On your desktop computer (or tablet) you will see the above image.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(p.default,{variant:"middle"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,{component:"h3"},"The controller (your mobile)")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(h.default,{src:A.default,component:"img"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"The controller looks like the image above. There are four buttons, 'F', 'B', 'reset' and 'settings / pause'")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(v.default,null,x.default.createElement(y.default,null,x.default.createElement(b.default,{primary:"F",secondary:"F stands for Forward, you can think of it like an accelerator"})),x.default.createElement(y.default,null,x.default.createElement(b.default,{primary:"B",secondary:"B stands for break or backwards. When going forward it works like a break. When you are still it works like the reverse gear."})),x.default.createElement(y.default,null,x.default.createElement(b.default,{primary:"Reset",secondary:"If your vehicle goes in some unwanted state such as lands on its back or gets stuck, the pressing the reset button will get you back to a checkpoint position. When the race is over the restart button will restart the game"})),x.default.createElement(y.default,null,x.default.createElement(b.default,{primary:"Settings",secondary:"If you would like to change some settings such as steering sensitivity these can be changed in the settings."})))),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"It is recommended that your phone is locked in portait mode.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"There have been some issues with mobile browsers and the orientation, the game works on Google Chrome and Safari on iOS.")))),x.default.createElement(U,{header:"Steering"},x.default.createElement(m.default,{container:!0,spacing:3},x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement("img",{src:R.default,className:"info-image-small",alt:""})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"To begin with align your phone like the image above.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(p.default,{variant:"middle"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement("img",{src:I.default,className:"info-image-small",alt:""})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"To turn left tilt your phone like in the image. This is to emulate a steering wheel in a car.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(p.default,{variant:"middle"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement("img",{src:L.default,className:"info-image-small",alt:""})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"To turn right tilt your phone like in the image above.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(p.default,{variant:"middle"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,{component:"h3"},"More on Steering")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"Your phone knows about its orientation relative to the world. There are 3 axis your phone can rotate by and there correspond to value, these values and axis are:")),x.default.createElement(m.default,{item:!0,xs:12},"Beta"),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(h.default,{src:T.default,component:"img"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(p.default,{variant:"middle"})),x.default.createElement(m.default,{item:!0,xs:12},"Alpha"),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(h.default,{src:E.default,component:"img"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(p.default,{variant:"middle"})),x.default.createElement(m.default,{item:!0,xs:12},"Gamma"),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(h.default,{src:P.default,component:"img"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"The vehicle is steered by turing your phone like demonstrated in the first image, so the beta value dictates the steering.")))),x.default.createElement(U,{header:"Steering problems"},x.default.createElement(m.default,{container:!0,spacing:3},x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"Sometimes your browser revokes the permission to use the phones orientation.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,'To re grant the permission you go into setting while in game and press the "Reset orienation" button.')),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(h.default,{src:O.default,component:"img"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"If that does not work, try changing browsers on your mobile. Try Google Chrome, Safari or Firefox.")))),x.default.createElement(U,{header:"Selecting vehicles"},x.default.createElement(m.default,{container:!0,spacing:3},x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,'To select a different vehicle, when in the waiting room, go to the bottom and select your vehicle of choice. Note to select vehicles other than the "normal" you will have to have a premium account (which currently is just being logged in).')),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(h.default,{src:D.default,component:"img"})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"After pressing vehicles you can select your desired vehicle.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(h.default,{src:F.default,component:"img"})))),x.default.createElement(U,{header:"In-game settings and pausing a game"},x.default.createElement(m.default,{container:!0,spacing:3},x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"While in game, then you can press the 'Escape' (Esc) key on your keyboard to pause the game and bring up a small menu.")))),x.default.createElement(U,{header:"Playing split screen"},x.default.createElement(m.default,{container:!0,spacing:3},x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"To play split screen, make upto four players connect to the same room.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"Playing splitscreen can be demanding for your computer, so you might want to close all other applications.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(h.default,{src:N.default,component:"img"})))),x.default.createElement(U,{header:"Highscore"},x.default.createElement(m.default,{container:!0,spacing:3},x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"If you are logged in, then your score will automatically be recorded on the highscore charts which can be viewed on the"," ",x.default.createElement(S.Link,{to:z.highscorePagePath},"highscore page"))),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"The highscores are sorted in a way such that each 'track' & 'number-of-laps' pair has its own highscore list.")))),x.default.createElement(U,{header:"Maps, vehicles and game types"},x.default.createElement(m.default,{container:!0,spacing:3},x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"There are various race tracks, game modes and vehicles. For premium users everything is available, but basic users are limited to one vehicle and one race course.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(c.default,{variant:"contained",onClick:()=>t.push(z.buyPremiumPagePath)},"Go Premium")))),x.default.createElement(U,{header:"Tips"},x.default.createElement(m.default,{container:!0,spacing:3},x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"To make the game run smoother, close all applications on your computer, all other tabs in your browser and have your computer plugged in.")),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement(w.default,null,"You can also put the graphics in low settings and turn off shadows.")))),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement("iframe",{src:"https://www.youtube.com/embed/0YBLvMXrdPo",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",style:{margin:"auto",display:"block"},allowFullScreen:!0})),x.default.createElement(m.default,{item:!0,xs:12},x.default.createElement("iframe",{src:"https://www.youtube.com/embed/CNxlUfQencs",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",style:{margin:"auto",display:"block"},allowFullScreen:!0}))))}},52783:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(50594)),l=s(n(67408)),c=s(n(50891)),u=s(n(79535)),d=s(n(39485)),h=n(84473),f=s(n(50961)),p=s(n(73537)),m=s(n(7701)),g=s(n(672)),v=s(n(74113)),y=s(n(76171)),b=o(n(67294)),w=n(5977),x=n(72132),_=n(98059),S=n(39547),E=n(87612),T=s(n(50622)),C=s(n(24555)),M=n(17091);t.default=e=>{const t=(0,w.useHistory)(),n=(0,b.useContext)(E.UserContext),[r,i]=(0,b.useState)(!1),[o,s]=(0,b.useState)(""),[k,P]=(0,b.useState)(""),[A,I]=(0,b.useState)(""),[R,L]=(0,b.useState)(!0);return(0,b.useEffect)((()=>{null!==n&&L(!1),n&&t.push(M.frontPagePath)}),[n]),R?b.default.createElement(C.default,null,b.default.createElement(f.default,{style:{textAlign:"center"}},b.default.createElement(m.default,null))):b.default.createElement(C.default,null,b.default.createElement(p.default,{title:"Login",subheader:"Login or signup with one of the methods below.",subheaderTypographyProps:{},action:b.default.createElement(v.default,{style:{},onClick:()=>e.onClose()},b.default.createElement(a.default,null))}),b.default.createElement(f.default,null,b.default.createElement(g.default,{container:!0,spacing:3},b.default.createElement(g.default,{item:!0,xs:12},b.default.createElement(T.default,{onClick:()=>{(0,_.signInWithGoogle)(e.signInWithPopup),L(!0)},style:{backgroundColor:"#de5246",textAlign:"left",width:250},startIcon:b.default.createElement(u.default,null)},"Sign in with Google")),r?b.default.createElement(b.default.Fragment,null,b.default.createElement(g.default,{item:!0,xs:12,sm:12},b.default.createElement(y.default,{style:{marginTop:25},placeholder:"Email",value:o,onChange:e=>s(e.target.value)})),b.default.createElement(g.default,{item:!0,xs:12,sm:4},b.default.createElement(y.default,{style:{marginTop:15},placeholder:"Password",type:"password",value:k,onChange:e=>P(e.target.value),error:k.length<6})),b.default.createElement(g.default,{item:!0,xs:12,sm:8},b.default.createElement(y.default,{style:{marginTop:15},placeholder:"Displayname",value:A,onChange:t=>{I(t.target.value),e.setPlayerName&&e.setPlayerName(t.target.value)}})),b.default.createElement(g.default,{item:!0,xs:12,sm:12},b.default.createElement(T.default,{startIcon:b.default.createElement(d.default,null),onClick:()=>{k.length<6?x.toast.error("The password must be atleast 6 characters."):(L(!0),(0,_.signInWithEmail)(o,k,((e,t)=>{"error"===e&&(L(!1),x.toast.error(t))})))}},"Login")),b.default.createElement(g.default,{item:!0,xs:12,sm:12},b.default.createElement(T.default,{onClick:()=>{k.length<6?x.toast.error("The password must be atleast 6 characters."):""!==A?(L(!0),(0,_.createAccountWithEmail)(o,k,A)):x.toast.error("The display name cannot be empty.")},startIcon:b.default.createElement(l.default,null)},"Sign up"))):b.default.createElement(g.default,{item:!0,xs:12},b.default.createElement(T.default,{onClick:()=>i(!0),startIcon:b.default.createElement(c.default,null),style:{backgroundColor:S.basicColor,color:"black",textAlign:"left",width:250}},"Sign up/in with email")),b.default.createElement(g.default,{item:!0,xs:!0},b.default.createElement(h.Typography,null,"By signing up you are accepting our"," ",b.default.createElement("a",{href:M.privacyPolicyPage},"Privacy policy"))))))}},37904:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(672)),o=r(n(89589)),s=r(n(67294)),a=r(n(23950)),l=r(n(69306));t.default=e=>s.default.createElement(a.default,{noMusic:!0,backgroundContainer:!0},s.default.createElement(i.default,{container:!0,spacing:3},s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement(o.default,null,"Page not found")),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement(l.default,{color:"white"}))))},17091:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getTrophyRoomPath=t.getControlsRoomPath=t.getWaitingRoomPath=t.getGameRoomPath=t.getTournamentPagePath=t.getUserPagePath=t.trackPagePath=t.garagePagePath=t.loginPagePath=t.privacyPolicyPage=t.mobileOnlyWaitingRoomPath=t.trophyRoomIdPath=t.trophyRoomPath=t.tournamentIdPagePath=t.createTournamentPagePath=t.tournamentPagePath=t.connectPagePath=t.aboutPagePath=t.buyPremiumPagePath=t.showRoomPagePath=t.publicProfilePath=t.publicProfilePagePath=t.privateProfileTournamentsPagePath=t.privateProfilePagePath=t.highscorePagePath=t.howToPlayPagePath=t.controlsRoomIdPath=t.controlsRoomPath=t.gameRoomIdPath=t.gameRoomPath=t.waitingRoomGameIdPath=t.waitingRoomPath=t.frontPagePath=void 0;const a=o(n(67294)),l=n(73727),c=n(23053),u=n(7735),d=n(86568),h=s(n(33576)),f=n(35742),p=n(46078),m=s(n(78318)),g=n(87612),v=n(32779),y=n(34910),b=n(72425),w=s(n(99222)),x=s(n(27435)),_=s(n(57520)),S=s(n(50741)),E=s(n(23826)),T=s(n(99169)),C=s(n(9483)),M=s(n(71280)),k=s(n(39953)),P=s(n(37904)),A=s(n(14952)),I=s(n(89493)),R=s(n(77846)),L=s(n(45646)),O=s(n(40553)),N=s(n(63050)),D=s(n(4836)),F=s(n(2110)),B=s(n(76679)),Z=s(n(41571));t.frontPagePath="/",t.waitingRoomPath="/wait",t.waitingRoomGameIdPath="/wait/:roomId",t.gameRoomPath="/game",t.gameRoomIdPath="/game/:roomId",t.controlsRoomPath="/controls",t.controlsRoomIdPath="/controls/:roomId",t.howToPlayPagePath="/how-to-play",t.highscorePagePath="/highscores",t.privateProfilePagePath="/private-profile",t.privateProfileTournamentsPagePath="/private-profile/tournaments",t.publicProfilePagePath="/user/:profileId",t.publicProfilePath="/user",t.showRoomPagePath="/show-room",t.buyPremiumPagePath="/premium",t.aboutPagePath="/about",t.connectPagePath="/connect",t.tournamentPagePath="/tournament",t.createTournamentPagePath="/tournament/create",t.tournamentIdPagePath="/tournament/:tournamentId",t.trophyRoomPath="/trophy",t.trophyRoomIdPath="/trophy/:id",t.mobileOnlyWaitingRoomPath="/mobile-only-wait",t.privacyPolicyPage="/privacy-policy",t.loginPagePath="/login",t.garagePagePath="/garage",t.trackPagePath="/tracks";t.getUserPagePath=e=>`${t.publicProfilePath}/${e}`;t.getTournamentPagePath=e=>`${t.tournamentPagePath}/${e}`;t.getGameRoomPath=e=>`${t.gameRoomPath}/${e}`;t.getWaitingRoomPath=e=>`${t.waitingRoomPath}/${e}`;t.getControlsRoomPath=e=>`${t.controlsRoomPath}/${e}`;t.getTrophyRoomPath=e=>`${t.trophyRoomPath}/${e}`;t.default=()=>{const[e,n]=(0,a.useState)(void 0),[r,i]=(0,a.useState)(""),[o,s]=(0,a.useState)([]),[V,z]=(0,a.useState)(void 0),[U,j]=(0,a.useState)(d.defaultUserSettings),[H,G]=(0,a.useState)(b.inTestMode?b.testGameSettings:u.defaultGameSettings),[W,$]=(0,a.useState)(void 0),[q,Y]=(0,a.useState)(void 0),[K,X]=(0,a.useState)(""),[J,Q]=((0,b.getDeviceType)(),(0,a.useState)(void 0)),[ee,te]=(0,a.useState)(void 0);(0,a.useEffect)((()=>{if(!b.inTestMode){const e=(0,u.getAllLocalGameSettings)();e.gameType!==(0,c.getGameTypeFromTrackName)(e.trackName)&&(e.trackName=(0,c.getDefaultTrackFromGameType)(e.gameType)),ne.setGameSettings(e)}if(b.inTestMode){(0,u.getAllLocalGameSettings)();ne.setGameSettings(b.testGameSettings),s([v.fakePlayer1]),z(v.fakePlayer1),(0,y.createSocket)((0,b.getDeviceType)()).then((e=>n(e)))}}),[]);const ne={roomId:r,setRoomId:i,players:o,setPlayers:s,player:V,setPlayer:z,userSettings:U,setUserSettings:j,gameSettings:H,setGameSettings:G,socket:e,setSocket:n,tournament:q,setTournament:Y,activeBracketNode:W,setActiveBracketNode:$,previousPage:K,setPreviousPage:X,tokenData:J,setTokenData:Q,vehiclesSetup:ee,setVehiclesSetup:te},re=(0,a.useContext)(g.UserContext);return(0,a.useEffect)((()=>{(null==re?void 0:re.uid)&&((0,f.getDBUserSettings)(re.uid).then((e=>{if(e){const t=Object.assign(Object.assign({},U),e);ne.setUserSettings(t)}else(0,f.setDBUserSettings)(re.uid,d.defaultUserSettings)})),(0,p.getVehiclesSetup)(re.uid).then((e=>{te(e)})))}),[re]),b.inTestMode&&!ne.socket?null:a.default.createElement(l.BrowserRouter,null,a.default.createElement(l.Switch,null,a.default.createElement(l.Route,{exact:!0,path:t.frontPagePath,render:e=>a.default.createElement(x.default,Object.assign({},e,{store:ne}))}),a.default.createElement(l.Route,{path:[t.waitingRoomGameIdPath,t.waitingRoomPath],render:e=>a.default.createElement(Z.default,Object.assign({},e,{store:ne}))}),a.default.createElement(l.Route,{path:t.gameRoomPath,render:e=>a.default.createElement(_.default,Object.assign({},e,{store:ne,isTestMode:b.inTestMode}))}),a.default.createElement(l.Route,{path:[t.controlsRoomIdPath,t.controlsRoomPath],render:e=>a.default.createElement(m.default,Object.assign({},e,{store:ne}))}),a.default.createElement(l.Route,{path:t.howToPlayPagePath,render:e=>a.default.createElement(T.default,Object.assign({},e))}),a.default.createElement(l.Route,{path:t.highscorePagePath,render:e=>a.default.createElement(E.default,Object.assign({},e))}),a.default.createElement(l.Route,{exact:!0,path:t.privateProfileTournamentsPagePath,render:e=>a.default.createElement(A.default,Object.assign({},e))}),a.default.createElement(l.Route,{path:t.privateProfilePagePath,render:e=>a.default.createElement(I.default,Object.assign({},e,{store:ne}))}),a.default.createElement(l.Route,{path:t.showRoomPagePath,render:e=>a.default.createElement(L.default,Object.assign({},e))}),a.default.createElement(l.Route,{path:t.buyPremiumPagePath,render:e=>a.default.createElement(k.default,Object.assign({},e))}),a.default.createElement(l.Route,{path:t.aboutPagePath,render:e=>a.default.createElement(w.default,Object.assign({},e))}),a.default.createElement(l.Route,{path:t.publicProfilePagePath,render:e=>a.default.createElement(R.default,Object.assign({},e))}),a.default.createElement(l.Route,{path:t.createTournamentPagePath,exact:!0,render:e=>a.default.createElement(O.default,Object.assign({},e))}),a.default.createElement(l.Route,{path:[t.tournamentIdPagePath,t.tournamentPagePath],render:e=>a.default.createElement(N.default,Object.assign({},e,{store:ne}))}),a.default.createElement(l.Route,{path:t.connectPagePath,render:e=>a.default.createElement(B.default,Object.assign({},e,{store:ne}))}),a.default.createElement(l.Route,{path:[t.trophyRoomIdPath,t.trophyRoomPath],render:e=>a.default.createElement(F.default,Object.assign({},e,{store:ne}))}),a.default.createElement(l.Route,{path:t.mobileOnlyWaitingRoomPath,render:e=>a.default.createElement(M.default,Object.assign({},e))}),a.default.createElement(l.Route,{path:t.privacyPolicyPage,render:e=>a.default.createElement(h.default,null)}),a.default.createElement(l.Route,{path:t.loginPagePath,render:e=>a.default.createElement(C.default,null)}),a.default.createElement(l.Route,{path:t.garagePagePath,render:e=>a.default.createElement(S.default,Object.assign({},e,{store:ne}))}),a.default.createElement(l.Route,{path:t.trackPagePath,render:e=>a.default.createElement(D.default,Object.assign({},e,{store:ne}))}),a.default.createElement(l.Route,{path:"/*",render:e=>a.default.createElement(P.default,Object.assign({},e))})))}},23950:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(7701)),l=o(n(67294)),c=n(5977);n(55202);const u=n(7735),d=n(38990),h=s(n(50622)),f=n(17091),p=n(32701),m=s(n(44456));t.default=e=>{var t,n,r,i;const o=(0,c.useHistory)(),s=(0,l.useRef)(),[g,v]=(0,l.useState)(0),[y,b]=(0,l.useState)(!1),[w,x]=(0,l.useState)(0),_=e.noMusic?0:null!==(r=null===(n=null===(t=e.store)||void 0===t?void 0:t.gameSettings)||void 0===n?void 0:n.musicVolume)&&void 0!==r?r:(0,u.getLocalGameSetting)("musicVolume","number");(0,l.useEffect)((()=>{var t;const{renderer:n,alreadyExisted:r}=(0,p.createBackdropRenderer)((e=>{x(e)}));if(r){b(r);let e=1;"/"!==o.location.pathname&&(e+=1),(0,p.changeCameraPosition)(e,_),v(e)}else(null===(t=e.store)||void 0===t?void 0:t.previousPage)===f.gameRoomPath&&b(!0);(null==s?void 0:s.current)&&(r||n.domElement.setAttribute("style","max-width:100%;"),s.current.appendChild(n.domElement))}),[]);return l.default.createElement("div",{style:{fontFamily:"monospace",textAlign:e.center?"center":"left"}},y?l.default.createElement("div",{className:(0,d.createClassNames)("container",e.backgroundContainer?"background":""),style:{maxHeight:.9*(null!==(i=null===screen||void 0===screen?void 0:screen.availHeight)&&void 0!==i?i:window.innerHeight)+"px"}},e.loading?l.default.createElement("div",{style:{marginTop:25,textAlign:"center"}},l.default.createElement(a.default,null)):e.children):l.default.createElement("div",{className:"enter-game-button"},l.default.createElement(m.default,{ratio:w}),l.default.createElement(h.default,{style:{visibility:w<1?"hidden":"visible",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",textAlign:"center",transition:"2s"},onClick:()=>{(0,p.changeCameraPosition)(g+1,_),v(g+1),b(!0)},color:"black"},"Enter Game")),l.default.createElement("div",{ref:s}))}},44456:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294));t.default=e=>{const t=e.ratio>0?200*e.ratio:0;return i.default.createElement("div",{className:"black-loading-page",style:{zIndex:e.ratio<1?999:-1e3,width:"100%",height:"100%",position:"absolute",top:0,left:0,backgroundColor:e.ratio<1?"#000":"#fff",transition:"2s"}},i.default.createElement("div",{style:{visibility:e.ratio<1?"visible":"hidden",width:200,margin:"auto",border:"2px solid #fff",height:20,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"}},i.default.createElement("div",{style:{border:"none",width:t,height:20,backgroundColor:"#fff"}})))}},32701:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.clearBackdropCanvas=t.createBackdropRenderer=t.changeCameraPosition=void 0;const i=n(2212),o=n(1217),s=n(23053),a=n(25193),l=n(44482),c=n(72425);let u,d,h;n(60373);let f=0,p=0,m=0,g=Math.PI/2,v=0;let y=[],b=new i.Vector3(0,0,0),w=!0;t.changeCameraPosition=(e,t)=>{if(1===e&&(0,l.addMusic)(t,h,"menu.mp3"),h){const t=y[e%y.length];b=t,w=!1,x()}};const x=()=>{f=h.position.x,p=h.position.z,m=h.position.y};let _,S=window.innerWidth,E=window.innerHeight;t.createBackdropRenderer=e=>{if(u)return{renderer:u,alreadyExisted:!0};u=new i.WebGLRenderer({antialias:!0}),u.setPixelRatio(window.devicePixelRatio),u.setSize(S,E),u.outputEncoding=i.sRGBEncoding,u.domElement.setAttribute("id","back-drop-canvas"),u.domElement.setAttribute("style",`width: ${window.innerWidth}, height:${window.innerHeight}`),d=new i.Scene;let t=new i.Vector3(-37,1,67),n=new i.Vector3(0,1,0);(e=>{const{ambientLightColor:t,hemisphereTopColor:n,hemisphereBottomColor:r,pointLightIntesity:o,ambientLightIntesity:l}=(0,s.getTimeOfDayColors)("day"),c=new i.PointLight(16777215,o,0,1);c.position.set(100,150,100),e.add(c);const u=new i.HemisphereLight(n,1);u.position.set(0,1,0),u.color.setHSL(.6,1,.4),e.add(u);const d=new i.AmbientLight(t,l);d.position.set(0,0,0),e.add(d);const h={topColor:{value:new i.Color(n)},bottomColor:{value:new i.Color(r)},offset:{value:33},exponent:{value:.6}};h.topColor.value.copy(u.color),e.background=(new i.Color).setHSL(.6,0,1),e.fog=new i.Fog(e.background,1,5e3),e.fog.color.copy(h.bottomColor.value);const f=new i.SphereGeometry(1e3,32,15),p=new i.ShaderMaterial({uniforms:h,vertexShader:a.skydomeVertexShader,fragmentShader:a.skydomeFragmentShader,side:i.BackSide}),m=new i.Mesh(f,p);e.add(m)})(d),T(d,e).then((([e,r])=>{t=r,y=e,n=y[0],h.position.set(n.x,n.y,n.z),h.lookAt(t),x()})),h=new i.PerspectiveCamera(40,S/E,1,2e3),h.position.set(n.x,n.y,n.z),h.lookAt(t.clone()),window.addEventListener("resize",C),window.setTimeout((()=>{S=window.innerWidth,E=window.innerHeight,h.aspect=S/E,h.updateProjectionMatrix(),u.setSize(S,E)}),500);let r=.005,o=.003;const l=Math.PI/4,c=Math.PI;let M=S<600?60:30;h.fov=M,h.updateProjectionMatrix();let k=Date.now();const P=()=>{if(u){const e=Date.now();u.render(d,h),k=e}if(w)v+=r,Math.abs(v)>l&&(r=-r),g+=o,Math.abs(g)>c&&(o=-o),h.position.setX(f+Math.sin(v)+Math.cos(g)),h.position.setZ(p+Math.sin(v)+Math.cos(g)),h.position.setY(m+Math.sin(v)+Math.cos(g));else{const e=h.position.clone().sub(h.position.clone().sub(b).multiplyScalar(.4));h.position.set(e.x,e.y,e.z),e.distanceTo(b)<.1&&(w=!0,v=0,g=Math.PI/2,x())}h.lookAt(t.clone()),_=setTimeout((()=>{requestAnimationFrame(P)}),50)};return 0===v&&g===Math.PI/2?P():console.warn("!!! Trying to animate backdrop canvas twice"),{renderer:u,alreadyExisted:!1}};const T=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=new o.GLTFLoader;return new Promise(((o,s)=>r(void 0,void 0,void 0,(function*(){let r=new i.Vector3(0,0,0),s=new i.Vector3(0,0,0),a=[];n.loadAsync((0,c.getStaticPath)("front-page.glb"),(e=>{if(e.lengthComputable){const n=e.loaded/e.total;t(n)}})).then((t=>{e.add(t.scene);for(let e of t.scene.children)if("f1-car"===e.name)r=e.position;else if(e.name.includes("position")){const t=+e.name.slice(8);a[t]=e.position,s=e.position,e.visible=!1}o([a,r])}))}))))})),C=()=>{S=window.innerWidth,E=window.innerHeight,h.aspect=S/E,h.updateProjectionMatrix(),u.setSize(S,E)};t.clearBackdropCanvas=()=>{_&&clearTimeout(_),window.removeEventListener("resize",C),(0,l.stopMusic)(),null==u||u.clear(),null==d||d.clear(),d=void 0,u=void 0,g=Math.PI/2,v=0}},50622:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(84473),o=r(n(67294)),s=n(5977),a=n(38990);n(89727);t.default=e=>{var t;const n=(0,s.useHistory)(),r=null!==(t=e.color)&&void 0!==t?t:"black";return o.default.createElement("div",{className:(0,a.createClassNames)("btn",e.disabled?"disabled":"","black"===r?"btn--black":"btn--white"),onClick:()=>{e.disabled||(e.link?n.push(e.link):e.onClick&&e.onClick())},style:Object.assign(Object.assign({},e.style),{margin:e.center?"auto":"",width:e.width})},e.loading?o.default.createElement(i.CircularProgress,null):o.default.createElement(o.default.Fragment,null,e.startIcon&&o.default.createElement("span",{className:"btn__icon"},e.startIcon),o.default.createElement("span",null,e.children)))}},24555:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(34297)),o=r(n(67294));n(17026);t.default=e=>o.default.createElement(i.default,{className:"card",style:Object.assign(Object.assign({},e.style),{backgroundColor:"black"===e.color?"rgba(0,0,0, 0.82)":"rgba(255,255,255,0.8)"}),variant:"outlined"},e.children)},27435:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(49066)),l=s(n(26340)),c=n(84473),u=o(n(67294)),d=n(7735),h=n(87612),f=n(44482),p=n(72425),m=s(n(23950)),g=s(n(50622)),v=s(n(92976)),y=s(n(56592)),b=s(n(20959)),w=n(17091),x=s(n(80313));t.default=e=>{const[t,n]=(0,u.useState)((0,p.getDefaultTabletSetting)());(0,u.useEffect)((()=>{e.store.setPreviousPage(w.frontPagePath)}),[]);const r=(0,u.useContext)(h.UserContext),i="mobile"===(0,p.getDeviceType)(),o=180;return u.default.createElement(m.default,{store:e.store},u.default.createElement(c.Grid,{container:!0,spacing:3},u.default.createElement(c.Grid,{item:!0,xs:12,lg:6},u.default.createElement(g.default,{link:w.connectPagePath,width:o},i?"Join a game":"Create a game"),u.default.createElement(g.default,{link:w.mobileOnlyWaitingRoomPath,width:o},"Play mobile version"),u.default.createElement(g.default,{link:w.garagePagePath,width:o},"Garage"),u.default.createElement(g.default,{link:w.trackPagePath,width:o},"Tracks"),u.default.createElement(g.default,{disabled:!r,link:w.privateProfilePagePath,width:o},"Settings"),u.default.createElement(g.default,{link:w.highscorePagePath,width:o},"Highscores"),u.default.createElement(g.default,{link:w.tournamentPagePath,width:o},"Tournaments"),u.default.createElement(g.default,{link:w.howToPlayPagePath,width:o},"How to play"),u.default.createElement(g.default,{link:w.buyPremiumPagePath,width:o},"Go Premium"),u.default.createElement(g.default,{link:w.aboutPagePath,width:o},"About")),u.default.createElement(c.Grid,{item:!0,xs:12,lg:6,style:{float:"right"}},u.default.createElement(u.default.Fragment,null,null===r?u.default.createElement("div",{style:{marginTop:15,margin:"auto",textAlign:"center"}},u.default.createElement(c.CircularProgress,null)):u.default.createElement("div",null,r?u.default.createElement(u.default.Fragment,null,u.default.createElement(x.default,{user:r,store:e.store,showInfo:!0}),u.default.createElement(g.default,{link:w.privateProfilePagePath,style:{fontSize:32}},u.default.createElement("i",null,r.displayName)," logged in")):u.default.createElement(g.default,{link:w.loginPagePath},"Login")),!i&&u.default.createElement("div",{style:{marginTop:15},className:"background"},u.default.createElement(v.default,{startIcon:u.default.createElement(c.IconButton,{style:{color:"white"},onClick:()=>{const t=Object.assign(Object.assign({},e.store.gameSettings),{musicVolume:0});e.store.setGameSettings(t),(0,d.setLocalGameSetting)("musicVolume",0),(0,f.setMusicVolume)(0)}},u.default.createElement(a.default,null)),endIcon:u.default.createElement(l.default,null),label:"Music volume",onChangeCommitted:t=>{const n=Object.assign(Object.assign({},e.store.gameSettings),{musicVolume:t});e.store.setGameSettings(n),(0,d.setLocalGameSetting)("musicVolume",t)},onChange:e=>{(0,f.setMusicVolume)(e)},value:e.store.gameSettings.musicVolume,step:.01,max:1,min:0,color:"white"})))),u.default.createElement(c.Grid,{item:!0,xs:12},u.default.createElement("p",null,u.default.createElement("i",null,"Pre alpha"))),(0,p.onTablet)()&&u.default.createElement(c.Grid,{item:!0,xs:12},u.default.createElement("div",{className:"background"},u.default.createElement(b.default,{label:"Use tablet as?",options:[{label:"Mobile",value:!0},{label:"Desktop",value:!1}],checked:t,onChange:()=>{n(!t),(0,p.setDefaultTabletSetting)(!t)}}))),u.default.createElement(c.Grid,{item:!0,xs:12},u.default.createElement(y.default,{slotId:"7059022973"}))))}},38854:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(50594)),o=r(n(672)),s=r(n(74113)),a=r(n(89589)),l=r(n(67294)),c=r(n(50622)),u=r(n(69306)),d=r(n(39490)),h=n(17091),f=r(n(87739));t.default=e=>l.default.createElement(d.default,{open:e.open,onClose:e.onClose},l.default.createElement(o.default,{container:!0,spacing:3},l.default.createElement(o.default,{item:!0,xs:6},l.default.createElement("h3",null,"Race over")),l.default.createElement(o.default,{item:!0,xs:6,style:{textAlign:"right"}},l.default.createElement(s.default,{onClick:e.onClose,style:{color:"white"}},l.default.createElement(i.default,null))),e.gameDataInfo.map(((e,t)=>l.default.createElement(o.default,{item:!0,xs:12,key:`gamedata-info-${t}`},l.default.createElement(a.default,null,e)))),e.scoreInfo&&l.default.createElement(o.default,{item:!0,xs:12},l.default.createElement(f.default,{isEndOfGame:!0,raceTimeInfo:e.scoreInfo.timeInfos})),l.default.createElement(o.default,{item:!0,xs:6,xl:2},l.default.createElement(c.default,{onClick:e.restartGame},"Restart")),l.default.createElement(o.default,{item:!0,xs:6,xl:2},l.default.createElement(u.default,null)),l.default.createElement(o.default,{item:!0,xs:6,xl:2},l.default.createElement(c.default,{color:"white",onClick:()=>e.quitGame(h.highscorePagePath)},"See highscores"))))},57520:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=o(n(67294)),c=n(5977),u=n(72132),d=n(23053),h=n(7735),f=n(92891),p=n(12213),m=n(87612),g=n(28468),v=n(9938),y=n(72425),b=n(32701),w=n(17091),x=a(n(38854)),_=a(n(98584));let S,E=[];const T=l.default.memo((e=>{const[t,n]=(0,l.useState)(!1),[r,i]=(0,l.useState)(!1),[o,a]=(0,l.useState)({}),[T,C]=(0,l.useState)({}),[M,k]=(0,l.useState)([]),[P,A]=(0,l.useState)(new g.GameActions),I=(0,l.useContext)(m.UserContext),R=(0,c.useHistory)(),L=()=>{n(!t)};(0,l.useEffect)((()=>{(0,b.clearBackdropCanvas)()}),[]);const O=t=>{i(!0),(0,f.saveRaceDataGame)(t.endOfRaceInfo,(t=>{"success"===t.status&&(E=[t.message].concat(E),k(E)),t.activeBracketNode&&(e.store.activeBracketNode=t.activeBracketNode,e.store.setActiveBracketNode(t.activeBracketNode))}),e.store.activeBracketNode),a(t)},N=e=>{e&&C(e)},D=t=>{e.store.socket.emit(g.dts_player_finished,t)},F=()=>{E=[],k([]),i(!1),a({}),n(!1)};if(!e.store.socket&&!y.inTestMode)return R.push(w.frontPagePath),null;(0,l.useEffect)((()=>{if(e.store.socket.on(g.std_player_disconnected,(({playerName:e})=>{u.toast.warn(`${e} disconnected from game, logged in players can reconnect!`)})),e.useTestCourse)return(0,v.startLowPolyTest)(e.store.socket,e.store.gameSettings,L,(e=>{S=e}));if(!e.store.roomId&&!y.inTestMode)return R.push(w.frontPagePath),null;e.store.setPreviousPage(w.gameRoomPath);const t=(0,d.getGameSceneClass)(e.store.gameSettings.gameType);return(0,p.startGame)(t,{socket:e.store.socket,players:e.store.players,gameSettings:e.store.gameSettings,roomId:e.store.roomId,gameRoomActions:{escPressed:L,gameFinished:O,updateScoreInfo:N,playerFinished:D,closeModals:F},tournament:e.store.tournament},(e=>{S=e,B()})),e.store.socket.on(g.std_game_data_info,(e=>{const{setPersonalBest:t,playerId:n,gameDataInfo:r}=e;t&&S.saveDriveRecording(n),E=E.concat(r),k(E)})),e.store.socket.on(g.std_send_game_actions,(e=>{A(e)})),e.store.socket.once(g.std_quit_game,(()=>s(void 0,void 0,void 0,(function*(){e.store.socket.disconnect(),yield S.destroyGame(),S=void 0,R.push(w.connectPagePath)})))),()=>{var t;null==S||S.destroyGame(),null===(t=e.store.socket)||void 0===t||t.disconnect(),e.store.socket.off(g.std_send_game_actions),e.store.socket.off(g.std_game_data_info),e.store.socket.off(g.std_player_disconnected),e.store.socket.off(g.std_quit_game),e.store.socket.off(g.stmd_game_settings_changed)}}),[]);const B=()=>(e.store.socket.on(g.stmd_game_settings_changed,(t=>{e.store.setGameSettings(t.gameSettings),t.gameSettings&&(0,h.setAllLocalGameSettings)(t.gameSettings),S&&S.setGameSettings(t.gameSettings)})),()=>{e.store.socket.off(g.stmd_game_settings_changed),S&&S.destroyGame().then((()=>{e.store.socket.emit(g.dts_back_to_waiting_room,{})}))});return(0,l.useEffect)((()=>{S&&(P.pause?(n(!0),S.pauseGame()):(n(!1),S.unpauseGame()),P.restart&&(S.restartGame(),F()))}),[P]),l.default.createElement(l.default.Fragment,null,l.default.createElement(_.default,{gameObject:S,open:t,onClose:()=>{n(!1),S&&S.unpauseGame()},store:e.store,userId:null==I?void 0:I.uid,user:I,isTestMode:e.isTestMode,updateGameSettings:t=>{e.store.setGameSettings(Object.assign({},t)),(0,h.setAllLocalGameSettings)(t),e.store.gameSettings.gameType!==t.gameType?(0,u.toast)("Not supported changing game type"):S.setGameSettings(t)},quitGame:t=>{S.destroyGame().then((()=>{e.store.socket.disconnect(),S=void 0,R.push(t)}))}}),l.default.createElement(x.default,{open:r,onClose:()=>F(),data:o,restartGame:()=>{S&&S.restartGame(),F()},scoreInfo:T,gameDataInfo:M,quitGame:t=>{S.destroyGame().then((()=>{e.store.socket.disconnect(),S=void 0,R.push(t)}))}}))}));t.default=T},98584:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(50594)),o=r(n(672)),s=r(n(74113)),a=r(n(89589)),l=r(n(67294)),c=r(n(42950)),u=r(n(58153)),d=r(n(39490)),h=r(n(67300)),f=r(n(50622)),p=n(17091);t.default=e=>{var t;return e.gameObject?l.default.createElement(d.default,{open:e.open,onClose:e.onClose},l.default.createElement(o.default,{container:!0,spacing:3},l.default.createElement(o.default,{item:!0,xs:3,style:{textAlign:"left"}},l.default.createElement(c.default,null)),l.default.createElement(o.default,{item:!0,xs:6,style:{textAlign:"center"}},l.default.createElement(a.default,{variant:"h6"},"Game is paused, room ",l.default.createElement("i",null,e.store.roomId))),l.default.createElement(o.default,{item:!0,xs:3,style:{textAlign:"right"}},l.default.createElement(s.default,{onClick:e.onClose,style:{color:"white"}},l.default.createElement(i.default,null))),(null===(t=e.store.tournament)||void 0===t?void 0:t.id)&&l.default.createElement(o.default,{item:!0,xs:12},l.default.createElement(a.default,null,"In ",e.store.tournament.tournamentType," tournament,"," ",l.default.createElement("i",null,e.store.tournament.name))),l.default.createElement(o.default,{item:!0,xs:12},l.default.createElement(f.default,{color:"white",onClick:()=>{e.quitGame(p.connectPagePath)}},"To waiting room")),l.default.createElement(o.default,{item:!0,xs:12},l.default.createElement(h.default,{gameSettings:e.store.gameSettings,onChange:e.updateGameSettings,inTestMode:e.isTestMode,store:e.store})),l.default.createElement(o.default,{item:!0,xs:4},l.default.createElement(f.default,{color:"white",onClick:()=>{e.gameObject.restartGame(),e.onClose()}},"Reset game")),l.default.createElement(o.default,{item:!0,xs:8}),e.isTestMode&&e.store.player&&l.default.createElement(l.default.Fragment,null,l.default.createElement(o.default,{item:!0,xs:4},l.default.createElement(u.default,{simpleSelect:!0,user:e.user,value:e.store.userSettings.vehicleSettings.vehicleType,onChange:t=>{const n=Object.assign(Object.assign({},e.store.userSettings.vehicleSettings),{vehicleType:t}),r=Object.assign(Object.assign({},e.store.userSettings),{vehicleSettings:n});window.localStorage.setItem("vehicleType",t),e.gameObject.vehicleType=t,e.gameObject.setNeedsReload(!0),e.store.setUserSettings(r)}}))))):null}},87739:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(78935)),o=r(n(68782)),s=r(n(3779)),a=r(n(8319)),l=r(n(29216)),c=r(n(7343)),u=r(n(67294)),d=n(39547);t.default=e=>{var t;if(!e.raceTimeInfo||0===(null===(t=e.raceTimeInfo)||void 0===t?void 0:t.length))return null;const n=e.isEndOfGame?{}:{width:50},r=e.isEndOfGame?{}:{width:250},{color:h,backgroundColor:f}=(0,d.getStyledColors)("white"),p=e.isEndOfGame?(e=>e.sort(((e,t)=>e.totalTime-t.totalTime)))(e.raceTimeInfo):e.raceTimeInfo;return u.default.createElement(i.default,{style:Object.assign(Object.assign({},r),{color:h,backgroundColor:f,borderRadius:0,boxShadow:"none"})},u.default.createElement(a.default,{size:e.isEndOfGame?"medium":"small",style:{fontSize:8}},u.default.createElement(l.default,null,u.default.createElement(s.default,null,u.default.createElement(o.default,{size:e.isEndOfGame?"medium":"small",style:n},"Player"),u.default.createElement(o.default,{style:n},"Lap / TL"),u.default.createElement(o.default,{size:e.isEndOfGame?"medium":"small",align:"right",style:n},e.isEndOfGame?"Best lap time":"Curr LT"),!!e.isEndOfGame&&u.default.createElement(u.default.Fragment,null,u.default.createElement(o.default,{size:e.isEndOfGame?"medium":"small",align:"right",style:n},"Total Time")))),u.default.createElement(c.default,null,p.map((t=>u.default.createElement(s.default,{key:t.playerName},u.default.createElement(o.default,{size:e.isEndOfGame?"medium":"small",style:n},e.isEndOfGame?t.playerName:t.playerName.toUpperCase().slice(0,3)),u.default.createElement(o.default,{style:n},t.lapNumber," / ",t.numberOfLaps),u.default.createElement(o.default,{size:e.isEndOfGame?"medium":"small",align:"right",style:n},e.isEndOfGame?t.bestLapTime.toFixed(2):t.currentLapTime.toFixed(2)),!!e.isEndOfGame&&u.default.createElement(u.default.Fragment,null,u.default.createElement(o.default,{size:e.isEndOfGame?"medium":"small",align:"right",style:n},t.totalTime.toFixed(2)))))))))}},16613:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(84473),o=r(n(67294)),s=n(38990),a=r(n(50622)),l=r(n(24555));t.default=e=>{var t;return o.default.createElement(l.default,null,o.default.createElement(i.CardContent,null,e.loading?o.default.createElement(i.CircularProgress,null):o.default.createElement(o.default.Fragment,null,o.default.createElement("div",null,e.label),e.owned?(()=>{var t;return e.onUnequip?o.default.createElement(a.default,{onClick:e.onUnequip},"Unequip ",null!==(t=e.buyButtonText)&&void 0!==t?t:"item"):o.default.createElement(i.Typography,null,"Owned")})():o.default.createElement(o.default.Fragment,null,o.default.createElement(i.Typography,null,"Cost ",(0,s.getSizePrefix)(e.cost)),o.default.createElement(a.default,{onClick:e.onBuy},"Buy ",null!==(t=e.buyButtonText)&&void 0!==t?t:"item")))))}},6340:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(672)),o=r(n(67294)),s=r(n(75977)),a=r(n(22843)),l=r(n(14307)),c=r(n(59435)),u=r(n(11982)),d=r(n(86140)),h=r(n(2385)),f=r(n(10400)),p=n(17246),m=r(n(49531)),g={f1:s.default,normal2:c.default,tractor:f.default,future:a.default,offRoader:u.default,sportsCar:h.default,gokart:l.default,simpleSphere:d.default};t.default=e=>o.default.createElement(i.default,{container:!0,spacing:3,style:{marginTop:10}},p.activeVehicleTypes.map((t=>{var n;return o.default.createElement(i.default,{key:t.type,item:!0,xs:12,md:6,lg:4},o.default.createElement(m.default,{owned:null===(n=e.ownership)||void 0===n?void 0:n[t.type],label:t.name,onClick:()=>e.onChange(t.type),selected:e.selected===t.type,thumbnail:o.default.createElement("img",{src:g[t.type],style:{width:"auto",maxHeight:120,margin:"auto",display:"block"}})}))})))},19169:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(672)),o=r(n(67294)),s=n(28468),a=r(n(49531));t.default=e=>o.default.createElement(i.default,{container:!0,spacing:3,style:{marginTop:10}},s.vehicleColors.map((t=>{var n;return o.default.createElement(i.default,{key:t.name,item:!0,xs:12,md:6,lg:4},o.default.createElement(a.default,{owned:null===(n=e.ownership)||void 0===n?void 0:n[t.value],label:t.name,onClick:()=>{e.onChange(t.value)},selected:e.selected===t.value,thumbnail:o.default.createElement("div",{style:{width:"100%",height:50,backgroundColor:t.value}})}))})))},12685:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(7701)),l=s(n(672)),c=o(n(67294)),u=n(72132),d=n(46078),h=n(87612),f=n(11490),p=n(28468),m=n(81135),g=n(17246),v=s(n(50622)),y=s(n(69306)),b=n(17091),w=s(n(96967)),x=s(n(80313)),_=s(n(16613)),S=s(n(6340)),E=s(n(19169)),T=s(n(47206)),C=s(n(26449)),M=s(n(3745));let k,P,A;t.default=e=>{var t,n;const r=(0,c.useContext)(h.UserContext),[i,o]=(0,c.useState)(0),[s,I]=(0,c.useState)(e.store.userSettings.vehicleSettings.vehicleType),[R,L]=(0,c.useState)(e.store.userSettings.vehicleSettings.vehicleColor),[O,N]=(0,c.useState)(null!==(n=null===(t=e.store.vehiclesSetup)||void 0===t?void 0:t[e.store.userSettings.vehicleSettings.vehicleType])&&void 0!==n?n:{vehicleType:e.store.userSettings.vehicleSettings.vehicleType}),[D,F]=(0,c.useState)(void 0),[B,Z]=(0,c.useState)(void 0),[V,z]=(0,c.useState)(m.defaultItemsOwnership),[U,j]=(0,c.useState)(!1);(0,c.useEffect)((()=>{(null==r?void 0:r.uid)&&((0,d.getOwnership)(r.uid).then((e=>{Z(e)})).catch((()=>{u.toast.error("Error getting ownership")})),(0,d.getVehicleItemsOwnership)(r.uid,s).then((e=>{const t=Object.assign({},V);t[s]=e,z(t)})))}),[r]),(0,c.useEffect)((()=>{(null==r?void 0:r.uid)&&(V[s]||(0,d.getVehicleItemsOwnership)(r.uid,s).then((e=>{const t=Object.assign({},V);t[s]=e,z(t)})))}),[s]);const H=(t,n)=>{var r,i,o;"vehicleColor"===n?L(t):"vehicleType"===n&&(I(t),N(null===(r=e.store.vehiclesSetup)||void 0===r?void 0:r[t])),B&&B[t]&&("vehicleColor"===n?(P=t,null===(i=e.onChangeVehicleColor)||void 0===i||i.call(e,t)):"vehicleType"===n&&(k=t,null===(o=e.onChangeVehicleType)||void 0===o||o.call(e,t)))},G=t=>{var n;const r=Object.assign({},O);r[t.type]=void 0,A=r,N(r),F(void 0),null===(n=e.onUnequipVehicleItem)||void 0===n||n.call(e,t)},W=(t,n)=>{j(!0),(0,d.buyItem)(r.uid,t).then((r=>{if(r.completed){u.toast.success(r.message);const i=Object.assign({},B);i[t]=!0,Z(i);const o=Object.assign(Object.assign({},e.store.tokenData),{coins:e.store.tokenData.coins-f.allCosts[t]});e.store.setTokenData(o),"vehicleColor"===n?e.onChangeVehicleColor(t):"vehicleType"===n&&e.onChangeVehicleType(t)}else u.toast.error(r.message);j(!1)}))};return c.default.createElement(l.default,{container:!0,spacing:3,style:{}},e.showBackButton&&c.default.createElement(c.default.Fragment,null,c.default.createElement(l.default,{item:!0,xs:6},c.default.createElement(y.default,{color:"black"})),c.default.createElement(l.default,{item:!0,xs:6},c.default.createElement(v.default,{disabled:e.disableInputs,style:{float:"right"},onClick:()=>{var t;null===(t=e.saveSetup)||void 0===t||t.call(e)}},"Save setup"))),c.default.createElement(l.default,{item:!0,xs:12,sm:6,lg:7,style:{}},c.default.createElement(l.default,{container:!0,spacing:1,style:{}},c.default.createElement(l.default,{item:!0,xs:12,lg:5},c.default.createElement(l.default,{container:!0,spacing:1},c.default.createElement(l.default,{item:!0,xs:12},c.default.createElement(x.default,{user:r,store:e.store})),c.default.createElement(l.default,{item:!0,xs:12},c.default.createElement(M.default,{vehicleSetup:O,vehicleType:s})))),c.default.createElement(l.default,{item:!0,xs:12,lg:7},c.default.createElement(C.default,{vehicleColor:R,vehicleType:s,vehicleSetup:O})),c.default.createElement(l.default,{item:!0,xs:12},(()=>{var t;return r?B?0===i?c.default.createElement(_.default,{loading:U,cost:f.allCosts[s],label:(0,g.getVehicleNameFromType)(s),onBuy:()=>{W(s,"vehicleType")},owned:B[s],buyButtonText:"vehicle"}):1===i?c.default.createElement(_.default,{loading:U,cost:f.allCosts[R],label:(0,p.getColorNameFromType)(R),onBuy:()=>{W(R,"vehicleColor")},owned:B[R],buyButtonText:"color"}):2===i?D?c.default.createElement(_.default,{loading:U,cost:D.cost,label:c.default.createElement("div",null,c.default.createElement("span",null,D.name," the ",D.type),m.possibleVehicleMods.map((e=>{if(D[e.type])return c.default.createElement("div",{key:e.type},e.name,":"," ",D[e.type]>0?`+${D[e.type]}`:D[e.type])}))),onUnequip:()=>{G(D)},onBuy:()=>{var t,n;t=D,n=s,j(!0),(0,d.buyItem)(r.uid,t.path,n).then((r=>{var i;if(r.completed){u.toast.success(r.message);const o=Object.assign({},V);o[n][t.path]=!0,z(o);const s=Object.assign(Object.assign({},e.store.tokenData),{coins:e.store.tokenData.coins-t.cost});e.store.setTokenData(s),null===(i=e.onChangeVehicleItem)||void 0===i||i.call(e,t,n)}else u.toast.error(r.message);j(!1)}))},owned:null===(t=V[s])||void 0===t?void 0:t[D.path],buyButtonText:"item"}):c.default.createElement("div",{className:"background"},c.default.createElement(v.default,{onClick:()=>{var t;null===(t=e.onUnequipAllItems)||void 0===t||t.call(e),N({vehicleType:s}),F(void 0)},disabled:1===Object.keys(O).length},"Unequip all items")):void 0:c.default.createElement(a.default,null):c.default.createElement("div",null,c.default.createElement("span",null,"Only logged in players can buy items."),c.default.createElement(v.default,{link:b.loginPagePath},"Login"))})()))),c.default.createElement(l.default,{item:!0,xs:12,sm:6,lg:5,style:{}},c.default.createElement(w.default,{onTabChange:e=>o(e),tabs:[{label:"Cars",renderElement:()=>c.default.createElement(S.default,{ownership:B,selected:s,onChange:e=>{H(e,"vehicleType"),F(void 0)}})},{label:"Colors",renderElement:()=>c.default.createElement(E.default,{ownership:B,selected:R,onChange:e=>{H(e,"vehicleColor")}})},{label:"Items",renderElement:()=>c.default.createElement(T.default,{ownership:V[s],vehicleType:s,onChange:t=>{(t=>{var n,r;const i=Object.assign({},O);(null===(n=O[t.type])||void 0===n?void 0:n.id)!==t.id?(i[t.type]=t,A=i,N(i),F(t),V[s][t.path]&&(null===(r=e.onChangeVehicleItem)||void 0===r||r.call(e,t,s))):G(t)})(t)},vehicleSetup:O})}]})))}},50741:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(67294)),l=n(72132),c=n(35742),u=n(46078),d=n(87612),h=n(81135),f=s(n(23950)),p=s(n(12685));let m,g,v;t.default=e=>{const t=(0,a.useContext)(d.UserContext),[n,r]=(0,a.useState)(!1);return(0,a.useEffect)((()=>()=>{if(null==t?void 0:t.uid){(0,u.setDBVehiclesSetup)(t.uid,m);const n=Object.assign({},e.store.userSettings.vehicleSettings);if(g&&(n.vehicleType=g),v&&(n.vehicleColor=v),v||g){const r=Object.assign(Object.assign({},e.store.userSettings),{vehicleSettings:n});e.store.setUserSettings(r),(0,c.setDBUserSettings)(t.uid,r)}}}),[]),(0,a.useEffect)((()=>{m=e.store.vehiclesSetup}),[e.store.vehiclesSetup]),a.default.createElement(f.default,null,a.default.createElement(p.default,{store:e.store,showBackButton:!0,onChangeVehicleType:t=>{g=t;const n=Object.assign(Object.assign({},e.store.userSettings.vehicleSettings),{vehicleType:t}),r=Object.assign(Object.assign({},e.store.userSettings),{vehicleSettings:n});e.store.setUserSettings(r)},onChangeVehicleColor:t=>{v=t;const n=Object.assign(Object.assign({},e.store.userSettings.vehicleSettings),{vehicleColor:t}),r=Object.assign(Object.assign({},e.store.userSettings),{vehicleSettings:n});e.store.setUserSettings(r)},onChangeVehicleItem:t=>{const n=Object.assign({},e.store.vehiclesSetup);n[e.store.userSettings.vehicleSettings.vehicleType][t.type]=t,e.store.setVehiclesSetup(n)},onUnequipVehicleItem:t=>{const n=Object.assign({},e.store.vehiclesSetup);delete n[e.store.userSettings.vehicleSettings.vehicleType][t.type],e.store.setVehiclesSetup(n)},onUnequipAllItems:()=>{const t=Object.assign({},e.store.vehiclesSetup);for(let n of h.possibleVehicleItemTypes)delete t[e.store.userSettings.vehicleSettings.vehicleType][n];e.store.setVehiclesSetup(t)},saveSetup:()=>{r(!0),(0,u.setDBVehiclesSetup)(t.uid,e.store.vehiclesSetup).then((()=>{r(!1),l.toast.success("Vehicle setup saved")})).catch((()=>{l.toast.error("Error saving vehicle setup")})),(0,c.setDBUserSettings)(t.uid,e.store.userSettings)},disableInputs:n}))}},49531:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294)),o=n(38990);n(56415);t.default=e=>i.default.createElement("div",{className:(0,o.createClassNames)("garage__item",e.owned?"garage__item--owned":"garage__item--not-owned"),style:Object.assign(Object.assign({},e.style),{outline:e.selected?"4px solid":"1px solid"}),onClick:e.onClick},e.thumbnail,e.label)},47206:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(672)),l=o(n(67294)),c=n(81135),u=n(38990),d=s(n(96967)),h=s(n(49531));t.default=e=>{const[t,n]=(0,l.useState)("exhaust"),r=c.vehicleItems[e.vehicleType],i=n=>{var r,i;return(null===(i=null===(r=e.vehicleSetup)||void 0===r?void 0:r[t])||void 0===i?void 0:i.id)===n.id},o=Object.keys(r);return l.default.createElement(d.default,{defaultTab:0,subtabs:!0,tabs:c.possibleVehicleItemTypes.map((t=>({label:(0,c.getVehicleItemNameFromType)(t),renderElement:()=>(t=>{const n=o.filter((e=>r[e].type===t));return l.default.createElement(a.default,{container:!0,spacing:1,style:{marginTop:10}},n.map((t=>{var n;const o=r[t];return l.default.createElement(a.default,{key:t,item:!0,xs:12,md:6,lg:4},l.default.createElement(h.default,{owned:null===(n=e.ownership)||void 0===n?void 0:n[o.path],label:`${o.name} the ${o.type}`,onClick:()=>{e.onChange(o)},thumbnail:l.default.createElement("div",{style:{position:"relative"}},l.default.createElement("div",{style:{fontStyle:"bold",fontSize:10}},l.default.createElement("span",null,"$ ",(0,u.getSizePrefix)(o.cost))),c.possibleVehicleMods.map((e=>o[e.type]?l.default.createElement("div",{key:`${t}-${e.type}`,style:{fontSize:8}},e.name,":"," ",o[e.type]>0?`+${o[e.type]}`:o[e.type]):null))),selected:i(o)}))})))})(t)}))),onTabChange:e=>{n(c.possibleVehicleItemTypes[e])}})}},26449:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(67294)),a=n(72425),l=n(91925);t.default=e=>{const t=(0,s.useRef)(),n="mobile"===(0,a.getDeviceType)();return(0,s.useEffect)((()=>()=>{(0,l.removeShowRoomCanvas)()}),[]),(0,s.useEffect)((()=>{const r=(0,l.createShowRoomCanvas)(e.vehicleType,0,e.vehicleColor,e.vehicleSetup,n?400:800);t.current&&r&&(r.domElement.setAttribute("style","max-width:100%;"),t.current.appendChild(r.domElement),(0,l.setShowRoomOffset)(12,3))}),[e.vehicleType]),(0,s.useEffect)((()=>{t&&(0,l.changeChassisColor)(e.vehicleColor)}),[e.vehicleColor]),(0,s.useEffect)((()=>{(0,l.changeVehicleSetup)(e.vehicleSetup)}),[e.vehicleSetup]),s.default.createElement("div",{ref:t})}},3745:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294)),o=n(81135),s=n(17246),a=r(n(38847));t.default=e=>{const t=(0,o.getStatsFromSetup)(e.vehicleSetup);return i.default.createElement("div",{className:"background",style:{paddingBottom:25}},o.possibleVehicleMods.map((n=>{var r;const o=n.type,l=s.vehicleConfigs[e.vehicleType][o]+(null!==(r=t[n.type])&&void 0!==r?r:0);return i.default.createElement("div",{key:o,style:{height:25,marginTop:10,color:"white"}},i.default.createElement("span",null,n.name),i.default.createElement(a.default,{style:{float:"right"},max:n.max-n.min,value:l-n.min}))})))}},23826:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(27608)),l=s(n(7701)),c=s(n(672)),u=s(n(74113)),d=s(n(25070)),h=s(n(3506)),f=s(n(89589)),p=o(n(67294)),m=n(23053),g=n(92891),v=n(39547),y=n(87612);n(86046);const b=s(n(23950)),w=s(n(74923));n(22296);const x=s(n(69306)),_=s(n(47156)),S=s(n(99819));let E=0,T=[];t.default=e=>{const[t,n]=(0,p.useState)(2),[r,i]=(0,p.useState)(""),[o,s]=(0,p.useState)(!1),[C,M]=(0,p.useState)([]),[k,P]=(0,p.useState)(0),[A,I]=(0,p.useState)(25),R=(0,p.useContext)(y.UserContext);(0,p.useEffect)((()=>{const e=window.localStorage.getItem("highscoreTrackKey"),t=window.localStorage.getItem("numberOfLapsKey");e&&i(e),t&&!isNaN(+t)&&n(+t)}),[]),(0,p.useEffect)((()=>{window.localStorage.setItem("highscoreTrackKey",r),s(!1),P(0);(0,g.getBestScoresOnTrackAndLap)(r,t,0,A).then((e=>{s(!0),M(e),(null==e?void 0:e.length)&&(T=[0],E=e[e.length-1].totalTime+.01)}))}),[r,t]);const L=(e,n,i)=>{let o=null!=i?i:A,s=0;if(n>k)s=E+.01;else{s=T[n]}P(n),(0,g.getBestScoresOnTrackAndLap)(r,t,s,o).then((e=>{M(e),(null==e?void 0:e.length)&&(n>k&&(T[n]=e[0].totalTime),E=e[e.length-1].totalTime+.01)}))},{color:O,backgroundColor:N}=(0,v.getStyledColors)("white");return p.default.createElement(b.default,{backgroundContainer:!0},p.default.createElement(c.default,{container:!0,spacing:3},p.default.createElement(c.default,{item:!0,xs:12},p.default.createElement(x.default,{color:"white"})),p.default.createElement(c.default,{item:!0,xs:12},p.default.createElement(f.default,{component:"div",variant:"h3"},"Highscores")),o?p.default.createElement(p.default.Fragment,null,p.default.createElement(c.default,{item:!0,xs:12,sm:3},p.default.createElement(_.default,{excludedTracks:m.nonActiveTrackNames,fullWidth:!0,onChange:e=>{i(e)},gameType:"race",value:r,showMapPreview:!1,simpleSelect:!0})),p.default.createElement(c.default,{item:!0,xs:9,sm:3},p.default.createElement(w.default,{title:"No. of laps",value:t,numbers:m.numberOfLapsPossibilities,onChange:e=>{n(e)},style:{backgroundColor:N}})),p.default.createElement(c.default,{item:!0,xs:3,sm:1},p.default.createElement(h.default,{style:{color:N},title:"Each track and number of laps combination has its own highscore table."},p.default.createElement(u.default,null,p.default.createElement(a.default,null)))),p.default.createElement(c.default,{item:!0,xs:!1,sm:4}),p.default.createElement(c.default,{item:!0,xs:12},p.default.createElement(d.default,{page:k,count:-1,rowsPerPage:A,rowsPerPageOptions:[1,2,5,10,15,25,50],onPageChange:L,onRowsPerPageChange:e=>{const t=parseInt(e.target.value,10);I(t),P(0),L(0,0,t)},component:"div",nextIconButtonProps:{disabled:0===(null==C?void 0:C.length)},style:{color:O,backgroundColor:N}}),p.default.createElement(S.default,{data:C,noDataText:"No one has recorded with the combination of this\r\n                track and these number of laps",user:R,page:k,rowsPerPage:A}))):p.default.createElement(c.default,{item:!0,xs:12,style:{marginTop:25,textAlign:"center"}},p.default.createElement(l.default,null))))}},9602:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(55435)),l=s(n(74113)),c=s(n(68782)),u=s(n(3779)),d=o(n(67294)),h=s(n(90813)),f=s(n(75503)),p=n(23053),m=n(17246),g=n(17091),v=n(38990),y=s(n(73090)),b=n(7735),w=s(n(39736)),x=n(92891),_=n(5977);t.default=e=>{var t,n,r;const i=(0,_.useHistory)(),[o,s]=(0,d.useState)(!1),{playerData:S}=e,E="number"==typeof S.date?(0,v.getDateFromNumber)(S.date):S.date;return d.default.createElement(d.default.Fragment,null,d.default.createElement(u.default,{onClick:()=>{},sx:{"& > *":{borderBottom:"unset"}}},d.default.createElement(c.default,null,d.default.createElement(l.default,{"aria-label":"expand row",size:"small",onClick:()=>{s(!o)}},o?d.default.createElement(h.default,null):d.default.createElement(f.default,null))),d.default.createElement(c.default,null,e.number),d.default.createElement(c.default,null,d.default.createElement("span",{style:{color:"inherit",textDecoration:"underline",cursor:"pointer"},onClick:()=>{i.push((0,g.getUserPagePath)(S.playerId))}},S.playerName)),d.default.createElement(c.default,null,S.totalTime),d.default.createElement(c.default,null,S.bestLapTime),e.includeTrackAndNumLaps&&d.default.createElement(d.default.Fragment,null,d.default.createElement(c.default,null,(0,p.getTrackNameFromType)(S.trackName)),d.default.createElement(c.default,null,S.numberOfLaps)),d.default.createElement(c.default,null,null!==(t=(0,m.getVehicleNameFromType)(S.vehicleType))&&void 0!==t?t:"-"),d.default.createElement(c.default,null,S.recordingFilename?d.default.createElement(y.default,{infoText:"Copy ghost filename",copyText:S.recordingFilename,onClick:()=>{(0,b.setLocalGameSetting)("useGhost",!0),(0,b.setLocalGameSetting)("ghostFilename",S.recordingFilename)}}):"No ghost")),d.default.createElement(u.default,null,d.default.createElement(c.default,{style:{paddingBottom:0,paddingTop:0},colSpan:7+(e.includeTrackAndNumLaps?2:0)},d.default.createElement(a.default,{in:o,timeout:"auto",unmountOnExit:!0},d.default.createElement("div",{style:{margin:10,padding:5}},"Lap times:",S.lapTimes.map(((e,t)=>d.default.createElement("span",{key:`${S.gameId}-${S.playerName}-lap${t}`,style:{marginLeft:15}},e))),d.default.createElement("div",null,"Date of race: ",E),d.default.createElement("div",null,"Type of vehicle:"," ",null!==(n=(0,m.getVehicleNameFromType)(S.vehicleType))&&void 0!==n?n:"-"),S.playerId===(null===(r=e.user)||void 0===r?void 0:r.uid)&&d.default.createElement("div",{style:{marginTop:10}},d.default.createElement(w.default,{onDelete:()=>(0,x.deleteBestScore)(S.playerId,S.trackName,S.numberOfLaps).then((()=>{window.location.reload()}))})))))))}},99819:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(8319)),o=r(n(7343)),s=r(n(68782)),a=r(n(78935)),l=r(n(29216)),c=r(n(3779)),u=r(n(67294)),d=n(39547),h=r(n(9602));t.default=e=>{var t;const{color:n,backgroundColor:r}=(0,d.getStyledColors)("white");return u.default.createElement(a.default,null,u.default.createElement(i.default,{style:{color:n,backgroundColor:r}},u.default.createElement(l.default,null,u.default.createElement(c.default,null,u.default.createElement(s.default,null),u.default.createElement(s.default,{component:"th"},"Place"),u.default.createElement(s.default,{component:"th"},"Player"),u.default.createElement(s.default,{component:"th"},"Total time"),u.default.createElement(s.default,{component:"th"},"Best lap time"),e.includeTrackAndNumLaps&&u.default.createElement(u.default.Fragment,null,u.default.createElement(s.default,{component:"th"},"Track name"),u.default.createElement(s.default,{component:"th"},"Number of laps")),u.default.createElement(s.default,null,"Vehicle type"),u.default.createElement(s.default,null,"Ghost"))),u.default.createElement(o.default,null,e.data&&0!==(null===(t=e.data)||void 0===t?void 0:t.length)?e.data.map(((t,n)=>{var r,i;return u.default.createElement(h.default,{key:`${t.gameId}-${t.playerName}-${n}`,playerData:t,includeTrackAndNumLaps:e.includeTrackAndNumLaps,user:e.user,number:n+1+(null!==(r=e.rowsPerPage)&&void 0!==r?r:0)*(null!==(i=e.page)&&void 0!==i?i:0)})})):u.default.createElement(c.default,null,u.default.createElement(s.default,{colSpan:5+(e.includeTrackAndNumLaps?2:0)},e.noDataText)))))}},44257:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(60181)),l=s(n(23508)),c=s(n(34297)),u=s(n(50961)),d=s(n(73537)),h=s(n(55435)),f=s(n(74113)),p=o(n(67294));t.default=e=>{var t;const[n,r]=(0,p.useState)(!1),i=null!==(t=e.color)&&void 0!==t?t:"white",o="black"===i?"white":"black",s="black"===i?"rgba(0,0,0,0.85)":"rgba(255,255,255,0.83)";return p.default.createElement(c.default,{variant:"outlined",style:{margin:"auto",maxWidth:600,backgroundColor:s,color:o,borderRadius:0}},p.default.createElement(d.default,{style:{cursor:"pointer"},onClick:()=>r(!n),subheader:e.header,action:p.default.createElement(f.default,{style:{color:o},onClick:()=>r(!n)},n?p.default.createElement(a.default,null):p.default.createElement(l.default,null))}),p.default.createElement(h.default,{in:n},p.default.createElement(u.default,null,e.children)))}},73090:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(3506)),l=s(n(74113)),c=o(n(67294)),u=s(n(41899));t.default=e=>{const[t,n]=(0,c.useState)(!1);return c.default.createElement(c.default.Fragment,null,c.default.createElement("span",null,e.infoText)," ",c.default.createElement(a.default,{title:"Copied!",arrow:!0,placement:"top",open:t,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,onClose:()=>n(!1),onClick:e.onClick,style:{display:"inline"}},c.default.createElement(l.default,{style:{color:"white"},onClick:()=>{navigator.clipboard.writeText(e.copyText),n(!0),setTimeout((()=>{n(!1)}),2e3)}},c.default.createElement(u.default,null))))}},39736:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(41733)),l=s(n(55693)),c=s(n(672)),u=s(n(97367)),d=s(n(89589)),h=s(n(94718)),f=o(n(67294)),p=n(39547),m=n(84473),g={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:300,bgcolor:p.cardBackgroundColor,boxShadow:24,p:4};t.default=e=>{const[t,n]=(0,f.useState)(!1),[r,i]=(0,f.useState)(!1);return f.default.createElement(f.default.Fragment,null,f.default.createElement(u.default,{open:t,onClose:()=>n(!1)},f.default.createElement(l.default,{sx:g},f.default.createElement(c.default,{container:!0,spacing:3},f.default.createElement(c.default,{item:!0,xs:12},f.default.createElement(d.default,{id:"modal-modal-title",variant:"h6",component:"h2"},"Are sure you want to delete?")),r?f.default.createElement(c.default,{item:!0,xs:12},f.default.createElement(m.CircularProgress,null)):f.default.createElement(f.default.Fragment,null,f.default.createElement(c.default,{item:!0,xs:6},f.default.createElement(h.default,{onClick:()=>n(!1),variant:"contained",disableElevation:!0,style:{backgroundColor:p.basicColor,color:"black"}},"Cancel")),f.default.createElement(c.default,{item:!0,xs:6},f.default.createElement(h.default,{disabled:r,variant:"contained",color:"error",onClick:()=>{i(!0),e.onDelete()}},"Delete")))))),f.default.createElement(h.default,{color:"error",variant:"outlined",onClick:()=>n(!0),endIcon:f.default.createElement(a.default,null)},"Delete"))}},42950:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(55343)),l=s(n(66235)),c=s(n(74113)),u=o(n(67294)),d=n(72132);t.default=()=>{const[e,t]=(0,u.useState)(null!==document.fullscreenElement);return u.default.createElement(c.default,{style:{color:"white"},onClick:()=>{document.body.requestFullscreen||d.toast.error("Cannot enter fullscreen."),null===document.fullscreenElement?document.body.requestFullscreen().then((()=>{var e,n;null===(n=null===(e=null===screen||void 0===screen?void 0:screen.orientation)||void 0===e?void 0:e.lock)||void 0===n||n.call(e,"landscape"),t(!0)})).catch((e=>{console.warn("Error entering fullscreen:",e)})):(t(!1),document.exitFullscreen().catch((e=>{console.warn("Error exiting fullscreen:",e)})))}},e?u.default.createElement(l.default,null):u.default.createElement(a.default,null))}},74923:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(61261)),o=r(n(44025)),s=r(n(42154)),a=r(n(67294)),l=n(39547);n(22296);t.default=e=>{var t,n;const{color:r,backgroundColor:c}=(0,l.getStyledColors)(null!==(t=e.color)&&void 0!==t?t:"white");return a.default.createElement(a.default.Fragment,null,a.default.createElement("span",{className:"select__label",style:{color:c}},e.title),a.default.createElement(s.default,{disabled:e.disabled,fullWidth:e.fullWidth,style:{minWidth:null!==(n=e.minWidth)&&void 0!==n?n:200,textAlign:"left"}},a.default.createElement(o.default,{className:"select",style:Object.assign(Object.assign({},e.style),{color:r,backgroundColor:c}),name:e.title,value:e.value,onChange:t=>{e.onChange(+t.target.value)}},e.numbers.map((e=>a.default.createElement(i.default,{key:e,value:e},e))))))}},69306:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294)),o=r(n(50622)),s=n(17091);t.default=e=>i.default.createElement(o.default,{link:s.frontPagePath,color:e.color},"< Back")},80873:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(7701)),o=r(n(42154)),s=r(n(61261)),a=r(n(44025)),l=r(n(67294)),c=n(39547),u=n(38990);n(22296);t.default=e=>{var t,n;if(!e.tournaments)return l.default.createElement(i.default,null);const{color:r,backgroundColor:d}=(0,c.getStyledColors)("white"),h=e.tournaments.concat([{name:"No tournament",id:"undefined"}]);return e.selectedId&&!(0,u.itemInArray)(e.selectedId,h.map((e=>e.id)))&&h.push({name:null!==(t=e.selectedName)&&void 0!==t?t:"Selected tournament",id:e.selectedId}),l.default.createElement(l.default.Fragment,null,l.default.createElement("span",{className:"select__label",style:{color:d,marginTop:15}},"Tournament"),l.default.createElement(o.default,{style:{minWidth:150}},l.default.createElement(a.default,{style:{backgroundColor:d,color:r},className:"select",name:"tournament",onChange:t=>{const n=t.target.value,r=h.find((e=>e.id===n));(null==r?void 0:r.id)&&"undefined"!==(null==r?void 0:r.id)?e.onChange(r):e.onChange(void 0)},value:null!==(n=e.selectedId)&&void 0!==n?n:"undefined"},h.map((e=>{var t;return l.default.createElement(s.default,{key:null!==(t=e.id)&&void 0!==t?t:"undefined",value:e.id},e.name)})))))}},58153:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(n(60181)),c=a(n(23508)),u=a(n(42154)),d=a(n(61261)),h=a(n(44025)),f=o(n(67294)),p=n(39547),m=n(28468),g=n(38990),v=n(17246),y=a(n(50622)),b=a(n(12685)),w=n(17091);n(22296);t.default=e=>{var t=s(e,[]);const[n,r]=(0,f.useState)(!1),{color:i,backgroundColor:o}=(0,p.getStyledColors)("white"),a=t.excludedVehicles?m.allVehicleTypes.filter((e=>!(0,g.itemInArray)(e.type,t.excludedVehicles))):m.allVehicleTypes;return t.simpleSelect?f.default.createElement(f.default.Fragment,null,f.default.createElement("span",{className:"select__label",style:{color:o}},"Vehicle"),f.default.createElement(u.default,{fullWidth:t.fullWidth},f.default.createElement(h.default,{className:"select",disabled:t.disabled,name:"vehicle",onChange:e=>{t.onChange(e.target.value)},value:t.value,style:{color:i,backgroundColor:o}},a.map((e=>f.default.createElement(d.default,{key:e.type,value:e.type},e.name)))))):f.default.createElement(f.default.Fragment,null,!t.user&&f.default.createElement("div",null,f.default.createElement(y.default,{link:w.loginPagePath},"Login"),f.default.createElement("span",{className:"select__label",style:{color:i,fontSize:16}},f.default.createElement("i",null,"Vehicle selection is only available for logged in users."))),f.default.createElement("span",{className:"select__label",style:{color:i,fontSize:16}},"Selected vehicle is"," ",f.default.createElement("strong",null,(0,v.getVehicleNameFromType)(t.value))),t.store&&f.default.createElement(f.default.Fragment,null,f.default.createElement(y.default,{disabled:t.disabled,style:{marginTop:10,marginLeft:5},onClick:()=>r(!n),startIcon:n?f.default.createElement(c.default,null):f.default.createElement(l.default,null)},"Select vehicle"),n&&f.default.createElement(b.default,{store:t.store,onChangeVehicleColor:e=>{t.user&&t.onChangeColor&&t.onChangeColor(e)},onChangeVehicleType:e=>{t.user&&t.onChange(e)},onChangeVehicleItem:e=>{var n;null===(n=t.onChangeVehicleItem)||void 0===n||n.call(t,e)}})))}},74744:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(15352)),o=r(n(92037)),s=r(n(67294));n(14734);t.default=e=>s.default.createElement(o.default,{label:e.label,control:s.default.createElement(i.default,{checked:e.checked,value:e.checked,onChange:e.onChange})})},39393:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294));n(64914);t.default=e=>i.default.createElement("div",{className:"date-input"},i.default.createElement("span",{className:"date-input__label"},e.label),i.default.createElement("input",{type:"datetime-local",name:e.label,value:e.value,onChange:t=>{console.log("change",t),console.log("val",t.target.value);const n=new Date(t.target.value);console.log("new start",n),e.onChange(n)},min:e.min,max:e.max}))},47909:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(9944)),l=n(84473),c=o(n(67294)),u=s(n(50622));t.default=e=>{const[t,n]=(0,c.useState)(!1);return c.default.createElement("div",null,c.default.createElement(u.default,{startIcon:c.default.createElement(a.default,null),onClick:()=>n(!t)},"Info"),c.default.createElement(l.Collapse,{in:t},c.default.createElement("p",null,e.infoText)))}},38847:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294));n(23906);t.default=e=>i.default.createElement("div",{className:"progress",style:Object.assign({},e.style)},i.default.createElement("div",{className:"progress__inner",style:{width:e.value/e.max*200}}))},92976:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(66443)),l=s(n(37938)),c=s(n(89589)),u=o(n(67294));t.default=e=>{var t;const[n,r]=(0,u.useState)(e.value);return u.default.createElement(u.default.Fragment,null,u.default.createElement(c.default,null,e.label),u.default.createElement(l.default,{spacing:2,direction:"row",sx:{mb:1},alignItems:"center"},e.startIcon,u.default.createElement(a.default,{style:{color:null!==(t=e.color)&&void 0!==t?t:"white"},min:e.min,max:e.max,valueLabelDisplay:"auto",step:e.step,defaultValue:n,onChange:(t,n)=>{e.onChange(n)},onChangeCommitted:(t,n)=>{e.onChangeCommitted(n)}}),e.endIcon))}},9483:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294)),o=n(5977),s=r(n(23950)),a=r(n(52783)),l=n(17091);t.default=e=>{const t=(0,o.useHistory)();return i.default.createElement(s.default,{backgroundContainer:!0},i.default.createElement(a.default,{onClose:()=>{t.push(l.frontPagePath)}}))}},71280:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(672)),o=r(n(89589)),s=r(n(67294)),a=r(n(96235)),l=n(72425),c=r(n(23950)),u=r(n(50622)),d=r(n(42950)),h=r(n(69306));t.default=e=>{const t="mobile"===(0,l.getDeviceType)();return s.default.createElement(c.default,{backgroundContainer:!0},s.default.createElement(i.default,{container:!0,spacing:3},s.default.createElement(i.default,{item:!0,xs:12,md:4,xl:1},s.default.createElement(h.default,null)),s.default.createElement(i.default,{item:!0,xs:12,md:8,xl:11},s.default.createElement(o.default,null,"Play only using your mobile.")),s.default.createElement(i.default,{item:!0,xs:12},t?s.default.createElement(u.default,{color:"white",onClick:()=>{window.location.href="/mobileonly"}},"Play only mobile"):s.default.createElement(o.default,null,"We have detected that you are not on a mobile and thus you cannot play on mobile only. If you think this is a mistake, please refresh your browser.")),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement(o.default,null,"Even though the game is intended to be played on a pc, using your phone as a controller, it can be quite fun to play only using the mobile. There might be some drop in performance, so we recommend turning off shadows and putting graphics in low. Since it is quite hard to see the vehicle when turning the phone to steer, the screen rotates in the opposite direction so the vehilce is perpandicular to the ground in the real world.")),s.default.createElement(i.default,{item:!0,xs:6},s.default.createElement(d.default,null)),s.default.createElement(i.default,{item:!0,xs:6},s.default.createElement(o.default,null,"Go into fullscreen by pressing this button.")),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement(o.default,null,s.default.createElement("strong",null,"Use your phone in landscape and go into fullscreen.")),s.default.createElement(o.default,null,"Fullscreen is accessed in game while pausing the game. Note on iphones, to enter fullscreen the page needs to be started from a bookmark on the homescreen.")),s.default.createElement(i.default,{item:!0,xs:12},s.default.createElement("img",{style:{maxWidth:"80%",width:400},src:a.default}))))}},39490:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(97367)),o=r(n(67294)),s=n(39547);t.default=e=>{const{color:t,backgroundColor:n}=(0,s.getStyledColors)("black");return o.default.createElement(i.default,{open:e.open,onClose:e.onClose,style:{border:0}},o.default.createElement("div",{style:{transform:"translate(-50%, -25%)",position:"absolute",top:"25%",left:"50%",width:"75%",backgroundColor:n,color:t,border:0,padding:10,outline:0,overflowY:"auto",maxHeight:"75%"}},e.children))}},11632:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(97367)),o=r(n(67294)),s=n(39547);t.default=e=>{const{color:t,backgroundColor:n}=(0,s.getStyledColors)("black");return o.default.createElement(i.default,{open:e.open,onClose:e.onClose,style:{border:0}},o.default.createElement("div",{style:{transform:"translate(-4%, -25%)",position:"absolute",top:"25%",left:"8%",backgroundColor:n,color:t,padding:10,outline:0,maxHeight:"80%",overflowY:"auto",maxWidth:"90%"}},e.children))}},56592:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294));t.default=e=>i.default.createElement(i.default.Fragment,null,i.default.createElement("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-4972710693486281","data-adtest":"on","data-ad-slot":e.slotId,"data-ad-format":"auto","data-full-width-responsive":"true"}))},39953:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(60181)),l=s(n(23508)),c=s(n(48547)),u=s(n(50961)),d=s(n(73537)),h=s(n(55435)),f=s(n(672)),p=s(n(4153)),m=s(n(47696)),g=s(n(1471)),v=s(n(798)),y=s(n(89589)),b=o(n(67294)),w=n(5977),x=n(72132),_=n(23053),S=n(39547),E=n(28468),T=n(17246),C=s(n(23950)),M=s(n(50622)),k=s(n(24555)),P=s(n(69306)),A=n(17091),I=e=>{const[t,n]=(0,b.useState)(!1);return b.default.createElement(b.default.Fragment,null,b.default.createElement(g.default,{onClick:()=>n(!t)},b.default.createElement(v.default,{primary:e.title}),t?b.default.createElement(a.default,null):b.default.createElement(l.default,null)),b.default.createElement(h.default,{in:t},b.default.createElement(p.default,null,e.listText.map((e=>b.default.createElement(m.default,{key:e,style:{paddingLeft:25}},b.default.createElement(v.default,{key:e,primary:`- ${e}`}))))),e.extraText&&b.default.createElement(y.default,null,e.extraText," ")))};t.default=e=>{const t=(0,w.useHistory)();return b.default.createElement(C.default,null,b.default.createElement(f.default,{container:!0,spacing:3,style:{color:"black"}},b.default.createElement(f.default,{item:!0,xs:12,md:4,xl:1},b.default.createElement(P.default,null)),b.default.createElement(f.default,{item:!0,xs:12,md:8,xl:11},b.default.createElement(y.default,{variant:"h2",component:"div"},"Choose plan")),b.default.createElement(f.default,{item:!0,xs:12},b.default.createElement(y.default,{variant:"h5",component:"div"},b.default.createElement(k.default,null,b.default.createElement(u.default,null,"You can either buy a premium account or continue using a free account.")))),b.default.createElement(f.default,{item:!0,xs:12,sm:4},b.default.createElement(k.default,{style:{backgroundColor:S.premiumColor}},b.default.createElement(d.default,{title:"Full game",header:"Full game",subheader:"$10 one time payment, all future updates included"}),b.default.createElement(u.default,null,b.default.createElement(p.default,null,b.default.createElement(I,{title:"Access to all maps",listText:_.activeTrackNames.map((e=>(0,_.getTrackNameFromType)(e)))}),b.default.createElement(I,{title:"Access to all vehicles",listText:T.activeVehicleTypes.map((e=>e.name))}),b.default.createElement(I,{title:"Access to game modes",listText:_.activeGameTypes.map((e=>(0,_.getGameTypeNameFromType)(e)))}),b.default.createElement(I,{title:"More info",extraText:"The full game includes more features, such as the tournament feature, buying trophies.",listText:[]}))),b.default.createElement(c.default,null,b.default.createElement(M.default,{onClick:()=>(0,x.toast)("Premium not available yet")},"Buy Premium")))),b.default.createElement(f.default,{item:!0,xs:12,sm:4},b.default.createElement(k.default,{style:{backgroundColor:S.standardColor}},b.default.createElement(d.default,{title:"Standard",header:"Standard",subheader:"$2.5 one time payment, you can use the vehicles when playing split screen with a friend who owns premium maps."}),b.default.createElement(u.default,null,b.default.createElement(p.default,null,b.default.createElement(I,{title:"Access to one map",listText:["Farm"]}),b.default.createElement(I,{title:"Access to all vehicles",listText:T.activeVehicleTypes.map((e=>e.name))}),b.default.createElement(I,{title:"Access to one game mode",listText:["Race"]}),b.default.createElement(I,{title:"More info",extraText:"The standard plan includes the option of participating in a tournament but not creating one.",listText:[]}))),b.default.createElement(c.default,null,b.default.createElement(M.default,{onClick:()=>(0,x.toast)("Standard not available yet")},"Buy Standard")))),b.default.createElement(f.default,{item:!0,xs:12,sm:4},b.default.createElement(k.default,{style:{backgroundColor:S.basicColor}},b.default.createElement(d.default,{title:"Basic",header:"Basic",subheader:"Free"}),b.default.createElement(u.default,null,b.default.createElement(p.default,null,b.default.createElement(I,{title:"Access to one map",listText:[(0,_.getTrackNameFromType)("farm-track")]}),b.default.createElement(I,{title:"Access to one vehicle",listText:[(0,T.getVehicleNameFromType)(E.defaultVehicleType)]}),b.default.createElement(I,{title:"Access to one mode",listText:["Race"]}))),b.default.createElement(c.default,null,b.default.createElement(M.default,{onClick:()=>t.push(A.frontPagePath)},"Continue with basic"))))))}},75718:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294));t.default=()=>i.default.createElement("form",{action:"https://www.paypal.com/donate",method:"post",target:"_top"},i.default.createElement("input",{type:"hidden",name:"hosted_button_id",value:"Z7JL86S4UW456"}),i.default.createElement("input",{type:"image",src:"https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif",name:"submit",title:"PayPal - The safer, easier way to pay online!",alt:"Donate with PayPal button"}),i.default.createElement("img",{alt:"",src:"https://www.paypal.com/en_IS/i/scr/pixel.gif",width:"1",height:"1"}))},13650:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(41715)),l=s(n(744)),c=o(n(67294)),u=n(35742),d=s(n(74113)),h=s(n(50622));t.default=e=>{const[t,n]=(0,c.useState)(!1),r=()=>{t?(0,u.removeFollow)(e.userData.uid,e.otherUserData.uid):(0,u.addFollow)(e.userData.uid,e.userData,e.otherUserData.uid,e.otherUserData)};return(0,c.useEffect)((()=>{let t;return e.userData&&e.otherUserData&&(t=(0,u.isUserFollower)(e.userData.uid,e.otherUserData.uid,(e=>{n(e)}))),()=>{t&&t()}}),[e.userData,e.otherUserData]),e.userData&&e.otherUserData&&e.userData.uid!==e.otherUserData.uid?e.onlyIcon?c.default.createElement(d.default,{onClick:r},t?c.default.createElement(l.default,null):c.default.createElement(a.default,null)):c.default.createElement(h.default,{startIcon:t?c.default.createElement(l.default,null):c.default.createElement(a.default,null),onClick:r},t?"Unfollow":"Follow"):null}},17019:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(7701)),l=s(n(8319)),c=s(n(7343)),u=s(n(68782)),d=s(n(78935)),h=s(n(29216)),f=s(n(25070)),p=s(n(3779)),m=s(n(89589)),g=o(n(67294)),v=n(92891),y=n(39547),b=s(n(55039));t.default=e=>{const[t,n]=(0,g.useState)([]),[r,i]=(0,g.useState)(!1),[o,s]=(0,g.useState)(0),[w,x]=(0,g.useState)(15);if((0,g.useEffect)((()=>{const t=(0,v.getPlayerGameDataListener)(e.userId,(e=>{e&&n(e),i(!0)}));return()=>{t&&t()}}),[]),!r)return g.default.createElement("div",{style:{textAlign:"center",margin:35}},g.default.createElement(a.default,null));const{color:_,backgroundColor:S}=(0,y.getStyledColors)("white");return g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{style:{color:_,backgroundColor:S}},g.default.createElement(f.default,{page:o,count:t.length,rowsPerPage:w,rowsPerPageOptions:[5,10,15,25,50],onPageChange:(e,t)=>{s(t)},onRowsPerPageChange:e=>{x(parseInt(e.target.value,10)),s(0)},component:"div"}),g.default.createElement(d.default,{title:"Your game data"},t?g.default.createElement(l.default,null,g.default.createElement(h.default,null,g.default.createElement(p.default,null,g.default.createElement(u.default,null),g.default.createElement(u.default,{component:"th"},"Date"),g.default.createElement(u.default,{component:"th"},"Track name"),g.default.createElement(u.default,{component:"th"},"No. laps"),g.default.createElement(u.default,{component:"th"},"Total time"),g.default.createElement(u.default,{component:"th"},"Best lap time"),g.default.createElement(u.default,null))),g.default.createElement(c.default,null,t.slice(o*w,o*w+w).map(((t,n)=>{const r=`gamedata-${t.gameId}-${n}`;return g.default.createElement(b.default,{key:r,playerData:t,userId:e.userId})})))):g.default.createElement(m.default,null,"You have not completed any races!"))))}},55039:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(8364)),l=s(n(75503)),c=s(n(90813)),u=s(n(55435)),d=s(n(74113)),h=s(n(68782)),f=s(n(3779)),p=o(n(67294)),m=n(23053),g=n(92891),v=n(38990);t.default=e=>{var t;const[n,r]=(0,p.useState)(!1),{playerData:i}=e;if(!e.playerData)return null;const o="number"==typeof i.date?(0,v.getDateFromNumber)(i.date):"-";return p.default.createElement(p.default.Fragment,null,p.default.createElement(f.default,{onClick:()=>{},sx:{"& > *":{borderBottom:"unset"}}},p.default.createElement(h.default,null,p.default.createElement(d.default,{"aria-label":"expand row",size:"small",onClick:()=>{r(!n)}},n?p.default.createElement(c.default,null):p.default.createElement(l.default,null))),p.default.createElement(h.default,null,o),p.default.createElement(h.default,null,(0,m.getTrackNameFromType)(i.trackName)),p.default.createElement(h.default,null,i.numberOfLaps),p.default.createElement(h.default,null,i.totalTime),p.default.createElement(h.default,null,i.bestLapTime),p.default.createElement(h.default,null,p.default.createElement(d.default,{onClick:()=>{(0,g.deletePlayerGameData)(e.userId,i.gameId)}},p.default.createElement(a.default,null)))),p.default.createElement(f.default,null,p.default.createElement(h.default,{style:{paddingBottom:0,paddingTop:0},colSpan:7},p.default.createElement(u.default,{in:n,timeout:"auto",unmountOnExit:!0},p.default.createElement("div",{style:{margin:10,padding:5}},"Lap times:",i.lapTimes.map(((e,t)=>p.default.createElement("span",{key:`${i.gameId}-${i.playerName}-lap${t}`,style:{marginLeft:15}},e))),p.default.createElement("div",null,"Date of race: ",o),p.default.createElement("div",null,"Type of vehicle: ",null!==(t=i.vehicleType)&&void 0!==t?t:"-"))))))}},20842:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(60181)),l=s(n(23508)),c=n(84473),u=o(n(67294)),d=n(23053),h=n(46078),f=n(39547),p=e=>{var t,n,r;const[i,o]=(0,u.useState)(!1),s=Object.keys(e.trackMedals);let h=0,f=0,p=0;for(let i of s)h+=null!==(t=e.trackMedals[i].gold)&&void 0!==t?t:0,f+=null!==(n=e.trackMedals[i].silver)&&void 0!==n?n:0,p+=null!==(r=e.trackMedals[i].bronze)&&void 0!==r?r:0;return u.default.createElement(u.default.Fragment,null,u.default.createElement(c.TableRow,{sx:{"& > *":{borderBottom:"unset"}}},u.default.createElement(c.TableCell,null,u.default.createElement(c.IconButton,{size:"small",onClick:()=>o(!i)},i?u.default.createElement(a.default,null):u.default.createElement(l.default,null))),u.default.createElement(c.TableCell,null,(0,d.getTrackNameFromType)(e.track)),u.default.createElement(c.TableCell,null,h),u.default.createElement(c.TableCell,null,f),u.default.createElement(c.TableCell,null,p)),u.default.createElement(c.TableRow,null,u.default.createElement(c.TableCell,{style:{paddingBottom:0,paddingTop:0},colSpan:5},u.default.createElement(c.Collapse,{in:i,unmountOnExit:!0},u.default.createElement(c.Table,null,u.default.createElement(c.TableHead,null,u.default.createElement(c.TableRow,null,u.default.createElement(c.TableCell,null,"Laps"),u.default.createElement(c.TableCell,null,"Gold"),u.default.createElement(c.TableCell,null,"Silver"),u.default.createElement(c.TableCell,null,"Bronze"))),u.default.createElement(c.TableBody,null,s.map((t=>{var n,r,i;return u.default.createElement(c.TableRow,{key:`${e.track}-${t}`},u.default.createElement(c.TableCell,null,t),u.default.createElement(c.TableCell,null,null!==(n=e.trackMedals[t].gold)&&void 0!==n?n:0),u.default.createElement(c.TableCell,null,null!==(r=e.trackMedals[t].silver)&&void 0!==r?r:0),u.default.createElement(c.TableCell,null,null!==(i=e.trackMedals[t].bronze)&&void 0!==i?i:0))}))))))))};t.default=e=>{const[t,n]=(0,u.useState)(null),{color:r,backgroundColor:i}=(0,f.getStyledColors)("white");if((0,u.useEffect)((()=>{e.userId&&(0,h.getUserMedals)(e.userId).then((e=>{n(e)}))}),[e.userId]),null===t)return u.default.createElement(c.CircularProgress,null);if(void 0===t)return u.default.createElement("span",null,"No medals");const o=Object.keys(t);return u.default.createElement(u.default.Fragment,null,u.default.createElement(c.Typography,null,"Medals"),u.default.createElement(c.Table,{style:{color:r,backgroundColor:i}},u.default.createElement(c.TableHead,null,u.default.createElement(c.TableRow,null,u.default.createElement(c.TableCell,{component:"th"}),u.default.createElement(c.TableCell,{component:"th"},"Track"),u.default.createElement(c.TableCell,{component:"th"},"Gold"),u.default.createElement(c.TableCell,{component:"th"},"Silver"),u.default.createElement(c.TableCell,{component:"th"},"Bronze"))),u.default.createElement(c.TableBody,null,o.map((e=>u.default.createElement(p,{key:e,trackMedals:t[e],track:e}))))))}},14952:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(672)),l=o(n(67294)),c=n(72132),u=n(79061),d=n(87612),h=s(n(23950)),f=s(n(32096));t.default=e=>{const t=(0,l.useContext)(d.UserContext),[n,r]=(0,l.useState)([]);return(0,l.useEffect)((()=>{(null==t?void 0:t.uid)&&(0,u.getAllUserTournaments)(t.uid).then((e=>{r(e)})).catch((()=>{c.toast.error("Error getting user tournaments")}))}),[]),void 0===t?l.default.createElement("span",null,"You need to be logged in"):l.default.createElement(h.default,{loading:null===t},l.default.createElement(a.default,{container:!0,spacing:3},l.default.createElement(a.default,{item:!0,xs:12},"All tournements"),l.default.createElement(a.default,{item:!0,xs:12},l.default.createElement(f.default,{tournaments:n}))))}},89493:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(75149),l=s(n(77957)),c=s(n(14039)),u=s(n(48547)),d=s(n(50961)),h=s(n(73537)),f=s(n(67276)),p=s(n(7701)),m=s(n(672)),g=s(n(89589)),v=o(n(67294)),y=n(5977),b=n(98059),w=n(35742),x=n(87612),_=n(38990),S=s(n(23950)),E=s(n(50622)),T=s(n(24555)),C=s(n(69306)),M=n(17091),k=s(n(92432)),P=s(n(17019)),A=s(n(1514));t.default=e=>{const t=(0,y.useHistory)(),n=(0,v.useContext)(x.UserContext),[r,i]=(0,v.useState)(!1),[o,s]=(0,v.useState)(void 0);(0,v.useEffect)((()=>{n&&s(n)}),[n]);const I=(e,t)=>{const n=Object.assign({},o);n[t]=e,s(n)};return v.default.createElement(S.default,{store:e.store},v.default.createElement(m.default,{container:!0,spacing:3},v.default.createElement(m.default,{item:!0,xs:12},v.default.createElement(C.default,null)),v.default.createElement(m.default,{item:!0,xs:12,sm:12,md:3},v.default.createElement(m.default,{spacing:3,container:!0},v.default.createElement(m.default,{item:!0,xs:12},n?v.default.createElement(v.default.Fragment,null,v.default.createElement(T.default,null,r?v.default.createElement(v.default.Fragment,null,v.default.createElement(h.default,{action:v.default.createElement(E.default,{onClick:()=>{i(!1);const{displayName:e,photoURL:t}=o;(0,a.updateProfile)(b.auth.currentUser,{displayName:e,photoURL:t}),(0,w.setFirestorePublicUser)({uid:n.uid,displayName:e,photoURL:t,latestEdit:(0,_.getDateNow)()}),n.displayName!==e&&window.location.reload()},startIcon:v.default.createElement(c.default,null)},"Submit Edit")}),v.default.createElement(d.default,null,v.default.createElement(m.default,{container:!0,rowSpacing:3},v.default.createElement(m.default,{item:!0,xs:12},v.default.createElement(k.default,{label:"Photo URL",id:"photo-url",value:null!==(R=o.photoURL)&&void 0!==R?R:"",onChange:e=>I(e.target.value,"photoURL")})),v.default.createElement(m.default,{item:!0,xs:12},v.default.createElement(k.default,{id:"display-name",label:"Display name",value:null!==(L=o.displayName)&&void 0!==L?L:"",onChange:e=>{I(e.target.value,"displayName")}}))))):o?v.default.createElement(v.default.Fragment,null,v.default.createElement(h.default,{title:"Profile information",subheader:o.displayName,action:v.default.createElement(E.default,{startIcon:v.default.createElement(l.default,null),onClick:()=>{i(!0)}},"Edit")}),v.default.createElement(f.default,{component:"img",image:o.photoURL}),v.default.createElement(d.default,null,v.default.createElement(m.default,{container:!0,rowSpacing:3},v.default.createElement(m.default,{item:!0,xs:12},v.default.createElement(g.default,null,"Email: ",o.email)),v.default.createElement(m.default,{item:!0,xs:12},v.default.createElement(g.default,null,"Display name: ",o.displayName)))),v.default.createElement(u.default,null,v.default.createElement(E.default,{link:(0,M.getUserPagePath)(n.uid)},"See public profile"))):null)):v.default.createElement("div",{style:{margin:75,textAlign:"center"}},v.default.createElement(g.default,null,"Loading your profile..."),v.default.createElement("br",null),v.default.createElement("br",null),v.default.createElement("br",null),v.default.createElement("br",null),v.default.createElement(p.default,null))),n&&v.default.createElement(m.default,{item:!0,xs:12},v.default.createElement(A.default,{user:n,store:e.store})))),n&&v.default.createElement(v.default.Fragment,null,v.default.createElement(m.default,{item:!0,xs:12,sm:12,md:9,style:{backgroundColor:"inherit"}},v.default.createElement(P.default,{userId:n.uid})),v.default.createElement(m.default,{item:!0,xs:3,style:{textAlign:"left"}},v.default.createElement(E.default,{onClick:()=>(0,b.signOut)((()=>{window.location.href=M.frontPagePath}))},"Logout")),v.default.createElement(m.default,{item:!0,xs:3,style:{textAlign:"left"}},v.default.createElement(E.default,{onClick:()=>t.push(M.privateProfileTournamentsPagePath)},"Your Tournaments")))));var R,L}},32846:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(50961)),l=s(n(73537)),c=s(n(67276)),u=s(n(55435)),d=s(n(672)),h=s(n(4153)),f=s(n(1471)),p=s(n(89589)),m=o(n(67294)),g=n(5977),v=s(n(50622)),y=s(n(24555)),b=s(n(99819)),w=n(17091),x=s(n(13650)),_=s(n(20842));t.default=e=>{var t,n,r;const[i,o]=(0,m.useState)(!1),[s,S]=(0,m.useState)(!1),E=(0,g.useHistory)(),T={displayName:null===(t=e.user)||void 0===t?void 0:t.displayName,uid:null===(n=e.user)||void 0===n?void 0:n.uid,photoURL:null===(r=e.user)||void 0===r?void 0:r.photoURL},C={displayName:e.profile.displayName,uid:e.profile.uid,photoURL:e.profile.photoURL},M="number"==typeof e.profile.latestLogin?new Date(e.profile.latestLogin).toISOString():"-";return m.default.createElement(m.default.Fragment,null,m.default.createElement(d.default,{item:!0,xs:12,lg:6},m.default.createElement(y.default,null,m.default.createElement(l.default,{header:e.profile.displayName,title:e.profile.displayName,subheader:`Last logged in ${null!=M?M:"-"}`,action:m.default.createElement(x.default,{userData:T,otherUserData:C})}),m.default.createElement(a.default,null,m.default.createElement(v.default,{onClick:()=>o(!i)},e.followers.length," followers"),m.default.createElement(u.default,{in:i},m.default.createElement(h.default,null,e.followers.map((e=>m.default.createElement(f.default,{key:e.uid,onClick:()=>E.push((0,w.getUserPagePath)(e.uid))},e.displayName)))))),m.default.createElement(a.default,null,m.default.createElement(v.default,{onClick:()=>S(!s)},e.followings.length," following"),m.default.createElement(u.default,{in:s},m.default.createElement(h.default,null,e.followings.map((e=>m.default.createElement(f.default,{key:e.uid,onClick:()=>E.push((0,w.getUserPagePath)(e.uid))},e.displayName)))))),e.profile.photoURL?m.default.createElement(c.default,{style:{width:400,maxWidth:"100%",margin:"auto"},src:e.profile.photoURL,component:"img"}):m.default.createElement(p.default,null,"No profile image"))),m.default.createElement(d.default,{item:!0,xs:12,lg:6},m.default.createElement(_.default,{userId:e.profile.uid})),m.default.createElement(d.default,{item:!0,xs:12,lg:6},m.default.createElement(p.default,null,"Best races"),m.default.createElement(b.default,{data:e.bestRaces,noDataText:"User hasn't completed any races",includeTrackAndNumLaps:!0,user:e.user})))}},77846:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(7701)),l=s(n(672)),c=s(n(89589)),u=o(n(67294)),d=n(5977),h=n(72132),f=n(35742),p=n(92891),m=n(87612),g=s(n(23950)),v=s(n(69306)),y=n(17091),b=s(n(32846));t.default=e=>{const t=(0,d.useParams)(),n=(0,d.useHistory)(),r=null==t?void 0:t.profileId,[i,o]=(0,u.useState)(void 0),s=(0,u.useContext)(m.UserContext),[w,x]=(0,u.useState)([]),[_,S]=(0,u.useState)([]),[E,T]=(0,u.useState)([]);return(0,u.useEffect)((()=>{r&&((0,f.getFirestorePublicUser)(r,(e=>{"success"===e.status?o(e.data):(h.toast.error(e.message),n.push(y.frontPagePath))})),(0,p.getPlayerBestScores)(r,(e=>{e&&T(e)})))}),[r]),(0,u.useEffect)((()=>{i&&(0,f.getUserSocials)(i.uid,(e=>x(e)),(e=>S(e)))}),[i]),u.default.createElement(g.default,{backgroundContainer:!0},u.default.createElement(l.default,{container:!0,spacing:3},u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(v.default,{color:"white"})),i?u.default.createElement(b.default,{user:s,profile:i,followers:w,followings:_,bestRaces:E}):u.default.createElement(u.default.Fragment,null,u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(a.default,null)),u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"Loading profile...")))))}},1514:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(73537)),l=o(n(67294)),c=n(35742),u=s(n(24555)),d=s(n(3880));t.default=e=>{const[t,n]=(0,l.useState)(!1);(0,l.useEffect)((()=>{var t;(0,c.getDBUserSettings)(null===(t=e.user)||void 0===t?void 0:t.uid).then((t=>{e.store.setUserSettings(t)}))}),[]);return e.store.userSettings?l.default.createElement(u.default,null,(null===(i=null===(r=e.store.userSettings)||void 0===r?void 0:r.vehicleSettings)||void 0===i?void 0:i.vehicleType)?l.default.createElement(l.default.Fragment,null,l.default.createElement(a.default,{title:"User settings",subheader:"Most of these are also editable in-game"}),l.default.createElement(d.default,{linkToGarage:!0,store:e.store,user:e.user,previewVehicle:!0})):null):null;var r,i}},20959:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(42154)),o=r(n(94757)),s=r(n(92037)),a=r(n(30297)),l=r(n(67294));n(98248);t.default=e=>l.default.createElement(l.default.Fragment,null,l.default.createElement("span",{className:"radio__label",style:{margin:e.center?"auto":""}},e.label),l.default.createElement(i.default,{component:"fieldset",disabled:e.disabled},l.default.createElement(o.default,{className:"radio",row:!0,"aria-label":"type of tournament",name:"row-radio-buttons-group"},e.options.map((t=>l.default.createElement(s.default,{key:t.label,value:t.value,control:l.default.createElement(a.default,{onChange:()=>e.onChange(t.value),checked:e.checked===t.value}),label:t.label}))))))},67300:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(n(49066)),c=a(n(52295)),u=a(n(26340)),d=a(n(26340)),h=a(n(55435)),f=a(n(672)),p=a(n(74113)),m=a(n(66443)),g=a(n(89589)),v=o(n(67294)),y=n(23053),b=n(7735),w=n(12743),x=n(39547),_=n(44482),S=n(81441),E=n(72425),T=a(n(50622)),C=a(n(74744)),M=a(n(44257)),k=a(n(47909)),P=a(n(74923)),A=a(n(92976)),I=a(n(47156)),R=a(n(20959)),L=a(n(92432));t.default=e=>{const[t,n]=(0,v.useState)(e.gameSettings),[r,i]=(0,v.useState)(e.gameSettings.drawDistance),o="mobile"===(0,E.getDeviceType)(),{color:a,backgroundColor:O}=(0,x.getStyledColors)("black"),[N,D]=(0,v.useState)(!1),F=(r,i,o)=>{const s=o?Object.assign({},o):Object.assign({},e.gameSettings);s[r]=i,"gameType"===r&&("tag"===i?s.trackName=y.defaultTagTrack:"race"===i?s.trackName=y.defaultRaceTrack:"story"===i&&(s.trackName=y.defaultStoryTrack)),(0,b.setLocalGameSetting)(r,i),n(s),e.onChange(s),"numberOfLaps"!==r&&"trackName"!==r||!t.useGhost||B(s)},B=e=>{(0,w.getFastestGhostFilename)(e.trackName,e.numberOfLaps).then((t=>{D(!1),t?(e.ghostFilename=t,F("ghostFilename",t,e)):F("ghostFilename","",e)}))};(0,v.useEffect)((()=>{n(e.gameSettings)}),[e.gameSettings]);const Z=!!e.gameSettings.tournamentId;return v.default.createElement(f.default,{container:!0,spacing:3},v.default.createElement(f.default,{item:!0,xs:12,lg:4},v.default.createElement(R.default,{label:"Type of game",checked:t.gameType,onChange:e=>F("gameType",e),options:[{label:"Race",value:"race"},{label:"Tag",value:"tag"}],disabled:Z})),"race"===e.gameSettings.gameType?v.default.createElement(v.default.Fragment,null,v.default.createElement(f.default,{item:!0,xs:12,lg:4,xl:4},v.default.createElement(P.default,{disabled:Z,title:"No. of laps",value:t.numberOfLaps,numbers:y.numberOfLapsPossibilities,onChange:e=>{F("numberOfLaps",e)},style:{backgroundColor:O}}))):"tag"===e.gameSettings.gameType?v.default.createElement(v.default.Fragment,null,v.default.createElement(f.default,{item:!0,xs:12,lg:4,xl:4},v.default.createElement(L.default,{disabled:Z,type:"number",label:"Tag game length in minutes",value:t.tagGameLength?t.tagGameLength:"",onChange:e=>{F("tagGameLength",+e.target.value)}}))):null,v.default.createElement(f.default,{item:!0,xs:12,lg:4},v.default.createElement("p",null,"Selected track is"," ",v.default.createElement("strong",{style:{backgroundColor:"white",color:"black",padding:3,fontSize:16}}," ",(0,y.getTrackNameFromType)(t.trackName)))),v.default.createElement(f.default,{item:!0,xs:12},v.default.createElement(I.default,{disabled:Z,gameType:t.gameType,excludedTracks:e.inTestMode||E.inTestMode?[]:y.nonActiveTrackNames,value:t.trackName,onChange:e=>{F("trackName",e)},store:e.store,buttonToOpen:!0})),v.default.createElement(f.default,{item:!0,xs:12},v.default.createElement(M.default,{header:"More settings"},v.default.createElement(f.default,{container:!0,spacing:3},v.default.createElement(f.default,{item:!0,xs:6,sm:4},v.default.createElement(g.default,null,"Sound effects"),v.default.createElement(p.default,{style:{color:O},onClick:()=>{F("useSound",!t.useSound)}},t.useSound?v.default.createElement(d.default,null):v.default.createElement(c.default,null))),v.default.createElement(f.default,{item:!0,xs:6,sm:4},v.default.createElement(R.default,{label:"Shadows",options:[{label:"Off",value:!1},{label:"On",value:!0}],checked:t.useShadows,onChange:e=>F("useShadows",e)})),v.default.createElement(f.default,{item:!0,xs:12,sm:4},v.default.createElement(R.default,{label:"Graphics",checked:t.graphics,options:[{label:"Low",value:"low"},{label:"High",value:"high"}],onChange:e=>F("graphics",e)})),v.default.createElement(f.default,{item:!0,xs:12},v.default.createElement(A.default,{startIcon:v.default.createElement(p.default,{style:{color:"black"},onClick:()=>{F("musicVolume",0)}},v.default.createElement(l.default,null)),endIcon:v.default.createElement(u.default,null),label:"Music volume",onChangeCommitted:e=>{F("musicVolume",e)},onChange:e=>{o||(0,_.setMusicVolume)(e)},value:t.musicVolume,step:.01,max:1,min:0,color:"black"})),v.default.createElement(f.default,{item:!0,xs:12},v.default.createElement(g.default,null,"Draw distance"),v.default.createElement(m.default,{color:"secondary",style:{width:"90%"},min:50,max:7500,valueLabelDisplay:"auto",step:50,defaultValue:r,onChange:(e,t)=>{},onChangeCommitted:(e,t)=>{F("drawDistance",t)}})),v.default.createElement(f.default,{item:!0,xs:12},v.default.createElement(A.default,{label:"Target FPS",max:60,min:25,step:5,onChangeCommitted:e=>{F("targetFPS",e)},onChange:e=>{},value:t.targetFPS})),v.default.createElement(f.default,{item:!0,xs:12},v.default.createElement(C.default,{label:"Record session?",checked:e.gameSettings.record,onChange:()=>{F("record",!e.gameSettings.record)}})),v.default.createElement(f.default,{item:!0,xs:12},v.default.createElement(C.default,{label:"Use ghost?",checked:e.gameSettings.useGhost,onChange:()=>{F("useGhost",!e.gameSettings.useGhost)}})),v.default.createElement(f.default,{item:!0,xs:12},v.default.createElement(h.default,{in:e.gameSettings.useGhost},v.default.createElement(L.default,{value:e.gameSettings.ghostFilename,label:"Ghost filename",disabled:!!e.gameSettings.tournamentId,onChange:e=>F("ghostFilename",e.target.value),onBlur:()=>{const{trackName:t,numberOfLaps:r}=S.DriveRecorder.GetTrackNameNumberOfLapsFromFilename(e.gameSettings.ghostFilename);console.log("updating number of laps and track name",e.gameSettings.ghostFilename,t,r),t&&r&&((t,r)=>{const i=Object.assign({},e.gameSettings);for(let e=0;e<t.length;e++)i[t[e]]=r[e],(0,b.setLocalGameSetting)(t[e],r[e]);n(i),e.onChange(i)})(["trackName","numberOfLaps"],[t,r])}}),v.default.createElement("br",null),v.default.createElement(T.default,{onClick:()=>s(void 0,void 0,void 0,(function*(){D(!0),B(t)})),disabled:N,loading:N},"Find quickest ghost"),v.default.createElement(k.default,{infoText:`Click the button to play against the fastest player that recorded their try playing ${(0,y.getTrackNameFromType)(e.gameSettings.trackName)} for ${e.gameSettings.numberOfLaps} laps.`})))))))}},74741:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(34297)),l=s(n(50961)),c=s(n(73537)),u=s(n(672)),d=o(n(67294)),h=n(7735),f=n(28468),p=s(n(67300)),m=s(n(66297)),g=n(72425),v=n(44482);t.default=e=>{const t="mobile"===(0,g.getDeviceType)();return(0,d.useEffect)((()=>(e.store.socket.on(f.stmd_game_settings_changed,(n=>{e.store.setGameSettings(n.gameSettings),(0,h.setAllLocalGameSettings)(n.gameSettings),t||(0,v.setMusicVolume)(n.gameSettings.musicVolume)})),()=>{e.store.socket.off(f.stmd_game_settings_changed)})),[]),d.default.createElement(u.default,{item:!0,xs:12},d.default.createElement(a.default,{variant:"outlined",style:{backgroundColor:"inherit",width:"100%",color:"#fff"}},d.default.createElement(c.default,{title:"Game Settings",subheader:"The leader can also change game settings in game",subheaderTypographyProps:{color:"#eee"}}),d.default.createElement(l.default,null,d.default.createElement(p.default,{gameSettings:e.store.gameSettings,onChange:t=>{e.store.setGameSettings(t),e.store.socket.emit(f.mdts_game_settings_changed,{gameSettings:t})},store:e.store})),d.default.createElement(l.default,null,"tag"===e.store.gameSettings.gameType&&d.default.createElement(m.default,null))))}},3880:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(55435)),l=s(n(672)),c=s(n(66443)),u=s(n(89589)),d=o(n(67294)),h=s(n(44257)),f=s(n(58153)),p=n(35742),m=n(46078),g=n(39547),v=n(28468),y=n(17246),b=s(n(50622)),w=s(n(92976)),x=s(n(20959)),_=n(17091);let S,E;t.default=e=>{const t=e.user,[n,r]=(0,d.useState)(e.store.userSettings.vehicleSettings.chaseCameraSpeed),[i,o]=(0,d.useState)(e.store.userSettings.vehicleSettings.steeringSensitivity),[s,T]=(0,d.useState)(e.store.userSettings.vehicleSettings.cameraZoom),[C,M]=(0,d.useState)(e.store.userSettings.vehicleSettings.noSteerNumber);(0,d.useEffect)((()=>()=>{console.log("unmount vehicle settings",E,S),(null==t?void 0:t.uid)&&(S&&(0,p.setDBUserSettings)(t.uid,S),E&&(0,m.setDBVehiclesSetup)(t.uid,E))}),[]);const k=(t,n)=>{const r=Object.assign({},e.store.userSettings.vehicleSettings);r[t]=n;const i=Object.assign(Object.assign({},e.store.userSettings),{vehicleSettings:r});S=i,(t=>{e.store.socket.emit(v.mts_user_settings_changed,{userSettings:t,vehicleSetup:void 0}),e.store.setUserSettings(t)})(i)},{color:P,backgroundColor:A}=(0,g.getStyledColors)("white");return d.default.createElement(h.default,{header:"Vehicle settings"},d.default.createElement(l.default,{container:!0,spacing:3},d.default.createElement(l.default,{item:!0,xs:12,lg:12,style:{}},e.linkToGarage?d.default.createElement(b.default,{link:_.garagePagePath},"Go to garage"):d.default.createElement(f.default,{store:e.store,value:e.store.userSettings.vehicleSettings.vehicleType,excludedVehicles:y.nonactiveVehcileTypes,vehicleColor:e.store.userSettings.vehicleSettings.vehicleColor,onChange:e=>{k("vehicleType",e)},onChangeColor:e=>{k("vehicleColor",e)},onChangeVehicleItem:t=>{const n=Object.assign({},e.store.vehiclesSetup);n[e.store.userSettings.vehicleSettings.vehicleType][t.type]=t,e.store.setVehiclesSetup(n),E=n,e.store.socket.emit(v.mts_user_settings_changed,{userSettings:void 0,vehicleSetup:n[e.store.userSettings.vehicleSettings.vehicleType]})},user:e.user})),d.default.createElement(l.default,{item:!0,xs:6,sm:4},e.resetOrientation&&d.default.createElement(b.default,{onClick:e.resetOrientation},"Reset orientation")),d.default.createElement(l.default,{item:!0,xs:6,sm:4},d.default.createElement(b.default,{onClick:()=>{k("useChaseCamera",!e.store.userSettings.vehicleSettings.useChaseCamera)}},d.default.createElement(d.default.Fragment,null,"Camera chaser"," ",e.store.userSettings.vehicleSettings.useChaseCamera?"On":"Off"))),d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(a.default,{in:e.store.userSettings.vehicleSettings.useChaseCamera},d.default.createElement(u.default,null,"Chase camera speed"),d.default.createElement(c.default,{style:{color:P},min:.01,max:1,valueLabelDisplay:"auto",step:.01,defaultValue:n,onChange:(e,t)=>{},onChangeCommitted:(e,t)=>{k("chaseCameraSpeed",t)}}))),d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(w.default,{label:"Steering sensitivity",color:P,min:.01,max:1,step:.01,value:i,onChange:e=>{},onChangeCommitted:e=>{k("steeringSensitivity",e)},startIcon:d.default.createElement("span",null,"-"),endIcon:d.default.createElement("span",null,"+")})),d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(w.default,{label:"Camera position",color:P,min:1,max:10,step:1,value:s,onChange:e=>{},onChangeCommitted:e=>{k("cameraZoom",e)},startIcon:d.default.createElement("span",null,"Close"),endIcon:d.default.createElement("span",null,"Far")})),d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(w.default,{label:d.default.createElement(d.default.Fragment,null,"No Steer range:",d.default.createElement("i",null," ","small angle where the vehicle won't turn when the phone turns")),color:P,min:0,max:5,step:.5,value:C,onChange:e=>{},onChangeCommitted:e=>{k("noSteerNumber",e)},startIcon:d.default.createElement("span",null,"-"),endIcon:d.default.createElement("span",null,"+")})),d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(x.default,{options:[{label:"On",value:!0},{label:"Off",value:!1}],label:"Dynamic camera field of view",checked:e.store.userSettings.vehicleSettings.useDynamicFOV,onChange:e=>{k("useDynamicFOV",e)}})),!e.notInGame&&d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(u.default,null,"For the vehicle type to update, the leader must restart the game."))))}},42682:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(78298)),l=s(n(13379)),c=s(n(76172)),u=s(n(48317)),d=s(n(672)),h=s(n(74113)),f=s(n(89589)),p=s(n(55435)),m=o(n(67294)),g=n(5977),v=n(28468);n(86046);const y=n(38990),b=n(17091),w=n(91925),x=n(39547),_=s(n(50622)),S=s(n(69306));t.default=e=>{var t;(0,g.useHistory)();const n=(0,m.useRef)(),[r,i]=(0,m.useState)(0),[o,s]=(0,m.useState)(0),[E,T]=(0,m.useState)(!1),C=e.excludedVehicles?v.allVehicleTypes.filter((t=>!(0,y.itemInArray)(t.type,e.excludedVehicles))):v.allVehicleTypes;(0,m.useEffect)((()=>()=>{(0,w.removeShowRoomCanvas)()}),[]),(0,m.useEffect)((()=>{var t;const i=(0,w.createShowRoomCanvas)(null!==(t=e.vehcileType)&&void 0!==t?t:C[Math.abs(o%C.length)].type,r,e.vehicleColor);if(n.current&&i){for(;n.current.children.length>0;)n.current.removeChild(n.current.children[0]);i.domElement.setAttribute("style","max-width:100%;"),n.current.appendChild(i.domElement)}C[o%C.length].type===v.defaultVehicleType?T(!1):T(!0)}),[r,o,e.vehcileType,e.vehicleColor]);const{color:M,backgroundColor:k}=(0,x.getStyledColors)("black");return m.default.createElement(m.default.Fragment,null,m.default.createElement(d.default,{container:!0,spacing:3},m.default.createElement(d.default,{item:!0,xs:12},m.default.createElement(S.default,{color:"white"})),m.default.createElement(d.default,{item:!0,xs:12},m.default.createElement("div",{ref:n})),!e.vehcileType&&m.default.createElement(m.default.Fragment,null,m.default.createElement(d.default,{item:!0,xs:12},m.default.createElement(f.default,{variant:"h6",component:"div"},null===(t=C[o%C.length])||void 0===t?void 0:t.name)),m.default.createElement(d.default,{item:!0,xs:12},m.default.createElement(p.default,{in:E},m.default.createElement(d.default,{container:!0,spacing:3},m.default.createElement(d.default,{item:!0,xs:12},m.default.createElement(f.default,{color:"InfoText",style:{textAlign:"center",color:M}},"This is a Premium vehicle available only to Premium users.")),m.default.createElement(d.default,{item:!0,xs:12,style:{textAlign:"center"}},m.default.createElement(_.default,{center:!0,color:"white",link:b.buyPremiumPagePath},"Go Premium"))))),m.default.createElement(d.default,{item:!0,xs:3}),m.default.createElement(d.default,{item:!0,xs:3,style:{textAlign:"center"}},m.default.createElement(h.default,{style:{color:M},onClick:()=>{s(0===o?C.length-1:o-1)}},m.default.createElement(a.default,null))),m.default.createElement(d.default,{item:!0,xs:3,style:{textAlign:"center"}},m.default.createElement(h.default,{style:{color:M},onClick:()=>{s(o+1)}},m.default.createElement(l.default,null))),m.default.createElement(d.default,{item:!0,xs:3}),m.default.createElement(d.default,{item:!0,xs:3}),m.default.createElement(d.default,{item:!0,xs:3,style:{textAlign:"center"}},m.default.createElement(h.default,{style:{color:M},onClick:()=>{i(0===r?v.vehicleColors.length-1:r-1)}},m.default.createElement(c.default,null))),m.default.createElement(d.default,{item:!0,xs:3,style:{textAlign:"center"}},m.default.createElement(h.default,{style:{color:M},onClick:()=>{i(r+1)}},m.default.createElement(u.default,null))),m.default.createElement(d.default,{item:!0,xs:3}))))}},45646:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(67294)),l=n(87612),c=s(n(23950)),u=s(n(42682));t.default=e=>{(0,a.useContext)(l.UserContext);return a.default.createElement(c.default,{backgroundContainer:!0},a.default.createElement("h2",null,"The Garage"),a.default.createElement(u.default,{isPremiumUser:!1,excludedVehicles:["test","simpleCylindar","normal"]}))}},91925:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.removeShowRoomCanvas=t.setShowRoomOffset=t.createShowRoomCanvas=t.changeVehicleSetup=t.changeChassisColor=void 0;const i=n(2212),o=n(1217),s=n(69365),a=n(72425),l=n(59711),c=n(95782),u=n(81135),d=n(11976);let h,f;const p=(e,t,n,r)=>new Promise(((t,i)=>{"simpleSphere"===e?(0,c.loadSphereModel)(e,!0).then((i=>{h=e,f=i,r&&(0,d.changeVehicleBodyColor)(f,[r]),n.add(i),t()})):(0,l.loadLowPolyVehicleModels)(e,!0).then((([i,o])=>{h=e,f=o,r&&(0,d.changeVehicleBodyColor)(f,[r]),n.add(o);for(let e of i)n.add(e),e.castShadow=e.receiveShadow=!0;t()}))}));let m=15;const g=e=>{const t=new i.PointLight(16777215,1,10,0);t.castShadow=!0,t.shadow.bias=.01,t.position.set(5,5,5),e.add(t);const n=new i.AmbientLight(16777215,.3);n.position.set(5,5,5),e.add(n)};let v;t.changeChassisColor=e=>{f&&(0,d.changeVehicleBodyColor)(f,[e])};const y=new o.GLTFLoader,b=e=>new Promise(((t,n)=>{y.load((0,a.getStaticPath)(`models/${h}/${e}.glb`),(e=>{for(let n of e.scene.children)"Mesh"===n.type&&(f.add(n),t(n))}))}));let w={exhaust:void 0,spoiler:void 0,wheelGuards:void 0};let x,_,S;t.changeVehicleSetup=e=>r(void 0,void 0,void 0,(function*(){var t,n;if(f&&e)for(let r of u.possibleVehicleItemTypes)if(e[r]!==(null===(t=w[r])||void 0===t?void 0:t.props))if((null===(n=w[r])||void 0===n?void 0:n.model)&&f.remove(w[r].model),e[r]){const t=yield b(e[r].path);w[r]={props:e[r],model:t}}else w[r]=void 0}));let E=0;t.createShowRoomCanvas=(e,n,r,o,l)=>{if(h=e,T=!1,_&&x)return _.clear(),p(e,0,_,r),void g(_);const c=null!=l?l:400,u="desktop"===(0,a.getDeviceType)()?window.innerWidth:screen.availWidth;x=new i.WebGLRenderer({antialias:!0}),x.setPixelRatio(window.devicePixelRatio),x.setSize(u,c),x.outputEncoding=i.sRGBEncoding,_=new i.Scene,_.background=new i.Color(12575709),g(_),S=new i.PerspectiveCamera(40,u/c,1,100),S.position.set(10,5,-15),S.aspect=u/c;const d=new s.OrbitControls(S,x.domElement);d.target.set(0,.5,0),d.update(),d.enablePan=!1,d.enableDamping=!0,d.autoRotate=!0,S.lookAt(0,0,0),p(e,0,_,r).then((()=>{o&&(0,t.changeVehicleSetup)(o)})),window.onresize=function(){},S.fov=25,S.rotateY(E);let f=Date.now();d.autoRotateSpeed=4;const y=()=>{if(x&&S){x.render(_,S);const e=Date.now();f=e}else x&&x.clear();T||(E+=.03,S.position.setX(Math.cos(E)*m),S.position.setZ(Math.sin(E)*m),S.lookAt(0,0,0)),v=setTimeout((()=>{requestAnimationFrame(y)}),1e3/30)};return y(),x.domElement.addEventListener("mousedown",C),x.domElement.addEventListener("touchstart",C),x};let T=!1;const C=e=>{e.preventDefault(),T=!0};t.setShowRoomOffset=(e,t)=>{m=e,S.position.set(m,t,m)};t.removeShowRoomCanvas=()=>{x.domElement.removeEventListener("mousedown",C),clearTimeout(v),x.clear(),_.clear(),_=void 0,x=void 0,S=void 0}},96967:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(55693)),l=s(n(22092)),c=s(n(33217)),u=o(n(67294)),d=n(39547);t.default=e=>{var t;const[n,r]=(0,u.useState)(null!==(t=e.defaultTab)&&void 0!==t?t:0),{color:i,backgroundColor:o}=(0,d.getStyledColors)("black");return u.default.createElement("div",{style:{color:i,backgroundColor:o,padding:10}},u.default.createElement(a.default,{sx:{borderBottom:1,borderColor:"divider"}},u.default.createElement(c.default,{value:n,onChange:(t,n)=>{r(n),e.onTabChange&&e.onTabChange(n)},"aria-label":"basic tabs example"},e.tabs.map(((t,n)=>{return u.default.createElement(l.default,Object.assign({key:t.label,label:t.label},{id:`simple-tab-${r=n}`,"aria-controls":`simple-tabpanel-${r}`},{style:{color:i,fontSize:e.subtabs?11:"inherit"}}));var r})))),e.tabs.map(((e,t)=>n===t?u.default.createElement(u.default.Fragment,{key:e.label},e.renderElement()):null)))}},92432:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(84473),o=r(n(67294)),s=n(39547);n(78777);t.default=e=>{var t,n;const{color:r,backgroundColor:a}=(0,s.getStyledColors)(null!==(t=e.color)&&void 0!==t?t:"white");return o.default.createElement(o.default.Fragment,null,o.default.createElement("span",{className:"text-field__label",style:{color:a,background:r}},e.label),o.default.createElement(i.TextField,{className:"text-field",type:e.type,id:e.id,style:{color:r,backgroundColor:a},autoComplete:"false",value:null!==(n=e.value)&&void 0!==n?n:"",onChange:e.onChange,disabled:e.disabled,fullWidth:e.fullWidth,placeholder:e.label,onBlur:e.onBlur}))}},80313:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(67294)),l=s(n(96339)),c=s(n(31975)),u=n(35742),d=n(68445),h=n(38990),f=s(n(38847)),p=s(n(7701));t.default=e=>{if((0,a.useEffect)((()=>{var t;(null===(t=e.user)||void 0===t?void 0:t.uid)&&!e.store.tokenData&&(0,u.getUserTokens)(e.user.uid).then((t=>{console.log("got token data",t),e.store.setTokenData(t)})).catch((()=>{e.store.setTokenData(d.defaultTokenData)}))}),[e.user]),!e.user)return null;if(!e.store.tokenData)return a.default.createElement("div",{className:"background"},a.default.createElement(p.default,null));let t=(0,h.getSizePrefix)(e.store.tokenData.coins);const{currentLevel:n,pointsToNextLevel:r,ratioOfLevelFinished:i,pointsFinishedInThisLevel:o}=(0,h.getXPInfo)(e.store.tokenData.XP);return a.default.createElement("div",{className:"background",style:{fontSize:32,color:"white"}},a.default.createElement(l.default,null)," ",a.default.createElement("span",{style:{fontSize:24}},"Coins")," ",t,a.default.createElement("br",null),a.default.createElement(c.default,null)," ",a.default.createElement("span",{style:{fontSize:24,marginRight:10}},"Level"),n,a.default.createElement("span",{style:{fontSize:16,marginRight:5,marginLeft:10}},o.toFixed(0)," /"," ",o+r),a.default.createElement(f.default,{value:i,max:1}),e.showInfo&&a.default.createElement(a.default.Fragment,null,a.default.createElement("br",null),a.default.createElement("span",null,"Finish races to earn XP and tokens, spend tokens in the Garage and buy Tracks!")))}},94342:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(7701)),l=s(n(672)),c=s(n(89589)),u=o(n(67294)),d=n(5977),h=n(72132),f=n(79061),p=s(n(32096));t.default=e=>{const[t,n]=(0,u.useState)(void 0);(0,d.useHistory)();return(0,u.useEffect)((()=>{var t;(null===(t=e.user)||void 0===t?void 0:t.uid)&&(0,f.getActiveTournaments)(e.user.uid).then((e=>{console.log("active tournaments",e),n(e)})).catch((()=>{h.toast.error("Error getting active tournaments"),n([])}))}),[e.user]),e.user?void 0===t?u.default.createElement(u.default.Fragment,null,u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(a.default,null)),u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"Loading.."))):0===t.length?u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"No active tournaments")):u.default.createElement(u.default.Fragment,null,u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"List of active tournaments, those that have already started.")),u.default.createElement(l.default,{item:!0,xs:!1,lg:3}),u.default.createElement(l.default,{item:!0,xs:12,lg:6},u.default.createElement(p.default,{tournaments:t})),u.default.createElement(l.default,{item:!0,xs:!1,lg:3})):u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"Tournaments are only for logged in users."))}},8217:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(1849)),l=s(n(7701)),c=s(n(672)),u=s(n(89589)),d=o(n(67294)),h=n(5977),f=n(72132),p=n(79061),m=s(n(32096)),g=s(n(50622));t.default=e=>{const[t,n]=(0,d.useState)(void 0),[r,i]=(0,d.useState)(!0),o=((0,h.useHistory)(),()=>{i(!0),(0,p.getAvailableTournaments)(e.user.uid).then((e=>{console.log("tournaments",e),n(e),i(!1)})).catch((()=>{n(void 0),i(!1),f.toast.error("Error getting tournaments.s")}))});return(0,d.useEffect)((()=>{var t;(null===(t=e.user)||void 0===t?void 0:t.uid)&&o()}),[e.user]),e.user?void 0===t?d.default.createElement(d.default.Fragment,null,d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(l.default,null)),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,null,"Loading.."))):d.default.createElement(d.default.Fragment,null,d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(g.default,{onClick:()=>o(),startIcon:d.default.createElement(a.default,null),disabled:r,center:!0},"Get available tournaments")),r?d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(l.default,null)):d.default.createElement(d.default.Fragment,null,0===t.length?d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,null,"No tournaments available")):d.default.createElement(d.default.Fragment,null,d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,null,"List of available tournaments")),d.default.createElement(c.default,{item:!0,xs:!1,lg:3}),d.default.createElement(c.default,{item:!0,xs:12,lg:6},d.default.createElement(m.default,{tournaments:t})),d.default.createElement(c.default,{item:!0,xs:!1,lg:3})))):d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,null,"Tournaments are only for logged in users."))}},40553:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(672)),l=s(n(89589)),c=o(n(67294)),u=n(5977),d=n(87612),h=s(n(23950)),f=s(n(96844)),p=s(n(357));n(78777);const m=s(n(20959)),g=s(n(69306));t.default=e=>{const t=(0,c.useContext)(d.UserContext),[n,r]=((0,u.useHistory)(),(0,c.useState)("local"));return c.default.createElement(h.default,{loading:null===t,backgroundContainer:!0},c.default.createElement(a.default,{container:!0,spacing:3},c.default.createElement(a.default,{item:!0,xs:12,lg:2},c.default.createElement(g.default,{color:"white"})),(null==t?void 0:t.uid)?c.default.createElement(c.default.Fragment,null,c.default.createElement(a.default,{item:!0,xs:12,lg:10},c.default.createElement(l.default,{variant:"h3"},"Create a tournament")),c.default.createElement(a.default,{item:!0,xs:12},c.default.createElement(m.default,{checked:n,options:[{value:"local",label:"Local"},{value:"global",label:"Global"}],label:"Type of tournament",onChange:e=>r(e)})),c.default.createElement("br",null),"local"===n?c.default.createElement(a.default,{item:!0,xs:12},c.default.createElement(p.default,{user:t})):c.default.createElement(a.default,{item:!0,xs:12},c.default.createElement(f.default,{user:t}))):c.default.createElement(a.default,{item:!0,xs:12,lg:10},c.default.createElement(l.default,null,"Only logged in users can create a tournament."))))}},14756:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(55435)),l=s(n(672)),c=o(n(67294)),u=n(23053),d=n(39547),h=n(17246),f=s(n(74744)),p=s(n(74923)),m=s(n(47156)),g=s(n(58153)),v=s(n(92432)),y=s(n(85482)),b=s(n(99668));t.default=e=>{const[t,n]=(0,c.useState)(!1),r=(t,n)=>{e.updateTournament(t,n)};return c.default.createElement(c.default.Fragment,null,c.default.createElement(l.default,{item:!0,xs:12,lg:4},c.default.createElement(v.default,{label:"Tournament name",value:e.tournament.name,onChange:e=>{e.target.value.length<=32&&r("name",e.target.value)}})),c.default.createElement(l.default,{item:!0,xs:12},c.default.createElement(a.default,{in:t},c.default.createElement(g.default,{user:e.user,value:t?e.tournament.vehicleType:"normal2",onChange:e=>{r("vehicleType",e)},excludedVehicles:h.nonactiveVehcileTypes}))),c.default.createElement(l.default,{item:!0,xs:12,lg:4},c.default.createElement(p.default,{title:"No. of laps",value:e.tournament.numberOfLaps,numbers:u.numberOfLapsPossibilities,onChange:e=>{r("numberOfLaps",e)},style:{backgroundColor:d.inputBackgroundColor}})),c.default.createElement(l.default,{item:!0,xs:12,lg:4},c.default.createElement(m.default,{gameType:"race",value:e.tournament.trackName,excludedTracks:u.nonActiveTrackNames,onChange:e=>{r("trackName",e)},showMapPreview:!0})),c.default.createElement(l.default,{item:!0,xs:12,lg:4},c.default.createElement(f.default,{label:"Only allow specific vehicle",checked:t,onChange:()=>{n(!t),r("vehicleType",!t&&"normal2")}})),"local"===e.tournament.tournamentType?c.default.createElement(b.default,{editTournament:e.tournament,updateTournament:r}):c.default.createElement(y.default,{editTournament:e.tournament,updateTournament:r}))}},65294:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(60181)),l=s(n(23508)),c=s(n(94718)),u=s(n(34297)),d=s(n(50961)),h=s(n(73537)),f=s(n(67276)),p=s(n(55435)),m=s(n(74113)),g=s(n(89589)),v=o(n(67294)),y=n(5977),b=s(n(74433)),w=s(n(84769)),x=s(n(94017)),_=n(39547),S=n(17091);t.default=()=>{const[e,t]=(0,v.useState)(!1),n=(0,y.useHistory)();return v.default.createElement(u.default,{style:{maxWidth:400,margin:"auto",backgroundColor:_.cardBackgroundColor}},v.default.createElement(h.default,{subheader:"How to play a tournament game",action:v.default.createElement(m.default,{onClick:()=>t(!e)},open?v.default.createElement(a.default,null):v.default.createElement(l.default,null))}),v.default.createElement(p.default,{in:e},v.default.createElement(d.default,null,v.default.createElement(g.default,null,"Create a new room like normally. At the bottom of the waiting room page, you can search for tournaments you are participating in by clicking the button."),v.default.createElement(g.default,null,"After the tournaments have loaded, select the one you wish to compete in."),v.default.createElement(g.default,{style:{color:_.basicColor}},v.default.createElement("i",null,"Here below are some images demonstrating how to play a tournament game."))),v.default.createElement(f.default,{src:b.default,component:"img"}),v.default.createElement(d.default,null,v.default.createElement(g.default,null,"Press the button to find active tournaments.")),v.default.createElement(f.default,{src:w.default,component:"img"}),v.default.createElement(d.default,null,v.default.createElement(g.default,null,"Select the desired tournament.")),v.default.createElement(f.default,{src:x.default,component:"img"}),v.default.createElement(d.default,null,v.default.createElement(g.default,null,"On the top of the page is a small message saying this race will register in the tournament. If playing a local tournament, you won't be able to start unless the correct players are connected.")),v.default.createElement(d.default,null,v.default.createElement(c.default,{variant:"contained",disableElevation:!0,onClick:()=>{n.push(S.connectPagePath)}},"Create a room"))))}},52371:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(7701)),l=s(n(672)),c=s(n(89589)),u=o(n(67294)),d=n(5977),h=n(72132),f=n(79061),p=s(n(50622)),m=s(n(32096));t.default=e=>{const[t,n]=(0,u.useState)(void 0),[r,i]=(0,u.useState)(!1);(0,d.useHistory)();(0,u.useEffect)((()=>{}),[e.user]);return u.default.createElement(u.default.Fragment,null,r?e.user?void 0===t?u.default.createElement(u.default.Fragment,null,u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(a.default,null)),u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"Loading.."))):0===t.length?u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"No completed tournaments")):u.default.createElement(u.default.Fragment,null,u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"List of previous tournaments")),u.default.createElement(l.default,{item:!0,xs:!1,lg:3}),u.default.createElement(l.default,{item:!0,xs:12,lg:6},u.default.createElement(m.default,{tournaments:t})),u.default.createElement(l.default,{item:!0,xs:!1,lg:3})):u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"Tournaments are only for logged in users.")):u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(p.default,{center:!0,onClick:()=>{var t;(null===(t=e.user)||void 0===t?void 0:t.uid)?(i(!0),(0,f.getPreviousTournaments)(e.user.uid).then((e=>{console.log("previous tournaments",e),n(e)})).catch((()=>{h.toast.error("Error getting previous tournaments"),n([])}))):h.toast.error("Only logged in users can have tournaments.")}},"Get Completed tournaments")))}},34561:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(7701)),l=s(n(672)),c=s(n(89589)),u=s(n(92592)),d=o(n(67294)),h=n(5977),f=n(72132),p=n(79061),m=n(87612),g=n(72425),v=s(n(23950)),y=s(n(50622)),b=s(n(73090)),w=s(n(39736)),x=s(n(69306)),_=n(17091),S=s(n(87228)),E=s(n(71343)),T=s(n(65294)),C=s(n(16635)),M=s(n(20819));t.default=e=>{const[t,n]=(0,d.useState)(""),r="mobile"===(0,g.getDeviceType)(),[i,o]=(0,d.useState)(null),s=(0,h.useHistory)(),k=(0,d.useContext)(m.UserContext);(0,d.useEffect)((()=>{r||u.default.toDataURL(window.location.href).then((e=>{n(e)})).catch((e=>{console.log("error generating qr code",e)}));const t=(0,p.createGetTournametListener)(e.tournamentId,(e=>{console.log("_T",e),o(e)}));return()=>{t()}}),[]);return d.default.createElement(v.default,{backgroundContainer:!0},d.default.createElement(l.default,{container:!0,spacing:3},null===i?d.default.createElement(d.default.Fragment,null,d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(a.default,null)),d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(c.default,null,"Loading tournament..."))):d.default.createElement(d.default.Fragment,null,d.default.createElement(l.default,{item:!0,xs:12,lg:9},d.default.createElement(b.default,{infoText:`Link to tournament: ${window.location.href}`,copyText:window.location.href})),t&&d.default.createElement(l.default,{item:!0,xs:12,lg:3},d.default.createElement("img",{src:t,alt:""})),i.hasStarted&&d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(y.default,{center:!0,onClick:()=>{r?f.toast.error("You can only create games on desktop."):(e.store.setTournament(i),e.store.setPreviousPage(_.tournamentPagePath),s.push(_.connectPagePath))}},"Create tournament game")),void 0===i?d.default.createElement(d.default.Fragment,null,d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(c.default,null,"No tournament with given id found.")),d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(x.default,null))):"local"===i.tournamentType?i.hasStarted?d.default.createElement(C.default,{user:e.user,tournament:i}):d.default.createElement(M.default,{tournament:i,user:e.user}):i.hasStarted?d.default.createElement(S.default,{user:e.user,tournament:i}):d.default.createElement(E.default,{tournament:i,user:e.user})),d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(T.default,null)),(null==i?void 0:i.id)&&i.leaderId===(null==k?void 0:k.uid)&&d.default.createElement(l.default,{item:!0,xs:12},d.default.createElement(w.default,{onDelete:()=>{(0,p.deleteTournament)(i.id).then((()=>{f.toast.success("Tournament successfully deleted")})).catch((()=>{f.toast.error("Error deleting tournament")}))}}))))}},63050:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(25089)),l=s(n(79540)),c=s(n(672)),u=s(n(89589)),d=o(n(67294)),h=n(5977),f=n(87612),p=s(n(23950)),m=s(n(50622)),g=s(n(69306)),v=n(17091),y=s(n(94342)),b=s(n(8217)),w=s(n(52371)),x=s(n(34561));t.default=e=>{const t=(0,h.useParams)(),{tournamentId:n}=t,r=(0,h.useHistory)(),i=(0,d.useContext)(f.UserContext);return n?d.default.createElement(x.default,{tournamentId:n,user:i,store:e.store}):d.default.createElement(p.default,{backgroundContainer:!0},d.default.createElement(c.default,{container:!0,spacing:3},d.default.createElement(c.default,{item:!0,xs:12,md:3},d.default.createElement(g.default,{color:"white"})),d.default.createElement(c.default,{item:!0,xs:12,md:6},d.default.createElement(u.default,{component:"div",variant:"h4"},"Tournaments")),d.default.createElement(c.default,{item:!0,xs:!1,md:3}),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,null,"Here you can join or start a tournament.")),d.default.createElement(c.default,{item:!0,xs:12,xl:12},d.default.createElement(m.default,{color:"white",center:!0,startIcon:d.default.createElement(a.default,null),onClick:()=>{r.push(v.createTournamentPagePath)}},"Create a tournament")),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(l.default,{style:{margin:"auto",width:100}})),d.default.createElement(b.default,{user:i}),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(l.default,{style:{margin:"auto",width:100}})),d.default.createElement(y.default,{user:i}),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(l.default,{style:{margin:"auto",width:100}})),d.default.createElement(w.default,{user:i})))}},27124:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(94718)),l=s(n(7701)),c=s(n(672)),u=s(n(89589)),d=o(n(67294)),h=n(72132),f=n(79061),p=s(n(26269));t.default=e=>{var t;const[n,r]=(0,d.useState)(!1),[i,o]=(0,d.useState)(!1),[s,m]=(0,d.useState)(!1),g=t=>{o(!0),t?(0,f.leaveTournament)(e.user,e.tournament.id).then((()=>{o(!1),r(!1)})).catch((()=>{h.toast.error("Error leaving tournament")})):(0,f.joinTournament)(e.user,e.tournament.id).then((()=>{o(!1),r(!0)})).catch((()=>{h.toast.error("Error joining tournament")}))};return(0,d.useEffect)((()=>{var t;let n=!1;for(let i=0;i<e.players.length;i++)e.players[i].uid===(null===(t=e.user)||void 0===t?void 0:t.uid)&&(r(!0),n=!0);n||g(!1)}),[e.players]),(0,d.useEffect)((()=>{}),[]),e.tournament?d.default.createElement(d.default.Fragment,null,!e.tournamentStarted&&d.default.createElement(c.default,{item:!0,xs:12},i?d.default.createElement(l.default,null):d.default.createElement(a.default,{variant:"contained",disableElevation:!0,onClick:()=>{e.user?g(n):h.toast.error("Only logged in players can join tournaments")}},n?"Leave tournament":"Join tournament")),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,{variant:"h5"},"Players in tournament")),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(p.default,{user:e.user,tournament:e.tournament,editingRanking:s,players:e.players,setPlayers:e.setPlayers})),!e.tournamentStarted&&"local"===e.tournament.tournamentType&&e.tournament.leaderId===(null===(t=e.user)||void 0===t?void 0:t.uid)&&d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(a.default,{variant:"contained",disableElevation:!0,onClick:()=>{m(!s)}},s?"Update ranks":"Edit ranks"))):null}},26269:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(25727)),l=s(n(4153)),c=s(n(47696)),u=s(n(94742)),d=s(n(1471)),h=s(n(52451)),f=s(n(798)),p=s(n(89589)),m=o(n(67294)),g=n(5977),v=n(79061),y=n(39547),b=s(n(74923)),w=n(17091),x=e=>{const t=e.player,n=(0,g.useHistory)(),[r,i]=(0,m.useState)(t.ranking);t.displayName,t.uid,t.photoURL;return m.default.createElement(c.default,{key:t.uid},m.default.createElement(d.default,{style:{marginRight:40},key:t.uid,onClick:()=>{e.editingRanking||n.push((0,w.getUserPagePath)(t.uid))}},m.default.createElement(u.default,null,m.default.createElement(a.default,{src:t.photoURL})),m.default.createElement(f.default,{primary:m.default.createElement(p.default,null,t.displayName," ",e.isLeader&&m.default.createElement("i",null,"Leader")),secondary:"local"===e.tournamentType&&t.ranking})),e.editingRanking&&m.default.createElement(h.default,null,m.default.createElement(b.default,{title:"Rank",minWidth:0,numbers:e.possibleRanks,value:-1===r?e.possibleRanks.length:r,style:{backgroundColor:-1===r?y.red1:"inherit"},onChange:t=>{i(t);const n=Object.assign(Object.assign({},e.player),{ranking:t});e.setPlayer(n)}})))};t.default=e=>{var t,n,r;const[i,o]=(0,m.useState)([]);null===(t=e.user)||void 0===t||t.displayName,null===(n=e.user)||void 0===n||n.uid,null===(r=e.user)||void 0===r||r.photoURL;(0,m.useEffect)((()=>{const t=(0,v.getPlayersInTournamentListener)(e.tournament.id,(t=>{e.setPlayers(t);const n=t.map(((e,t)=>t+1));o(n)}));return()=>{t()}}),[]),(0,m.useEffect)((()=>{if(e.editingRanking||e.tournament.hasStarted){const t=[];for(let n of e.players){const e=Object.assign({},n);-1===n.ranking&&(e.ranking=i.length),t.push(e)}e.setPlayers(t)}else(0,v.updatePlayersInTournament)(e.tournament.id,e.players)}),[e.editingRanking]);const s=e.players.sort(((e,t)=>e.ranking>t.ranking?1:-1));return 0===e.players.length?m.default.createElement(p.default,null,"No players in tournament"):m.default.createElement(l.default,{style:{width:500,maxWidth:"90%",margin:"auto",backgroundColor:y.cardBackgroundColor}},s.map(((t,n)=>m.default.createElement(x,{key:t.uid,player:t,editingRanking:e.editingRanking,possibleRanks:i,setPlayer:t=>{const r=e.players;r[n]=t,e.setPlayers(r)},tournamentType:e.tournament.tournamentType,isLeader:e.tournament.leaderId===t.uid}))))}},74957:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(672)),o=r(n(67294)),s=n(23053),a=n(39547),l=n(38990),c=n(17246),u=r(n(86624)),d=r(n(66820));t.default=e=>o.default.createElement(i.default,{container:!0,spacing:3,style:{backgroundColor:a.cardBackgroundColor,width:500,maxWidth:"90%",margin:"auto",paddingBottom:15}},o.default.createElement(i.default,{item:!0,xs:12},e.tournament.hasStarted?"The tournament has started.":"The tournament hasn't started."),o.default.createElement(i.default,{item:!0,xs:12},e.tournament.isFinished?"The tournament is finished":"The tournament isn't finished."),o.default.createElement(i.default,{item:!0,xs:12},"The leader of the tournament is ",e.tournament.leaderName),o.default.createElement(i.default,{item:!0,xs:12},"This is a ",e.tournament.tournamentType," tournament."),o.default.createElement(i.default,{item:!0,xs:12},"Number of laps per game is ",e.tournament.numberOfLaps,"."),o.default.createElement(i.default,{item:!0,xs:12},"Track ",(0,s.getTrackNameFromType)(e.tournament.trackName)),o.default.createElement(i.default,{item:!0,xs:12},e.tournament.vehicleType?`Only using ${(0,c.getVehicleNameFromType)(e.tournament.vehicleType)}`:"All vehicles allowed."),o.default.createElement(i.default,{item:!0,xs:12},"Creation date: ",(0,l.getDateString)(e.tournament.creationDate)),"local"===e.tournament.tournamentType?o.default.createElement(d.default,{tournament:e.tournament}):o.default.createElement(u.default,{tournament:e.tournament}))},32096:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(8319)),o=r(n(7343)),s=r(n(68782)),a=r(n(78935)),l=r(n(29216)),c=r(n(3779)),u=r(n(67294)),d=n(5977),h=n(23053),f=n(39547),p=n(38990),m=r(n(50622)),g=n(17091);t.default=e=>{const t=(0,d.useHistory)(),{color:n,backgroundColor:r}=(0,f.getStyledColors)("white");return u.default.createElement(a.default,null,u.default.createElement(i.default,{style:{color:n,backgroundColor:r}},u.default.createElement(l.default,null,u.default.createElement(c.default,null,u.default.createElement(s.default,null),u.default.createElement(s.default,null,"Name"),u.default.createElement(s.default,null,"Leader"),u.default.createElement(s.default,null,"Track name"),u.default.createElement(s.default,null,"Created on"),u.default.createElement(s.default,null,"Type"))),u.default.createElement(o.default,null,e.tournaments.map((e=>u.default.createElement(c.default,{key:e.id},u.default.createElement(s.default,null,u.default.createElement(m.default,{onClick:()=>t.push((0,g.getTournamentPagePath)(e.id))},"View")),u.default.createElement(s.default,null,e.name),u.default.createElement(s.default,null,e.leaderName),u.default.createElement(s.default,null,(0,h.getTrackNameFromType)(e.trackName)),u.default.createElement(s.default,null,(0,p.getDateString)(e.creationDate)),u.default.createElement(s.default,null,e.tournamentType)))))))}},96844:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(79540)),l=s(n(672)),c=s(n(89589)),u=o(n(67294)),d=n(5977),h=n(72132),f=n(66279),p=n(79061),m=s(n(50622)),g=n(17091),v=s(n(14756));t.default=e=>{var t,n;const r=(0,d.useHistory)(),[i,o]=(0,u.useState)(new f.GlobalTournament(null===(t=e.user)||void 0===t?void 0:t.uid,null===(n=e.user)||void 0===n?void 0:n.displayName));return u.default.createElement(l.default,{container:!0,spacing:3},u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"Global tournaments can be for players that are not physically together. Each player tries to get their best time on a give track/number of laps combination. There can be set a limit for the number of runs each player is allowed. A predetermined window of time is allowed for this tournament. The player with the quickest time when the tournament finishes is the winner.")),u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(a.default,{variant:"middle"})),u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"Create Global tournament")),u.default.createElement(v.default,{tournament:i,user:e.user,updateTournament:(e,t)=>{const n=Object.assign({},i);n[e]=t,o(n)}}),u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(m.default,{onClick:()=>{const{status:e,message:t}=(0,f.validateCreateTournament)(i);"error"===e?h.toast.error(t):(0,p.setTournament)(i).then((()=>{r.push((0,g.getTournamentPagePath)(i.id))})).catch((()=>{h.toast.error("Some error.")}))}},"Create global tournament!")))}},85482:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(79540)),l=s(n(672)),c=o(n(67294)),u=s(n(74744)),d=s(n(39393)),h=s(n(92432));t.default=e=>{const[t,n]=(0,c.useState)(!!e.editTournament.runsPerPlayer);console.log("edit torunament",e.editTournament),console.log("start",e.editTournament.tournamentStart.toISOString());const r=e.editTournament.tournamentStart.toISOString().slice(0,16),i=e.editTournament.tournamentEnd.toISOString().slice(0,16),o=(new Date).toISOString().slice(0,16);return console.log("start string",r),c.default.createElement(c.default.Fragment,null,c.default.createElement(l.default,{item:!0,xs:12,lg:3},c.default.createElement(u.default,{label:"Limit number of runs per player",checked:t,onChange:()=>{n(!t),t?e.updateTournament("runsPerPlayer",!1):e.updateTournament("runsPerPlayer",1)}})),t&&c.default.createElement(l.default,{item:!0,xs:12,lg:3},c.default.createElement(h.default,{type:"number",label:"Runs per player",value:e.editTournament.runsPerPlayer?e.editTournament.runsPerPlayer:"",onChange:t=>e.updateTournament("runsPerPlayer",+t.target.value)})),c.default.createElement(l.default,{item:!0,xs:12,lg:3},c.default.createElement(u.default,{label:"Allow joining after game starts",checked:e.editTournament.allowLateJoin,onChange:()=>e.updateTournament("allowLateJoin",!e.editTournament.allowLateJoin)})),c.default.createElement(l.default,{item:!0,xs:12},c.default.createElement(a.default,{style:{margin:"auto",width:100},variant:"middle"})),c.default.createElement(l.default,{item:!0,xs:12,lg:6},c.default.createElement(d.default,{label:"Tournament start",value:r,onChange:t=>{e.updateTournament("tournamentStart",t)},min:o,max:i})),c.default.createElement(l.default,{item:!0,xs:12,lg:!1},c.default.createElement(a.default,{style:{margin:"auto",width:100},variant:"middle"})),c.default.createElement(l.default,{item:!0,xs:12,lg:5},c.default.createElement(d.default,{label:"Tournament End",value:i,onChange:t=>{e.updateTournament("tournamentEnd",t)},min:r,max:"2099-06-14T00:00"})))}},87228:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(672)),l=s(n(94718)),c=s(n(55435)),u=s(n(89589)),d=o(n(67294)),h=s(n(39662)),f=s(n(74957));t.default=e=>{const[t,n]=(0,d.useState)(!1),[r,i]=(0,d.useState)([]);return d.default.createElement(d.default.Fragment,null,d.default.createElement(a.default,{xs:12,item:!0},d.default.createElement(u.default,{variant:"h3"},e.tournament.name)),d.default.createElement(a.default,{item:!0,xs:12},d.default.createElement(u.default,{variant:"h6"},"Global tournament room")),d.default.createElement(a.default,{item:!0,xs:12},d.default.createElement(l.default,{onClick:()=>n(!t),variant:"contained",disableElevation:!0},"See settings")),d.default.createElement(a.default,{item:!0,xs:12},d.default.createElement(c.default,{in:t},d.default.createElement(f.default,{tournament:e.tournament}))),d.default.createElement(a.default,{item:!0,xs:12},d.default.createElement(h.default,{tournamentId:e.tournament.id})))}},39662:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(60181)),l=s(n(23508)),c=s(n(8319)),u=s(n(7343)),d=s(n(68782)),h=s(n(78935)),f=s(n(29216)),p=s(n(3779)),m=s(n(89589)),g=s(n(55435)),v=s(n(74113)),y=o(n(67294)),b=n(79061),w=e=>{if(!e||0===(null==e?void 0:e.length))return{vehicleType:"normal",totalTime:1/0,lapTimes:[]};let t=e[0];for(let n of e)n.totalTime<t.totalTime&&(t=n);return t},x=e=>{const[t,n]=(0,y.useState)(!1),r=w(e.player.raceData);return y.default.createElement(y.default.Fragment,null,y.default.createElement(p.default,null,y.default.createElement(d.default,null,y.default.createElement(v.default,{onClick:()=>n(!t)},t?y.default.createElement(a.default,null):y.default.createElement(l.default,null))),y.default.createElement(d.default,null,e.player.displayName),y.default.createElement(d.default,null,r?r.totalTime:"No laps recorded"),y.default.createElement(d.default,null,e.player.raceData?e.player.raceData.length:0)),y.default.createElement(p.default,null,y.default.createElement(d.default,{style:{paddingBottom:0,paddingTop:0},colSpan:4},y.default.createElement(g.default,{in:t},y.default.createElement(m.default,null,"Lap times:"),(null==r?void 0:r.lapTimes.length)>0?r.lapTimes.map(((t,n)=>y.default.createElement(m.default,{key:`${e.player.uid}-laps-${n}`,style:{paddingRight:5}},t))):y.default.createElement(m.default,null,"No laps")))))};t.default=e=>{const[t,n]=(0,y.useState)([]);return(0,y.useEffect)((()=>{const t=(0,b.getPlayersInTournamentListener)(e.tournamentId,(e=>{e.sort(((e,t)=>w(e.raceData).totalTime-w(t.raceData).totalTime)),n(e),console.log("_p",e)}));return()=>{t()}}),[]),y.default.createElement(h.default,{style:{maxWidth:600,margin:"auto"}},y.default.createElement(c.default,null,y.default.createElement(f.default,null,y.default.createElement(p.default,null,y.default.createElement(d.default,null),y.default.createElement(d.default,null,"Player"),y.default.createElement(d.default,null,"Best total time"),y.default.createElement(d.default,null,"Number of runs"))),y.default.createElement(u.default,null,t.map((e=>y.default.createElement(x,{key:e.uid,player:e}))))))}},86624:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(672)),o=r(n(67294)),s=n(38990);t.default=e=>o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{item:!0,xs:12},"Start of tournament ",(0,s.getDateString)(e.tournament.tournamentStart)),o.default.createElement(i.default,{item:!0,xs:12},"End of tournament ",(0,s.getDateString)(e.tournament.tournamentEnd)),o.default.createElement(i.default,{item:!0,xs:12},e.tournament.runsPerPlayer?o.default.createElement(o.default.Fragment,null,"Runs per player ",e.tournament.runsPerPlayer):o.default.createElement(o.default.Fragment,null,"No limit on runs per player.")))},71343:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(94718)),l=s(n(79540)),c=s(n(89589)),u=s(n(672)),d=o(n(67294)),h=n(72132),f=n(66279),p=n(79061),m=n(38990),g=s(n(27124)),v=s(n(14756)),y=s(n(74957));t.default=e=>{var t,n;const[r,i]=(0,d.useState)([]),[o,s]=(0,d.useState)(!1),[b,w]=(0,d.useState)(e.tournament);return d.default.createElement(d.default.Fragment,null,d.default.createElement(u.default,{item:!0,xs:12},d.default.createElement(c.default,{variant:"h4"},e.tournament.name," ")),d.default.createElement(u.default,{item:!0,xs:12},d.default.createElement(c.default,{variant:"h6"},"Tournament waiting room")),d.default.createElement(u.default,{xs:12,item:!0},d.default.createElement(c.default,null,"Global tournament")),d.default.createElement(g.default,{tournament:e.tournament,user:e.user,players:r,setPlayers:i}),d.default.createElement(u.default,{item:!0,xs:12},d.default.createElement(l.default,{variant:"middle"})),o?d.default.createElement(v.default,{user:e.user,tournament:b,updateTournament:(e,t)=>{const n=Object.assign({},b);n[e]=t,w(n)}}):d.default.createElement(y.default,{tournament:e.tournament}),e.tournament.leaderId===(null===(t=e.user)||void 0===t?void 0:t.uid)&&d.default.createElement(d.default.Fragment,null,d.default.createElement(u.default,{item:!0,xs:12},d.default.createElement(a.default,{variant:"contained",onClick:()=>{if(o){const e=(0,f.validateCreateTournament)(b);console.log("res",e),"error"===e.status?h.toast.error(e.message):((0,p.setTournament)(b),s(!o))}else s(!o),w(e.tournament)},color:"info"},o?"Submit edit":"Edit tournament")),d.default.createElement(u.default,{item:!0,xs:12},d.default.createElement(a.default,{variant:"contained",disabled:o,onClick:()=>{const t=Object.assign(Object.assign({},e.tournament),{players:(0,m.arrayToDict)(r,"uid"),playersIds:r.map((e=>e.uid))}),n=(0,f.validateStartTournament)(t);if("error"===n.status)h.toast.error(n.message);else{const e=Object.assign(Object.assign({},t),{hasStarted:!0});(0,p.setTournament)(e)}}},"Start tournament"))),e.tournament.leaderId!==(null===(n=e.user)||void 0===n?void 0:n.uid)&&d.default.createElement(u.default,{item:!0,xs:12},d.default.createElement(c.default,null,"Waiting for leader to start tournament")))}},25810:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(67294)),l=n(72132),c=n(66279),u=n(79061),d=n(39547),h=n(28468),f=s(n(50622)),p=s(n(80873));t.default=e=>{var t;const[n,r]=(0,a.useState)([]),i=t=>{var n;if("local"===t.tournamentType){const r=c.BracketTree.FindActiveBracketNode(t.flattenBracket,null===(n=e.store.players[0])||void 0===n?void 0:n.id);r||(l.toast.error(`No active bracket found for ${e.store.players[0].playerName}`),e.store.setTournament(void 0)),e.store.setActiveBracketNode(r)}else e.store.setActiveBracketNode(void 0)};(0,a.useEffect)((()=>{var t;e.store.gameSettings.tournamentId!==(null===(t=e.store.tournament)||void 0===t?void 0:t.id)&&(e.store.gameSettings.tournamentId?(0,u.getTournamentWithId)(e.store.gameSettings.tournamentId).then((t=>{console.log("new tournament gotten",t),e.store.setTournament(t),e.store.players.length>0&&i(t)})):(e.store.setTournament(void 0),e.store.setActiveBracketNode(void 0)))}),[e.store.gameSettings]);const o=t=>{const n=Object.assign(Object.assign({},e.store.gameSettings),{tournamentId:null==t?void 0:t.id});t&&"undefined"!==(null==t?void 0:t.id)?(n.numberOfLaps=t.numberOfLaps,n.trackName=t.trackName,n.gameType="race",e.store.setTournament(t),i(t)):(delete n.tournamentId,e.store.setTournament(void 0),e.store.setActiveBracketNode(void 0)),console.log("new game settings",n),e.store.setGameSettings(n),e.store.socket.emit(h.mdts_game_settings_changed,{gameSettings:n})},s=e.standOut?{backgroundColor:d.yellow3,maxWidth:500,margin:"auto",padding:15}:{};return a.default.createElement("div",{style:s},a.default.createElement(f.default,{style:{marginRight:10},onClick:()=>{0!==e.store.players.length?e.store.players[0].isAuthenticated?(r(void 0),(0,u.getActiveTournaments)(e.store.players[0].id).then((e=>{console.log("_t active tour",e),r(e),(null==e?void 0:e.length)>0&&o(e[0])}))):l.toast.error("Players must be logged in to search for tournaments."):l.toast.error("No players in waiting room. Players are needed to search for tournaments.")}},"Find active tournaments"),a.default.createElement(p.default,{tournaments:n,selectedId:e.store.gameSettings.tournamentId,selectedName:null===(t=e.store.tournament)||void 0===t?void 0:t.name,onChange:e=>{o(e)}}))}},357:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(79540)),l=s(n(672)),c=s(n(89589)),u=o(n(67294)),d=n(5977),h=n(72132),f=n(66279),p=n(79061),m=s(n(50622)),g=n(17091),v=s(n(14756));t.default=e=>{var t,n;const r=(0,d.useHistory)(),[i,o]=(0,u.useState)(new f.LocalTournament(null===(t=e.user)||void 0===t?void 0:t.uid,null===(n=e.user)||void 0===n?void 0:n.displayName));return u.default.createElement(l.default,{container:!0,spacing:3},u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,null,"Local tournaments are for players that are physically together. The format is a knockout tournament, where two players face off in each round, the winner advances until there is one player left. In the knockout tournament there is also the possibility of having a lower bracket, this way everyone plays the same amount of games.")),u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(a.default,{variant:"middle"})),u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(c.default,{variant:"h5"},"Create local tournament")),u.default.createElement(v.default,{tournament:i,user:e.user,updateTournament:(e,t)=>{const n=Object.assign({},i);n[e]=t,o(n)}}),u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(a.default,{variant:"middle"})),u.default.createElement(l.default,{item:!0,xs:12},u.default.createElement(m.default,{onClick:()=>{const{status:e,message:t}=(0,f.validateCreateTournament)(i);"error"===e?h.toast.error(t):(0,p.setTournament)(i).then((()=>{r.push((0,g.getTournamentPagePath)(i.id))})).catch((()=>{h.toast.error("Some error.")}))}},"Create local tournament!")))}},14683:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294)),o=n(39547);t.default=e=>{var t,n,r;const s=(null===(t=e.bracket)||void 0===t?void 0:t.getTreeHeight)?e.bracket.getTreeHeight():1,a=(null===(n=e.bracket)||void 0===n?void 0:n.getTreeHeight)?70*Math.pow(2,null===(r=e.bracket)||void 0===r?void 0:r.getTreeHeight()):100,l=150,c=(e,t,n)=>{var r,a;const u={height:30};e.child1;const d=60*Math.pow(2,s-e.height)/2;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{style:{backgroundColor:o.red4,width:l,position:"absolute",top:t,right:n,padding:5,color:"white",boxShadow:`5px 5px ${o.red2}`}},i.default.createElement("div",{style:Object.assign({},u)},i.default.createElement("span",null,null===(r=e.player1)||void 0===r?void 0:r.displayName),i.default.createElement("span",{style:{float:"right"}},e.player1Score)),i.default.createElement("hr",null),i.default.createElement("div",{style:Object.assign({},u)},i.default.createElement("span",null,null===(a=e.player2)||void 0===a?void 0:a.displayName),i.default.createElement("span",{style:{float:"right"}},e.player2Score))),e.child1&&c(e.child1,t-d,n+l+75),e.child2&&c(e.child2,t+d,n+l+75))};return i.default.createElement("div",{style:{margin:"auto"}},i.default.createElement("div",{style:{position:"relative",height:a+60,marginBottom:20,backgroundColor:o.green1,width:225*s,overflowX:"auto"}},c(e.bracket,a/2,37.5)))}},99668:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(672)),o=r(n(67294)),s=r(n(74923));t.default=e=>o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{item:!0,xs:12},o.default.createElement(s.default,{value:e.editTournament.numberOfGamesInSeries,onChange:t=>e.updateTournament("numberOfGamesInSeries",t),numbers:[1,3,5,7],title:"Number of games per series"})))},16635:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(94718)),l=s(n(55435)),c=s(n(672)),u=s(n(89589)),d=o(n(67294)),h=n(66279),f=n(38990),p=s(n(26269)),m=s(n(74957)),g=s(n(14683));t.default=e=>{const[t,n]=(0,d.useState)(!1),[r,i]=(0,d.useState)({});return(0,d.useEffect)((()=>{i(h.BracketTree.Deflatten(e.tournament.flattenBracket,e.tournament.playersIds.length))}),[]),d.default.createElement(d.default.Fragment,null,d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,{variant:"h4"},e.tournament.name," ")),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,{variant:"h6"},"Tournament room")),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(a.default,{onClick:()=>n(!t),variant:"contained",disableElevation:!0},"See settings")),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(l.default,{in:t},d.default.createElement(m.default,{tournament:e.tournament}))),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(p.default,{user:e.user,tournament:e.tournament,editingRanking:!1,players:(0,f.dictToArray)(e.tournament.players),setPlayers:()=>console.log("do nothing")})),d.default.createElement(c.default,{item:!0,xs:12}),d.default.createElement(g.default,{bracket:r}))}},66820:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(672)),o=r(n(67294));t.default=e=>o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{item:!0,xs:12},e.tournament.numberOfGamesInSeries," games per series."))},20819:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(94718)),l=s(n(79540)),c=s(n(672)),u=s(n(89589)),d=o(n(67294)),h=n(72132),f=n(66279),p=n(79061),m=n(38990),g=s(n(14756)),v=s(n(27124)),y=s(n(74957));t.default=e=>{var t,n;const[r,i]=(0,d.useState)([]),[o,s]=(0,d.useState)(!1),[b,w]=(0,d.useState)(e.tournament);return d.default.createElement(d.default.Fragment,null,d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,{variant:"h4"},e.tournament.name," ")),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,{variant:"h6"},"Tournament waiting room")),d.default.createElement(c.default,{xs:12,item:!0},d.default.createElement(u.default,null,"Local tournament")),d.default.createElement(v.default,{tournament:e.tournament,user:e.user,players:r,setPlayers:i}),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(l.default,{variant:"middle"})),o?d.default.createElement(g.default,{user:e.user,tournament:b,updateTournament:(e,t)=>{const n=Object.assign({},b);n[e]=t,w(n)}}):d.default.createElement(y.default,{tournament:e.tournament}),e.tournament.leaderId===(null===(t=e.user)||void 0===t?void 0:t.uid)&&d.default.createElement(d.default.Fragment,null,d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(a.default,{variant:"contained",onClick:()=>{if(o){const e=(0,f.validateCreateTournament)(b);"error"===e.status?h.toast.error(e.message):((0,p.setTournament)(b),s(!o))}else s(!o),w(e.tournament)},color:"info"},o?"Submit edit":"Edit tournament")),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(a.default,{variant:"contained",disabled:o,onClick:()=>{const t=Object.assign(Object.assign({},e.tournament),{players:(0,m.arrayToDict)(r,"uid"),playersIds:r.map((e=>e.uid))}),n=(0,f.validateStartTournament)(t);if("error"===n.status)h.toast.error(n.message);else{console.log("players",r);const e=(0,f.createBracketTree)(r.length);e.populateTree(r);const n=Object.assign(Object.assign({},t),{hasStarted:!0,flattenBracket:e.flatten()});console.log("starting tournament",n),(0,p.setTournament)(n)}}},"Start tournament"))),e.tournament.leaderId!==(null===(n=e.user)||void 0===n?void 0:n.uid)&&d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,null,"Waiting for leader to start tournament")))}},47348:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getTrackLargeImage=void 0;const i=r(n(672)),o=r(n(67294)),s=r(n(81348)),a=r(n(65854)),l=r(n(98267)),c=r(n(28966)),u=r(n(75056)),d=r(n(49889)),h=r(n(13450)),f=r(n(623)),p=r(n(45436)),m=r(n(65206)),g=r(n(48331)),v=r(n(43559)),y=r(n(40314)),b=r(n(58381)),w=r(n(31684)),x=r(n(58488)),_=r(n(57922)),S=r(n(84349)),E=r(n(53156)),T=r(n(80745)),C=r(n(14050)),M=r(n(66196)),k=r(n(54798)),P=r(n(10330)),A=r(n(7377)),I=r(n(54350)),R=r(n(2319)),L=r(n(55119)),O=n(28468),N=r(n(49531)),D=r(n(96967)),F=[{trackName:"f1-track",minImage:w.default,largeImage:d.default},{trackName:"f1-track-2",minImage:b.default,largeImage:u.default},{trackName:"farm-track",minImage:x.default,largeImage:h.default},{trackName:"sea-side-track",minImage:T.default,largeImage:k.default},{trackName:"russia-track",minImage:E.default,largeImage:M.default},{trackName:"ferrari-track",minImage:_.default,largeImage:f.default},{trackName:"spa-track",minImage:C.default,largeImage:P.default},{trackName:"nurn-track",minImage:S.default,largeImage:p.default},{trackName:"basic-track1",minImage:m.default,largeImage:s.default},{trackName:"basic-track2",minImage:g.default,largeImage:a.default},{trackName:"basic-track3",minImage:v.default,largeImage:l.default},{trackName:"basic-track4",minImage:y.default,largeImage:c.default},{trackName:"simple-tag-course",minImage:I.default,largeImage:A.default},{trackName:"basic-tag-course",minImage:L.default,largeImage:R.default}];t.getTrackLargeImage=e=>{for(let t of F)if(t.trackName===e)return t.largeImage};t.default=e=>{const t=(0,O.getTrackInfos)(e.tracks),n=n=>{const r=t.filter((e=>e.category===n));return o.default.createElement(i.default,{container:!0,spacing:1,style:{marginTop:10}},r.map((t=>{var n;const r=(e=>{for(let t of F)if(t.trackName===e)return t.minImage})(t.type);return o.default.createElement(i.default,{key:t.type,item:!0,xs:12,md:6,lg:4},o.default.createElement(N.default,{owned:null===(n=e.ownership)||void 0===n?void 0:n[t.type],selected:t.type===e.selectedTrack,label:t.name,onClick:()=>e.onChange(t.type),thumbnail:o.default.createElement(o.default.Fragment,null,r?o.default.createElement("img",{src:r,style:{width:"auto",maxHeight:120,margin:"auto",display:"block"}}):o.default.createElement("span",null,"No thumbnail"))}))})))};return o.default.createElement(D.default,{defaultTab:0,tabs:O.possibleTrackCategories.map((e=>({label:e.name,renderElement:()=>n(e.category)})))})}},47156:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(60181)),l=s(n(23508)),c=s(n(55435)),u=s(n(42154)),d=s(n(672)),h=s(n(61261)),f=s(n(44025)),p=o(n(67294)),m=n(72132),g=n(23053),v=n(46078),y=n(39547),b=n(87612),w=n(11490),x=n(28468),_=n(38990),S=s(n(50622)),E=s(n(16613));n(22296);const T=s(n(80313)),C=o(n(47348));t.default=e=>{const t=(0,p.useContext)(b.UserContext),[n,r]=(0,p.useState)(!1),[i,o]=(0,p.useState)(e.value),[s,M]=(0,p.useState)(!1),[k,P]=(0,p.useState)(void 0);(0,p.useEffect)((()=>{(null==t?void 0:t.uid)&&(0,v.getOwnership)(t.uid).then((e=>{P(e)})).catch((()=>{m.toast.error("Error getting ownership")}))}),[t]);const A=[];for(let t of x.allTrackNames)t.gameType!==e.gameType||(0,_.itemInArray)(t.type,e.excludedTracks)||A.push(t);const{color:I,backgroundColor:R}=(0,y.getStyledColors)("white");if(e.simpleSelect||!e.store)return p.default.createElement(p.default.Fragment,null,p.default.createElement("span",{className:"select__label",style:{color:R}},"Track"),p.default.createElement(u.default,{fullWidth:e.fullWidth,disabled:e.disabled},p.default.createElement(f.default,{className:"select",style:{backgroundColor:R,color:I,minWidth:200},name:"vehicle",onChange:t=>{e.onChange(t.target.value)},value:e.value},A.map((e=>p.default.createElement(h.default,{key:e.type,value:e.type},e.name))))));let L=(0,C.getTrackLargeImage)(i);const O=()=>k?p.default.createElement(E.default,{loading:s,cost:w.allCosts[i],label:(0,g.getTrackNameFromType)(i),onBuy:()=>{var n;n=i,M(!0),(0,v.buyItem)(t.uid,n).then((t=>{if(t.completed){m.toast.success(t.message);const r=Object.assign({},k);r[n]=!0,P(r);const i=Object.assign(Object.assign({},e.store.tokenData),{coins:e.store.tokenData.coins-w.allCosts[n]});e.store.setTokenData(i),e.onChange(n)}else m.toast.error(t.message);M(!1)}))},owned:k[i],buyButtonText:"track"}):null,N=()=>p.default.createElement(d.default,{container:!0,spacing:1},p.default.createElement(d.default,{item:!0,xs:12,md:6},p.default.createElement(d.default,{container:!0,spacing:1},p.default.createElement(d.default,{item:!0,xs:12},p.default.createElement(T.default,{user:t,store:e.store})),p.default.createElement(d.default,{item:!0,xs:12},p.default.createElement("div",null,L?p.default.createElement("img",{style:{maxWidth:"100%"},src:L}):p.default.createElement("p",null,"No preview available"))),p.default.createElement(d.default,{item:!0,xs:12},O()))),p.default.createElement(d.default,{item:!0,xs:12,md:6},p.default.createElement(C.default,{ownership:k,tracks:"race"===e.gameType?g.activeRaceTrackNames:g.activeTagTrackNames,onChange:t=>{o(t),k[t]&&e.onChange(t)},selectedTrack:i})));return e.buttonToOpen?p.default.createElement(p.default.Fragment,null,p.default.createElement(S.default,{startIcon:n?p.default.createElement(a.default,null):p.default.createElement(l.default,null),onClick:()=>r(!n)},"Track select"),p.default.createElement(c.default,{in:n},N())):N()}},4836:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294)),o=n(23053),s=r(n(23950)),a=r(n(47156)),l=r(n(69306)),c=r(n(672)),u=r(n(20959));t.default=e=>i.default.createElement(s.default,{backgroundContainer:!0},i.default.createElement(c.default,{container:!0,spacing:1},i.default.createElement(c.default,{item:!0,xs:6},i.default.createElement(l.default,null)),i.default.createElement(c.default,{item:!0,xs:6},i.default.createElement(u.default,{label:"Type of game",checked:e.store.gameSettings.gameType,onChange:t=>{const n=Object.assign(Object.assign({},e.store.gameSettings),{gameType:t});e.store.setGameSettings(n)},options:[{label:"Race",value:"race"},{label:"Tag",value:"tag"}]})),i.default.createElement(c.default,{item:!0,xs:12},i.default.createElement(a.default,{gameType:e.store.gameSettings.gameType,excludedTracks:o.nonActiveTrackNames,value:e.store.gameSettings.trackName,onChange:t=>{const n=Object.assign(Object.assign({},e.store.gameSettings),{trackName:t});e.store.setGameSettings(n)},store:e.store}))))},31624:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(672)),l=o(n(67294)),c=n(67205),u={0:{originalValue:1,trophyId:1,trophyName:"First"},1:{owner:"some id",tournamentId:"test id",tournamentName:"test name",originalValue:1,trophyId:1,trophyName:"Snake"},2:{originalValue:1,trophyId:1,trophyName:"Picky"}};t.default=e=>{const t=(0,l.useRef)(),[n,r]=(0,l.useState)({});return(0,l.useEffect)((()=>((0,c.createTrophyRoomCanvas)(e.id).then((n=>{if(console.log("got renderer"),t.current&&n){for(;t.current.children.length>0;)t.current.removeChild(t.current.children[0]);n.domElement.setAttribute("style","max-width:100%;"),t.current.appendChild(n.domElement)}e.id in u&&r(u[e.id])})).catch((e=>{console.warn("error creating trophy room canvas:",e)})),()=>{console.log("component unmounted"),(0,c.removeTrophyRoomCanvas)()})),[]),l.default.createElement(a.default,{container:!0,spacing:3},l.default.createElement(a.default,{item:!0,xs:12},l.default.createElement("div",{ref:t})),l.default.createElement(a.default,{item:!0,xs:12},n.trophyName),l.default.createElement(a.default,{item:!0,xs:12},"Original value ",n.originalValue),n.owner?l.default.createElement(l.default.Fragment,null,l.default.createElement(a.default,{item:!0,xs:12},"Owner: ",n.owner),l.default.createElement(a.default,{item:!0,xs:12},"Won in tournament: ",n.tournamentName)):l.default.createElement(a.default,{item:!0,xs:12},"Unclaimed"))}},2110:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(672)),l=o(n(67294)),c=n(5977),u=s(n(23950)),d=s(n(50622)),h=n(17091),f=s(n(92432)),p=s(n(31624));t.default=e=>{const t=(0,c.useHistory)(),{id:n}=(0,c.useParams)(),[r,i]=(0,l.useState)("");return l.default.createElement(u.default,{backgroundContainer:!0,store:e.store},l.default.createElement(a.default,{container:!0,spacing:3},n?l.default.createElement(a.default,{item:!0,xs:12},l.default.createElement(p.default,{id:n})):l.default.createElement(l.default.Fragment,null,l.default.createElement(a.default,{item:!0,xs:12},l.default.createElement(f.default,{label:"Trophy id",value:r,onChange:e=>i(e.target.value)})),l.default.createElement(a.default,{item:!0,xs:12},l.default.createElement(d.default,{onClick:()=>t.push((0,h.getTrophyRoomPath)(r))},"Go")))))}},67205:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.removeTrophyRoomCanvas=t.createTrophyRoomCanvas=void 0;const i=n(2212),o=n(69365),s=n(1217),a=n(72425),l=e=>r(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>{(new s.GLTFLoader).load((0,a.getStaticPath)(`models/trophies/trophy${e}.glb`),(e=>{let n;for(let t of e.scene.children)if(t.name.includes("trophy")){n=t;break}try{t(n)}catch(e){console.warn("error resolving:",e)}}))}))})),c=e=>{const t=new i.PointLight(16777215,1,10,0);t.castShadow=!0,t.shadow.bias=.01,t.position.set(5,5,5),e.add(t);const n=new i.AmbientLight(16777215,.3);n.position.set(5,5,5),e.add(n)};let u,d;t.createTrophyRoomCanvas=e=>r(void 0,void 0,void 0,(function*(){if(d&&u){d.clear();const t=yield l(e);if(!t)return;return d.add(t),void c(d)}const t=.8*window.innerHeight,n="desktop"===(0,a.getDeviceType)()?window.innerWidth:screen.availWidth;u=new i.WebGLRenderer({antialias:!0}),u.setPixelRatio(window.devicePixelRatio),u.setSize(n,t),u.outputEncoding=i.sRGBEncoding,d=new i.Scene,d.background=new i.Color(12575709),c(d);const r=new i.PerspectiveCamera(40,n/t,1,100);r.position.set(10,5,-15),r.aspect=n/t;const s=new o.OrbitControls(r,u.domElement);s.target.set(0,.5,0),s.update(),s.enablePan=!1,s.enableDamping=!0,r.lookAt(0,0,0);const h=yield l(e);if(!h)return;d.add(h),window.onresize=function(){};r.rotateY(.01);const f=()=>{requestAnimationFrame(f),s.update(),u&&u.render(d,r),h.rotateY(.01)};return f(),u}));t.removeTrophyRoomCanvas=()=>{u.clear(),d.clear(),d=void 0,u=void 0}},46972:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(60316)),l=s(n(7701)),c=s(n(672)),u=s(n(89589)),d=o(n(67294)),h=n(5977),f=n(72132),p=n(21614),m=n(59081),g=n(87612),v=n(28468),y=n(34910),b=n(72425),w=s(n(99959)),x=s(n(50622)),_=s(n(69306)),S=n(17091),E=s(n(92432));t.default=e=>{const t=(0,d.useContext)(g.UserContext),n=(0,h.useHistory)(),[r,i]=(0,d.useState)(""),o="mobile"===(0,b.getDeviceType)(),[s,T]=(0,d.useState)(e.quickConnection),C=(n,i)=>{if(o){if(0===r.length)return void f.toast.error("Player name cannot be empty");if(!i)return void f.toast.error("Room id cannot be undefined");P(i,r,n)}else(n=>{T(!0),n.emit(v.dts_create_room,{data:{gameSettings:e.store.gameSettings,desktopUserId:null==t?void 0:t.uid}}),n.once(v.std_room_created_callback,(t=>{if("success"===t.status){const{roomId:n}=t.data;e.store.setRoomId(n),k(n)}else T(!1),f.toast.error(t.message)}))})(n)},M=t=>{e.store.socket&&e.store.socket.connected?C(e.store.socket,t):(0,y.createSocket)((0,b.getDeviceType)()).then((n=>{e.store.setSocket(n),C(n,t)}))},k=e=>{n.push(S.waitingRoomPath+"/"+e)},P=(n,r,i)=>{var o,s,a;T(!0),console.log("connect to room mobile, store",e.store);const l=e.store.userSettings.vehicleSettings.vehicleType,c=null!==(s=null===(o=e.store.vehiclesSetup)||void 0===o?void 0:o[l])&&void 0!==s?s:{vehicleType:l};i.emit(v.mts_player_connected,{roomId:n.toLowerCase(),playerName:r,playerId:null!==(a=null==t?void 0:t.uid)&&void 0!==a?a:(0,p.v4)(),isAuthenticated:Boolean(t),photoURL:null==t?void 0:t.photoURL,userSettings:e.store.userSettings,vehicleSetup:c}),i.once(v.stm_player_connected_callback,(t=>{if("error"===t.status){const{message:e}=t;T(!1)}else e.store.setGameSettings(t.data.gameSettings),e.store.setPlayer(t.data.player),k(t.data.roomId)}))};return(0,d.useEffect)((()=>{(null==t?void 0:t.displayName)&&i(t.displayName)}),[t]),(0,d.useEffect)((()=>{const t=(0,m.getLocalStorageItem)("roomId");return t&&e.store.setRoomId(t),e.quickConnection&&!o&&M(),()=>{}}),[]),(0,d.useEffect)((()=>()=>{e.store.socket&&(e.store.socket.off(v.stm_player_connected_callback),e.store.socket.off(v.std_room_created_callback))}),[e.store.socket]),s?d.default.createElement(d.default.Fragment,null,d.default.createElement(c.default,{item:!0,xs:12,style:{textAlign:"center"}},d.default.createElement(l.default,null)),d.default.createElement(c.default,{item:!0,xs:12,style:{textAlign:"center"}},d.default.createElement(u.default,null,"Connecting to room..."))):d.default.createElement(d.default.Fragment,null,d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(_.default,null)),o&&d.default.createElement(d.default.Fragment,null,t&&d.default.createElement(c.default,{item:!0,xs:12,sm:12},d.default.createElement(w.default,{store:e.store,connectButtonClicked:M,userId:t.uid})),d.default.createElement(c.default,{item:!0,xs:12,sm:6},d.default.createElement(E.default,{label:"Player Name",value:r,onChange:e=>i(e.target.value),disabled:!!t,fullWidth:!0})),d.default.createElement(c.default,{item:!0,xs:12,sm:6},d.default.createElement(E.default,{fullWidth:!0,label:"Room id",value:e.store.roomId,onChange:t=>e.store.setRoomId(t.target.value)}))),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(x.default,{onClick:()=>M(e.store.roomId),startIcon:d.default.createElement(a.default,null)},o?"Join Game":"Create a Game")))}},76679:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(672)),l=o(n(67294)),c=n(5977),u=n(72425),d=s(n(23950)),h=n(17091),f=s(n(46972));t.default=e=>{const t="desktop"!==(0,u.getDeviceType)(),n=(0,c.useHistory)();(0,l.useEffect)((()=>{e.store.previousPage===h.waitingRoomPath?n.goBack():e.store.setPreviousPage(h.connectPagePath)}),[]);const r=!t&&e.store.previousPage!==h.waitingRoomPath;return l.default.createElement(d.default,{store:e.store},l.default.createElement(a.default,{container:!0,spacing:3},l.default.createElement(f.default,{store:e.store,quickConnection:r})))}},63881:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(50961)),l=s(n(73537)),c=s(n(672)),u=s(n(89589)),d=o(n(67294)),h=n(72132),f=n(21382),p=s(n(50622)),m=s(n(24555)),g=s(n(11632));t.default=e=>{const[t,n]=(0,d.useState)(!0);return!e.onMobile||(0,f.getHasAskedDeviceOrientation)()&&!e.showModal?null:d.default.createElement(g.default,{open:t,onClose:()=>{n(!1)}},d.default.createElement(m.default,null,d.default.createElement(l.default,{subheader:"Orientation permission"}),d.default.createElement(a.default,null,d.default.createElement(c.default,{container:!0,spacing:3},d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,null,"Since you steer with your phone, we need to access the orientation information on your phone. Press the button below to allow this information.")),d.default.createElement(c.default,{item:!0,xs:12,style:{textAlign:"center"}},d.default.createElement(p.default,{onClick:()=>{(0,f.requestDeviceOrientation)(((e,t)=>{e?(n(!1),h.toast.success(t)):h.toast.error(t)})),e.onClose&&e.onClose()}},"Click me!"))))))}},66297:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(60181)),l=s(n(23508)),c=s(n(74113)),u=s(n(55435)),d=s(n(50961)),h=s(n(73537)),f=s(n(89589)),p=o(n(67294)),m=s(n(24555));t.default=()=>{const[e,t]=(0,p.useState)(!1);return p.default.createElement(m.default,{style:{textAlign:"left",maxWidth:500,margin:"auto"}},p.default.createElement(h.default,{onClick:()=>t(!e),subheader:"Rules of tag",action:p.default.createElement(c.default,null,e?p.default.createElement(a.default,null):p.default.createElement(l.default,null))}),p.default.createElement(u.default,{in:e},p.default.createElement(d.default,null,p.default.createElement(f.default,null,"The objective of the game is to collect coins and not be it."),p.default.createElement(f.default,null,"The rules of tag are the following."),p.default.createElement(f.default,null,"One random person begins being it. Everyone will start with a red colored car, excpet the one who is it will be yellow."),p.default.createElement(f.default,null,"Coins are collected by driving into them. The person who is it cannot collect coins."),p.default.createElement(f.default,null,"The person who is it, tags other players by crashing into them. There will be a brief period of time when the person who newly became it cannot tag back, so hurry driving away!"),p.default.createElement(f.default,null,"If a player presses reset, that player becomes it."),p.default.createElement(f.default,null,"The person who collected the most coins wins!"))))}},63591:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(9944)),l=s(n(94718)),c=s(n(79540)),u=s(n(672)),d=s(n(3506)),h=s(n(89589)),f=s(n(92592)),p=o(n(67294)),m=n(5977),g=n(72132),v=n(19421),y=n(39547),b=n(28468),w=n(21382),x=n(72425),_=n(65972),S=s(n(50622)),E=s(n(73090)),T=s(n(69306)),C=n(17091),M=s(n(74741)),k=s(n(3880)),P=s(n(25810)),A=s(n(83129));t.default=e=>{var t,n,r,i;const[o,s]=(0,p.useState)(""),I=(0,m.useHistory)(),R="mobile"===(0,x.getDeviceType)(),L=e.store.previousPage===C.tournamentPagePath,O=e.user,N=e.roomId;(0,p.useEffect)((()=>(R||f.default.toDataURL(window.location.href).then((e=>{s(e)})).catch((e=>{console.log("error generating qr code",e)})),()=>{e.store.socket.off(b.std_start_game_callback)})),[]);const{canStartGame:D,message:F}=(0,v.checkIfCanStartGame)(e.store);return p.default.createElement(u.default,{container:!0,spacing:3},p.default.createElement(u.default,{item:!0,xs:3,md:3,style:{textAlign:"left"}},p.default.createElement(T.default,{color:"white"})),p.default.createElement(u.default,{item:!0,xs:9,md:6},p.default.createElement(h.default,{variant:"h3",className:"center"},"Waiting room")),p.default.createElement(u.default,{item:!0,xs:12,md:3},p.default.createElement(h.default,{variant:"h4"},p.default.createElement("span",{style:{backgroundColor:y.green4,color:"white",position:R?"relative":"absolute",fontSize:64}},N))),(null===(t=e.store.tournament)||void 0===t?void 0:t.id)&&p.default.createElement(u.default,{item:!0,xs:12},p.default.createElement(h.default,null,"This game will be registered in the"," ",e.store.tournament.tournamentType," tournament"," ",p.default.createElement("i",null,e.store.tournament.name))),p.default.createElement(u.default,{item:!0,xs:12},p.default.createElement(c.default,{variant:"middle"})),!R&&p.default.createElement(p.default.Fragment,null,p.default.createElement(u.default,{item:!0,xs:12,lg:3},p.default.createElement(h.default,null,"On your mobile, either scan the QR code, copy the link to room and paste it in your phone or write the room id '",N,"' in input on the front page.")),p.default.createElement(u.default,{item:!0,xs:12,lg:3},p.default.createElement(h.default,{color:"#eee"},"You can press 'esc' to pause the game and open the settings.")),p.default.createElement(u.default,{item:!0,xs:12,lg:3},p.default.createElement(E.default,{infoText:`Link to room: ${window.location.href}`,copyText:window.location.href})),o&&p.default.createElement(u.default,{item:!0,xs:12,lg:3},p.default.createElement("img",{src:o,alt:""})),p.default.createElement(u.default,{item:!0,xs:12},p.default.createElement(c.default,{variant:"middle"}))),L&&p.default.createElement(p.default.Fragment,null,p.default.createElement(u.default,{item:!0,xs:12},p.default.createElement(P.default,{standOut:!0,store:e.store})),p.default.createElement(u.default,{item:!0,xs:12},p.default.createElement(c.default,{variant:"middle"}))),(!R||(null===(n=e.store.player)||void 0===n?void 0:n.isLeader))&&p.default.createElement(p.default.Fragment,null,p.default.createElement(u.default,{item:!0,xs:12},p.default.createElement(S.default,{onClick:()=>{(0,_.socketHandleStartGame)(e.store.socket,(e=>{"success"===e.status?I.push(C.gameRoomPath):g.toast.error(e.message)}))},disabled:!D,color:"white",center:!0,width:200},"Start game")),!D&&p.default.createElement(u.default,{item:!0,xs:12},p.default.createElement(h.default,{color:"error"},F))),p.default.createElement(u.default,{item:!0,xs:12},p.default.createElement(h.default,{variant:"h6",component:"div"},"Players in room ",e.store.roomId)),p.default.createElement(u.default,{item:!0,xs:12},p.default.createElement(A.default,{players:e.store.players,playerId:null===(r=e.store.player)||void 0===r?void 0:r.id,trackName:e.store.gameSettings.trackName,numberOfLaps:e.store.gameSettings.numberOfLaps,gameType:e.store.gameSettings.gameType,user:O})),(!R||(null===(i=e.store.player)||void 0===i?void 0:i.isLeader))&&p.default.createElement(M.default,{store:e.store}),R&&p.default.createElement(u.default,{item:!0,xs:12},p.default.createElement(k.default,{store:e.store,user:O,notInGame:!0,previewVehicle:!0,resetOrientation:()=>{(0,w.requestDeviceOrientation)(((e,t)=>{e||g.toast.error(t)}))}})),p.default.createElement(u.default,{item:!0,xs:12}),!L&&p.default.createElement(u.default,{item:!0,xs:12},p.default.createElement(P.default,{store:e.store})),R&&(0,x.isIphone)()&&p.default.createElement(p.default.Fragment,null,p.default.createElement(u.default,{item:!0,xs:6,sm:6},p.default.createElement(d.default,{title:"To activate the device orientation on iphone the user sometimes needs to press a button to request it. For development purposes this button is here."},p.default.createElement(l.default,{startIcon:p.default.createElement(a.default,null)},"What is this"))),p.default.createElement(u.default,{item:!0,xs:6,sm:6},p.default.createElement(l.default,{variant:"outlined",onClick:()=>(0,w.requestDeviceOrientation)(((e,t)=>{e||g.toast.error(t)}))},"Request device orientation"))))}},41571:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(n(7701)),c=a(n(672)),u=a(n(89589)),d=o(n(67294)),h=n(5977),f=n(72132),p=n(21614),m=n(7735),g=n(59081),v=n(35742),y=n(39547),b=n(87612),w=n(28468);n(86046);const x=n(34910),_=n(72425),S=n(65972),E=n(38990),T=a(n(23950)),C=a(n(50622)),M=a(n(69306)),k=a(n(52783)),P=n(17091),A=a(n(92432)),I=a(n(63881)),R=a(n(63591));let L=[],O="",N={};t.default=e=>{const[t,n]=(0,d.useState)(!0),[r,i]=(0,d.useState)(!1),[o,a]=(0,d.useState)(""),[D,F]=(0,d.useState)(!1),[B,Z]=(0,d.useState)(!1),V=(0,d.useContext)(b.UserContext),z="mobile"===(0,_.getDeviceType)(),U=(0,h.useHistory)(),j=(0,h.useParams)(),H=null==j?void 0:j.roomId,{color:G,backgroundColor:W}=(0,y.getStyledColors)("black"),$=(t,n)=>s(void 0,void 0,void 0,(function*(){var r;F(!0);let o=e.store.userSettings;n&&V&&(o=yield(0,v.getDBUserSettings)(V.uid),e.store.setUserSettings(o)),e.store.socket.emit(w.mts_player_connected,{roomId:H,playerName:t,playerId:null!==(r=null==V?void 0:V.uid)&&void 0!==r?r:(0,p.v4)(),isAuthenticated:Boolean(V),photoURL:null==V?void 0:V.photoURL,userSettings:o}),e.store.socket.once(w.stm_player_connected_callback,(t=>{"success"===t.status?(e.store.setPlayer(t.data.player),e.store.setRoomId(H),e.store.setGameSettings(t.data.gameSettings),e.store.setPlayers(t.data.players),F(!1),i(!1)):(F(!1),U.push(P.frontPagePath))}))}));(0,d.useEffect)((()=>{var t;z&&(V||e.store.player||e.store.socket?e.store.socket&&(e.store.player||$(null!==(t=null==V?void 0:V.displayName)&&void 0!==t?t:"Guest"+Math.floor(20*Math.random()),!0),i(!1)):(0,x.createSocket)((0,_.getDeviceType)()).then((t=>{e.store.setSocket(t),i(!0)})))}),[V,e.store.socket]),(0,d.useEffect)((()=>(z&&(0,g.saveLocalStorageItem)("roomId",H.toLowerCase()),e.store.socket||z||_.inTestMode||U.push(P.frontPagePath),()=>{z||(()=>{var e,t;if(O){const n={desktopId:null!==(e=null==V?void 0:V.uid)&&void 0!==e?e:"undefined",desktopAuthenticated:!!V,roomId:O,gameSettings:N,players:L.map(w.playerInfoToPreGamePlayerInfo),date:(0,E.getDateNow)(),canceledGame:(null===(t=U.location)||void 0===t?void 0:t.pathname)!==P.gameRoomPath};(0,v.saveRoom)(n)}})(),e.store.setPreviousPage(P.waitingRoomPath)})),[]),(0,d.useEffect)((()=>{if(!e.store.socket)return;N=e.store.gameSettings,_.inTestMode||e.store.setPlayers([]);const t=setTimeout((()=>{n(!1)}),1e3);return e.store.socket.on(w.stmd_waiting_room_alert,(({players:t})=>{e.store.setPlayers(t),L=t})),e.store.socket.on(w.stmd_game_starting,(()=>{z?U.push((0,P.getControlsRoomPath)(H)):U.push(P.gameRoomPath)})),z?(e.store.socket.emit(w.mts_connected_to_waiting_room),e.store.socket.on(w.stm_player_info,(t=>{const{player:n}=t;n&&e.store.setPlayer(n)})),e.store.socket.emit(w.mdts_players_in_room,{roomId:H}),e.store.socket.once(w.stmd_players_in_room_callback,(t=>{"error"===t.status?f.toast.error(t.message):e.store.setPlayers(t.data.players)})),e.store.socket.on(w.stmd_game_settings_changed,(t=>{N=t.gameSettings;for(let e of Object.keys(t.gameSettings))(0,m.setLocalGameSetting)(e,t.gameSettings[e]);e.store.setGameSettings(t.gameSettings)})),e.store.socket.on(w.stm_desktop_disconnected,(()=>{f.toast.error("Game disconnected"),U.push(P.frontPagePath)}))):e.store.socket.on(w.std_player_disconnected,(({playerName:e})=>{f.toast.warn(`${e} disconnected from waiting room`)})),()=>{window.clearTimeout(t),e.store.socket.emit(w.mdts_left_waiting_room,{}),e.store.socket.off(w.stmd_game_starting),e.store.socket.off(w.stm_desktop_disconnected),e.store.socket.off(w.stmd_game_settings_changed),e.store.socket.off(w.stmd_waiting_room_alert),e.store.socket.off(w.std_player_disconnected),e.store.socket.off(w.stmd_players_in_room_callback),e.store.socket.off(w.stm_player_connected_callback),e.store.socket.off(w.stm_player_info)}}),[e.store.socket]),(0,d.useEffect)((()=>{if(e.store.userSettings&&e.store.player&&!_.inTestMode){const t=Object.assign(Object.assign({},e.store.player),{vehicleType:e.store.userSettings.vehicleSettings.vehicleType});e.store.setPlayer(t),(0,S.sendPlayerInfoChanged)(e.store.socket,t)}}),[e.store.userSettings]),(0,d.useEffect)((()=>{e.store.gameSettings&&!z&&e.store.setGameSettings(e.store.gameSettings)}),[e.store.gameSettings]),(0,d.useEffect)((()=>{var t;return!z&&e.store.roomId&&(O=null!==(t=e.store.roomId)&&void 0!==t?t:H,V&&(0,v.addToAvailableRooms)(V.uid,{roomId:e.store.roomId,displayName:V.displayName,userId:V.uid})),()=>{V&&!z&&(0,v.removeFromAvailableRooms)(V.uid)}}),[V]);return z||e.store.roomId||_.inTestMode?d.default.createElement(T.default,{store:e.store,backgroundContainer:!0,loading:!e.store.socket},d.default.createElement(d.default.Fragment,null,r?t?null:d.default.createElement(c.default,{container:!0,spacing:3},d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(M.default,{color:"white"})),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(u.default,null,"You are not logged in, please type in your name or log in.")),d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(A.default,{label:"Enter your name",value:o,onChange:e=>a(e.target.value)})),d.default.createElement(c.default,{item:!0,xs:6},d.default.createElement(C.default,{disabled:D,onClick:()=>{let e=o;""===o&&(e="Clown-"+(1e3*Math.random()).toFixed(0),a(e)),Z(!1),$(e),i(!1)}},"Submit")),B?d.default.createElement(c.default,{item:!0,xs:12},d.default.createElement(k.default,{onClose:()=>Z(!1),signInWithPopup:!1})):d.default.createElement(c.default,{item:!0,xs:6},d.default.createElement(C.default,{onClick:()=>{Z(!0)}},"Login"))):d.default.createElement(d.default.Fragment,null,z&&!e.store.player?d.default.createElement("div",{className:"container",style:{marginTop:75,textAlign:"center",margin:"auto"}},d.default.createElement(l.default,null)):d.default.createElement(d.default.Fragment,null,d.default.createElement(R.default,{socket:e.store.socket,store:e.store,user:V,roomId:H}))),d.default.createElement(I.default,{onMobile:z,onIphone:(0,_.isIphone)()}))):(U.push(P.frontPagePath),null)}},83129:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(50961)),l=s(n(73537)),c=s(n(67276)),u=s(n(89589)),d=o(n(67294)),h=n(23053),f=n(12213),p=n(72425),m=n(17246),g=s(n(24555)),v=s(n(13650)),y="mobile"!==(0,p.getDeviceType)(),b=e=>{var t,n,r,i;const[o,s]=(0,d.useState)(-1),f=(null===(t=e.user)||void 0===t?void 0:t.uid)===e.player.id,p=y||f,b={displayName:null===(n=e.user)||void 0===n?void 0:n.displayName,uid:null===(r=e.user)||void 0===r?void 0:r.uid,photoURL:null===(i=e.user)||void 0===i?void 0:i.photoURL},w={displayName:e.player.playerName,uid:e.player.id,photoURL:e.player.photoURL},x=e.player.playerName;return d.default.createElement(g.default,{style:{height:"100%"}},d.default.createElement(l.default,{titleTypographyProps:{fontSize:y?"inherit":12},header:e.player.playerName,title:d.default.createElement("span",{style:{overflowWrap:"anywhere"}},f?d.default.createElement("strong",null,x):x),subheader:(0,m.getVehicleNameFromType)(e.player.vehicleType),action:d.default.createElement(d.default.Fragment,null,e.user&&e.player.isAuthenticated&&d.default.createElement(v.default,{userData:b,otherUserData:w,onlyIcon:!0}))}),"race"===e.gameType&&p&&(()=>{(0,h.getTrackNameFromType)(e.trackName);return d.default.createElement(a.default,null,d.default.createElement(d.default.Fragment,null,e.player.isLeader&&d.default.createElement(u.default,null,d.default.createElement("i",null,"Leader"))))})(),e.player.photoURL?d.default.createElement(c.default,{src:e.player.photoURL,component:"img",style:{height:"50%",width:"auto",margin:"auto"}}):d.default.createElement(a.default,null,d.default.createElement(u.default,null,"No image")))};t.default=e=>{const t=e.players.length,n=Math.min(450,screen.availWidth)-50;let r=y?600:400;return t<=2&&(r/=2),0===e.players.length?d.default.createElement(u.default,null,"No players connected"):d.default.createElement("div",{style:{position:"relative",width:n,height:r,margin:"auto",marginTop:15}},e.players.map(((i,o)=>{let s;s=3===t||1===t?o<t-1?.5:1:.5;const a=100*s,l=100*(t>2?.5:1),c=f.viewLefts[o%2]*n,u=f.viewBottoms[o]*r;return d.default.createElement("div",{key:`playerlist-${o}`,style:{position:"absolute",width:`${a}%`,height:`${l}%`,left:c,bottom:u,border:"1px 1px black solid"}},d.default.createElement(b,{player:i,user:e.user,trackName:e.trackName,numberOfLaps:e.numberOfLaps,gameType:e.gameType}))})))}},14999:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Course=void 0;const i=n(2212),o=n(1217),s=n(72425),a=n(38990),l=n(59711);n(52140);const c=n(82948),u=n(26165),d=n(48620);t.Course=class{constructor(e,t){this.seeThroughObjects=[],this.possibleIntersectObjects=[],this.ray=new i.Raycaster,this.gameScene=e,this.trackName=t,this.gamePhysicsObjects=[],this.spawns=[],this.spawnAligners={},this.checkpointSpawns=[],this.checkpoints=[],this.lights=[],this.rotatingObjects=[],this.engineOffObjects=[],this.breakBlocks=[],this.vehicles=[],this.wagons=[],this.courseItemsLoader=new c.CourseItemsLoader(this),this.isReady=!1,this.clouds=[]}toggleShadows(e){for(let t of this.gamePhysicsObjects)for(let n of Object.keys(u.gameItems))(0,u.keyNameMatch)(n,t.name)&&(t.receiveShadow=e&&u.gameItems[n].receiveShadow,t.castShadow=e&&u.gameItems[n].castsShadow);for(let t of this.lights)t.castShadow=e,e&&(t.shadow.bias=.01)}checkIfObjectOutOfBounds(e){return!1}createCourse(){return r(this,void 0,void 0,(function*(){const e=new o.GLTFLoader(d.courseManager);return new Promise(((t,n)=>r(this,void 0,void 0,(function*(){e.loadAsync((0,s.getStaticPath)(`${this.trackName}.glb`),(e=>{if(e.lengthComputable){const t=e.loaded/e.total;(0,d.setLoaderProgress)(t)}})).then((e=>r(this,void 0,void 0,(function*(){this.gameScene.scene.add(e.scene),this.courseScene=e.scene,this.courseItemsLoader.loadGameItemsToCourse(e),this.ground||console.warn("No ground added to course"),this.addParentCollision(),this.filterAndOrderCheckpoints(),yield this._createCourse(),this.createPossibleIntersectObjectArray(),this.cloudSpeed=[];for(let e of this.clouds)this.cloudSpeed.push(.5*Math.random()+.2);for(let e of Object.keys(this.spawnAligners))this.spawnAligners[e].body&&(console.log("spawn aligner has object",e),this.gameScene.physics.destroy(this.spawnAligners[e]));for(let e of this.spawns)e.body&&this.gameScene.physics.destroy(e);t()}))))}))))}))}createPossibleIntersectObjectArray(){const e=t=>{for(let n of t.children)"Group"===n.type?e(n):"Mesh"!==n.type||n.name.includes("hidden")||(0,a.substrArrayInString)(n.name,c.notSeeThroughObjects)||(n.material=n.material.clone(),n.material.format=i.RGBAFormat,this.possibleIntersectObjects.push(n))};e(this.courseScene)}addParentCollision(){for(let e of this.engineOffObjects)e.body.on.collision(((e,t)=>{if((0,l.isVehicle)(e)){const t=(0,l.getVehicleNumber)(e.name);this.gameScene.vehicles[t].setCanDrive(!1),this.gameScene.vehicles[t].zeroEngineForce()}}));for(let e of this.breakBlocks)e.body.on.collision(((e,t)=>{if((0,l.isVehicle)(e)){const t=(0,l.getVehicleNumber)(e.name);this.gameScene.vehicles[t].setCanDrive(!1),this.gameScene.vehicles[t].zeroEngineForce(),this.gameScene.vehicles[t].break()}}))}filterAndOrderCheckpoints(){const e=[];for(let t of this.checkpoints)t.name.includes("spawn")||t.name.includes("align")||e.push(t),this.checkpoints=e,this.checkpointSpawns.sort(((e,t)=>e.name>t.name?1:-1)),this.checkpoints.sort(((e,t)=>e.name>t.name?1:-1))}_createCourse(){return r(this,void 0,void 0,(function*(){}))}clearCourse(){this.possibleIntersectObjects=[],this.gameScene.scene.remove(this.courseScene);for(let e of this.gamePhysicsObjects)this.gameScene.destroy(e)}restartCourse(){this._restartCourse()}_restartCourse(){}calcSpawnAngle(e,t){const n=t.clone(),r=e.clone(),o=Math.atan2(r.x-n.x,r.z-n.z);return(new i.Quaternion).setFromEuler(new i.Euler(0,o,0,"XYZ"))}timeout(e=5){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{setTimeout((()=>{t()}),1e3*e)}))}))}setStartPositions(e){var t,n,r;let i;this.sAlign?i=this.sAlign.position:"goal-align"in this.spawnAligners&&(i=this.spawnAligners["goal-align"].position);let o=this.spawns.filter((e=>!e.name.includes("checkpoint-spawn")&&"goal-spawn"!==e.name&&!e.name.includes("align")));if(o.length>=e.length){let n=o;n.sort(((e,t)=>e.name<t.name?-1:1));let r=[];for(let e=0;e<n.length;e++){const t=`align${e+1}`;t in this.spawnAligners&&(i=this.spawnAligners[t].position),r.push({spawn:n[e].position,align:i})}r=r.slice(0,e.length),(0,a.shuffleArray)(r);for(let n=0;n<e.length;n++){const o=r[n].spawn,s=r[n].spawn;let a=null!==(t=r[n].align)&&void 0!==t?t:i;i?e[n].setCheckpointPositionRotation({position:o,rotation:this.calcSpawnAngle(a,o)}):e[n].setCheckpointPositionRotation({position:o,rotation:{x:0,z:0,y:s.y}}),e[n].resetPosition(),e[n].stop()}}else{const t=this.startPosition,o=this.startRotation,s=null!==(r=null===(n=this.startPosition)||void 0===n?void 0:n.y)&&void 0!==r?r:2;let a=[],l=1;for(let n=0;n<e.length;n++)l*=-1,n%2!=0&&(l+=5*Math.sign(l)),a.push({x:t.x+l-5,y:s,z:t.z+l-5});for(let t=0;t<e.length;t++){const n=Math.floor(Math.random()*a.length),r=a[n];a.splice(n,1),i?e[t].setCheckpointPositionRotation({position:r,rotation:this.calcSpawnAngle(i,r)}):e[t].setCheckpointPositionRotation({position:r,rotation:{x:0,y:o.y,z:0}}),e[t].resetPosition(),e[t].stop()}}}getCheckpointPositionRotation(e){const t=this.checkpointSpawns[e-1].position,n=`checkpoint-align${e}`;if(n in this.spawnAligners){const e=this.spawnAligners[n].position;return{position:t,rotation:this.calcSpawnAngle(e,t)}}return{position:t,rotation:this.checkpointSpawns[e-1].rotation}}removeTransparentObjects(){for(let e of this.seeThroughObjects)e.material.transparent=!1;this.seeThroughObjects=[]}makeObjectTransparent(e){e.material.transparent||(e.material.transparent=!0,e.material.opacity=.5,this.seeThroughObjects.push(e))}seeObject(e,t){this.removeTransparentObjects(),this.ray.far=e.distanceTo(t),this.ray.set(e.clone(),t.clone()),this.ray.ray.lookAt(t.clone());const n=this.ray.intersectObjects(this.possibleIntersectObjects);for(let e=0;e<n.length;e++)this.makeObjectTransparent(n[e].object)}updateCourse(){if("high"===this.gameScene.gameSettings.graphics){for(let e of this.rotatingObjects)e.object.rotateX(e.speed);for(let e=0;e<this.clouds.length;e++){const t=this.clouds[e];if(t.position.setX(t.position.x+this.cloudSpeed[e]),t.position.x>this.ground.position.x+this.ground.scale.x+100){t.position.setX(-(this.ground.position.x+this.ground.scale.x+100));const e=this.ground.position.z+this.ground.scale.z;t.position.setZ(Math.random()*e*2-e),t.rotateY(180*Math.random())}}}this._updateCourse()}_updateCourse(){}}},82948:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notSeeThroughObjects=exports.CourseItemsLoader=void 0;const three_1=__webpack_require__(2212),theme_1=__webpack_require__(39547);__webpack_require__(52140);const GameItems_1=__webpack_require__(26165);let waterTextures;class CourseItemsLoader{constructor(e){this.course=e}handleCreateLight(e){if(e.visible=!1,"low"!==this.course.gameScene.gameSettings.graphics&&!e.name.includes("ghost")){let t=e.name.split("_")[0],n=100;isNaN(+t)||(n=+t);const r=new three_1.PointLight(theme_1.yellow2,1,n,1);this.course.lights.push(r);const i=e.position;r.position.set(i.x,i.y,i.z),this.course.gameScene.useShadows&&(r.castShadow=!0,r.shadow.bias=.01),this.course.gameScene.add.existing(r)}}handleCreateWater(e){if("high"===this.course.gameScene.gameSettings.graphics){const t=e;if(waterTextures)t.visible=!1,this.course.gameScene.misc.water({y:t.position.y,x:t.position.x,z:t.position.z,width:2*t.scale.z,height:2*t.scale.x,normalMap0:waterTextures[0],normalMap1:waterTextures[1]});else{Promise.all([this.course.gameScene.load.texture("/textures/Water_1_M_Normal.jpg"),this.course.gameScene.load.texture("/textures/Water_2_M_Normal.jpg")]).then((e=>{e[0].needsUpdate=!1,e[1].needsUpdate=!1,waterTextures=e,e[0].matrixAutoUpdate=!1,e[1].matrixAutoUpdate=!1,t.visible=!0,e[0].rotation=Math.PI/2,e[1].rotation=Math.PI/2,e[1].flipY=!1,e[0].flipY=!1;const n=new three_1.Matrix3;n.set(1,1,1,1,1,1,1,1,1),e[0].matrix=n,e[0].updateMatrix(),e[1].matrix=n,e[1].updateMatrix();let r=Math.max(2*t.scale.x,2*t.scale.z);r=Math.ceil(Math.log2(r)),r=Math.pow(2,r),this.course.gameScene.misc.water({y:t.position.y+.1,x:t.position.x,z:t.position.z,width:r,height:r,normalMap0:e[0],normalMap1:e[1]})})).catch((e=>{console.warn("Error loading water texture",e)}))}}}handleCreateBreakable(e,t){var n;console.warn("Creating breakable objects not supported yet"),e.breakable=!0;let r=e.name.split("_")[0],i=null!==(n=GameItems_1.gameItems[t].fractureImpulse)&&void 0!==n?n:5;isNaN(+r)||(i=+r),e.body.on.collision(((e,t)=>{})),e.fractureImpulse=i,e.body.setCollisionFlags(3),e.body.breakable=!0}getMassFromName(e){let t=e.split("-");return isNaN(+t[0])?void 0:+t[0]}handleCreatePhysicsObject(e,t){var n;const r=e;let i=null!==(n=this.getMassFromName(e.name))&&void 0!==n?n:GameItems_1.gameItems[t].mass;this.course.gameScene.physics.add.existing(r,{collisionFlags:GameItems_1.gameItems[t].collisionFlags,shape:GameItems_1.gameItems[t].shape,mass:i}),r.castShadow=this.course.gameScene.useShadows&&Boolean(GameItems_1.gameItems[t].castsShadow),r.receiveShadow=this.course.gameScene.useShadows&&Boolean(GameItems_1.gameItems[t].receiveShadow),r.body.checkCollisions=!0,GameItems_1.gameItems[t].bounciness&&r.body.setBounciness(GameItems_1.gameItems[t].bounciness),GameItems_1.gameItems[t].friction&&r.body.setFriction(GameItems_1.gameItems[t].friction),GameItems_1.gameItems[t].gravityY&&r.body.setGravity(0,GameItems_1.gameItems[t].gravityY,0),e.name.includes("hidden")&&(e.visible=!1),e.name.includes("breakable")&&this.handleCreateBreakable(r,t),this.course.gamePhysicsObjects.push(r)}handleAddCourseObject(child,key){if(GameItems_1.gameItems[key].objectName||console.warn(`Object with key '${key}' is course object but doesn't have an object name`),GameItems_1.gameItems[key].isCourseObjectArray){const code=`this.course.${GameItems_1.gameItems[key].objectName}.push(child)`;eval(code)}else if(GameItems_1.gameItems[key].isCourseObjectDict){const code=`this.course.${GameItems_1.gameItems[key].objectName}["${child.name}"] = child`;eval(code)}else{const code=`this.course.${GameItems_1.gameItems[key].objectName} = child`;eval(code)}}loadGameItemsToCourse(e){const t=Object.keys(GameItems_1.gameItems);for(let n of e.scene.children)if(n.name.includes("_light"))this.handleCreateLight(n);else if("Mesh"===n.type||"Group"===n.type){if(n.name.includes("rotate")){const e=isNaN(+n.name.split("_")[0])?Math.PI/120:Math.PI/+n.name.split("_")[0];this.course.rotatingObjects.push({object:n,speed:e})}if(n.name.includes("ghost"));else if(n.name.includes("softbody"))console.warn("soft body doesnt work");else{for(let e of t)(0,GameItems_1.keyNameMatch)(e,n.name)&&(n.layers.enable(1),n.visible=!Boolean(GameItems_1.gameItems[e].notVisible),Boolean(GameItems_1.gameItems[e].notAddPhysics)||this.handleCreatePhysicsObject(n,e),n.name.includes("water")&&this.handleCreateWater(n),(GameItems_1.gameItems[e].isCourseObject||GameItems_1.gameItems[e].isCourseObjectArray||GameItems_1.gameItems[e].isCourseObjectDict)&&this.handleAddCourseObject(n,e));n.name.includes("spawn")&&!n.name.includes("align")&&(this.course.spawns.push(n),n.visible=!1)}}}}exports.CourseItemsLoader=CourseItemsLoader,exports.notSeeThroughObjects=["spawn","align","crops","scarecrow","field","sheep"]},26165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWagonTypeFromName=t.getVehicleTypeFromName=t.keyNameMatch=t.gameItems=void 0;const r=n(28468),i=n(85053),o=.05,s=.1;t.gameItems={ground:{collisionFlags:1,shape:"concave",receiveShadow:!0,bounciness:.05,isCourseObject:!0,objectName:"ground",friction:3},snow:{collisionFlags:1,shape:"concave",receiveShadow:!0,bounciness:.05,isCourseObject:!0,objectName:"ground",friction:.7},road:{collisionFlags:1,shape:"concave",receiveShadow:!0,bounciness:.05,friction:3},"checkered-flag":{collisionFlags:1,shape:"convex"},checkpoint:{collisionFlags:5,shape:"convex",isCourseObject:!0,castsShadow:!1,receiveShadow:!0,objectName:"checkpoints",isCourseObjectArray:!0},goal:{collisionFlags:5,shape:"convex",isCourseObject:!0,exactMatch:!0,objectName:"goal",castsShadow:!1,receiveShadow:!0},tree:{collisionFlags:1,shape:"concave",castsShadow:!1,bounciness:s},cactus:{collisionFlags:1,shape:"concave",castsShadow:!1,bounciness:s},pine:{collisionFlags:1,shape:"concave",castsShadow:!1,bounciness:s},leaf:{collisionFlags:1,shape:"concave",castsShadow:!1,bounciness:s},"checkpoint-spawn":{collisionFlags:-1,shape:"concave",notAddPhysics:!0,isCourseObject:!0,objectName:"checkpointSpawns",isCourseObjectArray:!0},"goal-spawn":{collisionFlags:-1,shape:"concave",notAddPhysics:!0,isCourseObject:!0,exactMatch:!0,objectName:"goalSpawn"},bridge:{collisionFlags:1,shape:"concave"},"pavement-marking":{collisionFlags:5,shape:"concave",receiveShadow:!0},fence:{collisionFlags:1,shape:"concave",castsShadow:!1,bounciness:1,fractureImpulse:5},wall:{collisionFlags:1,shape:"concave",castsShadow:!1,bounciness:o},rock:{collisionFlags:1,shape:"convex",bounciness:o,castsShadow:!1},barn:{collisionFlags:1,shape:"concave",bounciness:o,castsShadow:!1,receiveShadow:!0},house:{collisionFlags:1,shape:"concave",bounciness:o,castsShadow:!1,receiveShadow:!0},"traffic-cone":{collisionFlags:0,shape:"convex",bounciness:.5,castsShadow:!0,receiveShadow:!1,mass:2,notAddPhysics:!1,gravityY:-50},water:{collisionFlags:5,shape:"concave"},"row-boat":{collisionFlags:1,shape:"concave",bounciness:o,castsShadow:!1},coin:{collisionFlags:6,shape:"concave",isCourseObject:!0,castsShadow:!0,objectName:"coinModel",notAddPhysics:!0,notVisible:!0,exactMatch:!0},"coin-point":{collisionFlags:6,shape:"concave",notAddPhysics:!0,notVisible:!0,isCourseObjectArray:!0,objectName:"coinPoints"},cloud:{collisionFlags:6,shape:"concave",notAddPhysics:!0,isCourseObjectArray:!0,objectName:"clouds"},stadium:{collisionFlags:1,shape:"concave"},ramp:{collisionFlags:1,shape:"concave",bounciness:0},"s-align":{collisionFlags:1,shape:"concave",notAddPhysics:!0,isCourseObject:!0,objectName:"sAlign",notVisible:!0},align:{collisionFlags:-1,shape:"concave",notAddPhysics:!0,isCourseObjectDict:!0,objectName:"spawnAligners",notVisible:!0},towel:{collisionFlags:1,shape:"convex"},"engine-off":{collisionFlags:5,shape:"concave",isCourseObjectArray:!0,objectName:"engineOffObjects"},"break-block":{collisionFlags:5,shape:"concave",isCourseObjectArray:!0,objectName:"breakBlocks"},vehicle:{shape:"concave",collisionFlags:5,notAddPhysics:!0,isCourseObjectArray:!0,objectName:"vehicles"},wagon:{shape:"concave",collisionFlags:5,notAddPhysics:!0,isCourseObjectArray:!0,objectName:"wagons"}};t.keyNameMatch=(e,n)=>t.gameItems[e].exactMatch?e===n:n.includes(e);t.getVehicleTypeFromName=e=>{for(let t of r.allVehicleTypes)if(e.includes(t.type))return t.type};t.getWagonTypeFromName=e=>{for(let t of i.allWagonTypes)if(e.includes(t.type))return t.type}},55284:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RaceCourse=void 0;const i=n(14999);class o extends i.Course{constructor(e,t,n,r){super(e,t),this.checkpointSpawns=[],this.checkpoints=[],this.goalCrossedCallback=n,this.checkpointCrossedCallback=r}_createCourse(){return r(this,void 0,void 0,(function*(){this.setupCollisionListeners()}))}getNumberOfCheckpoints(){return this.checkpoints.length}setupCollisionListeners(){var e;if(this.goal)try{this.goal.body.on.collision(((e,t)=>{"vehicle"===e.name.slice(0,7)&&this.goalCrossedCallback(e)}))}catch(e){console.warn("No goal object")}if(this.checkpoints)for(let t of this.checkpoints){let n=null!==(e=+t.name.slice("checkpoint".length,"checkpoint".length+1))&&void 0!==e?e:1;0===n&&(n=1),t.body.on.collision(((e,t)=>{"vehicle"===e.name.slice(0,7)&&this.checkpointCrossedCallback(e,n)}))}this.goalSpawn?(this.startPosition=this.goalSpawn.position,this.startRotation=this.goalSpawn.rotation):this.spawns.length>0&&(this.startPosition=this.spawns[0].position,this.startRotation=this.spawns[0].rotation)}checkIfVechileCrossedGoal(e){this.goal}getGoalCheckpoint(){const e=this.goalSpawn.position,t="goal-align";if(t in this.spawnAligners){const n=this.spawnAligners[t].position;return{position:e,rotation:this.calcSpawnAngle(n,e)}}return{position:e,rotation:{x:0,y:this.goalSpawn.rotation.y,z:0}}}}t.RaceCourse=o},39861:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StoryCourse=void 0;const i=n(2212),o=n(14999),s=n(26165);class a extends o.Course{constructor(e,t){super(e,t)}_createCourse(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>r(this,void 0,void 0,(function*(){yield this._createCourseObjects(),e()}))))}))}_createCourseObjects(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>r(this,void 0,void 0,(function*(){yield Promise.all([this.createCourseVehicles(),this.createCourseWagons()]),e()}))))}))}createCourseVehicles(){return r(this,void 0,void 0,(function*(){const e=[];let t=[],n=[];for(let r of this.vehicles){r.visible=!1;const o=(0,s.getVehicleTypeFromName)(r.name);o?(t.push(r.position),n.push((new i.Quaternion).setFromEuler(r.rotation)),e.push(o)):console.warn("Unknown vehicle type in name",r.name)}this.gameScene.createExtraVehicles(e,t,n)}))}createCourseWagons(){return r(this,void 0,void 0,(function*(){const e=[],t=[],n=[];for(let r of this.wagons){r.visible=!1;const o=(0,s.getWagonTypeFromName)(r.name);o?(t.push(r.position),n.push((new i.Quaternion).setFromEuler(r.rotation)),e.push(o)):console.warn("Unknown vehicle type in name",r.name)}this.gameScene.createWagons(e,t,n)}))}}t.StoryCourse=a},87626:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TagCourse=t.Coin=t.chocolateColor=t.freezeColor=t.notItColor=t.itColor=void 0;const i=n(2212),o=n(14999);t.itColor="#FF8000",t.notItColor="#8B0000",t.freezeColor=1935943,t.chocolateColor=6420266;class s{constructor(e,t,n,r){this.number=t,this.coinCollidedCallback=n,this.deleteCallback=r,this.model=e.clone(),this.model.visible=!0,this.model.castShadow=!0,this.model.receiveShadow=!1,this.model.name=`coin-${this.number}`,this.destroyed,this.ry=0,this.dry=.02}addToScene(e){e.add.existing(this.model),e.physics.add.existing(this.model,{shape:"convex"}),this.model.body.setCollisionFlags(6),this.model.body.needUpdate=!0,this.model.body.on.collision(((e,t)=>{this.destroyed||"vehicle"!==e.name.slice(0,7)||this.coinCollidedCallback(e.name,this)}))}removeFromScene(e){var t;this.destroyed=!0;e.scene.getObjectByName(this.model.name);(null===(t=this.model)||void 0===t?void 0:t.body)&&(this.model.body.checkCollisions=!1,this.model.clear(),e.destroy(this.model),this.deleteCallback(this))}setPosition(e,t,n){this.model.position.set(e,t,n)}setPositionOfObject(e){const t=e.position;this.setPosition(t.x,t.y,t.z)}update(){this.model.rotation.y=this.ry,this.ry+=this.dry,this.model.body.needUpdate=!0}}t.Coin=s;class a extends o.Course{constructor(e,t,n){super(e,t),this.coinCollidedCallback=n,this.startPosition=new i.Vector3(2,2,3),this.startRotation=new i.Euler(0,Math.PI,0),this.coins=[],this.coinPoints=[]}deleteCoin(e){const t=this.coins.indexOf(e);this.coins.splice(t,1)}coinsFinished(){return 0===this.coins.length}setupGameObjects(){const e=this.coins.length;let t=0;for(;t<e;)this.coins[0].removeFromScene(this.gameScene),t+=1;this.coins=[],t=0;for(let e of this.coinPoints){const n=new s(this.coinModel,t,this.coinCollidedCallback,(e=>this.deleteCoin(e)));n.setPositionOfObject(e),n.addToScene(this.gameScene),this.coins.push(n),t+=1}}_createCourse(){return r(this,void 0,void 0,(function*(){this.setupGameObjects()}))}_updateCourse(){for(let e of this.coins);}}t.TagCourse=a},48620:function(e,t,n){"use strict";this&&this.__awaiter;Object.defineProperty(t,"__esModule",{value:!0}),t.setLoaderProgress=t.courseManager=void 0;const r=n(2212),i=n(72425);n(18361);const o=document.createElement("div"),s=document.createElement("div"),a=document.createElement("div"),l=document.createElement("div");"desktop"===(0,i.getDeviceType)()&&(o.classList.add("hide"),document.body.appendChild(o),o.setAttribute("id","loading-screen"),o.setAttribute("class","game-text"),o.setAttribute("style","z-index:999; "),o.appendChild(s),s.classList.add("loading-screen__text"),a.classList.add("loading-bar__container"),l.classList.add("loading-bar__inner"),a.appendChild(l),o.appendChild(a)),t.courseManager=new r.LoadingManager;const c=["Lock the orientation of your mobile phone.","The leader can change tracks, using the settings on the mobile.","The leader can restart a game from the mobile.","If the game is lagging, plug in your computer and close all other tabs."];Math.floor(Math.random()*c.length);t.courseManager.onStart=(e,t,n)=>{};let u=0;t.setLoaderProgress=e=>{u=e,e>0&&e<1&&(s.innerHTML="Loading game files",o.classList.add("show"),l.setAttribute("style",`width:${200*u}px`)),e>=1&&o.classList.remove("show")},t.courseManager.onProgress=(e,t,n)=>{},t.courseManager.onLoad=()=>{}},2127:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.speedTestPath=t.mobileOnlyPath=void 0;const a=o(n(67294)),l=s(n(73935)),c=n(73727),u=n(72132),d=n(7735),h=n(86568),f=o(n(87612)),p=s(n(88450)),m=s(n(62445)),g=s(n(8864)),v=n(34910),y=n(72425),b=n(8377);t.mobileOnlyPath="/mobileonly",t.speedTestPath="/speedtest";l.default.render(a.default.createElement((()=>{(0,a.useContext)(f.UserContext);const[e,n]=(0,a.useState)(void 0),[r,i]=(0,a.useState)("testRoom"),[o,s]=(0,a.useState)([]),[l,w]=(0,a.useState)(void 0),[x,_]=(0,a.useState)(h.defaultUserSettings),[S,E]=(0,a.useState)(d.defaultGameSettings),[T,C]=(0,a.useState)(void 0),[M,k]=(0,a.useState)(void 0),[P,A]=(0,a.useState)(void 0),[I,R]=(0,a.useState)(""),L=(0,y.getDeviceType)(),[O,N]=(0,a.useState)(b.defaultVehiclesSetup),D="mobile"===L;(0,a.useEffect)((()=>{(0,v.createSocket)(L,"test").then((e=>n(e)));const e=(0,d.getAllLocalGameSettings)();F.setGameSettings(e)}),[]),(0,a.useEffect)((()=>{var e;const t=null!==(e=window.localStorage.getItem("vehicleType"))&&void 0!==e?e:"normal2",n=Object.assign(Object.assign({},x.vehicleSettings),{vehicleType:t}),r=Object.assign(Object.assign({},x),{vehicleSettings:n});_(r)}),[]);const F={roomId:r,setRoomId:i,players:o,setPlayers:s,player:l,setPlayer:w,gameSettings:S,setGameSettings:E,userSettings:x,setUserSettings:_,socket:e,setSocket:n,tournament:P,setTournament:A,activeBracketNode:M,setActiveBracketNode:k,previousPage:I,setPreviousPage:R,tokenData:T,setTokenData:C,vehiclesSetup:O,setVehiclesSetup:N};return a.default.createElement(a.default.Fragment,null,a.default.createElement(f.default,null,a.default.createElement(c.BrowserRouter,{basename:"/"},a.default.createElement(c.Switch,null,a.default.createElement(c.Route,{path:t.mobileOnlyPath,render:()=>a.default.createElement(p.default,{store:F})}),a.default.createElement(c.Route,{path:"/test",render:()=>a.default.createElement(g.default,{onMobile:D,store:F})}),a.default.createElement(c.Route,{path:t.speedTestPath,render:()=>a.default.createElement(m.default,null)})))),a.default.createElement(u.ToastContainer,{limit:3,pauseOnFocusLoss:!1}))}),null),document.getElementById("root"))},33576:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(67294));t.default=()=>i.default.createElement("div",{style:{width:"90%",margin:"auto"}},i.default.createElement("h1",null,"Privacy Policy"),i.default.createElement("p",null,"Last updated: April 12, 2021"),i.default.createElement("p",null,"This Privacy Policy describes Our policies and procedures on the collection, use and disclosure of Your information when You use the Service and tells You about Your privacy rights and how the law protects You."),i.default.createElement("p",null,"We use Your Personal data to provide and improve the Service. By using the Service, You agree to the collection and use of information in accordance with this Privacy Policy. This Privacy Policy has been created with the help of the",i.default.createElement("a",{href:"https://www.termsfeed.com/privacy-policy-generator/",target:"_blank"},"Privacy Policy Generator"),"."),i.default.createElement("h1",null,"Interpretation and Definitions"),i.default.createElement("h2",null,"Interpretation"),i.default.createElement("p",null,"The words of which the initial letter is capitalized have meanings defined under the following conditions. The following definitions shall have the same meaning regardless of whether they appear in singular or in plural."),i.default.createElement("h2",null,"Definitions"),i.default.createElement("p",null,"For the purposes of this Privacy Policy:"),i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Account")," means a unique account created for You to access our Service or parts of our Service.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Company"),' (referred to as either "the Company", "We", "Us" or "Our" in this Agreement) refers to Collisio.')),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Cookies")," are small files that are placed on Your computer, mobile device or any other device by a website, containing the details of Your browsing history on that website among its many uses.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Country")," refers to: Iceland")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Device")," means any device that can access the Service such as a computer, a cellphone or a digital tablet.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Personal Data")," is any information that relates to an identified or identifiable individual.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Service")," refers to the Website.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Service Provider")," means any natural or legal person who processes the data on behalf of the Company. It refers to third-party companies or individuals employed by the Company to facilitate the Service, to provide the Service on behalf of the Company, to perform services related to the Service or to assist the Company in analyzing how the Service is used.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Third-party Social Media Service")," refers to any website or any social network website through which a User can log in or create an account to use the Service.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Usage Data")," refers to data collected automatically, either generated by the use of the Service or from the Service infrastructure itself (for example, the duration of a page visit).")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Website")," refers to Collisio, accessible from",i.default.createElement("a",{href:"https://www.collisio.club",rel:"external nofollow noopener",target:"_blank"},"https://www.collisio.club"))),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"You")," means the individual accessing or using the Service, or the company, or other legal entity on behalf of which such individual is accessing or using the Service, as applicable."))),i.default.createElement("h1",null,"Collecting and Using Your Personal Data"),i.default.createElement("h2",null,"Types of Data Collected"),i.default.createElement("h3",null,"Personal Data"),i.default.createElement("p",null,"While using Our Service, We may ask You to provide Us with certain personally identifiable information that can be used to contact or identify You. Personally identifiable information may include, but is not limited to:"),i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement("p",null,"Email address")),i.default.createElement("li",null,i.default.createElement("p",null,"First name and last name")),i.default.createElement("li",null,i.default.createElement("p",null,"Usage Data")),i.default.createElement("li",null,i.default.createElement("p",null,"Anything the user posts."))),i.default.createElement("h3",null,"Usage Data"),i.default.createElement("p",null,"Usage Data is collected automatically when using the Service."),i.default.createElement("p",null,"Usage Data may include information such as Your Device's Internet Protocol address (e.g. IP address), browser type, browser version, the pages of our Service that You visit, the time and date of Your visit, the time spent on those pages, unique device identifiers and other diagnostic data."),i.default.createElement("p",null,"When You access the Service by or through a mobile device, We may collect certain information automatically, including, but not limited to, the type of mobile device You use, Your mobile device unique ID, the IP address of Your mobile device, Your mobile operating system, the type of mobile Internet browser You use, unique device identifiers and other diagnostic data."),i.default.createElement("p",null,"We may also collect information that Your browser sends whenever You visit our Service or when You access the Service by or through a mobile device."),i.default.createElement("h3",null,"Tracking Technologies and Cookies"),i.default.createElement("p",null,"We use Cookies and similar tracking technologies to track the activity on Our Service and store certain information. Tracking technologies used are beacons, tags, and scripts to collect and track information and to improve and analyze Our Service. The technologies We use may include:"),i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement("strong",null,"Cookies or Browser Cookies.")," A cookie is a small file placed on Your Device. You can instruct Your browser to refuse all Cookies or to indicate when a Cookie is being sent. However, if You do not accept Cookies, You may not be able to use some parts of our Service. Unless you have adjusted Your browser setting so that it will refuse Cookies, our Service may use Cookies."),i.default.createElement("li",null,i.default.createElement("strong",null,"Flash Cookies."),' Certain features of our Service may use local stored objects (or Flash Cookies) to collect and store information about Your preferences or Your activity on our Service. Flash Cookies are not managed by the same browser settings as those used for Browser Cookies. For more information on how You can delete Flash Cookies, please read "Where can I change the settings for disabling, or deleting local shared objects?" available at',i.default.createElement("a",{href:"https://helpx.adobe.com/flash-player/kb/disable-local-shared-objects-flash.html#main_Where_can_I_change_the_settings_for_disabling__or_deleting_local_shared_objects_",rel:"external nofollow noopener",target:"_blank"},"https://helpx.adobe.com/flash-player/kb/disable-local-shared-objects-flash.html#main_Where_can_I_change_the_settings_for_disabling__or_deleting_local_shared_objects_")),i.default.createElement("li",null,i.default.createElement("strong",null,"Web Beacons.")," Certain sections of our Service and our emails may contain small electronic files known as web beacons (also referred to as clear gifs, pixel tags, and single-pixel gifs) that permit the Company, for example, to count users who have visited those pages or opened an email and for other related website statistics (for example, recording the popularity of a certain section and verifying system and server integrity).")),i.default.createElement("p",null,'Cookies can be "Persistent" or "Session" Cookies. Persistent Cookies remain on Your personal computer or mobile device when You go offline, while Session Cookies are deleted as soon as You close Your web browser. You can learn more about cookies here:',i.default.createElement("a",{href:"https://www.termsfeed.com/blog/cookies/",target:"_blank"},"All About Cookies by TermsFeed"),"."),i.default.createElement("p",null,"We use both Session and Persistent Cookies for the purposes set out below:"),i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Necessary / Essential Cookies")),i.default.createElement("p",null,"Type: Session Cookies"),i.default.createElement("p",null,"Administered by: Us"),i.default.createElement("p",null,"Purpose: These Cookies are essential to provide You with services available through the Website and to enable You to use some of its features. They help to authenticate users and prevent fraudulent use of user accounts. Without these Cookies, the services that You have asked for cannot be provided, and We only use these Cookies to provide You with those services.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Cookies Policy / Notice Acceptance Cookies")),i.default.createElement("p",null,"Type: Persistent Cookies"),i.default.createElement("p",null,"Administered by: Us"),i.default.createElement("p",null,"Purpose: These Cookies identify if users have accepted the use of cookies on the Website.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"Functionality Cookies")),i.default.createElement("p",null,"Type: Persistent Cookies"),i.default.createElement("p",null,"Administered by: Us"),i.default.createElement("p",null,"Purpose: These Cookies allow us to remember choices You make when You use the Website, such as remembering your login details or language preference. The purpose of these Cookies is to provide You with a more personal experience and to avoid You having to re-enter your preferences every time You use the Website."))),i.default.createElement("p",null,"For more information about the cookies we use and your choices regarding cookies, please visit our Cookies Policy or the Cookies section of our Privacy Policy."),i.default.createElement("h2",null,"Use of Your Personal Data"),i.default.createElement("p",null,"The Company may use Personal Data for the following purposes:"),i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"To provide and maintain our Service"),", including to monitor the usage of our Service.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"To manage Your Account:")," to manage Your registration as a user of the Service. The Personal Data You provide can give You access to different functionalities of the Service that are available to You as a registered user.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"For the performance of a contract:")," the development, compliance and undertaking of the purchase contract for the products, items or services You have purchased or of any other contract with Us through the Service.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"To contact You:")," To contact You by email, telephone calls, SMS, or other equivalent forms of electronic communication, such as a mobile application's push notifications regarding updates or informative communications related to the functionalities, products or contracted services, including the security updates, when necessary or reasonable for their implementation.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"To provide You")," with news, special offers and general information about other goods, services and events which we offer that are similar to those that you have already purchased or enquired about unless You have opted not to receive such information.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"To manage Your requests:")," To attend and manage Your requests to Us.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"For business transfers:")," We may use Your information to evaluate or conduct a merger, divestiture, restructuring, reorganization, dissolution, or other sale or transfer of some or all of Our assets, whether as a going concern or as part of bankruptcy, liquidation, or similar proceeding, in which Personal Data held by Us about our Service users is among the assets transferred.")),i.default.createElement("li",null,i.default.createElement("p",null,i.default.createElement("strong",null,"For other purposes"),": We may use Your information for other purposes, such as data analysis, identifying usage trends, determining the effectiveness of our promotional campaigns and to evaluate and improve our Service, products, services, marketing and your experience."))),i.default.createElement("p",null,"We may share Your personal information in the following situations:"),i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement("strong",null,"With Service Providers:")," We may share Your personal information with Service Providers to monitor and analyze the use of our Service, to contact You."),i.default.createElement("li",null,i.default.createElement("strong",null,"For business transfers:")," We may share or transfer Your personal information in connection with, or during negotiations of, any merger, sale of Company assets, financing, or acquisition of all or a portion of Our business to another company."),i.default.createElement("li",null,i.default.createElement("strong",null,"With Affiliates:")," We may share Your information with Our affiliates, in which case we will require those affiliates to honor this Privacy Policy. Affiliates include Our parent company and any other subsidiaries, joint venture partners or other companies that We control or that are under common control with Us."),i.default.createElement("li",null,i.default.createElement("strong",null,"With business partners:")," We may share Your information with Our business partners to offer You certain products, services or promotions."),i.default.createElement("li",null,i.default.createElement("strong",null,"With other users:")," when You share personal information or otherwise interact in the public areas with other users, such information may be viewed by all users and may be publicly distributed outside. If You interact with other users or register through a Third-Party Social Media Service, Your contacts on the Third-Party Social Media Service may see Your name, profile, pictures and description of Your activity. Similarly, other users will be able to view descriptions of Your activity, communicate with You and view Your profile."),i.default.createElement("li",null,i.default.createElement("strong",null,"With Your consent"),": We may disclose Your personal information for any other purpose with Your consent.")),i.default.createElement("h2",null,"Retention of Your Personal Data"),i.default.createElement("p",null,"The Company will retain Your Personal Data only for as long as is necessary for the purposes set out in this Privacy Policy. We will retain and use Your Personal Data to the extent necessary to comply with our legal obligations (for example, if we are required to retain your data to comply with applicable laws), resolve disputes, and enforce our legal agreements and policies."),i.default.createElement("p",null,"The Company will also retain Usage Data for internal analysis purposes. Usage Data is generally retained for a shorter period of time, except when this data is used to strengthen the security or to improve the functionality of Our Service, or We are legally obligated to retain this data for longer time periods."),i.default.createElement("h2",null,"Transfer of Your Personal Data"),i.default.createElement("p",null,"Your information, including Personal Data, is processed at the Company's operating offices and in any other places where the parties involved in the processing are located. It means that this information may be transferred to  and maintained on  computers located outside of Your state, province, country or other governmental jurisdiction where the data protection laws may differ than those from Your jurisdiction."),i.default.createElement("p",null,"Your consent to this Privacy Policy followed by Your submission of such information represents Your agreement to that transfer."),i.default.createElement("p",null,"The Company will take all steps reasonably necessary to ensure that Your data is treated securely and in accordance with this Privacy Policy and no transfer of Your Personal Data will take place to an organization or a country unless there are adequate controls in place including the security of Your data and other personal information."),i.default.createElement("h2",null,"Disclosure of Your Personal Data"),i.default.createElement("h3",null,"Business Transactions"),i.default.createElement("p",null,"If the Company is involved in a merger, acquisition or asset sale, Your Personal Data may be transferred. We will provide notice before Your Personal Data is transferred and becomes subject to a different Privacy Policy."),i.default.createElement("h3",null,"Law enforcement"),i.default.createElement("p",null,"Under certain circumstances, the Company may be required to disclose Your Personal Data if required to do so by law or in response to valid requests by public authorities (e.g. a court or a government agency)."),i.default.createElement("h3",null,"Other legal requirements"),i.default.createElement("p",null,"The Company may disclose Your Personal Data in the good faith belief that such action is necessary to:"),i.default.createElement("ul",null,i.default.createElement("li",null,"Comply with a legal obligation"),i.default.createElement("li",null,"Protect and defend the rights or property of the Company"),i.default.createElement("li",null,"Prevent or investigate possible wrongdoing in connection with the Service"),i.default.createElement("li",null,"Protect the personal safety of Users of the Service or the public"),i.default.createElement("li",null,"Protect against legal liability")),i.default.createElement("h2",null,"Security of Your Personal Data"),i.default.createElement("p",null,"The security of Your Personal Data is important to Us, but remember that no method of transmission over the Internet, or method of electronic storage is 100% secure. While We strive to use commercially acceptable means to protect Your Personal Data, We cannot guarantee its absolute security."),i.default.createElement("h1",null,"Children's Privacy"),i.default.createElement("p",null,"Our Service does not address anyone under the age of 13. We do not knowingly collect personally identifiable information from anyone under the age of 13. If You are a parent or guardian and You are aware that Your child has provided Us with Personal Data, please contact Us. If We become aware that We have collected Personal Data from anyone under the age of 13 without verification of parental consent, We take steps to remove that information from Our servers."),i.default.createElement("p",null,"If We need to rely on consent as a legal basis for processing Your information and Your country requires consent from a parent, We may require Your parent's consent before We collect and use that information."),i.default.createElement("h1",null,"Links to Other Websites"),i.default.createElement("p",null,"Our Service may contain links to other websites that are not operated by Us. If You click on a third party link, You will be directed to that third party's site. We strongly advise You to review the Privacy Policy of every site You visit."),i.default.createElement("p",null,"We have no control over and assume no responsibility for the content, privacy policies or practices of any third party sites or services."),i.default.createElement("h1",null,"Changes to this Privacy Policy"),i.default.createElement("p",null,"We may update Our Privacy Policy from time to time. We will notify You of any changes by posting the new Privacy Policy on this page."),i.default.createElement("p",null,'We will let You know via email and/or a prominent notice on Our Service, prior to the change becoming effective and update the "Last updated" date at the top of this Privacy Policy.'),i.default.createElement("p",null,"You are advised to review this Privacy Policy periodically for any changes. Changes to this Privacy Policy are effective when they are posted on this page."),i.default.createElement("h1",null,"Contact Us"),i.default.createElement("p",null,"If you have any questions about this Privacy Policy, You can contact us:"),i.default.createElement("ul",null,i.default.createElement("li",null,"By email: hugiholm1@gmail.com")))},78978:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFirebaseConfig=void 0;const r=n(72425);t.getFirebaseConfig=()=>({apiKey:"AIzaSyA3kmeXdI7yRSig8rGsD9G4io7KuYiOweY",authDomain:"race-game-a4327.firebaseapp.com",projectId:"race-game-a4327",storageBucket:"race-game-a4327.appspot.com",messagingSenderId:"478150429920",appId:"1:478150429920:web:a66c473eddb7501f2c5485",measurementId:"G-H6VEJHFZ8H",databaseURL:r.inDevelopment?"http://localhost:9000?ns=emulatorui":"https://race-game-a4327-default-rtdb.europe-west1.firebasedatabase.app"})},98059:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.signOut=t.signInWithEmail=t.createAccountWithEmail=t.signInWithFacebook=t.signInWithGoogle=t.auth=t.firestore=t.storage=void 0;const r=n(90774),i=n(15503),o=n(16690),s=n(96257);n(33404);const a=n(72132),l=n(72425),c=n(78978),u=(0,i.initializeApp)((0,c.getFirebaseConfig)());t.storage=(0,r.getStorage)(u);t.firestore=(l.inDevelopment,(0,s.getFirestore)(u)),l.inDevelopment&&(0,s.connectFirestoreEmulator)(t.firestore,"localhost",8e3),t.auth=(0,o.getAuth)(u),(0,o.getRedirectResult)(t.auth).then((e=>{})).catch((e=>{console.warn("error getting redirect res",e)}));const d=new o.GoogleAuthProvider,h=new o.FacebookAuthProvider;t.signInWithGoogle=e=>{e?(0,o.signInWithPopup)(t.auth,d).then((e=>{})).catch((e=>{a.toast.error("Error logging in with Google."),console.warn("error logging in",e)})):(0,o.signInWithRedirect)(t.auth,d).then((e=>{})).catch((e=>{a.toast.error("Error logging in with Google."),console.warn("error logging in",e)}))};t.signInWithFacebook=()=>{(0,o.signInWithRedirect)(t.auth,h).then((e=>{})).catch((e=>{a.toast.error("Error logging in with Facebook. "+e.message),console.warn("error logging in",e)}))};t.createAccountWithEmail=(e,n,r)=>{(0,o.createUserWithEmailAndPassword)(t.auth,e,n).then((e=>{e.user.uid;(0,o.updateProfile)(t.auth.currentUser,{displayName:r}),setTimeout((()=>{window.location.reload()}),200)})).catch((e=>{a.toast.error("Error creating account with email "+e.message),console.warn("Error creating account with email",e)}))};t.signInWithEmail=(e,n,r)=>{(0,o.signInWithEmailAndPassword)(t.auth,e,n).then((e=>{e.user;r("success","Successfully signed in.")})).catch((e=>{e.code;const t=e.message;r("error",t),console.warn("error signing in with email",e)}))};t.signOut=e=>{t.auth.signOut().then((()=>{e()}))}},12743:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getFastestGhostFilename=t.getTournamentGhost=t.downloadGhost=t.uploadTournamentGhost=t.uploadGhost=void 0;const i=n(90774),o=n(98059),s=n(92891),a=n(79061);t.uploadGhost=(e,t)=>{const n=(0,i.ref)(o.storage,"ghost/"+e),r=new Blob([t.join("\n")],{type:"text/plain"});(0,i.uploadBytes)(n,r).then((t=>{console.log("Uploaded ghost:",e)})).catch((e=>{console.warn("Error uploading ghost:",e)}))};t.uploadTournamentGhost=(e,n,r)=>{(0,a.getTorunamentBestTime)(e).then((i=>{(!i||r<i)&&((0,t.uploadGhost)("tournament/"+e,n),(0,a.setTorunamentBestTime)(e,r)),console.log(" the best time:",i,"total time:",r)})).catch((e=>{console.warn("Error getting best time:",e)}))};t.downloadGhost=e=>new Promise(((t,n)=>{const s=(0,i.ref)(o.storage,"ghost/"+e);console.log("downloading ghost",e),(0,i.getBlob)(s).then((e=>r(void 0,void 0,void 0,(function*(){console.log("Got ghost",e);const n=yield new Response(e).text();t(n.split("\n"))})))).catch((e=>{switch(console.warn("Error getting ghost:",e),e.code){case"storage/object-not-found":n("Ghost does not exist.");break;case"storage/unauthorized":n("Unauthorized");break;case"storage/canceled":n("Rejected");break;default:n()}}))}));t.getTournamentGhost=e=>r(void 0,void 0,void 0,(function*(){return new Promise(((n,i)=>r(void 0,void 0,void 0,(function*(){(0,t.downloadGhost)("tournament/"+e).then((e=>{n(e)})).catch((e=>{console.warn("error getting tournament ghost",e),i(e)}))}))))}));t.getFastestGhostFilename=(e,t)=>new Promise(((n,i)=>r(void 0,void 0,void 0,(function*(){const r=yield(0,s.getBestScoresOnTrackAndLap)(e,t,0,5);if(console.log("best scores",r),!r)return void n(void 0);let i,o=1/0;for(let e of r)e.recordingFilename&&o>e.totalTime&&(i=e.recordingFilename,o=e.totalTime);console.log("best score and bestscore file",o,i),n(i)}))))},35742:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getUserTokens=t.getDBUserSettings=t.setDBUserSettings=t.create10AvailableRoomsListeners=t.getAllAvailableRooms=t.removeFromAvailableRooms=t.addToAvailableRooms=t.saveRoom=t.getUserSocials=t.getOnlineFollowings=t.getUserFollowings=t.getUserFollowers=t.isUserFollower=t.removeFollow=t.addFollow=t.getFirestorePublicUser=t.setFirestorePublicUser=t.setFirestorePrivateUser=void 0;const i=n(83680),o=n(96257),s=n(21614),a=n(68445),l=n(98059),c="users",u="profiles",d="socials",h="followers",f="followings",p="availableRooms";t.setFirestorePrivateUser=e=>r(void 0,void 0,void 0,(function*(){try{yield(0,o.setDoc)((0,i.doc)(l.firestore,c,e.uid),e,{merge:!0})}catch(e){console.warn("Error adding document:",e)}}));t.setFirestorePublicUser=e=>r(void 0,void 0,void 0,(function*(){try{yield(0,o.setDoc)((0,i.doc)(l.firestore,u,e.uid),e,{merge:!0,mergeFields:["latestLogin"]})}catch(e){console.warn("Error adding document:",e)}}));t.getFirestorePublicUser=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=(0,i.doc)(l.firestore,u,e),r=yield(0,i.getDoc)(n);r.exists()?t({status:"success",message:"Successfully got user's public profile",data:r.data()}):t({status:"error",message:"User's public profile does not exist",data:void 0})}));t.addFollow=(e,t,n,s)=>r(void 0,void 0,void 0,(function*(){try{yield(0,o.setDoc)((0,i.doc)(l.firestore,d,e,f,n),s)}catch(e){console.warn("Error adding following:",e)}try{yield(0,o.setDoc)((0,i.doc)(l.firestore,d,n,h,e),t)}catch(e){console.warn("Error adding follower:",e)}}));t.removeFollow=(e,t)=>r(void 0,void 0,void 0,(function*(){try{yield(0,i.deleteDoc)((0,i.doc)(l.firestore,d,e,f,t))}catch(e){console.warn("Error deleting following:",e)}try{yield(0,i.deleteDoc)((0,i.doc)(l.firestore,d,t,h,e))}catch(e){console.warn("Error deleting follower:",e)}}));t.isUserFollower=(e,t,n)=>(0,o.onSnapshot)((0,i.doc)(l.firestore,d,e,f,t),{includeMetadataChanges:!0},(e=>{e.exists()?n(!0):n(!1)}));t.getUserFollowers=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=(0,o.collection)(l.firestore,d,e,h);try{const e=yield(0,i.getDocs)(n),r=[];e.forEach((e=>{r.push(e.data())})),t(r)}catch(e){console.warn("Error getting user followers:",e)}}));t.getUserFollowings=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=(0,o.collection)(l.firestore,d,e,f),r=[];try{(yield(0,i.getDocs)(n)).forEach((e=>{r.push(e.data())})),t(r)}catch(e){console.warn("Error getting user followings:",e)}return r}));t.getOnlineFollowings=e=>r(void 0,void 0,void 0,(function*(){return console.warn("GET ONLINE FOLLOWINGS NOT IMPLEMENTED"),new Promise(((e,t)=>{}))}));t.getUserSocials=(e,n,i)=>r(void 0,void 0,void 0,(function*(){(0,t.getUserFollowers)(e,(e=>n(e))),(0,t.getUserFollowings)(e,(e=>i(e)))}));t.saveRoom=e=>{const t=(0,s.v4)(),n=(0,i.doc)(l.firestore,"roomData",t);(0,o.setDoc)(n,e).catch((e=>{console.warn("Error saving room:",e)}))};t.addToAvailableRooms=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=(0,i.doc)(l.firestore,p,e);try{yield(0,o.setDoc)(n,t)}catch(e){console.warn("Error adding available room:",e)}}));t.removeFromAvailableRooms=e=>{const t=(0,i.doc)(l.firestore,p,e);(0,i.deleteDoc)(t)};t.getAllAvailableRooms=e=>r(void 0,void 0,void 0,(function*(){return new Promise(((n,s)=>r(void 0,void 0,void 0,(function*(){let s=(yield(0,t.getUserFollowings)(e,(e=>{}))).map((e=>e.uid));s=s.concat(e);const a=(0,o.collection)(l.firestore,p);let c=[];try{for(;s.length;){const e=s.splice(0,10);c.push(new Promise((t=>r(void 0,void 0,void 0,(function*(){const n=yield(0,i.getDocs)((0,o.query)(a,(0,i.where)("userId","in",e))),r=[];n.forEach((e=>r.push(e.data()))),t(r)})))))}Promise.all(c).then((e=>{n(e.flat())}))}catch(e){console.warn("Error getting rooms:",e)}}))))}));t.create10AvailableRoomsListeners=(e,n)=>r(void 0,void 0,void 0,(function*(){let r=(yield(0,t.getUserFollowings)(e,(e=>{}))).map((e=>e.uid));r=r.concat(e),console.warn("fids length needs a fix createAvailableRoomsListeners"),r.length>10&&(r=r.slice(r.length-10,r.length));const s=(0,o.query)((0,o.collection)(l.firestore,p),(0,i.where)("userId","in",r));return(0,o.onSnapshot)(s,(e=>{const t=[];e.forEach((e=>{t.push(e.data())})),n(t)}))}));t.setDBUserSettings=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=(0,i.doc)(l.firestore,c,e);(0,o.setDoc)(n,{settings:t},{merge:!0})}));t.getDBUserSettings=e=>r(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>r(void 0,void 0,void 0,(function*(){const r=(0,i.doc)(l.firestore,c,e),o=yield(0,i.getDoc)(r);if(o.exists()){const e=o.data().settings;t(e)}else n(void 0)}))))}));t.getUserTokens=e=>r(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>{const r=(0,i.doc)(l.firestore,"tokens",e);(0,i.getDoc)(r).then((e=>{e.exists?t(Object.assign(Object.assign({},a.defaultTokenData),e.data())):t(a.defaultTokenData)})).catch((e=>{console.warn("Error getting user tokens",e),t(a.defaultTokenData)}))}))}))},92891:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBestScore=t.deletePlayerGameData=t.getPlayerGameDataListener=t.getBestScoresOnTrackAndLap=t.getPlayerBestScores=t.saveRaceDataGame=t.saveRaceData=t.saveBestRaceData=t.getPlayerBestScoreOnTrackAndLap=void 0;const i=n(83680),o=n(38990),s=n(98059),a=n(79061),l="bestHighscores",c="bestSpecialHighscores",u="allHighscores";t.getPlayerBestScoreOnTrackAndLap=(e,t,n,o)=>new Promise(((a,u)=>r(void 0,void 0,void 0,(function*(){const r=o?c:l,u=(0,i.collection)(s.firestore,r),d=(0,i.query)(u,(0,i.where)("playerId","==",e),(0,i.where)("trackName","==",t),(0,i.where)("numberOfLaps","==",n),(0,i.orderBy)("totalTime","desc"),(0,i.limit)(1)),h=yield(0,i.getDocs)(d);h.empty?a(void 0):h.forEach((e=>{e.exists()?a(e.data()):a(void 0)}))}))));const d=["simpleCylindar","simpleSphere"];t.saveBestRaceData=(e,n)=>r(void 0,void 0,void 0,(function*(){return new Promise(((r,a)=>{let u=!1;const h=[],f=(0,o.itemInArray)(n.vehicleType,d),p=f?c:l;(0,t.getPlayerBestScoreOnTrackAndLap)(e,n.trackName,n.numberOfLaps,f).then((t=>{const o=(0,i.doc)(s.firestore,p,`${e}#${n.trackName}#${n.numberOfLaps}`),l=()=>{(0,i.setDoc)(o,n).then((()=>{})).catch((e=>{console.warn("Error saving best score",e),a()}))};n.totalTime<(null==t?void 0:t.totalTime)?(u=!0,l(),h.push(`${n.playerName} set a personal best time.`)):(null==t?void 0:t.totalTime)?h.push(`${n.playerName} was ${(n.totalTime-t.totalTime).toFixed(2)} sec from setting a PB.`):(l(),u=!0,h.push(`${n.playerName} raced this track and number-of-laps combination for the first time.`)),r([u,h])}))}))}));const h=(e,t)=>`${e}#${t}`;t.saveRaceData=(e,n)=>r(void 0,void 0,void 0,(function*(){return new Promise(((o,l)=>r(void 0,void 0,void 0,(function*(){(0,a.saveTournamentRaceDataPlayer)(n);let r=[];const c=(0,i.doc)(s.firestore,u,h(e,n.gameId));(0,i.setDoc)(c,n).then((()=>{})).catch((e=>{console.warn("error saving race",e)}));const d=yield(0,t.getBestScoresOnTrackAndLap)(n.trackName,n.numberOfLaps,0,3);if(d&&d.length>0){let e=-1;for(let t=0;t<d.length;t++)if(n.totalTime<d[t].totalTime){e=t+1;break}-1!==e&&r.push(`${n.playerName}'s time was number ${e} of all time`),r.push(`${n.playerName}'s time was ${(n.totalTime-d[0].totalTime).toFixed(2)} sec from the all time best record.`)}else r.push(`${n.playerName} set a all time best record!`);(0,t.saveBestRaceData)(e,n).then((([e,t])=>{r=r.concat(t),console.log("Set personal best",e),o([e,r])})).catch((e=>{console.warn("Error saving data",e),l()}))}))))}));t.saveRaceDataGame=(e,t,n)=>r(void 0,void 0,void 0,(function*(){(0,a.saveTournamentRaceGame)(e,n,t);const r=(0,i.doc)(s.firestore,"allGames",e.gameId);try{yield(0,i.setDoc)(r,e)}catch(e){console.warn("Error saving race:",e)}}));t.getPlayerBestScores=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=(0,i.collection)(s.firestore,l),r=(0,i.query)(n,(0,i.where)("playerId","==",e)),o=yield(0,i.getDocs)(r);if(o.empty)t(void 0);else{const e=[];o.forEach((t=>{e.push(t.data())})),t(e)}}));t.getBestScoresOnTrackAndLap=(e,t,n,o)=>r(void 0,void 0,void 0,(function*(){return new Promise(((a,c)=>r(void 0,void 0,void 0,(function*(){const r=(0,i.collection)(s.firestore,l),c=(0,i.query)(r,(0,i.where)("trackName","==",e),(0,i.where)("numberOfLaps","==",t),(0,i.orderBy)("totalTime","asc"),(0,i.startAt)(n),(0,i.limit)(o)),u=[];(yield(0,i.getDocs)(c)).forEach((e=>{const t=e.data();u.push(t)})),console.log("arr",u),a(u)}))))}));t.getPlayerGameDataListener=(e,t)=>{const n=(0,i.collection)(s.firestore,u),r=(0,i.query)(n,(0,i.where)("playerId","==",e));return(0,i.onSnapshot)(r,(e=>{const n=[];e.forEach((e=>{n.push(e.data())})),t(n)}))};t.deletePlayerGameData=(e,t)=>{const n=(0,i.doc)(s.firestore,u,h(e,t));(0,i.deleteDoc)(n).then((()=>{})).catch((e=>{console.warn("Error deleting game",e)}))};t.deleteBestScore=(e,t,n)=>(console.log("`${playerId}#${trackName}#${numberOfLaps}`",`${e}#${t}#${n}`),new Promise(((r,o)=>{const a=(0,i.doc)(s.firestore,l,`${e}#${t}#${n}`);(0,i.deleteDoc)(a).then((()=>{r()})).catch((e=>{console.warn("Error deleting game",e)}))})))},46078:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getUserMedals=t.buyItem=t.setDBVehiclesSetup=t.getVehiclesSetup=t.getVehicleItemsOwnership=t.getOwnership=void 0;const i=n(83680),o=n(11490),s=n(81135),a=n(8377),l=n(98059),c="ownership",u="vehicleSetup";t.getOwnership=e=>new Promise(((t,n)=>r(void 0,void 0,void 0,(function*(){let r=(0,o.getDefaultOwnership)();const s=(0,i.doc)(l.firestore,c,e);try{const n=yield(0,i.getDoc)(s);n.exists()?r=Object.assign(Object.assign({},r),n.data()):(e=>{const t={method:"POST",mode:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})};fetch("/defaultownership",t)})(e),t(r)}catch(e){console.warn("Error getting ownership of vehicles",e),n()}}))));t.getVehicleItemsOwnership=(e,t)=>new Promise(((n,o)=>r(void 0,void 0,void 0,(function*(){let r=(0,s.getDefaultItemsOwnership)(t);const o=(0,i.doc)(l.firestore,c,e,"itemOwnership",t);try{const e=yield(0,i.getDoc)(o);e.exists()&&(r=Object.assign(Object.assign({},r),e.data())),n(r)}catch(e){console.warn("Error getting items ownership",e),n(r)}}))));t.getVehiclesSetup=e=>new Promise(((t,n)=>r(void 0,void 0,void 0,(function*(){let r=a.defaultVehiclesSetup;const o=(0,i.doc)(l.firestore,u,e);try{const e=yield(0,i.getDoc)(o);e.exists()&&(r=Object.assign(Object.assign({},r),e.data())),t(r)}catch(e){console.warn("Error getting vehicle setup",e),n()}}))));t.setDBVehiclesSetup=(e,t)=>new Promise(((n,r)=>{const o=(0,i.doc)(l.firestore,u,e);(0,i.setDoc)(o,t).then((()=>{n()})).catch((e=>{console.warn("Error setting vehicle setup",e)}))}));t.buyItem=(e,t,n)=>new Promise(((r,i)=>{const o={method:"POST",mode:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,item:t,vehicleType:n})};fetch("/buyitem",o).then((e=>e.json())).then((e=>{r(e)}))}));t.getUserMedals=e=>new Promise(((t,n)=>r(void 0,void 0,void 0,(function*(){const n=(0,i.doc)(l.firestore,"medals",e),r=yield(0,i.getDoc)(n);r.exists()?t(r.data()):t(void 0)}))))},79061:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.setTorunamentBestTime=t.getTorunamentBestTime=t.getTournamentWithId=t.saveTournamentRaceGame=t.saveTournamentRaceDataPlayer=t.getAllUserTournaments=t.getPreviousTournaments=t.getActiveTournaments=t.getAvailableTournaments=t.getAvailableTournamentsListener=t.updatePlayersInTournament=t.getPlayersInTournamentListener=t.leaveTournament=t.joinTournament=t.createGetTournametListener=t.deleteTournament=t.setTournament=void 0;const i=n(83680),o=n(66279),s=n(98059),a=n(35742),l="tournaments",c="players";t.setTournament=e=>r(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>r(void 0,void 0,void 0,(function*(){console.log("tournament to add",e);try{yield(0,i.setDoc)((0,i.doc)(s.firestore,l,e.id),e),t()}catch(e){console.warn("Error creating tournament:",e),n()}}))))}));t.deleteTournament=e=>new Promise(((t,n)=>r(void 0,void 0,void 0,(function*(){try{yield(0,i.deleteDoc)((0,i.doc)(s.firestore,l,e)),t()}catch(e){console.warn("Error creating tournament:",e),n()}}))));t.createGetTournametListener=(e,t)=>{const n=(0,i.doc)(s.firestore,l,e);let r;try{r=(0,i.onSnapshot)(n,(e=>{var n,r,i,o;if(e.exists()){const s=e.data();if("global"===(null==s?void 0:s.tournamentType)){const e=s;(null===(n=e.tournamentStart)||void 0===n?void 0:n.seconds)&&(e.tournamentStart=null===(r=e.tournamentStart)||void 0===r?void 0:r.toDate()),(null===(i=e.tournamentEnd)||void 0===i?void 0:i.seconds)&&(e.tournamentEnd=null===(o=e.tournamentEnd)||void 0===o?void 0:o.toDate()),t(e)}else t(e.data())}else t(void 0)}),(e=>{console.warn("Error getting tournament:",e)}))}catch(e){console.warn("error getting tournament listener",e)}return r};t.joinTournament=(e,t)=>new Promise(((n,o)=>r(void 0,void 0,void 0,(function*(){const r=(0,i.doc)(s.firestore,l,t,c,e.uid);try{const t=Object.assign(Object.assign({},e),{ranking:-1});yield(0,i.setDoc)(r,t),console.log("joined tournament"),n()}catch(e){console.log("Error joining tournament:",e),o()}}))));t.leaveTournament=(e,t)=>new Promise(((n,o)=>r(void 0,void 0,void 0,(function*(){const r=(0,i.doc)(s.firestore,l,t,c,e.uid);try{yield(0,i.deleteDoc)(r),n()}catch(e){console.log("Error joining tournament:",e),o()}}))));t.getPlayersInTournamentListener=(e,t)=>{const n=(0,i.collection)(s.firestore,l,e,c);let r;try{r=(0,i.onSnapshot)(n,(e=>{if(e.empty)t([]);else{const n=[];e.forEach((e=>{n.push(e.data())})),t(n)}}),(e=>{console.warn("Error getting players in tournement:",e),t([])}))}catch(e){console.warn("Error getting players in tournament:",e)}return r};t.updatePlayersInTournament=(e,t)=>{const n={};for(let e of t)n[e.uid]=e;const r=(0,i.writeBatch)(s.firestore);t.forEach((t=>{const n=(0,i.doc)(s.firestore,l,e,c,t.uid);r.set(n,t,{merge:!0})})),r.commit().then((()=>{console.log("successfully commited players batch")})).catch((e=>{console.warn("Error updating players:",e)}))};t.getAvailableTournamentsListener=(e,t)=>r(void 0,void 0,void 0,(function*(){let n=(yield(0,a.getUserFollowings)(e,(e=>{}))).map((e=>e.uid));n=n.concat(e),console.warn("fids length needs a fix getAvailableTournamentsListener"),n.length>10&&(n=n.slice(n.length-10,n.length));const r=(0,i.query)((0,i.collection)(s.firestore,l),(0,i.where)("leaderId","in",n),(0,i.where)("hasStarted","==",!1),(0,i.where)("isFinished","==",!1));return(0,i.onSnapshot)(r,(e=>{const n=[];e.forEach((e=>{n.push(e.data())})),t(n)}),(e=>{console.warn("Error getting available tournaments:",e)}))}));t.getAvailableTournaments=e=>r(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>r(void 0,void 0,void 0,(function*(){let n=(yield(0,a.getUserFollowings)(e,(e=>{}))).map((e=>e.uid));n=n.concat(e);const o=(0,i.collection)(s.firestore,l);let c=[];try{for(;n.length;){const e=n.splice(0,10);c.push(new Promise((t=>r(void 0,void 0,void 0,(function*(){const n=yield(0,i.getDocs)((0,i.query)(o,(0,i.where)("leaderId","in",e),(0,i.where)("hasStarted","==",!1),(0,i.where)("isFinished","==",!1))),r=[];n.forEach((e=>r.push(e.data()))),t(r)})))))}Promise.all(c).then((e=>{t(e.flat())}))}catch(e){console.warn("Error getting rooms:",e)}}))))}));t.getActiveTournaments=e=>r(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>r(void 0,void 0,void 0,(function*(){console.log("userId",e);const r=(0,i.query)((0,i.collection)(s.firestore,l),(0,i.where)("playersIds","array-contains",e),(0,i.where)("isFinished","==",!1),(0,i.where)("hasStarted","==",!0));try{const e=yield(0,i.getDocs)(r),n=[];e.forEach((e=>{n.push(e.data())})),t(n)}catch(e){n(),console.warn("Error getting active tournaments:",e)}}))))}));t.getPreviousTournaments=e=>r(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>r(void 0,void 0,void 0,(function*(){console.log("userId",e);const r=(0,i.query)((0,i.collection)(s.firestore,l),(0,i.where)("playersIds","array-contains",e),(0,i.where)("isFinished","==",!0));try{const e=yield(0,i.getDocs)(r),n=[];e.forEach((e=>{n.push(e.data())})),t(n)}catch(e){n(),console.warn("Error getting active tournaments:",e)}}))))}));t.getAllUserTournaments=e=>r(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>r(void 0,void 0,void 0,(function*(){const r=(0,i.query)((0,i.collection)(s.firestore,l),(0,i.where)(e,"==","leaderId"));try{const e=yield(0,i.getDocs)(r),n=[];e.forEach((e=>{n.push(e.data())})),t(n)}catch(e){console.warn("Error getting all user tournaments"),n()}}))))}));t.saveTournamentRaceDataPlayer=e=>r(void 0,void 0,void 0,(function*(){if(console.log("saving to tournament",e),e.tournamentId&&e.isAuthenticated){const t=(0,i.doc)(s.firestore,l,e.tournamentId,c,e.playerId),n={vehicleType:e.vehicleType,totalTime:e.totalTime,lapTimes:e.lapTimes};console.log("single race",n);try{yield(0,i.updateDoc)(t,{raceData:(0,i.arrayUnion)(n)})}catch(e){console.warn("Error adding values to tournament:",e)}}else console.log("No tournament id and not saving tournament")}));t.saveTournamentRaceGame=(e,t,n)=>{e.gameSettings.tournamentId?t?u(e,t,n):n({isFinished:!1,message:"Global tournament going on.",status:"error"}):n({isFinished:!1,message:"No tournament",status:"error"})};const u=(e,n,i)=>r(void 0,void 0,void 0,(function*(){var r,s;if(2!==e.playersInfo.length)return console.warn("Not 2 players in game info",e),void i({isFinished:!1,message:"Wrong amount of players.",status:"error"});const a=yield(0,t.getTournamentWithId)(e.gameSettings.tournamentId);if("local"!==a.tournamentType)return console.warn("Incorrect tournament type",a),void i({isFinished:!1,message:"Corrupted tounament type.",status:"error"});if(a.isFinished)return void i({isFinished:!0,message:"Tournament is already finished.",status:"error"});const l=a.flattenBracket.find((e=>e.id===n.id));if(l.seriesFinished)return void i({isFinished:!0,message:"Bracket is already finished.",status:"error"});let c,u;for(let t of e.playersInfo)t.id===l.player1.uid?c=t:t.id===l.player2.uid&&(u=t);if(console.log("player1",c),console.log("player2",u),!c||!u)return console.warn("player1 or player2 undefined",c,u),void i({status:"error",isFinished:!1,message:"Error finding correct players."});l.player1Score=null!==(r=l.player1Score)&&void 0!==r?r:0,l.player2Score=null!==(s=l.player2Score)&&void 0!==s?s:0,c.totalTime<u.totalTime?l.player1Score+=1:c.totalTime>u.totalTime&&(l.player2Score+=1);const d=Math.max(l.player1Score,l.player2Score)>a.numberOfGamesInSeries/2;l.seriesFinished=d;let h=`Current score in the ${(0,o.getBracketNameFromHeight)(l.height)}, best of ${a.numberOfGamesInSeries} is: ${l.player1.displayName} ${l.player1Score} - ${l.player2Score} ${l.player2.displayName}.`;if(d){const e=c.totalTime<u.totalTime?l.player1:l.player2;"root"===l.id?(a.isFinished=!0,h+=`\nThe tournament is finished, ${e.displayName} is the winner!`):(h+=`\nThis series is finished. ${e.displayName} goes to the next round!`,a.flattenBracket=o.BracketTree.AdvancePlayer(a.flattenBracket,l.id,e))}console.log("bracket to save",l),console.log("setting the tournament",a),(0,t.setTournament)(a),i({isFinished:d,message:h,status:"success",activeBracketNode:l})}));t.getTournamentWithId=e=>r(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>{const r=(0,i.doc)(s.firestore,l,e);(0,i.getDoc)(r).then((e=>{e.exists()?t(e.data()):n("No tournament with given id found")})).catch((e=>{console.warn("Error getting tournament with id:",e),n()}))}))}));t.getTorunamentBestTime=e=>new Promise(((t,n)=>{const r=(0,i.doc)(s.firestore,l,e,"metaData","metaData");(0,i.getDoc)(r).then((e=>{e.exists()?(console.log("val",e),t(e.data().bestTime)):t(void 0)})).catch((e=>{console.warn("Error getting best time in torunament:",e),n()}))}));t.setTorunamentBestTime=(e,t)=>{const n=(0,i.doc)(s.firestore,l,e,"metaData","metaData");try{(0,i.setDoc)(n,{bestTime:t})}catch(e){console.warn("Error setting tournament best time",e)}}},19421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkIfCanStartGame=void 0;const r=n(38990);t.checkIfCanStartGame=e=>{var t,n,i;if(e.activeBracketNode){const o=[null===(t=e.activeBracketNode.player1)||void 0===t?void 0:t.uid,null===(n=e.activeBracketNode.player2)||void 0===n?void 0:n.uid];return 2===e.players.length&&(0,r.itemInArray)(e.players[0].id,o)&&(0,r.itemInArray)(e.players[1].id,o)?{canStartGame:!0,message:""}:e.activeBracketNode.player1&&e.activeBracketNode.player2?{canStartGame:!1,message:`Incorrect players are connected to play this tournament bracket, the only connected players should be ${null===(i=e.activeBracketNode.player1)||void 0===i?void 0:i.displayName} and ${e.activeBracketNode.player2.displayName}.`}:{canStartGame:!1,message:"Incorrect players are connected to play this tournament bracket, there is still one slot open for this series."}}return{canStartGame:!0,message:""}}},12213:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.startGame=exports.GameScene=exports.viewBottoms=exports.viewLefts=void 0;const enable3d_1=__webpack_require__(96515),react_toastify_1=__webpack_require__(72132),three_1=__webpack_require__(2212),OrbitControls_1=__webpack_require__(69365),uuid_1=__webpack_require__(21614),Game_1=__webpack_require__(23053),localGameSettings_1=__webpack_require__(7735),shared_stuff_1=__webpack_require__(28468),gameSounds_1=__webpack_require__(44482),controls_1=__webpack_require__(3058),settings_1=__webpack_require__(72425),LowPolyVehicle_1=__webpack_require__(59711),SphereVehicle_1=__webpack_require__(95782),VehicleConfigs_1=__webpack_require__(17246),Wagon_1=__webpack_require__(76431);__webpack_require__(21793);const shaders_1=__webpack_require__(25193);exports.viewLefts=[0,.5],exports.viewBottoms=[0,0,.5,.5];const vechicleFov=60,fadeSecs=2;class GameScene extends enable3d_1.Scene3D{constructor(){var _a;super(),this.targetFPS=60,this.deltaFPS=0,this.updateDelta=0,this.needsReload=!1,this.timeOfDay=this.timeOfDay,this.players=[],this.vehicles=[],this.views=[],this.useShadows=!1,this.useSound=!1,this.courseLoaded=!1,this.songIsPlaying=!1,this._everythingReady=!1,this.gameStarted=!1,this.isPaused=!1,this.gameId=(0,uuid_1.v4)(),this.gameSettings=localGameSettings_1.defaultGameSettings,this.gameInfoDiv=document.createElement("div"),this.gameInfoDiv.setAttribute("id","game-info"),document.body.appendChild(this.gameInfoDiv),this.importantInfoDiv=document.createElement("div"),this.importantInfoDiv.setAttribute("id","important-info"),this.gameInfoDiv.appendChild(this.importantInfoDiv),this.totalTimeDiv=document.createElement("div"),this.gameInfoDiv.appendChild(this.totalTimeDiv),this.totalTimeDiv.setAttribute("id","totalTime"),this.gameRoomActions={},this.viewDivs=[],this.viewsKmhInfo=[],this.viewsLapsInfo=[],this.viewsImpornantInfo=[],this.viewsImpornantInfoClearTimeout=[],this.viewsNameInfo=[],this.pingInfo=document.createElement("span"),this.pingInfo.setAttribute("class","game-text"),this.pingInfo.setAttribute("style","\n            position:absolute;\n            top:25px;\n            left:5px;\n        "),this.fpsInfo=document.createElement("span"),this.fpsInfo.setAttribute("class","game-text"),this.fpsInfo.setAttribute("style","\n            position:absolute;\n            top:5px;\n            left:5px;\n        "),this.gameInfoDiv.appendChild(this.pingInfo),this.gameInfoDiv.appendChild(this.fpsInfo),this.playerInfosContainer=document.createElement("div"),this.playerInfosContainer.setAttribute("style","position:relative;"),this.totalPing=0,this.totalPingsGotten=0,this.time=0,this.fpsTick=0,this.totalFpsTicks=0,this.totalNumberOfFpsTicks=0,this.oldTime=0,this.roomTicks=0,this.gameTicks=0,this.hasAskedToLowerSettings=null!==(_a=eval(window.localStorage.getItem("hasAskedToLowerSettings")))&&void 0!==_a&&_a,this.extraVehicles=[],this.wagons=[]}addLights(){var e;return __awaiter(this,void 0,void 0,(function*(){this.timeOfDay=this.getTimeOfDay();const{ambientLightColor:t,hemisphereTopColor:n,hemisphereBottomColor:r,pointLightIntesity:i,ambientLightIntesity:o}=(0,Game_1.getTimeOfDayColors)(this.timeOfDay);this.pLight=new three_1.PointLight(16777215,i,0,1),this.pLight.position.set(100,150,100),this.useShadows&&"day"===this.timeOfDay&&(this.pLight.castShadow=!0,this.pLight.shadow.bias=.01),this.scene.add(this.pLight);const s=new three_1.HemisphereLight(n,1);s.position.set(0,1,0),s.color.setHSL(.6,1,.4),this.scene.add(s);const a=new three_1.AmbientLight(t,o);a.position.set(0,0,0),this.scene.add(a);const l={topColor:{value:new three_1.Color(n)},bottomColor:{value:new three_1.Color(r)},offset:{value:33},exponent:{value:.6}};l.topColor.value.copy(s.color),this.scene.background=(new three_1.Color).setHSL(.6,0,1),this.scene.fog=new three_1.Fog(this.scene.background,1,5e3),this.scene.fog.color.copy(l.bottomColor.value);const c=(0,Game_1.getTrackInfo)(this.getTrackName()),u=null!==(e=null==c?void 0:c.hemisphereRadius)&&void 0!==e?e:1e3,d=new three_1.SphereGeometry(u,32,15),h=new three_1.ShaderMaterial({uniforms:l,vertexShader:shaders_1.skydomeVertexShader,fragmentShader:shaders_1.skydomeFragmentShader,side:three_1.BackSide}),f=new three_1.Mesh(d,h);this.scene.add(f)}))}preload(){return __awaiter(this,void 0,void 0,(function*(){yield this.warpSpeed("-ground","-light","-sky");this.addLights(),(0,gameSounds_1.removeMusic)(),(0,gameSounds_1.addMusic)(this.gameSettings.musicVolume,this.camera,"racing.mp3");new OrbitControls_1.OrbitControls(this.camera,this.renderer.domElement);const e=new three_1.AudioListener;this.camera.add(e),(0,gameSounds_1.getBeep)((0,settings_1.getStaticPath)("sound/beepC4.mp3"),e,(e=>{this.beepC4=e})),(0,gameSounds_1.getBeep)((0,settings_1.getStaticPath)("sound/beepE4.mp3"),e,(e=>{this.beepE4=e})),document.addEventListener("keypress",(e=>{"r"===e.key?this.restartGame():"p"===e.key?this.togglePauseGame():"t"===e.key&&this.resetPlayer(0)})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&(this.togglePauseGame(),this.gameRoomActions.escPressed&&this.gameRoomActions.escPressed())})),window.addEventListener("resize",(()=>this.handleResizeWindow())),yield this.loadAssets(),this.renderer.clear(),this.renderer.info.autoReset=!1,this.renderer.autoClear=!1,this.renderer.shadowMap.autoUpdate=!1}))}loadAssets(){return __awaiter(this,void 0,void 0,(function*(){}))}init(e){return __awaiter(this,void 0,void 0,(function*(){this.camera=new three_1.PerspectiveCamera(vechicleFov,window.innerWidth/window.innerHeight,1,this.getDrawDistance()),this.setPixelRatio(),this.physics.setGravity(0,-9.82,0)}))}start(e,t){var n;return __awaiter(this,void 0,void 0,(function*(){yield null===(n=this.init)||void 0===n?void 0:n.call(this,t),yield this.preload(),yield this.create(),this.physics.config.maxSubSteps=2,this.physics.config.fixedTimeStep=1/this.targetFPS,console.log("Fixed time step",this.physics.config.fixedTimeStep),this.renderer.setAnimationLoop((()=>{this._myupdate()}))}))}_myupdate(){var e,t,n;const r=this.clock.getDelta();if(this.deltaFPS+=r,this.updateDelta+=r,this.deltaFPS>this.physics.config.fixedTimeStep&&!this.isPaused){let r=1e3*this.updateDelta;this.updateDelta=0,this.deltaFPS=this.deltaFPS%this.physics.config.fixedTimeStep;const i=this.clock.getElapsedTime();this.gameTicks+=1,this.roomTicks+=1,null===(e=this.physics)||void 0===e||e.update(r),null===(t=this.physics)||void 0===t||t.updateDebugger(),null===(n=this.update)||void 0===n||n.call(this,+i.toFixed(8),r),this.animationMixers.update(r),this.preRender(),this.composer&&this.composer.render(),this.postRender()}}createWagons(e,t,n){const r=[];for(let t=0;t<e.length;t++)r.push(this.createWagon(e[t],t));Promise.all(r).then((e=>{for(let r=0;r<e.length;r++)t&&t.length===e.length&&n&&n.length===e.length&&e[r].setPositionRotation(t[r],n[r]),this.wagons.push(e[r])}))}createWagon(e,t){return new Promise(((n,r)=>__awaiter(this,void 0,void 0,(function*(){const r=new Wagon_1.Wagon(this,e,t);yield r.constructWagon(),n(r)}))))}createExtraVehicles(e,t,n){return __awaiter(this,void 0,void 0,(function*(){const r=[];for(let t=0;t<e.length;t++)r.push(this.createVehicle(e[t],shared_stuff_1.vehicleColors[0].value,`extra-vehicle-${t}`,t+this.players.length));Promise.all(r).then((e=>{for(let r=0;r<e.length;r++)t&&t.length===e.length&&e[r].setPosition(t[r].x,t[r].y,t[r].z),n&&n.length===e.length&&e[r].setRotation(n[r]),e[r].start(),e[r].unpause(),this.extraVehicles.push(e[r])}))}))}createVehicle(e,t,n,r){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((i,o)=>__awaiter(this,void 0,void 0,(function*(){let o;o="LowPoly"===(0,VehicleConfigs_1.getVehicleClassFromType)(e)?new LowPolyVehicle_1.LowPolyVehicle({scene:this,vehicleColor:t,name:n,vehicleNumber:r,vehicleType:e,useSoundEffects:this.useSound}):new SphereVehicle_1.SphereVehicle({scene:this,vehicleColor:t,name:n,vehicleNumber:r,vehicleType:e,useSoundEffects:this.useSound}),this.vehicles.push(o),"LowPoly"===(0,VehicleConfigs_1.getVehicleClassFromType)(e)?yield(0,LowPolyVehicle_1.loadLowPolyVehicleModels)(e,!1).then((([e,t])=>{o.addModels(e,t)})):yield(0,SphereVehicle_1.loadSphereModel)(e,!1).then((e=>{o.addModels([],e)})),i(o)}))))}))}createVehicles(){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{var n,r,i,o,s;this.vehicles=[];let a=Math.floor(Math.random()*shared_stuff_1.vehicleColors.length);const l=[];for(let e=0;e<this.players.length;e++){const t=null!==(r=null===(n=shared_stuff_1.vehicleColors[(a+e)%shared_stuff_1.vehicleColors.length])||void 0===n?void 0:n.value)&&void 0!==r?r:"red";let c;const u=(null===(o=null===(i=this.gameSceneConfig)||void 0===i?void 0:i.tournament)||void 0===o?void 0:o.vehicleType)?null===(s=this.gameSceneConfig.tournament)||void 0===s?void 0:s.vehicleType:this.players[e].vehicleType;c="LowPoly"===(0,VehicleConfigs_1.getVehicleClassFromType)(u)?new LowPolyVehicle_1.LowPolyVehicle({scene:this,vehicleColor:t,name:this.players[e].playerName,vehicleNumber:e,vehicleType:u,useSoundEffects:this.useSound}):new SphereVehicle_1.SphereVehicle({scene:this,vehicleColor:t,name:this.players[e].playerName,vehicleNumber:e,vehicleType:u,useSoundEffects:this.useSound}),this.vehicles.push(c),"LowPoly"===(0,VehicleConfigs_1.getVehicleClassFromType)(u)?l.push((0,LowPolyVehicle_1.loadLowPolyVehicleModels)(u,!1).then((([t,n])=>{this.vehicles[e].addModels(t,n)}))):l.push((0,SphereVehicle_1.loadSphereModel)(u,!1).then((t=>{this.vehicles[e].addModels([],t)})))}Promise.all(l).then((t=>{this.emitVehiclesReady(),e()}))}))}))}getTrackName(){var e,t,n;return null!==(n=null===(t=null===(e=this.gameSceneConfig)||void 0===e?void 0:e.tournament)||void 0===t?void 0:t.trackName)&&void 0!==n?n:this.gameSettings.trackName}getGraphicsType(){return this.gameSettings.graphics}setPixelRatio(){const e="low"===this.gameSettings.graphics;this.renderer.capabilities.precision=e?"lowp":"highp",this.renderer.setPixelRatio(1),this.renderer.setSize(window.innerWidth,window.innerHeight)}setViewImportantInfo(e,t,n){this.viewsImpornantInfo[t].textContent=e,n&&(this.viewsImpornantInfoClearTimeout[t]=setTimeout((()=>{this.clearViewImportantInfo(t)}),1e3*fadeSecs))}clearViewImportantInfo(e){this.viewsImpornantInfo[e]&&(this.viewsImpornantInfo[e].textContent="")}clearTimeouts(){for(let e of this.viewsImpornantInfoClearTimeout)clearTimeout(e);clearTimeout(this.importantInfoTimeout)}setNeedsReload(e){this.needsReload=e}getDrawDistance(){return this.gameSettings.drawDistance}createViews(){this.gameInfoDiv.appendChild(this.playerInfosContainer),this.views=[],this.playerInfosContainer.textContent="",this.viewsImpornantInfo=[],this.viewsNameInfo=[],this.viewsKmhInfo=[],this.viewDivs=[],this.viewsLapsInfo=[];const e=this.players.length;e>2&&this.totalTimeDiv.setAttribute("style","\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            ");for(let t=0;t<this.players.length;t++){const n=e>2?.5:1;let r;r=3===e||1===e?t<e-1?.5:1:.5;const i=vechicleFov,o=t===e-1?this.camera:new three_1.PerspectiveCamera(i,window.innerWidth*r/(window.innerHeight*n),1,this.getDrawDistance()),s={left:exports.viewLefts[t%2],bottom:exports.viewBottoms[t],width:r,height:n,up:[0,1,0],fov:i,camera:o};s.camera.up.fromArray(s.up),this.vehicles[t].addCamera(s.camera),this.vehicles[t].isReady=!0,this.views.push(s);window.innerWidth;const a=exports.viewLefts[t%2]*window.innerWidth,l=exports.viewBottoms[t]*window.innerHeight,c=r*window.innerWidth,u=n*window.innerHeight,d=document.createElement("div");this.viewDivs.push(d);const h=document.createElement("span");h.textContent=this.players[t].playerName,d.appendChild(h),this.viewsNameInfo.push(h);const f=document.createElement("span");d.appendChild(f),this.viewsKmhInfo.push(f);const p=document.createElement("span");p.textContent="",d.appendChild(p),this.viewsLapsInfo.push(p);const m=document.createElement("span");d.appendChild(m),this.viewsImpornantInfo.push(m),d.setAttribute("style",`\n                position:absolute;\n                font-family:monospace;\n                text-shadow:1px 1px white;\n             \n                left:${a}px;\n                bottom:${l}px;\n                font-size:32px;\n                width:${c}px;\n                height:${u}px;\n            `);const g=window.innerWidth<1500?32:82;f.setAttribute("style",`\n                position:absolute;\n                left:50%;\n                bottom:0;\n                transform:translate(-50%,0px);\n                font-size:${g}px;\n            `),p.setAttribute("style",`\n                position:absolute;\n                right:0;\n                bottom:0;\n                font-size:${g}px;\n            `),m.setAttribute("style","\n                position:absolute;\n                left:50%;\n                bottom:50%;\n                font-size:32px;\n                transform:translate(-50%,-25px);\n                text-align:center;\n            ");let v=50,y=50,b=132;h.setAttribute("style",`\n            position:absolute;\n            right:${v}%;\n            top:${y}%;\n            font-size:${b}px;\n            transform:translate(${v}%, -${y}%);\n            transition:2s;\n            `);const w=this.players[t].playerName.toUpperCase().slice(0,3);setTimeout((()=>{h.textContent=w,h.setAttribute("style","\n                    position:absolute;\n                    right:100px;\n                    top:0%;\n                    font-size:32px;\n                    transform:translate(0%, -0%);\n                ")}),1500);setTimeout((()=>{}),1500),this.playerInfosContainer.appendChild(d)}}handleResizeWindow(){const e=this.viewDivs.length;for(let t=0;t<this.viewDivs.length;t++){const n=e>2?.5:1;let r;r=3===e||1===e?t<e-1?.5:1:.5;const i=exports.viewLefts[t%2]*window.innerWidth,o=exports.viewBottoms[t]*window.innerHeight,s=r*window.innerWidth,a=n*window.innerHeight;this.viewDivs[t].setAttribute("style",`\n                position:absolute;\n                font-family:monospace;\n                text-shadow:1px 1px white;\n             \n                left:${i}px;\n                bottom:${o}px;\n                font-size:32px;\n                width:${s}px;\n                height:${a}px;\n            `)}this.renderer.setSize(window.innerWidth,window.innerHeight)}startGameSong(){this.songIsPlaying||this.isPaused||(this.songIsPlaying=!0,(0,gameSounds_1.startMusic)())}onWindowResize(){this.renderer.setSize(window.innerWidth,window.innerHeight)}pauseGame(){if(this.isPaused=!0,this.gameStarted){(0,gameSounds_1.pauseMusic)(),this.songIsPlaying=!1;for(let e=0;e<this.vehicles.length;e++)this.vehicles[e].isReady&&this.vehicles[e].pause();this._togglePauseGame(!1)}}unpauseGame(){if(this.isPaused=!1,this.gameStarted){this.startGameSong(),this.songIsPlaying=!1;for(let e=0;e<this.vehicles.length;e++)this.vehicles[e].isReady&&this.vehicles[e].unpause();this._togglePauseGame(!0)}}togglePauseGame(){this.everythingReady()&&this.gameStarted&&(this.isPaused?this.unpauseGame():this.pauseGame())}_togglePauseGame(e){}showViewsImportantInfo(e,t){for(let n=0;n<this.vehicles.length;n++)this.setViewImportantInfo(e,n,t)}clearViewsImportantInfo(){for(let e=0;e<this.vehicles.length;e++)this.clearViewImportantInfo(e)}showImportantInfo(e,t){this.importantInfoDiv&&(this.importantInfoDiv.textContent=e),t&&(this.importantInfoTimeout=setTimeout((()=>{this.clearImportantInfo()}),1e3*fadeSecs))}clearImportantInfo(){this.importantInfoDiv&&(this.importantInfoDiv.textContent="")}everythingReady(){if(!this.courseLoaded)return this._everythingReady=!1,!1;if(this._everythingReady)return!0;for(let e of this.vehicles)if(!e.isReady)return!1;return this._everythingReady=!0,!0}saveDriveRecording(e){console.warn("Save drive recording not implemented")}setGameRoomActions(e){this.gameRoomActions=e}getTimeOfDay(){return"low"===this.gameSettings.graphics?"day":(0,Game_1.getTimeOfDay)(this.getTrackName())}setGameSettings(e){var t;!this.courseLoaded||this.getTrackName()===e.trackName&&this.gameSettings.graphics===e.graphics||this.setNeedsReload(!0),this.gameSettings=e;for(let t of Object.keys(e))void 0!==e[t]&&(this[t]=e[t]);this.timeOfDay=this.getTimeOfDay(),this.pLight&&this.course&&(this.pLight.castShadow=this.useShadows&&"day"===this.timeOfDay,this.pLight.shadow.bias=.1,this.course.toggleShadows(this.useShadows)),this.toggleUseSound(),(0,gameSounds_1.setMusicVolume)(e.musicVolume),e.musicVolume>0&&this.startGameSong();for(let e=0;e<this.views.length;e++)this.views[e].camera.far=this.getDrawDistance();this.camera.far=this.getDrawDistance(),null===(t=this.socket)||void 0===t||t.emit(shared_stuff_1.dts_game_settings_changed_callback,{}),this.targetFPS&&(this.physics.config.fixedTimeStep=1/this.targetFPS),this._setGameSettings()}_setGameSettings(){}toggleUseSound(){for(let e of this.vehicles)e.toggleSound(this.useSound)}playCountdownBeep(){var e;this.useSound&&(null===(e=this.beepC4)||void 0===e||e.play(),setTimeout((()=>{var e;null===(e=this.beepC4)||void 0===e||e.stop()}),250))}playStartBeep(){var e;this.useSound&&(null===(e=this.beepE4)||void 0===e||e.play())}isGameSongPlaying(){return!1}startAllVehicles(){for(let e=0;e<this.vehicles.length;e++)this.vehicles[e].unpause();this._startAllVehicles()}_startAllVehicles(){}stopAllVehicles(){for(let e=0;e<this.vehicles.length;e++)this.vehicles[e].setCanDrive(!1),this.vehicles[e].stop()}create(){return __awaiter(this,void 0,void 0,(function*(){}))}destroyVehicles(){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((e,t)=>__awaiter(this,void 0,void 0,(function*(){for(let e of this.vehicles)try{yield e.destroy()}catch(e){console.warn("Error destroying vehicle:",e)}for(let e=0;e<this.vehicles.length;e++)delete this.vehicles[0];this.vehicles=[];for(let e of this.extraVehicles)e.destroy();this.extraVehicles=[];for(let e of this.wagons)e.destroy();this.wagons=[],e()}))))}))}restartGame(){var e,t;return __awaiter(this,void 0,void 0,(function*(){this.clearImportantInfo(),this.clearViewsImportantInfo(),this.isPaused=!1,this.oldTime=0,this.totalPing=0,this.totalPingsGotten=0,this.totalNumberOfFpsTicks=0,this.totalFpsTicks=0,(null===(e=this.gameRoomActions)||void 0===e?void 0:e.closeModals)&&this.gameRoomActions.closeModals(),this.needsReload?(null===(t=this.socket)||void 0===t||t.off(shared_stuff_1.std_controls),this._everythingReady=!1,this.gameStarted=!1,this.courseLoaded=!1,this.needsReload=!1,yield this.destroyVehicles(),this.restart().then((()=>{}))):(this.gameStarted=!1,this.resetVehicles(),this._restartGame())}))}_restartGame(){}changeTrack(e){this.setNeedsReload(!0)}vehicleCollidedWithObject(e,t){if(console.warn("Not implmented vehicle collided with object"),e instanceof Wagon_1.Wagon){const n=(0,Wagon_1.getWagonNumber)(e.name);this.wagons[n].connectToVehicle(this.vehicles[t])}}setSocket(e){this.socket=e,this.userSettingsListener()}setPlayers(e){this.players=e}createController(){var e,t;null===(e=this.socket)||void 0===e||e.off(shared_stuff_1.std_controls),(null===(t=this.gameSceneConfig)||void 0===t?void 0:t.onlyMobile)?this.gameSceneConfig.mobileController&&this.vehicles.length>0?this.mobileOnlyControllerInterval=setInterval((()=>{(0,controls_1.driveVehicle)(this.gameSceneConfig.mobileController,this.vehicles[0])}),1e3/60):console.warn("not able to drive"):(this.vehicleControls=new shared_stuff_1.VehicleControls,(0,controls_1.addControls)(this.vehicleControls,this.socket,this.vehicles))}emitVehiclesReady(){var e;null===(e=this.socket)||void 0===e||e.emit(shared_stuff_1.dts_vehicles_ready,{numberOfVehicles:this.vehicles.length})}userSettingsListener(){var e;null===(e=this.socket)||void 0===e||e.on(shared_stuff_1.std_user_settings_changed,(e=>{var t,n;(null===(t=this.vehicles)||void 0===t?void 0:t.length)>0&&this.vehicles[0].isReady&&this.vehicles.length>=e.playerNumber-1&&this.setVehicleSettings(e.playerNumber,null===(n=e.userSettings)||void 0===n?void 0:n.vehicleSettings,e.vehicleSetup)}))}setVehicleSettings(e,t,n){t&&(this.players[e].vehicleType=t.vehicleType),this.vehicles[e].updateVehicleSettings(t,n)}resetPlayer(e){this.vehicles[e].resetPosition(),this._resetPlayer(e)}_resetPlayer(e){}checkVehicleOutOfBounds(e){const t=this.vehicles[e].getPosition();this.course.checkIfObjectOutOfBounds(t)&&this.resetPlayer(e)}updatePing(){var e,t,n;const r=Date.now();null===(e=this.socket)||void 0===e||e.off(shared_stuff_1.std_ping_test_callback),null===(t=this.socket)||void 0===t||t.emit(shared_stuff_1.dts_ping_test),null===(n=this.socket)||void 0===n||n.once(shared_stuff_1.std_ping_test_callback,(()=>{const e=Date.now()-r;this.pingInfo.textContent=`ping ${e}ms`,this.totalPing+=e,this.totalPingsGotten+=1}))}updateFps(e){this.fpsTick+=1,Math.floor(e)>this.oldTime&&(this.fpsInfo.textContent=`fps ${this.fpsTick}`,this.totalFpsTicks+=this.fpsTick,this.totalNumberOfFpsTicks+=1,this.fpsTick=0,this.oldTime=Math.floor(e)),e>30&&!this.hasAskedToLowerSettings&&(this.hasAskedToLowerSettings=!0,window.localStorage.setItem("hasAskedToLowerSettings","true"),this.totalFpsTicks/this.totalNumberOfFpsTicks<40&&("high"===this.gameSettings.graphics||this.gameSettings.useShadows)&&react_toastify_1.toast.warn("Low fps detected, to increase fps and a more smooth game, go into settings (esc) and turn off shadows and put the graphics on low. Also close other tabs in your browser.",{}))}resetVehicles(){this.course.setStartPositions(this.vehicles),this.stopAllVehicles(),this._resetVehicles()}_resetVehicles(){}resetVehicleCallback(e){}updateVehicles(e){for(let t=0;t<this.views.length;t++){this.vehicles[t].update(e),this.vehicles[t].cameraLookAt(this.views[t].camera,e);const n=Math.floor(window.innerWidth*this.views[t].left),r=Math.floor(window.innerHeight*this.views[t].bottom),i=Math.floor(window.innerWidth*this.views[t].width),o=Math.floor(window.innerHeight*this.views[t].height);this.renderer.setViewport(n,r,i,o),this.renderer.setScissor(n,r,i,o),this.renderer.setScissorTest(!0),this.renderer.setClearColor(new three_1.Color(255,255,255)),this.views[t].camera.aspect=i/o,this.views[t].camera.updateProjectionMatrix(),t===this.views.length-1?(this.renderer.info.reset(),this.renderer.clear()):this.renderer.shadowMap.needsUpdate=!1,this.renderer.render(this.scene,this.views[t].camera),this.gameStarted&&(this.viewsKmhInfo[t].textContent=`${Math.ceil(this.vehicles[t].getCurrentSpeedKmHour(e)).toFixed(0)} km/h`)}}setGameSceneConfig(e){this.gameSceneConfig=e,this.setSocket(e.socket),this.setGameSettings(e.gameSettings),this.setPlayers(e.players),this.roomId=e.roomId,this.setGameRoomActions(e.gameRoomActions)}update(e,t){if(this.everythingReady()){this._updateChild(e,t);for(let e of this.extraVehicles)e.update(t);for(let e of this.wagons)e.update()}}_updateChild(e,t){}destroyGame(){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((e,t)=>__awaiter(this,void 0,void 0,(function*(){var t,n;(0,gameSounds_1.stopMusic)(),window.removeEventListener("resize",(()=>this.handleResizeWindow())),this.mobileOnlyControllerInterval&&clearInterval(this.mobileOnlyControllerInterval),null===(t=this.socket)||void 0===t||t.off(shared_stuff_1.std_controls),null===(n=this.socket)||void 0===n||n.off(shared_stuff_1.std_user_settings_changed),document.body.removeChild(this.gameInfoDiv),document.body.removeChild(this.canvas),yield this.destroyVehicles(),yield this.stop(),e()}))))}))}}exports.GameScene=GameScene;const startGame=(e,t,n)=>{const r={scenes:[e],antialias:!0,autoStart:!1};(0,enable3d_1.PhysicsLoader)("/ammo",(()=>{const e=new enable3d_1.Project(r),i=e.scenes.keys().next().value,o=e.scenes.get(i);return o.setGameSceneConfig(t),n(o),e}))};exports.startGame=startGame},19127:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameTime=void 0;const r=n(2212),i=e=>Math.floor(100*e)/100;t.GameTime=class{constructor(e,t){this.totalNumberOfLaps=e,this.lapNumber=1,this.bestLapTime=1/0,this.clock=new r.Clock(!1),this.isPaused=!0,this.currentLapTime=0,this.isCheckpointCrossed=[],this.checkpointTimes=[];for(let e=0;e<t;e++)this.isCheckpointCrossed.push(!1),this.checkpointTimes.push([]);this.lapTimes=[],this.totalTime=0,this.hasSendRaceData=!1}resetCheckpoints(){for(let e=0;e<this.isCheckpointCrossed.length;e++)this.isCheckpointCrossed[e]=!1}start(){this.isPaused=!1,this.clock.start()}stop(){this.currentLapTime=this.getCurrentLapTime(),this.clock.stop(),this.isPaused=!0}getCurrentLapTime(){return this.isPaused?this.currentLapTime:i(this.currentLapTime+this.clock.getElapsedTime())}lapDone(){if(this.finished())return;const e=this.getCurrentLapTime();this.lapTimes.push(e),this.totalTime+=e,this.bestLapTime=Math.min(e,this.bestLapTime),this.clock.stop(),this.clock.start(),this.currentLapTime=0,this.resetCheckpoints(),this.finished()?this.stop():this.lapNumber+=1}allCheckpointsCrossed(){for(let e of this.isCheckpointCrossed)if(!e)return!1;return!0}getTotalTime(){return this.finished()?i(this.totalTime):this.totalTime+this.getCurrentLapTime()}checkpointCrossed(e){this.isCheckpointCrossed[e-1]||this.checkpointTimes[e-1].push(this.getTotalTime()),this.isCheckpointCrossed[e-1]=!0}getCheckpointTime(e,t){const n=t-1,r=e-1;if(console.log("checkpoint times",this.checkpointTimes),this.checkpointTimes.length>r&&this.checkpointTimes[r].length>n)return this.checkpointTimes[r][n]}getCurrentLapNumber(){return this.lapNumber}crossedCheckpoint(e){return this.isCheckpointCrossed[e-1]}getBestLapTime(){return this.bestLapTime}getLapTimes(){return this.lapTimes}finished(){return this.lapNumber>this.totalNumberOfLaps}restart(){this.clock.stop(),this.totalTime=0,this.lapNumber=1,this.lapTimes=[],this.bestLapTime=1/0,this.hasSendRaceData=!1}}},50706:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RaceGameScene=void 0;const i=n(21614),o=n(55284),s=n(81441),a=n(3058),l=n(72425),c=n(38990),u=n(38045),d=n(59711),h=n(12213),f=n(19127);class p extends h.GameScene{constructor(){super(),this.winner="",this.winTime=-1,this.gameTimers=[],this.currentNumberOfLaps=this.getNumberOfLaps(),this.hasShowStartAnimation=!1,this.raceFinished=!1,this.raceCountdownTime=7}loadAssets(){return r(this,void 0,void 0,(function*(){this.gameTimers=[],this.course=new o.RaceCourse(this,this.getTrackName(),(e=>this.handleGoalCrossed(e)),((e,t)=>this.handleCheckpointCrossed(e,t))),yield this.course.createCourse(),this.courseLoaded=!0,yield this.createVehicles(),this.currentNumberOfLaps=this.getNumberOfLaps();for(let e=0;e<this.players.length;e++)this.gameTimers.push(new f.GameTime(this.currentNumberOfLaps,this.course.getNumberOfCheckpoints()))}))}createGhostVehicle(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{var n,i,o,a;null===(n=this.ghostVehicle)||void 0===n||n.removeFromScene(this);const{trackName:l,numberOfLaps:c}=s.DriveRecorder.GetTrackNameNumberOfLapsFromFilename(this.gameSettings.ghostFilename);if(l!==this.getTrackName()||c!==this.getNumberOfLaps())return console.warn("Track name or number of laps of ghost don't match game settings, gamesettings::",this.gameSettings),void e();this.ghostDriver=new s.GhostDriver(this.getTrackName(),this.getNumberOfLaps(),this.players[0].vehicleType),this.ghostDriver.loadDriveInstructions(null!==(i=this.gameSettings.ghostFilename)&&void 0!==i?i:this.gameSettings.tournamentId,!!(null===(a=null===(o=this.gameSceneConfig)||void 0===o?void 0:o.tournament)||void 0===a?void 0:a.id)).then((()=>r(this,void 0,void 0,(function*(){const t=this.ghostDriver.getVehicleType();t?(this.ghostVehicle=new u.GhostVehicle({vehicleType:t,color:"#10eedd"}),yield this.ghostVehicle.loadModel(),this.ghostVehicle.addToScene(this),this.ghostDriver.setToStart(this.ghostVehicle)):console.warn("no vt",t),e()})))).catch((()=>{e()}))}))}))}create(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>r(this,void 0,void 0,(function*(){var t,n,r,i;this._clearTimeouts(),("global"===(null===(n=null===(t=this.gameSceneConfig)||void 0===t?void 0:t.tournament)||void 0===n?void 0:n.tournamentType)||this.gameSettings.record)&&(this.gameSettings.useGhost&&(this.gameSettings.tournamentId||this.gameSettings.ghostFilename)&&(yield this.createGhostVehicle()),this.driverRecorder=new s.DriveRecorder({tournamentId:null===(i=null===(r=this.gameSceneConfig)||void 0===r?void 0:r.tournament)||void 0===i?void 0:i.id,active:!0,numberOfLaps:this.currentNumberOfLaps,vehicleType:this.players[0].vehicleType,trackName:this.getTrackName(),playerId:this.players[0].id,playerName:this.players[0].playerName,vehicleSetup:this.vehicles[0].vehicleSetup})),this.createViews(),this.createController(),this.resetVehicles(),yield this.restartGame(),e()}))))}))}startRaceCountdown(){return r(this,void 0,void 0,(function*(){this.currentNumberOfLaps=this.getNumberOfLaps(),this.startGameSong(),this.raceCountdownTime<3&&(this.raceCountdownTime=3),this.stopAllVehicles(),this.raceCountdownTime>3&&this.showImportantInfo(`Race starting in ${this.raceCountdownTime} seconds`,!0),setTimeout((()=>{for(let e of this.vehicles)e.start(),e.setCanDrive(!1)}),500),clearTimeout(this.countDownInterval),this.countDownInterval=setInterval((()=>{this.raceCountdownTime<4&&0!==this.raceCountdownTime&&this.playCountdownBeep(),this.showViewsImportantInfo(this.raceCountdownTime+""),this.raceCountdownTime>0||(this.playStartBeep(),this.showViewsImportantInfo("GO!",!0),this.startAllVehicles(),this.gameStarted=!0,clearInterval(this.countDownInterval),this.raceCountdownTime=3),this.raceCountdownTime-=1}),1e3)}))}_togglePauseGame(e){if(this.gameStarted)for(let t=0;t<this.vehicles.length;t++)e?this.gameTimers[t].start():this.gameTimers[t].stop()}getNumberOfLaps(){var e,t,n;return null!==(n=null===(t=null===(e=this.gameSceneConfig)||void 0===e?void 0:e.tournament)||void 0===t?void 0:t.numberOfLaps)&&void 0!==n?n:this.gameSettings.numberOfLaps}_resetVehicles(){for(let e of this.gameTimers)e.stop();this.gameTimers=[],this.currentNumberOfLaps=this.getNumberOfLaps();for(let e=0;e<this.players.length;e++)this.gameTimers.push(new f.GameTime(this.currentNumberOfLaps,this.course.getNumberOfCheckpoints()))}_startAllVehicles(){this.raceFinished=!1,this.gameTicks=0;for(let e=0;e<this.vehicles.length;e++)this.gameTimers[e].start()}_clearTimeouts(){clearTimeout(this.countDownTimeout),clearTimeout(this.gameStartingTimeOut),clearInterval(this.countDownInterval)}_restartGame(){return r(this,void 0,void 0,(function*(){if(this.currentNumberOfLaps=this.getNumberOfLaps(),this._clearTimeouts(),this.clearTimeouts(),this.gameStarted=!1,this.winner="",this.winTime=-1,yield this.createGhostVehicle(),this.resetVehicles(),this.hasShowStartAnimation=!0,this.hasShowStartAnimation)this.startRaceCountdown();else{const e=3;this.hasShowStartAnimation=!0,this.showViewsImportantInfo("Race countdown starting in "+e+" seconds");for(let e=0;e<this.vehicles.length;e++){this.vehicles[e].removeCamera(),this.vehicles[e].spinCameraAroundVehicle=!0,this.vehicles[e].resetPosition();const t=this.vehicles[e].getPosition(),n=this.vehicles[e].getRotation();this.views[e].camera.position.set(t.x+100*Math.sin(n.y),t.y+75,t.z+100*Math.cos(n.y)*Math.sign(Math.cos(n.z)))}this.gameStartingTimeOut=setTimeout((()=>{this.startRaceCountdown()}),1e3*e)}}))}_setGameSettings(){this.ghostVehicle&&(this.gameSettings.useGhost?this.ghostVehicle.show():this.ghostVehicle.hide())}resetVehicleCallback(e){this.raceFinished&&(this.raceFinished=!1,this.restartGame())}handleGoalCrossed(e){const t=(0,d.getVehicleNumber)(e.body.name);if(this.gameTimers[t].allCheckpointsCrossed()){const e=this.gameTimers[t].getCurrentLapTime();this.gameTimers[t].lapDone();const{position:n,rotation:r}=this.course.getGoalCheckpoint();if(this.vehicles[t].setCheckpointPositionRotation({position:n,rotation:r}),this.gameTimers[t].finished()&&this.gameStarted){const e=this.gameTimers[t].getTotalTime();""===this.winner&&(this.winner=this.players[t].playerName,this.winTime=e),this.gameTimers[t].hasSendRaceData||(this.setViewImportantInfo(`Race finished, total time: ${e}`,+t),this.prepareEndOfRacePlayer(+t),this.checkRaceOver(),this.gameTimers[t].hasSendRaceData=!0)}else this.setViewImportantInfo(`Lap time: ${e.toFixed(2)}`,+t,!0)}}checkRaceOver(){let e=!0;for(let t=0;t<this.vehicles.length;t++)this.gameTimers[t].finished()||(e=!1);return e&&(this.gameStarted=!1,this.raceFinished=!0,this.prepareEndOfGameData()),e}handleCheckpointCrossed(e,t){const n=(0,d.getVehicleNumber)(e.body.name);if(!this.gameTimers[n].crossedCheckpoint(t)&&this.gameStarted){if(this.gameTimers[n].checkpointCrossed(t),1===this.vehicles.length)this.setViewImportantInfo(`Checkpoint ${this.gameTimers[n].getCurrentLapTime()}`,n,!0);else{const e=this.getCheckpointDiff(n,t);this.setViewImportantInfo(`Checkpoint ${e}`,n,!0)}const{position:e,rotation:r}=this.course.getCheckpointPositionRotation(t);this.vehicles[n].setCheckpointPositionRotation({position:{x:e.x,y:e.y+1,z:e.z},rotation:r})}}getCheckpointDiff(e,t){let n=1/0;const r=this.gameTimers[e].getCurrentLapNumber();for(let i=0;i<this.gameTimers.length;i++)if(i!==e){const e=this.gameTimers[i].getCheckpointTime(t,r);e&&(n=e)}const i=this.gameTimers[e].getCheckpointTime(t,r);return!i||i<n?this.gameTimers[e].getCurrentLapTime().toFixed(2):(n-i).toFixed(2)}sendScoreInfo(){if(this.gameRoomActions.updateScoreInfo){const e=[];let t=0;for(let n=0;n<this.gameTimers.length;n++){let r=this.gameTimers[n].getCurrentLapTime();const i=this.gameTimers[n].getBestLapTime();let o=this.gameTimers[n].getTotalTime();t=Math.max(o,t),this.gameTimers[n].finished()&&(r=-1);const s={playerName:this.players[n].playerName,bestLapTime:i,currentLapTime:r,totalTime:o,lapNumber:this.gameTimers[n].lapNumber,numberOfLaps:this.currentNumberOfLaps};e.push(s)}this.gameRoomActions.updateScoreInfo({timeInfos:e})}}updateScoreTable(e,t){let n=0;for(let e=0;e<this.gameTimers.length;e++){let t=this.gameTimers[e].getCurrentLapTime();this.gameTimers[e].getBestLapTime();let r=this.gameTimers[e].getTotalTime();n=Math.max(r,n),this.gameTimers[e].finished()&&(t=-1),this.viewsLapsInfo[e].textContent=`${this.gameTimers[e].lapNumber} / ${this.currentNumberOfLaps}`}this.totalTimeDiv.textContent=n.toFixed(2),this.gameStarted&&!this.isPaused&&(this.ghostVehicle&&n>0&&this.ghostDriver.setPlace(this.ghostVehicle,n,t),this.driverRecorder&&n>0&&this.driverRecorder.record(this.vehicles[0],n))}_updateChild(e,t){this.time=e,this.updateFps(e),this.everythingReady()&&(this.course.updateCourse(),l.inTestMode&&(0,a.driveVehicleWithKeyboard)(this.vehicles[0],this.vehicleControls),this.updateScoreTable(e,t),this.updateVehicles(t),this.roomTicks%90==0&&this.updatePing())}prepareEndOfRacePlayer(e){var t;const n={totalTime:this.gameTimers[e].getTotalTime(),numberOfLaps:this.currentNumberOfLaps,playerName:this.players[e].playerName,playerId:this.players[e].id,bestLapTime:this.gameTimers[e].getBestLapTime(),trackName:this.getTrackName(),lapTimes:this.gameTimers[e].getLapTimes(),gameId:this.gameId,date:(0,c.getDateNow)(),private:!1,isAuthenticated:this.players[e].isAuthenticated,vehicleType:this.vehicles[e].vehicleType,engineForce:this.vehicles[e].engineForce,breakingForce:this.vehicles[e].breakingForce,steeringSensitivity:this.vehicles[e].steeringSensitivity,roomTicks:this.roomTicks,gameTicks:this.gameTicks,totalPing:this.totalPing,totalPingsGotten:this.totalPingsGotten,avgFps:0===this.totalNumberOfFpsTicks?-1:this.totalFpsTicks/this.totalNumberOfFpsTicks,vehicleSetup:this.vehicles[e].vehicleSetup};this.gameSettings.record&&this.driverRecorder&&(n.recordingFilename=this.driverRecorder.getRecordingFilename()),this.gameSettings.tournamentId&&(n.tournamentId=this.gameSettings.tournamentId),this.gameRoomActions.playerFinished&&this.gameRoomActions.playerFinished(n),0===e&&this.driverRecorder&&(null===(t=this.gameSettings)||void 0===t?void 0:t.tournamentId)&&this.driverRecorder.saveTournamentRecording(this.gameTimers[e].getTotalTime(),this.players[e].playerName,this.players[e].id)}prepareEndOfGameData(){const e=[];this.sendScoreInfo();for(let t=0;t<this.vehicles.length;t++)e.push({id:this.players[t].id,name:this.players[t].playerName,totalTime:this.gameTimers[t].getTotalTime(),lapTimes:this.gameTimers[t].getLapTimes(),vehicleType:this.players[t].vehicleType,engineForce:this.vehicles[t].engineForce,breakingForce:this.vehicles[t].breakingForce,steeringSensitivity:this.vehicles[t].steeringSensitivity,isAuthenticated:this.players[t].isAuthenticated});const t={playersInfo:e,gameSettings:this.gameSettings,gameId:this.gameId,roomId:this.roomId,date:(0,c.getDateNow)(),roomTicks:this.roomTicks,gameTicks:this.gameTicks,avgPing:0===this.totalPingsGotten?-1:this.totalPing/this.totalPingsGotten,time:this.time,avgFps:0===this.totalNumberOfFpsTicks?-1:this.totalFpsTicks/this.totalNumberOfFpsTicks};this.gameRoomActions.gameFinished&&this.gameRoomActions.gameFinished({endOfRaceInfo:t}),this.gameId=(0,i.v4)()}saveDriveRecording(e){var t;this.gameSettings.record&&(null===(t=this.driverRecorder)||void 0===t?void 0:t.instructions)&&this.driverRecorder.saveRecordedInstructions()}}t.RaceGameScene=p},46156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StoryGameScene=void 0;const r=n(12213);class i extends r.GameScene{constructor(){super()}_updateChild(e,t){this.updatePing(),this.updateFps(e)}}t.StoryGameScene=i},89645:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TagGameScene=void 0;const i=n(2212),o=n(87626),s=n(3058),a=n(72425),l=n(38990),c=n(59711),u=n(12213),d=n(45082);let h=["60","30","10","5","4","3","2","1"];class f extends u.GameScene{constructor(){super(),this.totalTimeDiv=document.createElement("div"),this.gameInfoDiv.appendChild(this.totalTimeDiv),this.totalTimeDiv.setAttribute("id","totalTime"),this.tagObjects=[],this.isItTimeout=!1,this.gameClock=new i.Clock(!1),this.gameOver=!1,this.ticks=0}create(){return r(this,void 0,void 0,(function*(){this.course=new o.TagCourse(this,this.gameSettings.trackName,((e,t)=>this.handleCoinCollidedCallback(e,t))),yield this.course.createCourse(),this.courseLoaded=!0,yield this.createVehicles();for(let e of this.vehicles)e.useBadRotationTicks=!1;this.createViews(),this.createController(),this.resetVehicles(),this.resetTagObjects(),this.createColliderListeners(),this.startGameCountdown()}))}handleVehicleTagged(e,t){if(!this.tagObjects[e].isChocolate){this.tagObjects[e].setIsIt(!0),this.tagObjects[t].setIsIt(!1,!1),this.setViewImportantInfo("You are it!",e,!0);const n=this.players[e].playerName;for(let t=0;t<this.vehicles.length;t++)t!==e&&this.setViewImportantInfo(`${n} is it!`,t,!0)}}createColliderListeners(){for(let e=0;e<this.vehicles.length;e++)this.vehicles[e].vehicleBody.body.on.collision(((t,n)=>{if(!this.isItTimeout&&!this.gameOver&&this.tagObjects[e].isIt&&(0,c.isVehicle)(t)){const n=(0,c.getVehicleNumber)(t.name);this.handleVehicleTagged(n,e)}}))}resetTagObjects(){this.tagObjects=[];for(let e=0;e<this.vehicles.length;e++)this.tagObjects.push(new d.TagObject(this.vehicles[e]))}_restartGame(){this.gameStarted=!1,this.gameOver=!1,this.gameClock.stop(),this.gameClock=new i.Clock(!1),this.course.setupGameObjects(),this.resetTagObjects(),this.stopAllVehicles(),this.resetVehicles(),this.startGameCountdown()}startGameCountdown(){const e=Math.floor(Math.random()*this.players.length);this.tagObjects[e].setIsIt(!0);for(let e=0;e<this.vehicles.length;e++)this.tagObjects[e].isIt?this.vehicles[e].setColor(o.itColor):this.vehicles[e].setColor(o.notItColor);let t=1;const n=()=>{this.playCountdownBeep(),this.showViewsImportantInfo(t+""),t-=1,this.countDownTimeout=setTimeout((()=>{t>0?n():this.startGame()}),1e3)};n()}startGame(){this.playStartBeep(),this.showViewsImportantInfo("GO!!!!",!0),this.startAllVehicles(),this.startGameClock(),this.gameStarted=!0}startGameClock(){this.gameClock.start()}updateClock(){if(this.gameOver)return;let e=(60*this.gameSettings.tagGameLength-this.gameClock.getElapsedTime()).toFixed(0);this.showImportantInfo(e),"0"===e&&(this.gameClock.stop(),this.handleGameOver()),(0,l.itemInArray)(e,h)&&this.showViewsImportantInfo(`${e} sec left`,!0)}handleGameOver(){this.showImportantInfo("GAME OVER!"),this.gameOver=!0,this.gameStarted=!1}handleCoinCollidedCallback(e,t){if(this.gameOver)return;const n=(0,c.getVehicleNumber)(e);this.tagObjects[n].coinCollision(t,this)}resetVehicleCallback(e){if(!this.gameStarted)return;if(this.tagObjects[e].isIt||this.tagObjects[e].isChocolate)return;if(this.tagObjects[e].resetPressed()){let t=-1;for(let e=0;e<this.vehicles.length;e++)this.tagObjects[e].isIt&&(t=e,this.tagObjects[e].setIsIt(!1,!0));-1!==t&&this.handleVehicleTagged(e,t)}else this.setViewImportantInfo(`${this.tagObjects[e].getRemainingResets()} resets left`,e,!0)}updateScoreTable(){const e=[];for(let t=0;t<this.tagObjects.length;t++)e.push({playerName:this.players[t].playerName,score:this.tagObjects[t].coinCount}),this.viewsLapsInfo[t].textContent=this.tagObjects[t].coinCount.toString()}_updateChild(e,t){this.ticks+=1,this.updateFps(e),this.everythingReady()&&(a.inTestMode&&(0,s.driveVehicleWithKeyboard)(this.vehicles[0],this.vehicleControls),this.updateScoreTable(),this.updateVehicles(t),this.updateClock(),this.course.updateCourse(),this.isGameSongPlaying()||this.startGameSong(),this.ticks%60==0&&this.updatePing())}}t.TagGameScene=f},45082:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TagObject=void 0;const r=n(87626);t.TagObject=class{constructor(e){this.isIt=!1,this.coinCount=0,this.numberOfResets=0,this.totalNumberOfResets=3,this.isChocolate=!1,this.vehicle=e,this.chocolateTime=6}coinCollision(e,t){if(!this.isIt)return this.coinCount+=1,e.removeFromScene(t),!0}setIsIt(e,t){this.isIt=e,this.isIt?this.vehicle.setColor(r.itColor):t?this.vehicle.setColor(r.notItColor):(this.isChocolate=!0,this.vehicle.setColor(r.chocolateColor),this.chocolateTimeout=setTimeout((()=>{this.vehicle.setColor(r.notItColor),this.isChocolate=!1}),1e3*this.chocolateTime))}resetPressed(){return this.numberOfResets+=1,this.numberOfResets===this.totalNumberOfResets&&(this.numberOfResets=0,!0)}getRemainingResets(){return this.totalNumberOfResets-this.numberOfResets}}},25193:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skydomeFragmentShader=t.skydomeVertexShader=void 0,t.skydomeVertexShader="\n\n\t\t\tvarying vec3 vWorldPosition;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\t\tvWorldPosition = worldPosition.xyz;\n\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t}\n\n\t\t",t.skydomeFragmentShader="\n\n\t\t\tuniform vec3 topColor;\n\t\t\tuniform vec3 bottomColor;\n\t\t\tuniform float offset;\n\t\t\tuniform float exponent;\n\n\t\t\tvarying vec3 vWorldPosition;\n\n\t\t\tvoid main() {\n\n\t\t\t\tfloat h = normalize( vWorldPosition + offset ).y;\n\t\t\t\tgl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h , 0.0), exponent ), 0.0 ) ), 1.0 );\n\n\t\t\t}\n\n\t\t"},75888:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.invertedControllerKey=void 0;const i=r(n(50594)),o=r(n(49123)),s=r(n(7701)),a=r(n(672)),l=r(n(74113)),c=r(n(89589)),u=r(n(67294)),d=n(5977),h=r(n(50622)),f=r(n(42950)),p=n(17091),m=r(n(67300)),g=r(n(3880)),v=n(28468);t.invertedControllerKey="invertedController";t.default=e=>{const t=e.user,n=(0,d.useHistory)();return e.store.userSettings?u.default.createElement(a.default,{container:!0,spacing:3},u.default.createElement(a.default,{item:!0,xs:6,style:{textAlign:"left"}},u.default.createElement(l.default,{onClick:()=>e.onClose(),style:{color:"white"}},u.default.createElement(i.default,null))),u.default.createElement(a.default,{item:!0,xs:6,style:{textAlign:"right"}},u.default.createElement(f.default,null)),e.store.player.isLeader&&u.default.createElement(u.default.Fragment,null,u.default.createElement(a.default,{item:!0,xs:12,sm:6},u.default.createElement(c.default,null,"To update the track selection you must restart the game.")),u.default.createElement(a.default,{item:!0,xs:6,sm:4},u.default.createElement(h.default,{color:"white",onClick:()=>{e.gameActions.restart=!0,e.onClose()}},"Restart Game")),u.default.createElement(a.default,{item:!0,xs:12},u.default.createElement(m.default,{gameSettings:e.store.gameSettings,onChange:t=>{e.store.setGameSettings(t)},store:e.store}))),u.default.createElement(a.default,{item:!0,xs:12},u.default.createElement(g.default,{store:e.store,user:t,resetOrientation:e.resetOrientation})),u.default.createElement(a.default,{item:!0,xs:12}),u.default.createElement(a.default,{item:!0,xs:12,style:{textAlign:"center"}},u.default.createElement(h.default,{color:"white",onClick:()=>{console.log("quit game button"),e.socket.emit(v.mts_quit_game,{}),e.socket.disconnect(),e.store.setSocket(void 0),n.push(p.frontPagePath)},startIcon:u.default.createElement(o.default,null)},"Quit game"))):u.default.createElement("div",{style:{margin:"auto",marginTop:15,textAlign:"center"}},u.default.createElement(s.default,null))}},44069:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(7701)),o=r(n(67294)),s=r(n(11632)),a=r(n(75888));t.default=e=>o.default.createElement(s.default,{open:e.open,onClose:e.onClose},e.loading?o.default.createElement("div",{style:{marginTop:25,textAlign:"center"}},o.default.createElement(i.default,null)):o.default.createElement(a.default,{onClose:e.onClose,resetOrientation:e.resetOrientation,userLoggedIn:e.userLoggedIn,socket:e.store.socket,user:e.user,store:e.store,gameActions:e.gameActions}))},91892:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(67294)),l=n(5977),c=n(72132),u=n(17091),d=s(n(63881)),h=n(92891),f=n(87612),p=n(68445),m=n(28468),g=n(72425),v=n(75888),y=s(n(44069));n(98667);const b=s(n(12979)),w=new m.MobileControls,x=new m.GameActions;let _=1;t.default=e=>{var t;const n=(0,l.useHistory)(),r=(0,a.useContext)(f.UserContext),[i,o]=(0,a.useState)({gamma:0,beta:0,alpha:0}),[s,S]=(0,a.useState)(!1),[E,T]=(0,a.useState)(!1),[C,M]=(0,a.useState)(!1),[k,P]=(0,a.useState)(void 0),[A,I]=(0,a.useState)(!1),[R,L]=(0,a.useState)(void 0);if(!(null===(t=e.store)||void 0===t?void 0:t.roomId)&&!g.inTestMode)return n.push(u.frontPagePath),null;(0,a.useEffect)((()=>{const t=window.localStorage.getItem(v.invertedControllerKey);return t&&(_=+t),e.store.socket.on(m.stm_desktop_disconnected,(()=>{c.toast.error("Game disconnected"),e.store.socket.disconnect(),e.store.setSocket(void 0),n.push(u.frontPagePath)})),e.store.socket.on(m.stm_player_info,(t=>{const{player:n}=t;n&&e.store.setPlayer(n)})),()=>{e.store.socket.off(m.stm_desktop_disconnected),e.store.socket.off(m.stm_player_info),window.clearInterval(k)}}),[]),(0,a.useEffect)((()=>{s?clearInterval(k):(()=>{const t=setInterval((()=>{e.store.socket.emit(m.mts_controls,w);const{gamma:t,beta:n,alpha:r}=w;o({gamma:t,beta:n,alpha:r})}),m.MTS_SENDINTERVAL_MS);P(t)})()}),[s]),(0,a.useEffect)((()=>(setTimeout((()=>{const t=e.store.userSettings.vehicleSettings.vehicleType;e.store.socket.emit(m.mts_user_settings_changed,{userSettings:e.store.userSettings,vehicleSetup:e.store.vehiclesSetup[t]})}),1e3),e.store.socket.on(m.stm_player_finished,(t=>{L((0,p.getMedalAndTokens)(t.trackName,t.numberOfLaps,t.totalTime));const n=document.getElementById("medal-data");n.classList.remove("hide"),setTimeout((()=>{n.classList.add("hide"),L(void 0)}),1e4),t.isAuthenticated?(0,h.saveRaceData)(t.playerId,t).then((([n,r])=>{e.store.socket.emit(m.mts_game_data_info,{playerId:t.playerId,gameDataInfo:r,setPersonalBest:n})})):c.toast.warning("Your highscore won't be saved since you are not logged in.")})),e.store.socket.on(m.stm_game_finished,(e=>{(null==r?void 0:r.uid)||console.warn("Player not logged in, cannot save game")})),()=>{e.store.socket.off(m.stm_game_settings_changed_callback),e.store.socket.off(m.stm_game_finished),e.store.socket.off(m.stm_player_finished)})),[]);const O=()=>{e.store.socket.emit(m.mts_send_game_actions,x),x.pause=!1,x.restart=!1};return a.default.createElement(a.default.Fragment,null,a.default.createElement(y.default,{userLoggedIn:()=>{},resetOrientation:()=>{(0,c.toast)("Resetting orientation"),M(!0),I(!A)},open:s,onClose:()=>{(()=>{if(!e.store.player.isLeader)return S(!1),void T(!1);e.store.socket.emit(m.mdts_game_settings_changed,{gameSettings:e.store.gameSettings}),T(!0),g.inTestMode&&(S(!1),T(!1));const t=setTimeout((()=>{S(!1),T(!1)}),1e3);e.store.socket.once(m.stm_game_settings_changed_callback,(()=>{clearTimeout(t),S(!1),T(!1),x.pause=!1,O()}))})()},user:r,store:e.store,socket:e.store.socket,gameActions:x,loading:E}),a.default.createElement(b.default,{handlePausePressed:()=>{e.store.player.isLeader&&(x.pause=!0,O()),S(!0)},gameActions:x,controller:w,orientation:i,resetOrientation:A,raceMedalData:R}),a.default.createElement(d.default,{onMobile:!0,onIphone:(0,g.isIphone)(),showModal:C,onClose:()=>M(!1)}))}},12979:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(96339)),l=s(n(53247)),c=s(n(1849)),u=s(n(31975)),d=o(n(67294)),h=n(72132);n(98667);t.default=e=>{const t=e.controller,[n,r]=(e.orientation,e.gameActions,(0,d.useState)(!1)),[i,o]=(0,d.useState)(!1),[s,f]=(0,d.useState)(!1),p="#ddd",m="#111",[g,v]=(0,d.useState)(!1),[y,b]=(0,d.useState)(""),w=()=>{var e;(null===(e=screen.orientation)||void 0===e?void 0:e.type)?v("portrait"===screen.orientation.type.slice(0,8)):v(0===window.orientation)},x=e=>{var n,r,i;e.preventDefault();const o=null!==(n=e.gamma)&&void 0!==n?n:0,s=null!==(r=e.beta)&&void 0!==r?r:0,a=null!==(i=e.alpha)&&void 0!==i?i:0;null===e.gamma&&0===e.beta&&null===e.alpha&&h.toast.error("Your device orientation is not working. Please reset orientation in settings."),t.alpha=Math.round(a),t.gamma=Math.round(o),t.beta=Math.round(s)},_=(e,n,r)=>{r(e),t[n]=e};(0,d.useEffect)((()=>(w(),window.addEventListener("orientationchange",w),window.addEventListener("deviceorientation",x,{capture:!0}),()=>{window.removeEventListener("deviceorientation",x),window.removeEventListener("orientationchange",w)})),[]),(0,d.useEffect)((()=>{window.removeEventListener("deviceorientation",x,{capture:!0}),setTimeout((()=>{window.addEventListener("deviceorientation",x,{capture:!0})}),150)}),[e.resetOrientation]);const S=null===document.fullscreenElement?screen.availHeight:window.innerHeight,E=null===document.fullscreenElement?screen.availWidth:window.innerWidth,T=g?E:E/3-10,C=g?S/3-10:S,M=E<350?60:90,k={width:T,height:C,lineHeight:C+"px",fontSize:64},P={width:M,height:M,lineHeight:M+"px",fontSize:16},A=g?{transform:"rotate(-90deg)",position:"absolute"}:{},I=g?{top:0}:{bottom:0},R=g?{right:0}:{left:0},L=g?{transform:`translate(0, -${M/2}px)`,top:1.5*C}:{left:1.5*T,transform:`translate(-${M/2}px, 0)`},O=g?{right:35}:{bottom:35},N=g?{right:55+M}:{bottom:55+M},D=g?{left:10,width:100,height:100}:{top:10,height:100,width:100},F=t=>e.transparantButtons?"none":t?p:m;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:"controller-container",style:{overflow:"hidden",zIndex:1e3}},d.default.createElement("div",{id:"fBtn",className:"controller-btn",onTouchStart:e=>{e.preventDefault(),_(!0,"f",r)},onTouchEnd:e=>{e.preventDefault(),_(!1,"f",r)},draggable:!1,style:Object.assign(Object.assign(Object.assign({},k),I),{right:0,color:n?m:p,backgroundColor:F(n),boxShadow:n?"0px 5px #555":"0px 25px #555",transition:".1s"})},d.default.createElement("span",{style:A},"F")),d.default.createElement("div",{className:"controller-btn",onTouchStart:e=>{e.preventDefault(),_(!0,"b",o)},onTouchEnd:e=>{e.preventDefault(),_(!1,"b",o)},draggable:!1,style:Object.assign(Object.assign(Object.assign({},k),R),{bottom:0,color:i?m:p,backgroundColor:F(i),boxShadow:i?"0px -5px #555":"0px -25px #555",transition:".1s"})},d.default.createElement("span",{style:A,className:"controller-btn__text"},"B")),d.default.createElement("div",{className:"controller-btn",onTouchStart:e=>{e.preventDefault(),_(!0,"resetVehicle",f)},onTouchEnd:()=>_(!1,"resetVehicle",f),style:Object.assign(Object.assign(Object.assign(Object.assign({},L),N),P),{color:s?m:p,backgroundColor:F(s)})},d.default.createElement("span",{style:A},d.default.createElement(c.default,{fontSize:"large"}))),d.default.createElement("div",{className:"controller-btn",onClick:()=>{e.handlePausePressed()},style:Object.assign(Object.assign(Object.assign(Object.assign({},O),P),L),{color:p,backgroundColor:F(!1)})},d.default.createElement("span",{style:A},d.default.createElement(l.default,{fontSize:"large"}))),d.default.createElement("div",{style:Object.assign(Object.assign(Object.assign(Object.assign({},O),L),D),{position:"absolute",zIndex:99,backgroundColor:"white",color:"black",padding:4})},d.default.createElement("div",{style:A,className:"hide",id:"medal-data"},e.raceMedalData&&d.default.createElement(d.default.Fragment,null,"none"===e.raceMedalData.medal?"You didn't win any medal":d.default.createElement("span",null,d.default.createElement("strong",null,e.raceMedalData.medal.toUpperCase())," ","medal winner!"),d.default.createElement("br",null),d.default.createElement("span",null,d.default.createElement(a.default,{style:{fontSize:14}})," ",e.raceMedalData.coins.toFixed(0)),d.default.createElement("br",null),d.default.createElement("span",null,d.default.createElement(u.default,{style:{fontSize:14}})," ",e.raceMedalData.XP.toFixed(0)))))))}},78318:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(67294)),l=n(5977),c=n(32701),u=n(17091),d=s(n(91892));t.default=e=>{const t=(0,l.useParams)(),n=(0,l.useHistory)(),{roomId:r}=t;return(0,a.useEffect)((()=>{r&&!e.store.socket&&n.push((0,u.getWaitingRoomPath)(r)),(0,c.clearBackdropCanvas)()}),[]),a.default.createElement(d.default,{store:e.store})}},87612:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.UserContext=void 0;const s=o(n(67294)),a=n(98059),l=n(35742),c=n(38990);t.UserContext=(0,s.createContext)(null);t.default=e=>{const[n,r]=(0,s.useState)(null);return(0,s.useEffect)((()=>{a.auth.onAuthStateChanged((e=>{var t,i;if(a.auth.currentUser&&!n){const e={displayName:a.auth.currentUser.displayName,uid:a.auth.currentUser.uid,photoURL:null!==(t=a.auth.currentUser.photoURL)&&void 0!==t?t:"",email:a.auth.currentUser.email,creationDate:(0,c.getDateNow)(),latestLogin:(0,c.getDateNow)()};r(e),(0,l.setFirestorePrivateUser)(e);const n={displayName:a.auth.currentUser.displayName,uid:a.auth.currentUser.uid,photoURL:null!==(i=a.auth.currentUser.photoURL)&&void 0!==i?i:"",latestLogin:(0,c.getDateNow)(),creationDate:(0,c.getDateNow)()};(0,l.setFirestorePublicUser)(n)}else r(void 0)}));return()=>{}}),[]),s.default.createElement(t.UserContext.Provider,{value:n},e.children)}},39547:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getStyledColors=t.themeOptions=t.basicColor=t.standardColor=t.premiumColor=t.modalBackgroundColorDark=t.modalBackgroundColor=t.modalBackgroundColorLight=t.cardBackgroundColor=t.inputBackgroundColor=t.containerBackgroundColor=t.red4=t.red2=t.red1=t.yellow3=t.yellow2=t.yellow1=t.green4=t.green1=t.blue4=t.orange2=void 0;const i=r(n(56232));t.orange2="#fda000";t.blue4="#185676",t.green1="#d3e9a6";t.green4="#365b13",t.yellow1="#f9f3a6",t.yellow2="#f8e325",t.yellow3="#dfb70a";const o="#d9a17b";t.red1="#fb4a1",t.red2="#dc5a3a";t.red4="#7e1a09",t.containerBackgroundColor=t.yellow1,t.inputBackgroundColor="#f8d5c9",t.cardBackgroundColor=t.yellow3,t.modalBackgroundColorLight=o,t.modalBackgroundColor="#f1bca9",t.modalBackgroundColorDark=o,t.premiumColor="#4b93b8",t.standardColor="#8ec6e2",t.basicColor="#c4d9e1",t.themeOptions=(0,i.default)({typography:{fontFamily:"monospace"},palette:{primary:{main:"#777",light:"#777",dark:"#777"},secondary:{main:"#777",light:"#777",dark:"#777"}}});t.getStyledColors=e=>({color:"black"===e?"white":"black",backgroundColor:"black"===e?"rgba(0,0,0,0.85)":"rgba(255,255,255,0.83)"})},68445:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTokenData=t.getMedalAndTokens=t.getMedal=void 0;const n={"farm-track":{gold:20,silver:25,bronze:30,weight:1},"basic-track1":{gold:17,silver:20,bronze:22,weight:.9},"basic-track2":{gold:23,silver:25,bronze:27,weight:1.3},"basic-track3":{gold:22.7,silver:25,bronze:28.5,weight:1.3},"basic-track4":{gold:22.7,silver:25,bronze:28.5,weight:1.3},"f1-track":{gold:21,silver:29,bronze:35,weight:1},"f1-track-2":{gold:27.2,silver:31,bronze:35,weight:1.4},"sea-side-track":{gold:52,silver:62,bronze:69,weight:2.1},"russia-track":{gold:28.5,silver:33,bronze:39,weight:1.45},"ferrari-track":{gold:41.5,silver:48,bronze:55,weight:1.7},"spa-track":{gold:45,silver:55,bronze:65,weight:1.8},"nurn-track":{gold:23,silver:28,bronze:33,weight:1.1},"town-track":{gold:1e3,silver:1e3,bronze:1e3,weight:0},"monaco-track":{gold:1e3,silver:1e3,bronze:1e3,weight:0},"farmers-little-helper-map":{gold:1e3,silver:1e3,bronze:1e3,weight:0},"speed-test-track":{gold:1e3,silver:1e3,bronze:1e3,weight:0},"skii-map":{gold:1e3,silver:1e3,bronze:1e3,weight:0},"small-track":{gold:5,silver:10,bronze:15,weight:.1},"small-jump-track":{gold:1e3,silver:1e3,bronze:1e3,weight:0},"test-course":{gold:1e3,silver:1e3,bronze:1e3,weight:0},"simple-tag-course":{gold:1e3,silver:1e3,bronze:1e3,weight:0},"basic-tag-course":{gold:1e3,silver:1e3,bronze:1e3,weight:0}};t.getMedal=(e,t,r)=>{if(e in n){const{gold:i,silver:o,bronze:s}=n[e];return 1===t?r<i+3?"gold":r<o+3?"silver":r<s+3?"bronze":"none":r<i*t?"gold":r<o*t?"silver":r<s*t?"bronze":"none"}return"none"};const r={gold:200,silver:100,bronze:50,none:15},i=(e,t)=>Math.floor(10*Math.pow(t,1.1))*n[e].weight;t.getMedalAndTokens=(e,o,s)=>{const a=(0,t.getMedal)(e,o,s),l=n[e].weight;return{coins:Math.floor(r[a]*Math.pow(o,1.1))*l,XP:i(e,o),medal:a}},t.defaultTokenData={gold:0,silver:0,bronze:0,none:0,XP:0,coins:0}},11490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allCosts=t.getDefaultOwnership=t.getDefaultVehicleColorOwnership=t.getDefaultTrackOwnership=t.getDefaultVehicleOwnership=void 0;const r=n(28468);function i(e,t){for(let n of t)if(n===e)return!0;return!1}const o=["f1","normal2","offRoader"];t.getDefaultVehicleOwnership=()=>{const e={};for(let t of r.allVehicleTypes)e[t.type]=i(t.type,o);return e};const s=["farm-track","nurn-track","f1-track","sea-side-track","simple-tag-course"];t.getDefaultTrackOwnership=()=>{const e={};for(let t of r.allTrackNames)e[t.type]=i(t.type,s);return e};const a=["#1d8a47","#8b0000"];t.getDefaultVehicleColorOwnership=()=>{const e={};for(let t of r.vehicleColors)e[t.value]=i(t.value,a);return e};const l={"#1d8a47":0,"#8b0000":0,"#185676":0,"#f07900":50,"#61f72a":10,"#bf923b":100,"#97b0ba":2*Math.pow(10,6)};t.getDefaultOwnership=()=>Object.assign(Object.assign(Object.assign({},(0,t.getDefaultVehicleOwnership)()),(0,t.getDefaultTrackOwnership)()),(0,t.getDefaultVehicleColorOwnership)()),t.allCosts=Object.assign(Object.assign(Object.assign({},{f1:0,normal:0,tractor:50,test:0,offRoader:0,sportsCar:3e3,normal2:0,simpleSphere:500,simpleCylindar:5e4,gokart:3e3,future:2e4}),{"farm-track":0,"basic-track1":0,"basic-track2":100,"basic-track3":5e3,"basic-track4":1e4,"f1-track":0,"sea-side-track":0,"f1-track-2":500,"russia-track":1e4,"ferrari-track":1e3,"spa-track":1e4,"nurn-track":0,"speed-test-track":0,"small-track":0,"small-jump-track":0,"farmers-little-helper-map":0,"skii-map":0,"monaco-track":1e8,"town-track":0,"test-course":0,"simple-tag-course":0,"basic-tag-course":4e4}),l)},28468:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mts_quit_game=t.std_quit_game=t.stmd_number_connected=t.mdts_number_connected=t.stm_player_info=t.dts_back_to_waiting_room=t.stmd_waiting_room_alert=t.mts_connected_to_waiting_room=t.std_player_disconnected=t.stm_desktop_disconnected=t.mdts_left_waiting_room=t.dts_vehicles_ready=t.std_ping_test_callback=t.dts_ping_test=t.stm_ping_test_callback=t.mts_ping_test=t.mts_user_settings_changed=t.std_user_settings_changed=t.std_game_data_info=t.mts_game_data_info=t.stm_game_finished=t.dts_game_finished=t.stm_player_finished=t.dts_player_finished=t.mts_controls=t.std_controls=t.stmd_game_starting=t.std_start_game_callback=t.mdts_start_game=t.stm_player_connected_callback=t.mts_player_connected=t.stmd_players_in_room_callback=t.mdts_players_in_room=t.mdts_device_type=t.dts_create_room=t.std_room_created_callback=t.dts_game_highscore=t.stmd_socket_ready=t.GameActions=t.playerInfoToPreGamePlayerInfo=t.VehicleControls=t.MobileControls=t.getItemName=t.getColorNameFromType=t.vehicleColors=t.defaultVehicleType=t.allVehicleTypes=t.getTrackInfos=t.allTrackNames=t.possibleTrackCategories=void 0,t.MTS_SENDINTERVAL_MS=t.STD_SENDINTERVAL_MS=t.std_send_game_actions=t.mts_send_game_actions=t.stm_game_settings_changed_callback=t.dts_game_settings_changed_callback=t.stmd_game_settings_changed=t.mdts_game_settings_changed=t.stm_back_to_waiting_room=void 0,t.possibleTrackCategories=[{category:"basic",name:"Basic"},{category:"long",name:"Long"},{category:"short",name:"Short"}],t.allTrackNames=[{name:"Test",type:"test-course",gameType:"race",category:"basic"},{name:"Farm track",type:"farm-track",gameType:"race",category:"short"},{name:"Basic track",type:"basic-track1",gameType:"race",category:"basic"},{name:"Basic track 2",type:"basic-track2",gameType:"race",category:"basic"},{name:"Basic track 3",type:"basic-track3",gameType:"race",category:"basic"},{name:"Basic track 4",type:"basic-track4",gameType:"race",category:"basic"},{name:"German track",type:"nurn-track",gameType:"race",category:"short"},{name:"F1 track",type:"f1-track",gameType:"race",category:"short"},{name:"F1 track-2",type:"f1-track-2",gameType:"race",category:"short"},{name:"Beach track",type:"sea-side-track",gameType:"race",category:"long"},{name:"Town track",type:"town-track",gameType:"race",category:"long"},{name:"Monaco track",type:"monaco-track",gameType:"race",category:"long"},{name:"Mountain track",type:"russia-track",gameType:"race",category:"short"},{name:"Desert track",type:"spa-track",gameType:"race",hemisphereRadius:1200,category:"long"},{name:"Winter track",type:"ferrari-track",gameType:"race",timeOfDay:"evening",category:"long"},{name:"Ski map",type:"skii-map",gameType:"race",timeOfDay:"day",category:"long"},{name:"Farmers little helper",type:"farmers-little-helper-map",gameType:"story",hemisphereRadius:2e3,category:"long"},{name:"Small track",type:"small-track",gameType:"race",category:"short"},{name:"Tag course",type:"simple-tag-course",gameType:"tag",category:"short"},{name:"Basic tag course",type:"basic-tag-course",gameType:"tag",category:"basic"}];t.getTrackInfos=e=>e.map((e=>{for(let n of t.allTrackNames)if(n.type===e)return n})),t.allVehicleTypes=[{name:"MacNormie",type:"normal2"},{name:"Old Normie",type:"normal"},{name:"Trakkie Tractor",type:"tractor"},{name:"Phil the Phast",type:"f1"},{name:"test",type:"test"},{name:"Jackie",type:"future"},{name:"Big girl Sally",type:"offRoader"},{name:"Thunderparrot",type:"sportsCar"},{name:"Goonie",type:"gokart"},{name:"Round Betty",type:"simpleSphere",vehicleClass:"Sphere"},{name:"Cylindar Jonny",type:"simpleCylindar",vehicleClass:"Sphere"}],t.defaultVehicleType="normal2",t.vehicleColors=[{name:"Olive",value:"#1d8a47"},{name:"Ruby",value:"#8b0000"},{name:"Sadness",value:"#185676"},{name:"Rage",value:"#f07900"},{name:"Synthetic happiness",value:"#61f72a"},{name:"Real happiness",value:"#97b0ba"},{name:"Wheat",value:"#bf923b"}];t.getColorNameFromType=e=>{for(let n of t.vehicleColors)if(n.value===e)return n.name;return"Unknown color"};t.getItemName=e=>{for(let n of t.vehicleColors)if(n.value===e)return n.name;for(let n of t.allVehicleTypes)if(n.type===e)return n.name;for(let n of t.allTrackNames)if(n.type===e)return n.name;return e};t.MobileControls=class{constructor(e){if(this.beta=0,this.gamma=0,this.alpha=0,this.f=!1,this.b=!1,this.resetVehicle=!1,e){const t=Object.keys(e);for(let n of t)this[n]=e[n]}}};t.VehicleControls=class{constructor(){this.f=!1,this.b=!1,this.steerValue=0,this.left=!1,this.right=!1}};t.playerInfoToPreGamePlayerInfo=e=>{const{playerName:t,teamName:n,teamNumber:r,playerNumber:i,id:o,isAuthenticated:s,vehicleType:a,photoURL:l,vehicleSetup:c}=e;return{playerName:null!=t?t:"undefined",teamName:null!=n?n:"undefined",teamNumber:null!=r?r:-1,playerNumber:null!=i?i:-1,id:null!=o?o:"undefined",isAuthenticated:null!=s&&s,vehicleType:null!=a?a:"test",photoURL:null!=l?l:"",vehicleSetup:null!=c?c:{vehicleType:"test"}}};t.GameActions=class{constructor(){this.pause=!1,this.restart=!1}},t.stmd_socket_ready="stmd_socket_ready",t.dts_game_highscore="dts_game_highscore",t.std_room_created_callback="std_room_created_callback",t.dts_create_room="dts_create_room",t.mdts_device_type="mdts_device_type",t.mdts_players_in_room="mdts_players_in_room",t.stmd_players_in_room_callback="stmd_players_in_room_callback",t.mts_player_connected="mts_player_connected",t.stm_player_connected_callback="stm_player_connected_callback",t.mdts_start_game="mdts_start_game",t.std_start_game_callback="stmd_start_game_callback",t.stmd_game_starting="stmd_game_starting",t.std_controls="std_controls",t.mts_controls="mts_controls",t.dts_player_finished="dts_player_finished",t.stm_player_finished="stm_player_finished",t.dts_game_finished="dts_game_finished",t.stm_game_finished="stm_game_finished",t.mts_game_data_info="mts_game_data_info",t.std_game_data_info="std_game_data_info",t.std_user_settings_changed="std_user_settings_changed",t.mts_user_settings_changed="mts_user_settings_changed",t.mts_ping_test="mts_ping_test",t.stm_ping_test_callback="stm_ping_test_callback",t.dts_ping_test="dts_ping_test",t.std_ping_test_callback="std_ping_test_callback",t.dts_vehicles_ready="dts_vehicles_ready",t.mdts_left_waiting_room="mdts_left_waiting_room",t.stm_desktop_disconnected="stm_desktop_disconnected",t.std_player_disconnected="std_player_disconnected",t.mts_connected_to_waiting_room="mts_connected_to_waiting_room",t.stmd_waiting_room_alert="stmd_waiting_room_alert",t.dts_back_to_waiting_room="dts_back_to_waiting_room",t.stm_player_info="stm_player_info",t.mdts_number_connected="mdts_number_connected",t.stmd_number_connected="stmd_number_connected",t.std_quit_game="std_quit_game",t.mts_quit_game="mts_quit_game",t.stm_back_to_waiting_room="stm_back_to_waiting_room",t.mdts_game_settings_changed="mdts_game_settings_changed",t.stmd_game_settings_changed="stmd_game_settings_changed",t.dts_game_settings_changed_callback="mts_game_settings_changed_callback",t.stm_game_settings_changed_callback="stm_game_settings_changed_callback",t.mts_send_game_actions="mts_send_game_actions",t.std_send_game_actions="std_send_game_actions",t.STD_SENDINTERVAL_MS=1e3/60,t.MTS_SENDINTERVAL_MS=1e3/60},81135:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStatsFromSetup=t.defaultItemsOwnership=t.getDefaultItemsOwnership=t.vehicleItems=t.possibleVehicleMods=t.getVehicleItemNameFromType=t.possibleVehicleItemTypes=void 0,t.possibleVehicleItemTypes=["exhaust","spoiler","wheelGuards"];t.getVehicleItemNameFromType=e=>{switch(e){case"exhaust":return"Exhaust";case"spoiler":return"Spoiler";case"wheelGuards":return"Wheel guards";default:return e}};t.possibleVehicleMods=[{name:"Acceleration",type:"engineForce",max:12e3,min:3e3},{name:"Speed",type:"maxSpeed",max:400,min:100},{name:"Mass",type:"mass",max:1200,min:0},{name:"Handling",type:"frictionSlip",max:22,min:0},{name:"Suspension stiffness",type:"suspensionStiffness",max:180,min:30},{name:"Suspension Rest Length",type:"suspensionRestLength",min:0,max:2}];t.vehicleItems={normal:{},tractor:{},f1:{exhaust1:{id:"f1-exhaust1",path:"exhaust1",name:"Jimmy",type:"exhaust",cost:10,engineForce:50,mass:25,maxSpeed:2},exhaust2:{id:"f1-exhaust2",path:"exhaust2",type:"exhaust",name:"Jonny",engineForce:220,cost:200,maxSpeed:4},exhaust3:{id:"f1-exhaust3",path:"exhaust3",type:"exhaust",name:"Eve",cost:500,engineForce:300,frictionSlip:-1,maxSpeed:8},exhaust4:{id:"f1-exhaust4",path:"exhaust4",type:"exhaust",name:"Eva",cost:2e3,engineForce:400,frictionSlip:-1,suspensionRestLength:-.05,maxSpeed:12},exhaust5:{id:"f1-exhaust5",path:"exhaust5",type:"exhaust",name:"Everlyn",cost:5e3,engineForce:600,frictionSlip:-2,maxSpeed:25},spoiler1:{id:"f1-spoiler1",path:"spoiler1",type:"spoiler",name:"Steve",cost:150,frictionSlip:2,mass:100},spoiler2:{id:"f1-spoiler2",path:"spoiler2",type:"spoiler",name:"Summer",cost:500,frictionSlip:2.2,mass:120},spoiler3:{id:"f1-spoiler3",path:"spoiler3",type:"spoiler",name:"Sonja",cost:500,frictionSlip:2.3,mass:130},spoiler4:{id:"f1-spoiler4",path:"spoiler4",type:"spoiler",name:"Sarah",cost:2500,frictionSlip:3,mass:230,engineForce:250},wheelGuards1:{id:"f1-wheelGuards1",path:"wheelGuards1",type:"wheelGuards",name:"Willis",cost:2500,frictionSlip:1,mass:-75,engineForce:-50,suspensionRestLength:.2},wheelGuards2:{id:"f1-wheelGuards2",path:"wheelGuards2",type:"wheelGuards",name:"Wendy",cost:2e4,frictionSlip:1.5,mass:-100,engineForce:25,suspensionRestLength:.2}},test:{},offRoader:{spoiler1:{id:"offRoader-spoiler1",path:"spoiler1",type:"spoiler",name:"Steve",cost:150,frictionSlip:2,mass:10,engineForce:100},spoiler2:{id:"offRoader-spoiler2",path:"spoiler2",type:"spoiler",name:"Fry",cost:500,frictionSlip:2.5,mass:20,engineForce:120},exhaust1:{id:"offRoader-exhaust1",path:"exhaust1",name:"Jimmy",type:"exhaust",cost:10,engineForce:50,mass:100},exhaust2:{id:"offRoader-exhaust2",path:"exhaust2",type:"exhaust",name:"Jonny",engineForce:220,cost:200},exhaust3:{id:"offRoader-exhaust3",path:"exhaust3",type:"exhaust",name:"Eve",cost:500,engineForce:300,frictionSlip:-1},exhaust4:{id:"offRoader-exhaust4",path:"exhaust4",type:"exhaust",name:"Eva",cost:2e3,engineForce:200,frictionSlip:-1,suspensionRestLength:-.05}},sportsCar:{exhaust1:{path:"exhaust1",id:"sportsCar-exhaust1",name:"Willie",type:"exhaust",cost:10,engineForce:100,maxSpeed:10},exhaust2:{path:"exhaust2",id:"sportsCar-exhaust2",type:"exhaust",name:"Jonny",engineForce:200,cost:200,maxSpeed:11},exhaust3:{id:"sportsCar-exhaust3",path:"exhaust3",name:"Executive",type:"exhaust",cost:800,engineForce:300,mass:110,frictionSlip:-1,maxSpeed:-5},exhaust4:{id:"sportsCar-exhaust4",path:"exhaust4",type:"exhaust",name:"Ernie Johnson",engineForce:350,mass:80,maxSpeed:-5,cost:1e3},exhaust5:{id:"sportsCar-exhaust5",path:"exhaust5",type:"exhaust",name:"Sad Charlie",engineForce:380,frictionSlip:-1,maxSpeed:-1,mass:100,cost:2e5},spoiler1:{id:"sportsCar-spoiler1",path:"spoiler1",type:"spoiler",name:"Steve",cost:150,frictionSlip:2,mass:100,engineForce:-100,maxSpeed:-15},spoiler2:{id:"sportsCar-spoiler2",path:"spoiler2",type:"spoiler",name:"Summer",cost:500,frictionSlip:3.2,mass:-120,engineForce:-100,maxSpeed:-10},spoiler3:{id:"sportsCar-spoiler3",path:"spoiler3",type:"spoiler",name:"Sonja",cost:500,frictionSlip:2.3,mass:-130,engineForce:-80,maxSpeed:2},spoiler4:{id:"sportsCar-spoiler4",path:"spoiler4",type:"spoiler",name:"Sarah",cost:2500,frictionSlip:3,mass:230,engineForce:-120,maxSpeed:-2},spoiler5:{id:"sportsCar-spoiler5",path:"spoiler5",type:"spoiler",name:"Sylvester",cost:5e3,frictionSlip:3,mass:80,engineForce:150},wheelGuards1:{id:"sportsCar-wheelGuards1",path:"wheelGuards1",type:"wheelGuards",name:"Willis",cost:2500,frictionSlip:2,mass:-75,engineForce:-50,suspensionRestLength:.2}},normal2:{exhaust1:{id:"normal2-exhaust1",path:"exhaust1",name:"Jimmy",type:"exhaust",cost:10,engineForce:50,mass:100,maxSpeed:40},exhaust2:{id:"normal2-exhaust2",path:"exhaust2",type:"exhaust",name:"Jonny",engineForce:220,cost:200,maxSpeed:35},exhaust3:{id:"normal2-exhaust3",path:"exhaust3",type:"exhaust",name:"Eve",cost:500,engineForce:300,frictionSlip:-1,maxSpeed:30},exhaust4:{id:"normal2-exhaust4",path:"exhaust4",type:"exhaust",name:"Cofefe",cost:2e3,engineForce:500,frictionSlip:-1,mass:50,suspensionRestLength:-.05,maxSpeed:100},exhaust5:{id:"normal2-exhaust5",path:"exhaust5",type:"exhaust",name:"Crazy Cofefe",cost:1e4,engineForce:800,frictionSlip:-1,suspensionRestLength:-.05,mass:25,maxSpeed:110},spoiler1:{id:"normal2-spoiler1",path:"spoiler1",type:"spoiler",name:"Steve",cost:150,frictionSlip:2,mass:100,engineForce:-1e3},spoiler2:{id:"normal2-spoiler2",path:"spoiler2",type:"spoiler",name:"Summer",cost:500,frictionSlip:3.2,mass:-120,engineForce:-1500},spoiler3:{id:"normal2-spoiler3",path:"spoiler3",type:"spoiler",name:"Sonja",cost:500,frictionSlip:2.3,mass:130},wheelGuards1:{id:"normal2-wheelGuards1",path:"wheelGuards1",type:"wheelGuards",cost:2e4,name:"Wonkie",frictionSlip:3,engineForce:1e3,mass:-50},wheelGuards2:{id:"normal2-wheelGuards2",path:"wheelGuards2",type:"wheelGuards",cost:25e3,name:"Bonkie",frictionSlip:-2,engineForce:1200,mass:-150},wheelGuards3:{id:"normal2-wheelGuards3",path:"wheelGuards3",type:"wheelGuards",cost:35e3,name:"Schlonkie",frictionSlip:3.8,engineForce:1500,mass:120,suspensionRestLength:1,suspensionStiffness:20}},simpleSphere:{spoiler1:{id:"simpleSphere-spoiler1",path:"spoiler1",type:"spoiler",name:"Lincon",cost:5e3,engineForce:50,mass:18},spoiler2:{id:"simpleSphere-spoiler2",path:"spoiler2",type:"spoiler",name:"Peter",cost:7500,engineForce:75,mass:12},exhaust1:{id:"simpleSphere-exhaust1",path:"exhaust1",name:"Oogle",type:"exhaust",cost:1500,engineForce:50,mass:10}},simpleCylindar:{},gokart:{spoiler1:{id:"gokart-spoiler1",path:"spoiler1",type:"spoiler",name:"Steve",cost:150,frictionSlip:2,mass:10,engineForce:100},spoiler2:{id:"gokart-spoiler2",path:"spoiler2",type:"spoiler",name:"Fry",cost:500,frictionSlip:2.5,mass:20,engineForce:120},exhaust1:{id:"gokart-exhaust1",path:"exhaust1",name:"Jimmy",type:"exhaust",cost:10,engineForce:50,mass:100},exhaust2:{id:"gokart-exhaust2",path:"exhaust2",type:"exhaust",name:"Jonny",engineForce:220,cost:200},exhaust3:{id:"gokart-exhaust3",path:"exhaust3",type:"exhaust",name:"Eve",cost:500,engineForce:300,frictionSlip:-1},exhaust4:{id:"gokart-exhaust4",path:"exhaust4",type:"exhaust",name:"Eva",cost:2e3,engineForce:200,frictionSlip:-1,suspensionRestLength:-.05},wheelGuards1:{id:"gokart-wheelGuards1",path:"wheelGuards1",type:"wheelGuards",name:"Willis",cost:2500,frictionSlip:1,mass:-75,engineForce:-50,suspensionRestLength:.2},wheelGuards2:{id:"gokart-wheelGuards2",path:"wheelGuards2",type:"wheelGuards",name:"Billis",cost:2500,frictionSlip:1,mass:-75,engineForce:-50,suspensionRestLength:.2}},future:{}};t.getDefaultItemsOwnership=e=>{const n=Object.keys(t.vehicleItems[e]),r={};for(let e of n)r[e]=!1;return r},t.defaultItemsOwnership={normal:void 0,tractor:void 0,f1:void 0,test:void 0,offRoader:void 0,sportsCar:void 0,normal2:void 0,simpleSphere:void 0,simpleCylindar:void 0,gokart:void 0,future:void 0};t.getStatsFromSetup=e=>{var n,r;const i={};for(let o of t.possibleVehicleItemTypes)if(e[o])for(let s of t.possibleVehicleMods)void 0===i[s.type]&&(i[s.type]=0),(null===(n=null==e?void 0:e[o])||void 0===n?void 0:n[s.type])&&(i[s.type]+=null!==(r=e[o][s.type])&&void 0!==r?r:0);return i}},44482:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.pauseMusic=t.startMusic=t.removeMusic=t.stopMusic=t.setMusicVolume=t.addMusic=t.loadMusic=t.getBeep=t.loadSkidSoundBuffer=t.loadEngineSoundBuffer=void 0;const i=n(2212),o=n(72425),s=new i.AudioLoader;let a;t.loadEngineSoundBuffer=()=>new Promise(((e,t)=>{s.load((0,o.getStaticPath)("sound/engine.mp3"),(t=>{a=t,e(a)}),(()=>{}),(e=>{console.warn("Error loading engine sound."),t()}))}));t.loadSkidSoundBuffer=()=>new Promise(((e,t)=>{s.load((0,o.getStaticPath)("sound/skid5.ogg"),(t=>{a=t,e(a)}),(()=>{}),(e=>{console.warn("Error loading skid sound."),t()}))}));t.getBeep=(e,t,n)=>r(void 0,void 0,void 0,(function*(){s.load(e,(e=>{const r=new i.Audio(t);r.setBuffer(e),r.setLoop(!1),r.setVolume(.5),n(r)}))}));let l;t.loadMusic=e=>new Promise(((t,n)=>{s.load((0,o.getStaticPath)(`music/${e}`),(e=>{a=e,t(a)}),(()=>{}),(t=>{console.warn("Error loading music sound.",e),n()}))}));t.addMusic=(e,n,r,s)=>{if(n&&"desktop"===(0,o.getDeviceType)()&&!l){const o=new i.AudioListener;n.add(o),l=new i.Audio(o),(0,t.loadMusic)(r).then((t=>{l.setBuffer(t),l.setLoop(!0),l.setVolume(e),s||l.play()}))}};t.setMusicVolume=e=>{isFinite(e)||(e=0),null==l||l.setVolume(e)};t.stopMusic=()=>{null==l||l.stop()};t.removeMusic=()=>{null==l||l.stop(),l=void 0};t.startMusic=()=>{null==l||l.play()};t.pauseMusic=()=>{null==l||l.pause()}},81441:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DriveRecorder=t.GhostDriver=void 0;const i=n(2212),o=n(12743),s=n(81135),a=n(17246);t.GhostDriver=class{constructor(e,t,n){this.timeIndex=1,this.numNotUpdates=0,this.nextPointSet=!1,this.filename=`recording_${e}_${t}_${n}.txt`,this.di=[],this.pos=new i.Vector3(0,0,0),this.rotation=new i.Quaternion(0,0,0,0),this.nextPos=new i.Vector3(0,0,0),this.nextRotation=new i.Quaternion(0,0,0,0),this.betweenPos=new i.Vector3(0,0,0),this.betweenRot=new i.Quaternion(0,0,0,0),this.isReady=!1,this.hasInstructions=!1}loadVechileConfig(e){return r(this,void 0,void 0,(function*(){fetch(`vehicleconfig/${e}`).then((e=>e.json())).then((e=>{}))}))}loadDriveInstructions(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,i)=>r(this,void 0,void 0,(function*(){t?(yield this.loadTournamentInstructions(e),n()):(0,o.downloadGhost)(e).then((e=>{this.isReady=!0,(null==e?void 0:e.length)?(this.di=e,this.hasInstructions=!0):this.hasInstructions=!1,n()})).catch((e=>{console.warn("Error getting ghost:",e),i()}))}))))}))}loadTournamentInstructions(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{(0,o.getTournamentGhost)(e).then((e=>{this.isReady=!0,(null==e?void 0:e.length)?(this.di=e,this.hasInstructions=!0):this.hasInstructions=!1,t()})).catch((e=>{console.warn("Error getting tournament ghost, err:",e),n()}))}))}))}getVehicleType(){if(!this.di||this.di.length<1)return;const e=this.di[0].split(" ")[0];return(0,a.isVehicleType)(e)?(this.vehicleType=e,e):void 0}reset(){this.pos=new i.Vector3(0,0,0),this.rotation=new i.Quaternion(0,0,0,0),this.nextPos=new i.Vector3(0,0,0),this.nextRotation=new i.Quaternion(0,0,0,0),this.betweenPos=new i.Vector3(0,0,0),this.betweenRot=new i.Quaternion(0,0,0,0),this.isReady=!0,this.timeIndex=1}getTime(e){return 0===this.di.length?1e3:+this.di[e].split(" ")[0]}setPositionRotationFromInstruction(e,t,n){const r=e.split(" ");t.set(+r[1],+r[2],+r[3]),n.set(+r[4],+r[5],+r[6],+r[7])}getPointBetween(e){!this.nextPointSet&&this.timeIndex<this.di.length&&(this.setPositionRotationFromInstruction(this.di[this.timeIndex],this.nextPos,this.nextRotation),this.nextPointSet=!0);const t=this.getTime(this.timeIndex),n=this.getTime(this.timeIndex-1),r=(e-n)/(t-n);r<=1&&(this.betweenPos=this.pos.clone().lerp(this.nextPos,r),this.betweenRot=this.rotation.clone().slerp(this.nextRotation,r))}setToStart(e){!this.hasInstructions||this.di.length<2?console.warn("Can't set ghost vehicle to start, since have not got instructions"):(this.setPositionRotationFromInstruction(this.di[1],this.pos,this.rotation),e.setPosition(this.pos.clone()),e.setRotation(this.rotation.clone()))}setPlace(e,t,n){if(!this.hasInstructions)return;const r=this.getTime(this.timeIndex);this.timeIndex<this.di.length-1&&r<=t?(this.setPositionRotationFromInstruction(this.di[this.timeIndex],this.pos,this.rotation),this.timeIndex+=1,this.nextPointSet=!1,this.getPointBetween(t),e.setPosition(this.betweenPos.clone()),e.setRotation(this.betweenRot.clone())):r>t&&(this.getPointBetween(t),e.setPosition(this.betweenPos.clone()),e.setRotation(this.betweenRot.clone()))}};t.DriveRecorder=class{constructor(e){this.finishedLaps=0,this.getDriveInstruction=(e,t)=>{const n=t.getPosition(),r=t.getRotation();return`${e.toFixed(2)} ${n.x.toFixed(1)} ${n.y.toFixed(1)} ${n.z.toFixed(1)} ${r.x.toFixed(2)} ${r.y.toFixed(2)} ${r.z.toFixed(2)} ${r.w.toFixed(2)}`},this.saveTournamentRecording=(e,t,n)=>{const r=[this.getMetadata()];(0,o.uploadTournamentGhost)(this.config.tournamentId,r.concat(this.instructions),e)},this.saveRecordedInstructions=()=>{const e=[this.getMetadata()],t=this.getRecordingFilename();(0,o.uploadGhost)(t,e.concat(this.instructions))},this.config=e,this.instructions=[],this.prevTime=-1}record(e,t){this.config.active&&t-this.prevTime>.15&&(this.instructions.push(this.getDriveInstruction(t,e)),this.prevTime=t)}reset(){this.finishedLaps=0}goalCrossed(){this.config.active&&(this.finishedLaps+=1,this.config.numberOfLaps===this.finishedLaps&&this.config.tournamentId)}getMetadata(){var e,t,n;let r="";for(let n of s.possibleVehicleItemTypes)(null===(e=this.config.vehicleSetup[n])||void 0===e?void 0:e.path)?r+=`${null===(t=this.config.vehicleSetup[n])||void 0===t?void 0:t.path} `:r+=`no-${n} `;return`${this.config.vehicleType} ${this.config.numberOfLaps} ${this.config.trackName} ${null!==(n=this.config.tournamentId)&&void 0!==n?n:"no-tournament"} ${this.config.playerName} ${this.config.playerId} ${r}`}getRecordingFilename(){return`${this.config.playerId}/${this.config.trackName}/${this.config.numberOfLaps}`}static GetTrackNameNumberOfLapsFromFilename(e){if(!e)return{trackName:void 0,numberOfLaps:void 0};const t=e.split("/");return t.length<3?{trackName:void 0,numberOfLaps:void 0}:{trackName:t[1],numberOfLaps:+t[2]}}}},9938:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.startLowPolyTest=exports.LowPolyTestScene=void 0;const enable3d_1=__webpack_require__(96515),react_toastify_1=__webpack_require__(72132),OrbitControls_1=__webpack_require__(69365),Game_1=__webpack_require__(23053),localGameSettings_1=__webpack_require__(7735),RaceCourse_1=__webpack_require__(55284),StoryCourse_1=__webpack_require__(39861),TagCourse_1=__webpack_require__(87626);__webpack_require__(21793);const GameScene_1=__webpack_require__(12213),GameTimeClass_1=__webpack_require__(19127),shared_stuff_1=__webpack_require__(28468),GhostVehicle_1=__webpack_require__(38045),LowPolyTestVehicle_1=__webpack_require__(72969),LowPolyVehicle_1=__webpack_require__(59711),SphereTestVehicle_1=__webpack_require__(50572),SphereVehicle_1=__webpack_require__(95782),VehicleConfigs_1=__webpack_require__(17246),Wagon_1=__webpack_require__(76431);__webpack_require__(57999);const testControls_1=__webpack_require__(94790),GhostDriver_1=__webpack_require__(81441),testVehicleInputs_1=__webpack_require__(10710),vehicleItems_1=__webpack_require__(81135),vechicleFov=60;let tA=0;const scoreTable=document.createElement("div"),lapTimeDiv=document.createElement("div"),bestLapTimeDiv=document.createElement("div"),vehicleInputsContainer=document.createElement("div");document.body.appendChild(vehicleInputsContainer);let recording=!0,playRecording=!0;class LowPolyTestScene extends GameScene_1.GameScene{constructor(){var _a,_b,_c;super(),this.isPaused=!1,this.vehicleColorNumber=0,this.numberOfOtherVehicles=1,scoreTable.setAttribute("id","score-info"),lapTimeDiv.setAttribute("id","lap-time"),bestLapTimeDiv.setAttribute("id","best-lap-time"),this.updateScoreTable(),document.body.appendChild(scoreTable),document.body.append(lapTimeDiv),document.body.append(bestLapTimeDiv),this.raceStarted=!1,this.checkpointCrossed=!1,this.goalCrossed=!1,this.bestLapTime=1e4,this.canStartUpdate=!1,this.gameSettings=localGameSettings_1.defaultGameSettings,this.gameSettings.ghostFilename="ef74239e",this.gameSettings.useGhost=!0,this.currentLaptime=0,this.timeStarted=0,this.useShadows=!0,this.vehicleType=null!==(_a=window.localStorage.getItem("vehicleType"))&&void 0!==_a?_a:shared_stuff_1.defaultVehicleType,this.mobileControls=new shared_stuff_1.MobileControls,this.gameTime=new GameTimeClass_1.GameTime(3,1),this.trackName=null!==(_b=window.localStorage.getItem("trackName"))&&void 0!==_b?_b:"test-course",this.usingDebug=null===(_c=eval(window.localStorage.getItem("usingDebug")))||void 0===_c||_c,this.gameType=this.getGameType(),this.otherVehicles=[],this.otherDrivers=[],this.isIt=0,this.ghostDriver=new GhostDriver_1.GhostDriver(this.trackName,this.getNumberOfLaps(),this.vehicleType),this.ghostVehicle=new GhostVehicle_1.GhostVehicle({vehicleType:"f1",color:"#10eedd"}),this.driverRecorder=new GhostDriver_1.DriveRecorder({tournamentId:"low poly test",active:recording,trackName:this.getTrackName(),vehicleType:this.vehicleType,numberOfLaps:this.getNumberOfLaps(),playerId:"test",playerName:"test",vehicleSetup:{vehicleType:"normal"}})}getNumberOfLaps(){return 1}preload(){var e;return __awaiter(this,void 0,void 0,(function*(){this.usingDebug&&(null===(e=this.physics.debug)||void 0===e||e.enable()),yield this.warpSpeed("-ground","-light","-sky"),this.addLights();new OrbitControls_1.OrbitControls(this.camera,this.renderer.domElement);window.addEventListener("resize",(()=>this.onWindowResize())),document.addEventListener("keypress",(e=>{if("r"===e.key)this.resetPlayer(0);else if("t"===e.key);else if("p"===e.key)this.vehicle.isPaused?(this.vehicle.unpause(),this.gameTime.start()):(this.vehicle.pause(),this.gameTime.stop());else if("o"===e.key)this.vehicle.setPosition(0,4,0),this.vehicle.setRotation(Math.PI,0,0);else if("h"===e.key)this.vehicle.stop(),this.vehicle.start(),this.vehicle.setPosition(4,15,0),this.vehicle.setRotation(0,0,Math.PI);else if("u"===e.key){this.vehicle.stop(),this.vehicle.start();const e=this.vehicle.getPosition();this.vehicle.setPosition(e.x,e.y+5,e.z),this.vehicle.setRotation(0,0,0)}else if("i"===e.key){this.vehicle.stop(),this.vehicle.start();const e=this.vehicle.getPosition();this.vehicle.getRotation();this.vehicle.setPosition(e.x,e.y,e.z),tA+=Math.PI/20,tA%=2*Math.PI,this.vehicle.setRotation(0,tA,0)}else if("y"===e.key){this.vehicle.stop(),this.vehicle.start();const e=this.vehicle.getPosition();this.vehicle.getRotation();this.vehicle.setPosition(e.x,e.y,e.z),tA+=Math.PI/20,tA%=2*Math.PI,this.vehicle.setRotation(0,tA,tA)}else if("l"===e.key){const e=new enable3d_1.THREE.Quaternion(0,.97602,0,.217668135);this.vehicle.setRotation(e)}else if("m"===e.key)for(let e of this.wagons)e.isConnectedToVehicle(this.vehicle)&&e.removeConnection()})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&(this.escPress(),this.togglePauseGame())})),console.log("lo polu test"),setTimeout((()=>{}),1e3),this.renderer.clear(),this.renderer.info.autoReset=!1,this.renderer.autoClear=!1,this.renderer.shadowMap.autoUpdate=!1,this.initVehicles()}))}initVehicles(){this.otherVehicles=[],"LowPoly"===(0,VehicleConfigs_1.getVehicleClassFromType)(this.vehicleType)?this.vehicle=new LowPolyTestVehicle_1.LowPolyTestVehicle(this,TagCourse_1.itColor,"test hugi",0,this.vehicleType,!0):this.vehicle=new SphereTestVehicle_1.SphereTestVehicle(this,TagCourse_1.itColor,"test hugi",0,this.vehicleType,!0);for(let e=0;e<this.numberOfOtherVehicles;e++){const t=shared_stuff_1.allVehicleTypes[e%shared_stuff_1.allVehicleTypes.length].type;this.otherVehicles.push(new LowPolyTestVehicle_1.LowPolyTestVehicle(this,TagCourse_1.notItColor,"test"+(e+1),e+1,t,!1)),this.otherDrivers.push(new GhostDriver_1.GhostDriver(this.getTrackName(),1,t))}}createGhostVehicle(){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{var n;null===(n=this.ghostVehicle)||void 0===n||n.removeFromScene(this),this.ghostDriver.loadTournamentInstructions(this.gameSettings.ghostFilename).then((()=>__awaiter(this,void 0,void 0,(function*(){const t=this.ghostDriver.getVehicleType();t?(this.ghostVehicle=new GhostVehicle_1.GhostVehicle({vehicleType:t,color:"#10eedd"}),yield this.ghostVehicle.loadModel(),this.ghostVehicle.addToScene(this)):console.warn("no vt",t),e()})))).catch((()=>{console.log("No ghost since there is no recording"),e()}))}))}))}create(){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((e,t)=>__awaiter(this,void 0,void 0,(function*(){"race"===this.getGameType()?this.course=new RaceCourse_1.RaceCourse(this,this.trackName,(e=>this.handleGoalCrossed(e)),((e,t)=>this.handleCheckpointCrossed(e,t))):"tag"===this.getGameType()?this.course=new TagCourse_1.TagCourse(this,this.trackName,((e,t)=>this.handleCoinCollided(e,t))):"story"===this.getGameType()?this.course=new StoryCourse_1.StoryCourse(this,this.trackName):console.warn("Unknown game type when creating course",this.getGameType()),yield this.course.createCourse(),this.course instanceof RaceCourse_1.RaceCourse&&(this.gameTime=new GameTimeClass_1.GameTime(3,this.course.getNumberOfCheckpoints())),this.courseLoaded=!0,yield this.createOtherVehicles(),yield this.createTestVehicle(),this.vehicle.useBadRotationTicks=!1;const t=this.otherVehicles.concat(this.vehicle);this.vehicles=t,yield this.createGhostVehicle(),this.course.setStartPositions(t);for(let e of t)e.isReady&&e.unpause(),e.setCanDrive(!0),e.start();"tag"===this.getGameType()&&this.vehicle.setPosition(0,2,0),this.createController(),this.canStartUpdate=!0,"tag"===this.gameSettings.gameType&&this.vehicle.vehicleBody.body.on.collision(((e,t)=>{if((0,LowPolyVehicle_1.isVehicle)(e)){const t=(0,LowPolyVehicle_1.getVehicleNumber)(e.name);this.vehicle.setColor(TagCourse_1.notItColor),this.otherVehicles[t-1].setColor(TagCourse_1.itColor),this.isIt=t}})),this.vehicle.addCamera(this.camera),yield this.ghostVehicle.loadModel(),this.ghostVehicle.addToScene(this),console.log("camera",this.camera),e()}))))}))}getGameType(){return(0,Game_1.getGameTypeFromTrackName)(this.trackName)}handleCoinCollided(e,t){(0,LowPolyVehicle_1.getVehicleNumber)(e)!==this.isIt&&t.removeFromScene(this)}createOtherVehicles(){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{0===this.numberOfOtherVehicles&&e();const n=t=>{(0,LowPolyVehicle_1.loadLowPolyVehicleModels)(this.otherVehicles[t].vehicleType,!1).then((([r,i])=>{this.otherVehicles[t].addModels(r,i),t<this.otherVehicles.length-1?n(t+1):e()}))};this.otherVehicles.length>0&&n(0)}))}))}changeTrack(e){this.trackName=e,window.localStorage.setItem("trackName",e),this.canStartUpdate=!1,this.course.clearCourse(),this.scene.clear(),this.addLights(),this.create()}createTestVehicle(){return __awaiter(this,void 0,void 0,(function*(){const promise=new Promise(((resolve,reject)=>{const vehicleClass=(0,VehicleConfigs_1.getVehicleClassFromType)(this.vehicleType);"Sphere"===vehicleClass?(0,SphereVehicle_1.loadSphereModel)(this.vehicleType,!1).then((sphere=>{this.vehicle.addModels([sphere],sphere);const useChaseCamera=window.localStorage.getItem("useChaseCamera");this.vehicle.useChaseCamera=eval(useChaseCamera),this.vehicle.addCamera(this.camera),this.vehicle.resetPosition(),this.camera.position.set(0,10,-25),this.vehicle.unpause(),setTimeout((()=>{var e,t,n,r;console.log("exha",null===(e=vehicleItems_1.vehicleItems[this.vehicleType])||void 0===e?void 0:e.exhaust1),this.vehicle.updateVehicleSetup({vehicleType:this.vehicleType,exhaust:null===(t=vehicleItems_1.vehicleItems[this.vehicleType])||void 0===t?void 0:t.exhaust1,wheelGuards:null===(n=vehicleItems_1.vehicleItems[this.vehicleType])||void 0===n?void 0:n.wheelGuards1,spoiler:null===(r=vehicleItems_1.vehicleItems[this.vehicleType])||void 0===r?void 0:r.spoiler1})}),1e3),resolve()})):(0,LowPolyVehicle_1.loadLowPolyVehicleModels)(this.vehicleType,!1).then((([tires,chassis])=>{this.vehicle.addModels(tires,chassis);const useChaseCamera=window.localStorage.getItem("useChaseCamera");this.vehicle.useChaseCamera=eval(useChaseCamera),this.vehicle.addCamera(this.camera),this.vehicle.resetPosition(),this.camera.position.set(0,10,-25),setTimeout((()=>{var e,t,n,r;console.log("exha",null===(e=vehicleItems_1.vehicleItems[this.vehicleType])||void 0===e?void 0:e.exhaust1),this.vehicle.updateVehicleSetup({vehicleType:this.vehicleType,exhaust:null===(t=vehicleItems_1.vehicleItems[this.vehicleType])||void 0===t?void 0:t.exhaust1,wheelGuards:null===(n=vehicleItems_1.vehicleItems[this.vehicleType])||void 0===n?void 0:n.wheelGuards1,spoiler:null===(r=vehicleItems_1.vehicleItems[this.vehicleType])||void 0===r?void 0:r.spoiler1})}),1e3);const createVehicleInputButtons=()=>{(0,testVehicleInputs_1.createTestVehicleInputs)(this,vehicleInputsContainer)};createVehicleInputButtons(),resolve()}))}));return promise}))}resetVehicleCallback(e){}handleGoalCrossed(e){if(!this.goalCrossed){0===(0,LowPolyVehicle_1.getVehicleNumber)(e.name)&&recording&&this.checkpointCrossed&&this.driverRecorder.goalCrossed();const{position:t,rotation:n}=this.course.getGoalCheckpoint();this.vehicle.setCheckpointPositionRotation({position:t,rotation:n}),this.checkpointCrossed=!1,this.raceStarted?this.gameTime.lapDone():(this.gameTime.start(),this.raceStarted=!0)}this.goalCrossed=!0}handleCheckpointCrossed(e,t){if(!this.gameTime.crossedCheckpoint(t)){this.gameTime.checkpointCrossed(t),this.goalCrossed=!1;const{position:e,rotation:n}=this.course.getCheckpointPositionRotation(t);this.vehicle.setCheckpointPositionRotation({position:{x:e.x,y:e.y,z:e.z},rotation:n})}this.checkpointCrossed=!0}setTestGameSettings(e,t){this.gameSettings=e,this.escPress=t}updateScoreTable(){scoreTable.textContent="\n        Leaderboard\n        "}onWindowResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),"PerspectiveCamera"===this.camera.type&&(this.camera.aspect=window.innerWidth/window.innerHeight),this.camera.updateProjectionMatrix()}setSocket(e){this.socket=e,this.userSettingsListener()}createController(){this.vehicle&&(this.vehicleControls=new shared_stuff_1.VehicleControls,this.driveVehicle=(0,testControls_1.addTestControls)(this.socket,this.vehicle))}vehicleCollidedWithObject(e,t){if((0,Wagon_1.isWagon)(e)&&0===t){const t=(0,Wagon_1.getWagonNumber)(e.name);this.wagons[t].connectToVehicle(this.vehicle)}}updateVehicles(e){this.vehicle.update(e)}_upd(e){this.canStartUpdate&&this.everythingReady()&&this.vehicle&&(this.vehicle.cameraLookAt(this.camera,e),this.camera.updateProjectionMatrix()),this.renderer.info.reset(),this.renderer.clear(),this.renderer.shadowMap.needsUpdate=!0,this.renderer.render(this.scene,this.camera)}_updateChild(e,t){var n;if(this.canStartUpdate&&this.everythingReady()&&this.ghostVehicle.isReady){if(this.vehicle){this.updateVehicles(t),this.mobileControls=null===(n=this.driveVehicle)||void 0===n?void 0:n.call(this),this.driverRecorder.record(this.vehicle,e),this.updateFps(e),this.updatePing();const r=this.vehicle.getPosition(),i=this.vehicle.getRotation();scoreTable.textContent=`x: ${r.x.toFixed(2)}, z:${r.z.toFixed(2)} \n                <br />\n                rot x:${i.x.toFixed(2)}, y:${i.y.toFixed(2)}, z:${i.z.toFixed(2)}, w:${i.w.toFixed(2)}\n                <br />\n                km/h: ${this.vehicle.getCurrentSpeedKmHour(t).toFixed(0)}\n                `}this.course.updateCourse();for(let e=0;e<this.otherVehicles.length;e++){this.otherVehicles[e].update(t)}this.raceStarted&&(this.ghostDriver.setPlace(this.ghostVehicle,this.gameTime.getTotalTime(),t),lapTimeDiv.textContent=this.gameTime.getCurrentLapTime()+"",bestLapTimeDiv.textContent=this.gameTime.getBestLapTime()+"")}this._upd(t)}resetPlayer(e,t){this.vehicle&&this.vehicle.resetPosition()}togglePauseGame(){this.vehicle.isReady&&this.everythingReady()&&(this.isPaused?(this.gameTime.stop(),this.vehicle.unpause(),this.isPaused=!1):(this.gameTime.start(),this.vehicle.pause(),this.isPaused=!0))}unpauseGame(){this.vehicle.unpause(),this.isPaused=!1}pauseGame(){this.vehicle.isReady&&this.vehicle.pause(),this.isPaused=!0}changeVehicle(e,t){window.localStorage.setItem("vehicleType",t),this.vehicleType=t,this.canStartUpdate=!1,this.vehicleColorNumber+=1,this.vehicle=new LowPolyTestVehicle_1.LowPolyTestVehicle(this,shared_stuff_1.vehicleColors[this.vehicleColorNumber].value,"test hugi",0,this.vehicleType,!0),this.createTestVehicle()}userSettingsListener(){this.socket.on(shared_stuff_1.std_user_settings_changed,(e=>{this.vehicle.updateVehicleSettings(e.userSettings.vehicleSettings,e.vehicleSetup)}))}}exports.LowPolyTestScene=LowPolyTestScene;const startLowPolyTest=(e,t,n,r)=>{try{const i={scenes:[LowPolyTestScene],antialias:!0};(0,enable3d_1.PhysicsLoader)("./ammo",(()=>{const o=new enable3d_1.Project(i),s=o.scenes.keys().next().value,a=o.scenes.get(s);return a.setSocket(e),a.setTestGameSettings(t,n),r(a),o}))}catch(e){console.warn("Low poly test failed",e),(0,react_toastify_1.toast)("Game failed")}};exports.startLowPolyTest=startLowPolyTest},89642:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.startSpeedTest=void 0;const i=n(96515),o=n(69365),s=n(14999),a=n(12213),l=n(28468);class c extends a.GameScene{constructor(){super(),this.trackName="speed-test-track",this.players=[];const e=["gokart","future","f1","simpleSphere","offRoader","sportsCar","tractor","normal"];for(let t=0;t<e.length;t++)this.players.push({playerName:`name-${e[t]}`,playerNumber:t,vehicleType:e[t],mobileControls:new l.MobileControls,photoURL:"",isAuthenticated:!1,id:`speed-test${t}`,teamName:"",teamNumber:-1,isLeader:0===t,isConnected:!1,vehicleSetup:{vehicleType:e[t]}});this.course=new s.Course(this,this.trackName)}loadAssets(){return r(this,void 0,void 0,(function*(){new o.OrbitControls(this.camera,this.renderer.domElement);yield this.course.createCourse(),this.courseLoaded=!0,yield this.createVehicles(),this.vehicles[0].addCamera(this.camera),this.vehicles[0].useChaseCamera=!1,this.resetVehicles(),this.restartGame()}))}_restartGame(){this.gameStarted=!0;for(let e of this.vehicles)e.unpause(),e.start(),e.break(!0),e.setCanDrive(!0)}updateVehicles(e){for(let t=0;t<this.vehicles.length;t++)this.vehicles[t].goForward(),this.vehicles[t].update(e),0===t&&this.vehicles[t].cameraLookAt(this.camera,e)}update(e,t){this.updateFps(e),this.everythingReady()&&this.updateVehicles(t)}}t.startSpeedTest=()=>{const e={scenes:[c],antialias:!0};(0,i.PhysicsLoader)("/ammo",(()=>new i.Project(e)))}},94790:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addTestControls=exports.driveVehicle=void 0;const react_toastify_1=__webpack_require__(72132),shared_stuff_1=__webpack_require__(28468);let speed=40,maxAngle=40,angle=0,dAngle=4;const driveVehicle=(e,t)=>{let n=!1;e.f&&(t.goForward(),n=!0),e.b&&(t.goBackward(),n=!0),n?e.f&&t.zeroBreakForce():t.noForce(),t.turn(e.beta),e.resetVehicle&&t.resetPosition()};exports.driveVehicle=driveVehicle;const addTestControls=(socket,vehicle)=>{let mobileControls=new shared_stuff_1.MobileControls,driveWithKeyboard=!!window.localStorage.getItem("driveWithKeyboard")&&eval(window.localStorage.getItem("driveWithKeyboard"));eval(window.localStorage.getItem("k-info-done"))||(window.localStorage.setItem("k-info-done","true"),(0,react_toastify_1.toast)("Press 'k' to enable driving with keyboard")),window.addEventListener("keypress",(e=>{"k"===e.key&&(driveWithKeyboard=!driveWithKeyboard,window.localStorage.setItem("driveWithKeyboard",driveWithKeyboard+""),(0,react_toastify_1.toast)("K pressed, driveWithKeyboard "+driveWithKeyboard))}));const testDriveVehicleWithKeyboard=()=>{mobileControls.f?vehicle.goForward():mobileControls.b?vehicle.goBackward(speed):vehicle.noForce(),mobileControls.beta>0?angle+=dAngle:mobileControls.beta<0?angle-=dAngle:angle+=-1*Math.sign(angle)*dAngle,Math.abs(angle)>maxAngle&&(angle=Math.min(Math.abs(angle),maxAngle)*Math.sign(angle)),vehicle.turn(angle)},keyAction=(e,t)=>{switch(e.key){case"w":mobileControls.f=t;break;case"a":mobileControls.beta=t?40:0;break;case"d":mobileControls.beta=t?-40:0;break;case"s":case" ":mobileControls.b=t}};return document.addEventListener("keydown",(e=>keyAction(e,!0))),document.addEventListener("keyup",(e=>keyAction(e,!1))),()=>(driveWithKeyboard?testDriveVehicleWithKeyboard():socket.once(shared_stuff_1.std_controls,(e=>{const{mobileControls:t}=e;mobileControls=t,void 0!==(null==mobileControls?void 0:mobileControls.f)&&(0,exports.driveVehicle)(mobileControls,vehicle)})),mobileControls)};exports.addTestControls=addTestControls},10710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTestVehicleInputs=t.createVehcileInput=t.createXYZInput=void 0;const r=n(51002),i=n(72969),o=n(17246);t.createXYZInput=(e,t,n,r,i)=>{let o=e;const s=document.createElement("div");s.setAttribute("class","vehicle-input"),s.setAttribute("style",`top:${t}px;`),s.innerHTML=n;const a=document.createElement("input");a.setAttribute("type","number"),a.setAttribute("value",o.x+""),a.setAttribute("style","width:60px;"),a.addEventListener("input",(e=>{e.target instanceof HTMLInputElement&&(e.target.value,isNaN(+e.target.value)||(o.x=+e.target.value,r(o)))})),s.appendChild(a);const l=document.createElement("input");l.setAttribute("type","number"),l.setAttribute("value",o.y+""),l.setAttribute("style","width:60px;"),l.addEventListener("input",(e=>{e.target instanceof HTMLInputElement&&(e.target.value,isNaN(+e.target.value)||(o.y=+e.target.value,r(o)))})),s.appendChild(l);const c=document.createElement("input");c.setAttribute("type","number"),c.setAttribute("value",o.z+""),c.setAttribute("style","width:60px;"),c.addEventListener("input",(e=>{e.target instanceof HTMLInputElement&&(e.target.value,isNaN(+e.target.value)||(o.z=+e.target.value,r(o)))})),s.appendChild(c),i.appendChild(s)};t.createVehcileInput=(e,n,i,o,s)=>{(0,r.instanceOfSimpleVector)(e)&&(0,t.createXYZInput)(e,n,i,o,s);const a=document.createElement("div");a.setAttribute("class","vehicle-input"),a.setAttribute("style",`top:${n}px;`),a.innerHTML=i;const l=document.createElement("input");l.setAttribute("type","number"),l.setAttribute("value",e+""),l.addEventListener("input",(e=>{e.target instanceof HTMLInputElement&&(e.target.value,isNaN(+e.target.value)||o(+e.target.value))})),a.appendChild(l),s.appendChild(a)};t.createTestVehicleInputs=(e,n)=>{for(;n.children.length>0;)n.removeChild(n.children[0]);if(e.vehicle instanceof i.LowPolyTestVehicle){let r="engineForce",i=25,s=0;(0,t.createVehcileInput)(e.vehicle.getVehicleConfigKey(r),s,r,(t=>{e.vehicle.setVehicleConfigKey("engineForce",t)}),n),r="mass",s+=i,(0,t.createVehcileInput)(e.vehicle.getVehicleConfigKey(r),s,r,(t=>e.vehicle.updateMass(t)),n),r="maxSpeed",s+=i,(0,t.createVehcileInput)(e.vehicle.getVehicleConfigKey(r),s,r,(t=>e.vehicle.updateMaxSpeed(t)),n),r="breakingForce",s+=i,(0,t.createVehcileInput)(e.vehicle.getVehicleConfigKey(r),s,r,(t=>e.vehicle.setVehicleConfigKey(r,t)),n);const a=["suspensionDamping","suspensionStiffness","suspensionCompression","suspensionRestLength","maxSuspensionTravelCm","maxSuspensionForce","rollInfluence","frictionSlip"];for(let r of a)r=r,s+=i,r in o.defaultVehicleConfig||console.warn(r,"is not a part the VehicleConfig"),(0,t.createVehcileInput)(e.vehicle.getVehicleConfigKey(r),s,r,(t=>e.vehicle.setVehicleConfigKey(r,t)),n);s+=i,(0,t.createXYZInput)(e.vehicle.getInertia(),s,"inertia",(t=>{e.vehicle.setInertia(t)}),n),s+=i,(0,t.createXYZInput)(e.vehicle.getCenterOfMass(),s,"Set position",(t=>{e.vehicle.setCenterOfMass(t)}),n),s+=i;const l=document.createElement("div");l.setAttribute("class","vehicle-input"),l.setAttribute("style",`top:${s}px;`),l.innerHTML="Chase cam";const c=document.createElement("button");c.innerHTML=e.vehicle.useChaseCamera?"ON":"OFF",c.addEventListener("click",(t=>{window.localStorage.setItem("useChaseCamera",(!e.vehicle.useChaseCamera).toString()),e.vehicle.updateVehicleSettings(Object.assign(Object.assign({},e.vehicle.vehicleSettings),{useChaseCamera:!e.vehicle.useChaseCamera}),e.vehicle.vehicleSetup),c.innerHTML=e.vehicle.useChaseCamera?"ON":"OFF"})),l.appendChild(c),n.appendChild(l),s+=i;const u=document.createElement("div");u.setAttribute("class","vehicle-input"),u.setAttribute("style",`top:${s}px;`),u.innerHTML="Reset to default";const d=document.createElement("button");d.innerHTML="RESET ",d.addEventListener("click",(r=>{e.vehicle.resetConfigToDefault(),(0,t.createTestVehicleInputs)(e,n)})),u.appendChild(d),n.appendChild(u),s+=i;const h=document.createElement("div");h.setAttribute("class","vehicle-input"),h.setAttribute("style",`top:${s}px;`),h.innerHTML="use debug ";const f=document.createElement("button");f.innerHTML="Debug "+(e.usingDebug?"ON":"OFF"),f.addEventListener("click",(t=>{e.usingDebug=!e.usingDebug,window.localStorage.setItem("usingDebug",e.usingDebug+""),e.usingDebug?e.physics.debug.enable():e.physics.debug.disable()})),h.appendChild(f),n.appendChild(h)}}},88450:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(67294)),l=n(72132),c=n(23053),u=(n(7735),s(n(38854))),d=n(17091),h=s(n(63881)),f=n(35742),p=n(92891),m=n(46078),g=n(12213),v=s(n(44069)),y=s(n(12979)),b=n(87612),w=n(28468),x=n(72425),_=n(38990);n(68377);const S=new w.MobileControls,E=new w.GameActions;t.default=e=>{const t=(0,a.useContext)(b.UserContext),[n,r]=(0,a.useState)(void 0),[i,o]=(0,a.useState)(!1),[s,w]=(0,a.useState)(!1),[T,C]=(0,a.useState)([]),[M,k]=(0,a.useState)(!1),[P,A]=(0,a.useState)(!1),[I,R]=(0,a.useState)({}),[L,O]=(0,a.useState)({}),[N,D]=(0,a.useState)(!1),[F,B]=(0,a.useState)({alpha:0,gamma:0,beta:0}),[Z,V]=(0,a.useState)(void 0);(0,a.useEffect)((()=>{if(n){const e=document.getElementsByTagName("canvas");e.length>0&&(e[0].classList.add("game-canvas"),V(e[0]))}}),[n]),(0,a.useEffect)((()=>{Z&&setInterval((()=>{var t;Z.setAttribute("style",`transform: rotateZ(${(0,_.getSteerAngleFromBeta)(S.beta,null!==(t=e.store.userSettings.vehicleSettings.noSteerNumber)&&void 0!==t?t:4)}deg)`)}),1e3/90)}),[Z]);const z=()=>{},U=e=>{o(!0),(0,p.saveRaceDataGame)(e.endOfRaceInfo,(e=>{})),R(e)},j=e=>{e&&O(e)},H=e=>{console.log("player finished",e),e.isAuthenticated&&(0,p.saveBestRaceData)(e.playerId,e).then((([e,t])=>{C(t),console.log("game info",t),o(!0)}))},G=()=>{o(!1),R({})};(0,a.useEffect)((()=>{e.store.socket&&(console.log("disconnecting socket"),e.store.setSocket(void 0),e.store.socket.disconnect())}),[e.store.socket]),(0,a.useEffect)((()=>{if(null!==t)if(null==t?void 0:t.uid)(0,f.getDBUserSettings)(null==t?void 0:t.uid).then((n=>{e.store.setUserSettings(n),(0,m.getVehiclesSetup)(t.uid).then((r=>{e.store.setVehiclesSetup(r);const i={playerName:t.displayName,teamName:"",teamNumber:-1,playerNumber:0,id:t.uid,isAuthenticated:!0,vehicleType:n.vehicleSettings.vehicleType,photoURL:t.photoURL},o=Object.assign(Object.assign({},i),{isLeader:!0,isConnected:!0,mobileControls:S,vehicleSetup:r[n.vehicleSettings.vehicleType]});console.log("player",o),e.store.setPlayer(o)}))})).catch((()=>{console.warn("user settings not found")}));else{let t={playerName:"Guest",teamName:"",teamNumber:-1,playerNumber:0,id:"guest-id",isAuthenticated:!1,vehicleType:e.store.userSettings.vehicleSettings.vehicleType,photoURL:""};const n=Object.assign(Object.assign({},t),{isLeader:!0,isConnected:!0,mobileControls:S,vehicleSetup:{vehicleType:e.store.userSettings.vehicleSettings.vehicleType}});console.log("player",n),e.store.setPlayer(n)}}),[t]),(0,a.useEffect)((()=>{if(console.log("store",e.store),!e.store.player)return;const t=(0,c.getGameSceneClass)(e.store.gameSettings.gameType);(0,g.startGame)(t,{socket:e.store.socket,players:[e.store.player],gameSettings:e.store.gameSettings,roomId:e.store.roomId,gameRoomActions:{escPressed:z,gameFinished:U,updateScoreInfo:j,playerFinished:H,closeModals:G},onlyMobile:!0,mobileController:S},(e=>{r(e)}))}),[e.store.player]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(v.default,{userLoggedIn:()=>{console.warn("User logged in to implemented")},resetOrientation:()=>{(0,l.toast)("Resetting orientation"),k(!0),D(!N)},open:s,onClose:()=>{console.log("Game actions",E),n&&(n.setGameSettings(e.store.gameSettings),n.setVehicleSettings(0,e.store.userSettings.vehicleSettings,e.store.vehiclesSetup[e.store.userSettings.vehicleSettings.vehicleType]),E.pause?(w(!0),n.pauseGame()):(w(!1),n.unpauseGame()),E.restart&&(n.restartGame(),o(!1),w(!1))),E.pause=!1,E.restart=!1},user:t,store:e.store,socket:e.store.socket,gameActions:E,loading:P}),a.default.createElement(y.default,{controller:S,gameActions:E,orientation:F,handlePausePressed:()=>{n.togglePauseGame(),w(!0)},transparantButtons:!0,resetOrientation:N,raceMedalData:void 0}),a.default.createElement(u.default,{open:i,onClose:()=>{o(!1)},data:I,restartGame:()=>{n&&(n.restartGame(),o(!1)),C([])},scoreInfo:L,gameDataInfo:T,quitGame:()=>{window.location.href=d.frontPagePath}}),a.default.createElement(h.default,{onMobile:!0,onIphone:(0,x.isIphone)(),showModal:M,onClose:()=>k(!1)}))}},62445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(67294),i=n(89642);t.default=e=>((0,r.useEffect)((()=>{(0,i.startSpeedTest)()}),[]),null)},8864:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(67294)),l=s(n(57520)),c=s(n(91892)),u=n(32779);t.default=e=>((0,a.useEffect)((()=>{e.store.setPlayer(u.fakePlayer1)}),[]),e.onMobile&&!e.store.player?a.default.createElement("span",null,"Loading on mobile test setup..."):e.store.socket?a.default.createElement(a.default.Fragment,null,e.onMobile?a.default.createElement(c.default,{store:e.store}):a.default.createElement(l.default,{store:e.store,useTestCourse:!0,isTestMode:!0})):a.default.createElement("span",null,"Loading test setup..."))},32779:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fakePlayer4=t.fakePlayer3=t.fakePlayer2=t.fakePlayer1=t.createFakeHighscoreData=void 0;const r=n(7735),i=n(92891),o=n(28468),s=n(38990),a=[{playerName:"test-player-1",playerId:"123"},{playerName:"test-player-2",playerId:"123"},{playerName:"test-player-3",playerId:null}],l=["f1-track","farm-track","sea-side-track"];t.createFakeHighscoreData=()=>{var e,t;console.log("Creating fake data");for(let n=0;n<20;n++){const o=l[Math.floor(Math.random()*l.length)],c=`test-fakeGameId-${o}-${n}`,u=Math.floor(6*Math.random()+2),d="test",h=[],f=[],p=[],m=[],g=[],v=[];for(let n of a){h.push(n.playerName),f.push(null!==(e=n.playerId)&&void 0!==e?e:"undefined");const r=[];let i=0,a=1e5;for(let e=0;e<u;e++){const e=Math.round(80*Math.random()+20);i+=e,r.push(e),a=Math.min(e,a)}m.push(r),p.push(i),g.push({playerName:n.playerName,playerId:n.playerId,lapTimes:r,bestLapTime:a,gameId:c,trackName:o,totalTime:i,numberOfLaps:u,date:(0,s.getDateNow)(),private:!1,isAuthenticated:!0,engineForce:100,steeringSensitivity:-1,breakingForce:-1,vehicleType:"test",roomTicks:0,gameTicks:0,totalPing:-1,totalPingsGotten:-1,avgFps:-1,vehicleSetup:{vehicleType:"normal"}}),v.push({id:null!==(t=n.playerId)&&void 0!==t?t:"undefined",name:n.playerName,lapTimes:r,totalTime:i,engineForce:100,steeringSensitivity:-1,breakingForce:-1,vehicleType:"test",isAuthenticated:!1})}const y={playersInfo:v,gameSettings:r.defaultGameSettings,gameId:c,roomId:d,date:(0,s.getDateNow)(),roomTicks:10,gameTicks:10,avgPing:-1,time:-1,avgFps:-1};(0,i.saveRaceDataGame)(y,(e=>{console.log("res",e)})),(0,i.saveRaceData)(g[0].playerId,g[0]).then((([e,t])=>console.log("info about race",t)))}},t.fakePlayer1={playerName:"1test tester testersen",isLeader:!0,teamName:"test",playerNumber:0,mobileControls:new o.MobileControls,vehicleControls:new o.VehicleControls,teamNumber:0,id:"0",isAuthenticated:!1,vehicleType:"future",isConnected:!0,photoURL:"https://upload.wikimedia.org/wikipedia/en/thumb/9/99/Bart_-_Good_Night.png/200px-Bart_-_Good_Night.png",vehicleSetup:{vehicleType:"f1"}},t.fakePlayer2={playerName:"2test2 tester testersen",isLeader:!0,teamName:"test",playerNumber:1,mobileControls:new o.MobileControls,vehicleControls:new o.VehicleControls,teamNumber:0,id:"1",isAuthenticated:!1,vehicleType:"f1",isConnected:!0,photoURL:"",vehicleSetup:{vehicleType:"f1"}},t.fakePlayer3={playerName:"3test3 tester testersen",isLeader:!0,teamName:"test",playerNumber:2,mobileControls:new o.MobileControls,vehicleControls:new o.VehicleControls,teamNumber:0,id:"2",isAuthenticated:!1,vehicleType:"f1",isConnected:!0,photoURL:"",vehicleSetup:{vehicleType:"f1"}},t.fakePlayer4={playerName:"4test4",isLeader:!0,teamName:"test",playerNumber:3,mobileControls:new o.MobileControls,vehicleControls:new o.VehicleControls,teamNumber:0,id:"3",isAuthenticated:!1,vehicleType:"future",isConnected:!0,photoURL:"https://static3.srcdn.com/wordpress/wp-content/uploads/2016/12/The-Simpsons-Roasting-On-An-Open-Fire-Christmas.jpg?q=50&fit=crop&w=960&h=500&dpr=1.5",vehicleSetup:{vehicleType:"future"}}},21382:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestDeviceOrientation=exports.setHasAskedDeviceOrientation=exports.getHasAskedDeviceOrientation=void 0;const getHasAskedDeviceOrientation=()=>eval(window.localStorage.getItem("hasAskedDeviceOrientation"));exports.getHasAskedDeviceOrientation=getHasAskedDeviceOrientation;const setHasAskedDeviceOrientation=e=>{window.localStorage.setItem("hasAskedDeviceOrientation",e+"")};exports.setHasAskedDeviceOrientation=setHasAskedDeviceOrientation;const requestDeviceOrientation=e=>{navigator.userAgent.toLowerCase().includes("iphone")&&DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((t=>{"granted"==t?((0,exports.setHasAskedDeviceOrientation)(!0),e(!0,"Permission granted!")):e(!1,"Permission not granted.")})).catch((t=>{e(!1,"Error occured when asking for permission")})):(e(!0,"Permission granted."),console.log("Device motion permission access method not available"),(0,exports.setHasAskedDeviceOrientation)(!0))};exports.requestDeviceOrientation=requestDeviceOrientation},34910:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSocket=void 0;const r=n(72132),i=n(64428),o=n(28468);t.createSocket=(e,t="not-test")=>new Promise(((n,s)=>{!window.location.href.includes("http://")||window.location.href.includes("localhost")||window.location.href.includes("192.168")||"mobile"!==e||(window.location.href="https://"+window.location.href.slice(7,window.location.href.length));const a=(0,i.io)();a.on("connect",(()=>{a.emit(o.mdts_device_type,{deviceType:e,mode:t}),a.on(o.stmd_socket_ready,(()=>{n(a)}))})),"mobile"===e&&(window.DeviceMotionEvent?console.log("device motion supported"):(0,r.toast)("Device motion not supported in the browser, please use Firefox")),a.on("disconnect",(()=>{}))}))},3058:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.driveVehicleWithKeyboard=t.addControls=t.driveVehicle=void 0;const r=n(28468);t.driveVehicle=(e,t,n)=>{let r=!1;e.f&&(t.goForward(),r=!0),e.b&&(t.goBackward(),r=!0),r?e.f&&t.zeroBreakForce():t.noForce(),t.turn(e.beta),e.resetVehicle&&t.resetPosition()};t.addControls=(e,n,i,o)=>{null==n||n.on(r.std_controls,(e=>{const{players:n}=e;for(let e=0;e<n.length;e++)(0,t.driveVehicle)(n[e].mobileControls,i[n[e].playerNumber],o)}));const s=(t,n)=>{switch(t.key){case"w":e.f=n;break;case"d":e.right=n;break;case"a":e.left=n;break;case"s":case" ":e.b=n}};document.addEventListener("keydown",(e=>s(e,!0))),document.addEventListener("keyup",(e=>s(e,!1)))};t.driveVehicleWithKeyboard=(e,t)=>{t.f?e.goForward():t.b?e.goBackward(40):e.noForce(),t.left?e.turn(25):t.right?e.turn(-25):e.noTurn()}},72425:function(__unused_webpack_module,exports,__webpack_require__){"use strict";let deviceType;Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStaticPath=exports.testGameSettings=exports.inTestMode=exports.inDevelopment=exports.isIphone=exports.getDeviceType=exports.setDefaultTabletSetting=exports.getDefaultTabletSetting=exports.onTablet=void 0;const onTablet=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)};exports.onTablet=onTablet;const tabletKey="useTabletAsMobile",getDefaultTabletSetting=()=>{const useAsMobile=window.localStorage.getItem(tabletKey);return!!useAsMobile&&eval(useAsMobile)};exports.getDefaultTabletSetting=getDefaultTabletSetting;const setDefaultTabletSetting=e=>{deviceType=e?"mobile":"desktop",window.localStorage.setItem(tabletKey,e.toString())};exports.setDefaultTabletSetting=setDefaultTabletSetting;const getDeviceType=()=>{if(deviceType)return deviceType;const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?(deviceType="desktop","desktop"):/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};exports.getDeviceType=getDeviceType;const isIphone=()=>navigator.userAgent.toLowerCase().includes("iphone");exports.isIphone=isIphone,exports.inDevelopment=!1,exports.inTestMode=!1,exports.testGameSettings={gameType:"race",numberOfLaps:2,trackName:"sea-side-track",tagGameLength:2,useShadows:!0,useSound:!1,graphics:"high",drawDistance:5e3,record:!1,useGhost:!0,ghostFilename:"LdEGkMu2r2QCdJ8wMerp1bkRrqd2/sea-side-track/2",musicVolume:.5,targetFPS:60};const encrypt=__webpack_require__(66382),getStaticPath=e=>{for(let t of Object.keys(encrypt))if(encrypt[t]===e)return`/${t}`;return`/${e}`};exports.getStaticPath=getStaticPath},65972:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.socketHandleStartGame=t.sendPlayerInfoChanged=void 0;const r=n(28468);t.sendPlayerInfoChanged=(e,t)=>{e.emit("player-info-changed",t)};t.socketHandleStartGame=(e,t)=>{e.emit(r.mdts_start_game),e.once(r.std_start_game_callback,(e=>{t(e)}))}},38990:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getXPInfo=t.getSizePrefix=t.getPitchRollYawFromQuaternion=t.getSteerAngleFromBeta=t.createClassNames=t.substrArrayInString=t.get2DAngleBetweenPoints=t.isBetweenAngles=t.isBetweenNumbers=t.getDateString=t.dictToArray=t.arrayToDict=t.radToDeg=t.degToRad=t.getDateFromNumber=t.getDateNow=t.logScaler=t.numberScaler=t.removeUndefinedFromObject=t.shuffleArray=t.itemInArray=void 0;const r=n(83680);t.itemInArray=function(e,t){for(let n of t)if(n===e)return!0;return!1};t.shuffleArray=e=>{const t=4*e.length;let n=0;for(;n<t;){for(let t=0;t<e.length;t++){const n=e[t],r=Math.floor(Math.random()*e.length);e[t]=e[r],e[r]=n}n+=1}};t.removeUndefinedFromObject=e=>{const n=Object.keys(e),r={};for(let i of n)void 0!==e[i]&&null!==e[i]&&void 0!==e[i]&&("object"==typeof e[i]?r[i]=(0,t.removeUndefinedFromObject)(e[i]):r[i]=e[i]);return r};t.numberScaler=(e,t,n,r,i)=>o=>+(e+(o-n)*(t-e)/(r-n)).toPrecision(i);t.logScaler=(e,t,n)=>r=>Math.min(Math.max(Math.log2(2/e*r),t),n);t.getDateNow=()=>Date.now();t.getDateFromNumber=e=>"number"==typeof e?new Date(e).toISOString():"-",t.degToRad=.017453,t.radToDeg=57.2957795,t.arrayToDict=function(e,t){if(0===e.length)return{};const n={};for(let r of e){const e=r[t];if(!e)return console.warn(`Item doesn't have field ${t} arrayToDict`),{};n[e]=r}return n},t.dictToArray=function(e){const t=[];for(let n of Object.keys(e))t.push(e[n]);return t};t.getDateString=e=>e instanceof Date?e.toISOString():e instanceof r.Timestamp?e.toDate().toISOString():(null==e?void 0:e.seconds)?new Date(e.seconds).toISOString():"string"==typeof e?e:"number"==typeof e?new Date(e).toISOString():"unknown date";t.isBetweenNumbers=(e,t,n)=>{const r=Math.max(e,t),i=Math.min(e,t);return r>n&&n>i};t.isBetweenAngles=(e,t,n)=>e<n&&n<t;t.get2DAngleBetweenPoints=(e,t)=>Math.atan2(t.z-e.z,t.x-e.x);t.substrArrayInString=(e,t)=>{for(let n of t)if(e.includes(n))return!0;return!1};t.createClassNames=(...e)=>e.join(" ");t.getSteerAngleFromBeta=(e,t)=>{let n=0;return Math.abs(e)>=t&&(n=e-t*Math.sign(e)),n};t.getPitchRollYawFromQuaternion=e=>{let t=2*(e.w*e.z+e.x*e.y),n=1-2*(e.y*e.y+(e.z+e.z));const r=Math.atan2(t,n);let i=2*(e.w*e.y-e.z*e.x);i=i>1?1:i,i=i<-1?-1:i;const o=Math.asin(i);let s=2*(e.w*e.x+e.y*e.z),a=1-2*(e.x*e.x+e.y*e.y);return{yaw:r,pitch:o,roll:Math.atan2(s,a)}};const i={3:"K",6:"M",9:"G",12:"T"};t.getSizePrefix=e=>{if(!e)return"0";const t=e.toFixed(0).length;let n="",r=0;for(let e of Object.keys(i))+e<t&&+e>r&&(n=i[e],r=+e);return`${(e/Math.pow(10,r)).toFixed(2)} ${n}`};const o=[30,50,80,90,120,130,150,170,190,200,205,210,220,220,220,230,230,240,260,260,260,260,260,260,260,260,260,260,260,260,260,260,260,260];t.getXPInfo=e=>{let t=0,n=0,r=0,i=0,s=0;if(o[0]>e)return{currentLevel:1,pointsToNextLevel:o[0]-e,ratioOfLevelFinished:e/o[0],pointsFinishedInThisLevel:e};for(let a=0;a<o.length;a++){s+=o[a];let l=s,c=o[a+1]+s;if(l<=e&&e<=c){t=a+2,n=c-e,r=e-l,i=r/(r+n);break}}return 0===t&&(t=o.length,i=1,n=0,r=260),{currentLevel:t,pointsToNextLevel:n,ratioOfLevelFinished:i,pointsFinishedInThisLevel:r}}},38045:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GhostVehicle=void 0;const i=n(34700),o=n(2212),s=n(1217),a=n(72425),l=n(11976),c=n(17246);t.GhostVehicle=class{constructor(e){this.config=e,this.position=new o.Vector3(0,0,0),this.rotation=new o.Quaternion(0,0,0,0),this.isReady=!1,this.vehicle=new i.ExtendedObject3D,"simpleSphere"===this.config.vehicleType&&(console.warn("Round betty not suported as ghost!"),this.config.vehicleType="normal")}addToScene(e){e.scene.add(this.vehicle)}removeFromScene(e){e.scene.remove(this.vehicle)}setRotation(e){this.isReady&&(this.rotation=e,this.vehicle.setRotationFromQuaternion(e))}setPosition(e){this.isReady&&(this.position=e,this.vehicle.position.set(e.x,e.y,e.z))}hide(){this.vehicle&&(this.vehicle.visible=!1)}show(){this.vehicle&&(this.vehicle.visible=!0)}loadModel(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{(new s.GLTFLoader).load((0,a.getStaticPath)(`${c.vehicleConfigs[this.config.vehicleType].path}`),(t=>{let n,r,i=[];for(let e of t.scene.children)if("Mesh"===e.type||"Group"===e.type)if(u(e),e.name.includes("chassis")){n=e,(0,l.changeVehicleBodyColor)(n,[this.config.color])}else if(e.name.includes("extra-car-stuff"))r=e;else if("tire"===e.name){const t=e;i.push(t)}else e.name.includes("tire")&&i.push(e);n&&this.vehicle.add(n),r&&this.vehicle.add(r);for(let e of i)this.vehicle.add(e);this.isReady=!0,e()}))}))}))}};const u=e=>{if("Mesh"===e.type)e.material.format=o.RGBAFormat,e.material.opacity=.2,e.material.transparent=!0;else for(let t of e.children)t.material.format=o.RGBAFormat,t.material.opacity=.2,t.material.transparent=!0}},51002:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStaticCameraPos=t.instanceOfSimpleVector=void 0;const r=n(38990);t.instanceOfSimpleVector=e=>"object"==typeof e&&"x"in e&&"y"in e&&"z"in e;const i=(0,r.numberScaler)(12,21,1,10,2),o=(0,r.numberScaler)(4,8,1,10,2);t.getStaticCameraPos=e=>({x:0,y:o(e),z:-i(e)})},72969:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LowPolyTestVehicle=void 0;const r=n(2212),i=n(38990),o=n(51002),s=n(59711),a=n(17246);class l extends s.LowPolyVehicle{constructor(e,t,n,i,o,s){super({scene:e,vehicleColor:t,name:n,vehicleNumber:i,vehicleType:o,useSoundEffects:s}),this.closestRaycaster=this.scene.physics.add.raycaster("closest"),this.inertia=new Ammo.btVector3(0,0,0);{this.l1=new r.Vector3(0,0,0),this.l2=new r.Vector3(2,-10,0),this.l3=new r.Vector3(2,-10,0),this.l4=new r.Vector3(2,-10,0);const e=new r.LineBasicMaterial({color:255}),t=(new r.BufferGeometry).setFromPoints([this.l1,this.l2]);this.lineForward=new r.Line(t,e),this.lineRight=new r.Line(t.clone(),e),this.lineLeft=new r.Line(t.clone(),e),this.scene.scene.add(this.lineForward),this.scene.scene.add(this.lineLeft),this.scene.scene.add(this.lineRight)}}setLocalStorageVec(e,t){window.localStorage.setItem(`${e}-${this.vehicleType}-x`,t.x+""),window.localStorage.setItem(`${e}-${this.vehicleType}-y`,t.y+""),window.localStorage.setItem(`${e}-${this.vehicleType}-z`,t.z+"")}getLocalStorageVec(e){if(!window.localStorage.getItem(`${e}-${this.vehicleType}-x`))return;return{x:+window.localStorage.getItem(`${e}-${this.vehicleType}-x`),y:+window.localStorage.getItem(`${e}-${this.vehicleType}-y`),z:+window.localStorage.getItem(`${e}-${this.vehicleType}-z`)}}setLocalStorage(e,t){window.localStorage.setItem(`${e}-${this.vehicleType}`,t)}getLocalStorage(e){return+window.localStorage.getItem(`${e}-${this.vehicleType}`)}setVehicleConfigKey(e,t){(0,o.instanceOfSimpleVector)(t)?this.setLocalStorageVec(e,t):this.setLocalStorage(e,t),this.vehicleConfig[e]=t,void 0!==this[e]&&(this[e]=t),this.updateWheelsSuspension()}getVehicleConfigKey(e){var t,n;if((0,o.instanceOfSimpleVector)(this.vehicleConfig[e])){const n=null!==(t=this.getLocalStorageVec(e))&&void 0!==t?t:this.vehicleConfig[e];return this.setVehicleConfigKey(e,n),n}{const t=null!==(n=this.getLocalStorage(e))&&void 0!==n?n:this.vehicleConfig[e];return this.setVehicleConfigKey(e,t),t}}setInertia(e){this.vehicleConfig.inertia=e;const{x:t,y:n,z:r}=e;this.setLocalStorageVec("inertia",e),this.vehicle.getRigidBody().setMassProps(this.vehicleConfig.mass,new Ammo.btVector3(t,n,r))}getInertia(){var e;let t=null!==(e=this.getLocalStorageVec("inertia"))&&void 0!==e?e:this.vehicleConfig.inertia;return this.setInertia(t),t}getAmmoInertia(){const{x:e,y:t,z:n}=this.vehicleConfig.inertia;return this.inertia.setValue(e,t,n),this.inertia}setCenterOfMass(e){this.vector.setValue(e.x,e.y,e.z),this.tm.setOrigin(this.vector),this.vehicleBody.body.ammo.setCenterOfMassTransform(this.tm)}getCenterOfMass(){const e=this.vehicle.getRigidBody().getCenterOfMassTransform();return{x:e.getOrigin().x(),y:e.getOrigin().y(),z:e.getOrigin().z()}}resetConfigToDefault(){for(let e in a.initialVehicleConfigs[this.vehicleType])(0,o.instanceOfSimpleVector)(a.initialVehicleConfigs[this.vehicleType][e])?this.setLocalStorageVec(e,a.initialVehicleConfigs[this.vehicleType][e]):this.setLocalStorage(e,a.initialVehicleConfigs[this.vehicleType][e])}updateMaxSpeed(e){console.log("this.vehicleConfig.maxSpeed.",this.vehicleConfig.maxSpeed),e=null!=e?e:this.vehicleConfig.maxSpeed,this.setLocalStorage("maxSpeed",e),console.log("speed",e),this.vehicleConfig.maxSpeed=e,this.vehicleConfig.maxSpeed=e,this.setVehicleConfigKey("maxSpeed",e),this.extraSpeedScaler=(0,i.numberScaler)(0,this.vehicleConfig.maxSpeed,Math.log2(1),Math.log2(800),2)}updateBreakingForce(e){this.setLocalStorage("breakingForce",e),this.breakingForce=e}randomDrive(){Math.random()<.3?this.goForward():Math.random()<.05&&this.goBackward(),Math.random()<.1&&this.turn(80*Math.random()-40)}intelligentDrive(e){const t=this.getPosition(),n=(this.vehicle.getWheelInfo(2).get_m_worldTransform(),this.vehicleBody.rotation),r=(this.getRotation(),20);if(this.l1.set(t.x,t.y,t.z),this.l2.set(t.x+Math.sin(n.y)*r,t.y,t.z+Math.cos(n.y)*r*Math.sign(Math.cos(n.z))),this.lineForward.geometry.setFromPoints([this.l1,this.l2]),this.closestRaycaster.setRayFromWorld(t.x,t.y,t.z),this.closestRaycaster.setRayToWorld(this.l2.x,this.l2.y,this.l2.z),this.closestRaycaster.rayTest(),this.closestRaycaster.hasHit()){const t=this.closestRaycaster.getCollisionObject();if(e){const e=this.closestRaycaster.getHitNormalWorld();console.log("normal",e),console.log("forward hit",t)}}const i=-Math.PI/4;this.l3.set(t.x+Math.sin(n.y+i)*r,t.y,t.z+Math.cos(n.y+i)*r*Math.sign(Math.cos(n.z)));const o=Math.PI/4;if(this.l4.set(t.x+Math.sin(n.y+o)*r,t.y,t.z+Math.cos(n.y+o)*r*Math.sign(Math.cos(n.z))),this.lineLeft.geometry.setFromPoints([this.l1,this.l4]),this.closestRaycaster.setRayFromWorld(t.x,t.y,t.z),this.closestRaycaster.setRayToWorld(this.l4.x,this.l4.y,this.l4.z),this.closestRaycaster.rayTest(),this.closestRaycaster.hasHit()){const t=this.closestRaycaster.getCollisionObject();if(e){const e=this.closestRaycaster.getHitNormalWorld();console.log("normal",e),console.log("left hit",t)}}}}t.LowPolyTestVehicle=l},59711:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.loadLowPolyVehicleModels=t.LowPolyVehicle=t.getVehicleNumber=t.isVehicle=void 0;const i=n(2212),o=n(1217),s=n(72425),a=n(38990),l=n(51002),c=n(11976),u=n(17246);t.isVehicle=e=>"vehicle"===e.name.slice(0,7);t.getVehicleNumber=e=>{const t=+e.slice(8,9);return isNaN(t)&&console.warn("No vehicle number for",e),t};class d extends c.Vehicle{constructor(e){super(e),this.wheelMeshes=[],this.forwardTicks=0,this.euler=new i.Euler(0,0,0),this.prevPosition=new i.Vector3(0,0,0),this.chaseSpeedX=0,this.chaseSpeedZ=0,this.chaseX=0,this.chaseZ=0,this.vehicleBodyPosition=new i.Vector3(0,0,0),this.jitterX=0,this.jitterZ=0,this.maxSpeedTime=0,this.engineForce=this.vehicleConfig.engineForce,this.breakingForce=this.vehicleConfig.breakingForce,this.is4x4=this.vehicleConfig.is4x4,this.currentEngineForce=0,this.spinCameraAroundVehicle=!1,this.p0=[new Ammo.btVector3(0,0,0),new Ammo.btVector3(0,0,0),new Ammo.btVector3(0,0,0),new Ammo.btVector3(0,0,0)],this.vector=new Ammo.btVector3(0,0,0),this.vector2=new Ammo.btVector3(0,0,0),this.rayer=new Ammo.ClosestRayResultCallback(this.vector,this.vector2),this.quaternion=new Ammo.btQuaternion(0,0,0,0),this.transformCam=new Ammo.btTransform,this.chassisWorldTransfrom=new Ammo.btTransform,this.staticCameraPos=(0,l.getStaticCameraPos)(this.vehicleSettings.cameraZoom),this.delta=0,this.extraSpeedScaler=(0,a.numberScaler)(0,this.vehicleConfig.maxSpeed,Math.log2(1),Math.log2(600),2)}addModels(e,t){this.tires=[];for(let t of e)t.receiveShadow=t.castShadow=!0,this.tires.push(t.clone());this.vehicleBody=t.clone(),this.vehicleBody.receiveShadow=!1,this.vehicleBody.castShadow=!0,this.modelsLoaded=!0,(0,c.changeVehicleBodyColor)(this.vehicleBody,[this.vehicleColor]),this.createVehicle()}changeCenterOfMass(){const e=this.vehicleBody.matrixWorld.clone();e.elements[13]=e.elements[13]+this.vehicleConfig.centerOfMassOffset,this.vehicleBody.geometry&&(this.vehicleBody.geometry=this.vehicleBody.geometry.clone(),this.vehicleBody.geometry.applyMatrix4(e));for(let e=0;e<this.vehicleBody.children.length;e++){const t=this.vehicleBody.children[e].position;this.vehicleBody.children[e].position.setY(t.y+this.vehicleConfig.centerOfMassOffset),this.vehicleBody.children[e].updateWorldMatrix(!0,!0)}this.vehicleConfig.wheelAxisHeightBack+=this.vehicleConfig.centerOfMassOffset,this.vehicleConfig.wheelAxisHeightFront+=this.vehicleConfig.centerOfMassOffset}getWheelInfos(){const e=this.vehicleConfig.wheelAxisBackPosition,t=this.vehicleConfig.wheelHalfTrackBack,n=this.vehicleConfig.wheelAxisHeightBack,r=this.vehicleConfig.wheelAxisFrontPosition,i=this.vehicleConfig.wheelHalfTrackFront,o=this.vehicleConfig.wheelAxisHeightFront,s={};return s[1]={wheelHalfTrack:i,wheelAxisHeight:o,wheelAxisPosition:r},s[0]={wheelHalfTrack:-i,wheelAxisHeight:o,wheelAxisPosition:r},s[3]={wheelHalfTrack:t,wheelAxisHeight:n,wheelAxisPosition:e},s[2]={wheelHalfTrack:-t,wheelAxisHeight:n,wheelAxisPosition:e},s}createVehicle(){var e;this.staticCameraPos=(0,l.getStaticCameraPos)(this.vehicleSettings.cameraZoom),this.vehicleBody.type,this.scene.add.existing(this.vehicleBody),this.changeCenterOfMass(),this.scene.physics.add.existing(this.vehicleBody,{mass:this.vehicleConfig.mass,shape:null!==(e=this.vehicleConfig.shape)&&void 0!==e?e:"convex",autoCenter:!1}),this.vehicleBody.body.ammo.setActivationState(4),this.vehicleBody.body.setBounciness(0),this.vehicleBody.body.setRestitution(0),this.vehicleBodyPosition.set(this.vehicleBody.position.x,this.vehicleBody.position.y+this.vehicleConfig.centerOfMassOffset,this.vehicleBody.position.z),this.tuning=new Ammo.btVehicleTuning,this.tuning.set_m_suspensionStiffness(this.vehicleConfig.suspensionStiffness),this.tuning.set_m_suspensionCompression(this.vehicleConfig.suspensionCompression),this.tuning.set_m_suspensionDamping(this.vehicleConfig.suspensionDamping),this.tuning.set_m_maxSuspensionTravelCm(this.vehicleConfig.maxSuspensionTravelCm),this.tuning.set_m_frictionSlip(this.vehicleConfig.frictionSlip),this.tuning.set_m_maxSuspensionForce(this.vehicleConfig.maxSuspensionForce),this.raycaster=new Ammo.btDefaultVehicleRaycaster(this.scene.physics.physicsWorld),this.vehicle=new Ammo.btRaycastVehicle(this.tuning,this.vehicleBody.body.ammo,this.raycaster),this.vehicleBody.body.ammo.setActivationState(4),this.vehicleBody.body.skipUpdate=!0,this.vehicle.setCoordinateSystem(0,1,2),this.vehicleBody.body.name="vehicle-"+this.vehicleNumber,this.vehicleBody.name="vehicle-"+this.vehicleNumber,this.scene.physics.physicsWorld.addAction(this.vehicle),this.wheelMeshes=[];const t=this.vehicleConfig.wheelAxisBackPosition,n=this.vehicleConfig.wheelRadiusBack,r=this.vehicleConfig.wheelHalfTrackBack,i=this.vehicleConfig.wheelAxisHeightBack,o=this.vehicleConfig.wheelAxisFrontPosition,s=this.vehicleConfig.wheelRadiusFront,a=this.vehicleConfig.wheelHalfTrackFront,c=this.vehicleConfig.wheelAxisHeightFront;this.vector.setValue(a,c,o),this.addWheel(!0,this.vector,s,1),this.vector.setValue(-a,c,o),this.addWheel(!0,this.vector,s,0),this.vector.setValue(r,i,t),this.addWheel(!1,this.vector,n,3),this.vector.setValue(-r,i,t),this.addWheel(!1,this.vector,n,2),this.vector.setValue(0,-30,0),this.vehicle.getRigidBody().setGravity(this.vector),this.vehicle.getRigidBody().setFriction(3);const{x:u,y:d,z:h}=this.vehicleConfig.inertia;this.vector.setValue(u,d,h),this.vehicle.getRigidBody().setMassProps(this.vehicleConfig.mass,this.vector),this.vehicleBody.body.ammo.getCollisionShape().calculateLocalInertia(this.vehicleConfig.mass,this.vector),this.isReady=!0,this.stop(),window.addEventListener("keydown",(e=>{"z"===e.key&&(this.useSoundEffects=!this.useSoundEffects,this.toggleSound(this.useSoundEffects))}))}addWheel(e,t,n,r){const i=new Ammo.btVector3(0,-1,0),o=new Ammo.btVector3(-1,0,0),s=this.vehicle.addWheel(t,i,o,this.vehicleConfig.suspensionRestLength,n,this.tuning,e);s.set_m_suspensionStiffness(this.vehicleConfig.suspensionStiffness),s.set_m_wheelsDampingRelaxation(this.vehicleConfig.suspensionDamping),s.set_m_wheelsDampingCompression(this.vehicleConfig.suspensionDamping),s.set_m_frictionSlip(this.vehicleConfig.frictionSlip),s.set_m_rollInfluence(this.vehicleConfig.rollInfluence),this.vehicle.updateSuspension(0),this.wheelMeshes.push(this.createWheelMesh(r)),Ammo.destroy(i),Ammo.destroy(o)}createWheelMesh(e){const t=this.tires[e];return this.scene.scene.add(t),t}decreaseMaxSpeedTicks(){this.maxSpeedTime>1&&(this.maxSpeedTime=.95*this.maxSpeedTime)}goForward(){if(!this._canDrive)return void this.break();const e=this.getCurrentSpeedKmHour(0);let t=this.engineForce;e>10+this.extraSpeedScaler(Math.log2(this.maxSpeedTime))?(t=0,this.maxSpeedTime+=this.delta/2):e<this.vehicleConfig.maxSpeed||this.decreaseMaxSpeedTicks(),e<2&&this.break(!0);let n=this.currentEngineForce+.05*(t-this.currentEngineForce);Math.abs(this.currentEngineForce-t)>1e3?this.currentEngineForce=this.currentEngineForce-1e3*Math.sign(this.currentEngineForce-t):this.currentEngineForce=n,t=this.currentEngineForce,this.is4x4&&(this.vehicle.applyEngineForce(t,0),this.vehicle.applyEngineForce(t,1)),this.vehicle.applyEngineForce(t,2),this.vehicle.applyEngineForce(t,3)}goBackward(){if(!this._canDrive)return void this.break();let e=-this.engineForce;if(this.getCurrentSpeedKmHour(0)>10)return this.decreaseMaxSpeedTicks(),void this.break();this.getCurrentSpeedKmHour()<-100&&(e=0),this.break(!0),this.is4x4&&(this.vehicle.applyEngineForce(e,0),this.vehicle.applyEngineForce(e,1)),this.vehicle.applyEngineForce(e,2),this.vehicle.applyEngineForce(e,3)}noForce(){this.decreaseMaxSpeedTicks(),this.break(!0);let e=2e3;const t=this.getCurrentSpeedKmHour(0);e*=-Math.sign(t),Math.abs(t)<5&&(e=0),this.is4x4&&(this.vehicle.applyEngineForce(e,0),this.vehicle.applyEngineForce(e,1)),this.vehicle.applyEngineForce(e,2),this.vehicle.applyEngineForce(e,3)}zeroEngineForce(){this.is4x4&&(this.vehicle.applyEngineForce(0,0),this.vehicle.applyEngineForce(0,1)),this.vehicle.applyEngineForce(0,2),this.vehicle.applyEngineForce(0,3)}noTurn(){this.vehicle.setSteeringValue(0,0),this.vehicle.setSteeringValue(0,1)}turn(e){const t=(0,a.getSteerAngleFromBeta)(e,this.vehicleSettings.noSteerNumber);if(this._canDrive){const e=Math.abs(t*a.degToRad*this.steeringSensitivity),n=Math.min(e,this.vehicleConfig.maxSteeringAngle)*Math.sign(t);this.vehicle.setSteeringValue(n,0),this.vehicle.setSteeringValue(n,1)}else this.vehicle.setSteeringValue(0,0),this.vehicle.setSteeringValue(0,1)}break(e){let t=e?0:this.breakingForce;this._canDrive||(t=500),this.zeroEngineForce(),this.vehicle.setBrake(t,3),this.vehicle.setBrake(t,2)}zeroBreakForce(){this.vehicle.setBrake(0,3),this.vehicle.setBrake(0,2),this.vehicle.setBrake(0,1),this.vehicle.setBrake(0,0)}stop(){this.vehicleBody.body&&(this.zeroEngineForce(),this.break(),this.vehicleBody.body.setCollisionFlags(1),this.vehicleBody.body.setVelocity(0,0,0),this.vehicleBody.body.setAngularVelocity(0,0,0))}start(){this.break(!0),this.vehicleBody.body.setCollisionFlags(0)}pause(){var e;this.break(),this.isPaused=!0,this.setCanDrive(!1),this.zeroEngineForce(),this.stopEngineSound(),(null===(e=this.vehicleBody)||void 0===e?void 0:e.body)&&this.vehicleBody.body.setCollisionFlags(1)}unpause(){var e;this.isPaused=!1,this.setCanDrive(!0),this.useSoundEffects&&this.startEngineSound(),(null===(e=this.vehicleBody)||void 0===e?void 0:e.body)&&this.vehicleBody.body.setCollisionFlags(0)}getPositionInfrontOfBody(){const e=this.getPosition(),t=this.vehicleBody.rotation;return{x:e.x+20*Math.sin(t.y),y:e.y+10,z:e.z-20*Math.cos(t.y)*Math.sign(Math.cos(t.z))}}addCamera(e){if(!this.vehicleBody)return;const t=this.vehicleBody.getObjectByName(e.name);if(this.camera=e,this.useChaseCamera||t){if(this.useChaseCamera){const{x:e,y:t,z:n}=this.getPositionInfrontOfBody();this.camera.position.set(e,t,n),this.camera.lookAt(this.vehicleBody.position.clone()),this.camera.updateProjectionMatrix()}}else e.position,this.vehicleBody.add(e);this.engineSound||this.createCarSounds()}removeCamera(){for(let e=0;e<this.vehicleBody.children.length;e++)"PerspectiveCamera"===this.vehicleBody.children[e].type&&this.vehicleBody.remove(this.vehicleBody.children[e])}cameraLookAt(e,t){if(this.spinCameraAroundVehicle){const t=this.vehicleBody.rotation,n=this.vehicleBody.position;this.cameraTarget.set(n.x+Math.sin(t.y)*this.staticCameraPos.z,n.y+this.staticCameraPos.y,n.z+Math.cos(t.y)*this.staticCameraPos.z*Math.sign(Math.cos(t.z))),this.cameraDir.x=e.position.x+.03*(this.cameraTarget.x-e.position.x),this.cameraDir.z=e.position.z+.03*(this.cameraTarget.z-e.position.z),this.cameraDir.y=e.position.y+.03*(this.cameraTarget.y-e.position.y),e.position.set(this.cameraDir.x,this.cameraDir.y,this.cameraDir.z),e.lookAt(this.vehicleBody.position.clone())}else if(this.useChaseCamera){const t=this.vehicleBody.position,n=this.vehicleBody.quaternion,r=2*Math.asin(n.y);this.cameraTarget.set(t.x+Math.sin(r)*this.staticCameraPos.z*Math.sign(n.w),t.y+this.staticCameraPos.y,t.z+Math.cos(r)*this.staticCameraPos.z);const i=.4;this.cameraLookAtPos.x=this.prevChaseCameraPos.x+(t.x+10*Math.sin(r)*Math.sign(n.w)-this.prevChaseCameraPos.x)*i,this.cameraLookAtPos.z=this.prevChaseCameraPos.z+(t.z+10*Math.cos(r)-this.prevChaseCameraPos.z)*i,this.cameraLookAtPos.y=this.prevChaseCameraPos.y+(t.y-this.prevChaseCameraPos.y)*i;const o=this.chaseCameraSpeed*(60/this.scene.targetFPS);this.cameraDir.x=e.position.x+(this.cameraTarget.x-e.position.x)*o,this.cameraDir.z=e.position.z+(this.cameraTarget.z-e.position.z)*o,this.cameraDir.y=e.position.y+(this.cameraTarget.y-e.position.y)*o,e.position.set(this.cameraDir.x,this.cameraDir.y,this.cameraDir.z),e.lookAt(this.cameraLookAtPos),this.prevChaseCameraPos=this.cameraLookAtPos.clone(),"high"===this.scene.getGraphicsType()&&this.seeVehicle(this.cameraDir.clone())}else if("high"!==this.scene.getGraphicsType())e.lookAt(this.vehicleBody.position.clone());else{const t=this.vehicleBody.position,n=this.vehicleBody.rotation;this.cameraTarget.set(t.x+Math.sin(n.y)*this.staticCameraPos.z,t.y+this.staticCameraPos.y,t.z+Math.cos(n.y)*this.staticCameraPos.z*Math.sign(Math.cos(n.z))),e.lookAt(this.getPosition().clone()),this.seeVehicle(this.cameraTarget)}}checkIfSpinning(e){const t=this.vehicle.getRigidBody().getAngularVelocity();Math.abs(t.x())>3&&(e&&console.warn("angular vel danger, X:",t.x().toFixed(2),t.y().toFixed(2),t.z().toFixed(2)),this.vector.setValue(t.x()/2,t.y(),t.z()),this.vehicle.getRigidBody().setAngularVelocity(this.vector)),Math.abs(t.y())>5&&(e&&console.warn("angular vel danger, Y:",t.x().toFixed(2),t.y().toFixed(2),t.z().toFixed(2)),this.vector.setValue(t.x(),t.y()/2,t.z()),this.vehicle.getRigidBody().setAngularVelocity(this.vector)),Math.abs(t.z())>6&&(e&&console.warn("angular vel danger, Z:",t.x().toFixed(2),t.y().toFixed(2),t.z().toFixed(2)),this.vector.setValue(t.x(),t.y(),t.z()/2),this.vehicle.getRigidBody().setAngularVelocity(this.vector))}vehicleAssist(e){const{isOnGround:t,pos:n}=this.isWheelOffGround(0),{isOnGround:r,pos:i}=this.isWheelOffGround(1),{isOnGround:o,pos:s}=this.isWheelOffGround(3);if(!(r&&t&&o&&o)){const t=this.vehicleBody.rotation,r=-Math.sin(t.y),o=-Math.cos(t.y)*Math.sign(Math.cos(t.z)),a=.2;let l=Math.abs(i.y()-n.y())<a?0:i.y()-n.y(),c=Math.abs(i.y()-s.y())<a?0:i.y()-s.y();if(0===c&&0===l)return;const u=.5,d=.1;c=Math.min(Math.abs(c),u)*Math.sign(c),l=Math.min(Math.abs(l),u)*Math.sign(l),e&&console.warn("Vehicle assist, Turning right:",l.toFixed(2),", TurningFront:",c.toFixed(2));let h=-o*c*d;h+=-r*l*d;let f=r*c*d;f+=-o*l*d;const p=this.vehicle.getRigidBody().getAngularVelocity();let m=p.x()+h,g=p.z()+f;this.vector.setValue(m,p.y(),g),this.vehicle.getRigidBody().setAngularVelocity(this.vector)}}isWheelOffGround(e){this.tm=this.vehicle.getWheelInfo(e).get_m_worldTransform();const t=this.tm.getOrigin();return{isOnGround:this.isTouchingGround(this.tm.getOrigin()),pos:t}}detectJitter(e){if(this.getCurrentSpeedKmHour()<0)return!1;this.tm=this.vehicle.getChassisWorldTransform(),this.p=this.tm.getOrigin(),this.q=this.tm.getRotation();const t=new i.Vector3(this.p.x(),this.p.y(),this.p.z()),n=t.clone().distanceTo(this.prevPosition),r=this.getCurrentSpeedKmHour()/3.6*(e/1e3);if(Math.abs(r-n)>.3&&Math.abs(r-n)<2){const e=n-r,o=this.vehicleBody.rotation;this.jitterX=r*Math.sin(o.y),this.jitterZ=r*Math.cos(o.y)*Math.sign(Math.cos(o.z));let s=new i.Vector3(this.prevPosition.x+this.jitterX,this.prevPosition.y,this.prevPosition.z+this.jitterZ);return this.p.setValue(s.x,t.y,s.z),this.vehicleBody.position.set(this.p.x(),this.p.y(),this.p.z()),this.vehicleBody.quaternion.set(this.q.x(),this.q.y(),this.q.z(),this.q.w()),console.warn("JITTER",", dist:",n.toFixed(2),", exp dist:",r.toFixed(2),", diff:",e.toFixed(2)),this.prevPosition=s.clone(),!0}return this.prevPosition=t.clone(),!1}setToGround(){const e=this.scene.course.ground.position.y;this.setPosition(void 0,e+2,void 0);const t=this.findClosesGround();this.setPosition(void 0,t,void 0)}update(e){if(!this.isReady)return;this.delta=e;for(let e=0;e<4;e++)this.tm=this.vehicle.getWheelInfo(e).get_m_worldTransform(),this.p0[e]=this.tm.getOrigin(),this.q=this.tm.getRotation(),e<4&&(this.wheelMeshes[e].position.set(this.p0[e].x(),this.p0[e].y(),this.p0[e].z()),this.wheelMeshes[e].quaternion.set(this.q.x(),this.q.y(),this.q.z(),this.q.w()),this.vehicle.updateWheelTransform(e,false));if(this.tm=this.vehicle.getChassisWorldTransform(),this.p=this.tm.getOrigin(),this.q=this.tm.getRotation(),this.vehicleBody.position.set(this.p.x(),this.p.y(),this.p.z()),this.vehicleBody.quaternion.set(this.q.x(),this.q.y(),this.q.z(),this.q.w()),Math.abs(this.q.z())>.2||Math.abs(this.q.x())>.2?this.badRotationTicks+=1:this.badRotationTicks=0,this.badRotationTicks>60&&Math.abs(this.getCurrentSpeedKmHour(0))<20&&this.useBadRotationTicks){this.stop(),this.start(),this.setRotation(0,this.vehicleBody.rotation.y+Math.PI,0);const e=this.findClosesGround()+1;this.setPosition(void 0,e,void 0)}!this.isPaused&&this.isReady&&(e<33.5&&(this.checkIfSpinning(),this.vehicleAssist(!1)),this.playSkidSound(this.vehicle.getWheelInfo(2).get_m_skidInfo()),this.updateEngineSound(),this.updateFov())}findClosesGround(){const e=this.vehicleBody.position;this.vector2.setValue(e.x,e.y-.1,e.z),this.vector.setValue(e.x,e.y-4,e.z),this.rayer.set_m_rayFromWorld(this.vector2),this.rayer.set_m_rayToWorld(this.vector),this.scene.physics.physicsWorld.rayTest(this.vector,this.vector2,this.rayer);let t=3;return this.rayer.hasHit()&&(t=this.rayer.get_m_hitPointWorld().y()),t}isTouchingGround(e){if(this.vector2.setValue(e.x(),e.y()-.1,e.z()),this.vector.setValue(e.x(),e.y()-2,e.z()),this.rayer.set_m_rayFromWorld(this.vector2),this.rayer.set_m_rayToWorld(this.vector),this.scene.physics.physicsWorld.rayTest(this.vector,this.vector2,this.rayer),this.rayer.hasHit()){const t=this.rayer.get_m_hitPointWorld().y();return Math.abs(t-e.y())<this.vehicleConfig.wheelRadiusBack+.3}return!1}setPosition(e,t,n){this.tm=this.vehicle.getChassisWorldTransform(),this.p=this.tm.getOrigin();const r=this.getVehicleYOffset();this.vehicleBodyPosition.set(null!=e?e:this.p.x(),(null!=t?t:this.p.y())+r,null!=n?n:this.p.z()),this.p.setValue(null!=e?e:this.p.x(),(null!=t?t:this.p.y())+r,null!=n?n:this.p.z()),this.tm.setOrigin(this.p)}getPosition(){const e=this.vehicle.getChassisWorldTransform().getOrigin();return this.vehicleBodyPosition.set(e.x(),e.y()+this.vehicleConfig.centerOfMassOffset,e.z()),this.vehicleBodyPosition}getRotation(){const e=this.vehicle.getChassisWorldTransform().getRotation();return new i.Quaternion(e.x(),e.y(),e.z(),e.w())}setRotation(e,t,n){const r=this.vehicle.getChassisWorldTransform();if(e instanceof i.Quaternion){const t=e;this.quaternion.setValue(t.x,t.y,t.z,t.w),r.setRotation(this.quaternion)}else{const o=new i.Quaternion;o.setFromEuler(new i.Euler(e,t,n)),this.quaternion.setValue(o.x,o.y,o.z,o.w),r.setRotation(this.quaternion)}}getCurrentSpeedKmHour(e){return this.vehicle.getCurrentSpeedKmHour()}createNameMesh(){}lookForwardsBackwards(e){console.warn("Not implemented")}getVehicleYOffset(){var e;const t=-this.vehicleConfig.wheelAxisHeightFront+this.vehicleConfig.suspensionRestLength+this.vehicleConfig.wheelRadiusFront,n=-this.vehicleConfig.wheelAxisHeightBack+this.vehicleConfig.suspensionRestLength+this.vehicleConfig.wheelRadiusBack;return null!==(e=Math.max(n,t))&&void 0!==e?e:2}resetPosition(){this.vehicleBody.body.setAngularVelocity(0,0,0),this.vehicleBody.body.setVelocity(0,0,0);const{position:e,rotation:t}=this.checkpointPositionRotation;this.setPosition(e.x,e.y,e.z),t instanceof i.Quaternion?this.setRotation(t):this.setRotation(t.x,t.y,t.z),this.scene.resetVehicleCallback(this.vehicleNumber)}_updateVehicleSettings(){if(this.vehicleBody.remove(this.camera),!this.useChaseCamera&&this.camera){const{x:e,y:t,z:n}=this.staticCameraPos;this.camera.position.set(e,t,n),this.vehicleBody.add(this.camera)}else{const{x:e,y:t,z:n}=this.getPositionInfrontOfBody();this.camera.position.set(e,t,n),this.camera.lookAt(this.vehicleBody.position.clone())}}_updateVehicleSetup(){this.updateMass(this.vehicleConfig.mass),this.updateWheelsSuspension(),this.updateMaxSpeed()}updateMaxSpeed(){console.log("updating maxspeed",this.vehicleConfig.maxSpeed),this.extraSpeedScaler=(0,a.numberScaler)(0,this.vehicleConfig.maxSpeed,Math.log2(1),Math.log2(800),2)}updateMass(e){this.vehicleConfig.mass=e,this.vector.setValue(this.vehicleConfig.inertia.x,this.vehicleConfig.inertia.y,this.vehicleConfig.inertia.z),this.vehicleBody.body.ammo.getCollisionShape().calculateLocalInertia(e,this.vector),this.vehicle.getRigidBody().setMassProps(this.vehicleConfig.mass,this.vector)}updateWheelsSuspension(){this.tuning.set_m_suspensionStiffness(this.vehicleConfig.suspensionStiffness),this.tuning.set_m_suspensionCompression(this.vehicleConfig.suspensionCompression),this.tuning.set_m_suspensionDamping(this.vehicleConfig.suspensionDamping),this.tuning.set_m_maxSuspensionTravelCm(this.vehicleConfig.maxSuspensionTravelCm),this.tuning.set_m_frictionSlip(this.vehicleConfig.frictionSlip),this.tuning.set_m_maxSuspensionForce(this.vehicleConfig.maxSuspensionForce);for(let e=0;e<this.vehicle.getNumWheels();e++){const t=this.vehicle.getWheelInfo(e);t.set_m_suspensionRestLength1(this.vehicleConfig.suspensionRestLength),t.set_m_suspensionStiffness(this.vehicleConfig.suspensionStiffness),t.set_m_wheelsDampingRelaxation(this.vehicleConfig.suspensionDamping),t.set_m_wheelsDampingCompression(this.vehicleConfig.suspensionDamping),t.set_m_frictionSlip(this.vehicleConfig.frictionSlip),t.set_m_rollInfluence(this.vehicleConfig.rollInfluence),this.vehicle.updateSuspension(0)}}setVehicleConfigKey(e,t){this.vehicleConfig[e]=t,void 0!==this[e]&&(this[e]=t),this.updateWheelsSuspension()}destroyAmmo(e,t){try{Ammo.destroy(e)}catch(e){console.warn("Error destorying:",t)}}destroy(){return r(this,void 0,void 0,(function*(){new Promise(((e,t)=>r(this,void 0,void 0,(function*(){var t,n;this.destroyAmmo(this.zeroVec,"this.zeroVec"),this.destroyAmmo(this.vector,"this.vector"),this.destroyAmmo(this.vector2,"this.vector2");for(let e of this.p0)this.destroyAmmo(e,"p");this.p0=[],this.destroyAmmo(this.rayer,"this.rayer"),this.destroyAmmo(this.quaternion,"this.quaternion"),this.destroyAmmo(this.transformCam,"this.transformCam"),this.destroyAmmo(this.chassisWorldTransfrom,"this.chassisWorldTransfrom"),this.isReady=!1,this._canDrive=!1,this.stopEngineSound(),this.scene.scene.remove(this.engineSound),this.scene&&(null===(t=this.vehicleBody)||void 0===t?void 0:t.body)&&this.scene.destroy(this.vehicleBody);for(let e of this.tires)(null===(n=this.scene)||void 0===n?void 0:n.scene)&&e&&this.scene.scene.remove(e);e()}))))}))}}t.LowPolyVehicle=d;const h=[{name:"back-right-tire",number:3},{name:"back-left-tire",number:2},{name:"front-left-tire",number:0},{name:"front-right-tire",number:1}];let f={};t.loadLowPolyVehicleModels=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=new Promise(((r,i)=>{if(void 0!==f[e])return r([f[e].tires,f[e].chassis]),n;(new o.GLTFLoader).load((0,s.getStaticPath)(`${u.vehicleConfigs[e].path}`),(n=>{let i,o,s=[];for(let e of n.scene.children)if("Mesh"===e.type||"Group"===e.type)if(e.name.includes("chassis")){i=e}else if(e.name.includes("extra-car-stuff"))o=e;else if("tire"===e.name){const n=e;t||n.geometry.center(),s.push(n)}else for(let n of h)e.name===n.name&&(s[n.number]=e,t||s[n.number].geometry.center());f[e]={tires:s,chassis:i},o&&i.add(o),r([s,i])}))}));return n}))},50572:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SphereTestVehicle=void 0;const r=n(95782);class i extends r.SphereVehicle{constructor(e,t,n,r,i,o){super({scene:e,vehicleColor:t,name:n,vehicleNumber:r,vehicleType:i,useSoundEffects:o})}randomDrive(){}intelligentDrive(e){}}t.SphereTestVehicle=i},95782:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.loadSphereModel=t.SphereVehicle=void 0;const i=n(2212),o=n(1217),s=n(72425),a=n(38990),l=n(51002),c=n(11976),u=n(17246);class d extends c.Vehicle{constructor(e){super(e),this.quaternion=new i.Quaternion,this.euler=new i.Euler,this.items=[],this.zVel=0,this.yRot=0,this.physicsConfig={mass:this.vehicleConfig.mass,shape:"convex",autoCenter:!1,collisionFlags:0,addChildren:!1},this.engineForce=this.vehicleConfig.engineForce,this.breakingForce=-1,this.dVel=3,this.dzVel=-1,this.vector=new Ammo.btVector3(0,0,0),this.prevPosition=new i.Vector3(0,0,0)}addModels(e,t){this.staticCameraPos=(0,l.getStaticCameraPos)(this.vehicleSettings.cameraZoom),this.isReady=!1,this.vehicleBody=t.clone(),this.scene.physics.add.existing(this.vehicleBody,this.physicsConfig),this.scene.add.existing(this.vehicleBody,this.physicsConfig),this.vehicleBody.body.name="vehicle-"+this.vehicleNumber,this.vehicleBody.name="vehicle-"+this.vehicleNumber,this.vehicleBody.receiveShadow=!1,this.vehicleBody.castShadow=!0,this.modelsLoaded=!0,(0,c.changeVehicleBodyColor)(this.vehicleBody,[this.vehicleColor]),this.vehicleBody.body.setAngularFactor(0,1,0),this.vehicleBody.body.setFriction(1),this.vehicleBody.body.setCollisionFlags(0),this.vehicleBody.body.setBounciness(.4),this.isReady=!0,this._canDrive=!0}goForward(){this._canDrive&&(this.zVel=-this.vehicleConfig.engineForce)}goBackward(e){this._canDrive&&(this.zVel<10?this.zVel+=10:this.zVel=this.vehicleConfig.engineForce)}noForce(){this.zVel<10*-this.dVel?this.zVel+=this.dVel:this.zVel>10*this.dVel?this.zVel-=this.dVel:this.zVel=0}turnLeft(e){}turnRight(e){}noTurn(){}turn(e){const t=(0,a.getSteerAngleFromBeta)(e,this.vehicleSettings.noSteerNumber);this.yRot%=2*Math.PI,this.yRot-=t*a.degToRad*this.steeringSensitivity*.3}break(e){}zeroBreakForce(){}zeroEngineForce(){this.zVel=0}stop(){var e;this.zVel=0,(null===(e=this.vehicleBody)||void 0===e?void 0:e.body)||this.vehicleBody.body.setCollisionFlags(1),this.vehicleBody.body.setVelocity(0,0,0),this.vehicleBody.body.setAngularVelocity(0,0,0),this.vehicleBody.body.applyForce(0,0,0)}start(){var e,t;null===(t=null===(e=this.vehicleBody)||void 0===e?void 0:e.body)||void 0===t||t.setCollisionFlags(0)}pause(){var e,t;this.isPaused=!0,this._canDrive=!1,this.zVel=0,null===(t=null===(e=this.vehicleBody)||void 0===e?void 0:e.body)||void 0===t||t.setCollisionFlags(1)}unpause(){var e,t;this.isPaused=!1,this._canDrive=!0,null===(t=null===(e=this.vehicleBody)||void 0===e?void 0:e.body)||void 0===t||t.setCollisionFlags(0)}addCamera(e){this.camera=e}removeCamera(){}cameraLookAt(e,t){const n=this.vehicleBody.position.clone();this.cameraTarget.set(n.x-Math.sin(this.yRot)*-this.staticCameraPos.z,n.y+this.staticCameraPos.y,n.z+Math.cos(this.yRot)*-this.staticCameraPos.z),this.cameraDiff.subVectors(this.cameraTarget,e.position),this.cameraDir.x=e.position.x+.9*(this.cameraTarget.x-e.position.x),this.cameraDir.z=e.position.z+.9*(this.cameraTarget.z-e.position.z),this.cameraDir.y=e.position.y+.9*(this.cameraTarget.y-e.position.y);this.cameraLookAtPos.x=this.prevChaseCameraPos.x+.5*(n.x-this.prevChaseCameraPos.x),this.cameraLookAtPos.z=this.prevChaseCameraPos.z+.5*(n.z-this.prevChaseCameraPos.z),this.cameraLookAtPos.y=this.prevChaseCameraPos.y+.5*(n.y-this.prevChaseCameraPos.y),this.prevChaseCameraPos=this.cameraLookAtPos.clone(),e.position.set(this.cameraDir.x,this.cameraDir.y,this.cameraDir.z),e.lookAt(this.cameraLookAtPos),this.cameraLookAtPos=n.clone(),"high"===this.scene.getGraphicsType()&&this.seeVehicle(this.cameraDir.clone())}getTowPivot(){return console.warn("Tow pivot not implemented for sphere"),new i.Vector3(1,0,1)}setPosition(e,t,n){this.vehicleBody.clear(),this.scene.physics.destroy(this.vehicleBody),this.vehicleBody.position.set(e,t+1,n),this.scene.physics.add.existing(this.vehicleBody,this.physicsConfig),this.addItemsBack()}getPosition(){return this.vehicleBody.position}getRotation(){return this.quaternion.setFromEuler(this.vehicleBody.rotation),this.quaternion}setRotation(e,t,n){if(this.vehicleBody.clear(),this.scene.physics.destroy(this.vehicleBody),e instanceof i.Quaternion){e.normalize();this.euler.setFromQuaternion(e.normalize()),this.yRot=this.euler.y,this.vehicleBody.quaternion.set(e.x,e.y,e.z,e.w)}else this.yRot=t,this.vehicleBody.rotation.set(e,t,n);this.scene.physics.add.existing(this.vehicleBody,this.physicsConfig),this.addItemsBack()}addItemsBack(){for(let e of this.items)this.vehicleBody.add(e)}getCurrentSpeedKmHour(e){const t=this.vehicleBody.position,n=3.6*(t.distanceTo(this.prevPosition)/e)*1e3;return this.prevPosition=t.clone(),n}lookForwardsBackwards(e){console.warn("lookForwardsBackwards not imple")}resetPosition(){this.vehicleBody.body.setAngularVelocity(0,0,0),this.vehicleBody.body.setVelocity(0,0,0),this.zVel=0;const{position:e,rotation:t}=this.checkpointPositionRotation;this.setPosition(e.x,e.y,e.z),t instanceof i.Quaternion?this.setRotation(t):this.setRotation(t.x,t.y,t.z),this.scene.resetVehicleCallback(this.vehicleNumber)}_updateVehicleSettings(){}_updateVehicleSetup(){this.items=[],this.updateMass(this.vehicleConfig.mass);for(let e of this.vehicleBody.children)this.items.push(e)}updateMass(e){this.vehicleConfig.mass=e,this.vector.setValue(this.vehicleConfig.inertia.x,this.vehicleConfig.inertia.y,this.vehicleConfig.inertia.z),this.vehicleBody.body.ammo.getCollisionShape().calculateLocalInertia(e,this.vector)}destroy(){return new Promise(((e,t)=>{this.vehicleBody.clear(),this.scene.destroy(this.vehicleBody),e()}))}rotateY(e){this.vehicleBody.rotateY(e)}update(e){this.delta=e,this.vehicleBody.body.setAngularVelocity(this.zVel*Math.cos(this.yRot)*.05,0,this.zVel*Math.sin(this.yRot)*.05),this.vehicleBody.body.applyForce(-this.zVel*Math.sin(this.yRot),0,this.zVel*Math.cos(this.yRot))}}t.SphereVehicle=d;t.loadSphereModel=(e,t)=>r(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>{(new o.GLTFLoader).load((0,s.getStaticPath)(`${u.vehicleConfigs[e].path}`),(e=>{let n,r;for(let t of e.scene.children)if("Mesh"===t.type||"Group"===t.type)if(t.name.includes("sphere")){n=t;const e=n.material.clone();n.material=e}else t.name.includes("extra-stuff")&&(r=t);t(n)}))}))}))},11976:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.changeVehicleBodyColor=t.Vehicle=void 0;const i=n(2212),o=n(1217),s=n(86568),a=n(81135),l=n(44482),c=n(72425),u=n(38990),d=n(51002),h=n(17246),f=(0,u.numberScaler)(55,70,1,400,8),p=(0,u.numberScaler)(1,5,0,330,2);t.Vehicle=class{constructor(e){this.engineSoundLoaded=!1,this.badRotationTicks=0,this.useBadRotationTicks=!0,this.modelsLoaded=!1,this.cameraDir=new i.Vector3,this.cameraLookAtPos=new i.Vector3,this.cameraDiff=new i.Vector3,this.cameraTarget=new i.Vector3,this.steeringSensitivity=.5,this.vehicleSteering=0,this.zeroVec=new Ammo.btVector3(0,0,0),this.checkpointPositionRotation={position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},this.prevChaseCameraPos=new i.Vector3(0,0,0),this.delta=0,this.vehicleType=e.vehicleType,this.vehicleSetup={vehicleType:this.vehicleType},this.vehicleNumber=e.vehicleNumber,this.name=e.name,this.useSoundEffects=e.useSoundEffects,this.scene=e.scene,this.vehicleColor=e.vehicleColor,this.vehicleConfig=this.getDefaultVehicleConfig(),this.isReady=!1,this.isPaused=!1,this._canDrive=!1,this.vehicleSettings=s.defaultVehicleSettings,this.useChaseCamera=!1,this.chaseCameraSpeed=s.defaultVehicleSettings.chaseCameraSpeed,this.chaseCameraTicks=0,this.staticCameraPos=(0,d.getStaticCameraPos)(this.vehicleSettings.cameraZoom),this.oldPos=new i.Vector3(0,0,0),this.currentFov=55,this.vehicleItems={exhaust:void 0,spoiler:void 0,wheelGuards:void 0}}getCanDrive(){return this._canDrive}setCanDrive(e){this._canDrive=e}goForward(){}goBackward(e){}noForce(){}noTurn(){}turn(e){}break(e){}zeroBreakForce(){}zeroEngineForce(){}stop(){}start(){}pause(){}unpause(){}addCamera(e){}removeCamera(){}cameraLookAt(e,t){}update(e){}setPosition(e,t,n){}getPosition(){return console.warn("This function should not be called, getPosition of vehicle class"),new i.Vector3(0,0,0)}getRotation(){return console.warn("This function should not be called, getRotation of vehicle class"),new i.Quaternion(0,0,0,0)}setRotation(e,t,n){}getCurrentSpeedKmHour(e){return console.warn("This function should not be called, getCurrentSpeedKmHour of vehicle class"),0}lookForwardsBackwards(e){}resetPosition(){}setCheckpointPositionRotation(e){this.checkpointPositionRotation=e}setToGround(){}seeVehicle(e){this.delta<33&&this.scene.course.seeObject(e,this.getPosition())}updateVehicleSettings(e,t){var n,r;this.vehicleSettings=Object.assign(Object.assign({},s.defaultVehicleSettings),e);let i=!1;this.vehicleSettings.vehicleType!==this.vehicleType&&(this.scene.setNeedsReload(!0),i=!0);const o=Object.keys(e);for(let t of o)void 0!==e[t]&&(this[t]=e[t]);this.staticCameraPos=(0,d.getStaticCameraPos)(this.vehicleSettings.cameraZoom),"race"===(null===(r=null===(n=this.scene.gameSceneConfig)||void 0===n?void 0:n.gameSettings)||void 0===r?void 0:r.gameType)&&this.setColor(this.vehicleColor),this._updateVehicleSettings(),t&&(t.vehicleType!==this.vehicleType||i?console.warn("Vehiclesetup does not match the vehicle type"):this.updateVehicleSetup(t))}updateVehicleSetup(e){var t,n,i,o,s,l;return r(this,void 0,void 0,(function*(){if(e.vehicleType===this.vehicleType){this.vehicleConfig=this.getDefaultVehicleConfig(),this.vehicleSetup=e;for(let r of a.possibleVehicleItemTypes){(null===(n=null===(t=this.vehicleItems[r])||void 0===t?void 0:t.props)||void 0===n?void 0:n.path)!==(null===(i=e[r])||void 0===i?void 0:i.path)&&((null===(o=this.vehicleItems[r])||void 0===o?void 0:o.model)&&(this.vehicleBody.remove(this.vehicleItems[r].model),this.vehicleItems[r]=void 0),e[r]&&(yield this.addItemToVehicle(e[r].path).then((t=>{this.vehicleItems[r]={props:e[r],model:t}})).catch((()=>{this.vehicleItems[r]=void 0}))));for(let t of a.possibleVehicleMods)(null===(s=null==e?void 0:e[r])||void 0===s?void 0:s[t.type])&&(this.vehicleConfig[t.type]+=Math.floor(1e3*(null===(l=null==e?void 0:e[r])||void 0===l?void 0:l[t.type]))/1e3)}this._updateVehicleSetup()}else console.warn("Vehicle setup doesn't match vehicleType","setupType",e.vehicleType,"this vehicleType:",this.vehicleType)}))}_updateVehicleSetup(){}_updateVehicleSettings(){}setColor(e){this.vehicleColor=e,(0,t.changeVehicleBodyColor)(this.vehicleBody,[this.vehicleColor])}destroy(){return new Promise(((e,t)=>{e()}))}addModels(e,t){}addItemToVehicle(e){return new Promise(((t,n)=>{if(!this.vehicleBody)return console.warn("No vehiclebody to add items to"),void n();(new o.GLTFLoader).load((0,c.getStaticPath)(`models/${this.vehicleType}/${e}.glb`),(e=>{for(let n of e.scene.children)"Mesh"===n.type&&(n.position.set(n.position.x,n.position.y+this.vehicleConfig.centerOfMassOffset,n.position.z),this.vehicleBody.add(n),t(n))}))}))}getDefaultVehicleConfig(){return JSON.parse(JSON.stringify(h.vehicleConfigs[this.vehicleType]))}getTowPivot(){return h.vehicleConfigs[this.vehicleType].towPosition}toggleSound(e){this.useSoundEffects=e,this.engineSound||console.warn("Engine sound not loaded")}stopEngineSound(){this.engineSound&&this.engineSound.source&&this.engineSound.isPlaying&&this.engineSound.stop()}startEngineSound(){var e;this.isPaused||!(null===(e=this.engineSound)||void 0===e?void 0:e.isPlaying)&&this.useSoundEffects&&this.engineSound.play()}updateEngineSound(){if(this.engineSound&&this.useSoundEffects){const e=+p(Math.abs(this.getCurrentSpeedKmHour()));if(!isFinite(e))return void console.warn("Playback rate is non fitite",e);this.engineSound.setPlaybackRate(e)}}createCarSounds(){const e=new i.AudioListener;this.camera.add(e);this.engineSound=new i.Audio(e);const t=[];t.push((0,l.loadEngineSoundBuffer)().then((e=>{this.engineSound.setBuffer(e),this.engineSound.setLoop(!0),this.engineSound.setVolume(.3),this.engineSound.setLoopEnd(2.5),this.stopEngineSound()}))),this.skidSound=new i.Audio(e),t.push((0,l.loadSkidSoundBuffer)().then((e=>{this.skidSound.setBuffer(e),this.skidSound.setLoop(!1),this.skidSound.setVolume(0),this.skidVolume=0}))),Promise.all(t).then((()=>{this.engineSoundLoaded=!0}))}addDownForce(){}updateFov(){this.vehicleSettings.useDynamicFOV&&this.camera&&(this.getCurrentSpeedKmHour()>10?(this.currentFov=Math.min(f(this.getCurrentSpeedKmHour()),70),this.camera.fov=this.currentFov):(this.currentFov-=1,this.currentFov=Math.max(this.currentFov,55),this.camera.fov=this.currentFov))}playSkidSound(e){var t;if(this.skidSound&&this.useSoundEffects&&!this.isPaused&&this._canDrive)if(e<.8){if(this.skidVolume+=.01,this.skidVolume=Math.min(1,this.skidVolume),!isFinite(this.skidVolume))return console.warn("Skid volume non finite",this.skidVolume),void(this.skidVolume=0);this.skidSound.setVolume(this.skidVolume),this.skidSound.isPlaying?this.skidSound.isPlaying:this.skidSound.play()}else this.skidSound.isPlaying&&(this.skidVolume=0,null===(t=this.skidSound)||void 0===t||t.stop())}};t.changeVehicleBodyColor=(e,t)=>{if("Mesh"===e.type)e.material=e.material.clone(),e.material.color=new i.Color(t[0]);else for(let n=0;n<e.children.length;n++)e.children[n].material=e.children[n].material.clone(),e.children[n].material.color=new i.Color(t[n%t.length])}},17246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialVehicleConfigs=t.vehicleConfigs=t.defaultVehicleConfig=t.activeVehicleTypes=t.nonactiveVehcileTypes=t.getVehicleNameFromType=t.isVehicleType=t.getVehicleClassFromType=t.getVehicleColorOption=void 0;const r=n(2212),i=n(28468),o=n(38990);t.getVehicleColorOption=e=>{for(let t of i.vehicleColors)if(t.value===e)return t;return{name:"Unknown color",value:e}};t.getVehicleClassFromType=e=>{var t;for(let n of i.allVehicleTypes)if(n.type===e)return null!==(t=n.vehicleClass)&&void 0!==t?t:"LowPoly";return"LowPoly"};t.isVehicleType=e=>{const t=i.allVehicleTypes.map((e=>e.type));return(0,o.itemInArray)(e,t)};t.getVehicleNameFromType=e=>{var t,n;return null!==(n=null===(t=i.allVehicleTypes.find((t=>t.type===e)))||void 0===t?void 0:t.name)&&void 0!==n?n:"-"},t.nonactiveVehcileTypes=["test","normal","simpleCylindar"],t.activeVehicleTypes=i.allVehicleTypes.filter((e=>!(0,o.itemInArray)(e.type,t.nonactiveVehcileTypes))),t.defaultVehicleConfig={wheelAxisBackPosition:-1,wheelRadiusBack:1,wheelHalfTrackBack:1,wheelAxisHeightBack:-1,wheelAxisFrontPosition:1,wheelRadiusFront:1,wheelHalfTrackFront:1,wheelAxisHeightFront:-1,is4x4:!1,path:"",mass:1e3,engineForce:5e3,breakingForce:200,suspensionStiffness:100,suspensionDamping:4,suspensionCompression:2.4,suspensionRestLength:1.1,maxSuspensionTravelCm:1500,maxSuspensionForce:5e4,frictionSlip:8.5,rollInfluence:.01,inertia:{x:3e3,y:2e3,z:1e3},maxSpeed:300,towPosition:new r.Vector3(0,-.5,-4),maxSteeringAngle:35*o.degToRad,centerOfMassOffset:0},t.vehicleConfigs={normal:Object.assign(Object.assign({},t.defaultVehicleConfig),{wheelAxisBackPosition:-3.5,wheelRadiusBack:.5,wheelHalfTrackBack:1.5,wheelAxisHeightBack:0,wheelAxisFrontPosition:1.15,wheelRadiusFront:.5,wheelHalfTrackFront:1.5,wheelAxisHeightFront:0,suspensionStiffness:40,mass:800,engineForce:5e3,breakingForce:200,is4x4:!1,path:"simple-car.glb",towPosition:new r.Vector3(0,-.5,-4.7)}),normal2:Object.assign(Object.assign({},t.defaultVehicleConfig),{wheelAxisBackPosition:-3.3,wheelRadiusBack:.725,wheelHalfTrackBack:1.35,wheelAxisHeightBack:0,wheelAxisFrontPosition:3.1,wheelRadiusFront:.725,wheelHalfTrackFront:1.35,wheelAxisHeightFront:0,suspensionStiffness:120,mass:600,engineForce:8e3,breakingForce:200,is4x4:!1,maxSpeed:200,frictionSlip:15.5,suspensionCompression:5,centerOfMassOffset:.5,path:"normal-car-2.glb",towPosition:new r.Vector3(0,-.9,-4.7)}),tractor:Object.assign(Object.assign({},t.defaultVehicleConfig),{wheelAxisBackPosition:-1.8,wheelRadiusBack:1.25,wheelHalfTrackBack:1.6,wheelAxisHeightBack:-.8,wheelAxisFrontPosition:2.1,wheelRadiusFront:.85,wheelHalfTrackFront:1.36,wheelAxisHeightFront:-1.1,suspensionStiffness:120,suspensionRestLength:1,mass:1e3,engineForce:8e3,breakingForce:400,is4x4:!1,path:"tractor.glb",towPosition:new r.Vector3(0,-1.9,-3.2),centerOfMassOffset:2}),monsterTruck:Object.assign(Object.assign({},t.defaultVehicleConfig),{wheelAxisBackPosition:-1.9,wheelRadiusBack:.75,wheelHalfTrackBack:1.2,wheelAxisHeightBack:-.5,wheelAxisFrontPosition:1.55,wheelRadiusFront:.75,wheelHalfTrackFront:1.2,wheelAxisHeightFront:-.5,mass:1e3,engineForce:9e3,breakingForce:200,is4x4:!0,inertia:{x:3e3,y:2e3,z:3e3},suspensionRestLength:1.5,maxSuspensionTravelCm:1500,suspensionStiffness:120,path:"low-poly-monster-truck.glb"}),offRoader:Object.assign(Object.assign({},t.defaultVehicleConfig),{wheelAxisBackPosition:-1.85,wheelRadiusBack:.9,wheelHalfTrackBack:1.25,wheelAxisHeightBack:-.7,wheelAxisFrontPosition:1.95,wheelRadiusFront:.9,wheelHalfTrackFront:1.25,wheelAxisHeightFront:-.7,mass:1200,engineForce:9e3,breakingForce:400,is4x4:!0,suspensionRestLength:1.1,frictionSlip:15.5,maxSuspensionTravelCm:100,suspensionStiffness:120,suspensionCompression:20,path:"off-roader.glb",centerOfMassOffset:1.5,towPosition:new r.Vector3(0,-1.35,-3.3)}),sportsCar:Object.assign(Object.assign({},t.defaultVehicleConfig),{wheelAxisBackPosition:-2.55,wheelRadiusBack:.6,wheelHalfTrackBack:1.3,wheelAxisFrontPosition:2.85,wheelRadiusFront:.6,wheelHalfTrackFront:1.3,wheelAxisHeightFront:0,wheelAxisHeightBack:0,suspensionRestLength:.9,mass:600,engineForce:12500,breakingForce:300,is4x4:!1,maxSpeed:350,frictionSlip:4.3,suspensionStiffness:50,towPosition:new r.Vector3(0,-.5,-4),path:"sports-car.glb",centerOfMassOffset:1}),f1:Object.assign(Object.assign({},t.defaultVehicleConfig),{path:"F1-car.glb",wheelAxisBackPosition:-2.7,wheelRadiusBack:.475,wheelHalfTrackBack:1.3,wheelAxisHeightBack:0,wheelAxisFrontPosition:2.95,wheelRadiusFront:.475,wheelHalfTrackFront:1.3,wheelAxisHeightFront:0,suspensionRestLength:.4,frictionSlip:5.5,mass:300,engineForce:6500,breakingForce:250,is4x4:!1,towPosition:new r.Vector3(0,.5,-3.7),centerOfMassOffset:.5}),test:Object.assign(Object.assign({},t.defaultVehicleConfig),{path:"test-vehicle.glb",wheelAxisBackPosition:-3.5,wheelRadiusBack:1,wheelHalfTrackBack:3,wheelAxisHeightBack:-.25,wheelAxisFrontPosition:2.5,wheelRadiusFront:1,wheelHalfTrackFront:3,wheelAxisHeightFront:-.25,mass:200,engineForce:5e3,breakingForce:100,suspensionRestLength:.7,is4x4:!1,centerOfMassOffset:1}),future:Object.assign(Object.assign({},t.defaultVehicleConfig),{path:"future-vehicle.glb",wheelAxisBackPosition:-1.9,wheelRadiusBack:.75,wheelHalfTrackBack:1.76,wheelAxisHeightBack:.41,wheelAxisFrontPosition:2.75,wheelRadiusFront:.75,wheelHalfTrackFront:1.76,wheelAxisHeightFront:.41,suspensionCompression:1,suspensionStiffness:75,maxSuspensionTravelCm:500,maxSpeed:270,mass:300,engineForce:8500,breakingForce:200,maxSteeringAngle:25,suspensionRestLength:.87,is4x4:!1,centerOfMassOffset:.75}),gokart:Object.assign(Object.assign({},t.defaultVehicleConfig),{wheelRadiusBack:.315,wheelRadiusFront:.315,wheelAxisBackPosition:-1.3,wheelHalfTrackBack:1.2,wheelAxisHeightBack:0,wheelAxisFrontPosition:1.3,wheelHalfTrackFront:1,wheelAxisHeightFront:0,suspensionRestLength:.35,suspensionStiffness:150,maxSpeed:250,mass:200,engineForce:2500,frictionSlip:15.5,path:"gokart.glb",maxSteeringAngle:20*o.degToRad,centerOfMassOffset:.5}),simpleSphere:Object.assign(Object.assign({},t.defaultVehicleConfig),{path:"simple-sphere.glb",mass:400,engineForce:300}),simpleCylindar:Object.assign(Object.assign({},t.defaultVehicleConfig),{path:"simple-cylindar.glb",mass:400,engineForce:300,inertia:{x:100,y:100,z:100}})},t.initialVehicleConfigs=JSON.parse(JSON.stringify(t.vehicleConfigs))},8377:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultVehiclesSetup=t.defaultVehicleSetup=void 0,t.defaultVehicleSetup={vehicleType:"normal2"},t.defaultVehiclesSetup={normal:{vehicleType:"normal"},tractor:{vehicleType:"tractor"},f1:{vehicleType:"f1"},test:{vehicleType:"test"},offRoader:{vehicleType:"offRoader"},sportsCar:{vehicleType:"sportsCar"},normal2:{vehicleType:"normal2"},simpleSphere:{vehicleType:"simpleSphere"},simpleCylindar:{vehicleType:"simpleCylindar"},gokart:{vehicleType:"gokart"},future:{vehicleType:"future"}}},76431:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Wagon=t.isWagon=t.getWagonNumber=void 0;const i=n(2212),o=n(1217),s=n(72425),a=n(38990),l=n(59711),c=n(85053),u=[{name:"right-tire",number:1},{name:"left-tire",number:0}];t.getWagonNumber=e=>+e.split("-")[1];t.isWagon=e=>"wagon"===e.name.slice(0,5);t.Wagon=class{constructor(e,t,n){this.v=new i.Vector2(0,0),this.w=new i.Vector2(0,0),this.wagonNumber=n,this.wagonType=t,this.config=c.wagonConfigs[this.wagonType],this.tires=[],this.scene=e,this.vehicleConnectionNumber=-1}constructWagon(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>r(this,void 0,void 0,(function*(){yield this.loadModels(),this.createWagonWithAxis(),console.log("created wagon with axis"),e()}))))}))}createWagonWithAxis(){const e=this.config.mass;this.scene.add.existing(this.axis),this.scene.add.existing(this.wagonBody),this.wagonBody.name=`wagon-${this.wagonNumber}`,this.wagonBody.position.setY(this.wagonBody.position.y+3),this.axis.position.setY(this.axis.position.y+3),this.axisDiff=this.wagonBody.position.clone(),this.axisDiff.sub(this.axis.position).clone(),this.scene.physics.add.existing(this.wagonBody,{mass:e,shape:"convex"}),this.createAxis(),this.createAxisHinge(),this.createWagonCollisionDetection(),this.isReady=!0}createAxis(){return r(this,void 0,void 0,(function*(){this.scene.physics.add.existing(this.axis,{mass:50,shape:"convex"})}))}createWagonCollisionDetection(){this.wagonBody.body.checkCollisions=!0,this.wagonBody.body.on.collision(((e,t)=>{(0,l.isVehicle)(e)&&this.scene.vehicleCollidedWithObject(this.wagonBody,(0,l.getVehicleNumber)(e.name))}))}removeWagonCollisionDetection(){this.wagonBody.body.checkCollisions=!1}update(){}createAxisHinge(){this.axisHinge=this.scene.physics.add.constraints.hinge(this.wagonBody.body,this.axis.body,{axisA:{x:1},axisB:{x:1},pivotA:{y:this.axis.position.y-this.wagonBody.position.y,z:this.axis.position.z-this.wagonBody.position.z,x:this.axis.position.x-this.wagonBody.position.x}})}connectToVehicle(e){if(this.hinge)return void console.warn("Wagon already connected to vehilce");const t=this.wagonBody.position,n=e.getPosition(),r=this.wagonBody.rotation,i=e.vehicleBody.rotation,o=Math.PI/8,s=r.y-o,l=r.y+o,c=Math.abs((0,a.get2DAngleBetweenPoints)(this.wagonBody.position,e.vehicleBody.position));this.v.set(n.x,n.z),this.w.set(t.x,t.z);const u=this.v.distanceTo(this.w),d=this.v.length()*Math.sin(c)/u,h=Math.asin(d%1),f=r.y+o,p=r.y-o;return console.log((0,a.isBetweenAngles)(s,l,i.y)),!(!(p<h||h<f)||!(0,a.isBetweenAngles)(s,l,i.y))&&(this.hinge=this.scene.physics.add.constraints.hinge(e.vehicleBody.body,this.wagonBody.body,{axisA:{y:1},axisB:{y:1},pivotA:e.getTowPivot(),pivotB:Object.assign({},this.connectPoint.position)},!1),this.vehicleConnectionNumber=e.vehicleNumber,this.removeWagonCollisionDetection(),!0)}setPositionRotation(e,t){return r(this,void 0,void 0,(function*(){this.axisHinge&&this.scene.physics.physicsWorld.removeConstraint(this.axisHinge),this.scene.physics.destroy(this.axis.body),this.scene.physics.destroy(this.wagonBody.body);this.wagonBody.position.set(e.x,e.y+2,e.z),this.axis.position.set(this.wagonBody.position.x+this.axisDiff.x,this.wagonBody.position.y-this.axisDiff.y,this.wagonBody.position.z-this.axisDiff.z),this.wagonBody.rotation.setFromQuaternion(t),this.axis.rotation.setFromQuaternion(t),setTimeout((()=>{this.scene.physics.add.existing(this.axis,{mass:50,shape:"convex"}),this.scene.physics.add.existing(this.wagonBody,{shape:"convex",mass:this.config.mass}),this.createAxisHinge(),this.createWagonCollisionDetection()}),100)}))}isConnectedToVehicle(e){return e.vehicleNumber===this.vehicleConnectionNumber}removeConnection(){this.vehicleConnectionNumber=-1,this.hinge&&(this.scene.physics.physicsWorld.removeConstraint(this.hinge),Ammo.destroy(this.hinge),this.hinge=null),setTimeout((()=>{this.createWagonCollisionDetection()}),500)}destroy(){this.hinge&&this.scene.physics.physicsWorld.removeConstraint(this.hinge),this.axisHinge&&this.scene.physics.physicsWorld.removeConstraint(this.axisHinge),this.scene.destroy(this.wagonBody),this.scene.destroy(this.axis)}loadModels(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{(new o.GLTFLoader).load((0,s.getStaticPath)(`${this.config.path}`),(t=>{for(let e of t.scene.children)if(e.name.includes("wagon"))this.wagonBody=e;else if("connect-point"===e.name)this.connectPoint=e;else if("axis"===e.name)this.axis=e;else for(let t of u)e.name===t.name&&(this.tires[t.number]=e);e()}))}))}))}}},85053:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wagonConfigs=t.allWagonTypes=void 0,t.allWagonTypes=[{type:"smallWagon",name:"Small wagon"},{type:"tractorWagon",name:"Tractor Wagon"}];const n={wheelAxisPosition:-1.15,wheelRadius:.93,wheelHalfTrack:3.5,wheelAxisHeight:-.76,mass:100,suspensionStiffness:100,suspensionDamping:4,suspensionCompression:2.4,suspensionRestLength:1.1,maxSuspensionTravelCm:1500,maxSuspensionForce:5e4,frictionSlip:8.5,rollInfluence:.01,path:""};t.wagonConfigs={smallWagon:Object.assign(Object.assign({},n),{path:"small-wagon.glb"}),tractorWagon:Object.assign(Object.assign({},n),{path:"tractor-wagon.glb"})}},21614:function(e,t,n){"use strict";var r;n.r(t),n.d(t,{NIL:function(){return R},parse:function(){return g},stringify:function(){return h},v1:function(){return m},v3:function(){return C},v4:function(){return M},v5:function(){return I},validate:function(){return a},version:function(){return L}});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=function(e){return"string"==typeof e&&s.test(e)},l=[],c=0;c<256;++c)l.push((c+256).toString(16).substr(1));var u,d,h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!a(n))throw TypeError("Stringified UUID is invalid");return n},f=0,p=0;var m=function(e,t,n){var r=t&&n||0,i=t||new Array(16),s=(e=e||{}).node||u,a=void 0!==e.clockseq?e.clockseq:d;if(null==s||null==a){var l=e.random||(e.rng||o)();null==s&&(s=u=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==a&&(a=d=16383&(l[6]<<8|l[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:p+1,g=c-f+(m-p)/1e4;if(g<0&&void 0===e.clockseq&&(a=a+1&16383),(g<0||c>f)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=c,p=m,d=a;var v=(1e4*(268435455&(c+=122192928e5))+m)%4294967296;i[r++]=v>>>24&255,i[r++]=v>>>16&255,i[r++]=v>>>8&255,i[r++]=255&v;var y=c/4294967296*1e4&268435455;i[r++]=y>>>8&255,i[r++]=255&y,i[r++]=y>>>24&15|16,i[r++]=y>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var b=0;b<6;++b)i[r+b]=s[b];return t||h(i)};var g=function(e){if(!a(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function v(e,t,n){function r(e,r,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=g(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(r),s.set(e,r.length),(s=n(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(var a=0;a<16;++a)i[o+a]=s[a];return i}return h(s)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function y(e){return 14+(e+64>>>9<<4)+1}function b(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function w(e,t,n,r,i,o){return b((s=b(b(t,e),b(r,o)))<<(a=i)|s>>>32-a,n);var s,a}function x(e,t,n,r,i,o,s){return w(t&n|~t&r,e,t,i,o,s)}function _(e,t,n,r,i,o,s){return w(t&r|n&~r,e,t,i,o,s)}function S(e,t,n,r,i,o,s){return w(t^n^r,e,t,i,o,s)}function E(e,t,n,r,i,o,s){return w(n^(t|~r),e,t,i,o,s)}var T=function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=e[i>>5]>>>i%32&255,s=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[y(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=n,l=r,c=i,u=o;n=x(n,r,i,o,e[s],7,-680876936),o=x(o,n,r,i,e[s+1],12,-389564586),i=x(i,o,n,r,e[s+2],17,606105819),r=x(r,i,o,n,e[s+3],22,-1044525330),n=x(n,r,i,o,e[s+4],7,-176418897),o=x(o,n,r,i,e[s+5],12,1200080426),i=x(i,o,n,r,e[s+6],17,-1473231341),r=x(r,i,o,n,e[s+7],22,-45705983),n=x(n,r,i,o,e[s+8],7,1770035416),o=x(o,n,r,i,e[s+9],12,-1958414417),i=x(i,o,n,r,e[s+10],17,-42063),r=x(r,i,o,n,e[s+11],22,-1990404162),n=x(n,r,i,o,e[s+12],7,1804603682),o=x(o,n,r,i,e[s+13],12,-40341101),i=x(i,o,n,r,e[s+14],17,-1502002290),n=_(n,r=x(r,i,o,n,e[s+15],22,1236535329),i,o,e[s+1],5,-165796510),o=_(o,n,r,i,e[s+6],9,-1069501632),i=_(i,o,n,r,e[s+11],14,643717713),r=_(r,i,o,n,e[s],20,-373897302),n=_(n,r,i,o,e[s+5],5,-701558691),o=_(o,n,r,i,e[s+10],9,38016083),i=_(i,o,n,r,e[s+15],14,-660478335),r=_(r,i,o,n,e[s+4],20,-405537848),n=_(n,r,i,o,e[s+9],5,568446438),o=_(o,n,r,i,e[s+14],9,-1019803690),i=_(i,o,n,r,e[s+3],14,-187363961),r=_(r,i,o,n,e[s+8],20,1163531501),n=_(n,r,i,o,e[s+13],5,-1444681467),o=_(o,n,r,i,e[s+2],9,-51403784),i=_(i,o,n,r,e[s+7],14,1735328473),n=S(n,r=_(r,i,o,n,e[s+12],20,-1926607734),i,o,e[s+5],4,-378558),o=S(o,n,r,i,e[s+8],11,-2022574463),i=S(i,o,n,r,e[s+11],16,1839030562),r=S(r,i,o,n,e[s+14],23,-35309556),n=S(n,r,i,o,e[s+1],4,-1530992060),o=S(o,n,r,i,e[s+4],11,1272893353),i=S(i,o,n,r,e[s+7],16,-155497632),r=S(r,i,o,n,e[s+10],23,-1094730640),n=S(n,r,i,o,e[s+13],4,681279174),o=S(o,n,r,i,e[s],11,-358537222),i=S(i,o,n,r,e[s+3],16,-722521979),r=S(r,i,o,n,e[s+6],23,76029189),n=S(n,r,i,o,e[s+9],4,-640364487),o=S(o,n,r,i,e[s+12],11,-421815835),i=S(i,o,n,r,e[s+15],16,530742520),n=E(n,r=S(r,i,o,n,e[s+2],23,-995338651),i,o,e[s],6,-198630844),o=E(o,n,r,i,e[s+7],10,1126891415),i=E(i,o,n,r,e[s+14],15,-1416354905),r=E(r,i,o,n,e[s+5],21,-57434055),n=E(n,r,i,o,e[s+12],6,1700485571),o=E(o,n,r,i,e[s+3],10,-1894986606),i=E(i,o,n,r,e[s+10],15,-1051523),r=E(r,i,o,n,e[s+1],21,-2054922799),n=E(n,r,i,o,e[s+8],6,1873313359),o=E(o,n,r,i,e[s+15],10,-30611744),i=E(i,o,n,r,e[s+6],15,-1560198380),r=E(r,i,o,n,e[s+13],21,1309151649),n=E(n,r,i,o,e[s+4],6,-145523070),o=E(o,n,r,i,e[s+11],10,-1120210379),i=E(i,o,n,r,e[s+2],15,718787259),r=E(r,i,o,n,e[s+9],21,-343485551),n=b(n,a),r=b(r,l),i=b(i,c),o=b(o,u)}return[n,r,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(y(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))},C=v("v3",48,T);var M=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return h(r)};function k(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function P(e,t){return e<<t|e>>>32-t}var A=function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),l=0;l<s;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=e[64*l+4*u]<<24|e[64*l+4*u+1]<<16|e[64*l+4*u+2]<<8|e[64*l+4*u+3];a[l]=c}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<s;++d){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[d][f];for(var p=16;p<80;++p)h[p]=P(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var m=n[0],g=n[1],v=n[2],y=n[3],b=n[4],w=0;w<80;++w){var x=Math.floor(w/20),_=P(m,5)+k(x,g,v,y)+b+t[x]+h[w]>>>0;b=y,y=v,v=P(g,30)>>>0,g=m,m=_}n[0]=n[0]+m>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+v>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]},I=v("v5",80,A),R="00000000-0000-0000-0000-000000000000";var L=function(e){if(!a(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},82281:function(e){"use strict";var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},i=0,o=0;function s(e){var t="";do{t=n[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function a(){var e=s(+new Date);return e!==t?(i=0,t=e):e+"."+s(i++)}for(;o<64;o++)r[n[o]]=o;a.encode=s,a.decode=function(e){var t=0;for(o=0;o<e.length;o++)t=64*t+r[e.charAt(o)];return t},e.exports=a},47070:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;var i=n(72822),o=function(e,t,n){void 0===n&&(n=!1),this.fn=e,this.context=t,this.once=n},s=function(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||e,i);return e._events.has(t)?e._events.get(t).fn?e._events.set(t,[e._events.get(t),s]):e._events.get(t).push(s):(e._events.set(t,s),e._eventsCount++),e},a=function(e,t){0==--e._eventsCount?e._events=new Map:e._events.delete(t)},l=function(){function e(){this._events=new Map,this._eventsCount=0}return Object.defineProperty(e,"VERSION",{get:function(){return i.VERSION},enumerable:!1,configurable:!0}),e.prototype.eventNames=function(){return Array.from(this._events.keys())},e.prototype.listeners=function(e){var t=this._events.get(e);if(!t)return[];if(t.fn)return[t.fn];for(var n=0,r=t.length,i=new Array(r);n<r;n++)i[n]=t[n].fn;return i},e.prototype.listenerCount=function(e){var t=this._events.get(e);return t?t.fn?1:t.length:0},e.prototype.emit=function(e){for(var t,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(!this._events.has(e))return!1;var s,a=this._events.get(e);if(a.fn)return a.once&&this.removeListener(e,a.fn,void 0,!0),(t=a.fn).call.apply(t,r([a.context],i)),!0;var l=a.length;for(s=0;s<l;s++)a[s].once&&this.removeListener(e,a[s].fn,void 0,!0),(n=a[s].fn).call.apply(n,r([a[s].context],i));return!0},e.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},e.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},e.prototype.removeListener=function(e,t,n,r){if(!this._events.has(e))return this;if(!t)return a(this,e),this;var i=this._events.get(e);if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||a(this,e);else{for(var o=0,s=[],l=i.length;o<l;o++)(i[o].fn!==t||r&&!i[o].once||n&&i[o].context!==n)&&s.push(i[o]);s.length?this._events.set(e,1===s.length?s[0]:s):a(this,e)}return this},e.prototype.removeAllListeners=function(e){return e?this._events.delete(e)&&a(this,e):(this._events=new Map,this._eventsCount=0),this},Object.defineProperty(e.prototype,"off",{get:function(){return this.removeListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"addListener",{get:function(){return this.on},enumerable:!1,configurable:!0}),e}();t.Events=l},72822:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="0.0.5"},64428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.io=t.Socket=t.Manager=t.protocol=void 0;const r=n(25253),i=n(36530),o=n(11227)("socket.io-client");e.exports=t=a;const s=t.managers={};function a(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};const n=r.url(e,t.path||"/socket.io"),a=n.source,l=n.id,c=n.path,u=s[l]&&c in s[l].nsps;let d;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?(o("ignoring socket cache for %s",a),d=new i.Manager(a,t)):(s[l]||(o("new io instance for %s",a),s[l]=new i.Manager(a,t)),d=s[l]),n.query&&!t.query&&(t.query=n.queryKey),d.socket(n.path,t)}t.io=a;var l=n(95485);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return l.protocol}}),t.connect=a;var c=n(36530);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return c.Manager}});var u=n(87055);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return u.Socket}}),t.default=a},36530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;const r=n(45983),i=n(87055),o=n(95485),s=n(43598),a=n(43010),l=n(57204),c=n(11227)("socket.io-client:manager");class u extends l.StrictEventEmitter{constructor(e,t){super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new a({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(c("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=s.on(t,"open",(function(){n.onopen(),e&&e()})),o=s.on(t,"error",(t=>{c("error"),n.cleanup(),n._readyState="closed",this.emitReserved("error",t),e?e(t):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;c("connect attempt will timeout after %d",e),0===e&&i();const n=setTimeout((()=>{c("connect attempt timed out after %d",e),i(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){c("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(s.on(e,"ping",this.onping.bind(this)),s.on(e,"data",this.ondata.bind(this)),s.on(e,"error",this.onerror.bind(this)),s.on(e,"close",this.onclose.bind(this)),s.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){c("error",e),this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n||(n=new i.Socket(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t){if(this.nsps[e].active)return void c("socket %s is still active, skipping close",e)}this._close()}_packet(e){c("writing packet %j",e);const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){c("cleanup"),this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){c("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){c("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const n=setTimeout((()=>{e.skipReconnect||(c("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(c("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(c("reconnect success"),e.onreconnect())})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}t.Manager=u},43598:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,n){return e.on(t,n),function(){e.off(t,n)}}},87055:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const r=n(95485),i=n(43598),o=n(57204),s=n(11227)("socket.io-client:socket"),a=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class l extends o.StrictEventEmitter{constructor(e,t,n){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[i.on(e,"open",this.onopen.bind(this)),i.on(e,"packet",this.onpacket.bind(this)),i.on(e,"error",this.onerror.bind(this)),i.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(a.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const n={type:r.PacketType.EVENT,data:t,options:{}};n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(s("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++);const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)?s("discard packet as the transport is not currently writable"):this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){s("transport is open - connecting"),"function"==typeof this.auth?this.auth((e=>{this.packet({type:r.PacketType.CONNECT,data:e})})):this.packet({type:r.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){s("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case r.PacketType.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case r.PacketType.EVENT:case r.PacketType.BINARY_EVENT:this.onevent(e);break;case r.PacketType.ACK:case r.PacketType.BINARY_ACK:this.onack(e);break;case r.PacketType.DISCONNECT:this.ondisconnect();break;case r.PacketType.CONNECT_ERROR:const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];s("emitting event %j",t),null!=e.id&&(s("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let n=!1;return function(...i){n||(n=!0,s("sending ack %j",i),t.packet({type:r.PacketType.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(s("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):s("bad ack %s",e.id)}onconnect(e){s("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>this.packet(e))),this.sendBuffer=[]}ondisconnect(){s("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(s("performing disconnect (%s)",this.nsp),this.packet({type:r.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}t.Socket=l},57204:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StrictEventEmitter=void 0;const r=n(98767);t.StrictEventEmitter=class extends r{on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}emit(e,...t){return super.emit(e,...t),this}emitReserved(e,...t){return super.emit(e,...t),this}listeners(e){return super.listeners(e)}}},25253:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;const r=n(64187),i=n(11227)("socket.io-client:url");t.url=function(e,t="",n){let o=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),i("parse %s",e),o=r(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const s=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port+t,o.href=o.protocol+"://"+s+(n&&n.port===o.port?"":":"+o.port),o}},87462:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},51721:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{Z:function(){return i}})},63366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},32238:function(e,t,n){"use strict";n.d(t,{ZR:function(){return o.ZR},Jn:function(){return S},l4:function(){return u},H9:function(){return p},Vr:function(){return m},Af:function(){return h},Z8:function(){return b},lz:function(){return f},qX:function(){return v},Xd:function(){return g},wN:function(){return y},P2:function(){return M},Mq:function(){return T},C6:function(){return C},ZF:function(){return E},TP:function(){return P},KN:function(){return k},Ub:function(){return A}});var r=n(8463),i=n(53333),o=n(74444);class s{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const a="@firebase/app",l="0.7.14",c=new i.Yd("@firebase/app"),u="[DEFAULT]",d={[a]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},h=new Map,f=new Map;function p(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function g(e){const t=e.name;if(f.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;f.set(t,e);for(const t of h.values())p(t,e);return!0}function v(e,t){return e.container.getProvider(t)}function y(e,t,n=u){v(e,t).clearInstance(n)}function b(){f.clear()}const w={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."},x=new o.LL("app","Firebase",w);class _{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw x.create("app-deleted",{appName:this._name})}}const S="9.6.4";function E(e,t={}){if("object"!=typeof t){t={name:t}}const n=Object.assign({name:u,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw x.create("bad-app-name",{appName:String(i)});const s=h.get(i);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw x.create("duplicate-app",{appName:i})}const a=new r.H0(i);for(const e of f.values())a.addComponent(e);const l=new _(e,n,a);return h.set(i,l),l}function T(e=u){const t=h.get(e);if(!t)throw x.create("no-app",{appName:e});return t}function C(){return Array.from(h.values())}async function M(e){const t=e.name;h.has(t)&&(h.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function k(e,t,n){var i;let o=null!==(i=d[e])&&void 0!==i?i:e;n&&(o+=`-${n}`);const s=o.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${o}" with version "${t}":`];return s&&e.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}g(new r.wA(`${o}-version`,(()=>({library:o,version:t})),"VERSION"))}function P(e,t){if(null!==e&&"function"!=typeof e)throw x.create("invalid-log-argument");(0,i.Am)(e,t)}function A(e){(0,i.Ub)(e)}var I;I="",g(new r.wA("platform-logger",(e=>new s(e)),"PRIVATE")),k(a,l,I),k(a,l,"esm2017"),k("fire-js","")},8463:function(e,t,n){"use strict";n.d(t,{wA:function(){return i},H0:function(){return a}});var r=n(74444);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class s{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===o?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},53333:function(e,t,n){"use strict";n.d(t,{in:function(){return i},Yd:function(){return c},Ub:function(){return u},Am:function(){return d}});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const o={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},s=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class c{constructor(e){this.name=e,this._logLevel=s,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function u(e){r.forEach((t=>{t.setLogLevel(e)}))}function d(e,t){for(const n of r){let r=null;t&&t.level&&(r=o[t.level]),n.userLogHandler=null===e?null:(t,n,...o)=>{const s=o.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:s,args:o,type:t.name})}}}},69365:function(e,t,n){"use strict";n.r(t),n.d(t,{OrbitControls:function(){return a},MapControls:function(){return l}});var r=n(2212);const i={type:"change"},o={type:"start"},s={type:"end"};class a extends r.EventDispatcher{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r.MOUSE.ROTATE,MIDDLE:r.MOUSE.DOLLY,RIGHT:r.MOUSE.PAN},this.touches={ONE:r.TOUCH.ROTATE,TWO:r.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",$),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),l=a.NONE},this.update=function(){const t=new r.Vector3,o=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),s=o.clone().invert(),m=new r.Vector3,g=new r.Quaternion,v=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(o),u.setFromVector3(t),n.autoRotate&&l===a.NONE&&M(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(u.theta+=d.theta*n.dampingFactor,u.phi+=d.phi*n.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let r=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(r)&&isFinite(y)&&(r<-Math.PI?r+=v:r>Math.PI&&(r-=v),y<-Math.PI?y+=v:y>Math.PI&&(y-=v),u.theta=r<=y?Math.max(r,Math.min(y,u.theta)):u.theta>(r+y)/2?Math.max(r,u.theta):Math.min(y,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=h,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),!0===n.enableDamping?n.target.addScaledVector(f,n.dampingFactor):n.target.add(f),t.setFromSpherical(u),t.applyQuaternion(s),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),f.set(0,0,0)),h=1,!!(p||m.distanceToSquared(n.object.position)>c||8*(1-g.dot(n.object.quaternion))>c)&&(n.dispatchEvent(i),m.copy(n.object.position),g.copy(n.object.quaternion),p=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",q),n.domElement.removeEventListener("pointerdown",U),n.domElement.removeEventListener("pointercancel",G),n.domElement.removeEventListener("wheel",W),n.domElement.removeEventListener("pointermove",j),n.domElement.removeEventListener("pointerup",H),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",$)};const n=this,a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new r.Spherical,d=new r.Spherical;let h=1;const f=new r.Vector3;let p=!1;const m=new r.Vector2,g=new r.Vector2,v=new r.Vector2,y=new r.Vector2,b=new r.Vector2,w=new r.Vector2,x=new r.Vector2,_=new r.Vector2,S=new r.Vector2,E=[],T={};function C(){return Math.pow(.95,n.zoomSpeed)}function M(e){d.theta-=e}function k(e){d.phi-=e}const P=function(){const e=new r.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),f.add(e)}}(),A=function(){const e=new r.Vector3;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),f.add(e)}}(),I=function(){const e=new r.Vector3;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),P(2*t*s/i.clientHeight,n.object.matrix),A(2*r*s/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(P(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),A(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function R(e){n.object.isPerspectiveCamera?h/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e){n.object.isPerspectiveCamera?h*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(e){m.set(e.clientX,e.clientY)}function N(e){y.set(e.clientX,e.clientY)}function D(){if(1===E.length)m.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);m.set(e,t)}}function F(){if(1===E.length)y.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);y.set(e,t)}}function B(){const e=E[0].pageX-E[1].pageX,t=E[0].pageY-E[1].pageY,n=Math.sqrt(e*e+t*t);x.set(0,n)}function Z(e){if(1==E.length)g.set(e.pageX,e.pageY);else{const t=X(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);g.set(n,r)}v.subVectors(g,m).multiplyScalar(n.rotateSpeed);const t=n.domElement;M(2*Math.PI*v.x/t.clientHeight),k(2*Math.PI*v.y/t.clientHeight),m.copy(g)}function V(e){if(1===E.length)b.set(e.pageX,e.pageY);else{const t=X(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);b.set(n,r)}w.subVectors(b,y).multiplyScalar(n.panSpeed),I(w.x,w.y),y.copy(b)}function z(e){const t=X(e),r=e.pageX-t.x,i=e.pageY-t.y,o=Math.sqrt(r*r+i*i);_.set(0,o),S.set(0,Math.pow(_.y/x.y,n.zoomSpeed)),R(S.y),x.copy(_)}function U(e){!1!==n.enabled&&(0===E.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",j),n.domElement.addEventListener("pointerup",H)),function(e){E.push(e)}(e),"touch"===e.pointerType?function(e){switch(K(e),E.length){case 1:switch(n.touches.ONE){case r.TOUCH.ROTATE:if(!1===n.enableRotate)return;D(),l=a.TOUCH_ROTATE;break;case r.TOUCH.PAN:if(!1===n.enablePan)return;F(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(n.touches.TWO){case r.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&B(),n.enablePan&&F(),l=a.TOUCH_DOLLY_PAN;break;case r.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&B(),n.enableRotate&&D(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(o)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case r.MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),l=a.DOLLY;break;case r.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;N(e),l=a.PAN}else{if(!1===n.enableRotate)return;O(e),l=a.ROTATE}break;case r.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;O(e),l=a.ROTATE}else{if(!1===n.enablePan)return;N(e),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(o)}(e))}function j(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(K(e),l){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;Z(e),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;V(e),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&z(e),n.enablePan&&V(e)}(e),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&z(e),n.enableRotate&&Z(e)}(e),n.update();break;default:l=a.NONE}}(e):function(e){if(!1===n.enabled)return;switch(l){case a.ROTATE:if(!1===n.enableRotate)return;!function(e){g.set(e.clientX,e.clientY),v.subVectors(g,m).multiplyScalar(n.rotateSpeed);const t=n.domElement;M(2*Math.PI*v.x/t.clientHeight),k(2*Math.PI*v.y/t.clientHeight),m.copy(g),n.update()}(e);break;case a.DOLLY:if(!1===n.enableZoom)return;!function(e){_.set(e.clientX,e.clientY),S.subVectors(_,x),S.y>0?R(C()):S.y<0&&L(C()),x.copy(_),n.update()}(e);break;case a.PAN:if(!1===n.enablePan)return;!function(e){b.set(e.clientX,e.clientY),w.subVectors(b,y).multiplyScalar(n.panSpeed),I(w.x,w.y),y.copy(b),n.update()}(e)}}(e))}function H(e){Y(e),0===E.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",j),n.domElement.removeEventListener("pointerup",H)),n.dispatchEvent(s),l=a.NONE}function G(e){Y(e)}function W(e){!1!==n.enabled&&!1!==n.enableZoom&&l===a.NONE&&(e.preventDefault(),n.dispatchEvent(o),function(e){e.deltaY<0?L(C()):e.deltaY>0&&R(C()),n.update()}(e),n.dispatchEvent(s))}function $(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:I(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:I(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:I(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:I(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function q(e){!1!==n.enabled&&e.preventDefault()}function Y(e){delete T[e.pointerId];for(let t=0;t<E.length;t++)if(E[t].pointerId==e.pointerId)return void E.splice(t,1)}function K(e){let t=T[e.pointerId];void 0===t&&(t=new r.Vector2,T[e.pointerId]=t),t.set(e.pageX,e.pageY)}function X(e){const t=e.pointerId===E[0].pointerId?E[1]:E[0];return T[t.pointerId]}n.domElement.addEventListener("contextmenu",q),n.domElement.addEventListener("pointerdown",U),n.domElement.addEventListener("pointercancel",G),n.domElement.addEventListener("wheel",W,{passive:!1}),this.update()}}class l extends a{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=r.MOUSE.PAN,this.mouseButtons.RIGHT=r.MOUSE.ROTATE,this.touches.ONE=r.TOUCH.PAN,this.touches.TWO=r.TOUCH.DOLLY_ROTATE}}},1217:function(e,t,n){"use strict";n.r(t),n.d(t,{GLTFLoader:function(){return i}});var r=n(2212);class i extends r.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new c(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new g(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new d(e)})),this.register((function(e){return new h(e)})),this.register((function(e){return new f(e)})),this.register((function(e){return new p(e)})),this.register((function(e){return new a(e)})),this.register((function(e){return new v(e)}))}load(e,t,n,i){const o=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:r.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);const a=function(t){i?i(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},l=new r.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(n){try{o.parse(n,s,(function(n){t(n),o.manager.itemEnd(e)}),a)}catch(e){a(e)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let o;const a={},c={};if("string"==typeof e)o=e;else{if(r.LoaderUtils.decodeText(new Uint8Array(e,0,4))===y){try{a[s.KHR_BINARY_GLTF]=new x(e)}catch(e){return void(i&&i(e))}o=a[s.KHR_BINARY_GLTF].content}else o=r.LoaderUtils.decodeText(new Uint8Array(e))}const u=JSON.parse(o);if(void 0===u.asset||u.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const d=new Q(u,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](d);c[t.name]=t,a[t.name]=!0}if(u.extensionsUsed)for(let e=0;e<u.extensionsUsed.length;++e){const t=u.extensionsUsed[e],n=u.extensionsRequired||[];switch(t){case s.KHR_MATERIALS_UNLIT:a[t]=new l;break;case s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[t]=new T;break;case s.KHR_DRACO_MESH_COMPRESSION:a[t]=new _(u,this.dracoLoader);break;case s.KHR_TEXTURE_TRANSFORM:a[t]=new S;break;case s.KHR_MESH_QUANTIZATION:a[t]=new C;break;default:n.indexOf(t)>=0&&void 0===c[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}d.setExtensions(a),d.setPlugins(c),d.parse(n,i)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function o(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const s={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class a{constructor(e){this.parser=e,this.name=s.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const o=t.json,s=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let a;const l=new r.Color(16777215);void 0!==s.color&&l.fromArray(s.color);const c=void 0!==s.range?s.range:0;switch(s.type){case"directional":a=new r.DirectionalLight(l),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new r.PointLight(l),a.distance=c;break;case"spot":a=new r.SpotLight(l),a.distance=c,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return a.position.set(0,0,0),a.decay=2,void 0!==s.intensity&&(a.intensity=s.intensity),a.name=t.createUniqueName(s.name||"light_"+e),i=Promise.resolve(a),t.cache.add(n,i),i}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class l{constructor(){this.name=s.KHR_MATERIALS_UNLIT}getMaterialType(){return r.MeshBasicMaterial}extendParams(e,t,n){const i=[];e.color=new r.Color(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const t=o.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==o.baseColorTexture&&i.push(n.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(i)}}class c{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&o.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&o.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(o.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const e=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new r.Vector2(e,e)}return Promise.all(o)}}class u{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new r.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=i.extensions[this.name];return void 0!==s.sheenColorFactor&&t.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&o.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture)),void 0!==s.sheenRoughnessTexture&&o.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}}class d{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class h{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&o.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||0;const a=s.attenuationColor||[1,1,1];return t.attenuationColor=new r.Color(a[0],a[1],a[2]),Promise.all(o)}}class f{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class p{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&o.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return t.specularColor=new r.Color(a[0],a[1],a[2]),void 0!==s.specularColorTexture&&o.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture).then((function(e){e.encoding=r.sRGBEncoding}))),Promise.all(o)}}class m{constructor(e){this.parser=e,this.name=s.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=n.images[i.source],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,s)}}class g{constructor(e){this.parser=e,this.name=s.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],s=r.images[o.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,s,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class v{constructor(e){this.name=s.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,i.ready]).then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,o=e.count,s=e.byteStride,a=new ArrayBuffer(o*s),l=new Uint8Array(t[0],n,r);return i.decodeGltfBuffer(new Uint8Array(a),o,s,l,e.mode,e.filter),a}))}return null}}const y="glTF",b=1313821514,w=5130562;class x{constructor(e){this.name=s.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:r.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==y)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,i=new DataView(e,12);let o=0;for(;o<n;){const t=i.getUint32(o,!0);o+=4;const n=i.getUint32(o,!0);if(o+=4,n===b){const n=new Uint8Array(e,12+o,t);this.content=r.LoaderUtils.decodeText(n)}else if(n===w){const n=12+o;this.body=e.slice(n,n+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class _{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=s.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},a={},l={};for(const e in o){const t=z[e]||e.toLowerCase();s[t]=o[e]}for(const t in e.attributes){const r=z[t]||t.toLowerCase();if(void 0!==o[t]){const i=n.accessors[e.attributes[t]],o=F[i.componentType];l[r]=o,a[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=a[t];void 0!==r&&(n.normalized=r)}t(e)}),s,l)}))}))}}class S{constructor(){this.name=s.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class E extends r.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new r.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(e){for(const t in a)e.uniforms[t]=a[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(e){a.specular.value=e}},specularMap:{get:function(){return a.specularMap.value},set:function(e){a.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(e){a.glossiness.value=e}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(e){a.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class T{constructor(){this.name=s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return E}extendParams(e,t,n){const i=t.extensions[this.name];e.color=new r.Color(1,1,1),e.opacity=1;const o=[];if(Array.isArray(i.diffuseFactor)){const t=i.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==i.diffuseTexture&&o.push(n.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new r.Color(0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new r.Color(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){const t=i.specularGlossinessTexture;o.push(n.assignTexture(e,"glossinessMap",t)),o.push(n.assignTexture(e,"specularMap",t))}return Promise.all(o)}createMaterial(e){const t=new E(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=r.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class C{constructor(){this.name=s.KHR_MESH_QUANTIZATION}}class M extends r.Interpolant{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}}M.prototype.beforeStart_=M.prototype.copySampleValue_,M.prototype.afterEnd_=M.prototype.copySampleValue_,M.prototype.interpolate_=function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=2*s,l=3*s,c=r-t,u=(n-t)/c,d=u*u,h=d*u,f=e*l,p=f-l,m=-2*h+3*d,g=h-d,v=1-m,y=g-d+u;for(let e=0;e!==s;e++){const t=o[p+e+s],n=o[p+e+a]*c,r=o[f+e+s],l=o[f+e]*c;i[e]=v*t+y*n+m*r+g*l}return i};const k=new r.Quaternion;class P extends M{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return k.fromArray(i).normalize().toArray(i),i}}const A=0,I=1,R=2,L=3,O=4,N=5,D=6,F={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},B={9728:r.NearestFilter,9729:r.LinearFilter,9984:r.NearestMipmapNearestFilter,9985:r.LinearMipmapNearestFilter,9986:r.NearestMipmapLinearFilter,9987:r.LinearMipmapLinearFilter},Z={33071:r.ClampToEdgeWrapping,33648:r.MirroredRepeatWrapping,10497:r.RepeatWrapping},V={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},z={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},U={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},j={CUBICSPLINE:void 0,LINEAR:r.InterpolateLinear,STEP:r.InterpolateDiscrete},H="OPAQUE",G="MASK",W="BLEND";function $(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function q(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Y(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function K(e){const t=e.extensions&&e.extensions[s.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+X(t.attributes):e.indices+":"+X(e.attributes)+":"+e.mode,n}function X(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function J(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Q{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new o,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox|Safari/.test(navigator.userAgent)?this.textureLoader=new r.ImageBitmapLoader(this.options.manager):this.textureLoader=new r.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new r.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};$(i,o,r),q(o,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,r]of e.children.entries())i(r,t.children[n])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[s.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(e,o){n.load(r.LoaderUtils.resolveURL(t.uri,i.path),e,void 0,(function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);const o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then((function(e){const o=e[0],s=V[i.type],a=F[i.componentType],l=a.BYTES_PER_ELEMENT,c=l*s,u=i.byteOffset||0,d=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,h=!0===i.normalized;let f,p;if(d&&d!==c){const e=Math.floor(u/d),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let c=t.cache.get(n);c||(f=new a(o,e*d,i.count*d/l),c=new r.InterleavedBuffer(f,d/l),t.cache.add(n,c)),p=new r.InterleavedBufferAttribute(c,s,u%d/l,h)}else f=null===o?new a(i.count*s):new a(o,u,i.count*s),p=new r.BufferAttribute(f,s,h);if(void 0!==i.sparse){const t=V.SCALAR,n=F[i.sparse.indices.componentType],l=i.sparse.indices.byteOffset||0,c=i.sparse.values.byteOffset||0,u=new n(e[1],l,i.sparse.count*t),d=new a(e[2],c,i.sparse.count*s);null!==o&&(p=new r.BufferAttribute(p.array.slice(),p.itemSize,p.normalized));for(let e=0,t=u.length;e<t;e++){const t=u[e];if(p.setX(t,d[e*s]),s>=2&&p.setY(t,d[e*s+1]),s>=3&&p.setZ(t,d[e*s+2]),s>=4&&p.setW(t,d[e*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e],i=t.images[r.source];let o=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(o=e)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,n){const i=this,o=this.json,s=this.options,a=o.textures[e],l=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=self.URL||self.webkitURL;let u=t.uri||"",d=!1;if(void 0!==t.bufferView)u=i.getDependency("bufferView",t.bufferView).then((function(e){d=!0;const n=new Blob([e],{type:t.mimeType});return u=c.createObjectURL(n),u}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(u).then((function(e){return new Promise((function(t,i){let o=t;!0===n.isImageBitmapLoader&&(o=function(e){const n=new r.Texture(e);n.needsUpdate=!0,t(n)}),n.load(r.LoaderUtils.resolveURL(e,s.path),o,void 0,i)}))})).then((function(t){!0===d&&c.revokeObjectURL(u),t.flipY=!1,a.name&&(t.name=a.name);const n=(o.samplers||{})[a.sampler]||{};return t.magFilter=B[n.magFilter]||r.LinearFilter,t.minFilter=B[n.minFilter]||r.LinearMipmapLinearFilter,t.wrapS=Z[n.wrapS]||r.RepeatWrapping,t.wrapT=Z[n.wrapT]||r.RepeatWrapping,i.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",u),null}));return this.textureCache[l]=h,h}assignTexture(e,t,n){const r=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[s.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[s.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(i);i=r.extensions[s.KHR_TEXTURE_TRANSFORM].extendTexture(i,e),r.associations.set(i,t)}}return e[t]=i,i}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,o=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new r.PointsMaterial,r.Material.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new r.LineBasicMaterial,r.Material.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(i||o||s){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),i&&(e+="derivative-tangents:"),o&&(e+="vertex-colors:"),s&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),o&&(t.vertexColors=!0),s&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return r.MeshStandardMaterial}loadMaterial(e){const t=this,n=this.json,i=this.extensions,o=n.materials[e];let a;const l={},c=o.extensions||{},u=[];if(c[s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=i[s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=e.getMaterialType(),u.push(e.extendParams(l,o,t))}else if(c[s.KHR_MATERIALS_UNLIT]){const e=i[s.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),u.push(e.extendParams(l,o,t))}else{const n=o.pbrMetallicRoughness||{};if(l.color=new r.Color(1,1,1),l.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;l.color.fromArray(e),l.opacity=e[3]}void 0!==n.baseColorTexture&&u.push(t.assignTexture(l,"map",n.baseColorTexture)),l.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,l.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(u.push(t.assignTexture(l,"metalnessMap",n.metallicRoughnessTexture)),u.push(t.assignTexture(l,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,l)}))))}!0===o.doubleSided&&(l.side=r.DoubleSide);const d=o.alphaMode||H;if(d===W?(l.transparent=!0,l.depthWrite=!1):(l.format=r.RGBFormat,l.transparent=!1,d===G&&(l.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&a!==r.MeshBasicMaterial&&(u.push(t.assignTexture(l,"normalMap",o.normalTexture)),l.normalScale=new r.Vector2(1,1),void 0!==o.normalTexture.scale)){const e=o.normalTexture.scale;l.normalScale.set(e,e)}return void 0!==o.occlusionTexture&&a!==r.MeshBasicMaterial&&(u.push(t.assignTexture(l,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(l.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&a!==r.MeshBasicMaterial&&(l.emissive=(new r.Color).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&a!==r.MeshBasicMaterial&&u.push(t.assignTexture(l,"emissiveMap",o.emissiveTexture)),Promise.all(u).then((function(){let n;return n=a===E?i[s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):new a(l),o.name&&(n.name=o.name),n.map&&(n.map.encoding=r.sRGBEncoding),n.emissiveMap&&(n.emissiveMap.encoding=r.sRGBEncoding),q(n,o),t.associations.set(n,{materials:e}),o.extensions&&$(i,n,o),n}))}createUniqueName(e){const t=r.PropertyBinding.sanitizeNodeName(e||"");let n=t;for(let e=1;this.nodeNamesUsed[n];++e)n=t+"_"+e;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function o(e){return n[s.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return te(n,e,t)}))}const a=[];for(let n=0,l=e.length;n<l;n++){const l=e[n],c=K(l),u=i[c];if(u)a.push(u.promise);else{let e;e=l.extensions&&l.extensions[s.KHR_DRACO_MESH_COMPRESSION]?o(l):te(new r.BufferGeometry,l,t),i[c]={primitive:l,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,i=this.extensions,o=n.meshes[e],s=o.primitives,a=[];for(let e=0,t=s.length;e<t;e++){const t=void 0===s[e].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new r.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.FrontSide})),l.DefaultMaterial):this.getDependency("material",s[e].material);a.push(t)}var l;return a.push(t.loadGeometries(s)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),l=n[n.length-1],c=[];for(let n=0,u=l.length;n<u;n++){const u=l[n],d=s[n];let h;const f=a[n];if(d.mode===O||d.mode===N||d.mode===D||void 0===d.mode)h=!0===o.isSkinnedMesh?new r.SkinnedMesh(u,f):new r.Mesh(u,f),!0!==h.isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),d.mode===N?h.geometry=ne(h.geometry,r.TriangleStripDrawMode):d.mode===D&&(h.geometry=ne(h.geometry,r.TriangleFanDrawMode));else if(d.mode===I)h=new r.LineSegments(u,f);else if(d.mode===L)h=new r.Line(u,f);else if(d.mode===R)h=new r.LineLoop(u,f);else{if(d.mode!==A)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);h=new r.Points(u,f)}Object.keys(h.geometry.morphAttributes).length>0&&Y(h,o),h.name=t.createUniqueName(o.name||"mesh_"+e),q(h,o),d.extensions&&$(i,h,d),t.assignFinalMaterial(h),c.push(h)}for(let n=0,r=c.length;n<r;n++)t.associations.set(c[n],{meshes:e,primitives:n});if(1===c.length)return c[0];const u=new r.Group;t.associations.set(u,{meshes:e});for(let e=0,t=c.length;e<t;e++)u.add(c[e]);return u}))}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new r.PerspectiveCamera(r.MathUtils.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new r.OrthographicCamera(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),q(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],i=[],o=[],s=[],a=[];for(let e=0,r=t.channels.length;e<r;e++){const r=t.channels[e],l=t.samplers[r.sampler],c=r.target,u=void 0!==c.node?c.node:c.id,d=void 0!==t.parameters?t.parameters[l.input]:l.input,h=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",u)),i.push(this.getDependency("accessor",d)),o.push(this.getDependency("accessor",h)),s.push(l),a.push(c)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(o),Promise.all(s),Promise.all(a)]).then((function(n){const i=n[0],o=n[1],s=n[2],a=n[3],l=n[4],c=[];for(let e=0,t=i.length;e<t;e++){const t=i[e],n=o[e],u=s[e],d=a[e],h=l[e];if(void 0===t)continue;let f;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,U[h.path]){case U.weights:f=r.NumberKeyframeTrack;break;case U.rotation:f=r.QuaternionKeyframeTrack;break;default:f=r.VectorKeyframeTrack}const p=t.name?t.name:t.uuid,m=void 0!==d.interpolation?j[d.interpolation]:r.InterpolateLinear,g=[];U[h.path]===U.weights?t.traverse((function(e){e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)})):g.push(p);let v=u.array;if(u.normalized){const e=J(v.constructor),t=new Float32Array(v.length);for(let n=0,r=v.length;n<r;n++)t[n]=v[n]*e;v=t}for(let e=0,t=g.length;e<t;e++){const t=new f(g[e]+"."+U[h.path],n.array,v,m);"CUBICSPLINE"===d.interpolation&&(t.createInterpolant=function(e){return new(this instanceof r.QuaternionKeyframeTrack?P:M)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(t)}}const u=t.name?t.name:"animation_"+e;return new r.AnimationClip(u,void 0,c)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,i=this,o=t.nodes[e],s=o.name?i.createUniqueName(o.name):"";return function(){const t=[],n=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==o.camera&&t.push(i.getDependency("camera",o.camera).then((function(e){return i._getNodeRef(i.cameraCache,o.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let a;if(a=!0===o.isBone?new r.Bone:t.length>1?new r.Group:1===t.length?t[0]:new r.Object3D,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(o.name&&(a.userData.name=o.name,a.name=s),q(a,o),o.extensions&&$(n,a,o),void 0!==o.matrix){const e=new r.Matrix4;e.fromArray(o.matrix),a.applyMatrix4(e)}else void 0!==o.translation&&a.position.fromArray(o.translation),void 0!==o.rotation&&a.quaternion.fromArray(o.rotation),void 0!==o.scale&&a.scale.fromArray(o.scale);return i.associations.has(a)||i.associations.set(a,{}),i.associations.get(a).nodes=e,a}))}loadScene(e){const t=this.json,n=this.extensions,i=this.json.scenes[e],o=this,s=new r.Group;i.name&&(s.name=o.createUniqueName(i.name)),q(s,i),i.extensions&&$(n,s,i);const a=i.nodes||[],l=[];for(let e=0,n=a.length;e<n;e++)l.push(ee(a[e],s,t,o));return Promise.all(l).then((function(){return o.associations=(e=>{const t=new Map;for(const[e,n]of o.associations)(e instanceof r.Material||e instanceof r.Texture)&&t.set(e,n);return e.traverse((e=>{const n=o.associations.get(e);null!=n&&t.set(e,n)})),t})(s),s}))}}function ee(e,t,n,i){const o=n.nodes[e];return i.getDependency("node",e).then((function(e){if(void 0===o.skin)return e;let t;return i.getDependency("skin",o.skin).then((function(e){t=e;const n=[];for(let e=0,r=t.joints.length;e<r;e++)n.push(i.getDependency("node",t.joints[e]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const i=[],o=[];for(let e=0,s=n.length;e<s;e++){const s=n[e];if(s){i.push(s);const n=new r.Matrix4;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*e),o.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}e.bind(new r.Skeleton(i,o),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const r=[];if(o.children){const t=o.children;for(let o=0,s=t.length;o<s;o++){const s=t[o];r.push(ee(s,e,n,i))}}return Promise.all(r)}))}function te(e,t,n){const i=t.attributes,o=[];function s(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const t in i){const n=z[t]||t.toLowerCase();n in e.attributes||o.push(s(i[t],n))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(r)}return q(e,t),function(e,t,n){const i=t.attributes,o=new r.Box3;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,s=e.max;if(void 0===t||void 0===s)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(o.set(new r.Vector3(t[0],t[1],t[2]),new r.Vector3(s[0],s[1],s[2])),e.normalized){const t=J(F[e.componentType]);o.min.multiplyScalar(t),o.max.multiplyScalar(t)}}const s=t.targets;if(void 0!==s){const e=new r.Vector3,t=new r.Vector3;for(let r=0,i=s.length;r<i;r++){const i=s[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],o=r.min,s=r.max;if(void 0!==o&&void 0!==s){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(s[2]))),r.normalized){const e=J(F[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(e)}e.boundingBox=o;const a=new r.Sphere;o.getCenter(a.center),a.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);const o=[],s=[];for(let a=0,l=t.length;a<l;a++){const l=t[a];if(r){const t=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):e.attributes.position;o.push(t)}if(i){const t=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):e.attributes.normal;s.push(t)}}return Promise.all([Promise.all(o),Promise.all(s)]).then((function(t){const n=t[0],o=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function ne(e,t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,o=[];if(t===r.TriangleFanDrawMode)for(let e=1;e<=i;e++)o.push(n.getX(0)),o.push(n.getX(e)),o.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2==0?(o.push(n.getX(e)),o.push(n.getX(e+1)),o.push(n.getX(e+2))):(o.push(n.getX(e+2)),o.push(n.getX(e+1)),o.push(n.getX(e)));o.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=e.clone();return s.setIndex(o),s}},66382:function(e){"use strict";e.exports=JSON.parse('{"6kpdgrpyr":"basic-tag-course.glb","shtehz3ky":"basic-track1.glb","27vudho8w31r":"basic-track2.glb","4dstf68vk075x":"basic-track3.glb","6cf00jo8bjhwhi":"basic-track4.glb","3jy6tczw5zot":"challenge-track.glb","sixkjas7z":"F1-car.glb","p2grmb3h7heh2n3":"f1-track-2.glb","f0x03oqv5kwgg":"f1-track.glb","eb4g56dr3o0dsod":"farm-track.glb","0wseh0wxthqx83":"farmers-little-helper-map.glb","sl443du1q":"ferrari-track.glb","uigojwujzfw4q":"front-page.glb","vzlemfrr2sz4m":"future-vehicle.glb","zqvw2ebby0":"gokart.glb","czmlokihvbqhhbwv":"low-poly-monster-truck.glb","4gwqq0if35l":"monaco-track.glb","zrvq782ruzkn2q4":"moonshine-mission-map.glb","yvtjptzggl6wp4":"normal-car-2.glb","gzh4zqerucr":"number-billboard.glb","rohhsddyscvl":"nurn-track.glb","f17aznigxjar":"off-roader.glb","6ye0l6el2kg":"russia-track.glb","0xyjonw755r00cy":"sea-side-track.glb","7y5hldcaa":"simple-car.glb","nnlcgsatwp15vl0p":"simple-cylindar.glb","y72hkfqkv6c7q56":"simple-sphere.glb","gae4fr68whfn31qc":"simple-tag-course.glb","gcf887em4vc":"skii-map.glb","cnkcjs6co4p0":"small-jump-track.glb","onjac2vu0tnrt":"small-track.glb","ro1ruj4n":"small-wagon.glb","ofuh8445ehccb":"spa-track.glb","s86srd2c00jld3":"speed-test-track.glb","7o1y81c5":"sports-car.glb","eu31lvs4n3d2n4":"test-course.glb","xv0rbwf4fu":"test-vehicle.glb","gkj3ikgpskftw":"town-track.glb","sizt4wkbf":"tractor-wagon.glb","eykju1woc":"tractor.glb"}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e}();var __webpack_exports__=__webpack_require__(2127)})();